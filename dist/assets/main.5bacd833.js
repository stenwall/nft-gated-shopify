(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".wallet-btn{font-family:Helvetica,Arial,sans-serif;color:#c3c0bb!important;font-weight:400!important;border-radius:0!important;border:1px solid #c3c0bb!important;width:100%!important}.wallet-btn:hover{background:unset!important;box-shadow:0 0 0 2.3px #c3c0bb,0 0 0 2px #0f0e12}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(){var Rr,$r,kr,Pr,Br;"use strict";function _mergeNamespaces(it,tt){for(var rt=0;rt<tt.length;rt++){const at=tt[rt];if(typeof at!="string"&&!Array.isArray(at)){for(const st in at)if(st!=="default"&&!(st in it)){const ot=Object.getOwnPropertyDescriptor(at,st);ot&&Object.defineProperty(it,st,ot.get?ot:{enumerable:!0,get:()=>at[st]})}}}return Object.freeze(Object.defineProperty(it,Symbol.toStringTag,{value:"Module"}))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function getDefaultExportFromCjs(it){return it&&it.__esModule&&Object.prototype.hasOwnProperty.call(it,"default")?it.default:it}function getAugmentedNamespace(it){var tt=it.default;if(typeof tt=="function"){var rt=function(){return tt.apply(this,arguments)};rt.prototype=tt.prototype}else rt={};return Object.defineProperty(rt,"__esModule",{value:!0}),Object.keys(it).forEach(function(at){var st=Object.getOwnPropertyDescriptor(it,at);Object.defineProperty(rt,at,st.get?st:{enumerable:!0,get:function(){return it[at]}})}),rt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var l$a=Symbol.for("react.element"),n$c=Symbol.for("react.portal"),p$b=Symbol.for("react.fragment"),q$7=Symbol.for("react.strict_mode"),r$d=Symbol.for("react.profiler"),t$a=Symbol.for("react.provider"),u$7=Symbol.for("react.context"),v$7=Symbol.for("react.forward_ref"),w$7=Symbol.for("react.suspense"),x$9=Symbol.for("react.memo"),y$6=Symbol.for("react.lazy"),z$9=Symbol.iterator;function A$9(it){return it===null||typeof it!="object"?null:(it=z$9&&it[z$9]||it["@@iterator"],typeof it=="function"?it:null)}var B$6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$6=Object.assign,D$4={};function E$6(it,tt,rt){this.props=it,this.context=tt,this.refs=D$4,this.updater=rt||B$6}E$6.prototype.isReactComponent={},E$6.prototype.setState=function(it,tt){if(typeof it!="object"&&typeof it!="function"&&it!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,it,tt,"setState")},E$6.prototype.forceUpdate=function(it){this.updater.enqueueForceUpdate(this,it,"forceUpdate")};function F$4(){}F$4.prototype=E$6.prototype;function G$2(it,tt,rt){this.props=it,this.context=tt,this.refs=D$4,this.updater=rt||B$6}var H$5=G$2.prototype=new F$4;H$5.constructor=G$2,C$6(H$5,E$6.prototype),H$5.isPureReactComponent=!0;var I$6=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$7={current:null},L$5={key:!0,ref:!0,__self:!0,__source:!0};function M$5(it,tt,rt){var at,st={},ot=null,lt=null;if(tt!=null)for(at in tt.ref!==void 0&&(lt=tt.ref),tt.key!==void 0&&(ot=""+tt.key),tt)J$1.call(tt,at)&&!L$5.hasOwnProperty(at)&&(st[at]=tt[at]);var ut=arguments.length-2;if(ut===1)st.children=rt;else if(1<ut){for(var ht=Array(ut),mt=0;mt<ut;mt++)ht[mt]=arguments[mt+2];st.children=ht}if(it&&it.defaultProps)for(at in ut=it.defaultProps,ut)st[at]===void 0&&(st[at]=ut[at]);return{$$typeof:l$a,type:it,key:ot,ref:lt,props:st,_owner:K$7.current}}function N$6(it,tt){return{$$typeof:l$a,type:it.type,key:tt,ref:it.ref,props:it.props,_owner:it._owner}}function O$3(it){return typeof it=="object"&&it!==null&&it.$$typeof===l$a}function escape$1(it){var tt={"=":"=0",":":"=2"};return"$"+it.replace(/[=:]/g,function(rt){return tt[rt]})}var P$6=/\/+/g;function Q$3(it,tt){return typeof it=="object"&&it!==null&&it.key!=null?escape$1(""+it.key):tt.toString(36)}function R$5(it,tt,rt,at,st){var ot=typeof it;(ot==="undefined"||ot==="boolean")&&(it=null);var lt=!1;if(it===null)lt=!0;else switch(ot){case"string":case"number":lt=!0;break;case"object":switch(it.$$typeof){case l$a:case n$c:lt=!0}}if(lt)return lt=it,st=st(lt),it=at===""?"."+Q$3(lt,0):at,I$6(st)?(rt="",it!=null&&(rt=it.replace(P$6,"$&/")+"/"),R$5(st,tt,rt,"",function(mt){return mt})):st!=null&&(O$3(st)&&(st=N$6(st,rt+(!st.key||lt&&lt.key===st.key?"":(""+st.key).replace(P$6,"$&/")+"/")+it)),tt.push(st)),1;if(lt=0,at=at===""?".":at+":",I$6(it))for(var ut=0;ut<it.length;ut++){ot=it[ut];var ht=at+Q$3(ot,ut);lt+=R$5(ot,tt,rt,ht,st)}else if(ht=A$9(it),typeof ht=="function")for(it=ht.call(it),ut=0;!(ot=it.next()).done;)ot=ot.value,ht=at+Q$3(ot,ut++),lt+=R$5(ot,tt,rt,ht,st);else if(ot==="object")throw tt=String(it),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(it).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.");return lt}function S$5(it,tt,rt){if(it==null)return it;var at=[],st=0;return R$5(it,at,"","",function(ot){return tt.call(rt,ot,st++)}),at}function T$7(it){if(it._status===-1){var tt=it._result;tt=tt(),tt.then(function(rt){(it._status===0||it._status===-1)&&(it._status=1,it._result=rt)},function(rt){(it._status===0||it._status===-1)&&(it._status=2,it._result=rt)}),it._status===-1&&(it._status=0,it._result=tt)}if(it._status===1)return it._result.default;throw it._result}var U$2={current:null},V$4={transition:null},W$8={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$7};react_production_min.Children={map:S$5,forEach:function(it,tt,rt){S$5(it,function(){tt.apply(this,arguments)},rt)},count:function(it){var tt=0;return S$5(it,function(){tt++}),tt},toArray:function(it){return S$5(it,function(tt){return tt})||[]},only:function(it){if(!O$3(it))throw Error("React.Children.only expected to receive a single React element child.");return it}},react_production_min.Component=E$6,react_production_min.Fragment=p$b,react_production_min.Profiler=r$d,react_production_min.PureComponent=G$2,react_production_min.StrictMode=q$7,react_production_min.Suspense=w$7,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$8,react_production_min.cloneElement=function(it,tt,rt){if(it==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+it+".");var at=C$6({},it.props),st=it.key,ot=it.ref,lt=it._owner;if(tt!=null){if(tt.ref!==void 0&&(ot=tt.ref,lt=K$7.current),tt.key!==void 0&&(st=""+tt.key),it.type&&it.type.defaultProps)var ut=it.type.defaultProps;for(ht in tt)J$1.call(tt,ht)&&!L$5.hasOwnProperty(ht)&&(at[ht]=tt[ht]===void 0&&ut!==void 0?ut[ht]:tt[ht])}var ht=arguments.length-2;if(ht===1)at.children=rt;else if(1<ht){ut=Array(ht);for(var mt=0;mt<ht;mt++)ut[mt]=arguments[mt+2];at.children=ut}return{$$typeof:l$a,type:it.type,key:st,ref:ot,props:at,_owner:lt}},react_production_min.createContext=function(it){return it={$$typeof:u$7,_currentValue:it,_currentValue2:it,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},it.Provider={$$typeof:t$a,_context:it},it.Consumer=it},react_production_min.createElement=M$5,react_production_min.createFactory=function(it){var tt=M$5.bind(null,it);return tt.type=it,tt},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(it){return{$$typeof:v$7,render:it}},react_production_min.isValidElement=O$3,react_production_min.lazy=function(it){return{$$typeof:y$6,_payload:{_status:-1,_result:it},_init:T$7}},react_production_min.memo=function(it,tt){return{$$typeof:x$9,type:it,compare:tt===void 0?null:tt}},react_production_min.startTransition=function(it){var tt=V$4.transition;V$4.transition={};try{it()}finally{V$4.transition=tt}},react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production_min.useCallback=function(it,tt){return U$2.current.useCallback(it,tt)},react_production_min.useContext=function(it){return U$2.current.useContext(it)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(it){return U$2.current.useDeferredValue(it)},react_production_min.useEffect=function(it,tt){return U$2.current.useEffect(it,tt)},react_production_min.useId=function(){return U$2.current.useId()},react_production_min.useImperativeHandle=function(it,tt,rt){return U$2.current.useImperativeHandle(it,tt,rt)},react_production_min.useInsertionEffect=function(it,tt){return U$2.current.useInsertionEffect(it,tt)},react_production_min.useLayoutEffect=function(it,tt){return U$2.current.useLayoutEffect(it,tt)},react_production_min.useMemo=function(it,tt){return U$2.current.useMemo(it,tt)},react_production_min.useReducer=function(it,tt,rt){return U$2.current.useReducer(it,tt,rt)},react_production_min.useRef=function(it){return U$2.current.useRef(it)},react_production_min.useState=function(it){return U$2.current.useState(it)},react_production_min.useSyncExternalStore=function(it,tt,rt){return U$2.current.useSyncExternalStore(it,tt,rt)},react_production_min.useTransition=function(){return U$2.current.useTransition()},react_production_min.version="18.2.0",function(it){it.exports=react_production_min}(react);const React$1=getDefaultExportFromCjs(react.exports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[react.exports]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var f$8=react.exports,k$7=Symbol.for("react.element"),l$9=Symbol.for("react.fragment"),m$8=Object.prototype.hasOwnProperty,n$b=f$8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$a={key:!0,ref:!0,__self:!0,__source:!0};function q$6(it,tt,rt){var at,st={},ot=null,lt=null;rt!==void 0&&(ot=""+rt),tt.key!==void 0&&(ot=""+tt.key),tt.ref!==void 0&&(lt=tt.ref);for(at in tt)m$8.call(tt,at)&&!p$a.hasOwnProperty(at)&&(st[at]=tt[at]);if(it&&it.defaultProps)for(at in tt=it.defaultProps,tt)st[at]===void 0&&(st[at]=tt[at]);return{$$typeof:k$7,type:it,key:ot,ref:lt,props:st,_owner:n$b.current}}reactJsxRuntime_production_min.Fragment=l$9,reactJsxRuntime_production_min.jsx=q$6,reactJsxRuntime_production_min.jsxs=q$6,function(it){it.exports=reactJsxRuntime_production_min}(jsxRuntime);const Fragment$1=jsxRuntime.exports.Fragment,jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs;var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(it){function tt(Ut,Bt){var Kt=Ut.length;Ut.push(Bt);e:for(;0<Kt;){var Gt=Kt-1>>>1,Pt=Ut[Gt];if(0<st(Pt,Bt))Ut[Gt]=Bt,Ut[Kt]=Pt,Kt=Gt;else break e}}function rt(Ut){return Ut.length===0?null:Ut[0]}function at(Ut){if(Ut.length===0)return null;var Bt=Ut[0],Kt=Ut.pop();if(Kt!==Bt){Ut[0]=Kt;e:for(var Gt=0,Pt=Ut.length,Zt=Pt>>>1;Gt<Zt;){var an=2*(Gt+1)-1,Jt=Ut[an],rn=an+1,fn=Ut[rn];if(0>st(Jt,Kt))rn<Pt&&0>st(fn,Jt)?(Ut[Gt]=fn,Ut[rn]=Kt,Gt=rn):(Ut[Gt]=Jt,Ut[an]=Kt,Gt=an);else if(rn<Pt&&0>st(fn,Kt))Ut[Gt]=fn,Ut[rn]=Kt,Gt=rn;else break e}}return Bt}function st(Ut,Bt){var Kt=Ut.sortIndex-Bt.sortIndex;return Kt!==0?Kt:Ut.id-Bt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ot=performance;it.unstable_now=function(){return ot.now()}}else{var lt=Date,ut=lt.now();it.unstable_now=function(){return lt.now()-ut}}var ht=[],mt=[],bt=1,vt=null,At=3,xt=!1,Et=!1,Tt=!1,wt=typeof setTimeout=="function"?setTimeout:null,Ct=typeof clearTimeout=="function"?clearTimeout:null,It=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function St(Ut){for(var Bt=rt(mt);Bt!==null;){if(Bt.callback===null)at(mt);else if(Bt.startTime<=Ut)at(mt),Bt.sortIndex=Bt.expirationTime,tt(ht,Bt);else break;Bt=rt(mt)}}function Rt(Ut){if(Tt=!1,St(Ut),!Et)if(rt(ht)!==null)Et=!0,Ht(Dt);else{var Bt=rt(mt);Bt!==null&&Qt(Rt,Bt.startTime-Ut)}}function Dt(Ut,Bt){Et=!1,Tt&&(Tt=!1,Ct(Vt),Vt=-1),xt=!0;var Kt=At;try{for(St(Bt),vt=rt(ht);vt!==null&&(!(vt.expirationTime>Bt)||Ut&&!kt());){var Gt=vt.callback;if(typeof Gt=="function"){vt.callback=null,At=vt.priorityLevel;var Pt=Gt(vt.expirationTime<=Bt);Bt=it.unstable_now(),typeof Pt=="function"?vt.callback=Pt:vt===rt(ht)&&at(ht),St(Bt)}else at(ht);vt=rt(ht)}if(vt!==null)var Zt=!0;else{var an=rt(mt);an!==null&&Qt(Rt,an.startTime-Bt),Zt=!1}return Zt}finally{vt=null,At=Kt,xt=!1}}var Wt=!1,qt=null,Vt=-1,Yt=5,jt=-1;function kt(){return!(it.unstable_now()-jt<Yt)}function zt(){if(qt!==null){var Ut=it.unstable_now();jt=Ut;var Bt=!0;try{Bt=qt(!0,Ut)}finally{Bt?Nt():(Wt=!1,qt=null)}}else Wt=!1}var Nt;if(typeof It=="function")Nt=function(){It(zt)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,Lt=Mt.port2;Mt.port1.onmessage=zt,Nt=function(){Lt.postMessage(null)}}else Nt=function(){wt(zt,0)};function Ht(Ut){qt=Ut,Wt||(Wt=!0,Nt())}function Qt(Ut,Bt){Vt=wt(function(){Ut(it.unstable_now())},Bt)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(Ut){Ut.callback=null},it.unstable_continueExecution=function(){Et||xt||(Et=!0,Ht(Dt))},it.unstable_forceFrameRate=function(Ut){0>Ut||125<Ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Yt=0<Ut?Math.floor(1e3/Ut):5},it.unstable_getCurrentPriorityLevel=function(){return At},it.unstable_getFirstCallbackNode=function(){return rt(ht)},it.unstable_next=function(Ut){switch(At){case 1:case 2:case 3:var Bt=3;break;default:Bt=At}var Kt=At;At=Bt;try{return Ut()}finally{At=Kt}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(Ut,Bt){switch(Ut){case 1:case 2:case 3:case 4:case 5:break;default:Ut=3}var Kt=At;At=Ut;try{return Bt()}finally{At=Kt}},it.unstable_scheduleCallback=function(Ut,Bt,Kt){var Gt=it.unstable_now();switch(typeof Kt=="object"&&Kt!==null?(Kt=Kt.delay,Kt=typeof Kt=="number"&&0<Kt?Gt+Kt:Gt):Kt=Gt,Ut){case 1:var Pt=-1;break;case 2:Pt=250;break;case 5:Pt=1073741823;break;case 4:Pt=1e4;break;default:Pt=5e3}return Pt=Kt+Pt,Ut={id:bt++,callback:Bt,priorityLevel:Ut,startTime:Kt,expirationTime:Pt,sortIndex:-1},Kt>Gt?(Ut.sortIndex=Kt,tt(mt,Ut),rt(ht)===null&&Ut===rt(mt)&&(Tt?(Ct(Vt),Vt=-1):Tt=!0,Qt(Rt,Kt-Gt))):(Ut.sortIndex=Pt,tt(ht,Ut),Et||xt||(Et=!0,Ht(Dt))),Ut},it.unstable_shouldYield=kt,it.unstable_wrapCallback=function(Ut){var Bt=At;return function(){var Kt=At;At=Bt;try{return Ut.apply(this,arguments)}finally{At=Kt}}}})(scheduler_production_min),function(it){it.exports=scheduler_production_min}(scheduler);/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var aa=react.exports,ca=scheduler.exports;function p$9(it){for(var tt="https://reactjs.org/docs/error-decoder.html?invariant="+it,rt=1;rt<arguments.length;rt++)tt+="&args[]="+encodeURIComponent(arguments[rt]);return"Minified React error #"+it+"; visit "+tt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa$1(it,tt){ha(it,tt),ha(it+"Capture",tt)}function ha(it,tt){for(ea[it]=tt,it=0;it<tt.length;it++)da.add(tt[it])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(it){return ja.call(ma,it)?!0:ja.call(la,it)?!1:ka.test(it)?ma[it]=!0:(la[it]=!0,!1)}function pa(it,tt,rt,at){if(rt!==null&&rt.type===0)return!1;switch(typeof tt){case"function":case"symbol":return!0;case"boolean":return at?!1:rt!==null?!rt.acceptsBooleans:(it=it.toLowerCase().slice(0,5),it!=="data-"&&it!=="aria-");default:return!1}}function qa(it,tt,rt,at){if(tt===null||typeof tt>"u"||pa(it,tt,rt,at))return!0;if(at)return!1;if(rt!==null)switch(rt.type){case 3:return!tt;case 4:return tt===!1;case 5:return isNaN(tt);case 6:return isNaN(tt)||1>tt}return!1}function v$6(it,tt,rt,at,st,ot,lt){this.acceptsBooleans=tt===2||tt===3||tt===4,this.attributeName=at,this.attributeNamespace=st,this.mustUseProperty=rt,this.propertyName=it,this.type=tt,this.sanitizeURL=ot,this.removeEmptyString=lt}var z$8={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(it){z$8[it]=new v$6(it,0,!1,it,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(it){var tt=it[0];z$8[tt]=new v$6(tt,1,!1,it[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(it){z$8[it]=new v$6(it,2,!1,it.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(it){z$8[it]=new v$6(it,2,!1,it,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(it){z$8[it]=new v$6(it,3,!1,it.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(it){z$8[it]=new v$6(it,3,!0,it,null,!1,!1)}),["capture","download"].forEach(function(it){z$8[it]=new v$6(it,4,!1,it,null,!1,!1)}),["cols","rows","size","span"].forEach(function(it){z$8[it]=new v$6(it,6,!1,it,null,!1,!1)}),["rowSpan","start"].forEach(function(it){z$8[it]=new v$6(it,5,!1,it.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(it){return it[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(it){var tt=it.replace(ra,sa);z$8[tt]=new v$6(tt,1,!1,it,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(it){var tt=it.replace(ra,sa);z$8[tt]=new v$6(tt,1,!1,it,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(it){var tt=it.replace(ra,sa);z$8[tt]=new v$6(tt,1,!1,it,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(it){z$8[it]=new v$6(it,1,!1,it.toLowerCase(),null,!1,!1)}),z$8.xlinkHref=new v$6("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(it){z$8[it]=new v$6(it,1,!1,it.toLowerCase(),null,!0,!0)});function ta(it,tt,rt,at){var st=z$8.hasOwnProperty(tt)?z$8[tt]:null;(st!==null?st.type!==0:at||!(2<tt.length)||tt[0]!=="o"&&tt[0]!=="O"||tt[1]!=="n"&&tt[1]!=="N")&&(qa(tt,rt,st,at)&&(rt=null),at||st===null?oa(tt)&&(rt===null?it.removeAttribute(tt):it.setAttribute(tt,""+rt)):st.mustUseProperty?it[st.propertyName]=rt===null?st.type===3?!1:"":rt:(tt=st.attributeName,at=st.attributeNamespace,rt===null?it.removeAttribute(tt):(st=st.type,rt=st===3||st===4&&rt===!0?"":""+rt,at?it.setAttributeNS(at,tt,rt):it.setAttribute(tt,rt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(it){return it===null||typeof it!="object"?null:(it=Ja&&it[Ja]||it["@@iterator"],typeof it=="function"?it:null)}var A$8=Object.assign,La;function Ma(it){if(La===void 0)try{throw Error()}catch(rt){var tt=rt.stack.trim().match(/\n( *(at )?)/);La=tt&&tt[1]||""}return`
`+La+it}var Na=!1;function Oa(it,tt){if(!it||Na)return"";Na=!0;var rt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(tt)if(tt=function(){throw Error()},Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(mt){var at=mt}Reflect.construct(it,[],tt)}else{try{tt.call()}catch(mt){at=mt}it.call(tt.prototype)}else{try{throw Error()}catch(mt){at=mt}it()}}catch(mt){if(mt&&at&&typeof mt.stack=="string"){for(var st=mt.stack.split(`
`),ot=at.stack.split(`
`),lt=st.length-1,ut=ot.length-1;1<=lt&&0<=ut&&st[lt]!==ot[ut];)ut--;for(;1<=lt&&0<=ut;lt--,ut--)if(st[lt]!==ot[ut]){if(lt!==1||ut!==1)do if(lt--,ut--,0>ut||st[lt]!==ot[ut]){var ht=`
`+st[lt].replace(" at new "," at ");return it.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",it.displayName)),ht}while(1<=lt&&0<=ut);break}}}finally{Na=!1,Error.prepareStackTrace=rt}return(it=it?it.displayName||it.name:"")?Ma(it):""}function Pa(it){switch(it.tag){case 5:return Ma(it.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return it=Oa(it.type,!1),it;case 11:return it=Oa(it.type.render,!1),it;case 1:return it=Oa(it.type,!0),it;default:return""}}function Qa(it){if(it==null)return null;if(typeof it=="function")return it.displayName||it.name||null;if(typeof it=="string")return it;switch(it){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof it=="object")switch(it.$$typeof){case Ca:return(it.displayName||"Context")+".Consumer";case Ba:return(it._context.displayName||"Context")+".Provider";case Da:var tt=it.render;return it=it.displayName,it||(it=tt.displayName||tt.name||"",it=it!==""?"ForwardRef("+it+")":"ForwardRef"),it;case Ga:return tt=it.displayName||null,tt!==null?tt:Qa(it.type)||"Memo";case Ha:tt=it._payload,it=it._init;try{return Qa(it(tt))}catch{}}return null}function Ra(it){var tt=it.type;switch(it.tag){case 24:return"Cache";case 9:return(tt.displayName||"Context")+".Consumer";case 10:return(tt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return it=tt.render,it=it.displayName||it.name||"",tt.displayName||(it!==""?"ForwardRef("+it+")":"ForwardRef");case 7:return"Fragment";case 5:return tt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(tt);case 8:return tt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof tt=="function")return tt.displayName||tt.name||null;if(typeof tt=="string")return tt}return null}function Sa(it){switch(typeof it){case"boolean":case"number":case"string":case"undefined":return it;case"object":return it;default:return""}}function Ta(it){var tt=it.type;return(it=it.nodeName)&&it.toLowerCase()==="input"&&(tt==="checkbox"||tt==="radio")}function Ua(it){var tt=Ta(it)?"checked":"value",rt=Object.getOwnPropertyDescriptor(it.constructor.prototype,tt),at=""+it[tt];if(!it.hasOwnProperty(tt)&&typeof rt<"u"&&typeof rt.get=="function"&&typeof rt.set=="function"){var st=rt.get,ot=rt.set;return Object.defineProperty(it,tt,{configurable:!0,get:function(){return st.call(this)},set:function(lt){at=""+lt,ot.call(this,lt)}}),Object.defineProperty(it,tt,{enumerable:rt.enumerable}),{getValue:function(){return at},setValue:function(lt){at=""+lt},stopTracking:function(){it._valueTracker=null,delete it[tt]}}}}function Va(it){it._valueTracker||(it._valueTracker=Ua(it))}function Wa(it){if(!it)return!1;var tt=it._valueTracker;if(!tt)return!0;var rt=tt.getValue(),at="";return it&&(at=Ta(it)?it.checked?"true":"false":it.value),it=at,it!==rt?(tt.setValue(it),!0):!1}function Xa(it){if(it=it||(typeof document<"u"?document:void 0),typeof it>"u")return null;try{return it.activeElement||it.body}catch{return it.body}}function Ya(it,tt){var rt=tt.checked;return A$8({},tt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rt!=null?rt:it._wrapperState.initialChecked})}function Za(it,tt){var rt=tt.defaultValue==null?"":tt.defaultValue,at=tt.checked!=null?tt.checked:tt.defaultChecked;rt=Sa(tt.value!=null?tt.value:rt),it._wrapperState={initialChecked:at,initialValue:rt,controlled:tt.type==="checkbox"||tt.type==="radio"?tt.checked!=null:tt.value!=null}}function ab(it,tt){tt=tt.checked,tt!=null&&ta(it,"checked",tt,!1)}function bb(it,tt){ab(it,tt);var rt=Sa(tt.value),at=tt.type;if(rt!=null)at==="number"?(rt===0&&it.value===""||it.value!=rt)&&(it.value=""+rt):it.value!==""+rt&&(it.value=""+rt);else if(at==="submit"||at==="reset"){it.removeAttribute("value");return}tt.hasOwnProperty("value")?cb(it,tt.type,rt):tt.hasOwnProperty("defaultValue")&&cb(it,tt.type,Sa(tt.defaultValue)),tt.checked==null&&tt.defaultChecked!=null&&(it.defaultChecked=!!tt.defaultChecked)}function db(it,tt,rt){if(tt.hasOwnProperty("value")||tt.hasOwnProperty("defaultValue")){var at=tt.type;if(!(at!=="submit"&&at!=="reset"||tt.value!==void 0&&tt.value!==null))return;tt=""+it._wrapperState.initialValue,rt||tt===it.value||(it.value=tt),it.defaultValue=tt}rt=it.name,rt!==""&&(it.name=""),it.defaultChecked=!!it._wrapperState.initialChecked,rt!==""&&(it.name=rt)}function cb(it,tt,rt){(tt!=="number"||Xa(it.ownerDocument)!==it)&&(rt==null?it.defaultValue=""+it._wrapperState.initialValue:it.defaultValue!==""+rt&&(it.defaultValue=""+rt))}var eb=Array.isArray;function fb(it,tt,rt,at){if(it=it.options,tt){tt={};for(var st=0;st<rt.length;st++)tt["$"+rt[st]]=!0;for(rt=0;rt<it.length;rt++)st=tt.hasOwnProperty("$"+it[rt].value),it[rt].selected!==st&&(it[rt].selected=st),st&&at&&(it[rt].defaultSelected=!0)}else{for(rt=""+Sa(rt),tt=null,st=0;st<it.length;st++){if(it[st].value===rt){it[st].selected=!0,at&&(it[st].defaultSelected=!0);return}tt!==null||it[st].disabled||(tt=it[st])}tt!==null&&(tt.selected=!0)}}function gb(it,tt){if(tt.dangerouslySetInnerHTML!=null)throw Error(p$9(91));return A$8({},tt,{value:void 0,defaultValue:void 0,children:""+it._wrapperState.initialValue})}function hb(it,tt){var rt=tt.value;if(rt==null){if(rt=tt.children,tt=tt.defaultValue,rt!=null){if(tt!=null)throw Error(p$9(92));if(eb(rt)){if(1<rt.length)throw Error(p$9(93));rt=rt[0]}tt=rt}tt==null&&(tt=""),rt=tt}it._wrapperState={initialValue:Sa(rt)}}function ib(it,tt){var rt=Sa(tt.value),at=Sa(tt.defaultValue);rt!=null&&(rt=""+rt,rt!==it.value&&(it.value=rt),tt.defaultValue==null&&it.defaultValue!==rt&&(it.defaultValue=rt)),at!=null&&(it.defaultValue=""+at)}function jb(it){var tt=it.textContent;tt===it._wrapperState.initialValue&&tt!==""&&tt!==null&&(it.value=tt)}function kb(it){switch(it){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(it,tt){return it==null||it==="http://www.w3.org/1999/xhtml"?kb(tt):it==="http://www.w3.org/2000/svg"&&tt==="foreignObject"?"http://www.w3.org/1999/xhtml":it}var mb,nb=function(it){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(tt,rt,at,st){MSApp.execUnsafeLocalFunction(function(){return it(tt,rt,at,st)})}:it}(function(it,tt){if(it.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in it)it.innerHTML=tt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+tt.valueOf().toString()+"</svg>",tt=mb.firstChild;it.firstChild;)it.removeChild(it.firstChild);for(;tt.firstChild;)it.appendChild(tt.firstChild)}});function ob(it,tt){if(tt){var rt=it.firstChild;if(rt&&rt===it.lastChild&&rt.nodeType===3){rt.nodeValue=tt;return}}it.textContent=tt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(it){qb.forEach(function(tt){tt=tt+it.charAt(0).toUpperCase()+it.substring(1),pb[tt]=pb[it]})});function rb(it,tt,rt){return tt==null||typeof tt=="boolean"||tt===""?"":rt||typeof tt!="number"||tt===0||pb.hasOwnProperty(it)&&pb[it]?(""+tt).trim():tt+"px"}function sb(it,tt){it=it.style;for(var rt in tt)if(tt.hasOwnProperty(rt)){var at=rt.indexOf("--")===0,st=rb(rt,tt[rt],at);rt==="float"&&(rt="cssFloat"),at?it.setProperty(rt,st):it[rt]=st}}var tb=A$8({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(it,tt){if(tt){if(tb[it]&&(tt.children!=null||tt.dangerouslySetInnerHTML!=null))throw Error(p$9(137,it));if(tt.dangerouslySetInnerHTML!=null){if(tt.children!=null)throw Error(p$9(60));if(typeof tt.dangerouslySetInnerHTML!="object"||!("__html"in tt.dangerouslySetInnerHTML))throw Error(p$9(61))}if(tt.style!=null&&typeof tt.style!="object")throw Error(p$9(62))}}function vb(it,tt){if(it.indexOf("-")===-1)return typeof tt.is=="string";switch(it){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(it){return it=it.target||it.srcElement||window,it.correspondingUseElement&&(it=it.correspondingUseElement),it.nodeType===3?it.parentNode:it}var yb=null,zb=null,Ab=null;function Bb(it){if(it=Cb(it)){if(typeof yb!="function")throw Error(p$9(280));var tt=it.stateNode;tt&&(tt=Db(tt),yb(it.stateNode,it.type,tt))}}function Eb(it){zb?Ab?Ab.push(it):Ab=[it]:zb=it}function Fb(){if(zb){var it=zb,tt=Ab;if(Ab=zb=null,Bb(it),tt)for(it=0;it<tt.length;it++)Bb(tt[it])}}function Gb(it,tt){return it(tt)}function Hb(){}var Ib=!1;function Jb(it,tt,rt){if(Ib)return it(tt,rt);Ib=!0;try{return Gb(it,tt,rt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(it,tt){var rt=it.stateNode;if(rt===null)return null;var at=Db(rt);if(at===null)return null;rt=at[tt];e:switch(tt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(at=!at.disabled)||(it=it.type,at=!(it==="button"||it==="input"||it==="select"||it==="textarea")),it=!at;break e;default:it=!1}if(it)return null;if(rt&&typeof rt!="function")throw Error(p$9(231,tt,typeof rt));return rt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(it,tt,rt,at,st,ot,lt,ut,ht){var mt=Array.prototype.slice.call(arguments,3);try{tt.apply(rt,mt)}catch(bt){this.onError(bt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(it){Ob=!0,Pb=it}};function Tb(it,tt,rt,at,st,ot,lt,ut,ht){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(it,tt,rt,at,st,ot,lt,ut,ht){if(Tb.apply(this,arguments),Ob){if(Ob){var mt=Pb;Ob=!1,Pb=null}else throw Error(p$9(198));Qb||(Qb=!0,Rb=mt)}}function Vb(it){var tt=it,rt=it;if(it.alternate)for(;tt.return;)tt=tt.return;else{it=tt;do tt=it,(tt.flags&4098)!==0&&(rt=tt.return),it=tt.return;while(it)}return tt.tag===3?rt:null}function Wb(it){if(it.tag===13){var tt=it.memoizedState;if(tt===null&&(it=it.alternate,it!==null&&(tt=it.memoizedState)),tt!==null)return tt.dehydrated}return null}function Xb(it){if(Vb(it)!==it)throw Error(p$9(188))}function Yb(it){var tt=it.alternate;if(!tt){if(tt=Vb(it),tt===null)throw Error(p$9(188));return tt!==it?null:it}for(var rt=it,at=tt;;){var st=rt.return;if(st===null)break;var ot=st.alternate;if(ot===null){if(at=st.return,at!==null){rt=at;continue}break}if(st.child===ot.child){for(ot=st.child;ot;){if(ot===rt)return Xb(st),it;if(ot===at)return Xb(st),tt;ot=ot.sibling}throw Error(p$9(188))}if(rt.return!==at.return)rt=st,at=ot;else{for(var lt=!1,ut=st.child;ut;){if(ut===rt){lt=!0,rt=st,at=ot;break}if(ut===at){lt=!0,at=st,rt=ot;break}ut=ut.sibling}if(!lt){for(ut=ot.child;ut;){if(ut===rt){lt=!0,rt=ot,at=st;break}if(ut===at){lt=!0,at=ot,rt=st;break}ut=ut.sibling}if(!lt)throw Error(p$9(189))}}if(rt.alternate!==at)throw Error(p$9(190))}if(rt.tag!==3)throw Error(p$9(188));return rt.stateNode.current===rt?it:tt}function Zb(it){return it=Yb(it),it!==null?$b(it):null}function $b(it){if(it.tag===5||it.tag===6)return it;for(it=it.child;it!==null;){var tt=$b(it);if(tt!==null)return tt;it=it.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$5=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc$1=null;function mc(it){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc,it,void 0,(it.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(it){return it>>>=0,it===0?32:31-(pc(it)/qc|0)|0}var rc=64,sc=4194304;function tc(it){switch(it&-it){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return it&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return it&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return it}}function uc(it,tt){var rt=it.pendingLanes;if(rt===0)return 0;var at=0,st=it.suspendedLanes,ot=it.pingedLanes,lt=rt&268435455;if(lt!==0){var ut=lt&~st;ut!==0?at=tc(ut):(ot&=lt,ot!==0&&(at=tc(ot)))}else lt=rt&~st,lt!==0?at=tc(lt):ot!==0&&(at=tc(ot));if(at===0)return 0;if(tt!==0&&tt!==at&&(tt&st)===0&&(st=at&-at,ot=tt&-tt,st>=ot||st===16&&(ot&4194240)!==0))return tt;if((at&4)!==0&&(at|=rt&16),tt=it.entangledLanes,tt!==0)for(it=it.entanglements,tt&=at;0<tt;)rt=31-oc(tt),st=1<<rt,at|=it[rt],tt&=~st;return at}function vc(it,tt){switch(it){case 1:case 2:case 4:return tt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return tt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(it,tt){for(var rt=it.suspendedLanes,at=it.pingedLanes,st=it.expirationTimes,ot=it.pendingLanes;0<ot;){var lt=31-oc(ot),ut=1<<lt,ht=st[lt];ht===-1?((ut&rt)===0||(ut&at)!==0)&&(st[lt]=vc(ut,tt)):ht<=tt&&(it.expiredLanes|=ut),ot&=~ut}}function xc(it){return it=it.pendingLanes&-1073741825,it!==0?it:it&1073741824?1073741824:0}function yc(){var it=rc;return rc<<=1,(rc&4194240)===0&&(rc=64),it}function zc(it){for(var tt=[],rt=0;31>rt;rt++)tt.push(it);return tt}function Ac(it,tt,rt){it.pendingLanes|=tt,tt!==536870912&&(it.suspendedLanes=0,it.pingedLanes=0),it=it.eventTimes,tt=31-oc(tt),it[tt]=rt}function Bc(it,tt){var rt=it.pendingLanes&~tt;it.pendingLanes=tt,it.suspendedLanes=0,it.pingedLanes=0,it.expiredLanes&=tt,it.mutableReadLanes&=tt,it.entangledLanes&=tt,tt=it.entanglements;var at=it.eventTimes;for(it=it.expirationTimes;0<rt;){var st=31-oc(rt),ot=1<<st;tt[st]=0,at[st]=-1,it[st]=-1,rt&=~ot}}function Cc(it,tt){var rt=it.entangledLanes|=tt;for(it=it.entanglements;rt;){var at=31-oc(rt),st=1<<at;st&tt|it[at]&tt&&(it[at]|=tt),rt&=~st}}var C$5=0;function Dc(it){return it&=-it,1<it?4<it?(it&268435455)!==0?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(it,tt){switch(it){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(tt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(tt.pointerId)}}function Tc(it,tt,rt,at,st,ot){return it===null||it.nativeEvent!==ot?(it={blockedOn:tt,domEventName:rt,eventSystemFlags:at,nativeEvent:ot,targetContainers:[st]},tt!==null&&(tt=Cb(tt),tt!==null&&Fc(tt)),it):(it.eventSystemFlags|=at,tt=it.targetContainers,st!==null&&tt.indexOf(st)===-1&&tt.push(st),it)}function Uc(it,tt,rt,at,st){switch(tt){case"focusin":return Lc=Tc(Lc,it,tt,rt,at,st),!0;case"dragenter":return Mc=Tc(Mc,it,tt,rt,at,st),!0;case"mouseover":return Nc=Tc(Nc,it,tt,rt,at,st),!0;case"pointerover":var ot=st.pointerId;return Oc.set(ot,Tc(Oc.get(ot)||null,it,tt,rt,at,st)),!0;case"gotpointercapture":return ot=st.pointerId,Pc.set(ot,Tc(Pc.get(ot)||null,it,tt,rt,at,st)),!0}return!1}function Vc(it){var tt=Wc(it.target);if(tt!==null){var rt=Vb(tt);if(rt!==null){if(tt=rt.tag,tt===13){if(tt=Wb(rt),tt!==null){it.blockedOn=tt,Ic(it.priority,function(){Gc(rt)});return}}else if(tt===3&&rt.stateNode.current.memoizedState.isDehydrated){it.blockedOn=rt.tag===3?rt.stateNode.containerInfo:null;return}}}it.blockedOn=null}function Xc(it){if(it.blockedOn!==null)return!1;for(var tt=it.targetContainers;0<tt.length;){var rt=Yc(it.domEventName,it.eventSystemFlags,tt[0],it.nativeEvent);if(rt===null){rt=it.nativeEvent;var at=new rt.constructor(rt.type,rt);wb=at,rt.target.dispatchEvent(at),wb=null}else return tt=Cb(rt),tt!==null&&Fc(tt),it.blockedOn=rt,!1;tt.shift()}return!0}function Zc(it,tt,rt){Xc(it)&&rt.delete(tt)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(it,tt){it.blockedOn===tt&&(it.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(it){function tt(st){return ad(st,it)}if(0<Kc.length){ad(Kc[0],it);for(var rt=1;rt<Kc.length;rt++){var at=Kc[rt];at.blockedOn===it&&(at.blockedOn=null)}}for(Lc!==null&&ad(Lc,it),Mc!==null&&ad(Mc,it),Nc!==null&&ad(Nc,it),Oc.forEach(tt),Pc.forEach(tt),rt=0;rt<Qc.length;rt++)at=Qc[rt],at.blockedOn===it&&(at.blockedOn=null);for(;0<Qc.length&&(rt=Qc[0],rt.blockedOn===null);)Vc(rt),rt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(it,tt,rt,at){var st=C$5,ot=cd.transition;cd.transition=null;try{C$5=1,fd(it,tt,rt,at)}finally{C$5=st,cd.transition=ot}}function gd(it,tt,rt,at){var st=C$5,ot=cd.transition;cd.transition=null;try{C$5=4,fd(it,tt,rt,at)}finally{C$5=st,cd.transition=ot}}function fd(it,tt,rt,at){if(dd){var st=Yc(it,tt,rt,at);if(st===null)hd(it,tt,at,id$1,rt),Sc(it,at);else if(Uc(st,it,tt,rt,at))at.stopPropagation();else if(Sc(it,at),tt&4&&-1<Rc.indexOf(it)){for(;st!==null;){var ot=Cb(st);if(ot!==null&&Ec(ot),ot=Yc(it,tt,rt,at),ot===null&&hd(it,tt,at,id$1,rt),ot===st)break;st=ot}st!==null&&at.stopPropagation()}else hd(it,tt,at,null,rt)}}var id$1=null;function Yc(it,tt,rt,at){if(id$1=null,it=xb(at),it=Wc(it),it!==null)if(tt=Vb(it),tt===null)it=null;else if(rt=tt.tag,rt===13){if(it=Wb(tt),it!==null)return it;it=null}else if(rt===3){if(tt.stateNode.current.memoizedState.isDehydrated)return tt.tag===3?tt.stateNode.containerInfo:null;it=null}else tt!==it&&(it=null);return id$1=it,null}function jd(it){switch(it){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var it,tt=ld,rt=tt.length,at,st="value"in kd?kd.value:kd.textContent,ot=st.length;for(it=0;it<rt&&tt[it]===st[it];it++);var lt=rt-it;for(at=1;at<=lt&&tt[rt-at]===st[ot-at];at++);return md=st.slice(it,1<at?1-at:void 0)}function od(it){var tt=it.keyCode;return"charCode"in it?(it=it.charCode,it===0&&tt===13&&(it=13)):it=tt,it===10&&(it=13),32<=it||it===13?it:0}function pd(){return!0}function qd(){return!1}function rd(it){function tt(rt,at,st,ot,lt){this._reactName=rt,this._targetInst=st,this.type=at,this.nativeEvent=ot,this.target=lt,this.currentTarget=null;for(var ut in it)it.hasOwnProperty(ut)&&(rt=it[ut],this[ut]=rt?rt(ot):ot[ut]);return this.isDefaultPrevented=(ot.defaultPrevented!=null?ot.defaultPrevented:ot.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$8(tt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rt=this.nativeEvent;rt&&(rt.preventDefault?rt.preventDefault():typeof rt.returnValue!="unknown"&&(rt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var rt=this.nativeEvent;rt&&(rt.stopPropagation?rt.stopPropagation():typeof rt.cancelBubble!="unknown"&&(rt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),tt}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(it){return it.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd),ud=A$8({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$8({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(it){return it.relatedTarget===void 0?it.fromElement===it.srcElement?it.toElement:it.fromElement:it.relatedTarget},movementX:function(it){return"movementX"in it?it.movementX:(it!==yd&&(yd&&it.type==="mousemove"?(wd=it.screenX-yd.screenX,xd=it.screenY-yd.screenY):xd=wd=0,yd=it),wd)},movementY:function(it){return"movementY"in it?it.movementY:xd}}),Bd=rd(Ad),Cd=A$8({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$8({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$8({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$8({},sd,{clipboardData:function(it){return"clipboardData"in it?it.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$8({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(it){var tt=this.nativeEvent;return tt.getModifierState?tt.getModifierState(it):(it=Od[it])?!!tt[it]:!1}function zd(){return Pd}var Qd=A$8({},ud,{key:function(it){if(it.key){var tt=Md[it.key]||it.key;if(tt!=="Unidentified")return tt}return it.type==="keypress"?(it=od(it),it===13?"Enter":String.fromCharCode(it)):it.type==="keydown"||it.type==="keyup"?Nd[it.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(it){return it.type==="keypress"?od(it):0},keyCode:function(it){return it.type==="keydown"||it.type==="keyup"?it.keyCode:0},which:function(it){return it.type==="keypress"?od(it):it.type==="keydown"||it.type==="keyup"?it.keyCode:0}}),Rd=rd(Qd),Sd=A$8({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$8({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$8({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$8({},Ad,{deltaX:function(it){return"deltaX"in it?it.deltaX:"wheelDeltaX"in it?-it.wheelDeltaX:0},deltaY:function(it){return"deltaY"in it?it.deltaY:"wheelDeltaY"in it?-it.wheelDeltaY:"wheelDelta"in it?-it.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de$2=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(it,tt){switch(it){case"keyup":return $d.indexOf(tt.keyCode)!==-1;case"keydown":return tt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(it){return it=it.detail,typeof it=="object"&&"data"in it?it.data:null}var ie=!1;function je(it,tt){switch(it){case"compositionend":return he(tt);case"keypress":return tt.which!==32?null:(fe=!0,ee);case"textInput":return it=tt.data,it===ee&&fe?null:it;default:return null}}function ke(it,tt){if(ie)return it==="compositionend"||!ae&&ge(it,tt)?(it=nd(),md=ld=kd=null,ie=!1,it):null;switch(it){case"paste":return null;case"keypress":if(!(tt.ctrlKey||tt.altKey||tt.metaKey)||tt.ctrlKey&&tt.altKey){if(tt.char&&1<tt.char.length)return tt.char;if(tt.which)return String.fromCharCode(tt.which)}return null;case"compositionend":return de$2&&tt.locale!=="ko"?null:tt.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(it){var tt=it&&it.nodeName&&it.nodeName.toLowerCase();return tt==="input"?!!le[it.type]:tt==="textarea"}function ne(it,tt,rt,at){Eb(at),tt=oe(tt,"onChange"),0<tt.length&&(rt=new td$1("onChange","change",null,rt,at),it.push({event:rt,listeners:tt}))}var pe$1=null,qe=null;function re(it){se$1(it,0)}function te$1(it){var tt=ue(it);if(Wa(tt))return it}function ve(it,tt){if(it==="change")return tt}var we=!1;if(ia){var xe$1;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe$1=ye}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(it){if(it.propertyName==="value"&&te$1(qe)){var tt=[];ne(tt,qe,it,xb(it)),Jb(re,tt)}}function Ce(it,tt,rt){it==="focusin"?(Ae$1(),pe$1=tt,qe=rt,pe$1.attachEvent("onpropertychange",Be)):it==="focusout"&&Ae$1()}function De(it){if(it==="selectionchange"||it==="keyup"||it==="keydown")return te$1(qe)}function Ee(it,tt){if(it==="click")return te$1(tt)}function Fe(it,tt){if(it==="input"||it==="change")return te$1(tt)}function Ge(it,tt){return it===tt&&(it!==0||1/it===1/tt)||it!==it&&tt!==tt}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(it,tt){if(He(it,tt))return!0;if(typeof it!="object"||it===null||typeof tt!="object"||tt===null)return!1;var rt=Object.keys(it),at=Object.keys(tt);if(rt.length!==at.length)return!1;for(at=0;at<rt.length;at++){var st=rt[at];if(!ja.call(tt,st)||!He(it[st],tt[st]))return!1}return!0}function Je(it){for(;it&&it.firstChild;)it=it.firstChild;return it}function Ke(it,tt){var rt=Je(it);it=0;for(var at;rt;){if(rt.nodeType===3){if(at=it+rt.textContent.length,it<=tt&&at>=tt)return{node:rt,offset:tt-it};it=at}e:{for(;rt;){if(rt.nextSibling){rt=rt.nextSibling;break e}rt=rt.parentNode}rt=void 0}rt=Je(rt)}}function Le(it,tt){return it&&tt?it===tt?!0:it&&it.nodeType===3?!1:tt&&tt.nodeType===3?Le(it,tt.parentNode):"contains"in it?it.contains(tt):it.compareDocumentPosition?!!(it.compareDocumentPosition(tt)&16):!1:!1}function Me(){for(var it=window,tt=Xa();tt instanceof it.HTMLIFrameElement;){try{var rt=typeof tt.contentWindow.location.href=="string"}catch{rt=!1}if(rt)it=tt.contentWindow;else break;tt=Xa(it.document)}return tt}function Ne(it){var tt=it&&it.nodeName&&it.nodeName.toLowerCase();return tt&&(tt==="input"&&(it.type==="text"||it.type==="search"||it.type==="tel"||it.type==="url"||it.type==="password")||tt==="textarea"||it.contentEditable==="true")}function Oe(it){var tt=Me(),rt=it.focusedElem,at=it.selectionRange;if(tt!==rt&&rt&&rt.ownerDocument&&Le(rt.ownerDocument.documentElement,rt)){if(at!==null&&Ne(rt)){if(tt=at.start,it=at.end,it===void 0&&(it=tt),"selectionStart"in rt)rt.selectionStart=tt,rt.selectionEnd=Math.min(it,rt.value.length);else if(it=(tt=rt.ownerDocument||document)&&tt.defaultView||window,it.getSelection){it=it.getSelection();var st=rt.textContent.length,ot=Math.min(at.start,st);at=at.end===void 0?ot:Math.min(at.end,st),!it.extend&&ot>at&&(st=at,at=ot,ot=st),st=Ke(rt,ot);var lt=Ke(rt,at);st&&lt&&(it.rangeCount!==1||it.anchorNode!==st.node||it.anchorOffset!==st.offset||it.focusNode!==lt.node||it.focusOffset!==lt.offset)&&(tt=tt.createRange(),tt.setStart(st.node,st.offset),it.removeAllRanges(),ot>at?(it.addRange(tt),it.extend(lt.node,lt.offset)):(tt.setEnd(lt.node,lt.offset),it.addRange(tt)))}}for(tt=[],it=rt;it=it.parentNode;)it.nodeType===1&&tt.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<tt.length;rt++)it=tt[rt],it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(it,tt,rt){var at=rt.window===rt?rt.document:rt.nodeType===9?rt:rt.ownerDocument;Te||Qe==null||Qe!==Xa(at)||(at=Qe,"selectionStart"in at&&Ne(at)?at={start:at.selectionStart,end:at.selectionEnd}:(at=(at.ownerDocument&&at.ownerDocument.defaultView||window).getSelection(),at={anchorNode:at.anchorNode,anchorOffset:at.anchorOffset,focusNode:at.focusNode,focusOffset:at.focusOffset}),Se&&Ie(Se,at)||(Se=at,at=oe(Re,"onSelect"),0<at.length&&(tt=new td$1("onSelect","select",null,tt,rt),it.push({event:tt,listeners:at}),tt.target=Qe)))}function Ve(it,tt){var rt={};return rt[it.toLowerCase()]=tt.toLowerCase(),rt["Webkit"+it]="webkit"+tt,rt["Moz"+it]="moz"+tt,rt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(it){if(Xe[it])return Xe[it];if(!We[it])return it;var tt=We[it],rt;for(rt in tt)if(tt.hasOwnProperty(rt)&&rt in Ye)return Xe[it]=tt[rt];return it}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(it,tt){df.set(it,tt),fa$1(tt,[it])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd"),ff(af,"onAnimationIteration"),ff(bf,"onAnimationStart"),ff("dblclick","onDoubleClick"),ff("focusin","onFocus"),ff("focusout","onBlur"),ff(cf,"onTransitionEnd"),ha("onMouseEnter",["mouseout","mouseover"]),ha("onMouseLeave",["mouseout","mouseover"]),ha("onPointerEnter",["pointerout","pointerover"]),ha("onPointerLeave",["pointerout","pointerover"]),fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]),fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(it,tt,rt){var at=it.type||"unknown-event";it.currentTarget=rt,Ub(at,tt,void 0,it),it.currentTarget=null}function se$1(it,tt){tt=(tt&4)!==0;for(var rt=0;rt<it.length;rt++){var at=it[rt],st=at.event;at=at.listeners;e:{var ot=void 0;if(tt)for(var lt=at.length-1;0<=lt;lt--){var ut=at[lt],ht=ut.instance,mt=ut.currentTarget;if(ut=ut.listener,ht!==ot&&st.isPropagationStopped())break e;nf(st,ut,mt),ot=ht}else for(lt=0;lt<at.length;lt++){if(ut=at[lt],ht=ut.instance,mt=ut.currentTarget,ut=ut.listener,ht!==ot&&st.isPropagationStopped())break e;nf(st,ut,mt),ot=ht}}}if(Qb)throw it=Rb,Qb=!1,Rb=null,it}function D$3(it,tt){var rt=tt[of$1];rt===void 0&&(rt=tt[of$1]=new Set);var at=it+"__bubble";rt.has(at)||(pf(tt,it,2,!1),rt.add(at))}function qf(it,tt,rt){var at=0;tt&&(at|=4),pf(rt,it,at,tt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(it){if(!it[rf]){it[rf]=!0,da.forEach(function(rt){rt!=="selectionchange"&&(mf.has(rt)||qf(rt,!1,it),qf(rt,!0,it))});var tt=it.nodeType===9?it:it.ownerDocument;tt===null||tt[rf]||(tt[rf]=!0,qf("selectionchange",!1,tt))}}function pf(it,tt,rt,at){switch(jd(tt)){case 1:var st=ed;break;case 4:st=gd;break;default:st=fd}rt=st.bind(null,tt,rt,it),st=void 0,!Lb||tt!=="touchstart"&&tt!=="touchmove"&&tt!=="wheel"||(st=!0),at?st!==void 0?it.addEventListener(tt,rt,{capture:!0,passive:st}):it.addEventListener(tt,rt,!0):st!==void 0?it.addEventListener(tt,rt,{passive:st}):it.addEventListener(tt,rt,!1)}function hd(it,tt,rt,at,st){var ot=at;if((tt&1)===0&&(tt&2)===0&&at!==null)e:for(;;){if(at===null)return;var lt=at.tag;if(lt===3||lt===4){var ut=at.stateNode.containerInfo;if(ut===st||ut.nodeType===8&&ut.parentNode===st)break;if(lt===4)for(lt=at.return;lt!==null;){var ht=lt.tag;if((ht===3||ht===4)&&(ht=lt.stateNode.containerInfo,ht===st||ht.nodeType===8&&ht.parentNode===st))return;lt=lt.return}for(;ut!==null;){if(lt=Wc(ut),lt===null)return;if(ht=lt.tag,ht===5||ht===6){at=ot=lt;continue e}ut=ut.parentNode}}at=at.return}Jb(function(){var mt=ot,bt=xb(rt),vt=[];e:{var At=df.get(it);if(At!==void 0){var xt=td$1,Et=it;switch(it){case"keypress":if(od(rt)===0)break e;case"keydown":case"keyup":xt=Rd;break;case"focusin":Et="focus",xt=Fd;break;case"focusout":Et="blur",xt=Fd;break;case"beforeblur":case"afterblur":xt=Fd;break;case"click":if(rt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xt=Vd;break;case $e:case af:case bf:xt=Hd;break;case cf:xt=Xd;break;case"scroll":xt=vd;break;case"wheel":xt=Zd;break;case"copy":case"cut":case"paste":xt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xt=Td}var Tt=(tt&4)!==0,wt=!Tt&&it==="scroll",Ct=Tt?At!==null?At+"Capture":null:At;Tt=[];for(var It=mt,St;It!==null;){St=It;var Rt=St.stateNode;if(St.tag===5&&Rt!==null&&(St=Rt,Ct!==null&&(Rt=Kb(It,Ct),Rt!=null&&Tt.push(tf(It,Rt,St)))),wt)break;It=It.return}0<Tt.length&&(At=new xt(At,Et,null,rt,bt),vt.push({event:At,listeners:Tt}))}}if((tt&7)===0){e:{if(At=it==="mouseover"||it==="pointerover",xt=it==="mouseout"||it==="pointerout",At&&rt!==wb&&(Et=rt.relatedTarget||rt.fromElement)&&(Wc(Et)||Et[uf]))break e;if((xt||At)&&(At=bt.window===bt?bt:(At=bt.ownerDocument)?At.defaultView||At.parentWindow:window,xt?(Et=rt.relatedTarget||rt.toElement,xt=mt,Et=Et?Wc(Et):null,Et!==null&&(wt=Vb(Et),Et!==wt||Et.tag!==5&&Et.tag!==6)&&(Et=null)):(xt=null,Et=mt),xt!==Et)){if(Tt=Bd,Rt="onMouseLeave",Ct="onMouseEnter",It="mouse",(it==="pointerout"||it==="pointerover")&&(Tt=Td,Rt="onPointerLeave",Ct="onPointerEnter",It="pointer"),wt=xt==null?At:ue(xt),St=Et==null?At:ue(Et),At=new Tt(Rt,It+"leave",xt,rt,bt),At.target=wt,At.relatedTarget=St,Rt=null,Wc(bt)===mt&&(Tt=new Tt(Ct,It+"enter",Et,rt,bt),Tt.target=St,Tt.relatedTarget=wt,Rt=Tt),wt=Rt,xt&&Et)t:{for(Tt=xt,Ct=Et,It=0,St=Tt;St;St=vf(St))It++;for(St=0,Rt=Ct;Rt;Rt=vf(Rt))St++;for(;0<It-St;)Tt=vf(Tt),It--;for(;0<St-It;)Ct=vf(Ct),St--;for(;It--;){if(Tt===Ct||Ct!==null&&Tt===Ct.alternate)break t;Tt=vf(Tt),Ct=vf(Ct)}Tt=null}else Tt=null;xt!==null&&wf(vt,At,xt,Tt,!1),Et!==null&&wt!==null&&wf(vt,wt,Et,Tt,!0)}}e:{if(At=mt?ue(mt):window,xt=At.nodeName&&At.nodeName.toLowerCase(),xt==="select"||xt==="input"&&At.type==="file")var Dt=ve;else if(me(At))if(we)Dt=Fe;else{Dt=De;var Wt=Ce}else(xt=At.nodeName)&&xt.toLowerCase()==="input"&&(At.type==="checkbox"||At.type==="radio")&&(Dt=Ee);if(Dt&&(Dt=Dt(it,mt))){ne(vt,Dt,rt,bt);break e}Wt&&Wt(it,At,mt),it==="focusout"&&(Wt=At._wrapperState)&&Wt.controlled&&At.type==="number"&&cb(At,"number",At.value)}switch(Wt=mt?ue(mt):window,it){case"focusin":(me(Wt)||Wt.contentEditable==="true")&&(Qe=Wt,Re=mt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(vt,rt,bt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(vt,rt,bt)}var qt;if(ae)e:{switch(it){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else ie?ge(it,rt)&&(Vt="onCompositionEnd"):it==="keydown"&&rt.keyCode===229&&(Vt="onCompositionStart");Vt&&(de$2&&rt.locale!=="ko"&&(ie||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&ie&&(qt=nd()):(kd=bt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Wt=oe(mt,Vt),0<Wt.length&&(Vt=new Ld(Vt,it,null,rt,bt),vt.push({event:Vt,listeners:Wt}),qt?Vt.data=qt:(qt=he(rt),qt!==null&&(Vt.data=qt)))),(qt=ce?je(it,rt):ke(it,rt))&&(mt=oe(mt,"onBeforeInput"),0<mt.length&&(bt=new Ld("onBeforeInput","beforeinput",null,rt,bt),vt.push({event:bt,listeners:mt}),bt.data=qt))}se$1(vt,tt)})}function tf(it,tt,rt){return{instance:it,listener:tt,currentTarget:rt}}function oe(it,tt){for(var rt=tt+"Capture",at=[];it!==null;){var st=it,ot=st.stateNode;st.tag===5&&ot!==null&&(st=ot,ot=Kb(it,rt),ot!=null&&at.unshift(tf(it,ot,st)),ot=Kb(it,tt),ot!=null&&at.push(tf(it,ot,st))),it=it.return}return at}function vf(it){if(it===null)return null;do it=it.return;while(it&&it.tag!==5);return it||null}function wf(it,tt,rt,at,st){for(var ot=tt._reactName,lt=[];rt!==null&&rt!==at;){var ut=rt,ht=ut.alternate,mt=ut.stateNode;if(ht!==null&&ht===at)break;ut.tag===5&&mt!==null&&(ut=mt,st?(ht=Kb(rt,ot),ht!=null&&lt.unshift(tf(rt,ht,ut))):st||(ht=Kb(rt,ot),ht!=null&&lt.push(tf(rt,ht,ut)))),rt=rt.return}lt.length!==0&&it.push({event:tt,listeners:lt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(it){return(typeof it=="string"?it:""+it).replace(xf,`
`).replace(yf,"")}function Af(it,tt,rt){if(tt=zf(tt),zf(it)!==tt&&rt)throw Error(p$9(425))}function Bf(){}var Cf=null,Df=null;function Ef(it,tt){return it==="textarea"||it==="noscript"||typeof tt.children=="string"||typeof tt.children=="number"||typeof tt.dangerouslySetInnerHTML=="object"&&tt.dangerouslySetInnerHTML!==null&&tt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(it){return Hf.resolve(null).then(it).catch(If)}:Ff;function If(it){setTimeout(function(){throw it})}function Kf(it,tt){var rt=tt,at=0;do{var st=rt.nextSibling;if(it.removeChild(rt),st&&st.nodeType===8)if(rt=st.data,rt==="/$"){if(at===0){it.removeChild(st),bd(tt);return}at--}else rt!=="$"&&rt!=="$?"&&rt!=="$!"||at++;rt=st}while(rt);bd(tt)}function Lf(it){for(;it!=null;it=it.nextSibling){var tt=it.nodeType;if(tt===1||tt===3)break;if(tt===8){if(tt=it.data,tt==="$"||tt==="$!"||tt==="$?")break;if(tt==="/$")return null}}return it}function Mf(it){it=it.previousSibling;for(var tt=0;it;){if(it.nodeType===8){var rt=it.data;if(rt==="$"||rt==="$!"||rt==="$?"){if(tt===0)return it;tt--}else rt==="/$"&&tt++}it=it.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of$1="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(it){var tt=it[Of];if(tt)return tt;for(var rt=it.parentNode;rt;){if(tt=rt[uf]||rt[Of]){if(rt=tt.alternate,tt.child!==null||rt!==null&&rt.child!==null)for(it=Mf(it);it!==null;){if(rt=it[Of])return rt;it=Mf(it)}return tt}it=rt,rt=it.parentNode}return null}function Cb(it){return it=it[Of]||it[uf],!it||it.tag!==5&&it.tag!==6&&it.tag!==13&&it.tag!==3?null:it}function ue(it){if(it.tag===5||it.tag===6)return it.stateNode;throw Error(p$9(33))}function Db(it){return it[Pf]||null}var Sf=[],Tf=-1;function Uf(it){return{current:it}}function E$5(it){0>Tf||(it.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(it,tt){Tf++,Sf[Tf]=it.current,it.current=tt}var Vf={},H$4=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(it,tt){var rt=it.type.contextTypes;if(!rt)return Vf;var at=it.stateNode;if(at&&at.__reactInternalMemoizedUnmaskedChildContext===tt)return at.__reactInternalMemoizedMaskedChildContext;var st={},ot;for(ot in rt)st[ot]=tt[ot];return at&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=tt,it.__reactInternalMemoizedMaskedChildContext=st),st}function Zf(it){return it=it.childContextTypes,it!=null}function $f(){E$5(Wf),E$5(H$4)}function ag(it,tt,rt){if(H$4.current!==Vf)throw Error(p$9(168));G$1(H$4,tt),G$1(Wf,rt)}function bg(it,tt,rt){var at=it.stateNode;if(tt=tt.childContextTypes,typeof at.getChildContext!="function")return rt;at=at.getChildContext();for(var st in at)if(!(st in tt))throw Error(p$9(108,Ra(it)||"Unknown",st));return A$8({},rt,at)}function cg(it){return it=(it=it.stateNode)&&it.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$4.current,G$1(H$4,it),G$1(Wf,Wf.current),!0}function dg(it,tt,rt){var at=it.stateNode;if(!at)throw Error(p$9(169));rt?(it=bg(it,tt,Xf),at.__reactInternalMemoizedMergedChildContext=it,E$5(Wf),E$5(H$4),G$1(H$4,it)):E$5(Wf),G$1(Wf,rt)}var eg=null,fg=!1,gg=!1;function hg(it){eg===null?eg=[it]:eg.push(it)}function ig(it){fg=!0,hg(it)}function jg(){if(!gg&&eg!==null){gg=!0;var it=0,tt=C$5;try{var rt=eg;for(C$5=1;it<rt.length;it++){var at=rt[it];do at=at(!0);while(at!==null)}eg=null,fg=!1}catch(st){throw eg!==null&&(eg=eg.slice(it+1)),ac(fc,jg),st}finally{C$5=tt,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(it,tt){kg[lg++]=ng,kg[lg++]=mg,mg=it,ng=tt}function ug(it,tt,rt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=it;var at=rg;it=sg;var st=32-oc(at)-1;at&=~(1<<st),rt+=1;var ot=32-oc(tt)+st;if(30<ot){var lt=st-st%5;ot=(at&(1<<lt)-1).toString(32),at>>=lt,st-=lt,rg=1<<32-oc(tt)+st|rt<<st|at,sg=ot+it}else rg=1<<ot|rt<<st|at,sg=it}function vg(it){it.return!==null&&(tg(it,1),ug(it,1,0))}function wg(it){for(;it===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;it===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$5=!1,zg=null;function Ag(it,tt){var rt=Bg(5,null,null,0);rt.elementType="DELETED",rt.stateNode=tt,rt.return=it,tt=it.deletions,tt===null?(it.deletions=[rt],it.flags|=16):tt.push(rt)}function Cg(it,tt){switch(it.tag){case 5:var rt=it.type;return tt=tt.nodeType!==1||rt.toLowerCase()!==tt.nodeName.toLowerCase()?null:tt,tt!==null?(it.stateNode=tt,xg=it,yg=Lf(tt.firstChild),!0):!1;case 6:return tt=it.pendingProps===""||tt.nodeType!==3?null:tt,tt!==null?(it.stateNode=tt,xg=it,yg=null,!0):!1;case 13:return tt=tt.nodeType!==8?null:tt,tt!==null?(rt=qg!==null?{id:rg,overflow:sg}:null,it.memoizedState={dehydrated:tt,treeContext:rt,retryLane:1073741824},rt=Bg(18,null,null,0),rt.stateNode=tt,rt.return=it,it.child=rt,xg=it,yg=null,!0):!1;default:return!1}}function Dg(it){return(it.mode&1)!==0&&(it.flags&128)===0}function Eg(it){if(I$5){var tt=yg;if(tt){var rt=tt;if(!Cg(it,tt)){if(Dg(it))throw Error(p$9(418));tt=Lf(rt.nextSibling);var at=xg;tt&&Cg(it,tt)?Ag(at,rt):(it.flags=it.flags&-4097|2,I$5=!1,xg=it)}}else{if(Dg(it))throw Error(p$9(418));it.flags=it.flags&-4097|2,I$5=!1,xg=it}}}function Fg(it){for(it=it.return;it!==null&&it.tag!==5&&it.tag!==3&&it.tag!==13;)it=it.return;xg=it}function Gg(it){if(it!==xg)return!1;if(!I$5)return Fg(it),I$5=!0,!1;var tt;if((tt=it.tag!==3)&&!(tt=it.tag!==5)&&(tt=it.type,tt=tt!=="head"&&tt!=="body"&&!Ef(it.type,it.memoizedProps)),tt&&(tt=yg)){if(Dg(it))throw Hg(),Error(p$9(418));for(;tt;)Ag(it,tt),tt=Lf(tt.nextSibling)}if(Fg(it),it.tag===13){if(it=it.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$9(317));e:{for(it=it.nextSibling,tt=0;it;){if(it.nodeType===8){var rt=it.data;if(rt==="/$"){if(tt===0){yg=Lf(it.nextSibling);break e}tt--}else rt!=="$"&&rt!=="$!"&&rt!=="$?"||tt++}it=it.nextSibling}yg=null}}else yg=xg?Lf(it.stateNode.nextSibling):null;return!0}function Hg(){for(var it=yg;it;)it=Lf(it.nextSibling)}function Ig(){yg=xg=null,I$5=!1}function Jg(it){zg===null?zg=[it]:zg.push(it)}var Kg=ua.ReactCurrentBatchConfig;function Lg(it,tt){if(it&&it.defaultProps){tt=A$8({},tt),it=it.defaultProps;for(var rt in it)tt[rt]===void 0&&(tt[rt]=it[rt]);return tt}return tt}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(it){var tt=Mg.current;E$5(Mg),it._currentValue=tt}function Sg(it,tt,rt){for(;it!==null;){var at=it.alternate;if((it.childLanes&tt)!==tt?(it.childLanes|=tt,at!==null&&(at.childLanes|=tt)):at!==null&&(at.childLanes&tt)!==tt&&(at.childLanes|=tt),it===rt)break;it=it.return}}function Tg(it,tt){Ng=it,Pg=Og=null,it=it.dependencies,it!==null&&it.firstContext!==null&&((it.lanes&tt)!==0&&(Ug=!0),it.firstContext=null)}function Vg(it){var tt=it._currentValue;if(Pg!==it)if(it={context:it,memoizedValue:tt,next:null},Og===null){if(Ng===null)throw Error(p$9(308));Og=it,Ng.dependencies={lanes:0,firstContext:it}}else Og=Og.next=it;return tt}var Wg=null;function Xg(it){Wg===null?Wg=[it]:Wg.push(it)}function Yg(it,tt,rt,at){var st=tt.interleaved;return st===null?(rt.next=rt,Xg(tt)):(rt.next=st.next,st.next=rt),tt.interleaved=rt,Zg(it,at)}function Zg(it,tt){it.lanes|=tt;var rt=it.alternate;for(rt!==null&&(rt.lanes|=tt),rt=it,it=it.return;it!==null;)it.childLanes|=tt,rt=it.alternate,rt!==null&&(rt.childLanes|=tt),rt=it,it=it.return;return rt.tag===3?rt.stateNode:null}var $g=!1;function ah(it){it.updateQueue={baseState:it.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(it,tt){it=it.updateQueue,tt.updateQueue===it&&(tt.updateQueue={baseState:it.baseState,firstBaseUpdate:it.firstBaseUpdate,lastBaseUpdate:it.lastBaseUpdate,shared:it.shared,effects:it.effects})}function ch$1(it,tt){return{eventTime:it,lane:tt,tag:0,payload:null,callback:null,next:null}}function dh(it,tt,rt){var at=it.updateQueue;if(at===null)return null;if(at=at.shared,(K$6&2)!==0){var st=at.pending;return st===null?tt.next=tt:(tt.next=st.next,st.next=tt),at.pending=tt,Zg(it,rt)}return st=at.interleaved,st===null?(tt.next=tt,Xg(at)):(tt.next=st.next,st.next=tt),at.interleaved=tt,Zg(it,rt)}function eh(it,tt,rt){if(tt=tt.updateQueue,tt!==null&&(tt=tt.shared,(rt&4194240)!==0)){var at=tt.lanes;at&=it.pendingLanes,rt|=at,tt.lanes=rt,Cc(it,rt)}}function fh(it,tt){var rt=it.updateQueue,at=it.alternate;if(at!==null&&(at=at.updateQueue,rt===at)){var st=null,ot=null;if(rt=rt.firstBaseUpdate,rt!==null){do{var lt={eventTime:rt.eventTime,lane:rt.lane,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null};ot===null?st=ot=lt:ot=ot.next=lt,rt=rt.next}while(rt!==null);ot===null?st=ot=tt:ot=ot.next=tt}else st=ot=tt;rt={baseState:at.baseState,firstBaseUpdate:st,lastBaseUpdate:ot,shared:at.shared,effects:at.effects},it.updateQueue=rt;return}it=rt.lastBaseUpdate,it===null?rt.firstBaseUpdate=tt:it.next=tt,rt.lastBaseUpdate=tt}function gh(it,tt,rt,at){var st=it.updateQueue;$g=!1;var ot=st.firstBaseUpdate,lt=st.lastBaseUpdate,ut=st.shared.pending;if(ut!==null){st.shared.pending=null;var ht=ut,mt=ht.next;ht.next=null,lt===null?ot=mt:lt.next=mt,lt=ht;var bt=it.alternate;bt!==null&&(bt=bt.updateQueue,ut=bt.lastBaseUpdate,ut!==lt&&(ut===null?bt.firstBaseUpdate=mt:ut.next=mt,bt.lastBaseUpdate=ht))}if(ot!==null){var vt=st.baseState;lt=0,bt=mt=ht=null,ut=ot;do{var At=ut.lane,xt=ut.eventTime;if((at&At)===At){bt!==null&&(bt=bt.next={eventTime:xt,lane:0,tag:ut.tag,payload:ut.payload,callback:ut.callback,next:null});e:{var Et=it,Tt=ut;switch(At=tt,xt=rt,Tt.tag){case 1:if(Et=Tt.payload,typeof Et=="function"){vt=Et.call(xt,vt,At);break e}vt=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Tt.payload,At=typeof Et=="function"?Et.call(xt,vt,At):Et,At==null)break e;vt=A$8({},vt,At);break e;case 2:$g=!0}}ut.callback!==null&&ut.lane!==0&&(it.flags|=64,At=st.effects,At===null?st.effects=[ut]:At.push(ut))}else xt={eventTime:xt,lane:At,tag:ut.tag,payload:ut.payload,callback:ut.callback,next:null},bt===null?(mt=bt=xt,ht=vt):bt=bt.next=xt,lt|=At;if(ut=ut.next,ut===null){if(ut=st.shared.pending,ut===null)break;At=ut,ut=At.next,At.next=null,st.lastBaseUpdate=At,st.shared.pending=null}}while(1);if(bt===null&&(ht=vt),st.baseState=ht,st.firstBaseUpdate=mt,st.lastBaseUpdate=bt,tt=st.shared.interleaved,tt!==null){st=tt;do lt|=st.lane,st=st.next;while(st!==tt)}else ot===null&&(st.shared.lanes=0);hh|=lt,it.lanes=lt,it.memoizedState=vt}}function ih(it,tt,rt){if(it=tt.effects,tt.effects=null,it!==null)for(tt=0;tt<it.length;tt++){var at=it[tt],st=at.callback;if(st!==null){if(at.callback=null,at=rt,typeof st!="function")throw Error(p$9(191,st));st.call(at)}}}var jh=new aa.Component().refs;function kh(it,tt,rt,at){tt=it.memoizedState,rt=rt(at,tt),rt=rt==null?tt:A$8({},tt,rt),it.memoizedState=rt,it.lanes===0&&(it.updateQueue.baseState=rt)}var nh={isMounted:function(it){return(it=it._reactInternals)?Vb(it)===it:!1},enqueueSetState:function(it,tt,rt){it=it._reactInternals;var at=L$4(),st=lh(it),ot=ch$1(at,st);ot.payload=tt,rt!=null&&(ot.callback=rt),tt=dh(it,ot,st),tt!==null&&(mh(tt,it,st,at),eh(tt,it,st))},enqueueReplaceState:function(it,tt,rt){it=it._reactInternals;var at=L$4(),st=lh(it),ot=ch$1(at,st);ot.tag=1,ot.payload=tt,rt!=null&&(ot.callback=rt),tt=dh(it,ot,st),tt!==null&&(mh(tt,it,st,at),eh(tt,it,st))},enqueueForceUpdate:function(it,tt){it=it._reactInternals;var rt=L$4(),at=lh(it),st=ch$1(rt,at);st.tag=2,tt!=null&&(st.callback=tt),tt=dh(it,st,at),tt!==null&&(mh(tt,it,at,rt),eh(tt,it,at))}};function oh(it,tt,rt,at,st,ot,lt){return it=it.stateNode,typeof it.shouldComponentUpdate=="function"?it.shouldComponentUpdate(at,ot,lt):tt.prototype&&tt.prototype.isPureReactComponent?!Ie(rt,at)||!Ie(st,ot):!0}function ph(it,tt,rt){var at=!1,st=Vf,ot=tt.contextType;return typeof ot=="object"&&ot!==null?ot=Vg(ot):(st=Zf(tt)?Xf:H$4.current,at=tt.contextTypes,ot=(at=at!=null)?Yf(it,st):Vf),tt=new tt(rt,ot),it.memoizedState=tt.state!==null&&tt.state!==void 0?tt.state:null,tt.updater=nh,it.stateNode=tt,tt._reactInternals=it,at&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=st,it.__reactInternalMemoizedMaskedChildContext=ot),tt}function qh(it,tt,rt,at){it=tt.state,typeof tt.componentWillReceiveProps=="function"&&tt.componentWillReceiveProps(rt,at),typeof tt.UNSAFE_componentWillReceiveProps=="function"&&tt.UNSAFE_componentWillReceiveProps(rt,at),tt.state!==it&&nh.enqueueReplaceState(tt,tt.state,null)}function rh$1(it,tt,rt,at){var st=it.stateNode;st.props=rt,st.state=it.memoizedState,st.refs=jh,ah(it);var ot=tt.contextType;typeof ot=="object"&&ot!==null?st.context=Vg(ot):(ot=Zf(tt)?Xf:H$4.current,st.context=Yf(it,ot)),st.state=it.memoizedState,ot=tt.getDerivedStateFromProps,typeof ot=="function"&&(kh(it,tt,ot,rt),st.state=it.memoizedState),typeof tt.getDerivedStateFromProps=="function"||typeof st.getSnapshotBeforeUpdate=="function"||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(tt=st.state,typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount(),tt!==st.state&&nh.enqueueReplaceState(st,st.state,null),gh(it,rt,st,at),st.state=it.memoizedState),typeof st.componentDidMount=="function"&&(it.flags|=4194308)}function sh$1(it,tt,rt){if(it=rt.ref,it!==null&&typeof it!="function"&&typeof it!="object"){if(rt._owner){if(rt=rt._owner,rt){if(rt.tag!==1)throw Error(p$9(309));var at=rt.stateNode}if(!at)throw Error(p$9(147,it));var st=at,ot=""+it;return tt!==null&&tt.ref!==null&&typeof tt.ref=="function"&&tt.ref._stringRef===ot?tt.ref:(tt=function(lt){var ut=st.refs;ut===jh&&(ut=st.refs={}),lt===null?delete ut[ot]:ut[ot]=lt},tt._stringRef=ot,tt)}if(typeof it!="string")throw Error(p$9(284));if(!rt._owner)throw Error(p$9(290,it))}return it}function th(it,tt){throw it=Object.prototype.toString.call(tt),Error(p$9(31,it==="[object Object]"?"object with keys {"+Object.keys(tt).join(", ")+"}":it))}function uh(it){var tt=it._init;return tt(it._payload)}function vh(it){function tt(Ct,It){if(it){var St=Ct.deletions;St===null?(Ct.deletions=[It],Ct.flags|=16):St.push(It)}}function rt(Ct,It){if(!it)return null;for(;It!==null;)tt(Ct,It),It=It.sibling;return null}function at(Ct,It){for(Ct=new Map;It!==null;)It.key!==null?Ct.set(It.key,It):Ct.set(It.index,It),It=It.sibling;return Ct}function st(Ct,It){return Ct=wh(Ct,It),Ct.index=0,Ct.sibling=null,Ct}function ot(Ct,It,St){return Ct.index=St,it?(St=Ct.alternate,St!==null?(St=St.index,St<It?(Ct.flags|=2,It):St):(Ct.flags|=2,It)):(Ct.flags|=1048576,It)}function lt(Ct){return it&&Ct.alternate===null&&(Ct.flags|=2),Ct}function ut(Ct,It,St,Rt){return It===null||It.tag!==6?(It=xh(St,Ct.mode,Rt),It.return=Ct,It):(It=st(It,St),It.return=Ct,It)}function ht(Ct,It,St,Rt){var Dt=St.type;return Dt===ya?bt(Ct,It,St.props.children,Rt,St.key):It!==null&&(It.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===Ha&&uh(Dt)===It.type)?(Rt=st(It,St.props),Rt.ref=sh$1(Ct,It,St),Rt.return=Ct,Rt):(Rt=yh(St.type,St.key,St.props,null,Ct.mode,Rt),Rt.ref=sh$1(Ct,It,St),Rt.return=Ct,Rt)}function mt(Ct,It,St,Rt){return It===null||It.tag!==4||It.stateNode.containerInfo!==St.containerInfo||It.stateNode.implementation!==St.implementation?(It=zh$1(St,Ct.mode,Rt),It.return=Ct,It):(It=st(It,St.children||[]),It.return=Ct,It)}function bt(Ct,It,St,Rt,Dt){return It===null||It.tag!==7?(It=Ah(St,Ct.mode,Rt,Dt),It.return=Ct,It):(It=st(It,St),It.return=Ct,It)}function vt(Ct,It,St){if(typeof It=="string"&&It!==""||typeof It=="number")return It=xh(""+It,Ct.mode,St),It.return=Ct,It;if(typeof It=="object"&&It!==null){switch(It.$$typeof){case va:return St=yh(It.type,It.key,It.props,null,Ct.mode,St),St.ref=sh$1(Ct,null,It),St.return=Ct,St;case wa:return It=zh$1(It,Ct.mode,St),It.return=Ct,It;case Ha:var Rt=It._init;return vt(Ct,Rt(It._payload),St)}if(eb(It)||Ka(It))return It=Ah(It,Ct.mode,St,null),It.return=Ct,It;th(Ct,It)}return null}function At(Ct,It,St,Rt){var Dt=It!==null?It.key:null;if(typeof St=="string"&&St!==""||typeof St=="number")return Dt!==null?null:ut(Ct,It,""+St,Rt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return St.key===Dt?ht(Ct,It,St,Rt):null;case wa:return St.key===Dt?mt(Ct,It,St,Rt):null;case Ha:return Dt=St._init,At(Ct,It,Dt(St._payload),Rt)}if(eb(St)||Ka(St))return Dt!==null?null:bt(Ct,It,St,Rt,null);th(Ct,St)}return null}function xt(Ct,It,St,Rt,Dt){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number")return Ct=Ct.get(St)||null,ut(It,Ct,""+Rt,Dt);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case va:return Ct=Ct.get(Rt.key===null?St:Rt.key)||null,ht(It,Ct,Rt,Dt);case wa:return Ct=Ct.get(Rt.key===null?St:Rt.key)||null,mt(It,Ct,Rt,Dt);case Ha:var Wt=Rt._init;return xt(Ct,It,St,Wt(Rt._payload),Dt)}if(eb(Rt)||Ka(Rt))return Ct=Ct.get(St)||null,bt(It,Ct,Rt,Dt,null);th(It,Rt)}return null}function Et(Ct,It,St,Rt){for(var Dt=null,Wt=null,qt=It,Vt=It=0,Yt=null;qt!==null&&Vt<St.length;Vt++){qt.index>Vt?(Yt=qt,qt=null):Yt=qt.sibling;var jt=At(Ct,qt,St[Vt],Rt);if(jt===null){qt===null&&(qt=Yt);break}it&&qt&&jt.alternate===null&&tt(Ct,qt),It=ot(jt,It,Vt),Wt===null?Dt=jt:Wt.sibling=jt,Wt=jt,qt=Yt}if(Vt===St.length)return rt(Ct,qt),I$5&&tg(Ct,Vt),Dt;if(qt===null){for(;Vt<St.length;Vt++)qt=vt(Ct,St[Vt],Rt),qt!==null&&(It=ot(qt,It,Vt),Wt===null?Dt=qt:Wt.sibling=qt,Wt=qt);return I$5&&tg(Ct,Vt),Dt}for(qt=at(Ct,qt);Vt<St.length;Vt++)Yt=xt(qt,Ct,Vt,St[Vt],Rt),Yt!==null&&(it&&Yt.alternate!==null&&qt.delete(Yt.key===null?Vt:Yt.key),It=ot(Yt,It,Vt),Wt===null?Dt=Yt:Wt.sibling=Yt,Wt=Yt);return it&&qt.forEach(function(kt){return tt(Ct,kt)}),I$5&&tg(Ct,Vt),Dt}function Tt(Ct,It,St,Rt){var Dt=Ka(St);if(typeof Dt!="function")throw Error(p$9(150));if(St=Dt.call(St),St==null)throw Error(p$9(151));for(var Wt=Dt=null,qt=It,Vt=It=0,Yt=null,jt=St.next();qt!==null&&!jt.done;Vt++,jt=St.next()){qt.index>Vt?(Yt=qt,qt=null):Yt=qt.sibling;var kt=At(Ct,qt,jt.value,Rt);if(kt===null){qt===null&&(qt=Yt);break}it&&qt&&kt.alternate===null&&tt(Ct,qt),It=ot(kt,It,Vt),Wt===null?Dt=kt:Wt.sibling=kt,Wt=kt,qt=Yt}if(jt.done)return rt(Ct,qt),I$5&&tg(Ct,Vt),Dt;if(qt===null){for(;!jt.done;Vt++,jt=St.next())jt=vt(Ct,jt.value,Rt),jt!==null&&(It=ot(jt,It,Vt),Wt===null?Dt=jt:Wt.sibling=jt,Wt=jt);return I$5&&tg(Ct,Vt),Dt}for(qt=at(Ct,qt);!jt.done;Vt++,jt=St.next())jt=xt(qt,Ct,Vt,jt.value,Rt),jt!==null&&(it&&jt.alternate!==null&&qt.delete(jt.key===null?Vt:jt.key),It=ot(jt,It,Vt),Wt===null?Dt=jt:Wt.sibling=jt,Wt=jt);return it&&qt.forEach(function(zt){return tt(Ct,zt)}),I$5&&tg(Ct,Vt),Dt}function wt(Ct,It,St,Rt){if(typeof St=="object"&&St!==null&&St.type===ya&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case va:e:{for(var Dt=St.key,Wt=It;Wt!==null;){if(Wt.key===Dt){if(Dt=St.type,Dt===ya){if(Wt.tag===7){rt(Ct,Wt.sibling),It=st(Wt,St.props.children),It.return=Ct,Ct=It;break e}}else if(Wt.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===Ha&&uh(Dt)===Wt.type){rt(Ct,Wt.sibling),It=st(Wt,St.props),It.ref=sh$1(Ct,Wt,St),It.return=Ct,Ct=It;break e}rt(Ct,Wt);break}else tt(Ct,Wt);Wt=Wt.sibling}St.type===ya?(It=Ah(St.props.children,Ct.mode,Rt,St.key),It.return=Ct,Ct=It):(Rt=yh(St.type,St.key,St.props,null,Ct.mode,Rt),Rt.ref=sh$1(Ct,It,St),Rt.return=Ct,Ct=Rt)}return lt(Ct);case wa:e:{for(Wt=St.key;It!==null;){if(It.key===Wt)if(It.tag===4&&It.stateNode.containerInfo===St.containerInfo&&It.stateNode.implementation===St.implementation){rt(Ct,It.sibling),It=st(It,St.children||[]),It.return=Ct,Ct=It;break e}else{rt(Ct,It);break}else tt(Ct,It);It=It.sibling}It=zh$1(St,Ct.mode,Rt),It.return=Ct,Ct=It}return lt(Ct);case Ha:return Wt=St._init,wt(Ct,It,Wt(St._payload),Rt)}if(eb(St))return Et(Ct,It,St,Rt);if(Ka(St))return Tt(Ct,It,St,Rt);th(Ct,St)}return typeof St=="string"&&St!==""||typeof St=="number"?(St=""+St,It!==null&&It.tag===6?(rt(Ct,It.sibling),It=st(It,St),It.return=Ct,Ct=It):(rt(Ct,It),It=xh(St,Ct.mode,Rt),It.return=Ct,Ct=It),lt(Ct)):rt(Ct,It)}return wt}var Bh=vh(!0),Ch$1=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(it){if(it===Dh)throw Error(p$9(174));return it}function Ih(it,tt){switch(G$1(Gh,tt),G$1(Fh,it),G$1(Eh,Dh),it=tt.nodeType,it){case 9:case 11:tt=(tt=tt.documentElement)?tt.namespaceURI:lb(null,"");break;default:it=it===8?tt.parentNode:tt,tt=it.namespaceURI||null,it=it.tagName,tt=lb(tt,it)}E$5(Eh),G$1(Eh,tt)}function Jh(){E$5(Eh),E$5(Fh),E$5(Gh)}function Kh$1(it){Hh(Gh.current);var tt=Hh(Eh.current),rt=lb(tt,it.type);tt!==rt&&(G$1(Fh,it),G$1(Eh,rt))}function Lh(it){Fh.current===it&&(E$5(Eh),E$5(Fh))}var M$4=Uf(0);function Mh(it){for(var tt=it;tt!==null;){if(tt.tag===13){var rt=tt.memoizedState;if(rt!==null&&(rt=rt.dehydrated,rt===null||rt.data==="$?"||rt.data==="$!"))return tt}else if(tt.tag===19&&tt.memoizedProps.revealOrder!==void 0){if((tt.flags&128)!==0)return tt}else if(tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===it)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===it)return null;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}return null}var Nh=[];function Oh(){for(var it=0;it<Nh.length;it++)Nh[it]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$5=null,O$2=null,P$5=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$2(){throw Error(p$9(321))}function Wh(it,tt){if(tt===null)return!1;for(var rt=0;rt<tt.length&&rt<it.length;rt++)if(!He(it[rt],tt[rt]))return!1;return!0}function Xh(it,tt,rt,at,st,ot){if(Rh=ot,N$5=tt,tt.memoizedState=null,tt.updateQueue=null,tt.lanes=0,Ph.current=it===null||it.memoizedState===null?Yh:Zh,it=rt(at,st),Th){ot=0;do{if(Th=!1,Uh=0,25<=ot)throw Error(p$9(301));ot+=1,P$5=O$2=null,tt.updateQueue=null,Ph.current=$h,it=rt(at,st)}while(Th)}if(Ph.current=ai,tt=O$2!==null&&O$2.next!==null,Rh=0,P$5=O$2=N$5=null,Sh=!1,tt)throw Error(p$9(300));return it}function bi(){var it=Uh!==0;return Uh=0,it}function ci(){var it={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$5===null?N$5.memoizedState=P$5=it:P$5=P$5.next=it,P$5}function di(){if(O$2===null){var it=N$5.alternate;it=it!==null?it.memoizedState:null}else it=O$2.next;var tt=P$5===null?N$5.memoizedState:P$5.next;if(tt!==null)P$5=tt,O$2=it;else{if(it===null)throw Error(p$9(310));O$2=it,it={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$5===null?N$5.memoizedState=P$5=it:P$5=P$5.next=it}return P$5}function ei(it,tt){return typeof tt=="function"?tt(it):tt}function fi(it){var tt=di(),rt=tt.queue;if(rt===null)throw Error(p$9(311));rt.lastRenderedReducer=it;var at=O$2,st=at.baseQueue,ot=rt.pending;if(ot!==null){if(st!==null){var lt=st.next;st.next=ot.next,ot.next=lt}at.baseQueue=st=ot,rt.pending=null}if(st!==null){ot=st.next,at=at.baseState;var ut=lt=null,ht=null,mt=ot;do{var bt=mt.lane;if((Rh&bt)===bt)ht!==null&&(ht=ht.next={lane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),at=mt.hasEagerState?mt.eagerState:it(at,mt.action);else{var vt={lane:bt,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null};ht===null?(ut=ht=vt,lt=at):ht=ht.next=vt,N$5.lanes|=bt,hh|=bt}mt=mt.next}while(mt!==null&&mt!==ot);ht===null?lt=at:ht.next=ut,He(at,tt.memoizedState)||(Ug=!0),tt.memoizedState=at,tt.baseState=lt,tt.baseQueue=ht,rt.lastRenderedState=at}if(it=rt.interleaved,it!==null){st=it;do ot=st.lane,N$5.lanes|=ot,hh|=ot,st=st.next;while(st!==it)}else st===null&&(rt.lanes=0);return[tt.memoizedState,rt.dispatch]}function gi(it){var tt=di(),rt=tt.queue;if(rt===null)throw Error(p$9(311));rt.lastRenderedReducer=it;var at=rt.dispatch,st=rt.pending,ot=tt.memoizedState;if(st!==null){rt.pending=null;var lt=st=st.next;do ot=it(ot,lt.action),lt=lt.next;while(lt!==st);He(ot,tt.memoizedState)||(Ug=!0),tt.memoizedState=ot,tt.baseQueue===null&&(tt.baseState=ot),rt.lastRenderedState=ot}return[ot,at]}function hi(){}function ii(it,tt){var rt=N$5,at=di(),st=tt(),ot=!He(at.memoizedState,st);if(ot&&(at.memoizedState=st,Ug=!0),at=at.queue,ji(ki.bind(null,rt,at,it),[it]),at.getSnapshot!==tt||ot||P$5!==null&&P$5.memoizedState.tag&1){if(rt.flags|=2048,li(9,mi.bind(null,rt,at,st,tt),void 0,null),R$4===null)throw Error(p$9(349));(Rh&30)!==0||ni(rt,tt,st)}return st}function ni(it,tt,rt){it.flags|=16384,it={getSnapshot:tt,value:rt},tt=N$5.updateQueue,tt===null?(tt={lastEffect:null,stores:null},N$5.updateQueue=tt,tt.stores=[it]):(rt=tt.stores,rt===null?tt.stores=[it]:rt.push(it))}function mi(it,tt,rt,at){tt.value=rt,tt.getSnapshot=at,oi(tt)&&pi(it)}function ki(it,tt,rt){return rt(function(){oi(tt)&&pi(it)})}function oi(it){var tt=it.getSnapshot;it=it.value;try{var rt=tt();return!He(it,rt)}catch{return!0}}function pi(it){var tt=Zg(it,1);tt!==null&&mh(tt,it,1,-1)}function qi(it){var tt=ci();return typeof it=="function"&&(it=it()),tt.memoizedState=tt.baseState=it,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:it},tt.queue=it,it=it.dispatch=ri.bind(null,N$5,it),[tt.memoizedState,it]}function li(it,tt,rt,at){return it={tag:it,create:tt,destroy:rt,deps:at,next:null},tt=N$5.updateQueue,tt===null?(tt={lastEffect:null,stores:null},N$5.updateQueue=tt,tt.lastEffect=it.next=it):(rt=tt.lastEffect,rt===null?tt.lastEffect=it.next=it:(at=rt.next,rt.next=it,it.next=at,tt.lastEffect=it)),it}function si(){return di().memoizedState}function ti(it,tt,rt,at){var st=ci();N$5.flags|=it,st.memoizedState=li(1|tt,rt,void 0,at===void 0?null:at)}function ui(it,tt,rt,at){var st=di();at=at===void 0?null:at;var ot=void 0;if(O$2!==null){var lt=O$2.memoizedState;if(ot=lt.destroy,at!==null&&Wh(at,lt.deps)){st.memoizedState=li(tt,rt,ot,at);return}}N$5.flags|=it,st.memoizedState=li(1|tt,rt,ot,at)}function vi(it,tt){return ti(8390656,8,it,tt)}function ji(it,tt){return ui(2048,8,it,tt)}function wi(it,tt){return ui(4,2,it,tt)}function xi(it,tt){return ui(4,4,it,tt)}function yi(it,tt){if(typeof tt=="function")return it=it(),tt(it),function(){tt(null)};if(tt!=null)return it=it(),tt.current=it,function(){tt.current=null}}function zi(it,tt,rt){return rt=rt!=null?rt.concat([it]):null,ui(4,4,yi.bind(null,tt,it),rt)}function Ai(){}function Bi(it,tt){var rt=di();tt=tt===void 0?null:tt;var at=rt.memoizedState;return at!==null&&tt!==null&&Wh(tt,at[1])?at[0]:(rt.memoizedState=[it,tt],it)}function Ci(it,tt){var rt=di();tt=tt===void 0?null:tt;var at=rt.memoizedState;return at!==null&&tt!==null&&Wh(tt,at[1])?at[0]:(it=it(),rt.memoizedState=[it,tt],it)}function Di(it,tt,rt){return(Rh&21)===0?(it.baseState&&(it.baseState=!1,Ug=!0),it.memoizedState=rt):(He(rt,tt)||(rt=yc(),N$5.lanes|=rt,hh|=rt,it.baseState=!0),tt)}function Ei$1(it,tt){var rt=C$5;C$5=rt!==0&&4>rt?rt:4,it(!0);var at=Qh.transition;Qh.transition={};try{it(!1),tt()}finally{C$5=rt,Qh.transition=at}}function Fi(){return di().memoizedState}function Gi(it,tt,rt){var at=lh(it);if(rt={lane:at,action:rt,hasEagerState:!1,eagerState:null,next:null},Hi(it))Ii$1(tt,rt);else if(rt=Yg(it,tt,rt,at),rt!==null){var st=L$4();mh(rt,it,at,st),Ji(rt,tt,at)}}function ri(it,tt,rt){var at=lh(it),st={lane:at,action:rt,hasEagerState:!1,eagerState:null,next:null};if(Hi(it))Ii$1(tt,st);else{var ot=it.alternate;if(it.lanes===0&&(ot===null||ot.lanes===0)&&(ot=tt.lastRenderedReducer,ot!==null))try{var lt=tt.lastRenderedState,ut=ot(lt,rt);if(st.hasEagerState=!0,st.eagerState=ut,He(ut,lt)){var ht=tt.interleaved;ht===null?(st.next=st,Xg(tt)):(st.next=ht.next,ht.next=st),tt.interleaved=st;return}}catch{}finally{}rt=Yg(it,tt,st,at),rt!==null&&(st=L$4(),mh(rt,it,at,st),Ji(rt,tt,at))}}function Hi(it){var tt=it.alternate;return it===N$5||tt!==null&&tt===N$5}function Ii$1(it,tt){Th=Sh=!0;var rt=it.pending;rt===null?tt.next=tt:(tt.next=rt.next,rt.next=tt),it.pending=tt}function Ji(it,tt,rt){if((rt&4194240)!==0){var at=tt.lanes;at&=it.pendingLanes,rt|=at,tt.lanes=rt,Cc(it,rt)}}var ai={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(it,tt){return ci().memoizedState=[it,tt===void 0?null:tt],it},useContext:Vg,useEffect:vi,useImperativeHandle:function(it,tt,rt){return rt=rt!=null?rt.concat([it]):null,ti(4194308,4,yi.bind(null,tt,it),rt)},useLayoutEffect:function(it,tt){return ti(4194308,4,it,tt)},useInsertionEffect:function(it,tt){return ti(4,2,it,tt)},useMemo:function(it,tt){var rt=ci();return tt=tt===void 0?null:tt,it=it(),rt.memoizedState=[it,tt],it},useReducer:function(it,tt,rt){var at=ci();return tt=rt!==void 0?rt(tt):tt,at.memoizedState=at.baseState=tt,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:tt},at.queue=it,it=it.dispatch=Gi.bind(null,N$5,it),[at.memoizedState,it]},useRef:function(it){var tt=ci();return it={current:it},tt.memoizedState=it},useState:qi,useDebugValue:Ai,useDeferredValue:function(it){return ci().memoizedState=it},useTransition:function(){var it=qi(!1),tt=it[0];return it=Ei$1.bind(null,it[1]),ci().memoizedState=it,[tt,it]},useMutableSource:function(){},useSyncExternalStore:function(it,tt,rt){var at=N$5,st=ci();if(I$5){if(rt===void 0)throw Error(p$9(407));rt=rt()}else{if(rt=tt(),R$4===null)throw Error(p$9(349));(Rh&30)!==0||ni(at,tt,rt)}st.memoizedState=rt;var ot={value:rt,getSnapshot:tt};return st.queue=ot,vi(ki.bind(null,at,ot,it),[it]),at.flags|=2048,li(9,mi.bind(null,at,ot,rt,tt),void 0,null),rt},useId:function(){var it=ci(),tt=R$4.identifierPrefix;if(I$5){var rt=sg,at=rg;rt=(at&~(1<<32-oc(at)-1)).toString(32)+rt,tt=":"+tt+"R"+rt,rt=Uh++,0<rt&&(tt+="H"+rt.toString(32)),tt+=":"}else rt=Vh++,tt=":"+tt+"r"+rt.toString(32)+":";return it.memoizedState=tt},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(it){var tt=di();return Di(tt,O$2.memoizedState,it)},useTransition:function(){var it=fi(ei)[0],tt=di().memoizedState;return[it,tt]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(it){var tt=di();return O$2===null?tt.memoizedState=it:Di(tt,O$2.memoizedState,it)},useTransition:function(){var it=gi(ei)[0],tt=di().memoizedState;return[it,tt]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(it,tt){try{var rt="",at=tt;do rt+=Pa(at),at=at.return;while(at);var st=rt}catch(ot){st=`
Error generating stack: `+ot.message+`
`+ot.stack}return{value:it,source:tt,stack:st,digest:null}}function Li(it,tt,rt){return{value:it,source:null,stack:rt!=null?rt:null,digest:tt!=null?tt:null}}function Mi(it,tt){try{console.error(tt.value)}catch(rt){setTimeout(function(){throw rt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(it,tt,rt){rt=ch$1(-1,rt),rt.tag=3,rt.payload={element:null};var at=tt.value;return rt.callback=function(){Pi$1||(Pi$1=!0,Qi=at),Mi(it,tt)},rt}function Ri(it,tt,rt){rt=ch$1(-1,rt),rt.tag=3;var at=it.type.getDerivedStateFromError;if(typeof at=="function"){var st=tt.value;rt.payload=function(){return at(st)},rt.callback=function(){Mi(it,tt)}}var ot=it.stateNode;return ot!==null&&typeof ot.componentDidCatch=="function"&&(rt.callback=function(){Mi(it,tt),typeof at!="function"&&(Si$1===null?Si$1=new Set([this]):Si$1.add(this));var lt=tt.stack;this.componentDidCatch(tt.value,{componentStack:lt!==null?lt:""})}),rt}function Ti$1(it,tt,rt){var at=it.pingCache;if(at===null){at=it.pingCache=new Ni;var st=new Set;at.set(tt,st)}else st=at.get(tt),st===void 0&&(st=new Set,at.set(tt,st));st.has(rt)||(st.add(rt),it=Ui.bind(null,it,tt,rt),tt.then(it,it))}function Vi(it){do{var tt;if((tt=it.tag===13)&&(tt=it.memoizedState,tt=tt!==null?tt.dehydrated!==null:!0),tt)return it;it=it.return}while(it!==null);return null}function Wi(it,tt,rt,at,st){return(it.mode&1)===0?(it===tt?it.flags|=65536:(it.flags|=128,rt.flags|=131072,rt.flags&=-52805,rt.tag===1&&(rt.alternate===null?rt.tag=17:(tt=ch$1(-1,1),tt.tag=2,dh(rt,tt,1))),rt.lanes|=1),it):(it.flags|=65536,it.lanes=st,it)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(it,tt,rt,at){tt.child=it===null?Ch$1(tt,null,rt,at):Bh(tt,it.child,rt,at)}function Zi(it,tt,rt,at,st){rt=rt.render;var ot=tt.ref;return Tg(tt,st),at=Xh(it,tt,rt,at,ot,st),rt=bi(),it!==null&&!Ug?(tt.updateQueue=it.updateQueue,tt.flags&=-2053,it.lanes&=~st,$i(it,tt,st)):(I$5&&rt&&vg(tt),tt.flags|=1,Yi(it,tt,at,st),tt.child)}function aj(it,tt,rt,at,st){if(it===null){var ot=rt.type;return typeof ot=="function"&&!bj(ot)&&ot.defaultProps===void 0&&rt.compare===null&&rt.defaultProps===void 0?(tt.tag=15,tt.type=ot,cj(it,tt,ot,at,st)):(it=yh(rt.type,null,at,tt,tt.mode,st),it.ref=tt.ref,it.return=tt,tt.child=it)}if(ot=it.child,(it.lanes&st)===0){var lt=ot.memoizedProps;if(rt=rt.compare,rt=rt!==null?rt:Ie,rt(lt,at)&&it.ref===tt.ref)return $i(it,tt,st)}return tt.flags|=1,it=wh(ot,at),it.ref=tt.ref,it.return=tt,tt.child=it}function cj(it,tt,rt,at,st){if(it!==null){var ot=it.memoizedProps;if(Ie(ot,at)&&it.ref===tt.ref)if(Ug=!1,tt.pendingProps=at=ot,(it.lanes&st)!==0)(it.flags&131072)!==0&&(Ug=!0);else return tt.lanes=it.lanes,$i(it,tt,st)}return dj(it,tt,rt,at,st)}function ej(it,tt,rt){var at=tt.pendingProps,st=at.children,ot=it!==null?it.memoizedState:null;if(at.mode==="hidden")if((tt.mode&1)===0)tt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=rt;else{if((rt&1073741824)===0)return it=ot!==null?ot.baseLanes|rt:rt,tt.lanes=tt.childLanes=1073741824,tt.memoizedState={baseLanes:it,cachePool:null,transitions:null},tt.updateQueue=null,G$1(fj,gj),gj|=it,null;tt.memoizedState={baseLanes:0,cachePool:null,transitions:null},at=ot!==null?ot.baseLanes:rt,G$1(fj,gj),gj|=at}else ot!==null?(at=ot.baseLanes|rt,tt.memoizedState=null):at=rt,G$1(fj,gj),gj|=at;return Yi(it,tt,st,rt),tt.child}function hj(it,tt){var rt=tt.ref;(it===null&&rt!==null||it!==null&&it.ref!==rt)&&(tt.flags|=512,tt.flags|=2097152)}function dj(it,tt,rt,at,st){var ot=Zf(rt)?Xf:H$4.current;return ot=Yf(tt,ot),Tg(tt,st),rt=Xh(it,tt,rt,at,ot,st),at=bi(),it!==null&&!Ug?(tt.updateQueue=it.updateQueue,tt.flags&=-2053,it.lanes&=~st,$i(it,tt,st)):(I$5&&at&&vg(tt),tt.flags|=1,Yi(it,tt,rt,st),tt.child)}function ij(it,tt,rt,at,st){if(Zf(rt)){var ot=!0;cg(tt)}else ot=!1;if(Tg(tt,st),tt.stateNode===null)jj(it,tt),ph(tt,rt,at),rh$1(tt,rt,at,st),at=!0;else if(it===null){var lt=tt.stateNode,ut=tt.memoizedProps;lt.props=ut;var ht=lt.context,mt=rt.contextType;typeof mt=="object"&&mt!==null?mt=Vg(mt):(mt=Zf(rt)?Xf:H$4.current,mt=Yf(tt,mt));var bt=rt.getDerivedStateFromProps,vt=typeof bt=="function"||typeof lt.getSnapshotBeforeUpdate=="function";vt||typeof lt.UNSAFE_componentWillReceiveProps!="function"&&typeof lt.componentWillReceiveProps!="function"||(ut!==at||ht!==mt)&&qh(tt,lt,at,mt),$g=!1;var At=tt.memoizedState;lt.state=At,gh(tt,at,lt,st),ht=tt.memoizedState,ut!==at||At!==ht||Wf.current||$g?(typeof bt=="function"&&(kh(tt,rt,bt,at),ht=tt.memoizedState),(ut=$g||oh(tt,rt,ut,at,At,ht,mt))?(vt||typeof lt.UNSAFE_componentWillMount!="function"&&typeof lt.componentWillMount!="function"||(typeof lt.componentWillMount=="function"&&lt.componentWillMount(),typeof lt.UNSAFE_componentWillMount=="function"&&lt.UNSAFE_componentWillMount()),typeof lt.componentDidMount=="function"&&(tt.flags|=4194308)):(typeof lt.componentDidMount=="function"&&(tt.flags|=4194308),tt.memoizedProps=at,tt.memoizedState=ht),lt.props=at,lt.state=ht,lt.context=mt,at=ut):(typeof lt.componentDidMount=="function"&&(tt.flags|=4194308),at=!1)}else{lt=tt.stateNode,bh(it,tt),ut=tt.memoizedProps,mt=tt.type===tt.elementType?ut:Lg(tt.type,ut),lt.props=mt,vt=tt.pendingProps,At=lt.context,ht=rt.contextType,typeof ht=="object"&&ht!==null?ht=Vg(ht):(ht=Zf(rt)?Xf:H$4.current,ht=Yf(tt,ht));var xt=rt.getDerivedStateFromProps;(bt=typeof xt=="function"||typeof lt.getSnapshotBeforeUpdate=="function")||typeof lt.UNSAFE_componentWillReceiveProps!="function"&&typeof lt.componentWillReceiveProps!="function"||(ut!==vt||At!==ht)&&qh(tt,lt,at,ht),$g=!1,At=tt.memoizedState,lt.state=At,gh(tt,at,lt,st);var Et=tt.memoizedState;ut!==vt||At!==Et||Wf.current||$g?(typeof xt=="function"&&(kh(tt,rt,xt,at),Et=tt.memoizedState),(mt=$g||oh(tt,rt,mt,at,At,Et,ht)||!1)?(bt||typeof lt.UNSAFE_componentWillUpdate!="function"&&typeof lt.componentWillUpdate!="function"||(typeof lt.componentWillUpdate=="function"&&lt.componentWillUpdate(at,Et,ht),typeof lt.UNSAFE_componentWillUpdate=="function"&&lt.UNSAFE_componentWillUpdate(at,Et,ht)),typeof lt.componentDidUpdate=="function"&&(tt.flags|=4),typeof lt.getSnapshotBeforeUpdate=="function"&&(tt.flags|=1024)):(typeof lt.componentDidUpdate!="function"||ut===it.memoizedProps&&At===it.memoizedState||(tt.flags|=4),typeof lt.getSnapshotBeforeUpdate!="function"||ut===it.memoizedProps&&At===it.memoizedState||(tt.flags|=1024),tt.memoizedProps=at,tt.memoizedState=Et),lt.props=at,lt.state=Et,lt.context=ht,at=mt):(typeof lt.componentDidUpdate!="function"||ut===it.memoizedProps&&At===it.memoizedState||(tt.flags|=4),typeof lt.getSnapshotBeforeUpdate!="function"||ut===it.memoizedProps&&At===it.memoizedState||(tt.flags|=1024),at=!1)}return kj(it,tt,rt,at,ot,st)}function kj(it,tt,rt,at,st,ot){hj(it,tt);var lt=(tt.flags&128)!==0;if(!at&&!lt)return st&&dg(tt,rt,!1),$i(it,tt,ot);at=tt.stateNode,Xi.current=tt;var ut=lt&&typeof rt.getDerivedStateFromError!="function"?null:at.render();return tt.flags|=1,it!==null&&lt?(tt.child=Bh(tt,it.child,null,ot),tt.child=Bh(tt,null,ut,ot)):Yi(it,tt,ut,ot),tt.memoizedState=at.state,st&&dg(tt,rt,!0),tt.child}function lj(it){var tt=it.stateNode;tt.pendingContext?ag(it,tt.pendingContext,tt.pendingContext!==tt.context):tt.context&&ag(it,tt.context,!1),Ih(it,tt.containerInfo)}function mj(it,tt,rt,at,st){return Ig(),Jg(st),tt.flags|=256,Yi(it,tt,rt,at),tt.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(it){return{baseLanes:it,cachePool:null,transitions:null}}function pj(it,tt,rt){var at=tt.pendingProps,st=M$4.current,ot=!1,lt=(tt.flags&128)!==0,ut;if((ut=lt)||(ut=it!==null&&it.memoizedState===null?!1:(st&2)!==0),ut?(ot=!0,tt.flags&=-129):(it===null||it.memoizedState!==null)&&(st|=1),G$1(M$4,st&1),it===null)return Eg(tt),it=tt.memoizedState,it!==null&&(it=it.dehydrated,it!==null)?((tt.mode&1)===0?tt.lanes=1:it.data==="$!"?tt.lanes=8:tt.lanes=1073741824,null):(lt=at.children,it=at.fallback,ot?(at=tt.mode,ot=tt.child,lt={mode:"hidden",children:lt},(at&1)===0&&ot!==null?(ot.childLanes=0,ot.pendingProps=lt):ot=qj(lt,at,0,null),it=Ah(it,at,rt,null),ot.return=tt,it.return=tt,ot.sibling=it,tt.child=ot,tt.child.memoizedState=oj(rt),tt.memoizedState=nj,it):rj(tt,lt));if(st=it.memoizedState,st!==null&&(ut=st.dehydrated,ut!==null))return sj(it,tt,lt,at,ut,st,rt);if(ot){ot=at.fallback,lt=tt.mode,st=it.child,ut=st.sibling;var ht={mode:"hidden",children:at.children};return(lt&1)===0&&tt.child!==st?(at=tt.child,at.childLanes=0,at.pendingProps=ht,tt.deletions=null):(at=wh(st,ht),at.subtreeFlags=st.subtreeFlags&14680064),ut!==null?ot=wh(ut,ot):(ot=Ah(ot,lt,rt,null),ot.flags|=2),ot.return=tt,at.return=tt,at.sibling=ot,tt.child=at,at=ot,ot=tt.child,lt=it.child.memoizedState,lt=lt===null?oj(rt):{baseLanes:lt.baseLanes|rt,cachePool:null,transitions:lt.transitions},ot.memoizedState=lt,ot.childLanes=it.childLanes&~rt,tt.memoizedState=nj,at}return ot=it.child,it=ot.sibling,at=wh(ot,{mode:"visible",children:at.children}),(tt.mode&1)===0&&(at.lanes=rt),at.return=tt,at.sibling=null,it!==null&&(rt=tt.deletions,rt===null?(tt.deletions=[it],tt.flags|=16):rt.push(it)),tt.child=at,tt.memoizedState=null,at}function rj(it,tt){return tt=qj({mode:"visible",children:tt},it.mode,0,null),tt.return=it,it.child=tt}function tj(it,tt,rt,at){return at!==null&&Jg(at),Bh(tt,it.child,null,rt),it=rj(tt,tt.pendingProps.children),it.flags|=2,tt.memoizedState=null,it}function sj(it,tt,rt,at,st,ot,lt){if(rt)return tt.flags&256?(tt.flags&=-257,at=Li(Error(p$9(422))),tj(it,tt,lt,at)):tt.memoizedState!==null?(tt.child=it.child,tt.flags|=128,null):(ot=at.fallback,st=tt.mode,at=qj({mode:"visible",children:at.children},st,0,null),ot=Ah(ot,st,lt,null),ot.flags|=2,at.return=tt,ot.return=tt,at.sibling=ot,tt.child=at,(tt.mode&1)!==0&&Bh(tt,it.child,null,lt),tt.child.memoizedState=oj(lt),tt.memoizedState=nj,ot);if((tt.mode&1)===0)return tj(it,tt,lt,null);if(st.data==="$!"){if(at=st.nextSibling&&st.nextSibling.dataset,at)var ut=at.dgst;return at=ut,ot=Error(p$9(419)),at=Li(ot,at,void 0),tj(it,tt,lt,at)}if(ut=(lt&it.childLanes)!==0,Ug||ut){if(at=R$4,at!==null){switch(lt&-lt){case 4:st=2;break;case 16:st=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:st=32;break;case 536870912:st=268435456;break;default:st=0}st=(st&(at.suspendedLanes|lt))!==0?0:st,st!==0&&st!==ot.retryLane&&(ot.retryLane=st,Zg(it,st),mh(at,it,st,-1))}return uj(),at=Li(Error(p$9(421))),tj(it,tt,lt,at)}return st.data==="$?"?(tt.flags|=128,tt.child=it.child,tt=vj.bind(null,it),st._reactRetry=tt,null):(it=ot.treeContext,yg=Lf(st.nextSibling),xg=tt,I$5=!0,zg=null,it!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=it.id,sg=it.overflow,qg=tt),tt=rj(tt,at.children),tt.flags|=4096,tt)}function wj(it,tt,rt){it.lanes|=tt;var at=it.alternate;at!==null&&(at.lanes|=tt),Sg(it.return,tt,rt)}function xj(it,tt,rt,at,st){var ot=it.memoizedState;ot===null?it.memoizedState={isBackwards:tt,rendering:null,renderingStartTime:0,last:at,tail:rt,tailMode:st}:(ot.isBackwards=tt,ot.rendering=null,ot.renderingStartTime=0,ot.last=at,ot.tail=rt,ot.tailMode=st)}function yj(it,tt,rt){var at=tt.pendingProps,st=at.revealOrder,ot=at.tail;if(Yi(it,tt,at.children,rt),at=M$4.current,(at&2)!==0)at=at&1|2,tt.flags|=128;else{if(it!==null&&(it.flags&128)!==0)e:for(it=tt.child;it!==null;){if(it.tag===13)it.memoizedState!==null&&wj(it,rt,tt);else if(it.tag===19)wj(it,rt,tt);else if(it.child!==null){it.child.return=it,it=it.child;continue}if(it===tt)break e;for(;it.sibling===null;){if(it.return===null||it.return===tt)break e;it=it.return}it.sibling.return=it.return,it=it.sibling}at&=1}if(G$1(M$4,at),(tt.mode&1)===0)tt.memoizedState=null;else switch(st){case"forwards":for(rt=tt.child,st=null;rt!==null;)it=rt.alternate,it!==null&&Mh(it)===null&&(st=rt),rt=rt.sibling;rt=st,rt===null?(st=tt.child,tt.child=null):(st=rt.sibling,rt.sibling=null),xj(tt,!1,st,rt,ot);break;case"backwards":for(rt=null,st=tt.child,tt.child=null;st!==null;){if(it=st.alternate,it!==null&&Mh(it)===null){tt.child=st;break}it=st.sibling,st.sibling=rt,rt=st,st=it}xj(tt,!0,rt,null,ot);break;case"together":xj(tt,!1,null,null,void 0);break;default:tt.memoizedState=null}return tt.child}function jj(it,tt){(tt.mode&1)===0&&it!==null&&(it.alternate=null,tt.alternate=null,tt.flags|=2)}function $i(it,tt,rt){if(it!==null&&(tt.dependencies=it.dependencies),hh|=tt.lanes,(rt&tt.childLanes)===0)return null;if(it!==null&&tt.child!==it.child)throw Error(p$9(153));if(tt.child!==null){for(it=tt.child,rt=wh(it,it.pendingProps),tt.child=rt,rt.return=tt;it.sibling!==null;)it=it.sibling,rt=rt.sibling=wh(it,it.pendingProps),rt.return=tt;rt.sibling=null}return tt.child}function zj(it,tt,rt){switch(tt.tag){case 3:lj(tt),Ig();break;case 5:Kh$1(tt);break;case 1:Zf(tt.type)&&cg(tt);break;case 4:Ih(tt,tt.stateNode.containerInfo);break;case 10:var at=tt.type._context,st=tt.memoizedProps.value;G$1(Mg,at._currentValue),at._currentValue=st;break;case 13:if(at=tt.memoizedState,at!==null)return at.dehydrated!==null?(G$1(M$4,M$4.current&1),tt.flags|=128,null):(rt&tt.child.childLanes)!==0?pj(it,tt,rt):(G$1(M$4,M$4.current&1),it=$i(it,tt,rt),it!==null?it.sibling:null);G$1(M$4,M$4.current&1);break;case 19:if(at=(rt&tt.childLanes)!==0,(it.flags&128)!==0){if(at)return yj(it,tt,rt);tt.flags|=128}if(st=tt.memoizedState,st!==null&&(st.rendering=null,st.tail=null,st.lastEffect=null),G$1(M$4,M$4.current),at)break;return null;case 22:case 23:return tt.lanes=0,ej(it,tt,rt)}return $i(it,tt,rt)}var Aj,Bj,Cj,Dj;Aj=function(it,tt){for(var rt=tt.child;rt!==null;){if(rt.tag===5||rt.tag===6)it.appendChild(rt.stateNode);else if(rt.tag!==4&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===tt)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===tt)return;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}},Bj=function(){},Cj=function(it,tt,rt,at){var st=it.memoizedProps;if(st!==at){it=tt.stateNode,Hh(Eh.current);var ot=null;switch(rt){case"input":st=Ya(it,st),at=Ya(it,at),ot=[];break;case"select":st=A$8({},st,{value:void 0}),at=A$8({},at,{value:void 0}),ot=[];break;case"textarea":st=gb(it,st),at=gb(it,at),ot=[];break;default:typeof st.onClick!="function"&&typeof at.onClick=="function"&&(it.onclick=Bf)}ub(rt,at);var lt;rt=null;for(mt in st)if(!at.hasOwnProperty(mt)&&st.hasOwnProperty(mt)&&st[mt]!=null)if(mt==="style"){var ut=st[mt];for(lt in ut)ut.hasOwnProperty(lt)&&(rt||(rt={}),rt[lt]="")}else mt!=="dangerouslySetInnerHTML"&&mt!=="children"&&mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&mt!=="autoFocus"&&(ea.hasOwnProperty(mt)?ot||(ot=[]):(ot=ot||[]).push(mt,null));for(mt in at){var ht=at[mt];if(ut=st!=null?st[mt]:void 0,at.hasOwnProperty(mt)&&ht!==ut&&(ht!=null||ut!=null))if(mt==="style")if(ut){for(lt in ut)!ut.hasOwnProperty(lt)||ht&&ht.hasOwnProperty(lt)||(rt||(rt={}),rt[lt]="");for(lt in ht)ht.hasOwnProperty(lt)&&ut[lt]!==ht[lt]&&(rt||(rt={}),rt[lt]=ht[lt])}else rt||(ot||(ot=[]),ot.push(mt,rt)),rt=ht;else mt==="dangerouslySetInnerHTML"?(ht=ht?ht.__html:void 0,ut=ut?ut.__html:void 0,ht!=null&&ut!==ht&&(ot=ot||[]).push(mt,ht)):mt==="children"?typeof ht!="string"&&typeof ht!="number"||(ot=ot||[]).push(mt,""+ht):mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(mt)?(ht!=null&&mt==="onScroll"&&D$3("scroll",it),ot||ut===ht||(ot=[])):(ot=ot||[]).push(mt,ht))}rt&&(ot=ot||[]).push("style",rt);var mt=ot;(tt.updateQueue=mt)&&(tt.flags|=4)}},Dj=function(it,tt,rt,at){rt!==at&&(tt.flags|=4)};function Ej(it,tt){if(!I$5)switch(it.tailMode){case"hidden":tt=it.tail;for(var rt=null;tt!==null;)tt.alternate!==null&&(rt=tt),tt=tt.sibling;rt===null?it.tail=null:rt.sibling=null;break;case"collapsed":rt=it.tail;for(var at=null;rt!==null;)rt.alternate!==null&&(at=rt),rt=rt.sibling;at===null?tt||it.tail===null?it.tail=null:it.tail.sibling=null:at.sibling=null}}function S$4(it){var tt=it.alternate!==null&&it.alternate.child===it.child,rt=0,at=0;if(tt)for(var st=it.child;st!==null;)rt|=st.lanes|st.childLanes,at|=st.subtreeFlags&14680064,at|=st.flags&14680064,st.return=it,st=st.sibling;else for(st=it.child;st!==null;)rt|=st.lanes|st.childLanes,at|=st.subtreeFlags,at|=st.flags,st.return=it,st=st.sibling;return it.subtreeFlags|=at,it.childLanes=rt,tt}function Fj(it,tt,rt){var at=tt.pendingProps;switch(wg(tt),tt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$4(tt),null;case 1:return Zf(tt.type)&&$f(),S$4(tt),null;case 3:return at=tt.stateNode,Jh(),E$5(Wf),E$5(H$4),Oh(),at.pendingContext&&(at.context=at.pendingContext,at.pendingContext=null),(it===null||it.child===null)&&(Gg(tt)?tt.flags|=4:it===null||it.memoizedState.isDehydrated&&(tt.flags&256)===0||(tt.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(it,tt),S$4(tt),null;case 5:Lh(tt);var st=Hh(Gh.current);if(rt=tt.type,it!==null&&tt.stateNode!=null)Cj(it,tt,rt,at,st),it.ref!==tt.ref&&(tt.flags|=512,tt.flags|=2097152);else{if(!at){if(tt.stateNode===null)throw Error(p$9(166));return S$4(tt),null}if(it=Hh(Eh.current),Gg(tt)){at=tt.stateNode,rt=tt.type;var ot=tt.memoizedProps;switch(at[Of]=tt,at[Pf]=ot,it=(tt.mode&1)!==0,rt){case"dialog":D$3("cancel",at),D$3("close",at);break;case"iframe":case"object":case"embed":D$3("load",at);break;case"video":case"audio":for(st=0;st<lf.length;st++)D$3(lf[st],at);break;case"source":D$3("error",at);break;case"img":case"image":case"link":D$3("error",at),D$3("load",at);break;case"details":D$3("toggle",at);break;case"input":Za(at,ot),D$3("invalid",at);break;case"select":at._wrapperState={wasMultiple:!!ot.multiple},D$3("invalid",at);break;case"textarea":hb(at,ot),D$3("invalid",at)}ub(rt,ot),st=null;for(var lt in ot)if(ot.hasOwnProperty(lt)){var ut=ot[lt];lt==="children"?typeof ut=="string"?at.textContent!==ut&&(ot.suppressHydrationWarning!==!0&&Af(at.textContent,ut,it),st=["children",ut]):typeof ut=="number"&&at.textContent!==""+ut&&(ot.suppressHydrationWarning!==!0&&Af(at.textContent,ut,it),st=["children",""+ut]):ea.hasOwnProperty(lt)&&ut!=null&&lt==="onScroll"&&D$3("scroll",at)}switch(rt){case"input":Va(at),db(at,ot,!0);break;case"textarea":Va(at),jb(at);break;case"select":case"option":break;default:typeof ot.onClick=="function"&&(at.onclick=Bf)}at=st,tt.updateQueue=at,at!==null&&(tt.flags|=4)}else{lt=st.nodeType===9?st:st.ownerDocument,it==="http://www.w3.org/1999/xhtml"&&(it=kb(rt)),it==="http://www.w3.org/1999/xhtml"?rt==="script"?(it=lt.createElement("div"),it.innerHTML="<script><\/script>",it=it.removeChild(it.firstChild)):typeof at.is=="string"?it=lt.createElement(rt,{is:at.is}):(it=lt.createElement(rt),rt==="select"&&(lt=it,at.multiple?lt.multiple=!0:at.size&&(lt.size=at.size))):it=lt.createElementNS(it,rt),it[Of]=tt,it[Pf]=at,Aj(it,tt,!1,!1),tt.stateNode=it;e:{switch(lt=vb(rt,at),rt){case"dialog":D$3("cancel",it),D$3("close",it),st=at;break;case"iframe":case"object":case"embed":D$3("load",it),st=at;break;case"video":case"audio":for(st=0;st<lf.length;st++)D$3(lf[st],it);st=at;break;case"source":D$3("error",it),st=at;break;case"img":case"image":case"link":D$3("error",it),D$3("load",it),st=at;break;case"details":D$3("toggle",it),st=at;break;case"input":Za(it,at),st=Ya(it,at),D$3("invalid",it);break;case"option":st=at;break;case"select":it._wrapperState={wasMultiple:!!at.multiple},st=A$8({},at,{value:void 0}),D$3("invalid",it);break;case"textarea":hb(it,at),st=gb(it,at),D$3("invalid",it);break;default:st=at}ub(rt,st),ut=st;for(ot in ut)if(ut.hasOwnProperty(ot)){var ht=ut[ot];ot==="style"?sb(it,ht):ot==="dangerouslySetInnerHTML"?(ht=ht?ht.__html:void 0,ht!=null&&nb(it,ht)):ot==="children"?typeof ht=="string"?(rt!=="textarea"||ht!=="")&&ob(it,ht):typeof ht=="number"&&ob(it,""+ht):ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&ot!=="autoFocus"&&(ea.hasOwnProperty(ot)?ht!=null&&ot==="onScroll"&&D$3("scroll",it):ht!=null&&ta(it,ot,ht,lt))}switch(rt){case"input":Va(it),db(it,at,!1);break;case"textarea":Va(it),jb(it);break;case"option":at.value!=null&&it.setAttribute("value",""+Sa(at.value));break;case"select":it.multiple=!!at.multiple,ot=at.value,ot!=null?fb(it,!!at.multiple,ot,!1):at.defaultValue!=null&&fb(it,!!at.multiple,at.defaultValue,!0);break;default:typeof st.onClick=="function"&&(it.onclick=Bf)}switch(rt){case"button":case"input":case"select":case"textarea":at=!!at.autoFocus;break e;case"img":at=!0;break e;default:at=!1}}at&&(tt.flags|=4)}tt.ref!==null&&(tt.flags|=512,tt.flags|=2097152)}return S$4(tt),null;case 6:if(it&&tt.stateNode!=null)Dj(it,tt,it.memoizedProps,at);else{if(typeof at!="string"&&tt.stateNode===null)throw Error(p$9(166));if(rt=Hh(Gh.current),Hh(Eh.current),Gg(tt)){if(at=tt.stateNode,rt=tt.memoizedProps,at[Of]=tt,(ot=at.nodeValue!==rt)&&(it=xg,it!==null))switch(it.tag){case 3:Af(at.nodeValue,rt,(it.mode&1)!==0);break;case 5:it.memoizedProps.suppressHydrationWarning!==!0&&Af(at.nodeValue,rt,(it.mode&1)!==0)}ot&&(tt.flags|=4)}else at=(rt.nodeType===9?rt:rt.ownerDocument).createTextNode(at),at[Of]=tt,tt.stateNode=at}return S$4(tt),null;case 13:if(E$5(M$4),at=tt.memoizedState,it===null||it.memoizedState!==null&&it.memoizedState.dehydrated!==null){if(I$5&&yg!==null&&(tt.mode&1)!==0&&(tt.flags&128)===0)Hg(),Ig(),tt.flags|=98560,ot=!1;else if(ot=Gg(tt),at!==null&&at.dehydrated!==null){if(it===null){if(!ot)throw Error(p$9(318));if(ot=tt.memoizedState,ot=ot!==null?ot.dehydrated:null,!ot)throw Error(p$9(317));ot[Of]=tt}else Ig(),(tt.flags&128)===0&&(tt.memoizedState=null),tt.flags|=4;S$4(tt),ot=!1}else zg!==null&&(Gj(zg),zg=null),ot=!0;if(!ot)return tt.flags&65536?tt:null}return(tt.flags&128)!==0?(tt.lanes=rt,tt):(at=at!==null,at!==(it!==null&&it.memoizedState!==null)&&at&&(tt.child.flags|=8192,(tt.mode&1)!==0&&(it===null||(M$4.current&1)!==0?T$6===0&&(T$6=3):uj())),tt.updateQueue!==null&&(tt.flags|=4),S$4(tt),null);case 4:return Jh(),Bj(it,tt),it===null&&sf(tt.stateNode.containerInfo),S$4(tt),null;case 10:return Rg(tt.type._context),S$4(tt),null;case 17:return Zf(tt.type)&&$f(),S$4(tt),null;case 19:if(E$5(M$4),ot=tt.memoizedState,ot===null)return S$4(tt),null;if(at=(tt.flags&128)!==0,lt=ot.rendering,lt===null)if(at)Ej(ot,!1);else{if(T$6!==0||it!==null&&(it.flags&128)!==0)for(it=tt.child;it!==null;){if(lt=Mh(it),lt!==null){for(tt.flags|=128,Ej(ot,!1),at=lt.updateQueue,at!==null&&(tt.updateQueue=at,tt.flags|=4),tt.subtreeFlags=0,at=rt,rt=tt.child;rt!==null;)ot=rt,it=at,ot.flags&=14680066,lt=ot.alternate,lt===null?(ot.childLanes=0,ot.lanes=it,ot.child=null,ot.subtreeFlags=0,ot.memoizedProps=null,ot.memoizedState=null,ot.updateQueue=null,ot.dependencies=null,ot.stateNode=null):(ot.childLanes=lt.childLanes,ot.lanes=lt.lanes,ot.child=lt.child,ot.subtreeFlags=0,ot.deletions=null,ot.memoizedProps=lt.memoizedProps,ot.memoizedState=lt.memoizedState,ot.updateQueue=lt.updateQueue,ot.type=lt.type,it=lt.dependencies,ot.dependencies=it===null?null:{lanes:it.lanes,firstContext:it.firstContext}),rt=rt.sibling;return G$1(M$4,M$4.current&1|2),tt.child}it=it.sibling}ot.tail!==null&&B$5()>Hj&&(tt.flags|=128,at=!0,Ej(ot,!1),tt.lanes=4194304)}else{if(!at)if(it=Mh(lt),it!==null){if(tt.flags|=128,at=!0,rt=it.updateQueue,rt!==null&&(tt.updateQueue=rt,tt.flags|=4),Ej(ot,!0),ot.tail===null&&ot.tailMode==="hidden"&&!lt.alternate&&!I$5)return S$4(tt),null}else 2*B$5()-ot.renderingStartTime>Hj&&rt!==1073741824&&(tt.flags|=128,at=!0,Ej(ot,!1),tt.lanes=4194304);ot.isBackwards?(lt.sibling=tt.child,tt.child=lt):(rt=ot.last,rt!==null?rt.sibling=lt:tt.child=lt,ot.last=lt)}return ot.tail!==null?(tt=ot.tail,ot.rendering=tt,ot.tail=tt.sibling,ot.renderingStartTime=B$5(),tt.sibling=null,rt=M$4.current,G$1(M$4,at?rt&1|2:rt&1),tt):(S$4(tt),null);case 22:case 23:return Ij(),at=tt.memoizedState!==null,it!==null&&it.memoizedState!==null!==at&&(tt.flags|=8192),at&&(tt.mode&1)!==0?(gj&1073741824)!==0&&(S$4(tt),tt.subtreeFlags&6&&(tt.flags|=8192)):S$4(tt),null;case 24:return null;case 25:return null}throw Error(p$9(156,tt.tag))}function Jj(it,tt){switch(wg(tt),tt.tag){case 1:return Zf(tt.type)&&$f(),it=tt.flags,it&65536?(tt.flags=it&-65537|128,tt):null;case 3:return Jh(),E$5(Wf),E$5(H$4),Oh(),it=tt.flags,(it&65536)!==0&&(it&128)===0?(tt.flags=it&-65537|128,tt):null;case 5:return Lh(tt),null;case 13:if(E$5(M$4),it=tt.memoizedState,it!==null&&it.dehydrated!==null){if(tt.alternate===null)throw Error(p$9(340));Ig()}return it=tt.flags,it&65536?(tt.flags=it&-65537|128,tt):null;case 19:return E$5(M$4),null;case 4:return Jh(),null;case 10:return Rg(tt.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Mj(it,tt){var rt=it.ref;if(rt!==null)if(typeof rt=="function")try{rt(null)}catch(at){W$7(it,tt,at)}else rt.current=null}function Nj(it,tt,rt){try{rt()}catch(at){W$7(it,tt,at)}}var Oj=!1;function Pj(it,tt){if(Cf=dd,it=Me(),Ne(it)){if("selectionStart"in it)var rt={start:it.selectionStart,end:it.selectionEnd};else e:{rt=(rt=it.ownerDocument)&&rt.defaultView||window;var at=rt.getSelection&&rt.getSelection();if(at&&at.rangeCount!==0){rt=at.anchorNode;var st=at.anchorOffset,ot=at.focusNode;at=at.focusOffset;try{rt.nodeType,ot.nodeType}catch{rt=null;break e}var lt=0,ut=-1,ht=-1,mt=0,bt=0,vt=it,At=null;t:for(;;){for(var xt;vt!==rt||st!==0&&vt.nodeType!==3||(ut=lt+st),vt!==ot||at!==0&&vt.nodeType!==3||(ht=lt+at),vt.nodeType===3&&(lt+=vt.nodeValue.length),(xt=vt.firstChild)!==null;)At=vt,vt=xt;for(;;){if(vt===it)break t;if(At===rt&&++mt===st&&(ut=lt),At===ot&&++bt===at&&(ht=lt),(xt=vt.nextSibling)!==null)break;vt=At,At=vt.parentNode}vt=xt}rt=ut===-1||ht===-1?null:{start:ut,end:ht}}else rt=null}rt=rt||{start:0,end:0}}else rt=null;for(Df={focusedElem:it,selectionRange:rt},dd=!1,V$3=tt;V$3!==null;)if(tt=V$3,it=tt.child,(tt.subtreeFlags&1028)!==0&&it!==null)it.return=tt,V$3=it;else for(;V$3!==null;){tt=V$3;try{var Et=tt.alternate;if((tt.flags&1024)!==0)switch(tt.tag){case 0:case 11:case 15:break;case 1:if(Et!==null){var Tt=Et.memoizedProps,wt=Et.memoizedState,Ct=tt.stateNode,It=Ct.getSnapshotBeforeUpdate(tt.elementType===tt.type?Tt:Lg(tt.type,Tt),wt);Ct.__reactInternalSnapshotBeforeUpdate=It}break;case 3:var St=tt.stateNode.containerInfo;St.nodeType===1?St.textContent="":St.nodeType===9&&St.documentElement&&St.removeChild(St.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$9(163))}}catch(Rt){W$7(tt,tt.return,Rt)}if(it=tt.sibling,it!==null){it.return=tt.return,V$3=it;break}V$3=tt.return}return Et=Oj,Oj=!1,Et}function Qj(it,tt,rt){var at=tt.updateQueue;if(at=at!==null?at.lastEffect:null,at!==null){var st=at=at.next;do{if((st.tag&it)===it){var ot=st.destroy;st.destroy=void 0,ot!==void 0&&Nj(tt,rt,ot)}st=st.next}while(st!==at)}}function Rj(it,tt){if(tt=tt.updateQueue,tt=tt!==null?tt.lastEffect:null,tt!==null){var rt=tt=tt.next;do{if((rt.tag&it)===it){var at=rt.create;rt.destroy=at()}rt=rt.next}while(rt!==tt)}}function Sj(it){var tt=it.ref;if(tt!==null){var rt=it.stateNode;switch(it.tag){case 5:it=rt;break;default:it=rt}typeof tt=="function"?tt(it):tt.current=it}}function Tj(it){var tt=it.alternate;tt!==null&&(it.alternate=null,Tj(tt)),it.child=null,it.deletions=null,it.sibling=null,it.tag===5&&(tt=it.stateNode,tt!==null&&(delete tt[Of],delete tt[Pf],delete tt[of$1],delete tt[Qf],delete tt[Rf])),it.stateNode=null,it.return=null,it.dependencies=null,it.memoizedProps=null,it.memoizedState=null,it.pendingProps=null,it.stateNode=null,it.updateQueue=null}function Uj(it){return it.tag===5||it.tag===3||it.tag===4}function Vj(it){e:for(;;){for(;it.sibling===null;){if(it.return===null||Uj(it.return))return null;it=it.return}for(it.sibling.return=it.return,it=it.sibling;it.tag!==5&&it.tag!==6&&it.tag!==18;){if(it.flags&2||it.child===null||it.tag===4)continue e;it.child.return=it,it=it.child}if(!(it.flags&2))return it.stateNode}}function Wj(it,tt,rt){var at=it.tag;if(at===5||at===6)it=it.stateNode,tt?rt.nodeType===8?rt.parentNode.insertBefore(it,tt):rt.insertBefore(it,tt):(rt.nodeType===8?(tt=rt.parentNode,tt.insertBefore(it,rt)):(tt=rt,tt.appendChild(it)),rt=rt._reactRootContainer,rt!=null||tt.onclick!==null||(tt.onclick=Bf));else if(at!==4&&(it=it.child,it!==null))for(Wj(it,tt,rt),it=it.sibling;it!==null;)Wj(it,tt,rt),it=it.sibling}function Xj(it,tt,rt){var at=it.tag;if(at===5||at===6)it=it.stateNode,tt?rt.insertBefore(it,tt):rt.appendChild(it);else if(at!==4&&(it=it.child,it!==null))for(Xj(it,tt,rt),it=it.sibling;it!==null;)Xj(it,tt,rt),it=it.sibling}var X$1=null,Yj=!1;function Zj(it,tt,rt){for(rt=rt.child;rt!==null;)ak(it,tt,rt),rt=rt.sibling}function ak(it,tt,rt){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc,rt)}catch{}switch(rt.tag){case 5:U$1||Mj(rt,tt);case 6:var at=X$1,st=Yj;X$1=null,Zj(it,tt,rt),X$1=at,Yj=st,X$1!==null&&(Yj?(it=X$1,rt=rt.stateNode,it.nodeType===8?it.parentNode.removeChild(rt):it.removeChild(rt)):X$1.removeChild(rt.stateNode));break;case 18:X$1!==null&&(Yj?(it=X$1,rt=rt.stateNode,it.nodeType===8?Kf(it.parentNode,rt):it.nodeType===1&&Kf(it,rt),bd(it)):Kf(X$1,rt.stateNode));break;case 4:at=X$1,st=Yj,X$1=rt.stateNode.containerInfo,Yj=!0,Zj(it,tt,rt),X$1=at,Yj=st;break;case 0:case 11:case 14:case 15:if(!U$1&&(at=rt.updateQueue,at!==null&&(at=at.lastEffect,at!==null))){st=at=at.next;do{var ot=st,lt=ot.destroy;ot=ot.tag,lt!==void 0&&((ot&2)!==0||(ot&4)!==0)&&Nj(rt,tt,lt),st=st.next}while(st!==at)}Zj(it,tt,rt);break;case 1:if(!U$1&&(Mj(rt,tt),at=rt.stateNode,typeof at.componentWillUnmount=="function"))try{at.props=rt.memoizedProps,at.state=rt.memoizedState,at.componentWillUnmount()}catch(ut){W$7(rt,tt,ut)}Zj(it,tt,rt);break;case 21:Zj(it,tt,rt);break;case 22:rt.mode&1?(U$1=(at=U$1)||rt.memoizedState!==null,Zj(it,tt,rt),U$1=at):Zj(it,tt,rt);break;default:Zj(it,tt,rt)}}function bk(it){var tt=it.updateQueue;if(tt!==null){it.updateQueue=null;var rt=it.stateNode;rt===null&&(rt=it.stateNode=new Lj),tt.forEach(function(at){var st=ck.bind(null,it,at);rt.has(at)||(rt.add(at),at.then(st,st))})}}function dk(it,tt){var rt=tt.deletions;if(rt!==null)for(var at=0;at<rt.length;at++){var st=rt[at];try{var ot=it,lt=tt,ut=lt;e:for(;ut!==null;){switch(ut.tag){case 5:X$1=ut.stateNode,Yj=!1;break e;case 3:X$1=ut.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=ut.stateNode.containerInfo,Yj=!0;break e}ut=ut.return}if(X$1===null)throw Error(p$9(160));ak(ot,lt,st),X$1=null,Yj=!1;var ht=st.alternate;ht!==null&&(ht.return=null),st.return=null}catch(mt){W$7(st,tt,mt)}}if(tt.subtreeFlags&12854)for(tt=tt.child;tt!==null;)ek(tt,it),tt=tt.sibling}function ek(it,tt){var rt=it.alternate,at=it.flags;switch(it.tag){case 0:case 11:case 14:case 15:if(dk(tt,it),fk(it),at&4){try{Qj(3,it,it.return),Rj(3,it)}catch(Tt){W$7(it,it.return,Tt)}try{Qj(5,it,it.return)}catch(Tt){W$7(it,it.return,Tt)}}break;case 1:dk(tt,it),fk(it),at&512&&rt!==null&&Mj(rt,rt.return);break;case 5:if(dk(tt,it),fk(it),at&512&&rt!==null&&Mj(rt,rt.return),it.flags&32){var st=it.stateNode;try{ob(st,"")}catch(Tt){W$7(it,it.return,Tt)}}if(at&4&&(st=it.stateNode,st!=null)){var ot=it.memoizedProps,lt=rt!==null?rt.memoizedProps:ot,ut=it.type,ht=it.updateQueue;if(it.updateQueue=null,ht!==null)try{ut==="input"&&ot.type==="radio"&&ot.name!=null&&ab(st,ot),vb(ut,lt);var mt=vb(ut,ot);for(lt=0;lt<ht.length;lt+=2){var bt=ht[lt],vt=ht[lt+1];bt==="style"?sb(st,vt):bt==="dangerouslySetInnerHTML"?nb(st,vt):bt==="children"?ob(st,vt):ta(st,bt,vt,mt)}switch(ut){case"input":bb(st,ot);break;case"textarea":ib(st,ot);break;case"select":var At=st._wrapperState.wasMultiple;st._wrapperState.wasMultiple=!!ot.multiple;var xt=ot.value;xt!=null?fb(st,!!ot.multiple,xt,!1):At!==!!ot.multiple&&(ot.defaultValue!=null?fb(st,!!ot.multiple,ot.defaultValue,!0):fb(st,!!ot.multiple,ot.multiple?[]:"",!1))}st[Pf]=ot}catch(Tt){W$7(it,it.return,Tt)}}break;case 6:if(dk(tt,it),fk(it),at&4){if(it.stateNode===null)throw Error(p$9(162));st=it.stateNode,ot=it.memoizedProps;try{st.nodeValue=ot}catch(Tt){W$7(it,it.return,Tt)}}break;case 3:if(dk(tt,it),fk(it),at&4&&rt!==null&&rt.memoizedState.isDehydrated)try{bd(tt.containerInfo)}catch(Tt){W$7(it,it.return,Tt)}break;case 4:dk(tt,it),fk(it);break;case 13:dk(tt,it),fk(it),st=it.child,st.flags&8192&&(ot=st.memoizedState!==null,st.stateNode.isHidden=ot,!ot||st.alternate!==null&&st.alternate.memoizedState!==null||(gk=B$5())),at&4&&bk(it);break;case 22:if(bt=rt!==null&&rt.memoizedState!==null,it.mode&1?(U$1=(mt=U$1)||bt,dk(tt,it),U$1=mt):dk(tt,it),fk(it),at&8192){if(mt=it.memoizedState!==null,(it.stateNode.isHidden=mt)&&!bt&&(it.mode&1)!==0)for(V$3=it,bt=it.child;bt!==null;){for(vt=V$3=bt;V$3!==null;){switch(At=V$3,xt=At.child,At.tag){case 0:case 11:case 14:case 15:Qj(4,At,At.return);break;case 1:Mj(At,At.return);var Et=At.stateNode;if(typeof Et.componentWillUnmount=="function"){at=At,rt=At.return;try{tt=at,Et.props=tt.memoizedProps,Et.state=tt.memoizedState,Et.componentWillUnmount()}catch(Tt){W$7(at,rt,Tt)}}break;case 5:Mj(At,At.return);break;case 22:if(At.memoizedState!==null){hk(vt);continue}}xt!==null?(xt.return=At,V$3=xt):hk(vt)}bt=bt.sibling}e:for(bt=null,vt=it;;){if(vt.tag===5){if(bt===null){bt=vt;try{st=vt.stateNode,mt?(ot=st.style,typeof ot.setProperty=="function"?ot.setProperty("display","none","important"):ot.display="none"):(ut=vt.stateNode,ht=vt.memoizedProps.style,lt=ht!=null&&ht.hasOwnProperty("display")?ht.display:null,ut.style.display=rb("display",lt))}catch(Tt){W$7(it,it.return,Tt)}}}else if(vt.tag===6){if(bt===null)try{vt.stateNode.nodeValue=mt?"":vt.memoizedProps}catch(Tt){W$7(it,it.return,Tt)}}else if((vt.tag!==22&&vt.tag!==23||vt.memoizedState===null||vt===it)&&vt.child!==null){vt.child.return=vt,vt=vt.child;continue}if(vt===it)break e;for(;vt.sibling===null;){if(vt.return===null||vt.return===it)break e;bt===vt&&(bt=null),vt=vt.return}bt===vt&&(bt=null),vt.sibling.return=vt.return,vt=vt.sibling}}break;case 19:dk(tt,it),fk(it),at&4&&bk(it);break;case 21:break;default:dk(tt,it),fk(it)}}function fk(it){var tt=it.flags;if(tt&2){try{e:{for(var rt=it.return;rt!==null;){if(Uj(rt)){var at=rt;break e}rt=rt.return}throw Error(p$9(160))}switch(at.tag){case 5:var st=at.stateNode;at.flags&32&&(ob(st,""),at.flags&=-33);var ot=Vj(it);Xj(it,ot,st);break;case 3:case 4:var lt=at.stateNode.containerInfo,ut=Vj(it);Wj(it,ut,lt);break;default:throw Error(p$9(161))}}catch(ht){W$7(it,it.return,ht)}it.flags&=-3}tt&4096&&(it.flags&=-4097)}function ik(it,tt,rt){V$3=it,jk(it)}function jk(it,tt,rt){for(var at=(it.mode&1)!==0;V$3!==null;){var st=V$3,ot=st.child;if(st.tag===22&&at){var lt=st.memoizedState!==null||Kj;if(!lt){var ut=st.alternate,ht=ut!==null&&ut.memoizedState!==null||U$1;ut=Kj;var mt=U$1;if(Kj=lt,(U$1=ht)&&!mt)for(V$3=st;V$3!==null;)lt=V$3,ht=lt.child,lt.tag===22&&lt.memoizedState!==null?kk(st):ht!==null?(ht.return=lt,V$3=ht):kk(st);for(;ot!==null;)V$3=ot,jk(ot),ot=ot.sibling;V$3=st,Kj=ut,U$1=mt}lk(it)}else(st.subtreeFlags&8772)!==0&&ot!==null?(ot.return=st,V$3=ot):lk(it)}}function lk(it){for(;V$3!==null;){var tt=V$3;if((tt.flags&8772)!==0){var rt=tt.alternate;try{if((tt.flags&8772)!==0)switch(tt.tag){case 0:case 11:case 15:U$1||Rj(5,tt);break;case 1:var at=tt.stateNode;if(tt.flags&4&&!U$1)if(rt===null)at.componentDidMount();else{var st=tt.elementType===tt.type?rt.memoizedProps:Lg(tt.type,rt.memoizedProps);at.componentDidUpdate(st,rt.memoizedState,at.__reactInternalSnapshotBeforeUpdate)}var ot=tt.updateQueue;ot!==null&&ih(tt,ot,at);break;case 3:var lt=tt.updateQueue;if(lt!==null){if(rt=null,tt.child!==null)switch(tt.child.tag){case 5:rt=tt.child.stateNode;break;case 1:rt=tt.child.stateNode}ih(tt,lt,rt)}break;case 5:var ut=tt.stateNode;if(rt===null&&tt.flags&4){rt=ut;var ht=tt.memoizedProps;switch(tt.type){case"button":case"input":case"select":case"textarea":ht.autoFocus&&rt.focus();break;case"img":ht.src&&(rt.src=ht.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(tt.memoizedState===null){var mt=tt.alternate;if(mt!==null){var bt=mt.memoizedState;if(bt!==null){var vt=bt.dehydrated;vt!==null&&bd(vt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$9(163))}U$1||tt.flags&512&&Sj(tt)}catch(At){W$7(tt,tt.return,At)}}if(tt===it){V$3=null;break}if(rt=tt.sibling,rt!==null){rt.return=tt.return,V$3=rt;break}V$3=tt.return}}function hk(it){for(;V$3!==null;){var tt=V$3;if(tt===it){V$3=null;break}var rt=tt.sibling;if(rt!==null){rt.return=tt.return,V$3=rt;break}V$3=tt.return}}function kk(it){for(;V$3!==null;){var tt=V$3;try{switch(tt.tag){case 0:case 11:case 15:var rt=tt.return;try{Rj(4,tt)}catch(ht){W$7(tt,rt,ht)}break;case 1:var at=tt.stateNode;if(typeof at.componentDidMount=="function"){var st=tt.return;try{at.componentDidMount()}catch(ht){W$7(tt,st,ht)}}var ot=tt.return;try{Sj(tt)}catch(ht){W$7(tt,ot,ht)}break;case 5:var lt=tt.return;try{Sj(tt)}catch(ht){W$7(tt,lt,ht)}}}catch(ht){W$7(tt,tt.return,ht)}if(tt===it){V$3=null;break}var ut=tt.sibling;if(ut!==null){ut.return=tt.return,V$3=ut;break}V$3=tt.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$6=0,R$4=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$6=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi$1=!1,Qi=null,Si$1=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$4(){return(K$6&6)!==0?B$5():Bk!==-1?Bk:Bk=B$5()}function lh(it){return(it.mode&1)===0?1:(K$6&2)!==0&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(it=C$5,it!==0||(it=window.event,it=it===void 0?16:jd(it.type)),it)}function mh(it,tt,rt,at){if(50<zk)throw zk=0,Ak=null,Error(p$9(185));Ac(it,rt,at),((K$6&2)===0||it!==R$4)&&(it===R$4&&((K$6&2)===0&&(rk|=rt),T$6===4&&Dk(it,Z$1)),Ek(it,at),rt===1&&K$6===0&&(tt.mode&1)===0&&(Hj=B$5()+500,fg&&jg()))}function Ek(it,tt){var rt=it.callbackNode;wc(it,tt);var at=uc(it,it===R$4?Z$1:0);if(at===0)rt!==null&&bc(rt),it.callbackNode=null,it.callbackPriority=0;else if(tt=at&-at,it.callbackPriority!==tt){if(rt!=null&&bc(rt),tt===1)it.tag===0?ig(Fk.bind(null,it)):hg(Fk.bind(null,it)),Jf(function(){(K$6&6)===0&&jg()}),rt=null;else{switch(Dc(at)){case 1:rt=fc;break;case 4:rt=gc;break;case 16:rt=hc;break;case 536870912:rt=jc;break;default:rt=hc}rt=Gk(rt,Hk.bind(null,it))}it.callbackPriority=tt,it.callbackNode=rt}}function Hk(it,tt){if(Bk=-1,Ck=0,(K$6&6)!==0)throw Error(p$9(327));var rt=it.callbackNode;if(Ik()&&it.callbackNode!==rt)return null;var at=uc(it,it===R$4?Z$1:0);if(at===0)return null;if((at&30)!==0||(at&it.expiredLanes)!==0||tt)tt=Jk(it,at);else{tt=at;var st=K$6;K$6|=2;var ot=Kk();(R$4!==it||Z$1!==tt)&&(vk=null,Hj=B$5()+500,Lk(it,tt));do try{Mk();break}catch(ut){Nk(it,ut)}while(1);Qg(),nk.current=ot,K$6=st,Y$1!==null?tt=0:(R$4=null,Z$1=0,tt=T$6)}if(tt!==0){if(tt===2&&(st=xc(it),st!==0&&(at=st,tt=Ok(it,st))),tt===1)throw rt=qk,Lk(it,0),Dk(it,at),Ek(it,B$5()),rt;if(tt===6)Dk(it,at);else{if(st=it.current.alternate,(at&30)===0&&!Pk(st)&&(tt=Jk(it,at),tt===2&&(ot=xc(it),ot!==0&&(at=ot,tt=Ok(it,ot))),tt===1))throw rt=qk,Lk(it,0),Dk(it,at),Ek(it,B$5()),rt;switch(it.finishedWork=st,it.finishedLanes=at,tt){case 0:case 1:throw Error(p$9(345));case 2:Qk(it,uk,vk);break;case 3:if(Dk(it,at),(at&130023424)===at&&(tt=gk+500-B$5(),10<tt)){if(uc(it,0)!==0)break;if(st=it.suspendedLanes,(st&at)!==at){L$4(),it.pingedLanes|=it.suspendedLanes&st;break}it.timeoutHandle=Ff(Qk.bind(null,it,uk,vk),tt);break}Qk(it,uk,vk);break;case 4:if(Dk(it,at),(at&4194240)===at)break;for(tt=it.eventTimes,st=-1;0<at;){var lt=31-oc(at);ot=1<<lt,lt=tt[lt],lt>st&&(st=lt),at&=~ot}if(at=st,at=B$5()-at,at=(120>at?120:480>at?480:1080>at?1080:1920>at?1920:3e3>at?3e3:4320>at?4320:1960*mk(at/1960))-at,10<at){it.timeoutHandle=Ff(Qk.bind(null,it,uk,vk),at);break}Qk(it,uk,vk);break;case 5:Qk(it,uk,vk);break;default:throw Error(p$9(329))}}}return Ek(it,B$5()),it.callbackNode===rt?Hk.bind(null,it):null}function Ok(it,tt){var rt=tk;return it.current.memoizedState.isDehydrated&&(Lk(it,tt).flags|=256),it=Jk(it,tt),it!==2&&(tt=uk,uk=rt,tt!==null&&Gj(tt)),it}function Gj(it){uk===null?uk=it:uk.push.apply(uk,it)}function Pk(it){for(var tt=it;;){if(tt.flags&16384){var rt=tt.updateQueue;if(rt!==null&&(rt=rt.stores,rt!==null))for(var at=0;at<rt.length;at++){var st=rt[at],ot=st.getSnapshot;st=st.value;try{if(!He(ot(),st))return!1}catch{return!1}}}if(rt=tt.child,tt.subtreeFlags&16384&&rt!==null)rt.return=tt,tt=rt;else{if(tt===it)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===it)return!0;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}}return!0}function Dk(it,tt){for(tt&=~sk,tt&=~rk,it.suspendedLanes|=tt,it.pingedLanes&=~tt,it=it.expirationTimes;0<tt;){var rt=31-oc(tt),at=1<<rt;it[rt]=-1,tt&=~at}}function Fk(it){if((K$6&6)!==0)throw Error(p$9(327));Ik();var tt=uc(it,0);if((tt&1)===0)return Ek(it,B$5()),null;var rt=Jk(it,tt);if(it.tag!==0&&rt===2){var at=xc(it);at!==0&&(tt=at,rt=Ok(it,at))}if(rt===1)throw rt=qk,Lk(it,0),Dk(it,tt),Ek(it,B$5()),rt;if(rt===6)throw Error(p$9(345));return it.finishedWork=it.current.alternate,it.finishedLanes=tt,Qk(it,uk,vk),Ek(it,B$5()),null}function Rk(it,tt){var rt=K$6;K$6|=1;try{return it(tt)}finally{K$6=rt,K$6===0&&(Hj=B$5()+500,fg&&jg())}}function Sk(it){xk!==null&&xk.tag===0&&(K$6&6)===0&&Ik();var tt=K$6;K$6|=1;var rt=pk.transition,at=C$5;try{if(pk.transition=null,C$5=1,it)return it()}finally{C$5=at,pk.transition=rt,K$6=tt,(K$6&6)===0&&jg()}}function Ij(){gj=fj.current,E$5(fj)}function Lk(it,tt){it.finishedWork=null,it.finishedLanes=0;var rt=it.timeoutHandle;if(rt!==-1&&(it.timeoutHandle=-1,Gf(rt)),Y$1!==null)for(rt=Y$1.return;rt!==null;){var at=rt;switch(wg(at),at.tag){case 1:at=at.type.childContextTypes,at!=null&&$f();break;case 3:Jh(),E$5(Wf),E$5(H$4),Oh();break;case 5:Lh(at);break;case 4:Jh();break;case 13:E$5(M$4);break;case 19:E$5(M$4);break;case 10:Rg(at.type._context);break;case 22:case 23:Ij()}rt=rt.return}if(R$4=it,Y$1=it=wh(it.current,null),Z$1=gj=tt,T$6=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(tt=0;tt<Wg.length;tt++)if(rt=Wg[tt],at=rt.interleaved,at!==null){rt.interleaved=null;var st=at.next,ot=rt.pending;if(ot!==null){var lt=ot.next;ot.next=st,at.next=lt}rt.pending=at}Wg=null}return it}function Nk(it,tt){do{var rt=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var at=N$5.memoizedState;at!==null;){var st=at.queue;st!==null&&(st.pending=null),at=at.next}Sh=!1}if(Rh=0,P$5=O$2=N$5=null,Th=!1,Uh=0,ok.current=null,rt===null||rt.return===null){T$6=1,qk=tt,Y$1=null;break}e:{var ot=it,lt=rt.return,ut=rt,ht=tt;if(tt=Z$1,ut.flags|=32768,ht!==null&&typeof ht=="object"&&typeof ht.then=="function"){var mt=ht,bt=ut,vt=bt.tag;if((bt.mode&1)===0&&(vt===0||vt===11||vt===15)){var At=bt.alternate;At?(bt.updateQueue=At.updateQueue,bt.memoizedState=At.memoizedState,bt.lanes=At.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var xt=Vi(lt);if(xt!==null){xt.flags&=-257,Wi(xt,lt,ut,ot,tt),xt.mode&1&&Ti$1(ot,mt,tt),tt=xt,ht=mt;var Et=tt.updateQueue;if(Et===null){var Tt=new Set;Tt.add(ht),tt.updateQueue=Tt}else Et.add(ht);break e}else{if((tt&1)===0){Ti$1(ot,mt,tt),uj();break e}ht=Error(p$9(426))}}else if(I$5&&ut.mode&1){var wt=Vi(lt);if(wt!==null){(wt.flags&65536)===0&&(wt.flags|=256),Wi(wt,lt,ut,ot,tt),Jg(Ki(ht,ut));break e}}ot=ht=Ki(ht,ut),T$6!==4&&(T$6=2),tk===null?tk=[ot]:tk.push(ot),ot=lt;do{switch(ot.tag){case 3:ot.flags|=65536,tt&=-tt,ot.lanes|=tt;var Ct=Oi(ot,ht,tt);fh(ot,Ct);break e;case 1:ut=ht;var It=ot.type,St=ot.stateNode;if((ot.flags&128)===0&&(typeof It.getDerivedStateFromError=="function"||St!==null&&typeof St.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(St)))){ot.flags|=65536,tt&=-tt,ot.lanes|=tt;var Rt=Ri(ot,ut,tt);fh(ot,Rt);break e}}ot=ot.return}while(ot!==null)}Tk(rt)}catch(Dt){tt=Dt,Y$1===rt&&rt!==null&&(Y$1=rt=rt.return);continue}break}while(1)}function Kk(){var it=nk.current;return nk.current=ai,it===null?ai:it}function uj(){(T$6===0||T$6===3||T$6===2)&&(T$6=4),R$4===null||(hh&268435455)===0&&(rk&268435455)===0||Dk(R$4,Z$1)}function Jk(it,tt){var rt=K$6;K$6|=2;var at=Kk();(R$4!==it||Z$1!==tt)&&(vk=null,Lk(it,tt));do try{Uk();break}catch(st){Nk(it,st)}while(1);if(Qg(),K$6=rt,nk.current=at,Y$1!==null)throw Error(p$9(261));return R$4=null,Z$1=0,T$6}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(it){var tt=Wk(it.alternate,it,gj);it.memoizedProps=it.pendingProps,tt===null?Tk(it):Y$1=tt,ok.current=null}function Tk(it){var tt=it;do{var rt=tt.alternate;if(it=tt.return,(tt.flags&32768)===0){if(rt=Fj(rt,tt,gj),rt!==null){Y$1=rt;return}}else{if(rt=Jj(rt,tt),rt!==null){rt.flags&=32767,Y$1=rt;return}if(it!==null)it.flags|=32768,it.subtreeFlags=0,it.deletions=null;else{T$6=6,Y$1=null;return}}if(tt=tt.sibling,tt!==null){Y$1=tt;return}Y$1=tt=it}while(tt!==null);T$6===0&&(T$6=5)}function Qk(it,tt,rt){var at=C$5,st=pk.transition;try{pk.transition=null,C$5=1,Xk(it,tt,rt,at)}finally{pk.transition=st,C$5=at}return null}function Xk(it,tt,rt,at){do Ik();while(xk!==null);if((K$6&6)!==0)throw Error(p$9(327));rt=it.finishedWork;var st=it.finishedLanes;if(rt===null)return null;if(it.finishedWork=null,it.finishedLanes=0,rt===it.current)throw Error(p$9(177));it.callbackNode=null,it.callbackPriority=0;var ot=rt.lanes|rt.childLanes;if(Bc(it,ot),it===R$4&&(Y$1=R$4=null,Z$1=0),(rt.subtreeFlags&2064)===0&&(rt.flags&2064)===0||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),ot=(rt.flags&15990)!==0,(rt.subtreeFlags&15990)!==0||ot){ot=pk.transition,pk.transition=null;var lt=C$5;C$5=1;var ut=K$6;K$6|=4,ok.current=null,Pj(it,rt),ek(rt,it),Oe(Df),dd=!!Cf,Df=Cf=null,it.current=rt,ik(rt),dc(),K$6=ut,C$5=lt,pk.transition=ot}else it.current=rt;if(wk&&(wk=!1,xk=it,yk=st),ot=it.pendingLanes,ot===0&&(Si$1=null),mc(rt.stateNode),Ek(it,B$5()),tt!==null)for(at=it.onRecoverableError,rt=0;rt<tt.length;rt++)st=tt[rt],at(st.value,{componentStack:st.stack,digest:st.digest});if(Pi$1)throw Pi$1=!1,it=Qi,Qi=null,it;return(yk&1)!==0&&it.tag!==0&&Ik(),ot=it.pendingLanes,(ot&1)!==0?it===Ak?zk++:(zk=0,Ak=it):zk=0,jg(),null}function Ik(){if(xk!==null){var it=Dc(yk),tt=pk.transition,rt=C$5;try{if(pk.transition=null,C$5=16>it?16:it,xk===null)var at=!1;else{if(it=xk,xk=null,yk=0,(K$6&6)!==0)throw Error(p$9(331));var st=K$6;for(K$6|=4,V$3=it.current;V$3!==null;){var ot=V$3,lt=ot.child;if((V$3.flags&16)!==0){var ut=ot.deletions;if(ut!==null){for(var ht=0;ht<ut.length;ht++){var mt=ut[ht];for(V$3=mt;V$3!==null;){var bt=V$3;switch(bt.tag){case 0:case 11:case 15:Qj(8,bt,ot)}var vt=bt.child;if(vt!==null)vt.return=bt,V$3=vt;else for(;V$3!==null;){bt=V$3;var At=bt.sibling,xt=bt.return;if(Tj(bt),bt===mt){V$3=null;break}if(At!==null){At.return=xt,V$3=At;break}V$3=xt}}}var Et=ot.alternate;if(Et!==null){var Tt=Et.child;if(Tt!==null){Et.child=null;do{var wt=Tt.sibling;Tt.sibling=null,Tt=wt}while(Tt!==null)}}V$3=ot}}if((ot.subtreeFlags&2064)!==0&&lt!==null)lt.return=ot,V$3=lt;else e:for(;V$3!==null;){if(ot=V$3,(ot.flags&2048)!==0)switch(ot.tag){case 0:case 11:case 15:Qj(9,ot,ot.return)}var Ct=ot.sibling;if(Ct!==null){Ct.return=ot.return,V$3=Ct;break e}V$3=ot.return}}var It=it.current;for(V$3=It;V$3!==null;){lt=V$3;var St=lt.child;if((lt.subtreeFlags&2064)!==0&&St!==null)St.return=lt,V$3=St;else e:for(lt=It;V$3!==null;){if(ut=V$3,(ut.flags&2048)!==0)try{switch(ut.tag){case 0:case 11:case 15:Rj(9,ut)}}catch(Dt){W$7(ut,ut.return,Dt)}if(ut===lt){V$3=null;break e}var Rt=ut.sibling;if(Rt!==null){Rt.return=ut.return,V$3=Rt;break e}V$3=ut.return}}if(K$6=st,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc,it)}catch{}at=!0}return at}finally{C$5=rt,pk.transition=tt}}return!1}function Yk(it,tt,rt){tt=Ki(rt,tt),tt=Oi(it,tt,1),it=dh(it,tt,1),tt=L$4(),it!==null&&(Ac(it,1,tt),Ek(it,tt))}function W$7(it,tt,rt){if(it.tag===3)Yk(it,it,rt);else for(;tt!==null;){if(tt.tag===3){Yk(tt,it,rt);break}else if(tt.tag===1){var at=tt.stateNode;if(typeof tt.type.getDerivedStateFromError=="function"||typeof at.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(at))){it=Ki(rt,it),it=Ri(tt,it,1),tt=dh(tt,it,1),it=L$4(),tt!==null&&(Ac(tt,1,it),Ek(tt,it));break}}tt=tt.return}}function Ui(it,tt,rt){var at=it.pingCache;at!==null&&at.delete(tt),tt=L$4(),it.pingedLanes|=it.suspendedLanes&rt,R$4===it&&(Z$1&rt)===rt&&(T$6===4||T$6===3&&(Z$1&130023424)===Z$1&&500>B$5()-gk?Lk(it,0):sk|=rt),Ek(it,tt)}function Zk(it,tt){tt===0&&((it.mode&1)===0?tt=1:(tt=sc,sc<<=1,(sc&130023424)===0&&(sc=4194304)));var rt=L$4();it=Zg(it,tt),it!==null&&(Ac(it,tt,rt),Ek(it,rt))}function vj(it){var tt=it.memoizedState,rt=0;tt!==null&&(rt=tt.retryLane),Zk(it,rt)}function ck(it,tt){var rt=0;switch(it.tag){case 13:var at=it.stateNode,st=it.memoizedState;st!==null&&(rt=st.retryLane);break;case 19:at=it.stateNode;break;default:throw Error(p$9(314))}at!==null&&at.delete(tt),Zk(it,rt)}var Wk;Wk=function(it,tt,rt){if(it!==null)if(it.memoizedProps!==tt.pendingProps||Wf.current)Ug=!0;else{if((it.lanes&rt)===0&&(tt.flags&128)===0)return Ug=!1,zj(it,tt,rt);Ug=(it.flags&131072)!==0}else Ug=!1,I$5&&(tt.flags&1048576)!==0&&ug(tt,ng,tt.index);switch(tt.lanes=0,tt.tag){case 2:var at=tt.type;jj(it,tt),it=tt.pendingProps;var st=Yf(tt,H$4.current);Tg(tt,rt),st=Xh(null,tt,at,it,st,rt);var ot=bi();return tt.flags|=1,typeof st=="object"&&st!==null&&typeof st.render=="function"&&st.$$typeof===void 0?(tt.tag=1,tt.memoizedState=null,tt.updateQueue=null,Zf(at)?(ot=!0,cg(tt)):ot=!1,tt.memoizedState=st.state!==null&&st.state!==void 0?st.state:null,ah(tt),st.updater=nh,tt.stateNode=st,st._reactInternals=tt,rh$1(tt,at,it,rt),tt=kj(null,tt,at,!0,ot,rt)):(tt.tag=0,I$5&&ot&&vg(tt),Yi(null,tt,st,rt),tt=tt.child),tt;case 16:at=tt.elementType;e:{switch(jj(it,tt),it=tt.pendingProps,st=at._init,at=st(at._payload),tt.type=at,st=tt.tag=$k(at),it=Lg(at,it),st){case 0:tt=dj(null,tt,at,it,rt);break e;case 1:tt=ij(null,tt,at,it,rt);break e;case 11:tt=Zi(null,tt,at,it,rt);break e;case 14:tt=aj(null,tt,at,Lg(at.type,it),rt);break e}throw Error(p$9(306,at,""))}return tt;case 0:return at=tt.type,st=tt.pendingProps,st=tt.elementType===at?st:Lg(at,st),dj(it,tt,at,st,rt);case 1:return at=tt.type,st=tt.pendingProps,st=tt.elementType===at?st:Lg(at,st),ij(it,tt,at,st,rt);case 3:e:{if(lj(tt),it===null)throw Error(p$9(387));at=tt.pendingProps,ot=tt.memoizedState,st=ot.element,bh(it,tt),gh(tt,at,null,rt);var lt=tt.memoizedState;if(at=lt.element,ot.isDehydrated)if(ot={element:at,isDehydrated:!1,cache:lt.cache,pendingSuspenseBoundaries:lt.pendingSuspenseBoundaries,transitions:lt.transitions},tt.updateQueue.baseState=ot,tt.memoizedState=ot,tt.flags&256){st=Ki(Error(p$9(423)),tt),tt=mj(it,tt,at,rt,st);break e}else if(at!==st){st=Ki(Error(p$9(424)),tt),tt=mj(it,tt,at,rt,st);break e}else for(yg=Lf(tt.stateNode.containerInfo.firstChild),xg=tt,I$5=!0,zg=null,rt=Ch$1(tt,null,at,rt),tt.child=rt;rt;)rt.flags=rt.flags&-3|4096,rt=rt.sibling;else{if(Ig(),at===st){tt=$i(it,tt,rt);break e}Yi(it,tt,at,rt)}tt=tt.child}return tt;case 5:return Kh$1(tt),it===null&&Eg(tt),at=tt.type,st=tt.pendingProps,ot=it!==null?it.memoizedProps:null,lt=st.children,Ef(at,st)?lt=null:ot!==null&&Ef(at,ot)&&(tt.flags|=32),hj(it,tt),Yi(it,tt,lt,rt),tt.child;case 6:return it===null&&Eg(tt),null;case 13:return pj(it,tt,rt);case 4:return Ih(tt,tt.stateNode.containerInfo),at=tt.pendingProps,it===null?tt.child=Bh(tt,null,at,rt):Yi(it,tt,at,rt),tt.child;case 11:return at=tt.type,st=tt.pendingProps,st=tt.elementType===at?st:Lg(at,st),Zi(it,tt,at,st,rt);case 7:return Yi(it,tt,tt.pendingProps,rt),tt.child;case 8:return Yi(it,tt,tt.pendingProps.children,rt),tt.child;case 12:return Yi(it,tt,tt.pendingProps.children,rt),tt.child;case 10:e:{if(at=tt.type._context,st=tt.pendingProps,ot=tt.memoizedProps,lt=st.value,G$1(Mg,at._currentValue),at._currentValue=lt,ot!==null)if(He(ot.value,lt)){if(ot.children===st.children&&!Wf.current){tt=$i(it,tt,rt);break e}}else for(ot=tt.child,ot!==null&&(ot.return=tt);ot!==null;){var ut=ot.dependencies;if(ut!==null){lt=ot.child;for(var ht=ut.firstContext;ht!==null;){if(ht.context===at){if(ot.tag===1){ht=ch$1(-1,rt&-rt),ht.tag=2;var mt=ot.updateQueue;if(mt!==null){mt=mt.shared;var bt=mt.pending;bt===null?ht.next=ht:(ht.next=bt.next,bt.next=ht),mt.pending=ht}}ot.lanes|=rt,ht=ot.alternate,ht!==null&&(ht.lanes|=rt),Sg(ot.return,rt,tt),ut.lanes|=rt;break}ht=ht.next}}else if(ot.tag===10)lt=ot.type===tt.type?null:ot.child;else if(ot.tag===18){if(lt=ot.return,lt===null)throw Error(p$9(341));lt.lanes|=rt,ut=lt.alternate,ut!==null&&(ut.lanes|=rt),Sg(lt,rt,tt),lt=ot.sibling}else lt=ot.child;if(lt!==null)lt.return=ot;else for(lt=ot;lt!==null;){if(lt===tt){lt=null;break}if(ot=lt.sibling,ot!==null){ot.return=lt.return,lt=ot;break}lt=lt.return}ot=lt}Yi(it,tt,st.children,rt),tt=tt.child}return tt;case 9:return st=tt.type,at=tt.pendingProps.children,Tg(tt,rt),st=Vg(st),at=at(st),tt.flags|=1,Yi(it,tt,at,rt),tt.child;case 14:return at=tt.type,st=Lg(at,tt.pendingProps),st=Lg(at.type,st),aj(it,tt,at,st,rt);case 15:return cj(it,tt,tt.type,tt.pendingProps,rt);case 17:return at=tt.type,st=tt.pendingProps,st=tt.elementType===at?st:Lg(at,st),jj(it,tt),tt.tag=1,Zf(at)?(it=!0,cg(tt)):it=!1,Tg(tt,rt),ph(tt,at,st),rh$1(tt,at,st,rt),kj(null,tt,at,!0,it,rt);case 19:return yj(it,tt,rt);case 22:return ej(it,tt,rt)}throw Error(p$9(156,tt.tag))};function Gk(it,tt){return ac(it,tt)}function al(it,tt,rt,at){this.tag=it,this.key=rt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=tt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=at,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(it,tt,rt,at){return new al(it,tt,rt,at)}function bj(it){return it=it.prototype,!(!it||!it.isReactComponent)}function $k(it){if(typeof it=="function")return bj(it)?1:0;if(it!=null){if(it=it.$$typeof,it===Da)return 11;if(it===Ga)return 14}return 2}function wh(it,tt){var rt=it.alternate;return rt===null?(rt=Bg(it.tag,tt,it.key,it.mode),rt.elementType=it.elementType,rt.type=it.type,rt.stateNode=it.stateNode,rt.alternate=it,it.alternate=rt):(rt.pendingProps=tt,rt.type=it.type,rt.flags=0,rt.subtreeFlags=0,rt.deletions=null),rt.flags=it.flags&14680064,rt.childLanes=it.childLanes,rt.lanes=it.lanes,rt.child=it.child,rt.memoizedProps=it.memoizedProps,rt.memoizedState=it.memoizedState,rt.updateQueue=it.updateQueue,tt=it.dependencies,rt.dependencies=tt===null?null:{lanes:tt.lanes,firstContext:tt.firstContext},rt.sibling=it.sibling,rt.index=it.index,rt.ref=it.ref,rt}function yh(it,tt,rt,at,st,ot){var lt=2;if(at=it,typeof it=="function")bj(it)&&(lt=1);else if(typeof it=="string")lt=5;else e:switch(it){case ya:return Ah(rt.children,st,ot,tt);case za:lt=8,st|=8;break;case Aa:return it=Bg(12,rt,tt,st|2),it.elementType=Aa,it.lanes=ot,it;case Ea:return it=Bg(13,rt,tt,st),it.elementType=Ea,it.lanes=ot,it;case Fa:return it=Bg(19,rt,tt,st),it.elementType=Fa,it.lanes=ot,it;case Ia:return qj(rt,st,ot,tt);default:if(typeof it=="object"&&it!==null)switch(it.$$typeof){case Ba:lt=10;break e;case Ca:lt=9;break e;case Da:lt=11;break e;case Ga:lt=14;break e;case Ha:lt=16,at=null;break e}throw Error(p$9(130,it==null?it:typeof it,""))}return tt=Bg(lt,rt,tt,st),tt.elementType=it,tt.type=at,tt.lanes=ot,tt}function Ah(it,tt,rt,at){return it=Bg(7,it,at,tt),it.lanes=rt,it}function qj(it,tt,rt,at){return it=Bg(22,it,at,tt),it.elementType=Ia,it.lanes=rt,it.stateNode={isHidden:!1},it}function xh(it,tt,rt){return it=Bg(6,it,null,tt),it.lanes=rt,it}function zh$1(it,tt,rt){return tt=Bg(4,it.children!==null?it.children:[],it.key,tt),tt.lanes=rt,tt.stateNode={containerInfo:it.containerInfo,pendingChildren:null,implementation:it.implementation},tt}function bl(it,tt,rt,at,st){this.tag=tt,this.containerInfo=it,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=at,this.onRecoverableError=st,this.mutableSourceEagerHydrationData=null}function cl(it,tt,rt,at,st,ot,lt,ut,ht){return it=new bl(it,tt,rt,ut,ht),tt===1?(tt=1,ot===!0&&(tt|=8)):tt=0,ot=Bg(3,null,null,tt),it.current=ot,ot.stateNode=it,ot.memoizedState={element:at,isDehydrated:rt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(ot),it}function dl(it,tt,rt){var at=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:at==null?null:""+at,children:it,containerInfo:tt,implementation:rt}}function el(it){if(!it)return Vf;it=it._reactInternals;e:{if(Vb(it)!==it||it.tag!==1)throw Error(p$9(170));var tt=it;do{switch(tt.tag){case 3:tt=tt.stateNode.context;break e;case 1:if(Zf(tt.type)){tt=tt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}tt=tt.return}while(tt!==null);throw Error(p$9(171))}if(it.tag===1){var rt=it.type;if(Zf(rt))return bg(it,rt,tt)}return tt}function fl$1(it,tt,rt,at,st,ot,lt,ut,ht){return it=cl(rt,at,!0,it,st,ot,lt,ut,ht),it.context=el(null),rt=it.current,at=L$4(),st=lh(rt),ot=ch$1(at,st),ot.callback=tt!=null?tt:null,dh(rt,ot,st),it.current.lanes=st,Ac(it,st,at),Ek(it,at),it}function gl(it,tt,rt,at){var st=tt.current,ot=L$4(),lt=lh(st);return rt=el(rt),tt.context===null?tt.context=rt:tt.pendingContext=rt,tt=ch$1(ot,lt),tt.payload={element:it},at=at===void 0?null:at,at!==null&&(tt.callback=at),it=dh(st,tt,lt),it!==null&&(mh(it,st,lt,ot),eh(it,st,lt)),lt}function hl(it){if(it=it.current,!it.child)return null;switch(it.child.tag){case 5:return it.child.stateNode;default:return it.child.stateNode}}function il(it,tt){if(it=it.memoizedState,it!==null&&it.dehydrated!==null){var rt=it.retryLane;it.retryLane=rt!==0&&rt<tt?rt:tt}}function jl(it,tt){il(it,tt),(it=it.alternate)&&il(it,tt)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(it){console.error(it)};function ml(it){this._internalRoot=it}nl.prototype.render=ml.prototype.render=function(it){var tt=this._internalRoot;if(tt===null)throw Error(p$9(409));gl(it,tt,null,null)},nl.prototype.unmount=ml.prototype.unmount=function(){var it=this._internalRoot;if(it!==null){this._internalRoot=null;var tt=it.containerInfo;Sk(function(){gl(null,it,null,null)}),tt[uf]=null}};function nl(it){this._internalRoot=it}nl.prototype.unstable_scheduleHydration=function(it){if(it){var tt=Hc();it={blockedOn:null,target:it,priority:tt};for(var rt=0;rt<Qc.length&&tt!==0&&tt<Qc[rt].priority;rt++);Qc.splice(rt,0,it),rt===0&&Vc(it)}};function ol(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11)}function pl(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11&&(it.nodeType!==8||it.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(it,tt,rt,at,st){if(st){if(typeof at=="function"){var ot=at;at=function(){var mt=hl(lt);ot.call(mt)}}var lt=fl$1(tt,at,it,0,null,!1,!1,"",ql);return it._reactRootContainer=lt,it[uf]=lt.current,sf(it.nodeType===8?it.parentNode:it),Sk(),lt}for(;st=it.lastChild;)it.removeChild(st);if(typeof at=="function"){var ut=at;at=function(){var mt=hl(ht);ut.call(mt)}}var ht=cl(it,0,!1,null,null,!1,!1,"",ql);return it._reactRootContainer=ht,it[uf]=ht.current,sf(it.nodeType===8?it.parentNode:it),Sk(function(){gl(tt,ht,rt,at)}),ht}function sl(it,tt,rt,at,st){var ot=rt._reactRootContainer;if(ot){var lt=ot;if(typeof st=="function"){var ut=st;st=function(){var ht=hl(lt);ut.call(ht)}}gl(tt,lt,it,st)}else lt=rl(rt,tt,it,st,at);return hl(lt)}Ec=function(it){switch(it.tag){case 3:var tt=it.stateNode;if(tt.current.memoizedState.isDehydrated){var rt=tc(tt.pendingLanes);rt!==0&&(Cc(tt,rt|1),Ek(tt,B$5()),(K$6&6)===0&&(Hj=B$5()+500,jg()))}break;case 13:Sk(function(){var at=Zg(it,1);if(at!==null){var st=L$4();mh(at,it,1,st)}}),jl(it,1)}},Fc=function(it){if(it.tag===13){var tt=Zg(it,134217728);if(tt!==null){var rt=L$4();mh(tt,it,134217728,rt)}jl(it,134217728)}},Gc=function(it){if(it.tag===13){var tt=lh(it),rt=Zg(it,tt);if(rt!==null){var at=L$4();mh(rt,it,tt,at)}jl(it,tt)}},Hc=function(){return C$5},Ic=function(it,tt){var rt=C$5;try{return C$5=it,tt()}finally{C$5=rt}},yb=function(it,tt,rt){switch(tt){case"input":if(bb(it,rt),tt=rt.name,rt.type==="radio"&&tt!=null){for(rt=it;rt.parentNode;)rt=rt.parentNode;for(rt=rt.querySelectorAll("input[name="+JSON.stringify(""+tt)+'][type="radio"]'),tt=0;tt<rt.length;tt++){var at=rt[tt];if(at!==it&&at.form===it.form){var st=Db(at);if(!st)throw Error(p$9(90));Wa(at),bb(at,st)}}}break;case"textarea":ib(it,rt);break;case"select":tt=rt.value,tt!=null&&fb(it,!!rt.multiple,tt,!1)}},Gb=Rk,Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(it){return it=Zb(it),it===null?null:it.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc$1=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,reactDom_production_min.createPortal=function(it,tt){var rt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(tt))throw Error(p$9(200));return dl(it,tt,null,rt)},reactDom_production_min.createRoot=function(it,tt){if(!ol(it))throw Error(p$9(299));var rt=!1,at="",st=ll;return tt!=null&&(tt.unstable_strictMode===!0&&(rt=!0),tt.identifierPrefix!==void 0&&(at=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(st=tt.onRecoverableError)),tt=cl(it,1,!1,null,null,rt,!1,at,st),it[uf]=tt.current,sf(it.nodeType===8?it.parentNode:it),new ml(tt)},reactDom_production_min.findDOMNode=function(it){if(it==null)return null;if(it.nodeType===1)return it;var tt=it._reactInternals;if(tt===void 0)throw typeof it.render=="function"?Error(p$9(188)):(it=Object.keys(it).join(","),Error(p$9(268,it)));return it=Zb(tt),it=it===null?null:it.stateNode,it},reactDom_production_min.flushSync=function(it){return Sk(it)},reactDom_production_min.hydrate=function(it,tt,rt){if(!pl(tt))throw Error(p$9(200));return sl(null,it,tt,!0,rt)},reactDom_production_min.hydrateRoot=function(it,tt,rt){if(!ol(it))throw Error(p$9(405));var at=rt!=null&&rt.hydratedSources||null,st=!1,ot="",lt=ll;if(rt!=null&&(rt.unstable_strictMode===!0&&(st=!0),rt.identifierPrefix!==void 0&&(ot=rt.identifierPrefix),rt.onRecoverableError!==void 0&&(lt=rt.onRecoverableError)),tt=fl$1(tt,null,it,1,rt!=null?rt:null,st,!1,ot,lt),it[uf]=tt.current,sf(it),at)for(it=0;it<at.length;it++)rt=at[it],st=rt._getVersion,st=st(rt._source),tt.mutableSourceEagerHydrationData==null?tt.mutableSourceEagerHydrationData=[rt,st]:tt.mutableSourceEagerHydrationData.push(rt,st);return new nl(tt)},reactDom_production_min.render=function(it,tt,rt){if(!pl(tt))throw Error(p$9(200));return sl(null,it,tt,!1,rt)},reactDom_production_min.unmountComponentAtNode=function(it){if(!pl(it))throw Error(p$9(40));return it._reactRootContainer?(Sk(function(){sl(null,null,it,!1,function(){it._reactRootContainer=null,it[uf]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Rk,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(it,tt,rt,at){if(!pl(rt))throw Error(p$9(200));if(it==null||it._reactInternals===void 0)throw Error(p$9(38));return sl(it,tt,rt,!1,at)},reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608",function(it){function tt(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tt)}catch(rt){console.error(rt)}}tt(),it.exports=reactDom_production_min}(reactDom);const ReactDOM=getDefaultExportFromCjs(reactDom.exports);var createRoot,m$7=reactDom.exports;createRoot=m$7.createRoot,m$7.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(it){return"https://cdn.jsdelivr.net/gh/stenwall/nft-gated-shopify/dist/"+it},seen={},__vitePreload=function(tt,rt,at){return tt()};var c1={name:"Ethereum Mainnet",chain:"ETH",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/ethereum/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://ethereum.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://eth-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://mainnet.infura.io/v3/${INFURA_API_KEY}","wss://mainnet.infura.io/ws/v3/${INFURA_API_KEY}","https://api.mycryptoapi.com/eth","https://cloudflare-eth.com"],features:[{name:"EIP1559"},{name:"EIP155"}],faucets:[],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},infoURL:"https://ethereum.org",shortName:"eth",chainId:1,networkId:1,slip44:60,ens:{registry:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},explorers:[{name:"etherscan",url:"https://etherscan.io",standard:"EIP3091"}],testnet:!1,slug:"ethereum"},c5={name:"Goerli",title:"Ethereum Testnet Goerli",chain:"ETH",rpc:["https://goerli.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://eth-goerli.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://goerli.infura.io/v3/${INFURA_API_KEY}","wss://goerli.infura.io/v3/${INFURA_API_KEY}","https://rpc.goerli.mudit.blog/"],faucets:["https://faucet.goerli.mudit.blog","https://goerli-faucet.slock.it?address=${ADDRESS}","http://fauceth.komputing.org?chain=5&address=${ADDRESS}"],nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},infoURL:"https://goerli.net/#about",shortName:"gor",chainId:5,networkId:5,ens:{registry:"0x112234455c3a32fd11230c42e7bccd4a84e02010"},explorers:[{name:"etherscan-goerli",url:"https://goerli.etherscan.io",standard:"EIP3091"}],icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/ethereum/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!0,slug:"goerli"},c10={name:"Optimism",chain:"ETH",rpc:["https://optimism.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://opt-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://optimism-mainnet.infura.io/v3/${INFURA_API_KEY}","https://mainnet.optimism.io/"],faucets:[],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},infoURL:"https://optimism.io",shortName:"oeth",chainId:10,networkId:10,explorers:[{name:"etherscan",url:"https://optimistic.etherscan.io",standard:"EIP3091"}],icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/optimism/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!1,slug:"optimism"},c56={name:"Binance Smart Chain Mainnet",chain:"BSC",rpc:["https://binance.rpc.thirdweb.com/${THIRDWEB_API_KEY}","wss://bsc-ws-node.nariox.org","https://bsc-dataseed4.ninicoin.io","https://bsc-dataseed3.ninicoin.io","https://bsc-dataseed2.ninicoin.io","https://bsc-dataseed1.ninicoin.io","https://bsc-dataseed4.defibit.io","https://bsc-dataseed3.defibit.io","https://bsc-dataseed2.defibit.io","https://bsc-dataseed1.defibit.io","https://bsc-dataseed4.binance.org","https://bsc-dataseed3.binance.org","https://bsc-dataseed2.binance.org","https://bsc-dataseed1.binance.org"],faucets:["https://free-online-app.com/faucet-for-eth-evm-chains/"],nativeCurrency:{name:"Binance Chain Native Token",symbol:"BNB",decimals:18},infoURL:"https://www.binance.org",shortName:"bnb",chainId:56,networkId:56,slip44:714,explorers:[{name:"bscscan",url:"https://bscscan.com",standard:"EIP3091"}],icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/binance-coin/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!1,slug:"binance"},c97={name:"Binance Smart Chain Testnet",chain:"BSC",rpc:["https://binance-testnet.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://data-seed-prebsc-2-s3.binance.org:8545","https://data-seed-prebsc-1-s3.binance.org:8545","https://data-seed-prebsc-2-s2.binance.org:8545","https://data-seed-prebsc-1-s2.binance.org:8545","https://data-seed-prebsc-2-s1.binance.org:8545","https://data-seed-prebsc-1-s1.binance.org:8545"],faucets:["https://testnet.binance.org/faucet-smart"],nativeCurrency:{name:"Binance Chain Native Token",symbol:"tBNB",decimals:18},infoURL:"https://testnet.binance.org/",shortName:"bnbt",chainId:97,networkId:97,explorers:[{name:"bscscan-testnet",url:"https://testnet.bscscan.com",standard:"EIP3091"}],icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/binance-coin/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!0,slug:"binance-testnet"},c137={name:"Polygon Mainnet",chain:"Polygon",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/polygon/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://polygon.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://polygon-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://polygon-mainnet.infura.io/v3/${INFURA_API_KEY}","https://polygon-rpc.com/","https://rpc-mainnet.matic.network","https://matic-mainnet.chainstacklabs.com","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet-full-rpc.bwarelabs.com","https://polygon-bor.publicnode.com"],faucets:[],nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},infoURL:"https://polygon.technology/",shortName:"matic",chainId:137,networkId:137,slip44:966,explorers:[{name:"polygonscan",url:"https://polygonscan.com",standard:"EIP3091"}],testnet:!1,slug:"polygon"},c250={name:"Fantom Opera",chain:"FTM",rpc:["https://fantom.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://rpc.ftm.tools"],faucets:["https://free-online-app.com/faucet-for-eth-evm-chains/"],nativeCurrency:{name:"Fantom",symbol:"FTM",decimals:18},infoURL:"https://fantom.foundation",shortName:"ftm",chainId:250,networkId:250,icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/fantom/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},explorers:[{name:"ftmscan",url:"https://ftmscan.com",icon:"ftmscan",standard:"EIP3091"}],testnet:!1,slug:"fantom"},c420={name:"Optimism Goerli Testnet",chain:"ETH",rpc:["https://optimism-goerli.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://opt-goerli.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://optimism-goerli.infura.io/v3/${INFURA_API_KEY}","https://goerli.optimism.io/"],faucets:[],nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},infoURL:"https://optimism.io",shortName:"ogor",chainId:420,networkId:420,icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/optimism/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!0,slug:"optimism-goerli"},c4002={name:"Fantom Testnet",chain:"FTM",rpc:["https://fantom-testnet.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://rpc.testnet.fantom.network"],faucets:["https://faucet.fantom.network"],nativeCurrency:{name:"Fantom",symbol:"FTM",decimals:18},infoURL:"https://docs.fantom.foundation/quick-start/short-guide#fantom-testnet",shortName:"tftm",chainId:4002,networkId:4002,icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/fantom/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},explorers:[{name:"ftmscan",url:"https://testnet.ftmscan.com",icon:"ftmscan",standard:"EIP3091"}],testnet:!0,slug:"fantom-testnet"},c42161={name:"Arbitrum One",chainId:42161,shortName:"arb1",chain:"ETH",networkId:42161,nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpc:["https://arbitrum.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://arbitrum-mainnet.infura.io/v3/${INFURA_API_KEY}","https://arb-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://arb1.arbitrum.io/rpc"],faucets:[],explorers:[{name:"Arbitrum Explorer",url:"https://explorer.arbitrum.io",standard:"EIP3091"},{name:"Arbiscan",url:"https://arbiscan.io",standard:"EIP3091"}],infoURL:"https://arbitrum.io",parent:{type:"L2",chain:"eip155-1",bridges:[{url:"https://bridge.arbitrum.io"}]},icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/arbitrum/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!1,slug:"arbitrum"},c43113={name:"Avalanche Fuji Testnet",chain:"AVAX",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/avalanche/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://avalanche-fuji.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://avalanche-fuji.infura.io/v3/${INFURA_API_KEY}","https://api.avax-test.network/ext/bc/C/rpc"],faucets:["https://faucet.avax-test.network/"],nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},infoURL:"https://cchain.explorer.avax-test.network",shortName:"Fuji",chainId:43113,networkId:1,explorers:[{name:"snowtrace",url:"https://testnet.snowtrace.io",standard:"EIP3091"}],testnet:!0,slug:"avalanche-fuji"},c43114={name:"Avalanche C-Chain",chain:"AVAX",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/avalanche/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://avalanche.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://avalanche-mainnet.infura.io/v3/${INFURA_API_KEY}","https://api.avax.network/ext/bc/C/rpc"],features:[{name:"EIP1559"}],faucets:["https://free-online-app.com/faucet-for-eth-evm-chains/"],nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},infoURL:"https://www.avax.network/",shortName:"avax",chainId:43114,networkId:43114,slip44:9005,explorers:[{name:"snowtrace",url:"https://snowtrace.io",standard:"EIP3091"}],testnet:!1,slug:"avalanche"},c80001={name:"Mumbai",title:"Polygon Testnet Mumbai",chain:"Polygon",icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/polygon/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},rpc:["https://mumbai.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://polygon-mumbai.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://polygon-mumbai.infura.io/v3/${INFURA_API_KEY}","https://matic-mumbai.chainstacklabs.com","https://rpc-mumbai.maticvigil.com","https://matic-testnet-archive-rpc.bwarelabs.com"],faucets:["https://faucet.polygon.technology/"],nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},infoURL:"https://polygon.technology/",shortName:"maticmum",chainId:80001,networkId:80001,explorers:[{name:"polygonscan",url:"https://mumbai.polygonscan.com",standard:"EIP3091"}],testnet:!0,slug:"mumbai"},c421613={name:"Arbitrum Goerli",title:"Arbitrum Goerli Rollup Testnet",chainId:421613,shortName:"arb-goerli",chain:"ETH",networkId:421613,nativeCurrency:{name:"Arbitrum Goerli Ether",symbol:"AGOR",decimals:18},rpc:["https://arbitrum-goerli.rpc.thirdweb.com/${THIRDWEB_API_KEY}","https://arb-goerli.g.alchemy.com/v2/${ALCHEMY_API_KEY}","https://abritrum-goerli.infura.io/v3/${INFURA_API_KEY}","https://goerli-rollup.arbitrum.io/rpc/"],faucets:[],infoURL:"https://arbitrum.io/",explorers:[{name:"Arbitrum Goerli Rollup Explorer",url:"https://goerli-rollup-explorer.arbitrum.io",standard:"EIP3091"}],parent:{type:"L2",chain:"eip155-5",bridges:[{url:"https://bridge.arbitrum.io/"}]},icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/arbitrum/512.png",height:512,width:512,format:"png",sizes:[512,256,128,64,32,16]},testnet:!0,slug:"arbitrum-goerli"},c1337={name:"Localhost",chain:"ETH",rpc:["http://localhost:8545"],faucets:[],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},icon:{url:"ipfs://QmcxZHpyJa8T4i63xqjPYrZ6tKrt55tZJpbXcjSDKuKaf9/ethereum/512.png",height:512,width:512,format:"png",sizes:[16,32,64,128,256,512]},shortName:"local",chainId:1337,networkId:1337,testnet:!0,slug:"localhost"};const defaultOptions$5={mode:"http"};function getChainRPCs(it,tt){const{thirdwebApiKey:rt,alchemyApiKey:at,infuraApiKey:st,mode:ot}={...defaultOptions$5,...tt},lt=it.rpc.filter(At=>!!(At.startsWith("http")&&ot==="http"||At.startsWith("ws")&&ot==="ws")),ut=lt.filter(At=>At.includes("${THIRDWEB_API_KEY}")&&rt).map(At=>rt?At.replace("${THIRDWEB_API_KEY}",rt):At),ht=lt.filter(At=>At.includes("${ALCHEMY_API_KEY}")&&at).map(At=>at?At.replace("${ALCHEMY_API_KEY}",at):At),mt=lt.filter(At=>At.includes("${INFURA_API_KEY}")&&st).map(At=>st?At.replace("${INFURA_API_KEY}",st):At),bt=lt.filter(At=>!At.includes("${")),vt=[...ut,...mt,...ht,...bt];if(vt.length===0)throw new Error(`No RPC available for chainId "${it.chainId}" with mode ${ot}`);return vt}function getChainRPC(it,tt){return getChainRPCs(it,tt)[0]}const Ethereum=c1,Goerli=c5,Optimism=c10,Binance=c56,BinanceTestnet=c97,Polygon=c137,Fantom=c250,OptimismGoerli=c420,FantomTestnet=c4002,Arbitrum=c42161,AvalancheFuji=c43113,Avalanche=c43114,Mumbai=c80001,ArbitrumGoerli=c421613,Localhost=c1337,defaultChains$1=[Ethereum,Goerli,Polygon,Mumbai,Arbitrum,ArbitrumGoerli,Optimism,OptimismGoerli,Binance,BinanceTestnet,Fantom,FantomTestnet,Avalanche,AvalancheFuji,Localhost];class Subscribable{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(tt){return this.listeners.push(tt),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(rt=>rt!==tt),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const isServer=typeof window>"u"||"Deno"in window;function noop$7(){}function functionalUpdate(it,tt){return typeof it=="function"?it(tt):it}function isValidTimeout(it){return typeof it=="number"&&it>=0&&it!==1/0}function timeUntilStale(it,tt){return Math.max(it+(tt||0)-Date.now(),0)}function parseQueryArgs(it,tt,rt){return isQueryKey(it)?typeof tt=="function"?{...rt,queryKey:it,queryFn:tt}:{...tt,queryKey:it}:it}function parseMutationArgs(it,tt,rt){return isQueryKey(it)?typeof tt=="function"?{...rt,mutationKey:it,mutationFn:tt}:{...tt,mutationKey:it}:typeof it=="function"?{...tt,mutationFn:it}:{...it}}function parseFilterArgs(it,tt,rt){return isQueryKey(it)?[{...tt,queryKey:it},rt]:[it||{},tt]}function matchQuery(it,tt){const{type:rt="all",exact:at,fetchStatus:st,predicate:ot,queryKey:lt,stale:ut}=it;if(isQueryKey(lt)){if(at){if(tt.queryHash!==hashQueryKeyByOptions(lt,tt.options))return!1}else if(!partialMatchKey(tt.queryKey,lt))return!1}if(rt!=="all"){const ht=tt.isActive();if(rt==="active"&&!ht||rt==="inactive"&&ht)return!1}return!(typeof ut=="boolean"&&tt.isStale()!==ut||typeof st<"u"&&st!==tt.state.fetchStatus||ot&&!ot(tt))}function matchMutation(it,tt){const{exact:rt,fetching:at,predicate:st,mutationKey:ot}=it;if(isQueryKey(ot)){if(!tt.options.mutationKey)return!1;if(rt){if(hashQueryKey(tt.options.mutationKey)!==hashQueryKey(ot))return!1}else if(!partialMatchKey(tt.options.mutationKey,ot))return!1}return!(typeof at=="boolean"&&tt.state.status==="loading"!==at||st&&!st(tt))}function hashQueryKeyByOptions(it,tt){return((tt==null?void 0:tt.queryKeyHashFn)||hashQueryKey)(it)}function hashQueryKey(it){return JSON.stringify(it,(tt,rt)=>isPlainObject$1(rt)?Object.keys(rt).sort().reduce((at,st)=>(at[st]=rt[st],at),{}):rt)}function partialMatchKey(it,tt){return partialDeepEqual(it,tt)}function partialDeepEqual(it,tt){return it===tt?!0:typeof it!=typeof tt?!1:it&&tt&&typeof it=="object"&&typeof tt=="object"?!Object.keys(tt).some(rt=>!partialDeepEqual(it[rt],tt[rt])):!1}function replaceEqualDeep(it,tt){if(it===tt)return it;const rt=isPlainArray(it)&&isPlainArray(tt);if(rt||isPlainObject$1(it)&&isPlainObject$1(tt)){const at=rt?it.length:Object.keys(it).length,st=rt?tt:Object.keys(tt),ot=st.length,lt=rt?[]:{};let ut=0;for(let ht=0;ht<ot;ht++){const mt=rt?ht:st[ht];lt[mt]=replaceEqualDeep(it[mt],tt[mt]),lt[mt]===it[mt]&&ut++}return at===ot&&ut===at?it:lt}return tt}function shallowEqualObjects(it,tt){if(it&&!tt||tt&&!it)return!1;for(const rt in it)if(it[rt]!==tt[rt])return!1;return!0}function isPlainArray(it){return Array.isArray(it)&&it.length===Object.keys(it).length}function isPlainObject$1(it){if(!hasObjectPrototype(it))return!1;const tt=it.constructor;if(typeof tt>"u")return!0;const rt=tt.prototype;return!(!hasObjectPrototype(rt)||!rt.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype(it){return Object.prototype.toString.call(it)==="[object Object]"}function isQueryKey(it){return Array.isArray(it)}function sleep(it){return new Promise(tt=>{setTimeout(tt,it)})}function scheduleMicrotask(it){sleep(0).then(it)}function getAbortController(){if(typeof AbortController=="function")return new AbortController}function replaceData(it,tt,rt){return rt.isDataEqual!=null&&rt.isDataEqual(it,tt)?it:typeof rt.structuralSharing=="function"?rt.structuralSharing(it,tt):rt.structuralSharing!==!1?replaceEqualDeep(it,tt):tt}class FocusManager extends Subscribable{constructor(){super(),this.setup=tt=>{if(!isServer&&window.addEventListener){const rt=()=>tt();return window.addEventListener("visibilitychange",rt,!1),window.addEventListener("focus",rt,!1),()=>{window.removeEventListener("visibilitychange",rt),window.removeEventListener("focus",rt)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var tt;(tt=this.cleanup)==null||tt.call(this),this.cleanup=void 0}}setEventListener(tt){var rt;this.setup=tt,(rt=this.cleanup)==null||rt.call(this),this.cleanup=tt(at=>{typeof at=="boolean"?this.setFocused(at):this.onFocus()})}setFocused(tt){this.focused=tt,tt&&this.onFocus()}onFocus(){this.listeners.forEach(tt=>{tt()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const focusManager=new FocusManager;class OnlineManager extends Subscribable{constructor(){super(),this.setup=tt=>{if(!isServer&&window.addEventListener){const rt=()=>tt();return window.addEventListener("online",rt,!1),window.addEventListener("offline",rt,!1),()=>{window.removeEventListener("online",rt),window.removeEventListener("offline",rt)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var tt;(tt=this.cleanup)==null||tt.call(this),this.cleanup=void 0}}setEventListener(tt){var rt;this.setup=tt,(rt=this.cleanup)==null||rt.call(this),this.cleanup=tt(at=>{typeof at=="boolean"?this.setOnline(at):this.onOnline()})}setOnline(tt){this.online=tt,tt&&this.onOnline()}onOnline(){this.listeners.forEach(tt=>{tt()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const onlineManager=new OnlineManager;function defaultRetryDelay(it){return Math.min(1e3*2**it,3e4)}function canFetch(it){return(it!=null?it:"online")==="online"?onlineManager.isOnline():!0}class CancelledError{constructor(tt){this.revert=tt==null?void 0:tt.revert,this.silent=tt==null?void 0:tt.silent}}function isCancelledError(it){return it instanceof CancelledError}function createRetryer(it){let tt=!1,rt=0,at=!1,st,ot,lt;const ut=new Promise((wt,Ct)=>{ot=wt,lt=Ct}),ht=wt=>{at||(xt(new CancelledError(wt)),it.abort==null||it.abort())},mt=()=>{tt=!0},bt=()=>{tt=!1},vt=()=>!focusManager.isFocused()||it.networkMode!=="always"&&!onlineManager.isOnline(),At=wt=>{at||(at=!0,it.onSuccess==null||it.onSuccess(wt),st==null||st(),ot(wt))},xt=wt=>{at||(at=!0,it.onError==null||it.onError(wt),st==null||st(),lt(wt))},Et=()=>new Promise(wt=>{st=Ct=>{const It=at||!vt();return It&&wt(Ct),It},it.onPause==null||it.onPause()}).then(()=>{st=void 0,at||it.onContinue==null||it.onContinue()}),Tt=()=>{if(at)return;let wt;try{wt=it.fn()}catch(Ct){wt=Promise.reject(Ct)}Promise.resolve(wt).then(At).catch(Ct=>{var It,St;if(at)return;const Rt=(It=it.retry)!=null?It:3,Dt=(St=it.retryDelay)!=null?St:defaultRetryDelay,Wt=typeof Dt=="function"?Dt(rt,Ct):Dt,qt=Rt===!0||typeof Rt=="number"&&rt<Rt||typeof Rt=="function"&&Rt(rt,Ct);if(tt||!qt){xt(Ct);return}rt++,it.onFail==null||it.onFail(rt,Ct),sleep(Wt).then(()=>{if(vt())return Et()}).then(()=>{tt?xt(Ct):Tt()})})};return canFetch(it.networkMode)?Tt():Et().then(Tt),{promise:ut,cancel:ht,continue:()=>(st==null?void 0:st())?ut:Promise.resolve(),cancelRetry:mt,continueRetry:bt}}const defaultLogger=console;function createNotifyManager(){let it=[],tt=0,rt=bt=>{bt()},at=bt=>{bt()};const st=bt=>{let vt;tt++;try{vt=bt()}finally{tt--,tt||ut()}return vt},ot=bt=>{tt?it.push(bt):scheduleMicrotask(()=>{rt(bt)})},lt=bt=>(...vt)=>{ot(()=>{bt(...vt)})},ut=()=>{const bt=it;it=[],bt.length&&scheduleMicrotask(()=>{at(()=>{bt.forEach(vt=>{rt(vt)})})})};return{batch:st,batchCalls:lt,schedule:ot,setNotifyFunction:bt=>{rt=bt},setBatchNotifyFunction:bt=>{at=bt}}}const notifyManager=createNotifyManager();class Removable{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(tt){this.cacheTime=Math.max(this.cacheTime||0,tt!=null?tt:isServer?1/0:5*60*1e3)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Query extends Removable{constructor(tt){super(),this.abortSignalConsumed=!1,this.defaultOptions=tt.defaultOptions,this.setOptions(tt.options),this.observers=[],this.cache=tt.cache,this.logger=tt.logger||defaultLogger,this.queryKey=tt.queryKey,this.queryHash=tt.queryHash,this.initialState=tt.state||getDefaultState$1(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(tt){this.options={...this.defaultOptions,...tt},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(tt,rt){const at=replaceData(this.state.data,tt,this.options);return this.dispatch({data:at,type:"success",dataUpdatedAt:rt==null?void 0:rt.updatedAt,manual:rt==null?void 0:rt.manual}),at}setState(tt,rt){this.dispatch({type:"setState",state:tt,setStateOptions:rt})}cancel(tt){var rt;const at=this.promise;return(rt=this.retryer)==null||rt.cancel(tt),at?at.then(noop$7).catch(noop$7):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(tt=>tt.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(tt=>tt.getCurrentResult().isStale)}isStaleByTime(tt=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!timeUntilStale(this.state.dataUpdatedAt,tt)}onFocus(){var tt;const rt=this.observers.find(at=>at.shouldFetchOnWindowFocus());rt&&rt.refetch({cancelRefetch:!1}),(tt=this.retryer)==null||tt.continue()}onOnline(){var tt;const rt=this.observers.find(at=>at.shouldFetchOnReconnect());rt&&rt.refetch({cancelRefetch:!1}),(tt=this.retryer)==null||tt.continue()}addObserver(tt){this.observers.indexOf(tt)===-1&&(this.observers.push(tt),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:tt}))}removeObserver(tt){this.observers.indexOf(tt)!==-1&&(this.observers=this.observers.filter(rt=>rt!==tt),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:tt}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(tt,rt){var at,st;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&rt!=null&&rt.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var ot;return(ot=this.retryer)==null||ot.continueRetry(),this.promise}}if(tt&&this.setOptions(tt),!this.options.queryFn){const xt=this.observers.find(Et=>Et.options.queryFn);xt&&this.setOptions(xt.options)}Array.isArray(this.options.queryKey);const lt=getAbortController(),ut={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},ht=xt=>{Object.defineProperty(xt,"signal",{enumerable:!0,get:()=>{if(lt)return this.abortSignalConsumed=!0,lt.signal}})};ht(ut);const mt=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(ut)):Promise.reject("Missing queryFn"),bt={fetchOptions:rt,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:mt};if(ht(bt),(at=this.options.behavior)==null||at.onFetch(bt),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((st=bt.fetchOptions)==null?void 0:st.meta)){var vt;this.dispatch({type:"fetch",meta:(vt=bt.fetchOptions)==null?void 0:vt.meta})}const At=xt=>{if(isCancelledError(xt)&&xt.silent||this.dispatch({type:"error",error:xt}),!isCancelledError(xt)){var Et,Tt,wt,Ct;(Et=(Tt=this.cache.config).onError)==null||Et.call(Tt,xt,this),(wt=(Ct=this.cache.config).onSettled)==null||wt.call(Ct,this.state.data,xt,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=createRetryer({fn:bt.fetchFn,abort:lt==null?void 0:lt.abort.bind(lt),onSuccess:xt=>{var Et,Tt,wt,Ct;if(typeof xt>"u"){At(new Error("undefined"));return}this.setData(xt),(Et=(Tt=this.cache.config).onSuccess)==null||Et.call(Tt,xt,this),(wt=(Ct=this.cache.config).onSettled)==null||wt.call(Ct,xt,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:At,onFail:(xt,Et)=>{this.dispatch({type:"failed",failureCount:xt,error:Et})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:bt.options.retry,retryDelay:bt.options.retryDelay,networkMode:bt.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(tt){const rt=at=>{var st,ot;switch(tt.type){case"failed":return{...at,fetchFailureCount:tt.failureCount,fetchFailureReason:tt.error};case"pause":return{...at,fetchStatus:"paused"};case"continue":return{...at,fetchStatus:"fetching"};case"fetch":return{...at,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(st=tt.meta)!=null?st:null,fetchStatus:canFetch(this.options.networkMode)?"fetching":"paused",...!at.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...at,data:tt.data,dataUpdateCount:at.dataUpdateCount+1,dataUpdatedAt:(ot=tt.dataUpdatedAt)!=null?ot:Date.now(),error:null,isInvalidated:!1,status:"success",...!tt.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const lt=tt.error;return isCancelledError(lt)&&lt.revert&&this.revertState?{...this.revertState}:{...at,error:lt,errorUpdateCount:at.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:at.fetchFailureCount+1,fetchFailureReason:lt,fetchStatus:"idle",status:"error"};case"invalidate":return{...at,isInvalidated:!0};case"setState":return{...at,...tt.state}}};this.state=rt(this.state),notifyManager.batch(()=>{this.observers.forEach(at=>{at.onQueryUpdate(tt)}),this.cache.notify({query:this,type:"updated",action:tt})})}}function getDefaultState$1(it){const tt=typeof it.initialData=="function"?it.initialData():it.initialData,rt=typeof tt<"u",at=rt?typeof it.initialDataUpdatedAt=="function"?it.initialDataUpdatedAt():it.initialDataUpdatedAt:0;return{data:tt,dataUpdateCount:0,dataUpdatedAt:rt?at!=null?at:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:rt?"success":"loading",fetchStatus:"idle"}}class QueryCache extends Subscribable{constructor(tt){super(),this.config=tt||{},this.queries=[],this.queriesMap={}}build(tt,rt,at){var st;const ot=rt.queryKey,lt=(st=rt.queryHash)!=null?st:hashQueryKeyByOptions(ot,rt);let ut=this.get(lt);return ut||(ut=new Query({cache:this,logger:tt.getLogger(),queryKey:ot,queryHash:lt,options:tt.defaultQueryOptions(rt),state:at,defaultOptions:tt.getQueryDefaults(ot)}),this.add(ut)),ut}add(tt){this.queriesMap[tt.queryHash]||(this.queriesMap[tt.queryHash]=tt,this.queries.push(tt),this.notify({type:"added",query:tt}))}remove(tt){const rt=this.queriesMap[tt.queryHash];rt&&(tt.destroy(),this.queries=this.queries.filter(at=>at!==tt),rt===tt&&delete this.queriesMap[tt.queryHash],this.notify({type:"removed",query:tt}))}clear(){notifyManager.batch(()=>{this.queries.forEach(tt=>{this.remove(tt)})})}get(tt){return this.queriesMap[tt]}getAll(){return this.queries}find(tt,rt){const[at]=parseFilterArgs(tt,rt);return typeof at.exact>"u"&&(at.exact=!0),this.queries.find(st=>matchQuery(at,st))}findAll(tt,rt){const[at]=parseFilterArgs(tt,rt);return Object.keys(at).length>0?this.queries.filter(st=>matchQuery(at,st)):this.queries}notify(tt){notifyManager.batch(()=>{this.listeners.forEach(rt=>{rt(tt)})})}onFocus(){notifyManager.batch(()=>{this.queries.forEach(tt=>{tt.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.queries.forEach(tt=>{tt.onOnline()})})}}class Mutation extends Removable{constructor(tt){super(),this.defaultOptions=tt.defaultOptions,this.mutationId=tt.mutationId,this.mutationCache=tt.mutationCache,this.logger=tt.logger||defaultLogger,this.observers=[],this.state=tt.state||getDefaultState(),this.setOptions(tt.options),this.scheduleGc()}setOptions(tt){this.options={...this.defaultOptions,...tt},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(tt){this.dispatch({type:"setState",state:tt})}addObserver(tt){this.observers.indexOf(tt)===-1&&(this.observers.push(tt),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:tt}))}removeObserver(tt){this.observers=this.observers.filter(rt=>rt!==tt),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:tt})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var tt,rt;return(tt=(rt=this.retryer)==null?void 0:rt.continue())!=null?tt:this.execute()}async execute(){const tt=()=>{var qt;return this.retryer=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(Vt,Yt)=>{this.dispatch({type:"failed",failureCount:Vt,error:Yt})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(qt=this.options.retry)!=null?qt:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},rt=this.state.status==="loading";try{var at,st,ot,lt,ut,ht,mt,bt;if(!rt){var vt,At,xt,Et;this.dispatch({type:"loading",variables:this.options.variables}),await((vt=(At=this.mutationCache.config).onMutate)==null?void 0:vt.call(At,this.state.variables,this));const Vt=await((xt=(Et=this.options).onMutate)==null?void 0:xt.call(Et,this.state.variables));Vt!==this.state.context&&this.dispatch({type:"loading",context:Vt,variables:this.state.variables})}const qt=await tt();return await((at=(st=this.mutationCache.config).onSuccess)==null?void 0:at.call(st,qt,this.state.variables,this.state.context,this)),await((ot=(lt=this.options).onSuccess)==null?void 0:ot.call(lt,qt,this.state.variables,this.state.context)),await((ut=(ht=this.mutationCache.config).onSettled)==null?void 0:ut.call(ht,qt,null,this.state.variables,this.state.context,this)),await((mt=(bt=this.options).onSettled)==null?void 0:mt.call(bt,qt,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:qt}),qt}catch(qt){try{var Tt,wt,Ct,It,St,Rt,Dt,Wt;throw await((Tt=(wt=this.mutationCache.config).onError)==null?void 0:Tt.call(wt,qt,this.state.variables,this.state.context,this)),await((Ct=(It=this.options).onError)==null?void 0:Ct.call(It,qt,this.state.variables,this.state.context)),await((St=(Rt=this.mutationCache.config).onSettled)==null?void 0:St.call(Rt,void 0,qt,this.state.variables,this.state.context,this)),await((Dt=(Wt=this.options).onSettled)==null?void 0:Dt.call(Wt,void 0,qt,this.state.variables,this.state.context)),qt}finally{this.dispatch({type:"error",error:qt})}}}dispatch(tt){const rt=at=>{switch(tt.type){case"failed":return{...at,failureCount:tt.failureCount,failureReason:tt.error};case"pause":return{...at,isPaused:!0};case"continue":return{...at,isPaused:!1};case"loading":return{...at,context:tt.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!canFetch(this.options.networkMode),status:"loading",variables:tt.variables};case"success":return{...at,data:tt.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...at,data:void 0,error:tt.error,failureCount:at.failureCount+1,failureReason:tt.error,isPaused:!1,status:"error"};case"setState":return{...at,...tt.state}}};this.state=rt(this.state),notifyManager.batch(()=>{this.observers.forEach(at=>{at.onMutationUpdate(tt)}),this.mutationCache.notify({mutation:this,type:"updated",action:tt})})}}function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class MutationCache extends Subscribable{constructor(tt){super(),this.config=tt||{},this.mutations=[],this.mutationId=0}build(tt,rt,at){const st=new Mutation({mutationCache:this,logger:tt.getLogger(),mutationId:++this.mutationId,options:tt.defaultMutationOptions(rt),state:at,defaultOptions:rt.mutationKey?tt.getMutationDefaults(rt.mutationKey):void 0});return this.add(st),st}add(tt){this.mutations.push(tt),this.notify({type:"added",mutation:tt})}remove(tt){this.mutations=this.mutations.filter(rt=>rt!==tt),this.notify({type:"removed",mutation:tt})}clear(){notifyManager.batch(()=>{this.mutations.forEach(tt=>{this.remove(tt)})})}getAll(){return this.mutations}find(tt){return typeof tt.exact>"u"&&(tt.exact=!0),this.mutations.find(rt=>matchMutation(tt,rt))}findAll(tt){return this.mutations.filter(rt=>matchMutation(tt,rt))}notify(tt){notifyManager.batch(()=>{this.listeners.forEach(rt=>{rt(tt)})})}resumePausedMutations(){var tt;return this.resuming=((tt=this.resuming)!=null?tt:Promise.resolve()).then(()=>{const rt=this.mutations.filter(at=>at.state.isPaused);return notifyManager.batch(()=>rt.reduce((at,st)=>at.then(()=>st.continue().catch(noop$7)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function infiniteQueryBehavior(){return{onFetch:it=>{it.fetchFn=()=>{var tt,rt,at,st,ot,lt;const ut=(tt=it.fetchOptions)==null||(rt=tt.meta)==null?void 0:rt.refetchPage,ht=(at=it.fetchOptions)==null||(st=at.meta)==null?void 0:st.fetchMore,mt=ht==null?void 0:ht.pageParam,bt=(ht==null?void 0:ht.direction)==="forward",vt=(ht==null?void 0:ht.direction)==="backward",At=((ot=it.state.data)==null?void 0:ot.pages)||[],xt=((lt=it.state.data)==null?void 0:lt.pageParams)||[];let Et=xt,Tt=!1;const wt=Wt=>{Object.defineProperty(Wt,"signal",{enumerable:!0,get:()=>{var qt;if((qt=it.signal)!=null&&qt.aborted)Tt=!0;else{var Vt;(Vt=it.signal)==null||Vt.addEventListener("abort",()=>{Tt=!0})}return it.signal}})},Ct=it.options.queryFn||(()=>Promise.reject("Missing queryFn")),It=(Wt,qt,Vt,Yt)=>(Et=Yt?[qt,...Et]:[...Et,qt],Yt?[Vt,...Wt]:[...Wt,Vt]),St=(Wt,qt,Vt,Yt)=>{if(Tt)return Promise.reject("Cancelled");if(typeof Vt>"u"&&!qt&&Wt.length)return Promise.resolve(Wt);const jt={queryKey:it.queryKey,pageParam:Vt,meta:it.options.meta};wt(jt);const kt=Ct(jt);return Promise.resolve(kt).then(Nt=>It(Wt,Vt,Nt,Yt))};let Rt;if(!At.length)Rt=St([]);else if(bt){const Wt=typeof mt<"u",qt=Wt?mt:getNextPageParam(it.options,At);Rt=St(At,Wt,qt)}else if(vt){const Wt=typeof mt<"u",qt=Wt?mt:getPreviousPageParam(it.options,At);Rt=St(At,Wt,qt,!0)}else{Et=[];const Wt=typeof it.options.getNextPageParam>"u";Rt=(ut&&At[0]?ut(At[0],0,At):!0)?St([],Wt,xt[0]):Promise.resolve(It([],xt[0],At[0]));for(let Vt=1;Vt<At.length;Vt++)Rt=Rt.then(Yt=>{if(ut&&At[Vt]?ut(At[Vt],Vt,At):!0){const kt=Wt?xt[Vt]:getNextPageParam(it.options,Yt);return St(Yt,Wt,kt)}return Promise.resolve(It(Yt,xt[Vt],At[Vt]))})}return Rt.then(Wt=>({pages:Wt,pageParams:Et}))}}}}function getNextPageParam(it,tt){return it.getNextPageParam==null?void 0:it.getNextPageParam(tt[tt.length-1],tt)}function getPreviousPageParam(it,tt){return it.getPreviousPageParam==null?void 0:it.getPreviousPageParam(tt[0],tt)}class QueryClient{constructor(tt={}){this.queryCache=tt.queryCache||new QueryCache,this.mutationCache=tt.mutationCache||new MutationCache,this.logger=tt.logger||defaultLogger,this.defaultOptions=tt.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=focusManager.subscribe(()=>{focusManager.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=onlineManager.subscribe(()=>{onlineManager.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var tt,rt;this.mountCount--,this.mountCount===0&&((tt=this.unsubscribeFocus)==null||tt.call(this),this.unsubscribeFocus=void 0,(rt=this.unsubscribeOnline)==null||rt.call(this),this.unsubscribeOnline=void 0)}isFetching(tt,rt){const[at]=parseFilterArgs(tt,rt);return at.fetchStatus="fetching",this.queryCache.findAll(at).length}isMutating(tt){return this.mutationCache.findAll({...tt,fetching:!0}).length}getQueryData(tt,rt){var at;return(at=this.queryCache.find(tt,rt))==null?void 0:at.state.data}ensureQueryData(tt,rt,at){const st=parseQueryArgs(tt,rt,at),ot=this.getQueryData(st.queryKey);return ot?Promise.resolve(ot):this.fetchQuery(st)}getQueriesData(tt){return this.getQueryCache().findAll(tt).map(({queryKey:rt,state:at})=>{const st=at.data;return[rt,st]})}setQueryData(tt,rt,at){const st=this.queryCache.find(tt),ot=st==null?void 0:st.state.data,lt=functionalUpdate(rt,ot);if(typeof lt>"u")return;const ut=parseQueryArgs(tt),ht=this.defaultQueryOptions(ut);return this.queryCache.build(this,ht).setData(lt,{...at,manual:!0})}setQueriesData(tt,rt,at){return notifyManager.batch(()=>this.getQueryCache().findAll(tt).map(({queryKey:st})=>[st,this.setQueryData(st,rt,at)]))}getQueryState(tt,rt){var at;return(at=this.queryCache.find(tt,rt))==null?void 0:at.state}removeQueries(tt,rt){const[at]=parseFilterArgs(tt,rt),st=this.queryCache;notifyManager.batch(()=>{st.findAll(at).forEach(ot=>{st.remove(ot)})})}resetQueries(tt,rt,at){const[st,ot]=parseFilterArgs(tt,rt,at),lt=this.queryCache,ut={type:"active",...st};return notifyManager.batch(()=>(lt.findAll(st).forEach(ht=>{ht.reset()}),this.refetchQueries(ut,ot)))}cancelQueries(tt,rt,at){const[st,ot={}]=parseFilterArgs(tt,rt,at);typeof ot.revert>"u"&&(ot.revert=!0);const lt=notifyManager.batch(()=>this.queryCache.findAll(st).map(ut=>ut.cancel(ot)));return Promise.all(lt).then(noop$7).catch(noop$7)}invalidateQueries(tt,rt,at){const[st,ot]=parseFilterArgs(tt,rt,at);return notifyManager.batch(()=>{var lt,ut;if(this.queryCache.findAll(st).forEach(mt=>{mt.invalidate()}),st.refetchType==="none")return Promise.resolve();const ht={...st,type:(lt=(ut=st.refetchType)!=null?ut:st.type)!=null?lt:"active"};return this.refetchQueries(ht,ot)})}refetchQueries(tt,rt,at){const[st,ot]=parseFilterArgs(tt,rt,at),lt=notifyManager.batch(()=>this.queryCache.findAll(st).filter(ht=>!ht.isDisabled()).map(ht=>{var mt;return ht.fetch(void 0,{...ot,cancelRefetch:(mt=ot==null?void 0:ot.cancelRefetch)!=null?mt:!0,meta:{refetchPage:st.refetchPage}})}));let ut=Promise.all(lt).then(noop$7);return ot!=null&&ot.throwOnError||(ut=ut.catch(noop$7)),ut}fetchQuery(tt,rt,at){const st=parseQueryArgs(tt,rt,at),ot=this.defaultQueryOptions(st);typeof ot.retry>"u"&&(ot.retry=!1);const lt=this.queryCache.build(this,ot);return lt.isStaleByTime(ot.staleTime)?lt.fetch(ot):Promise.resolve(lt.state.data)}prefetchQuery(tt,rt,at){return this.fetchQuery(tt,rt,at).then(noop$7).catch(noop$7)}fetchInfiniteQuery(tt,rt,at){const st=parseQueryArgs(tt,rt,at);return st.behavior=infiniteQueryBehavior(),this.fetchQuery(st)}prefetchInfiniteQuery(tt,rt,at){return this.fetchInfiniteQuery(tt,rt,at).then(noop$7).catch(noop$7)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(tt){this.defaultOptions=tt}setQueryDefaults(tt,rt){const at=this.queryDefaults.find(st=>hashQueryKey(tt)===hashQueryKey(st.queryKey));at?at.defaultOptions=rt:this.queryDefaults.push({queryKey:tt,defaultOptions:rt})}getQueryDefaults(tt){if(!tt)return;const rt=this.queryDefaults.find(at=>partialMatchKey(tt,at.queryKey));return rt==null?void 0:rt.defaultOptions}setMutationDefaults(tt,rt){const at=this.mutationDefaults.find(st=>hashQueryKey(tt)===hashQueryKey(st.mutationKey));at?at.defaultOptions=rt:this.mutationDefaults.push({mutationKey:tt,defaultOptions:rt})}getMutationDefaults(tt){if(!tt)return;const rt=this.mutationDefaults.find(at=>partialMatchKey(tt,at.mutationKey));return rt==null?void 0:rt.defaultOptions}defaultQueryOptions(tt){if(tt!=null&&tt._defaulted)return tt;const rt={...this.defaultOptions.queries,...this.getQueryDefaults(tt==null?void 0:tt.queryKey),...tt,_defaulted:!0};return!rt.queryHash&&rt.queryKey&&(rt.queryHash=hashQueryKeyByOptions(rt.queryKey,rt)),typeof rt.refetchOnReconnect>"u"&&(rt.refetchOnReconnect=rt.networkMode!=="always"),typeof rt.useErrorBoundary>"u"&&(rt.useErrorBoundary=!!rt.suspense),rt}defaultMutationOptions(tt){return tt!=null&&tt._defaulted?tt:{...this.defaultOptions.mutations,...this.getMutationDefaults(tt==null?void 0:tt.mutationKey),...tt,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class QueryObserver extends Subscribable{constructor(tt,rt){super(),this.client=tt,this.options=rt,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(rt)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(tt,rt){const at=this.options,st=this.currentQuery;if(this.options=this.client.defaultQueryOptions(tt),shallowEqualObjects(at,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=at.queryKey),this.updateQuery();const ot=this.hasListeners();ot&&shouldFetchOptionally(this.currentQuery,st,this.options,at)&&this.executeFetch(),this.updateResult(rt),ot&&(this.currentQuery!==st||this.options.enabled!==at.enabled||this.options.staleTime!==at.staleTime)&&this.updateStaleTimeout();const lt=this.computeRefetchInterval();ot&&(this.currentQuery!==st||this.options.enabled!==at.enabled||lt!==this.currentRefetchInterval)&&this.updateRefetchInterval(lt)}getOptimisticResult(tt){const rt=this.client.getQueryCache().build(this.client,tt);return this.createResult(rt,tt)}getCurrentResult(){return this.currentResult}trackResult(tt){const rt={};return Object.keys(tt).forEach(at=>{Object.defineProperty(rt,at,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(at),tt[at])})}),rt}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:tt,...rt}={}){return this.fetch({...rt,meta:{refetchPage:tt}})}fetchOptimistic(tt){const rt=this.client.defaultQueryOptions(tt),at=this.client.getQueryCache().build(this.client,rt);return at.isFetchingOptimistic=!0,at.fetch().then(()=>this.createResult(at,rt))}fetch(tt){var rt;return this.executeFetch({...tt,cancelRefetch:(rt=tt.cancelRefetch)!=null?rt:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(tt){this.updateQuery();let rt=this.currentQuery.fetch(this.options,tt);return tt!=null&&tt.throwOnError||(rt=rt.catch(noop$7)),rt}updateStaleTimeout(){if(this.clearStaleTimeout(),isServer||this.currentResult.isStale||!isValidTimeout(this.options.staleTime))return;const rt=timeUntilStale(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},rt)}computeRefetchInterval(){var tt;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(tt=this.options.refetchInterval)!=null?tt:!1}updateRefetchInterval(tt){this.clearRefetchInterval(),this.currentRefetchInterval=tt,!(isServer||this.options.enabled===!1||!isValidTimeout(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(tt,rt){const at=this.currentQuery,st=this.options,ot=this.currentResult,lt=this.currentResultState,ut=this.currentResultOptions,ht=tt!==at,mt=ht?tt.state:this.currentQueryInitialState,bt=ht?this.currentResult:this.previousQueryResult,{state:vt}=tt;let{dataUpdatedAt:At,error:xt,errorUpdatedAt:Et,fetchStatus:Tt,status:wt}=vt,Ct=!1,It=!1,St;if(rt._optimisticResults){const Vt=this.hasListeners(),Yt=!Vt&&shouldFetchOnMount(tt,rt),jt=Vt&&shouldFetchOptionally(tt,at,rt,st);(Yt||jt)&&(Tt=canFetch(tt.options.networkMode)?"fetching":"paused",At||(wt="loading")),rt._optimisticResults==="isRestoring"&&(Tt="idle")}if(rt.keepPreviousData&&!vt.dataUpdatedAt&&bt!=null&&bt.isSuccess&&wt!=="error")St=bt.data,At=bt.dataUpdatedAt,wt=bt.status,Ct=!0;else if(rt.select&&typeof vt.data<"u")if(ot&&vt.data===(lt==null?void 0:lt.data)&&rt.select===this.selectFn)St=this.selectResult;else try{this.selectFn=rt.select,St=rt.select(vt.data),St=replaceData(ot==null?void 0:ot.data,St,rt),this.selectResult=St,this.selectError=null}catch(Vt){this.selectError=Vt}else St=vt.data;if(typeof rt.placeholderData<"u"&&typeof St>"u"&&wt==="loading"){let Vt;if(ot!=null&&ot.isPlaceholderData&&rt.placeholderData===(ut==null?void 0:ut.placeholderData))Vt=ot.data;else if(Vt=typeof rt.placeholderData=="function"?rt.placeholderData():rt.placeholderData,rt.select&&typeof Vt<"u")try{Vt=rt.select(Vt),this.selectError=null}catch(Yt){this.selectError=Yt}typeof Vt<"u"&&(wt="success",St=replaceData(ot==null?void 0:ot.data,Vt,rt),It=!0)}this.selectError&&(xt=this.selectError,St=this.selectResult,Et=Date.now(),wt="error");const Rt=Tt==="fetching",Dt=wt==="loading",Wt=wt==="error";return{status:wt,fetchStatus:Tt,isLoading:Dt,isSuccess:wt==="success",isError:Wt,isInitialLoading:Dt&&Rt,data:St,dataUpdatedAt:At,error:xt,errorUpdatedAt:Et,failureCount:vt.fetchFailureCount,failureReason:vt.fetchFailureReason,errorUpdateCount:vt.errorUpdateCount,isFetched:vt.dataUpdateCount>0||vt.errorUpdateCount>0,isFetchedAfterMount:vt.dataUpdateCount>mt.dataUpdateCount||vt.errorUpdateCount>mt.errorUpdateCount,isFetching:Rt,isRefetching:Rt&&!Dt,isLoadingError:Wt&&vt.dataUpdatedAt===0,isPaused:Tt==="paused",isPlaceholderData:It,isPreviousData:Ct,isRefetchError:Wt&&vt.dataUpdatedAt!==0,isStale:isStale(tt,rt),refetch:this.refetch,remove:this.remove}}updateResult(tt){const rt=this.currentResult,at=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,shallowEqualObjects(at,rt))return;this.currentResult=at;const st={cache:!0},ot=()=>{if(!rt)return!0;const{notifyOnChangeProps:lt}=this.options;if(lt==="all"||!lt&&!this.trackedProps.size)return!0;const ut=new Set(lt!=null?lt:this.trackedProps);return this.options.useErrorBoundary&&ut.add("error"),Object.keys(this.currentResult).some(ht=>{const mt=ht;return this.currentResult[mt]!==rt[mt]&&ut.has(mt)})};(tt==null?void 0:tt.listeners)!==!1&&ot()&&(st.listeners=!0),this.notify({...st,...tt})}updateQuery(){const tt=this.client.getQueryCache().build(this.client,this.options);if(tt===this.currentQuery)return;const rt=this.currentQuery;this.currentQuery=tt,this.currentQueryInitialState=tt.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(rt==null||rt.removeObserver(this),tt.addObserver(this))}onQueryUpdate(tt){const rt={};tt.type==="success"?rt.onSuccess=!tt.manual:tt.type==="error"&&!isCancelledError(tt.error)&&(rt.onError=!0),this.updateResult(rt),this.hasListeners()&&this.updateTimers()}notify(tt){notifyManager.batch(()=>{if(tt.onSuccess){var rt,at,st,ot;(rt=(at=this.options).onSuccess)==null||rt.call(at,this.currentResult.data),(st=(ot=this.options).onSettled)==null||st.call(ot,this.currentResult.data,null)}else if(tt.onError){var lt,ut,ht,mt;(lt=(ut=this.options).onError)==null||lt.call(ut,this.currentResult.error),(ht=(mt=this.options).onSettled)==null||ht.call(mt,void 0,this.currentResult.error)}tt.listeners&&this.listeners.forEach(bt=>{bt(this.currentResult)}),tt.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function shouldLoadOnMount(it,tt){return tt.enabled!==!1&&!it.state.dataUpdatedAt&&!(it.state.status==="error"&&tt.retryOnMount===!1)}function shouldFetchOnMount(it,tt){return shouldLoadOnMount(it,tt)||it.state.dataUpdatedAt>0&&shouldFetchOn(it,tt,tt.refetchOnMount)}function shouldFetchOn(it,tt,rt){if(tt.enabled!==!1){const at=typeof rt=="function"?rt(it):rt;return at==="always"||at!==!1&&isStale(it,tt)}return!1}function shouldFetchOptionally(it,tt,rt,at){return rt.enabled!==!1&&(it!==tt||at.enabled===!1)&&(!rt.suspense||it.state.status!=="error")&&isStale(it,rt)}function isStale(it,tt){return it.isStaleByTime(tt.staleTime)}class MutationObserver$1 extends Subscribable{constructor(tt,rt){super(),this.client=tt,this.setOptions(rt),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(tt){var rt;const at=this.options;this.options=this.client.defaultMutationOptions(tt),shallowEqualObjects(at,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(rt=this.currentMutation)==null||rt.setOptions(this.options)}onUnsubscribe(){if(!this.listeners.length){var tt;(tt=this.currentMutation)==null||tt.removeObserver(this)}}onMutationUpdate(tt){this.updateResult();const rt={listeners:!0};tt.type==="success"?rt.onSuccess=!0:tt.type==="error"&&(rt.onError=!0),this.notify(rt)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(tt,rt){return this.mutateOptions=rt,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof tt<"u"?tt:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const tt=this.currentMutation?this.currentMutation.state:getDefaultState(),rt={...tt,isLoading:tt.status==="loading",isSuccess:tt.status==="success",isError:tt.status==="error",isIdle:tt.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=rt}notify(tt){notifyManager.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(tt.onSuccess){var rt,at,st,ot;(rt=(at=this.mutateOptions).onSuccess)==null||rt.call(at,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(st=(ot=this.mutateOptions).onSettled)==null||st.call(ot,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(tt.onError){var lt,ut,ht,mt;(lt=(ut=this.mutateOptions).onError)==null||lt.call(ut,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(ht=(mt=this.mutateOptions).onSettled)==null||ht.call(mt,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}tt.listeners&&this.listeners.forEach(bt=>{bt(this.currentResult)})})}}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
* @license React
* use-sync-external-store-shim.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var e$a=react.exports;function h$8(it,tt){return it===tt&&(it!==0||1/it===1/tt)||it!==it&&tt!==tt}var k$6=typeof Object.is=="function"?Object.is:h$8,l$8=e$a.useState,m$6=e$a.useEffect,n$a=e$a.useLayoutEffect,p$8=e$a.useDebugValue;function q$5(it,tt){var rt=tt(),at=l$8({inst:{value:rt,getSnapshot:tt}}),st=at[0].inst,ot=at[1];return n$a(function(){st.value=rt,st.getSnapshot=tt,r$c(st)&&ot({inst:st})},[it,rt,tt]),m$6(function(){return r$c(st)&&ot({inst:st}),it(function(){r$c(st)&&ot({inst:st})})},[it]),p$8(rt),rt}function r$c(it){var tt=it.getSnapshot;it=it.value;try{var rt=tt();return!k$6(it,rt)}catch{return!0}}function t$9(it,tt){return tt()}var u$6=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$9:q$5;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$a.useSyncExternalStore!==void 0?e$a.useSyncExternalStore:u$6,function(it){it.exports=useSyncExternalStoreShim_production_min}(shim);const useSyncExternalStore=shim.exports.useSyncExternalStore,defaultContext=react.exports.createContext(void 0),QueryClientSharingContext=react.exports.createContext(!1);function getQueryClientContext(it,tt){return it||(tt&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext)}const useQueryClient=({context:it}={})=>{const tt=react.exports.useContext(getQueryClientContext(it,react.exports.useContext(QueryClientSharingContext)));if(!tt)throw new Error("No QueryClient set, use QueryClientProvider to set one");return tt},QueryClientProvider=({client:it,children:tt,context:rt,contextSharing:at=!1})=>{react.exports.useEffect(()=>(it.mount(),()=>{it.unmount()}),[it]);const st=getQueryClientContext(rt,at);return react.exports.createElement(QueryClientSharingContext.Provider,{value:!rt&&at},react.exports.createElement(st.Provider,{value:it},tt))},IsRestoringContext=react.exports.createContext(!1),useIsRestoring=()=>react.exports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let it=!1;return{clearReset:()=>{it=!1},reset:()=>{it=!0},isReset:()=>it}}const QueryErrorResetBoundaryContext=react.exports.createContext(createValue()),useQueryErrorResetBoundary=()=>react.exports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(it,tt){return typeof it=="function"?it(...tt):!!it}const ensurePreventErrorBoundaryRetry=(it,tt)=>{(it.suspense||it.useErrorBoundary)&&(tt.isReset()||(it.retryOnMount=!1))},useClearResetErrorBoundary=it=>{react.exports.useEffect(()=>{it.clearReset()},[it])},getHasError=({result:it,errorResetBoundary:tt,useErrorBoundary:rt,query:at})=>it.isError&&!tt.isReset()&&!it.isFetching&&shouldThrowError(rt,[it.error,at]),ensureStaleTime=it=>{it.suspense&&typeof it.staleTime!="number"&&(it.staleTime=1e3)},willFetch=(it,tt)=>it.isLoading&&it.isFetching&&!tt,shouldSuspend=(it,tt,rt)=>(it==null?void 0:it.suspense)&&willFetch(tt,rt),fetchOptimistic=(it,tt,rt)=>tt.fetchOptimistic(it).then(({data:at})=>{it.onSuccess==null||it.onSuccess(at),it.onSettled==null||it.onSettled(at,null)}).catch(at=>{rt.clearReset(),it.onError==null||it.onError(at),it.onSettled==null||it.onSettled(void 0,at)});function useBaseQuery(it,tt){const rt=useQueryClient({context:it.context}),at=useIsRestoring(),st=useQueryErrorResetBoundary(),ot=rt.defaultQueryOptions(it);ot._optimisticResults=at?"isRestoring":"optimistic",ot.onError&&(ot.onError=notifyManager.batchCalls(ot.onError)),ot.onSuccess&&(ot.onSuccess=notifyManager.batchCalls(ot.onSuccess)),ot.onSettled&&(ot.onSettled=notifyManager.batchCalls(ot.onSettled)),ensureStaleTime(ot),ensurePreventErrorBoundaryRetry(ot,st),useClearResetErrorBoundary(st);const[lt]=react.exports.useState(()=>new tt(rt,ot)),ut=lt.getOptimisticResult(ot);if(useSyncExternalStore(react.exports.useCallback(ht=>at?()=>{}:lt.subscribe(notifyManager.batchCalls(ht)),[lt,at]),()=>lt.getCurrentResult(),()=>lt.getCurrentResult()),react.exports.useEffect(()=>{lt.setOptions(ot,{listeners:!1})},[ot,lt]),shouldSuspend(ot,ut,at))throw fetchOptimistic(ot,lt,st);if(getHasError({result:ut,errorResetBoundary:st,useErrorBoundary:ot.useErrorBoundary,query:lt.getCurrentQuery()}))throw ut.error;return ot.notifyOnChangeProps?ut:lt.trackResult(ut)}function useQuery(it,tt,rt){const at=parseQueryArgs(it,tt,rt);return useBaseQuery(at,QueryObserver)}function useMutation(it,tt,rt){const at=parseMutationArgs(it,tt,rt),st=useQueryClient({context:at.context}),[ot]=react.exports.useState(()=>new MutationObserver$1(st,at));react.exports.useEffect(()=>{ot.setOptions(at)},[ot,at]);const lt=useSyncExternalStore(react.exports.useCallback(ht=>ot.subscribe(notifyManager.batchCalls(ht)),[ot]),()=>ot.getCurrentResult(),()=>ot.getCurrentResult()),ut=react.exports.useCallback((ht,mt)=>{ot.mutate(ht,mt).catch(noop$6)},[ot]);if(lt.error&&shouldThrowError(ot.options.useErrorBoundary,[lt.error]))throw lt.error;return{...lt,mutate:ut,mutateAsync:lt.mutate}}function noop$6(){}var isProduction=!0,prefix$2="Invariant failed";function invariant$1(it,tt){if(!it){if(isProduction)throw new Error(prefix$2);var rt=typeof tt=="function"?tt():tt,at=rt?"".concat(prefix$2,": ").concat(rt):prefix$2;throw new Error(at)}}const QueryClientProviderWithDefault=it=>{let{queryClient:tt,children:rt}=it;const at=react.exports.useMemo(()=>tt||new QueryClient,[tt]);return jsx(QueryClientProvider,{client:at,children:rt})},NEVER_PERSIST_QUERY_POSTFIX={persist:!1};function neverPersist(it){return[...it,NEVER_PERSIST_QUERY_POSTFIX]}function requiredParamInvariant(it,tt){invariant$1(it!==null||it!==void 0,tt)}var bn$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(it){(function(tt,rt){function at(Nt,Mt){if(!Nt)throw new Error(Mt||"Assertion failed")}function st(Nt,Mt){Nt.super_=Mt;var Lt=function(){};Lt.prototype=Mt.prototype,Nt.prototype=new Lt,Nt.prototype.constructor=Nt}function ot(Nt,Mt,Lt){if(ot.isBN(Nt))return Nt;this.negative=0,this.words=null,this.length=0,this.red=null,Nt!==null&&((Mt==="le"||Mt==="be")&&(Lt=Mt,Mt=10),this._init(Nt||0,Mt||10,Lt||"be"))}typeof tt=="object"?tt.exports=ot:rt.BN=ot,ot.BN=ot,ot.wordSize=26;var lt;try{typeof window<"u"&&typeof window.Buffer<"u"?lt=window.Buffer:lt=require$$0$5.Buffer}catch{}ot.isBN=function(Mt){return Mt instanceof ot?!0:Mt!==null&&typeof Mt=="object"&&Mt.constructor.wordSize===ot.wordSize&&Array.isArray(Mt.words)},ot.max=function(Mt,Lt){return Mt.cmp(Lt)>0?Mt:Lt},ot.min=function(Mt,Lt){return Mt.cmp(Lt)<0?Mt:Lt},ot.prototype._init=function(Mt,Lt,Ht){if(typeof Mt=="number")return this._initNumber(Mt,Lt,Ht);if(typeof Mt=="object")return this._initArray(Mt,Lt,Ht);Lt==="hex"&&(Lt=16),at(Lt===(Lt|0)&&Lt>=2&&Lt<=36),Mt=Mt.toString().replace(/\s+/g,"");var Qt=0;Mt[0]==="-"&&(Qt++,this.negative=1),Qt<Mt.length&&(Lt===16?this._parseHex(Mt,Qt,Ht):(this._parseBase(Mt,Lt,Qt),Ht==="le"&&this._initArray(this.toArray(),Lt,Ht)))},ot.prototype._initNumber=function(Mt,Lt,Ht){Mt<0&&(this.negative=1,Mt=-Mt),Mt<67108864?(this.words=[Mt&67108863],this.length=1):Mt<4503599627370496?(this.words=[Mt&67108863,Mt/67108864&67108863],this.length=2):(at(Mt<9007199254740992),this.words=[Mt&67108863,Mt/67108864&67108863,1],this.length=3),Ht==="le"&&this._initArray(this.toArray(),Lt,Ht)},ot.prototype._initArray=function(Mt,Lt,Ht){if(at(typeof Mt.length=="number"),Mt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Mt.length/3),this.words=new Array(this.length);for(var Qt=0;Qt<this.length;Qt++)this.words[Qt]=0;var Ut,Bt,Kt=0;if(Ht==="be")for(Qt=Mt.length-1,Ut=0;Qt>=0;Qt-=3)Bt=Mt[Qt]|Mt[Qt-1]<<8|Mt[Qt-2]<<16,this.words[Ut]|=Bt<<Kt&67108863,this.words[Ut+1]=Bt>>>26-Kt&67108863,Kt+=24,Kt>=26&&(Kt-=26,Ut++);else if(Ht==="le")for(Qt=0,Ut=0;Qt<Mt.length;Qt+=3)Bt=Mt[Qt]|Mt[Qt+1]<<8|Mt[Qt+2]<<16,this.words[Ut]|=Bt<<Kt&67108863,this.words[Ut+1]=Bt>>>26-Kt&67108863,Kt+=24,Kt>=26&&(Kt-=26,Ut++);return this._strip()};function ut(Nt,Mt){var Lt=Nt.charCodeAt(Mt);if(Lt>=48&&Lt<=57)return Lt-48;if(Lt>=65&&Lt<=70)return Lt-55;if(Lt>=97&&Lt<=102)return Lt-87;at(!1,"Invalid character in "+Nt)}function ht(Nt,Mt,Lt){var Ht=ut(Nt,Lt);return Lt-1>=Mt&&(Ht|=ut(Nt,Lt-1)<<4),Ht}ot.prototype._parseHex=function(Mt,Lt,Ht){this.length=Math.ceil((Mt.length-Lt)/6),this.words=new Array(this.length);for(var Qt=0;Qt<this.length;Qt++)this.words[Qt]=0;var Ut=0,Bt=0,Kt;if(Ht==="be")for(Qt=Mt.length-1;Qt>=Lt;Qt-=2)Kt=ht(Mt,Lt,Qt)<<Ut,this.words[Bt]|=Kt&67108863,Ut>=18?(Ut-=18,Bt+=1,this.words[Bt]|=Kt>>>26):Ut+=8;else{var Gt=Mt.length-Lt;for(Qt=Gt%2===0?Lt+1:Lt;Qt<Mt.length;Qt+=2)Kt=ht(Mt,Lt,Qt)<<Ut,this.words[Bt]|=Kt&67108863,Ut>=18?(Ut-=18,Bt+=1,this.words[Bt]|=Kt>>>26):Ut+=8}this._strip()};function mt(Nt,Mt,Lt,Ht){for(var Qt=0,Ut=0,Bt=Math.min(Nt.length,Lt),Kt=Mt;Kt<Bt;Kt++){var Gt=Nt.charCodeAt(Kt)-48;Qt*=Ht,Gt>=49?Ut=Gt-49+10:Gt>=17?Ut=Gt-17+10:Ut=Gt,at(Gt>=0&&Ut<Ht,"Invalid character"),Qt+=Ut}return Qt}ot.prototype._parseBase=function(Mt,Lt,Ht){this.words=[0],this.length=1;for(var Qt=0,Ut=1;Ut<=67108863;Ut*=Lt)Qt++;Qt--,Ut=Ut/Lt|0;for(var Bt=Mt.length-Ht,Kt=Bt%Qt,Gt=Math.min(Bt,Bt-Kt)+Ht,Pt=0,Zt=Ht;Zt<Gt;Zt+=Qt)Pt=mt(Mt,Zt,Zt+Qt,Lt),this.imuln(Ut),this.words[0]+Pt<67108864?this.words[0]+=Pt:this._iaddn(Pt);if(Kt!==0){var an=1;for(Pt=mt(Mt,Zt,Mt.length,Lt),Zt=0;Zt<Kt;Zt++)an*=Lt;this.imuln(an),this.words[0]+Pt<67108864?this.words[0]+=Pt:this._iaddn(Pt)}this._strip()},ot.prototype.copy=function(Mt){Mt.words=new Array(this.length);for(var Lt=0;Lt<this.length;Lt++)Mt.words[Lt]=this.words[Lt];Mt.length=this.length,Mt.negative=this.negative,Mt.red=this.red};function bt(Nt,Mt){Nt.words=Mt.words,Nt.length=Mt.length,Nt.negative=Mt.negative,Nt.red=Mt.red}if(ot.prototype._move=function(Mt){bt(Mt,this)},ot.prototype.clone=function(){var Mt=new ot(null);return this.copy(Mt),Mt},ot.prototype._expand=function(Mt){for(;this.length<Mt;)this.words[this.length++]=0;return this},ot.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ot.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=vt}catch{ot.prototype.inspect=vt}else ot.prototype.inspect=vt;function vt(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var At=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],xt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Et=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ot.prototype.toString=function(Mt,Lt){Mt=Mt||10,Lt=Lt|0||1;var Ht;if(Mt===16||Mt==="hex"){Ht="";for(var Qt=0,Ut=0,Bt=0;Bt<this.length;Bt++){var Kt=this.words[Bt],Gt=((Kt<<Qt|Ut)&16777215).toString(16);Ut=Kt>>>24-Qt&16777215,Qt+=2,Qt>=26&&(Qt-=26,Bt--),Ut!==0||Bt!==this.length-1?Ht=At[6-Gt.length]+Gt+Ht:Ht=Gt+Ht}for(Ut!==0&&(Ht=Ut.toString(16)+Ht);Ht.length%Lt!==0;)Ht="0"+Ht;return this.negative!==0&&(Ht="-"+Ht),Ht}if(Mt===(Mt|0)&&Mt>=2&&Mt<=36){var Pt=xt[Mt],Zt=Et[Mt];Ht="";var an=this.clone();for(an.negative=0;!an.isZero();){var Jt=an.modrn(Zt).toString(Mt);an=an.idivn(Zt),an.isZero()?Ht=Jt+Ht:Ht=At[Pt-Jt.length]+Jt+Ht}for(this.isZero()&&(Ht="0"+Ht);Ht.length%Lt!==0;)Ht="0"+Ht;return this.negative!==0&&(Ht="-"+Ht),Ht}at(!1,"Base should be between 2 and 36")},ot.prototype.toNumber=function(){var Mt=this.words[0];return this.length===2?Mt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Mt+=4503599627370496+this.words[1]*67108864:this.length>2&&at(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Mt:Mt},ot.prototype.toJSON=function(){return this.toString(16,2)},lt&&(ot.prototype.toBuffer=function(Mt,Lt){return this.toArrayLike(lt,Mt,Lt)}),ot.prototype.toArray=function(Mt,Lt){return this.toArrayLike(Array,Mt,Lt)};var Tt=function(Mt,Lt){return Mt.allocUnsafe?Mt.allocUnsafe(Lt):new Mt(Lt)};ot.prototype.toArrayLike=function(Mt,Lt,Ht){this._strip();var Qt=this.byteLength(),Ut=Ht||Math.max(1,Qt);at(Qt<=Ut,"byte array longer than desired length"),at(Ut>0,"Requested array length <= 0");var Bt=Tt(Mt,Ut),Kt=Lt==="le"?"LE":"BE";return this["_toArrayLike"+Kt](Bt,Qt),Bt},ot.prototype._toArrayLikeLE=function(Mt,Lt){for(var Ht=0,Qt=0,Ut=0,Bt=0;Ut<this.length;Ut++){var Kt=this.words[Ut]<<Bt|Qt;Mt[Ht++]=Kt&255,Ht<Mt.length&&(Mt[Ht++]=Kt>>8&255),Ht<Mt.length&&(Mt[Ht++]=Kt>>16&255),Bt===6?(Ht<Mt.length&&(Mt[Ht++]=Kt>>24&255),Qt=0,Bt=0):(Qt=Kt>>>24,Bt+=2)}if(Ht<Mt.length)for(Mt[Ht++]=Qt;Ht<Mt.length;)Mt[Ht++]=0},ot.prototype._toArrayLikeBE=function(Mt,Lt){for(var Ht=Mt.length-1,Qt=0,Ut=0,Bt=0;Ut<this.length;Ut++){var Kt=this.words[Ut]<<Bt|Qt;Mt[Ht--]=Kt&255,Ht>=0&&(Mt[Ht--]=Kt>>8&255),Ht>=0&&(Mt[Ht--]=Kt>>16&255),Bt===6?(Ht>=0&&(Mt[Ht--]=Kt>>24&255),Qt=0,Bt=0):(Qt=Kt>>>24,Bt+=2)}if(Ht>=0)for(Mt[Ht--]=Qt;Ht>=0;)Mt[Ht--]=0},Math.clz32?ot.prototype._countBits=function(Mt){return 32-Math.clz32(Mt)}:ot.prototype._countBits=function(Mt){var Lt=Mt,Ht=0;return Lt>=4096&&(Ht+=13,Lt>>>=13),Lt>=64&&(Ht+=7,Lt>>>=7),Lt>=8&&(Ht+=4,Lt>>>=4),Lt>=2&&(Ht+=2,Lt>>>=2),Ht+Lt},ot.prototype._zeroBits=function(Mt){if(Mt===0)return 26;var Lt=Mt,Ht=0;return(Lt&8191)===0&&(Ht+=13,Lt>>>=13),(Lt&127)===0&&(Ht+=7,Lt>>>=7),(Lt&15)===0&&(Ht+=4,Lt>>>=4),(Lt&3)===0&&(Ht+=2,Lt>>>=2),(Lt&1)===0&&Ht++,Ht},ot.prototype.bitLength=function(){var Mt=this.words[this.length-1],Lt=this._countBits(Mt);return(this.length-1)*26+Lt};function wt(Nt){for(var Mt=new Array(Nt.bitLength()),Lt=0;Lt<Mt.length;Lt++){var Ht=Lt/26|0,Qt=Lt%26;Mt[Lt]=Nt.words[Ht]>>>Qt&1}return Mt}ot.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Mt=0,Lt=0;Lt<this.length;Lt++){var Ht=this._zeroBits(this.words[Lt]);if(Mt+=Ht,Ht!==26)break}return Mt},ot.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ot.prototype.toTwos=function(Mt){return this.negative!==0?this.abs().inotn(Mt).iaddn(1):this.clone()},ot.prototype.fromTwos=function(Mt){return this.testn(Mt-1)?this.notn(Mt).iaddn(1).ineg():this.clone()},ot.prototype.isNeg=function(){return this.negative!==0},ot.prototype.neg=function(){return this.clone().ineg()},ot.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ot.prototype.iuor=function(Mt){for(;this.length<Mt.length;)this.words[this.length++]=0;for(var Lt=0;Lt<Mt.length;Lt++)this.words[Lt]=this.words[Lt]|Mt.words[Lt];return this._strip()},ot.prototype.ior=function(Mt){return at((this.negative|Mt.negative)===0),this.iuor(Mt)},ot.prototype.or=function(Mt){return this.length>Mt.length?this.clone().ior(Mt):Mt.clone().ior(this)},ot.prototype.uor=function(Mt){return this.length>Mt.length?this.clone().iuor(Mt):Mt.clone().iuor(this)},ot.prototype.iuand=function(Mt){var Lt;this.length>Mt.length?Lt=Mt:Lt=this;for(var Ht=0;Ht<Lt.length;Ht++)this.words[Ht]=this.words[Ht]&Mt.words[Ht];return this.length=Lt.length,this._strip()},ot.prototype.iand=function(Mt){return at((this.negative|Mt.negative)===0),this.iuand(Mt)},ot.prototype.and=function(Mt){return this.length>Mt.length?this.clone().iand(Mt):Mt.clone().iand(this)},ot.prototype.uand=function(Mt){return this.length>Mt.length?this.clone().iuand(Mt):Mt.clone().iuand(this)},ot.prototype.iuxor=function(Mt){var Lt,Ht;this.length>Mt.length?(Lt=this,Ht=Mt):(Lt=Mt,Ht=this);for(var Qt=0;Qt<Ht.length;Qt++)this.words[Qt]=Lt.words[Qt]^Ht.words[Qt];if(this!==Lt)for(;Qt<Lt.length;Qt++)this.words[Qt]=Lt.words[Qt];return this.length=Lt.length,this._strip()},ot.prototype.ixor=function(Mt){return at((this.negative|Mt.negative)===0),this.iuxor(Mt)},ot.prototype.xor=function(Mt){return this.length>Mt.length?this.clone().ixor(Mt):Mt.clone().ixor(this)},ot.prototype.uxor=function(Mt){return this.length>Mt.length?this.clone().iuxor(Mt):Mt.clone().iuxor(this)},ot.prototype.inotn=function(Mt){at(typeof Mt=="number"&&Mt>=0);var Lt=Math.ceil(Mt/26)|0,Ht=Mt%26;this._expand(Lt),Ht>0&&Lt--;for(var Qt=0;Qt<Lt;Qt++)this.words[Qt]=~this.words[Qt]&67108863;return Ht>0&&(this.words[Qt]=~this.words[Qt]&67108863>>26-Ht),this._strip()},ot.prototype.notn=function(Mt){return this.clone().inotn(Mt)},ot.prototype.setn=function(Mt,Lt){at(typeof Mt=="number"&&Mt>=0);var Ht=Mt/26|0,Qt=Mt%26;return this._expand(Ht+1),Lt?this.words[Ht]=this.words[Ht]|1<<Qt:this.words[Ht]=this.words[Ht]&~(1<<Qt),this._strip()},ot.prototype.iadd=function(Mt){var Lt;if(this.negative!==0&&Mt.negative===0)return this.negative=0,Lt=this.isub(Mt),this.negative^=1,this._normSign();if(this.negative===0&&Mt.negative!==0)return Mt.negative=0,Lt=this.isub(Mt),Mt.negative=1,Lt._normSign();var Ht,Qt;this.length>Mt.length?(Ht=this,Qt=Mt):(Ht=Mt,Qt=this);for(var Ut=0,Bt=0;Bt<Qt.length;Bt++)Lt=(Ht.words[Bt]|0)+(Qt.words[Bt]|0)+Ut,this.words[Bt]=Lt&67108863,Ut=Lt>>>26;for(;Ut!==0&&Bt<Ht.length;Bt++)Lt=(Ht.words[Bt]|0)+Ut,this.words[Bt]=Lt&67108863,Ut=Lt>>>26;if(this.length=Ht.length,Ut!==0)this.words[this.length]=Ut,this.length++;else if(Ht!==this)for(;Bt<Ht.length;Bt++)this.words[Bt]=Ht.words[Bt];return this},ot.prototype.add=function(Mt){var Lt;return Mt.negative!==0&&this.negative===0?(Mt.negative=0,Lt=this.sub(Mt),Mt.negative^=1,Lt):Mt.negative===0&&this.negative!==0?(this.negative=0,Lt=Mt.sub(this),this.negative=1,Lt):this.length>Mt.length?this.clone().iadd(Mt):Mt.clone().iadd(this)},ot.prototype.isub=function(Mt){if(Mt.negative!==0){Mt.negative=0;var Lt=this.iadd(Mt);return Mt.negative=1,Lt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Mt),this.negative=1,this._normSign();var Ht=this.cmp(Mt);if(Ht===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Qt,Ut;Ht>0?(Qt=this,Ut=Mt):(Qt=Mt,Ut=this);for(var Bt=0,Kt=0;Kt<Ut.length;Kt++)Lt=(Qt.words[Kt]|0)-(Ut.words[Kt]|0)+Bt,Bt=Lt>>26,this.words[Kt]=Lt&67108863;for(;Bt!==0&&Kt<Qt.length;Kt++)Lt=(Qt.words[Kt]|0)+Bt,Bt=Lt>>26,this.words[Kt]=Lt&67108863;if(Bt===0&&Kt<Qt.length&&Qt!==this)for(;Kt<Qt.length;Kt++)this.words[Kt]=Qt.words[Kt];return this.length=Math.max(this.length,Kt),Qt!==this&&(this.negative=1),this._strip()},ot.prototype.sub=function(Mt){return this.clone().isub(Mt)};function Ct(Nt,Mt,Lt){Lt.negative=Mt.negative^Nt.negative;var Ht=Nt.length+Mt.length|0;Lt.length=Ht,Ht=Ht-1|0;var Qt=Nt.words[0]|0,Ut=Mt.words[0]|0,Bt=Qt*Ut,Kt=Bt&67108863,Gt=Bt/67108864|0;Lt.words[0]=Kt;for(var Pt=1;Pt<Ht;Pt++){for(var Zt=Gt>>>26,an=Gt&67108863,Jt=Math.min(Pt,Mt.length-1),rn=Math.max(0,Pt-Nt.length+1);rn<=Jt;rn++){var fn=Pt-rn|0;Qt=Nt.words[fn]|0,Ut=Mt.words[rn]|0,Bt=Qt*Ut+an,Zt+=Bt/67108864|0,an=Bt&67108863}Lt.words[Pt]=an|0,Gt=Zt|0}return Gt!==0?Lt.words[Pt]=Gt|0:Lt.length--,Lt._strip()}var It=function(Mt,Lt,Ht){var Qt=Mt.words,Ut=Lt.words,Bt=Ht.words,Kt=0,Gt,Pt,Zt,an=Qt[0]|0,Jt=an&8191,rn=an>>>13,fn=Qt[1]|0,pn=fn&8191,vn=fn>>>13,En=Qt[2]|0,dn=En&8191,cn=En>>>13,_n=Qt[3]|0,wn=_n&8191,Ln=_n>>>13,yn=Qt[4]|0,nn=yn&8191,sn=yn>>>13,hn=Qt[5]|0,Cn=hn&8191,$n=hn>>>13,gn=Qt[6]|0,mn=gn&8191,Mn=gn>>>13,On=Qt[7]|0,Dn=On&8191,on=On>>>13,Xt=Qt[8]|0,tn=Xt&8191,un=Xt>>>13,xn=Qt[9]|0,Tn=xn&8191,In=xn>>>13,jn=Ut[0]|0,Un=jn&8191,zn=jn>>>13,Xn=Ut[1]|0,Gn=Xn&8191,Sn=Xn>>>13,Fn=Ut[2]|0,Nn=Fn&8191,Wn=Fn>>>13,Kn=Ut[3]|0,Hn=Kn&8191,Yn=Kn>>>13,dr=Ut[4]|0,tr=dr&8191,Qn=dr>>>13,mr=Ut[5]|0,Jn=mr&8191,rr=mr>>>13,hr=Ut[6]|0,er=hr&8191,ir=hr>>>13,An=Ut[7]|0,Rn=An&8191,Pn=An>>>13,kn=Ut[8]|0,Bn=kn&8191,Vn=kn>>>13,nr=Ut[9]|0,Zn=nr&8191,qn=nr>>>13;Ht.negative=Mt.negative^Lt.negative,Ht.length=19,Gt=Math.imul(Jt,Un),Pt=Math.imul(Jt,zn),Pt=Pt+Math.imul(rn,Un)|0,Zt=Math.imul(rn,zn);var cr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(cr>>>26)|0,cr&=67108863,Gt=Math.imul(pn,Un),Pt=Math.imul(pn,zn),Pt=Pt+Math.imul(vn,Un)|0,Zt=Math.imul(vn,zn),Gt=Gt+Math.imul(Jt,Gn)|0,Pt=Pt+Math.imul(Jt,Sn)|0,Pt=Pt+Math.imul(rn,Gn)|0,Zt=Zt+Math.imul(rn,Sn)|0;var ar=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(ar>>>26)|0,ar&=67108863,Gt=Math.imul(dn,Un),Pt=Math.imul(dn,zn),Pt=Pt+Math.imul(cn,Un)|0,Zt=Math.imul(cn,zn),Gt=Gt+Math.imul(pn,Gn)|0,Pt=Pt+Math.imul(pn,Sn)|0,Pt=Pt+Math.imul(vn,Gn)|0,Zt=Zt+Math.imul(vn,Sn)|0,Gt=Gt+Math.imul(Jt,Nn)|0,Pt=Pt+Math.imul(Jt,Wn)|0,Pt=Pt+Math.imul(rn,Nn)|0,Zt=Zt+Math.imul(rn,Wn)|0;var sr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(sr>>>26)|0,sr&=67108863,Gt=Math.imul(wn,Un),Pt=Math.imul(wn,zn),Pt=Pt+Math.imul(Ln,Un)|0,Zt=Math.imul(Ln,zn),Gt=Gt+Math.imul(dn,Gn)|0,Pt=Pt+Math.imul(dn,Sn)|0,Pt=Pt+Math.imul(cn,Gn)|0,Zt=Zt+Math.imul(cn,Sn)|0,Gt=Gt+Math.imul(pn,Nn)|0,Pt=Pt+Math.imul(pn,Wn)|0,Pt=Pt+Math.imul(vn,Nn)|0,Zt=Zt+Math.imul(vn,Wn)|0,Gt=Gt+Math.imul(Jt,Hn)|0,Pt=Pt+Math.imul(Jt,Yn)|0,Pt=Pt+Math.imul(rn,Hn)|0,Zt=Zt+Math.imul(rn,Yn)|0;var ur=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(ur>>>26)|0,ur&=67108863,Gt=Math.imul(nn,Un),Pt=Math.imul(nn,zn),Pt=Pt+Math.imul(sn,Un)|0,Zt=Math.imul(sn,zn),Gt=Gt+Math.imul(wn,Gn)|0,Pt=Pt+Math.imul(wn,Sn)|0,Pt=Pt+Math.imul(Ln,Gn)|0,Zt=Zt+Math.imul(Ln,Sn)|0,Gt=Gt+Math.imul(dn,Nn)|0,Pt=Pt+Math.imul(dn,Wn)|0,Pt=Pt+Math.imul(cn,Nn)|0,Zt=Zt+Math.imul(cn,Wn)|0,Gt=Gt+Math.imul(pn,Hn)|0,Pt=Pt+Math.imul(pn,Yn)|0,Pt=Pt+Math.imul(vn,Hn)|0,Zt=Zt+Math.imul(vn,Yn)|0,Gt=Gt+Math.imul(Jt,tr)|0,Pt=Pt+Math.imul(Jt,Qn)|0,Pt=Pt+Math.imul(rn,tr)|0,Zt=Zt+Math.imul(rn,Qn)|0;var yr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(yr>>>26)|0,yr&=67108863,Gt=Math.imul(Cn,Un),Pt=Math.imul(Cn,zn),Pt=Pt+Math.imul($n,Un)|0,Zt=Math.imul($n,zn),Gt=Gt+Math.imul(nn,Gn)|0,Pt=Pt+Math.imul(nn,Sn)|0,Pt=Pt+Math.imul(sn,Gn)|0,Zt=Zt+Math.imul(sn,Sn)|0,Gt=Gt+Math.imul(wn,Nn)|0,Pt=Pt+Math.imul(wn,Wn)|0,Pt=Pt+Math.imul(Ln,Nn)|0,Zt=Zt+Math.imul(Ln,Wn)|0,Gt=Gt+Math.imul(dn,Hn)|0,Pt=Pt+Math.imul(dn,Yn)|0,Pt=Pt+Math.imul(cn,Hn)|0,Zt=Zt+Math.imul(cn,Yn)|0,Gt=Gt+Math.imul(pn,tr)|0,Pt=Pt+Math.imul(pn,Qn)|0,Pt=Pt+Math.imul(vn,tr)|0,Zt=Zt+Math.imul(vn,Qn)|0,Gt=Gt+Math.imul(Jt,Jn)|0,Pt=Pt+Math.imul(Jt,rr)|0,Pt=Pt+Math.imul(rn,Jn)|0,Zt=Zt+Math.imul(rn,rr)|0;var _r=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(_r>>>26)|0,_r&=67108863,Gt=Math.imul(mn,Un),Pt=Math.imul(mn,zn),Pt=Pt+Math.imul(Mn,Un)|0,Zt=Math.imul(Mn,zn),Gt=Gt+Math.imul(Cn,Gn)|0,Pt=Pt+Math.imul(Cn,Sn)|0,Pt=Pt+Math.imul($n,Gn)|0,Zt=Zt+Math.imul($n,Sn)|0,Gt=Gt+Math.imul(nn,Nn)|0,Pt=Pt+Math.imul(nn,Wn)|0,Pt=Pt+Math.imul(sn,Nn)|0,Zt=Zt+Math.imul(sn,Wn)|0,Gt=Gt+Math.imul(wn,Hn)|0,Pt=Pt+Math.imul(wn,Yn)|0,Pt=Pt+Math.imul(Ln,Hn)|0,Zt=Zt+Math.imul(Ln,Yn)|0,Gt=Gt+Math.imul(dn,tr)|0,Pt=Pt+Math.imul(dn,Qn)|0,Pt=Pt+Math.imul(cn,tr)|0,Zt=Zt+Math.imul(cn,Qn)|0,Gt=Gt+Math.imul(pn,Jn)|0,Pt=Pt+Math.imul(pn,rr)|0,Pt=Pt+Math.imul(vn,Jn)|0,Zt=Zt+Math.imul(vn,rr)|0,Gt=Gt+Math.imul(Jt,er)|0,Pt=Pt+Math.imul(Jt,ir)|0,Pt=Pt+Math.imul(rn,er)|0,Zt=Zt+Math.imul(rn,ir)|0;var xr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(xr>>>26)|0,xr&=67108863,Gt=Math.imul(Dn,Un),Pt=Math.imul(Dn,zn),Pt=Pt+Math.imul(on,Un)|0,Zt=Math.imul(on,zn),Gt=Gt+Math.imul(mn,Gn)|0,Pt=Pt+Math.imul(mn,Sn)|0,Pt=Pt+Math.imul(Mn,Gn)|0,Zt=Zt+Math.imul(Mn,Sn)|0,Gt=Gt+Math.imul(Cn,Nn)|0,Pt=Pt+Math.imul(Cn,Wn)|0,Pt=Pt+Math.imul($n,Nn)|0,Zt=Zt+Math.imul($n,Wn)|0,Gt=Gt+Math.imul(nn,Hn)|0,Pt=Pt+Math.imul(nn,Yn)|0,Pt=Pt+Math.imul(sn,Hn)|0,Zt=Zt+Math.imul(sn,Yn)|0,Gt=Gt+Math.imul(wn,tr)|0,Pt=Pt+Math.imul(wn,Qn)|0,Pt=Pt+Math.imul(Ln,tr)|0,Zt=Zt+Math.imul(Ln,Qn)|0,Gt=Gt+Math.imul(dn,Jn)|0,Pt=Pt+Math.imul(dn,rr)|0,Pt=Pt+Math.imul(cn,Jn)|0,Zt=Zt+Math.imul(cn,rr)|0,Gt=Gt+Math.imul(pn,er)|0,Pt=Pt+Math.imul(pn,ir)|0,Pt=Pt+Math.imul(vn,er)|0,Zt=Zt+Math.imul(vn,ir)|0,Gt=Gt+Math.imul(Jt,Rn)|0,Pt=Pt+Math.imul(Jt,Pn)|0,Pt=Pt+Math.imul(rn,Rn)|0,Zt=Zt+Math.imul(rn,Pn)|0;var vr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(vr>>>26)|0,vr&=67108863,Gt=Math.imul(tn,Un),Pt=Math.imul(tn,zn),Pt=Pt+Math.imul(un,Un)|0,Zt=Math.imul(un,zn),Gt=Gt+Math.imul(Dn,Gn)|0,Pt=Pt+Math.imul(Dn,Sn)|0,Pt=Pt+Math.imul(on,Gn)|0,Zt=Zt+Math.imul(on,Sn)|0,Gt=Gt+Math.imul(mn,Nn)|0,Pt=Pt+Math.imul(mn,Wn)|0,Pt=Pt+Math.imul(Mn,Nn)|0,Zt=Zt+Math.imul(Mn,Wn)|0,Gt=Gt+Math.imul(Cn,Hn)|0,Pt=Pt+Math.imul(Cn,Yn)|0,Pt=Pt+Math.imul($n,Hn)|0,Zt=Zt+Math.imul($n,Yn)|0,Gt=Gt+Math.imul(nn,tr)|0,Pt=Pt+Math.imul(nn,Qn)|0,Pt=Pt+Math.imul(sn,tr)|0,Zt=Zt+Math.imul(sn,Qn)|0,Gt=Gt+Math.imul(wn,Jn)|0,Pt=Pt+Math.imul(wn,rr)|0,Pt=Pt+Math.imul(Ln,Jn)|0,Zt=Zt+Math.imul(Ln,rr)|0,Gt=Gt+Math.imul(dn,er)|0,Pt=Pt+Math.imul(dn,ir)|0,Pt=Pt+Math.imul(cn,er)|0,Zt=Zt+Math.imul(cn,ir)|0,Gt=Gt+Math.imul(pn,Rn)|0,Pt=Pt+Math.imul(pn,Pn)|0,Pt=Pt+Math.imul(vn,Rn)|0,Zt=Zt+Math.imul(vn,Pn)|0,Gt=Gt+Math.imul(Jt,Bn)|0,Pt=Pt+Math.imul(Jt,Vn)|0,Pt=Pt+Math.imul(rn,Bn)|0,Zt=Zt+Math.imul(rn,Vn)|0;var lr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(lr>>>26)|0,lr&=67108863,Gt=Math.imul(Tn,Un),Pt=Math.imul(Tn,zn),Pt=Pt+Math.imul(In,Un)|0,Zt=Math.imul(In,zn),Gt=Gt+Math.imul(tn,Gn)|0,Pt=Pt+Math.imul(tn,Sn)|0,Pt=Pt+Math.imul(un,Gn)|0,Zt=Zt+Math.imul(un,Sn)|0,Gt=Gt+Math.imul(Dn,Nn)|0,Pt=Pt+Math.imul(Dn,Wn)|0,Pt=Pt+Math.imul(on,Nn)|0,Zt=Zt+Math.imul(on,Wn)|0,Gt=Gt+Math.imul(mn,Hn)|0,Pt=Pt+Math.imul(mn,Yn)|0,Pt=Pt+Math.imul(Mn,Hn)|0,Zt=Zt+Math.imul(Mn,Yn)|0,Gt=Gt+Math.imul(Cn,tr)|0,Pt=Pt+Math.imul(Cn,Qn)|0,Pt=Pt+Math.imul($n,tr)|0,Zt=Zt+Math.imul($n,Qn)|0,Gt=Gt+Math.imul(nn,Jn)|0,Pt=Pt+Math.imul(nn,rr)|0,Pt=Pt+Math.imul(sn,Jn)|0,Zt=Zt+Math.imul(sn,rr)|0,Gt=Gt+Math.imul(wn,er)|0,Pt=Pt+Math.imul(wn,ir)|0,Pt=Pt+Math.imul(Ln,er)|0,Zt=Zt+Math.imul(Ln,ir)|0,Gt=Gt+Math.imul(dn,Rn)|0,Pt=Pt+Math.imul(dn,Pn)|0,Pt=Pt+Math.imul(cn,Rn)|0,Zt=Zt+Math.imul(cn,Pn)|0,Gt=Gt+Math.imul(pn,Bn)|0,Pt=Pt+Math.imul(pn,Vn)|0,Pt=Pt+Math.imul(vn,Bn)|0,Zt=Zt+Math.imul(vn,Vn)|0,Gt=Gt+Math.imul(Jt,Zn)|0,Pt=Pt+Math.imul(Jt,qn)|0,Pt=Pt+Math.imul(rn,Zn)|0,Zt=Zt+Math.imul(rn,qn)|0;var wr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(wr>>>26)|0,wr&=67108863,Gt=Math.imul(Tn,Gn),Pt=Math.imul(Tn,Sn),Pt=Pt+Math.imul(In,Gn)|0,Zt=Math.imul(In,Sn),Gt=Gt+Math.imul(tn,Nn)|0,Pt=Pt+Math.imul(tn,Wn)|0,Pt=Pt+Math.imul(un,Nn)|0,Zt=Zt+Math.imul(un,Wn)|0,Gt=Gt+Math.imul(Dn,Hn)|0,Pt=Pt+Math.imul(Dn,Yn)|0,Pt=Pt+Math.imul(on,Hn)|0,Zt=Zt+Math.imul(on,Yn)|0,Gt=Gt+Math.imul(mn,tr)|0,Pt=Pt+Math.imul(mn,Qn)|0,Pt=Pt+Math.imul(Mn,tr)|0,Zt=Zt+Math.imul(Mn,Qn)|0,Gt=Gt+Math.imul(Cn,Jn)|0,Pt=Pt+Math.imul(Cn,rr)|0,Pt=Pt+Math.imul($n,Jn)|0,Zt=Zt+Math.imul($n,rr)|0,Gt=Gt+Math.imul(nn,er)|0,Pt=Pt+Math.imul(nn,ir)|0,Pt=Pt+Math.imul(sn,er)|0,Zt=Zt+Math.imul(sn,ir)|0,Gt=Gt+Math.imul(wn,Rn)|0,Pt=Pt+Math.imul(wn,Pn)|0,Pt=Pt+Math.imul(Ln,Rn)|0,Zt=Zt+Math.imul(Ln,Pn)|0,Gt=Gt+Math.imul(dn,Bn)|0,Pt=Pt+Math.imul(dn,Vn)|0,Pt=Pt+Math.imul(cn,Bn)|0,Zt=Zt+Math.imul(cn,Vn)|0,Gt=Gt+Math.imul(pn,Zn)|0,Pt=Pt+Math.imul(pn,qn)|0,Pt=Pt+Math.imul(vn,Zn)|0,Zt=Zt+Math.imul(vn,qn)|0;var pr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(pr>>>26)|0,pr&=67108863,Gt=Math.imul(Tn,Nn),Pt=Math.imul(Tn,Wn),Pt=Pt+Math.imul(In,Nn)|0,Zt=Math.imul(In,Wn),Gt=Gt+Math.imul(tn,Hn)|0,Pt=Pt+Math.imul(tn,Yn)|0,Pt=Pt+Math.imul(un,Hn)|0,Zt=Zt+Math.imul(un,Yn)|0,Gt=Gt+Math.imul(Dn,tr)|0,Pt=Pt+Math.imul(Dn,Qn)|0,Pt=Pt+Math.imul(on,tr)|0,Zt=Zt+Math.imul(on,Qn)|0,Gt=Gt+Math.imul(mn,Jn)|0,Pt=Pt+Math.imul(mn,rr)|0,Pt=Pt+Math.imul(Mn,Jn)|0,Zt=Zt+Math.imul(Mn,rr)|0,Gt=Gt+Math.imul(Cn,er)|0,Pt=Pt+Math.imul(Cn,ir)|0,Pt=Pt+Math.imul($n,er)|0,Zt=Zt+Math.imul($n,ir)|0,Gt=Gt+Math.imul(nn,Rn)|0,Pt=Pt+Math.imul(nn,Pn)|0,Pt=Pt+Math.imul(sn,Rn)|0,Zt=Zt+Math.imul(sn,Pn)|0,Gt=Gt+Math.imul(wn,Bn)|0,Pt=Pt+Math.imul(wn,Vn)|0,Pt=Pt+Math.imul(Ln,Bn)|0,Zt=Zt+Math.imul(Ln,Vn)|0,Gt=Gt+Math.imul(dn,Zn)|0,Pt=Pt+Math.imul(dn,qn)|0,Pt=Pt+Math.imul(cn,Zn)|0,Zt=Zt+Math.imul(cn,qn)|0;var gr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(gr>>>26)|0,gr&=67108863,Gt=Math.imul(Tn,Hn),Pt=Math.imul(Tn,Yn),Pt=Pt+Math.imul(In,Hn)|0,Zt=Math.imul(In,Yn),Gt=Gt+Math.imul(tn,tr)|0,Pt=Pt+Math.imul(tn,Qn)|0,Pt=Pt+Math.imul(un,tr)|0,Zt=Zt+Math.imul(un,Qn)|0,Gt=Gt+Math.imul(Dn,Jn)|0,Pt=Pt+Math.imul(Dn,rr)|0,Pt=Pt+Math.imul(on,Jn)|0,Zt=Zt+Math.imul(on,rr)|0,Gt=Gt+Math.imul(mn,er)|0,Pt=Pt+Math.imul(mn,ir)|0,Pt=Pt+Math.imul(Mn,er)|0,Zt=Zt+Math.imul(Mn,ir)|0,Gt=Gt+Math.imul(Cn,Rn)|0,Pt=Pt+Math.imul(Cn,Pn)|0,Pt=Pt+Math.imul($n,Rn)|0,Zt=Zt+Math.imul($n,Pn)|0,Gt=Gt+Math.imul(nn,Bn)|0,Pt=Pt+Math.imul(nn,Vn)|0,Pt=Pt+Math.imul(sn,Bn)|0,Zt=Zt+Math.imul(sn,Vn)|0,Gt=Gt+Math.imul(wn,Zn)|0,Pt=Pt+Math.imul(wn,qn)|0,Pt=Pt+Math.imul(Ln,Zn)|0,Zt=Zt+Math.imul(Ln,qn)|0;var Ar=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,Gt=Math.imul(Tn,tr),Pt=Math.imul(Tn,Qn),Pt=Pt+Math.imul(In,tr)|0,Zt=Math.imul(In,Qn),Gt=Gt+Math.imul(tn,Jn)|0,Pt=Pt+Math.imul(tn,rr)|0,Pt=Pt+Math.imul(un,Jn)|0,Zt=Zt+Math.imul(un,rr)|0,Gt=Gt+Math.imul(Dn,er)|0,Pt=Pt+Math.imul(Dn,ir)|0,Pt=Pt+Math.imul(on,er)|0,Zt=Zt+Math.imul(on,ir)|0,Gt=Gt+Math.imul(mn,Rn)|0,Pt=Pt+Math.imul(mn,Pn)|0,Pt=Pt+Math.imul(Mn,Rn)|0,Zt=Zt+Math.imul(Mn,Pn)|0,Gt=Gt+Math.imul(Cn,Bn)|0,Pt=Pt+Math.imul(Cn,Vn)|0,Pt=Pt+Math.imul($n,Bn)|0,Zt=Zt+Math.imul($n,Vn)|0,Gt=Gt+Math.imul(nn,Zn)|0,Pt=Pt+Math.imul(nn,qn)|0,Pt=Pt+Math.imul(sn,Zn)|0,Zt=Zt+Math.imul(sn,qn)|0;var Tr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,Gt=Math.imul(Tn,Jn),Pt=Math.imul(Tn,rr),Pt=Pt+Math.imul(In,Jn)|0,Zt=Math.imul(In,rr),Gt=Gt+Math.imul(tn,er)|0,Pt=Pt+Math.imul(tn,ir)|0,Pt=Pt+Math.imul(un,er)|0,Zt=Zt+Math.imul(un,ir)|0,Gt=Gt+Math.imul(Dn,Rn)|0,Pt=Pt+Math.imul(Dn,Pn)|0,Pt=Pt+Math.imul(on,Rn)|0,Zt=Zt+Math.imul(on,Pn)|0,Gt=Gt+Math.imul(mn,Bn)|0,Pt=Pt+Math.imul(mn,Vn)|0,Pt=Pt+Math.imul(Mn,Bn)|0,Zt=Zt+Math.imul(Mn,Vn)|0,Gt=Gt+Math.imul(Cn,Zn)|0,Pt=Pt+Math.imul(Cn,qn)|0,Pt=Pt+Math.imul($n,Zn)|0,Zt=Zt+Math.imul($n,qn)|0;var Cr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,Gt=Math.imul(Tn,er),Pt=Math.imul(Tn,ir),Pt=Pt+Math.imul(In,er)|0,Zt=Math.imul(In,ir),Gt=Gt+Math.imul(tn,Rn)|0,Pt=Pt+Math.imul(tn,Pn)|0,Pt=Pt+Math.imul(un,Rn)|0,Zt=Zt+Math.imul(un,Pn)|0,Gt=Gt+Math.imul(Dn,Bn)|0,Pt=Pt+Math.imul(Dn,Vn)|0,Pt=Pt+Math.imul(on,Bn)|0,Zt=Zt+Math.imul(on,Vn)|0,Gt=Gt+Math.imul(mn,Zn)|0,Pt=Pt+Math.imul(mn,qn)|0,Pt=Pt+Math.imul(Mn,Zn)|0,Zt=Zt+Math.imul(Mn,qn)|0;var br=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(br>>>26)|0,br&=67108863,Gt=Math.imul(Tn,Rn),Pt=Math.imul(Tn,Pn),Pt=Pt+Math.imul(In,Rn)|0,Zt=Math.imul(In,Pn),Gt=Gt+Math.imul(tn,Bn)|0,Pt=Pt+Math.imul(tn,Vn)|0,Pt=Pt+Math.imul(un,Bn)|0,Zt=Zt+Math.imul(un,Vn)|0,Gt=Gt+Math.imul(Dn,Zn)|0,Pt=Pt+Math.imul(Dn,qn)|0,Pt=Pt+Math.imul(on,Zn)|0,Zt=Zt+Math.imul(on,qn)|0;var Sr=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,Gt=Math.imul(Tn,Bn),Pt=Math.imul(Tn,Vn),Pt=Pt+Math.imul(In,Bn)|0,Zt=Math.imul(In,Vn),Gt=Gt+Math.imul(tn,Zn)|0,Pt=Pt+Math.imul(tn,qn)|0,Pt=Pt+Math.imul(un,Zn)|0,Zt=Zt+Math.imul(un,qn)|0;var Ir=(Kt+Gt|0)+((Pt&8191)<<13)|0;Kt=(Zt+(Pt>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,Gt=Math.imul(Tn,Zn),Pt=Math.imul(Tn,qn),Pt=Pt+Math.imul(In,Zn)|0,Zt=Math.imul(In,qn);var Er=(Kt+Gt|0)+((Pt&8191)<<13)|0;return Kt=(Zt+(Pt>>>13)|0)+(Er>>>26)|0,Er&=67108863,Bt[0]=cr,Bt[1]=ar,Bt[2]=sr,Bt[3]=ur,Bt[4]=yr,Bt[5]=_r,Bt[6]=xr,Bt[7]=vr,Bt[8]=lr,Bt[9]=wr,Bt[10]=pr,Bt[11]=gr,Bt[12]=Ar,Bt[13]=Tr,Bt[14]=Cr,Bt[15]=br,Bt[16]=Sr,Bt[17]=Ir,Bt[18]=Er,Kt!==0&&(Bt[19]=Kt,Ht.length++),Ht};Math.imul||(It=Ct);function St(Nt,Mt,Lt){Lt.negative=Mt.negative^Nt.negative,Lt.length=Nt.length+Mt.length;for(var Ht=0,Qt=0,Ut=0;Ut<Lt.length-1;Ut++){var Bt=Qt;Qt=0;for(var Kt=Ht&67108863,Gt=Math.min(Ut,Mt.length-1),Pt=Math.max(0,Ut-Nt.length+1);Pt<=Gt;Pt++){var Zt=Ut-Pt,an=Nt.words[Zt]|0,Jt=Mt.words[Pt]|0,rn=an*Jt,fn=rn&67108863;Bt=Bt+(rn/67108864|0)|0,fn=fn+Kt|0,Kt=fn&67108863,Bt=Bt+(fn>>>26)|0,Qt+=Bt>>>26,Bt&=67108863}Lt.words[Ut]=Kt,Ht=Bt,Bt=Qt}return Ht!==0?Lt.words[Ut]=Ht:Lt.length--,Lt._strip()}function Rt(Nt,Mt,Lt){return St(Nt,Mt,Lt)}ot.prototype.mulTo=function(Mt,Lt){var Ht,Qt=this.length+Mt.length;return this.length===10&&Mt.length===10?Ht=It(this,Mt,Lt):Qt<63?Ht=Ct(this,Mt,Lt):Qt<1024?Ht=St(this,Mt,Lt):Ht=Rt(this,Mt,Lt),Ht},ot.prototype.mul=function(Mt){var Lt=new ot(null);return Lt.words=new Array(this.length+Mt.length),this.mulTo(Mt,Lt)},ot.prototype.mulf=function(Mt){var Lt=new ot(null);return Lt.words=new Array(this.length+Mt.length),Rt(this,Mt,Lt)},ot.prototype.imul=function(Mt){return this.clone().mulTo(Mt,this)},ot.prototype.imuln=function(Mt){var Lt=Mt<0;Lt&&(Mt=-Mt),at(typeof Mt=="number"),at(Mt<67108864);for(var Ht=0,Qt=0;Qt<this.length;Qt++){var Ut=(this.words[Qt]|0)*Mt,Bt=(Ut&67108863)+(Ht&67108863);Ht>>=26,Ht+=Ut/67108864|0,Ht+=Bt>>>26,this.words[Qt]=Bt&67108863}return Ht!==0&&(this.words[Qt]=Ht,this.length++),Lt?this.ineg():this},ot.prototype.muln=function(Mt){return this.clone().imuln(Mt)},ot.prototype.sqr=function(){return this.mul(this)},ot.prototype.isqr=function(){return this.imul(this.clone())},ot.prototype.pow=function(Mt){var Lt=wt(Mt);if(Lt.length===0)return new ot(1);for(var Ht=this,Qt=0;Qt<Lt.length&&Lt[Qt]===0;Qt++,Ht=Ht.sqr());if(++Qt<Lt.length)for(var Ut=Ht.sqr();Qt<Lt.length;Qt++,Ut=Ut.sqr())Lt[Qt]!==0&&(Ht=Ht.mul(Ut));return Ht},ot.prototype.iushln=function(Mt){at(typeof Mt=="number"&&Mt>=0);var Lt=Mt%26,Ht=(Mt-Lt)/26,Qt=67108863>>>26-Lt<<26-Lt,Ut;if(Lt!==0){var Bt=0;for(Ut=0;Ut<this.length;Ut++){var Kt=this.words[Ut]&Qt,Gt=(this.words[Ut]|0)-Kt<<Lt;this.words[Ut]=Gt|Bt,Bt=Kt>>>26-Lt}Bt&&(this.words[Ut]=Bt,this.length++)}if(Ht!==0){for(Ut=this.length-1;Ut>=0;Ut--)this.words[Ut+Ht]=this.words[Ut];for(Ut=0;Ut<Ht;Ut++)this.words[Ut]=0;this.length+=Ht}return this._strip()},ot.prototype.ishln=function(Mt){return at(this.negative===0),this.iushln(Mt)},ot.prototype.iushrn=function(Mt,Lt,Ht){at(typeof Mt=="number"&&Mt>=0);var Qt;Lt?Qt=(Lt-Lt%26)/26:Qt=0;var Ut=Mt%26,Bt=Math.min((Mt-Ut)/26,this.length),Kt=67108863^67108863>>>Ut<<Ut,Gt=Ht;if(Qt-=Bt,Qt=Math.max(0,Qt),Gt){for(var Pt=0;Pt<Bt;Pt++)Gt.words[Pt]=this.words[Pt];Gt.length=Bt}if(Bt!==0)if(this.length>Bt)for(this.length-=Bt,Pt=0;Pt<this.length;Pt++)this.words[Pt]=this.words[Pt+Bt];else this.words[0]=0,this.length=1;var Zt=0;for(Pt=this.length-1;Pt>=0&&(Zt!==0||Pt>=Qt);Pt--){var an=this.words[Pt]|0;this.words[Pt]=Zt<<26-Ut|an>>>Ut,Zt=an&Kt}return Gt&&Zt!==0&&(Gt.words[Gt.length++]=Zt),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},ot.prototype.ishrn=function(Mt,Lt,Ht){return at(this.negative===0),this.iushrn(Mt,Lt,Ht)},ot.prototype.shln=function(Mt){return this.clone().ishln(Mt)},ot.prototype.ushln=function(Mt){return this.clone().iushln(Mt)},ot.prototype.shrn=function(Mt){return this.clone().ishrn(Mt)},ot.prototype.ushrn=function(Mt){return this.clone().iushrn(Mt)},ot.prototype.testn=function(Mt){at(typeof Mt=="number"&&Mt>=0);var Lt=Mt%26,Ht=(Mt-Lt)/26,Qt=1<<Lt;if(this.length<=Ht)return!1;var Ut=this.words[Ht];return!!(Ut&Qt)},ot.prototype.imaskn=function(Mt){at(typeof Mt=="number"&&Mt>=0);var Lt=Mt%26,Ht=(Mt-Lt)/26;if(at(this.negative===0,"imaskn works only with positive numbers"),this.length<=Ht)return this;if(Lt!==0&&Ht++,this.length=Math.min(Ht,this.length),Lt!==0){var Qt=67108863^67108863>>>Lt<<Lt;this.words[this.length-1]&=Qt}return this._strip()},ot.prototype.maskn=function(Mt){return this.clone().imaskn(Mt)},ot.prototype.iaddn=function(Mt){return at(typeof Mt=="number"),at(Mt<67108864),Mt<0?this.isubn(-Mt):this.negative!==0?this.length===1&&(this.words[0]|0)<=Mt?(this.words[0]=Mt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Mt),this.negative=1,this):this._iaddn(Mt)},ot.prototype._iaddn=function(Mt){this.words[0]+=Mt;for(var Lt=0;Lt<this.length&&this.words[Lt]>=67108864;Lt++)this.words[Lt]-=67108864,Lt===this.length-1?this.words[Lt+1]=1:this.words[Lt+1]++;return this.length=Math.max(this.length,Lt+1),this},ot.prototype.isubn=function(Mt){if(at(typeof Mt=="number"),at(Mt<67108864),Mt<0)return this.iaddn(-Mt);if(this.negative!==0)return this.negative=0,this.iaddn(Mt),this.negative=1,this;if(this.words[0]-=Mt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Lt=0;Lt<this.length&&this.words[Lt]<0;Lt++)this.words[Lt]+=67108864,this.words[Lt+1]-=1;return this._strip()},ot.prototype.addn=function(Mt){return this.clone().iaddn(Mt)},ot.prototype.subn=function(Mt){return this.clone().isubn(Mt)},ot.prototype.iabs=function(){return this.negative=0,this},ot.prototype.abs=function(){return this.clone().iabs()},ot.prototype._ishlnsubmul=function(Mt,Lt,Ht){var Qt=Mt.length+Ht,Ut;this._expand(Qt);var Bt,Kt=0;for(Ut=0;Ut<Mt.length;Ut++){Bt=(this.words[Ut+Ht]|0)+Kt;var Gt=(Mt.words[Ut]|0)*Lt;Bt-=Gt&67108863,Kt=(Bt>>26)-(Gt/67108864|0),this.words[Ut+Ht]=Bt&67108863}for(;Ut<this.length-Ht;Ut++)Bt=(this.words[Ut+Ht]|0)+Kt,Kt=Bt>>26,this.words[Ut+Ht]=Bt&67108863;if(Kt===0)return this._strip();for(at(Kt===-1),Kt=0,Ut=0;Ut<this.length;Ut++)Bt=-(this.words[Ut]|0)+Kt,Kt=Bt>>26,this.words[Ut]=Bt&67108863;return this.negative=1,this._strip()},ot.prototype._wordDiv=function(Mt,Lt){var Ht=this.length-Mt.length,Qt=this.clone(),Ut=Mt,Bt=Ut.words[Ut.length-1]|0,Kt=this._countBits(Bt);Ht=26-Kt,Ht!==0&&(Ut=Ut.ushln(Ht),Qt.iushln(Ht),Bt=Ut.words[Ut.length-1]|0);var Gt=Qt.length-Ut.length,Pt;if(Lt!=="mod"){Pt=new ot(null),Pt.length=Gt+1,Pt.words=new Array(Pt.length);for(var Zt=0;Zt<Pt.length;Zt++)Pt.words[Zt]=0}var an=Qt.clone()._ishlnsubmul(Ut,1,Gt);an.negative===0&&(Qt=an,Pt&&(Pt.words[Gt]=1));for(var Jt=Gt-1;Jt>=0;Jt--){var rn=(Qt.words[Ut.length+Jt]|0)*67108864+(Qt.words[Ut.length+Jt-1]|0);for(rn=Math.min(rn/Bt|0,67108863),Qt._ishlnsubmul(Ut,rn,Jt);Qt.negative!==0;)rn--,Qt.negative=0,Qt._ishlnsubmul(Ut,1,Jt),Qt.isZero()||(Qt.negative^=1);Pt&&(Pt.words[Jt]=rn)}return Pt&&Pt._strip(),Qt._strip(),Lt!=="div"&&Ht!==0&&Qt.iushrn(Ht),{div:Pt||null,mod:Qt}},ot.prototype.divmod=function(Mt,Lt,Ht){if(at(!Mt.isZero()),this.isZero())return{div:new ot(0),mod:new ot(0)};var Qt,Ut,Bt;return this.negative!==0&&Mt.negative===0?(Bt=this.neg().divmod(Mt,Lt),Lt!=="mod"&&(Qt=Bt.div.neg()),Lt!=="div"&&(Ut=Bt.mod.neg(),Ht&&Ut.negative!==0&&Ut.iadd(Mt)),{div:Qt,mod:Ut}):this.negative===0&&Mt.negative!==0?(Bt=this.divmod(Mt.neg(),Lt),Lt!=="mod"&&(Qt=Bt.div.neg()),{div:Qt,mod:Bt.mod}):(this.negative&Mt.negative)!==0?(Bt=this.neg().divmod(Mt.neg(),Lt),Lt!=="div"&&(Ut=Bt.mod.neg(),Ht&&Ut.negative!==0&&Ut.isub(Mt)),{div:Bt.div,mod:Ut}):Mt.length>this.length||this.cmp(Mt)<0?{div:new ot(0),mod:this}:Mt.length===1?Lt==="div"?{div:this.divn(Mt.words[0]),mod:null}:Lt==="mod"?{div:null,mod:new ot(this.modrn(Mt.words[0]))}:{div:this.divn(Mt.words[0]),mod:new ot(this.modrn(Mt.words[0]))}:this._wordDiv(Mt,Lt)},ot.prototype.div=function(Mt){return this.divmod(Mt,"div",!1).div},ot.prototype.mod=function(Mt){return this.divmod(Mt,"mod",!1).mod},ot.prototype.umod=function(Mt){return this.divmod(Mt,"mod",!0).mod},ot.prototype.divRound=function(Mt){var Lt=this.divmod(Mt);if(Lt.mod.isZero())return Lt.div;var Ht=Lt.div.negative!==0?Lt.mod.isub(Mt):Lt.mod,Qt=Mt.ushrn(1),Ut=Mt.andln(1),Bt=Ht.cmp(Qt);return Bt<0||Ut===1&&Bt===0?Lt.div:Lt.div.negative!==0?Lt.div.isubn(1):Lt.div.iaddn(1)},ot.prototype.modrn=function(Mt){var Lt=Mt<0;Lt&&(Mt=-Mt),at(Mt<=67108863);for(var Ht=(1<<26)%Mt,Qt=0,Ut=this.length-1;Ut>=0;Ut--)Qt=(Ht*Qt+(this.words[Ut]|0))%Mt;return Lt?-Qt:Qt},ot.prototype.modn=function(Mt){return this.modrn(Mt)},ot.prototype.idivn=function(Mt){var Lt=Mt<0;Lt&&(Mt=-Mt),at(Mt<=67108863);for(var Ht=0,Qt=this.length-1;Qt>=0;Qt--){var Ut=(this.words[Qt]|0)+Ht*67108864;this.words[Qt]=Ut/Mt|0,Ht=Ut%Mt}return this._strip(),Lt?this.ineg():this},ot.prototype.divn=function(Mt){return this.clone().idivn(Mt)},ot.prototype.egcd=function(Mt){at(Mt.negative===0),at(!Mt.isZero());var Lt=this,Ht=Mt.clone();Lt.negative!==0?Lt=Lt.umod(Mt):Lt=Lt.clone();for(var Qt=new ot(1),Ut=new ot(0),Bt=new ot(0),Kt=new ot(1),Gt=0;Lt.isEven()&&Ht.isEven();)Lt.iushrn(1),Ht.iushrn(1),++Gt;for(var Pt=Ht.clone(),Zt=Lt.clone();!Lt.isZero();){for(var an=0,Jt=1;(Lt.words[0]&Jt)===0&&an<26;++an,Jt<<=1);if(an>0)for(Lt.iushrn(an);an-- >0;)(Qt.isOdd()||Ut.isOdd())&&(Qt.iadd(Pt),Ut.isub(Zt)),Qt.iushrn(1),Ut.iushrn(1);for(var rn=0,fn=1;(Ht.words[0]&fn)===0&&rn<26;++rn,fn<<=1);if(rn>0)for(Ht.iushrn(rn);rn-- >0;)(Bt.isOdd()||Kt.isOdd())&&(Bt.iadd(Pt),Kt.isub(Zt)),Bt.iushrn(1),Kt.iushrn(1);Lt.cmp(Ht)>=0?(Lt.isub(Ht),Qt.isub(Bt),Ut.isub(Kt)):(Ht.isub(Lt),Bt.isub(Qt),Kt.isub(Ut))}return{a:Bt,b:Kt,gcd:Ht.iushln(Gt)}},ot.prototype._invmp=function(Mt){at(Mt.negative===0),at(!Mt.isZero());var Lt=this,Ht=Mt.clone();Lt.negative!==0?Lt=Lt.umod(Mt):Lt=Lt.clone();for(var Qt=new ot(1),Ut=new ot(0),Bt=Ht.clone();Lt.cmpn(1)>0&&Ht.cmpn(1)>0;){for(var Kt=0,Gt=1;(Lt.words[0]&Gt)===0&&Kt<26;++Kt,Gt<<=1);if(Kt>0)for(Lt.iushrn(Kt);Kt-- >0;)Qt.isOdd()&&Qt.iadd(Bt),Qt.iushrn(1);for(var Pt=0,Zt=1;(Ht.words[0]&Zt)===0&&Pt<26;++Pt,Zt<<=1);if(Pt>0)for(Ht.iushrn(Pt);Pt-- >0;)Ut.isOdd()&&Ut.iadd(Bt),Ut.iushrn(1);Lt.cmp(Ht)>=0?(Lt.isub(Ht),Qt.isub(Ut)):(Ht.isub(Lt),Ut.isub(Qt))}var an;return Lt.cmpn(1)===0?an=Qt:an=Ut,an.cmpn(0)<0&&an.iadd(Mt),an},ot.prototype.gcd=function(Mt){if(this.isZero())return Mt.abs();if(Mt.isZero())return this.abs();var Lt=this.clone(),Ht=Mt.clone();Lt.negative=0,Ht.negative=0;for(var Qt=0;Lt.isEven()&&Ht.isEven();Qt++)Lt.iushrn(1),Ht.iushrn(1);do{for(;Lt.isEven();)Lt.iushrn(1);for(;Ht.isEven();)Ht.iushrn(1);var Ut=Lt.cmp(Ht);if(Ut<0){var Bt=Lt;Lt=Ht,Ht=Bt}else if(Ut===0||Ht.cmpn(1)===0)break;Lt.isub(Ht)}while(!0);return Ht.iushln(Qt)},ot.prototype.invm=function(Mt){return this.egcd(Mt).a.umod(Mt)},ot.prototype.isEven=function(){return(this.words[0]&1)===0},ot.prototype.isOdd=function(){return(this.words[0]&1)===1},ot.prototype.andln=function(Mt){return this.words[0]&Mt},ot.prototype.bincn=function(Mt){at(typeof Mt=="number");var Lt=Mt%26,Ht=(Mt-Lt)/26,Qt=1<<Lt;if(this.length<=Ht)return this._expand(Ht+1),this.words[Ht]|=Qt,this;for(var Ut=Qt,Bt=Ht;Ut!==0&&Bt<this.length;Bt++){var Kt=this.words[Bt]|0;Kt+=Ut,Ut=Kt>>>26,Kt&=67108863,this.words[Bt]=Kt}return Ut!==0&&(this.words[Bt]=Ut,this.length++),this},ot.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ot.prototype.cmpn=function(Mt){var Lt=Mt<0;if(this.negative!==0&&!Lt)return-1;if(this.negative===0&&Lt)return 1;this._strip();var Ht;if(this.length>1)Ht=1;else{Lt&&(Mt=-Mt),at(Mt<=67108863,"Number is too big");var Qt=this.words[0]|0;Ht=Qt===Mt?0:Qt<Mt?-1:1}return this.negative!==0?-Ht|0:Ht},ot.prototype.cmp=function(Mt){if(this.negative!==0&&Mt.negative===0)return-1;if(this.negative===0&&Mt.negative!==0)return 1;var Lt=this.ucmp(Mt);return this.negative!==0?-Lt|0:Lt},ot.prototype.ucmp=function(Mt){if(this.length>Mt.length)return 1;if(this.length<Mt.length)return-1;for(var Lt=0,Ht=this.length-1;Ht>=0;Ht--){var Qt=this.words[Ht]|0,Ut=Mt.words[Ht]|0;if(Qt!==Ut){Qt<Ut?Lt=-1:Qt>Ut&&(Lt=1);break}}return Lt},ot.prototype.gtn=function(Mt){return this.cmpn(Mt)===1},ot.prototype.gt=function(Mt){return this.cmp(Mt)===1},ot.prototype.gten=function(Mt){return this.cmpn(Mt)>=0},ot.prototype.gte=function(Mt){return this.cmp(Mt)>=0},ot.prototype.ltn=function(Mt){return this.cmpn(Mt)===-1},ot.prototype.lt=function(Mt){return this.cmp(Mt)===-1},ot.prototype.lten=function(Mt){return this.cmpn(Mt)<=0},ot.prototype.lte=function(Mt){return this.cmp(Mt)<=0},ot.prototype.eqn=function(Mt){return this.cmpn(Mt)===0},ot.prototype.eq=function(Mt){return this.cmp(Mt)===0},ot.red=function(Mt){return new kt(Mt)},ot.prototype.toRed=function(Mt){return at(!this.red,"Already a number in reduction context"),at(this.negative===0,"red works only with positives"),Mt.convertTo(this)._forceRed(Mt)},ot.prototype.fromRed=function(){return at(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ot.prototype._forceRed=function(Mt){return this.red=Mt,this},ot.prototype.forceRed=function(Mt){return at(!this.red,"Already a number in reduction context"),this._forceRed(Mt)},ot.prototype.redAdd=function(Mt){return at(this.red,"redAdd works only with red numbers"),this.red.add(this,Mt)},ot.prototype.redIAdd=function(Mt){return at(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Mt)},ot.prototype.redSub=function(Mt){return at(this.red,"redSub works only with red numbers"),this.red.sub(this,Mt)},ot.prototype.redISub=function(Mt){return at(this.red,"redISub works only with red numbers"),this.red.isub(this,Mt)},ot.prototype.redShl=function(Mt){return at(this.red,"redShl works only with red numbers"),this.red.shl(this,Mt)},ot.prototype.redMul=function(Mt){return at(this.red,"redMul works only with red numbers"),this.red._verify2(this,Mt),this.red.mul(this,Mt)},ot.prototype.redIMul=function(Mt){return at(this.red,"redMul works only with red numbers"),this.red._verify2(this,Mt),this.red.imul(this,Mt)},ot.prototype.redSqr=function(){return at(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ot.prototype.redISqr=function(){return at(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ot.prototype.redSqrt=function(){return at(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ot.prototype.redInvm=function(){return at(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ot.prototype.redNeg=function(){return at(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ot.prototype.redPow=function(Mt){return at(this.red&&!Mt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Mt)};var Dt={k256:null,p224:null,p192:null,p25519:null};function Wt(Nt,Mt){this.name=Nt,this.p=new ot(Mt,16),this.n=this.p.bitLength(),this.k=new ot(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Wt.prototype._tmp=function(){var Mt=new ot(null);return Mt.words=new Array(Math.ceil(this.n/13)),Mt},Wt.prototype.ireduce=function(Mt){var Lt=Mt,Ht;do this.split(Lt,this.tmp),Lt=this.imulK(Lt),Lt=Lt.iadd(this.tmp),Ht=Lt.bitLength();while(Ht>this.n);var Qt=Ht<this.n?-1:Lt.ucmp(this.p);return Qt===0?(Lt.words[0]=0,Lt.length=1):Qt>0?Lt.isub(this.p):Lt.strip!==void 0?Lt.strip():Lt._strip(),Lt},Wt.prototype.split=function(Mt,Lt){Mt.iushrn(this.n,0,Lt)},Wt.prototype.imulK=function(Mt){return Mt.imul(this.k)};function qt(){Wt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}st(qt,Wt),qt.prototype.split=function(Mt,Lt){for(var Ht=4194303,Qt=Math.min(Mt.length,9),Ut=0;Ut<Qt;Ut++)Lt.words[Ut]=Mt.words[Ut];if(Lt.length=Qt,Mt.length<=9){Mt.words[0]=0,Mt.length=1;return}var Bt=Mt.words[9];for(Lt.words[Lt.length++]=Bt&Ht,Ut=10;Ut<Mt.length;Ut++){var Kt=Mt.words[Ut]|0;Mt.words[Ut-10]=(Kt&Ht)<<4|Bt>>>22,Bt=Kt}Bt>>>=22,Mt.words[Ut-10]=Bt,Bt===0&&Mt.length>10?Mt.length-=10:Mt.length-=9},qt.prototype.imulK=function(Mt){Mt.words[Mt.length]=0,Mt.words[Mt.length+1]=0,Mt.length+=2;for(var Lt=0,Ht=0;Ht<Mt.length;Ht++){var Qt=Mt.words[Ht]|0;Lt+=Qt*977,Mt.words[Ht]=Lt&67108863,Lt=Qt*64+(Lt/67108864|0)}return Mt.words[Mt.length-1]===0&&(Mt.length--,Mt.words[Mt.length-1]===0&&Mt.length--),Mt};function Vt(){Wt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}st(Vt,Wt);function Yt(){Wt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}st(Yt,Wt);function jt(){Wt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}st(jt,Wt),jt.prototype.imulK=function(Mt){for(var Lt=0,Ht=0;Ht<Mt.length;Ht++){var Qt=(Mt.words[Ht]|0)*19+Lt,Ut=Qt&67108863;Qt>>>=26,Mt.words[Ht]=Ut,Lt=Qt}return Lt!==0&&(Mt.words[Mt.length++]=Lt),Mt},ot._prime=function(Mt){if(Dt[Mt])return Dt[Mt];var Lt;if(Mt==="k256")Lt=new qt;else if(Mt==="p224")Lt=new Vt;else if(Mt==="p192")Lt=new Yt;else if(Mt==="p25519")Lt=new jt;else throw new Error("Unknown prime "+Mt);return Dt[Mt]=Lt,Lt};function kt(Nt){if(typeof Nt=="string"){var Mt=ot._prime(Nt);this.m=Mt.p,this.prime=Mt}else at(Nt.gtn(1),"modulus must be greater than 1"),this.m=Nt,this.prime=null}kt.prototype._verify1=function(Mt){at(Mt.negative===0,"red works only with positives"),at(Mt.red,"red works only with red numbers")},kt.prototype._verify2=function(Mt,Lt){at((Mt.negative|Lt.negative)===0,"red works only with positives"),at(Mt.red&&Mt.red===Lt.red,"red works only with red numbers")},kt.prototype.imod=function(Mt){return this.prime?this.prime.ireduce(Mt)._forceRed(this):(bt(Mt,Mt.umod(this.m)._forceRed(this)),Mt)},kt.prototype.neg=function(Mt){return Mt.isZero()?Mt.clone():this.m.sub(Mt)._forceRed(this)},kt.prototype.add=function(Mt,Lt){this._verify2(Mt,Lt);var Ht=Mt.add(Lt);return Ht.cmp(this.m)>=0&&Ht.isub(this.m),Ht._forceRed(this)},kt.prototype.iadd=function(Mt,Lt){this._verify2(Mt,Lt);var Ht=Mt.iadd(Lt);return Ht.cmp(this.m)>=0&&Ht.isub(this.m),Ht},kt.prototype.sub=function(Mt,Lt){this._verify2(Mt,Lt);var Ht=Mt.sub(Lt);return Ht.cmpn(0)<0&&Ht.iadd(this.m),Ht._forceRed(this)},kt.prototype.isub=function(Mt,Lt){this._verify2(Mt,Lt);var Ht=Mt.isub(Lt);return Ht.cmpn(0)<0&&Ht.iadd(this.m),Ht},kt.prototype.shl=function(Mt,Lt){return this._verify1(Mt),this.imod(Mt.ushln(Lt))},kt.prototype.imul=function(Mt,Lt){return this._verify2(Mt,Lt),this.imod(Mt.imul(Lt))},kt.prototype.mul=function(Mt,Lt){return this._verify2(Mt,Lt),this.imod(Mt.mul(Lt))},kt.prototype.isqr=function(Mt){return this.imul(Mt,Mt.clone())},kt.prototype.sqr=function(Mt){return this.mul(Mt,Mt)},kt.prototype.sqrt=function(Mt){if(Mt.isZero())return Mt.clone();var Lt=this.m.andln(3);if(at(Lt%2===1),Lt===3){var Ht=this.m.add(new ot(1)).iushrn(2);return this.pow(Mt,Ht)}for(var Qt=this.m.subn(1),Ut=0;!Qt.isZero()&&Qt.andln(1)===0;)Ut++,Qt.iushrn(1);at(!Qt.isZero());var Bt=new ot(1).toRed(this),Kt=Bt.redNeg(),Gt=this.m.subn(1).iushrn(1),Pt=this.m.bitLength();for(Pt=new ot(2*Pt*Pt).toRed(this);this.pow(Pt,Gt).cmp(Kt)!==0;)Pt.redIAdd(Kt);for(var Zt=this.pow(Pt,Qt),an=this.pow(Mt,Qt.addn(1).iushrn(1)),Jt=this.pow(Mt,Qt),rn=Ut;Jt.cmp(Bt)!==0;){for(var fn=Jt,pn=0;fn.cmp(Bt)!==0;pn++)fn=fn.redSqr();at(pn<rn);var vn=this.pow(Zt,new ot(1).iushln(rn-pn-1));an=an.redMul(vn),Zt=vn.redSqr(),Jt=Jt.redMul(Zt),rn=pn}return an},kt.prototype.invm=function(Mt){var Lt=Mt._invmp(this.m);return Lt.negative!==0?(Lt.negative=0,this.imod(Lt).redNeg()):this.imod(Lt)},kt.prototype.pow=function(Mt,Lt){if(Lt.isZero())return new ot(1).toRed(this);if(Lt.cmpn(1)===0)return Mt.clone();var Ht=4,Qt=new Array(1<<Ht);Qt[0]=new ot(1).toRed(this),Qt[1]=Mt;for(var Ut=2;Ut<Qt.length;Ut++)Qt[Ut]=this.mul(Qt[Ut-1],Mt);var Bt=Qt[0],Kt=0,Gt=0,Pt=Lt.bitLength()%26;for(Pt===0&&(Pt=26),Ut=Lt.length-1;Ut>=0;Ut--){for(var Zt=Lt.words[Ut],an=Pt-1;an>=0;an--){var Jt=Zt>>an&1;if(Bt!==Qt[0]&&(Bt=this.sqr(Bt)),Jt===0&&Kt===0){Gt=0;continue}Kt<<=1,Kt|=Jt,Gt++,!(Gt!==Ht&&(Ut!==0||an!==0))&&(Bt=this.mul(Bt,Qt[Kt]),Gt=0,Kt=0)}Pt=26}return Bt},kt.prototype.convertTo=function(Mt){var Lt=Mt.umod(this.m);return Lt===Mt?Lt.clone():Lt},kt.prototype.convertFrom=function(Mt){var Lt=Mt.clone();return Lt.red=null,Lt},ot.mont=function(Mt){return new zt(Mt)};function zt(Nt){kt.call(this,Nt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ot(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}st(zt,kt),zt.prototype.convertTo=function(Mt){return this.imod(Mt.ushln(this.shift))},zt.prototype.convertFrom=function(Mt){var Lt=this.imod(Mt.mul(this.rinv));return Lt.red=null,Lt},zt.prototype.imul=function(Mt,Lt){if(Mt.isZero()||Lt.isZero())return Mt.words[0]=0,Mt.length=1,Mt;var Ht=Mt.imul(Lt),Qt=Ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ut=Ht.isub(Qt).iushrn(this.shift),Bt=Ut;return Ut.cmp(this.m)>=0?Bt=Ut.isub(this.m):Ut.cmpn(0)<0&&(Bt=Ut.iadd(this.m)),Bt._forceRed(this)},zt.prototype.mul=function(Mt,Lt){if(Mt.isZero()||Lt.isZero())return new ot(0)._forceRed(this);var Ht=Mt.mul(Lt),Qt=Ht.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Ut=Ht.isub(Qt).iushrn(this.shift),Bt=Ut;return Ut.cmp(this.m)>=0?Bt=Ut.isub(this.m):Ut.cmpn(0)<0&&(Bt=Ut.iadd(this.m)),Bt._forceRed(this)},zt.prototype.invm=function(Mt){var Lt=this.imod(Mt._invmp(this.m).mul(this.r2));return Lt._forceRed(this)}})(it,commonjsGlobal)})(bn$1);const BN$4=bn$1.exports,version$t="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const it=[];if(["NFD","NFC","NFKD","NFKC"].forEach(tt=>{try{if("test".normalize(tt)!=="test")throw new Error("bad normalize")}catch{it.push(tt)}}),it.length)throw new Error("missing "+it.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(it){return it.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(it){it.DEBUG="DEBUG",it.INFO="INFO",it.WARNING="WARNING",it.ERROR="ERROR",it.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(it){it.UNKNOWN_ERROR="UNKNOWN_ERROR",it.NOT_IMPLEMENTED="NOT_IMPLEMENTED",it.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",it.NETWORK_ERROR="NETWORK_ERROR",it.SERVER_ERROR="SERVER_ERROR",it.TIMEOUT="TIMEOUT",it.BUFFER_OVERRUN="BUFFER_OVERRUN",it.NUMERIC_FAULT="NUMERIC_FAULT",it.MISSING_NEW="MISSING_NEW",it.INVALID_ARGUMENT="INVALID_ARGUMENT",it.MISSING_ARGUMENT="MISSING_ARGUMENT",it.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",it.CALL_EXCEPTION="CALL_EXCEPTION",it.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",it.NONCE_EXPIRED="NONCE_EXPIRED",it.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",it.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",it.TRANSACTION_REPLACED="TRANSACTION_REPLACED",it.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(tt){Object.defineProperty(this,"version",{enumerable:!0,value:tt,writable:!1})}_log(tt,rt){const at=tt.toLowerCase();LogLevels[at]==null&&this.throwArgumentError("invalid log level name","logLevel",tt),!(_logLevel>LogLevels[at])&&console.log.apply(console,rt)}debug(...tt){this._log(Logger.levels.DEBUG,tt)}info(...tt){this._log(Logger.levels.INFO,tt)}warn(...tt){this._log(Logger.levels.WARNING,tt)}makeError(tt,rt,at){if(_censorErrors)return this.makeError("censored error",rt,{});rt||(rt=Logger.errors.UNKNOWN_ERROR),at||(at={});const st=[];Object.keys(at).forEach(ht=>{const mt=at[ht];try{if(mt instanceof Uint8Array){let bt="";for(let vt=0;vt<mt.length;vt++)bt+=HEX[mt[vt]>>4],bt+=HEX[mt[vt]&15];st.push(ht+"=Uint8Array(0x"+bt+")")}else st.push(ht+"="+JSON.stringify(mt))}catch{st.push(ht+"="+JSON.stringify(at[ht].toString()))}}),st.push(`code=${rt}`),st.push(`version=${this.version}`);const ot=tt;let lt="";switch(rt){case ErrorCode.NUMERIC_FAULT:{lt="NUMERIC_FAULT";const ht=tt;switch(ht){case"overflow":case"underflow":case"division-by-zero":lt+="-"+ht;break;case"negative-power":case"negative-width":lt+="-unsupported";break;case"unbound-bitwise-result":lt+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:lt=rt;break}lt&&(tt+=" [ See: https://links.ethers.org/v5-errors-"+lt+" ]"),st.length&&(tt+=" ("+st.join(", ")+")");const ut=new Error(tt);return ut.reason=ot,ut.code=rt,Object.keys(at).forEach(function(ht){ut[ht]=at[ht]}),ut}throwError(tt,rt,at){throw this.makeError(tt,rt,at)}throwArgumentError(tt,rt,at){return this.throwError(tt,Logger.errors.INVALID_ARGUMENT,{argument:rt,value:at})}assert(tt,rt,at,st){tt||this.throwError(rt,at,st)}assertArgument(tt,rt,at,st){tt||this.throwArgumentError(rt,at,st)}checkNormalize(tt){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(tt,rt){typeof tt=="number"&&(rt==null&&(rt="value not safe"),(tt<0||tt>=9007199254740991)&&this.throwError(rt,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:tt}),tt%1&&this.throwError(rt,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:tt}))}checkArgumentCount(tt,rt,at){at?at=": "+at:at="",tt<rt&&this.throwError("missing argument"+at,Logger.errors.MISSING_ARGUMENT,{count:tt,expectedCount:rt}),tt>rt&&this.throwError("too many arguments"+at,Logger.errors.UNEXPECTED_ARGUMENT,{count:tt,expectedCount:rt})}checkNew(tt,rt){(tt===Object||tt==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:rt.name})}checkAbstract(tt,rt){tt===rt?this.throwError("cannot instantiate abstract class "+JSON.stringify(rt.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:tt.name,operation:"new"}):(tt===Object||tt==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:rt.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$t)),_globalLogger}static setCensorship(tt,rt){if(!tt&&rt&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!tt)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!tt,_permanentCensorErrors=!!rt}static setLogLevel(tt){const rt=LogLevels[tt.toLowerCase()];if(rt==null){Logger.globalLogger().warn("invalid log level - "+tt);return}_logLevel=rt}static from(tt){return new Logger(tt)}}Logger.errors=ErrorCode,Logger.levels=LogLevel;const lib_esm$k=Object.freeze(Object.defineProperty({__proto__:null,get LogLevel(){return LogLevel},get ErrorCode(){return ErrorCode},Logger},Symbol.toStringTag,{value:"Module"})),version$s="bytes/5.7.0",logger$I=new Logger(version$s);function isHexable(it){return!!it.toHexString}function addSlice(it){return it.slice||(it.slice=function(){const tt=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(it,tt)))}),it}function isBytesLike(it){return isHexString$4(it)&&!(it.length%2)||isBytes(it)}function isInteger(it){return typeof it=="number"&&it==it&&it%1===0}function isBytes(it){if(it==null)return!1;if(it.constructor===Uint8Array)return!0;if(typeof it=="string"||!isInteger(it.length)||it.length<0)return!1;for(let tt=0;tt<it.length;tt++){const rt=it[tt];if(!isInteger(rt)||rt<0||rt>=256)return!1}return!0}function arrayify(it,tt){if(tt||(tt={}),typeof it=="number"){logger$I.checkSafeUint53(it,"invalid arrayify value");const rt=[];for(;it;)rt.unshift(it&255),it=parseInt(String(it/256));return rt.length===0&&rt.push(0),addSlice(new Uint8Array(rt))}if(tt.allowMissingPrefix&&typeof it=="string"&&it.substring(0,2)!=="0x"&&(it="0x"+it),isHexable(it)&&(it=it.toHexString()),isHexString$4(it)){let rt=it.substring(2);rt.length%2&&(tt.hexPad==="left"?rt="0"+rt:tt.hexPad==="right"?rt+="0":logger$I.throwArgumentError("hex data is odd-length","value",it));const at=[];for(let st=0;st<rt.length;st+=2)at.push(parseInt(rt.substring(st,st+2),16));return addSlice(new Uint8Array(at))}return isBytes(it)?addSlice(new Uint8Array(it)):logger$I.throwArgumentError("invalid arrayify value","value",it)}function concat$6(it){const tt=it.map(st=>arrayify(st)),rt=tt.reduce((st,ot)=>st+ot.length,0),at=new Uint8Array(rt);return tt.reduce((st,ot)=>(at.set(ot,st),st+ot.length),0),addSlice(at)}function stripZeros(it){let tt=arrayify(it);if(tt.length===0)return tt;let rt=0;for(;rt<tt.length&&tt[rt]===0;)rt++;return rt&&(tt=tt.slice(rt)),tt}function zeroPad(it,tt){it=arrayify(it),it.length>tt&&logger$I.throwArgumentError("value out of range","value",arguments[0]);const rt=new Uint8Array(tt);return rt.set(it,tt-it.length),addSlice(rt)}function isHexString$4(it,tt){return!(typeof it!="string"||!it.match(/^0x[0-9A-Fa-f]*$/)||tt&&it.length!==2+2*tt)}const HexCharacters="0123456789abcdef";function hexlify(it,tt){if(tt||(tt={}),typeof it=="number"){logger$I.checkSafeUint53(it,"invalid hexlify value");let rt="";for(;it;)rt=HexCharacters[it&15]+rt,it=Math.floor(it/16);return rt.length?(rt.length%2&&(rt="0"+rt),"0x"+rt):"0x00"}if(typeof it=="bigint")return it=it.toString(16),it.length%2?"0x0"+it:"0x"+it;if(tt.allowMissingPrefix&&typeof it=="string"&&it.substring(0,2)!=="0x"&&(it="0x"+it),isHexable(it))return it.toHexString();if(isHexString$4(it))return it.length%2&&(tt.hexPad==="left"?it="0x0"+it.substring(2):tt.hexPad==="right"?it+="0":logger$I.throwArgumentError("hex data is odd-length","value",it)),it.toLowerCase();if(isBytes(it)){let rt="0x";for(let at=0;at<it.length;at++){let st=it[at];rt+=HexCharacters[(st&240)>>4]+HexCharacters[st&15]}return rt}return logger$I.throwArgumentError("invalid hexlify value","value",it)}function hexDataLength(it){if(typeof it!="string")it=hexlify(it);else if(!isHexString$4(it)||it.length%2)return null;return(it.length-2)/2}function hexDataSlice(it,tt,rt){return typeof it!="string"?it=hexlify(it):(!isHexString$4(it)||it.length%2)&&logger$I.throwArgumentError("invalid hexData","value",it),tt=2+2*tt,rt!=null?"0x"+it.substring(tt,2+2*rt):"0x"+it.substring(tt)}function hexConcat(it){let tt="0x";return it.forEach(rt=>{tt+=hexlify(rt).substring(2)}),tt}function hexValue(it){const tt=hexStripZeros(hexlify(it,{hexPad:"left"}));return tt==="0x"?"0x0":tt}function hexStripZeros(it){typeof it!="string"&&(it=hexlify(it)),isHexString$4(it)||logger$I.throwArgumentError("invalid hex string","value",it),it=it.substring(2);let tt=0;for(;tt<it.length&&it[tt]==="0";)tt++;return"0x"+it.substring(tt)}function hexZeroPad(it,tt){for(typeof it!="string"?it=hexlify(it):isHexString$4(it)||logger$I.throwArgumentError("invalid hex string","value",it),it.length>2*tt+2&&logger$I.throwArgumentError("value out of range","value",arguments[1]);it.length<2*tt+2;)it="0x0"+it.substring(2);return it}function splitSignature(it){const tt={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(it)){let rt=arrayify(it);rt.length===64?(tt.v=27+(rt[32]>>7),rt[32]&=127,tt.r=hexlify(rt.slice(0,32)),tt.s=hexlify(rt.slice(32,64))):rt.length===65?(tt.r=hexlify(rt.slice(0,32)),tt.s=hexlify(rt.slice(32,64)),tt.v=rt[64]):logger$I.throwArgumentError("invalid signature string","signature",it),tt.v<27&&(tt.v===0||tt.v===1?tt.v+=27:logger$I.throwArgumentError("signature invalid v byte","signature",it)),tt.recoveryParam=1-tt.v%2,tt.recoveryParam&&(rt[32]|=128),tt._vs=hexlify(rt.slice(32,64))}else{if(tt.r=it.r,tt.s=it.s,tt.v=it.v,tt.recoveryParam=it.recoveryParam,tt._vs=it._vs,tt._vs!=null){const st=zeroPad(arrayify(tt._vs),32);tt._vs=hexlify(st);const ot=st[0]>=128?1:0;tt.recoveryParam==null?tt.recoveryParam=ot:tt.recoveryParam!==ot&&logger$I.throwArgumentError("signature recoveryParam mismatch _vs","signature",it),st[0]&=127;const lt=hexlify(st);tt.s==null?tt.s=lt:tt.s!==lt&&logger$I.throwArgumentError("signature v mismatch _vs","signature",it)}if(tt.recoveryParam==null)tt.v==null?logger$I.throwArgumentError("signature missing v and recoveryParam","signature",it):tt.v===0||tt.v===1?tt.recoveryParam=tt.v:tt.recoveryParam=1-tt.v%2;else if(tt.v==null)tt.v=27+tt.recoveryParam;else{const st=tt.v===0||tt.v===1?tt.v:1-tt.v%2;tt.recoveryParam!==st&&logger$I.throwArgumentError("signature recoveryParam mismatch v","signature",it)}tt.r==null||!isHexString$4(tt.r)?logger$I.throwArgumentError("signature missing or invalid r","signature",it):tt.r=hexZeroPad(tt.r,32),tt.s==null||!isHexString$4(tt.s)?logger$I.throwArgumentError("signature missing or invalid s","signature",it):tt.s=hexZeroPad(tt.s,32);const rt=arrayify(tt.s);rt[0]>=128&&logger$I.throwArgumentError("signature s out of range","signature",it),tt.recoveryParam&&(rt[0]|=128);const at=hexlify(rt);tt._vs&&(isHexString$4(tt._vs)||logger$I.throwArgumentError("signature invalid _vs","signature",it),tt._vs=hexZeroPad(tt._vs,32)),tt._vs==null?tt._vs=at:tt._vs!==at&&logger$I.throwArgumentError("signature _vs mismatch v and s","signature",it)}return tt.yParityAndS=tt._vs,tt.compact=tt.r+tt.yParityAndS.substring(2),tt}function joinSignature(it){return it=splitSignature(it),hexlify(concat$6([it.r,it.s,it.recoveryParam?"0x1c":"0x1b"]))}const lib_esm$j=Object.freeze(Object.defineProperty({__proto__:null,isBytesLike,isBytes,arrayify,concat:concat$6,stripZeros,zeroPad,isHexString:isHexString$4,hexlify,hexDataLength,hexDataSlice,hexConcat,hexValue,hexStripZeros,hexZeroPad,splitSignature,joinSignature},Symbol.toStringTag,{value:"Module"})),version$r="bignumber/5.7.0";var BN$3=BN$4.BN;const logger$H=new Logger(version$r),_constructorGuard$4={},MAX_SAFE=9007199254740991;function isBigNumberish(it){return it!=null&&(BigNumber.isBigNumber(it)||typeof it=="number"&&it%1===0||typeof it=="string"&&!!it.match(/^-?[0-9]+$/)||isHexString$4(it)||typeof it=="bigint"||isBytes(it))}let _warnedToStringRadix=!1;class BigNumber{constructor(tt,rt){tt!==_constructorGuard$4&&logger$H.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=rt,this._isBigNumber=!0,Object.freeze(this)}fromTwos(tt){return toBigNumber(toBN(this).fromTwos(tt))}toTwos(tt){return toBigNumber(toBN(this).toTwos(tt))}abs(){return this._hex[0]==="-"?BigNumber.from(this._hex.substring(1)):this}add(tt){return toBigNumber(toBN(this).add(toBN(tt)))}sub(tt){return toBigNumber(toBN(this).sub(toBN(tt)))}div(tt){return BigNumber.from(tt).isZero()&&throwFault$1("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(tt)))}mul(tt){return toBigNumber(toBN(this).mul(toBN(tt)))}mod(tt){const rt=toBN(tt);return rt.isNeg()&&throwFault$1("division-by-zero","mod"),toBigNumber(toBN(this).umod(rt))}pow(tt){const rt=toBN(tt);return rt.isNeg()&&throwFault$1("negative-power","pow"),toBigNumber(toBN(this).pow(rt))}and(tt){const rt=toBN(tt);return(this.isNegative()||rt.isNeg())&&throwFault$1("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(rt))}or(tt){const rt=toBN(tt);return(this.isNegative()||rt.isNeg())&&throwFault$1("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(rt))}xor(tt){const rt=toBN(tt);return(this.isNegative()||rt.isNeg())&&throwFault$1("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(rt))}mask(tt){return(this.isNegative()||tt<0)&&throwFault$1("negative-width","mask"),toBigNumber(toBN(this).maskn(tt))}shl(tt){return(this.isNegative()||tt<0)&&throwFault$1("negative-width","shl"),toBigNumber(toBN(this).shln(tt))}shr(tt){return(this.isNegative()||tt<0)&&throwFault$1("negative-width","shr"),toBigNumber(toBN(this).shrn(tt))}eq(tt){return toBN(this).eq(toBN(tt))}lt(tt){return toBN(this).lt(toBN(tt))}lte(tt){return toBN(this).lte(toBN(tt))}gt(tt){return toBN(this).gt(toBN(tt))}gte(tt){return toBN(this).gte(toBN(tt))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault$1("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$H.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$H.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$H.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$H.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(tt){return{type:"BigNumber",hex:this.toHexString()}}static from(tt){if(tt instanceof BigNumber)return tt;if(typeof tt=="string")return tt.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard$4,toHex$2(tt)):tt.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard$4,toHex$2(new BN$3(tt))):logger$H.throwArgumentError("invalid BigNumber string","value",tt);if(typeof tt=="number")return tt%1&&throwFault$1("underflow","BigNumber.from",tt),(tt>=MAX_SAFE||tt<=-MAX_SAFE)&&throwFault$1("overflow","BigNumber.from",tt),BigNumber.from(String(tt));const rt=tt;if(typeof rt=="bigint")return BigNumber.from(rt.toString());if(isBytes(rt))return BigNumber.from(hexlify(rt));if(rt)if(rt.toHexString){const at=rt.toHexString();if(typeof at=="string")return BigNumber.from(at)}else{let at=rt._hex;if(at==null&&rt.type==="BigNumber"&&(at=rt.hex),typeof at=="string"&&(isHexString$4(at)||at[0]==="-"&&isHexString$4(at.substring(1))))return BigNumber.from(at)}return logger$H.throwArgumentError("invalid BigNumber value","value",tt)}static isBigNumber(tt){return!!(tt&&tt._isBigNumber)}}function toHex$2(it){if(typeof it!="string")return toHex$2(it.toString(16));if(it[0]==="-")return it=it.substring(1),it[0]==="-"&&logger$H.throwArgumentError("invalid hex","value",it),it=toHex$2(it),it==="0x00"?it:"-"+it;if(it.substring(0,2)!=="0x"&&(it="0x"+it),it==="0x")return"0x00";for(it.length%2&&(it="0x0"+it.substring(2));it.length>4&&it.substring(0,4)==="0x00";)it="0x"+it.substring(4);return it}function toBigNumber(it){return BigNumber.from(toHex$2(it))}function toBN(it){const tt=BigNumber.from(it).toHexString();return tt[0]==="-"?new BN$3("-"+tt.substring(3),16):new BN$3(tt.substring(2),16)}function throwFault$1(it,tt,rt){const at={fault:it,operation:tt};return rt!=null&&(at.value=rt),logger$H.throwError(it,Logger.errors.NUMERIC_FAULT,at)}function _base36To16(it){return new BN$3(it,36).toString(16)}function _base16To36(it){return new BN$3(it,16).toString(36)}const logger$G=new Logger(version$r),_constructorGuard$3={},Zero$2=BigNumber.from(0),NegativeOne$2=BigNumber.from(-1);function throwFault(it,tt,rt,at){const st={fault:tt,operation:rt};return at!==void 0&&(st.value=at),logger$G.throwError(it,Logger.errors.NUMERIC_FAULT,st)}let zeros$1="0";for(;zeros$1.length<256;)zeros$1+=zeros$1;function getMultiplier(it){if(typeof it!="number")try{it=BigNumber.from(it).toNumber()}catch{}return typeof it=="number"&&it>=0&&it<=256&&!(it%1)?"1"+zeros$1.substring(0,it):logger$G.throwArgumentError("invalid decimal size","decimals",it)}function formatFixed(it,tt){tt==null&&(tt=0);const rt=getMultiplier(tt);it=BigNumber.from(it);const at=it.lt(Zero$2);at&&(it=it.mul(NegativeOne$2));let st=it.mod(rt).toString();for(;st.length<rt.length-1;)st="0"+st;st=st.match(/^([0-9]*[1-9]|0)(0*)/)[1];const ot=it.div(rt).toString();return rt.length===1?it=ot:it=ot+"."+st,at&&(it="-"+it),it}function parseFixed(it,tt){tt==null&&(tt=0);const rt=getMultiplier(tt);(typeof it!="string"||!it.match(/^-?[0-9.]+$/))&&logger$G.throwArgumentError("invalid decimal value","value",it);const at=it.substring(0,1)==="-";at&&(it=it.substring(1)),it==="."&&logger$G.throwArgumentError("missing value","value",it);const st=it.split(".");st.length>2&&logger$G.throwArgumentError("too many decimal points","value",it);let ot=st[0],lt=st[1];for(ot||(ot="0"),lt||(lt="0");lt[lt.length-1]==="0";)lt=lt.substring(0,lt.length-1);for(lt.length>rt.length-1&&throwFault("fractional component exceeds decimals","underflow","parseFixed"),lt===""&&(lt="0");lt.length<rt.length-1;)lt+="0";const ut=BigNumber.from(ot),ht=BigNumber.from(lt);let mt=ut.mul(rt).add(ht);return at&&(mt=mt.mul(NegativeOne$2)),mt}class FixedFormat{constructor(tt,rt,at,st){tt!==_constructorGuard$3&&logger$G.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=rt,this.width=at,this.decimals=st,this.name=(rt?"":"u")+"fixed"+String(at)+"x"+String(st),this._multiplier=getMultiplier(st),Object.freeze(this)}static from(tt){if(tt instanceof FixedFormat)return tt;typeof tt=="number"&&(tt=`fixed128x${tt}`);let rt=!0,at=128,st=18;if(typeof tt=="string"){if(tt!=="fixed")if(tt==="ufixed")rt=!1;else{const ot=tt.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ot||logger$G.throwArgumentError("invalid fixed format","format",tt),rt=ot[1]!=="u",at=parseInt(ot[2]),st=parseInt(ot[3])}}else if(tt){const ot=(lt,ut,ht)=>tt[lt]==null?ht:(typeof tt[lt]!==ut&&logger$G.throwArgumentError("invalid fixed format ("+lt+" not "+ut+")","format."+lt,tt[lt]),tt[lt]);rt=ot("signed","boolean",rt),at=ot("width","number",at),st=ot("decimals","number",st)}return at%8&&logger$G.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",at),st>80&&logger$G.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",st),new FixedFormat(_constructorGuard$3,rt,at,st)}}class FixedNumber{constructor(tt,rt,at,st){tt!==_constructorGuard$3&&logger$G.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=st,this._hex=rt,this._value=at,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(tt){this.format.name!==tt.format.name&&logger$G.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",tt)}addUnsafe(tt){this._checkFormat(tt);const rt=parseFixed(this._value,this.format.decimals),at=parseFixed(tt._value,tt.format.decimals);return FixedNumber.fromValue(rt.add(at),this.format.decimals,this.format)}subUnsafe(tt){this._checkFormat(tt);const rt=parseFixed(this._value,this.format.decimals),at=parseFixed(tt._value,tt.format.decimals);return FixedNumber.fromValue(rt.sub(at),this.format.decimals,this.format)}mulUnsafe(tt){this._checkFormat(tt);const rt=parseFixed(this._value,this.format.decimals),at=parseFixed(tt._value,tt.format.decimals);return FixedNumber.fromValue(rt.mul(at).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(tt){this._checkFormat(tt);const rt=parseFixed(this._value,this.format.decimals),at=parseFixed(tt._value,tt.format.decimals);return FixedNumber.fromValue(rt.mul(this.format._multiplier).div(at),this.format.decimals,this.format)}floor(){const tt=this.toString().split(".");tt.length===1&&tt.push("0");let rt=FixedNumber.from(tt[0],this.format);const at=!tt[1].match(/^(0*)$/);return this.isNegative()&&at&&(rt=rt.subUnsafe(ONE.toFormat(rt.format))),rt}ceiling(){const tt=this.toString().split(".");tt.length===1&&tt.push("0");let rt=FixedNumber.from(tt[0],this.format);const at=!tt[1].match(/^(0*)$/);return!this.isNegative()&&at&&(rt=rt.addUnsafe(ONE.toFormat(rt.format))),rt}round(tt){tt==null&&(tt=0);const rt=this.toString().split(".");if(rt.length===1&&rt.push("0"),(tt<0||tt>80||tt%1)&&logger$G.throwArgumentError("invalid decimal count","decimals",tt),rt[1].length<=tt)return this;const at=FixedNumber.from("1"+zeros$1.substring(0,tt),this.format),st=BUMP.toFormat(this.format);return this.mulUnsafe(at).addUnsafe(st).floor().divUnsafe(at)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(tt){if(tt==null)return this._hex;tt%8&&logger$G.throwArgumentError("invalid byte width","width",tt);const rt=BigNumber.from(this._hex).fromTwos(this.format.width).toTwos(tt).toHexString();return hexZeroPad(rt,tt/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(tt){return FixedNumber.fromString(this._value,tt)}static fromValue(tt,rt,at){return at==null&&rt!=null&&!isBigNumberish(rt)&&(at=rt,rt=null),rt==null&&(rt=0),at==null&&(at="fixed"),FixedNumber.fromString(formatFixed(tt,rt),FixedFormat.from(at))}static fromString(tt,rt){rt==null&&(rt="fixed");const at=FixedFormat.from(rt),st=parseFixed(tt,at.decimals);!at.signed&&st.lt(Zero$2)&&throwFault("unsigned value cannot be negative","overflow","value",tt);let ot=null;at.signed?ot=st.toTwos(at.width).toHexString():(ot=st.toHexString(),ot=hexZeroPad(ot,at.width/8));const lt=formatFixed(st,at.decimals);return new FixedNumber(_constructorGuard$3,ot,lt,at)}static fromBytes(tt,rt){rt==null&&(rt="fixed");const at=FixedFormat.from(rt);if(arrayify(tt).length>at.width/8)throw new Error("overflow");let st=BigNumber.from(tt);at.signed&&(st=st.fromTwos(at.width));const ot=st.toTwos((at.signed?0:1)+at.width).toHexString(),lt=formatFixed(st,at.decimals);return new FixedNumber(_constructorGuard$3,ot,lt,at)}static from(tt,rt){if(typeof tt=="string")return FixedNumber.fromString(tt,rt);if(isBytes(tt))return FixedNumber.fromBytes(tt,rt);try{return FixedNumber.fromValue(tt,0,rt)}catch(at){if(at.code!==Logger.errors.INVALID_ARGUMENT)throw at}return logger$G.throwArgumentError("invalid FixedNumber value","value",tt)}static isFixedNumber(tt){return!!(tt&&tt._isFixedNumber)}}const ONE=FixedNumber.from(1),BUMP=FixedNumber.from("0.5"),version$q="properties/5.7.0";var __awaiter$f=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$F=new Logger(version$q);function defineReadOnly(it,tt,rt){Object.defineProperty(it,tt,{enumerable:!0,value:rt,writable:!1})}function getStatic(it,tt){for(let rt=0;rt<32;rt++){if(it[tt])return it[tt];if(!it.prototype||typeof it.prototype!="object")break;it=Object.getPrototypeOf(it.prototype).constructor}return null}function resolveProperties(it){return __awaiter$f(this,void 0,void 0,function*(){const tt=Object.keys(it).map(at=>{const st=it[at];return Promise.resolve(st).then(ot=>({key:at,value:ot}))});return(yield Promise.all(tt)).reduce((at,st)=>(at[st.key]=st.value,at),{})})}function checkProperties(it,tt){(!it||typeof it!="object")&&logger$F.throwArgumentError("invalid object","object",it),Object.keys(it).forEach(rt=>{tt[rt]||logger$F.throwArgumentError("invalid object key - "+rt,"transaction:"+rt,it)})}function shallowCopy(it){const tt={};for(const rt in it)tt[rt]=it[rt];return tt}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(it){if(it==null||opaque[typeof it])return!0;if(Array.isArray(it)||typeof it=="object"){if(!Object.isFrozen(it))return!1;const tt=Object.keys(it);for(let rt=0;rt<tt.length;rt++){let at=null;try{at=it[tt[rt]]}catch{continue}if(!_isFrozen(at))return!1}return!0}return logger$F.throwArgumentError(`Cannot deepCopy ${typeof it}`,"object",it)}function _deepCopy(it){if(_isFrozen(it))return it;if(Array.isArray(it))return Object.freeze(it.map(tt=>deepCopy(tt)));if(typeof it=="object"){const tt={};for(const rt in it){const at=it[rt];at!==void 0&&defineReadOnly(tt,rt,deepCopy(at))}return tt}return logger$F.throwArgumentError(`Cannot deepCopy ${typeof it}`,"object",it)}function deepCopy(it){return _deepCopy(it)}class Description{constructor(tt){for(const rt in tt)this[rt]=deepCopy(tt[rt])}}const lib_esm$i=Object.freeze(Object.defineProperty({__proto__:null,defineReadOnly,getStatic,resolveProperties,checkProperties,shallowCopy,deepCopy,Description},Symbol.toStringTag,{value:"Module"})),version$p="abi/5.7.0",logger$E=new Logger(version$p),_constructorGuard$2={};let ModifiersBytes={calldata:!0,memory:!0,storage:!0},ModifiersNest={calldata:!0,memory:!0};function checkModifier(it,tt){if(it==="bytes"||it==="string"){if(ModifiersBytes[tt])return!0}else if(it==="address"){if(tt==="payable")return!0}else if((it.indexOf("[")>=0||it==="tuple")&&ModifiersNest[tt])return!0;return(ModifiersBytes[tt]||tt==="payable")&&logger$E.throwArgumentError("invalid modifier","name",tt),!1}function parseParamType(it,tt){let rt=it;function at(ut){logger$E.throwArgumentError(`unexpected character at position ${ut}`,"param",it)}it=it.replace(/\s/g," ");function st(ut){let ht={type:"",name:"",parent:ut,state:{allowType:!0}};return tt&&(ht.indexed=!1),ht}let ot={type:"",name:"",state:{allowType:!0}},lt=ot;for(let ut=0;ut<it.length;ut++){let ht=it[ut];switch(ht){case"(":lt.state.allowType&&lt.type===""?lt.type="tuple":lt.state.allowParams||at(ut),lt.state.allowType=!1,lt.type=verifyType(lt.type),lt.components=[st(lt)],lt=lt.components[0];break;case")":delete lt.state,lt.name==="indexed"&&(tt||at(ut),lt.indexed=!0,lt.name=""),checkModifier(lt.type,lt.name)&&(lt.name=""),lt.type=verifyType(lt.type);let mt=lt;lt=lt.parent,lt||at(ut),delete mt.parent,lt.state.allowParams=!1,lt.state.allowName=!0,lt.state.allowArray=!0;break;case",":delete lt.state,lt.name==="indexed"&&(tt||at(ut),lt.indexed=!0,lt.name=""),checkModifier(lt.type,lt.name)&&(lt.name=""),lt.type=verifyType(lt.type);let bt=st(lt.parent);lt.parent.components.push(bt),delete lt.parent,lt=bt;break;case" ":lt.state.allowType&&lt.type!==""&&(lt.type=verifyType(lt.type),delete lt.state.allowType,lt.state.allowName=!0,lt.state.allowParams=!0),lt.state.allowName&&lt.name!==""&&(lt.name==="indexed"?(tt||at(ut),lt.indexed&&at(ut),lt.indexed=!0,lt.name=""):checkModifier(lt.type,lt.name)?lt.name="":lt.state.allowName=!1);break;case"[":lt.state.allowArray||at(ut),lt.type+=ht,lt.state.allowArray=!1,lt.state.allowName=!1,lt.state.readArray=!0;break;case"]":lt.state.readArray||at(ut),lt.type+=ht,lt.state.readArray=!1,lt.state.allowArray=!0,lt.state.allowName=!0;break;default:lt.state.allowType?(lt.type+=ht,lt.state.allowParams=!0,lt.state.allowArray=!0):lt.state.allowName?(lt.name+=ht,delete lt.state.allowArray):lt.state.readArray?lt.type+=ht:at(ut)}}return lt.parent&&logger$E.throwArgumentError("unexpected eof","param",it),delete ot.state,lt.name==="indexed"?(tt||at(rt.length-7),lt.indexed&&at(rt.length-7),lt.indexed=!0,lt.name=""):checkModifier(lt.type,lt.name)&&(lt.name=""),ot.type=verifyType(ot.type),ot}function populate(it,tt){for(let rt in tt)defineReadOnly(it,rt,tt[rt])}const FormatTypes=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),paramTypeArray=new RegExp(/^(.*)\[([0-9]*)\]$/);class ParamType{constructor(tt,rt){tt!==_constructorGuard$2&&logger$E.throwError("use fromString",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),populate(this,rt);let at=this.type.match(paramTypeArray);at?populate(this,{arrayLength:parseInt(at[2]||"-1"),arrayChildren:ParamType.fromObject({type:at[1],components:this.components}),baseType:"array"}):populate(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(tt){if(tt||(tt=FormatTypes.sighash),FormatTypes[tt]||logger$E.throwArgumentError("invalid format type","format",tt),tt===FormatTypes.json){let at={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(at.indexed=this.indexed),this.components&&(at.components=this.components.map(st=>JSON.parse(st.format(tt)))),JSON.stringify(at)}let rt="";return this.baseType==="array"?(rt+=this.arrayChildren.format(tt),rt+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(tt!==FormatTypes.sighash&&(rt+=this.type),rt+="("+this.components.map(at=>at.format(tt)).join(tt===FormatTypes.full?", ":",")+")"):rt+=this.type,tt!==FormatTypes.sighash&&(this.indexed===!0&&(rt+=" indexed"),tt===FormatTypes.full&&this.name&&(rt+=" "+this.name)),rt}static from(tt,rt){return typeof tt=="string"?ParamType.fromString(tt,rt):ParamType.fromObject(tt)}static fromObject(tt){return ParamType.isParamType(tt)?tt:new ParamType(_constructorGuard$2,{name:tt.name||null,type:verifyType(tt.type),indexed:tt.indexed==null?null:!!tt.indexed,components:tt.components?tt.components.map(ParamType.fromObject):null})}static fromString(tt,rt){function at(st){return ParamType.fromObject({name:st.name,type:st.type,indexed:st.indexed,components:st.components})}return at(parseParamType(tt,!!rt))}static isParamType(tt){return!!(tt!=null&&tt._isParamType)}}function parseParams(it,tt){return splitNesting(it).map(rt=>ParamType.fromString(rt,tt))}class Fragment{constructor(tt,rt){tt!==_constructorGuard$2&&logger$E.throwError("use a static from method",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),populate(this,rt),this._isFragment=!0,Object.freeze(this)}static from(tt){return Fragment.isFragment(tt)?tt:typeof tt=="string"?Fragment.fromString(tt):Fragment.fromObject(tt)}static fromObject(tt){if(Fragment.isFragment(tt))return tt;switch(tt.type){case"function":return FunctionFragment.fromObject(tt);case"event":return EventFragment.fromObject(tt);case"constructor":return ConstructorFragment.fromObject(tt);case"error":return ErrorFragment.fromObject(tt);case"fallback":case"receive":return null}return logger$E.throwArgumentError("invalid fragment object","value",tt)}static fromString(tt){return tt=tt.replace(/\s/g," "),tt=tt.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),tt=tt.trim(),tt.split(" ")[0]==="event"?EventFragment.fromString(tt.substring(5).trim()):tt.split(" ")[0]==="function"?FunctionFragment.fromString(tt.substring(8).trim()):tt.split("(")[0].trim()==="constructor"?ConstructorFragment.fromString(tt.trim()):tt.split(" ")[0]==="error"?ErrorFragment.fromString(tt.substring(5).trim()):logger$E.throwArgumentError("unsupported fragment","value",tt)}static isFragment(tt){return!!(tt&&tt._isFragment)}}class EventFragment extends Fragment{format(tt){if(tt||(tt=FormatTypes.sighash),FormatTypes[tt]||logger$E.throwArgumentError("invalid format type","format",tt),tt===FormatTypes.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(at=>JSON.parse(at.format(tt)))});let rt="";return tt!==FormatTypes.sighash&&(rt+="event "),rt+=this.name+"("+this.inputs.map(at=>at.format(tt)).join(tt===FormatTypes.full?", ":",")+") ",tt!==FormatTypes.sighash&&this.anonymous&&(rt+="anonymous "),rt.trim()}static from(tt){return typeof tt=="string"?EventFragment.fromString(tt):EventFragment.fromObject(tt)}static fromObject(tt){if(EventFragment.isEventFragment(tt))return tt;tt.type!=="event"&&logger$E.throwArgumentError("invalid event object","value",tt);const rt={name:verifyIdentifier(tt.name),anonymous:tt.anonymous,inputs:tt.inputs?tt.inputs.map(ParamType.fromObject):[],type:"event"};return new EventFragment(_constructorGuard$2,rt)}static fromString(tt){let rt=tt.match(regexParen);rt||logger$E.throwArgumentError("invalid event string","value",tt);let at=!1;return rt[3].split(" ").forEach(st=>{switch(st.trim()){case"anonymous":at=!0;break;case"":break;default:logger$E.warn("unknown modifier: "+st)}}),EventFragment.fromObject({name:rt[1].trim(),anonymous:at,inputs:parseParams(rt[2],!0),type:"event"})}static isEventFragment(tt){return tt&&tt._isFragment&&tt.type==="event"}}function parseGas(it,tt){tt.gas=null;let rt=it.split("@");return rt.length!==1?(rt.length>2&&logger$E.throwArgumentError("invalid human-readable ABI signature","value",it),rt[1].match(/^[0-9]+$/)||logger$E.throwArgumentError("invalid human-readable ABI signature gas","value",it),tt.gas=BigNumber.from(rt[1]),rt[0]):it}function parseModifiers(it,tt){tt.constant=!1,tt.payable=!1,tt.stateMutability="nonpayable",it.split(" ").forEach(rt=>{switch(rt.trim()){case"constant":tt.constant=!0;break;case"payable":tt.payable=!0,tt.stateMutability="payable";break;case"nonpayable":tt.payable=!1,tt.stateMutability="nonpayable";break;case"pure":tt.constant=!0,tt.stateMutability="pure";break;case"view":tt.constant=!0,tt.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+rt)}})}function verifyState(it){let tt={constant:!1,payable:!0,stateMutability:"payable"};return it.stateMutability!=null?(tt.stateMutability=it.stateMutability,tt.constant=tt.stateMutability==="view"||tt.stateMutability==="pure",it.constant!=null&&!!it.constant!==tt.constant&&logger$E.throwArgumentError("cannot have constant function with mutability "+tt.stateMutability,"value",it),tt.payable=tt.stateMutability==="payable",it.payable!=null&&!!it.payable!==tt.payable&&logger$E.throwArgumentError("cannot have payable function with mutability "+tt.stateMutability,"value",it)):it.payable!=null?(tt.payable=!!it.payable,it.constant==null&&!tt.payable&&it.type!=="constructor"&&logger$E.throwArgumentError("unable to determine stateMutability","value",it),tt.constant=!!it.constant,tt.constant?tt.stateMutability="view":tt.stateMutability=tt.payable?"payable":"nonpayable",tt.payable&&tt.constant&&logger$E.throwArgumentError("cannot have constant payable function","value",it)):it.constant!=null?(tt.constant=!!it.constant,tt.payable=!tt.constant,tt.stateMutability=tt.constant?"view":"payable"):it.type!=="constructor"&&logger$E.throwArgumentError("unable to determine stateMutability","value",it),tt}class ConstructorFragment extends Fragment{format(tt){if(tt||(tt=FormatTypes.sighash),FormatTypes[tt]||logger$E.throwArgumentError("invalid format type","format",tt),tt===FormatTypes.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(at=>JSON.parse(at.format(tt)))});tt===FormatTypes.sighash&&logger$E.throwError("cannot format a constructor for sighash",Logger.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let rt="constructor("+this.inputs.map(at=>at.format(tt)).join(tt===FormatTypes.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(rt+=this.stateMutability+" "),rt.trim()}static from(tt){return typeof tt=="string"?ConstructorFragment.fromString(tt):ConstructorFragment.fromObject(tt)}static fromObject(tt){if(ConstructorFragment.isConstructorFragment(tt))return tt;tt.type!=="constructor"&&logger$E.throwArgumentError("invalid constructor object","value",tt);let rt=verifyState(tt);rt.constant&&logger$E.throwArgumentError("constructor cannot be constant","value",tt);const at={name:null,type:tt.type,inputs:tt.inputs?tt.inputs.map(ParamType.fromObject):[],payable:rt.payable,stateMutability:rt.stateMutability,gas:tt.gas?BigNumber.from(tt.gas):null};return new ConstructorFragment(_constructorGuard$2,at)}static fromString(tt){let rt={type:"constructor"};tt=parseGas(tt,rt);let at=tt.match(regexParen);return(!at||at[1].trim()!=="constructor")&&logger$E.throwArgumentError("invalid constructor string","value",tt),rt.inputs=parseParams(at[2].trim(),!1),parseModifiers(at[3].trim(),rt),ConstructorFragment.fromObject(rt)}static isConstructorFragment(tt){return tt&&tt._isFragment&&tt.type==="constructor"}}class FunctionFragment extends ConstructorFragment{format(tt){if(tt||(tt=FormatTypes.sighash),FormatTypes[tt]||logger$E.throwArgumentError("invalid format type","format",tt),tt===FormatTypes.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(at=>JSON.parse(at.format(tt))),outputs:this.outputs.map(at=>JSON.parse(at.format(tt)))});let rt="";return tt!==FormatTypes.sighash&&(rt+="function "),rt+=this.name+"("+this.inputs.map(at=>at.format(tt)).join(tt===FormatTypes.full?", ":",")+") ",tt!==FormatTypes.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(rt+=this.stateMutability+" "):this.constant&&(rt+="view "),this.outputs&&this.outputs.length&&(rt+="returns ("+this.outputs.map(at=>at.format(tt)).join(", ")+") "),this.gas!=null&&(rt+="@"+this.gas.toString()+" ")),rt.trim()}static from(tt){return typeof tt=="string"?FunctionFragment.fromString(tt):FunctionFragment.fromObject(tt)}static fromObject(tt){if(FunctionFragment.isFunctionFragment(tt))return tt;tt.type!=="function"&&logger$E.throwArgumentError("invalid function object","value",tt);let rt=verifyState(tt);const at={type:tt.type,name:verifyIdentifier(tt.name),constant:rt.constant,inputs:tt.inputs?tt.inputs.map(ParamType.fromObject):[],outputs:tt.outputs?tt.outputs.map(ParamType.fromObject):[],payable:rt.payable,stateMutability:rt.stateMutability,gas:tt.gas?BigNumber.from(tt.gas):null};return new FunctionFragment(_constructorGuard$2,at)}static fromString(tt){let rt={type:"function"};tt=parseGas(tt,rt);let at=tt.split(" returns ");at.length>2&&logger$E.throwArgumentError("invalid function string","value",tt);let st=at[0].match(regexParen);if(st||logger$E.throwArgumentError("invalid function signature","value",tt),rt.name=st[1].trim(),rt.name&&verifyIdentifier(rt.name),rt.inputs=parseParams(st[2],!1),parseModifiers(st[3].trim(),rt),at.length>1){let ot=at[1].match(regexParen);(ot[1].trim()!=""||ot[3].trim()!="")&&logger$E.throwArgumentError("unexpected tokens","value",tt),rt.outputs=parseParams(ot[2],!1)}else rt.outputs=[];return FunctionFragment.fromObject(rt)}static isFunctionFragment(tt){return tt&&tt._isFragment&&tt.type==="function"}}function checkForbidden(it){const tt=it.format();return(tt==="Error(string)"||tt==="Panic(uint256)")&&logger$E.throwArgumentError(`cannot specify user defined ${tt} error`,"fragment",it),it}class ErrorFragment extends Fragment{format(tt){if(tt||(tt=FormatTypes.sighash),FormatTypes[tt]||logger$E.throwArgumentError("invalid format type","format",tt),tt===FormatTypes.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(at=>JSON.parse(at.format(tt)))});let rt="";return tt!==FormatTypes.sighash&&(rt+="error "),rt+=this.name+"("+this.inputs.map(at=>at.format(tt)).join(tt===FormatTypes.full?", ":",")+") ",rt.trim()}static from(tt){return typeof tt=="string"?ErrorFragment.fromString(tt):ErrorFragment.fromObject(tt)}static fromObject(tt){if(ErrorFragment.isErrorFragment(tt))return tt;tt.type!=="error"&&logger$E.throwArgumentError("invalid error object","value",tt);const rt={type:tt.type,name:verifyIdentifier(tt.name),inputs:tt.inputs?tt.inputs.map(ParamType.fromObject):[]};return checkForbidden(new ErrorFragment(_constructorGuard$2,rt))}static fromString(tt){let rt={type:"error"},at=tt.match(regexParen);return at||logger$E.throwArgumentError("invalid error signature","value",tt),rt.name=at[1].trim(),rt.name&&verifyIdentifier(rt.name),rt.inputs=parseParams(at[2],!1),checkForbidden(ErrorFragment.fromObject(rt))}static isErrorFragment(tt){return tt&&tt._isFragment&&tt.type==="error"}}function verifyType(it){return it.match(/^uint($|[^1-9])/)?it="uint256"+it.substring(4):it.match(/^int($|[^1-9])/)&&(it="int256"+it.substring(3)),it}const regexIdentifier=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function verifyIdentifier(it){return(!it||!it.match(regexIdentifier))&&logger$E.throwArgumentError(`invalid identifier "${it}"`,"value",it),it}const regexParen=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function splitNesting(it){it=it.trim();let tt=[],rt="",at=0;for(let st=0;st<it.length;st++){let ot=it[st];ot===","&&at===0?(tt.push(rt),rt=""):(rt+=ot,ot==="("?at++:ot===")"&&(at--,at===-1&&logger$E.throwArgumentError("unbalanced parenthesis","value",it)))}return rt&&tt.push(rt),tt}const logger$D=new Logger(version$p);function checkResultErrors(it){const tt=[],rt=function(at,st){if(!!Array.isArray(st))for(let ot in st){const lt=at.slice();lt.push(ot);try{rt(lt,st[ot])}catch(ut){tt.push({path:lt,error:ut})}}};return rt([],it),tt}class Coder{constructor(tt,rt,at,st){this.name=tt,this.type=rt,this.localName=at,this.dynamic=st}_throwError(tt,rt){logger$D.throwArgumentError(tt,this.localName,rt)}}class Writer{constructor(tt){defineReadOnly(this,"wordSize",tt||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(tt)}get data(){return hexConcat(this._data)}get length(){return this._dataLength}_writeData(tt){return this._data.push(tt),this._dataLength+=tt.length,tt.length}appendWriter(tt){return this._writeData(concat$6(tt._data))}writeBytes(tt){let rt=arrayify(tt);const at=rt.length%this.wordSize;return at&&(rt=concat$6([rt,this._padding.slice(at)])),this._writeData(rt)}_getValue(tt){let rt=arrayify(BigNumber.from(tt));return rt.length>this.wordSize&&logger$D.throwError("value out-of-bounds",Logger.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:rt.length}),rt.length%this.wordSize&&(rt=concat$6([this._padding.slice(rt.length%this.wordSize),rt])),rt}writeValue(tt){return this._writeData(this._getValue(tt))}writeUpdatableValue(){const tt=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,rt=>{this._data[tt]=this._getValue(rt)}}}class Reader{constructor(tt,rt,at,st){defineReadOnly(this,"_data",arrayify(tt)),defineReadOnly(this,"wordSize",rt||32),defineReadOnly(this,"_coerceFunc",at),defineReadOnly(this,"allowLoose",st),this._offset=0}get data(){return hexlify(this._data)}get consumed(){return this._offset}static coerce(tt,rt){let at=tt.match("^u?int([0-9]+)$");return at&&parseInt(at[1])<=48&&(rt=rt.toNumber()),rt}coerce(tt,rt){return this._coerceFunc?this._coerceFunc(tt,rt):Reader.coerce(tt,rt)}_peekBytes(tt,rt,at){let st=Math.ceil(rt/this.wordSize)*this.wordSize;return this._offset+st>this._data.length&&(this.allowLoose&&at&&this._offset+rt<=this._data.length?st=rt:logger$D.throwError("data out-of-bounds",Logger.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+st})),this._data.slice(this._offset,this._offset+st)}subReader(tt){return new Reader(this._data.slice(this._offset+tt),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(tt,rt){let at=this._peekBytes(0,tt,!!rt);return this._offset+=at.length,at.slice(0,tt)}readValue(){return BigNumber.from(this.readBytes(this.wordSize))}}var sha3$3={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(it){(function(){var tt="input is invalid type",rt="finalize already called",at=typeof window=="object",st=at?window:{};st.JS_SHA3_NO_WINDOW&&(at=!1);var ot=!at&&typeof self=="object",lt=!st.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;lt?st=globalThis:ot&&(st=self);var ut=!st.JS_SHA3_NO_COMMON_JS&&!0&&it.exports,ht=!st.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",mt="0123456789abcdef".split(""),bt=[31,7936,2031616,520093696],vt=[4,1024,262144,67108864],At=[1,256,65536,16777216],xt=[6,1536,393216,100663296],Et=[0,8,16,24],Tt=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],wt=[224,256,384,512],Ct=[128,256],It=["hex","buffer","arrayBuffer","array","digest"],St={128:168,256:136};(st.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(Jt){return Object.prototype.toString.call(Jt)==="[object Array]"}),ht&&(st.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(Jt){return typeof Jt=="object"&&Jt.buffer&&Jt.buffer.constructor===ArrayBuffer});for(var Rt=function(Jt,rn,fn){return function(pn){return new Pt(Jt,rn,Jt).update(pn)[fn]()}},Dt=function(Jt,rn,fn){return function(pn,vn){return new Pt(Jt,rn,vn).update(pn)[fn]()}},Wt=function(Jt,rn,fn){return function(pn,vn,En,dn){return Mt["cshake"+Jt].update(pn,vn,En,dn)[fn]()}},qt=function(Jt,rn,fn){return function(pn,vn,En,dn){return Mt["kmac"+Jt].update(pn,vn,En,dn)[fn]()}},Vt=function(Jt,rn,fn,pn){for(var vn=0;vn<It.length;++vn){var En=It[vn];Jt[En]=rn(fn,pn,En)}return Jt},Yt=function(Jt,rn){var fn=Rt(Jt,rn,"hex");return fn.create=function(){return new Pt(Jt,rn,Jt)},fn.update=function(pn){return fn.create().update(pn)},Vt(fn,Rt,Jt,rn)},jt=function(Jt,rn){var fn=Dt(Jt,rn,"hex");return fn.create=function(pn){return new Pt(Jt,rn,pn)},fn.update=function(pn,vn){return fn.create(vn).update(pn)},Vt(fn,Dt,Jt,rn)},kt=function(Jt,rn){var fn=St[Jt],pn=Wt(Jt,rn,"hex");return pn.create=function(vn,En,dn){return!En&&!dn?Mt["shake"+Jt].create(vn):new Pt(Jt,rn,vn).bytepad([En,dn],fn)},pn.update=function(vn,En,dn,cn){return pn.create(En,dn,cn).update(vn)},Vt(pn,Wt,Jt,rn)},zt=function(Jt,rn){var fn=St[Jt],pn=qt(Jt,rn,"hex");return pn.create=function(vn,En,dn){return new Zt(Jt,rn,En).bytepad(["KMAC",dn],fn).bytepad([vn],fn)},pn.update=function(vn,En,dn,cn){return pn.create(vn,dn,cn).update(En)},Vt(pn,qt,Jt,rn)},Nt=[{name:"keccak",padding:At,bits:wt,createMethod:Yt},{name:"sha3",padding:xt,bits:wt,createMethod:Yt},{name:"shake",padding:bt,bits:Ct,createMethod:jt},{name:"cshake",padding:vt,bits:Ct,createMethod:kt},{name:"kmac",padding:vt,bits:Ct,createMethod:zt}],Mt={},Lt=[],Ht=0;Ht<Nt.length;++Ht)for(var Qt=Nt[Ht],Ut=Qt.bits,Bt=0;Bt<Ut.length;++Bt){var Kt=Qt.name+"_"+Ut[Bt];if(Lt.push(Kt),Mt[Kt]=Qt.createMethod(Ut[Bt],Qt.padding),Qt.name!=="sha3"){var Gt=Qt.name+Ut[Bt];Lt.push(Gt),Mt[Gt]=Mt[Kt]}}function Pt(Jt,rn,fn){this.blocks=[],this.s=[],this.padding=rn,this.outputBits=fn,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(Jt<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=fn>>5,this.extraBytes=(fn&31)>>3;for(var pn=0;pn<50;++pn)this.s[pn]=0}Pt.prototype.update=function(Jt){if(this.finalized)throw new Error(rt);var rn,fn=typeof Jt;if(fn!=="string"){if(fn==="object"){if(Jt===null)throw new Error(tt);if(ht&&Jt.constructor===ArrayBuffer)Jt=new Uint8Array(Jt);else if(!Array.isArray(Jt)&&(!ht||!ArrayBuffer.isView(Jt)))throw new Error(tt)}else throw new Error(tt);rn=!0}for(var pn=this.blocks,vn=this.byteCount,En=Jt.length,dn=this.blockCount,cn=0,_n=this.s,wn,Ln;cn<En;){if(this.reset)for(this.reset=!1,pn[0]=this.block,wn=1;wn<dn+1;++wn)pn[wn]=0;if(rn)for(wn=this.start;cn<En&&wn<vn;++cn)pn[wn>>2]|=Jt[cn]<<Et[wn++&3];else for(wn=this.start;cn<En&&wn<vn;++cn)Ln=Jt.charCodeAt(cn),Ln<128?pn[wn>>2]|=Ln<<Et[wn++&3]:Ln<2048?(pn[wn>>2]|=(192|Ln>>6)<<Et[wn++&3],pn[wn>>2]|=(128|Ln&63)<<Et[wn++&3]):Ln<55296||Ln>=57344?(pn[wn>>2]|=(224|Ln>>12)<<Et[wn++&3],pn[wn>>2]|=(128|Ln>>6&63)<<Et[wn++&3],pn[wn>>2]|=(128|Ln&63)<<Et[wn++&3]):(Ln=65536+((Ln&1023)<<10|Jt.charCodeAt(++cn)&1023),pn[wn>>2]|=(240|Ln>>18)<<Et[wn++&3],pn[wn>>2]|=(128|Ln>>12&63)<<Et[wn++&3],pn[wn>>2]|=(128|Ln>>6&63)<<Et[wn++&3],pn[wn>>2]|=(128|Ln&63)<<Et[wn++&3]);if(this.lastByteIndex=wn,wn>=vn){for(this.start=wn-vn,this.block=pn[dn],wn=0;wn<dn;++wn)_n[wn]^=pn[wn];an(_n),this.reset=!0}else this.start=wn}return this},Pt.prototype.encode=function(Jt,rn){var fn=Jt&255,pn=1,vn=[fn];for(Jt=Jt>>8,fn=Jt&255;fn>0;)vn.unshift(fn),Jt=Jt>>8,fn=Jt&255,++pn;return rn?vn.push(pn):vn.unshift(pn),this.update(vn),vn.length},Pt.prototype.encodeString=function(Jt){var rn,fn=typeof Jt;if(fn!=="string"){if(fn==="object"){if(Jt===null)throw new Error(tt);if(ht&&Jt.constructor===ArrayBuffer)Jt=new Uint8Array(Jt);else if(!Array.isArray(Jt)&&(!ht||!ArrayBuffer.isView(Jt)))throw new Error(tt)}else throw new Error(tt);rn=!0}var pn=0,vn=Jt.length;if(rn)pn=vn;else for(var En=0;En<Jt.length;++En){var dn=Jt.charCodeAt(En);dn<128?pn+=1:dn<2048?pn+=2:dn<55296||dn>=57344?pn+=3:(dn=65536+((dn&1023)<<10|Jt.charCodeAt(++En)&1023),pn+=4)}return pn+=this.encode(pn*8),this.update(Jt),pn},Pt.prototype.bytepad=function(Jt,rn){for(var fn=this.encode(rn),pn=0;pn<Jt.length;++pn)fn+=this.encodeString(Jt[pn]);var vn=rn-fn%rn,En=[];return En.length=vn,this.update(En),this},Pt.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var Jt=this.blocks,rn=this.lastByteIndex,fn=this.blockCount,pn=this.s;if(Jt[rn>>2]|=this.padding[rn&3],this.lastByteIndex===this.byteCount)for(Jt[0]=Jt[fn],rn=1;rn<fn+1;++rn)Jt[rn]=0;for(Jt[fn-1]|=2147483648,rn=0;rn<fn;++rn)pn[rn]^=Jt[rn];an(pn)}},Pt.prototype.toString=Pt.prototype.hex=function(){this.finalize();for(var Jt=this.blockCount,rn=this.s,fn=this.outputBlocks,pn=this.extraBytes,vn=0,En=0,dn="",cn;En<fn;){for(vn=0;vn<Jt&&En<fn;++vn,++En)cn=rn[vn],dn+=mt[cn>>4&15]+mt[cn&15]+mt[cn>>12&15]+mt[cn>>8&15]+mt[cn>>20&15]+mt[cn>>16&15]+mt[cn>>28&15]+mt[cn>>24&15];En%Jt===0&&(an(rn),vn=0)}return pn&&(cn=rn[vn],dn+=mt[cn>>4&15]+mt[cn&15],pn>1&&(dn+=mt[cn>>12&15]+mt[cn>>8&15]),pn>2&&(dn+=mt[cn>>20&15]+mt[cn>>16&15])),dn},Pt.prototype.arrayBuffer=function(){this.finalize();var Jt=this.blockCount,rn=this.s,fn=this.outputBlocks,pn=this.extraBytes,vn=0,En=0,dn=this.outputBits>>3,cn;pn?cn=new ArrayBuffer(fn+1<<2):cn=new ArrayBuffer(dn);for(var _n=new Uint32Array(cn);En<fn;){for(vn=0;vn<Jt&&En<fn;++vn,++En)_n[En]=rn[vn];En%Jt===0&&an(rn)}return pn&&(_n[vn]=rn[vn],cn=cn.slice(0,dn)),cn},Pt.prototype.buffer=Pt.prototype.arrayBuffer,Pt.prototype.digest=Pt.prototype.array=function(){this.finalize();for(var Jt=this.blockCount,rn=this.s,fn=this.outputBlocks,pn=this.extraBytes,vn=0,En=0,dn=[],cn,_n;En<fn;){for(vn=0;vn<Jt&&En<fn;++vn,++En)cn=En<<2,_n=rn[vn],dn[cn]=_n&255,dn[cn+1]=_n>>8&255,dn[cn+2]=_n>>16&255,dn[cn+3]=_n>>24&255;En%Jt===0&&an(rn)}return pn&&(cn=En<<2,_n=rn[vn],dn[cn]=_n&255,pn>1&&(dn[cn+1]=_n>>8&255),pn>2&&(dn[cn+2]=_n>>16&255)),dn};function Zt(Jt,rn,fn){Pt.call(this,Jt,rn,fn)}Zt.prototype=new Pt,Zt.prototype.finalize=function(){return this.encode(this.outputBits,!0),Pt.prototype.finalize.call(this)};var an=function(Jt){var rn,fn,pn,vn,En,dn,cn,_n,wn,Ln,yn,nn,sn,hn,Cn,$n,gn,mn,Mn,On,Dn,on,Xt,tn,un,xn,Tn,In,jn,Un,zn,Xn,Gn,Sn,Fn,Nn,Wn,Kn,Hn,Yn,dr,tr,Qn,mr,Jn,rr,hr,er,ir,An,Rn,Pn,kn,Bn,Vn,nr,Zn,qn,cr,ar,sr,ur,yr;for(pn=0;pn<48;pn+=2)vn=Jt[0]^Jt[10]^Jt[20]^Jt[30]^Jt[40],En=Jt[1]^Jt[11]^Jt[21]^Jt[31]^Jt[41],dn=Jt[2]^Jt[12]^Jt[22]^Jt[32]^Jt[42],cn=Jt[3]^Jt[13]^Jt[23]^Jt[33]^Jt[43],_n=Jt[4]^Jt[14]^Jt[24]^Jt[34]^Jt[44],wn=Jt[5]^Jt[15]^Jt[25]^Jt[35]^Jt[45],Ln=Jt[6]^Jt[16]^Jt[26]^Jt[36]^Jt[46],yn=Jt[7]^Jt[17]^Jt[27]^Jt[37]^Jt[47],nn=Jt[8]^Jt[18]^Jt[28]^Jt[38]^Jt[48],sn=Jt[9]^Jt[19]^Jt[29]^Jt[39]^Jt[49],rn=nn^(dn<<1|cn>>>31),fn=sn^(cn<<1|dn>>>31),Jt[0]^=rn,Jt[1]^=fn,Jt[10]^=rn,Jt[11]^=fn,Jt[20]^=rn,Jt[21]^=fn,Jt[30]^=rn,Jt[31]^=fn,Jt[40]^=rn,Jt[41]^=fn,rn=vn^(_n<<1|wn>>>31),fn=En^(wn<<1|_n>>>31),Jt[2]^=rn,Jt[3]^=fn,Jt[12]^=rn,Jt[13]^=fn,Jt[22]^=rn,Jt[23]^=fn,Jt[32]^=rn,Jt[33]^=fn,Jt[42]^=rn,Jt[43]^=fn,rn=dn^(Ln<<1|yn>>>31),fn=cn^(yn<<1|Ln>>>31),Jt[4]^=rn,Jt[5]^=fn,Jt[14]^=rn,Jt[15]^=fn,Jt[24]^=rn,Jt[25]^=fn,Jt[34]^=rn,Jt[35]^=fn,Jt[44]^=rn,Jt[45]^=fn,rn=_n^(nn<<1|sn>>>31),fn=wn^(sn<<1|nn>>>31),Jt[6]^=rn,Jt[7]^=fn,Jt[16]^=rn,Jt[17]^=fn,Jt[26]^=rn,Jt[27]^=fn,Jt[36]^=rn,Jt[37]^=fn,Jt[46]^=rn,Jt[47]^=fn,rn=Ln^(vn<<1|En>>>31),fn=yn^(En<<1|vn>>>31),Jt[8]^=rn,Jt[9]^=fn,Jt[18]^=rn,Jt[19]^=fn,Jt[28]^=rn,Jt[29]^=fn,Jt[38]^=rn,Jt[39]^=fn,Jt[48]^=rn,Jt[49]^=fn,hn=Jt[0],Cn=Jt[1],rr=Jt[11]<<4|Jt[10]>>>28,hr=Jt[10]<<4|Jt[11]>>>28,In=Jt[20]<<3|Jt[21]>>>29,jn=Jt[21]<<3|Jt[20]>>>29,ar=Jt[31]<<9|Jt[30]>>>23,sr=Jt[30]<<9|Jt[31]>>>23,tr=Jt[40]<<18|Jt[41]>>>14,Qn=Jt[41]<<18|Jt[40]>>>14,Sn=Jt[2]<<1|Jt[3]>>>31,Fn=Jt[3]<<1|Jt[2]>>>31,$n=Jt[13]<<12|Jt[12]>>>20,gn=Jt[12]<<12|Jt[13]>>>20,er=Jt[22]<<10|Jt[23]>>>22,ir=Jt[23]<<10|Jt[22]>>>22,Un=Jt[33]<<13|Jt[32]>>>19,zn=Jt[32]<<13|Jt[33]>>>19,ur=Jt[42]<<2|Jt[43]>>>30,yr=Jt[43]<<2|Jt[42]>>>30,Bn=Jt[5]<<30|Jt[4]>>>2,Vn=Jt[4]<<30|Jt[5]>>>2,Nn=Jt[14]<<6|Jt[15]>>>26,Wn=Jt[15]<<6|Jt[14]>>>26,mn=Jt[25]<<11|Jt[24]>>>21,Mn=Jt[24]<<11|Jt[25]>>>21,An=Jt[34]<<15|Jt[35]>>>17,Rn=Jt[35]<<15|Jt[34]>>>17,Xn=Jt[45]<<29|Jt[44]>>>3,Gn=Jt[44]<<29|Jt[45]>>>3,tn=Jt[6]<<28|Jt[7]>>>4,un=Jt[7]<<28|Jt[6]>>>4,nr=Jt[17]<<23|Jt[16]>>>9,Zn=Jt[16]<<23|Jt[17]>>>9,Kn=Jt[26]<<25|Jt[27]>>>7,Hn=Jt[27]<<25|Jt[26]>>>7,On=Jt[36]<<21|Jt[37]>>>11,Dn=Jt[37]<<21|Jt[36]>>>11,Pn=Jt[47]<<24|Jt[46]>>>8,kn=Jt[46]<<24|Jt[47]>>>8,mr=Jt[8]<<27|Jt[9]>>>5,Jn=Jt[9]<<27|Jt[8]>>>5,xn=Jt[18]<<20|Jt[19]>>>12,Tn=Jt[19]<<20|Jt[18]>>>12,qn=Jt[29]<<7|Jt[28]>>>25,cr=Jt[28]<<7|Jt[29]>>>25,Yn=Jt[38]<<8|Jt[39]>>>24,dr=Jt[39]<<8|Jt[38]>>>24,on=Jt[48]<<14|Jt[49]>>>18,Xt=Jt[49]<<14|Jt[48]>>>18,Jt[0]=hn^~$n&mn,Jt[1]=Cn^~gn&Mn,Jt[10]=tn^~xn&In,Jt[11]=un^~Tn&jn,Jt[20]=Sn^~Nn&Kn,Jt[21]=Fn^~Wn&Hn,Jt[30]=mr^~rr&er,Jt[31]=Jn^~hr&ir,Jt[40]=Bn^~nr&qn,Jt[41]=Vn^~Zn&cr,Jt[2]=$n^~mn&On,Jt[3]=gn^~Mn&Dn,Jt[12]=xn^~In&Un,Jt[13]=Tn^~jn&zn,Jt[22]=Nn^~Kn&Yn,Jt[23]=Wn^~Hn&dr,Jt[32]=rr^~er&An,Jt[33]=hr^~ir&Rn,Jt[42]=nr^~qn&ar,Jt[43]=Zn^~cr&sr,Jt[4]=mn^~On&on,Jt[5]=Mn^~Dn&Xt,Jt[14]=In^~Un&Xn,Jt[15]=jn^~zn&Gn,Jt[24]=Kn^~Yn&tr,Jt[25]=Hn^~dr&Qn,Jt[34]=er^~An&Pn,Jt[35]=ir^~Rn&kn,Jt[44]=qn^~ar&ur,Jt[45]=cr^~sr&yr,Jt[6]=On^~on&hn,Jt[7]=Dn^~Xt&Cn,Jt[16]=Un^~Xn&tn,Jt[17]=zn^~Gn&un,Jt[26]=Yn^~tr&Sn,Jt[27]=dr^~Qn&Fn,Jt[36]=An^~Pn&mr,Jt[37]=Rn^~kn&Jn,Jt[46]=ar^~ur&Bn,Jt[47]=sr^~yr&Vn,Jt[8]=on^~hn&$n,Jt[9]=Xt^~Cn&gn,Jt[18]=Xn^~tn&xn,Jt[19]=Gn^~un&Tn,Jt[28]=tr^~Sn&Nn,Jt[29]=Qn^~Fn&Wn,Jt[38]=Pn^~mr&rr,Jt[39]=kn^~Jn&hr,Jt[48]=ur^~Bn&nr,Jt[49]=yr^~Vn&Zn,Jt[0]^=Tt[pn],Jt[1]^=Tt[pn+1]};if(ut)it.exports=Mt;else for(Ht=0;Ht<Lt.length;++Ht)st[Lt[Ht]]=Mt[Lt[Ht]]})()})(sha3$3);const sha3$2=sha3$3.exports;function keccak256$1(it){return"0x"+sha3$2.keccak_256(arrayify(it))}const lib_esm$h=Object.freeze(Object.defineProperty({__proto__:null,keccak256:keccak256$1},Symbol.toStringTag,{value:"Module"})),version$o="rlp/5.7.0",logger$C=new Logger(version$o);function arrayifyInteger(it){const tt=[];for(;it;)tt.unshift(it&255),it>>=8;return tt}function unarrayifyInteger(it,tt,rt){let at=0;for(let st=0;st<rt;st++)at=at*256+it[tt+st];return at}function _encode(it){if(Array.isArray(it)){let at=[];if(it.forEach(function(ot){at=at.concat(_encode(ot))}),at.length<=55)return at.unshift(192+at.length),at;const st=arrayifyInteger(at.length);return st.unshift(247+st.length),st.concat(at)}isBytesLike(it)||logger$C.throwArgumentError("RLP object must be BytesLike","object",it);const tt=Array.prototype.slice.call(arrayify(it));if(tt.length===1&&tt[0]<=127)return tt;if(tt.length<=55)return tt.unshift(128+tt.length),tt;const rt=arrayifyInteger(tt.length);return rt.unshift(183+rt.length),rt.concat(tt)}function encode$c(it){return hexlify(_encode(it))}function _decodeChildren(it,tt,rt,at){const st=[];for(;rt<tt+1+at;){const ot=_decode(it,rt);st.push(ot.result),rt+=ot.consumed,rt>tt+1+at&&logger$C.throwError("child data too short",Logger.errors.BUFFER_OVERRUN,{})}return{consumed:1+at,result:st}}function _decode(it,tt){if(it.length===0&&logger$C.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{}),it[tt]>=248){const rt=it[tt]-247;tt+1+rt>it.length&&logger$C.throwError("data short segment too short",Logger.errors.BUFFER_OVERRUN,{});const at=unarrayifyInteger(it,tt+1,rt);return tt+1+rt+at>it.length&&logger$C.throwError("data long segment too short",Logger.errors.BUFFER_OVERRUN,{}),_decodeChildren(it,tt,tt+1+rt,rt+at)}else if(it[tt]>=192){const rt=it[tt]-192;return tt+1+rt>it.length&&logger$C.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{}),_decodeChildren(it,tt,tt+1,rt)}else if(it[tt]>=184){const rt=it[tt]-183;tt+1+rt>it.length&&logger$C.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{});const at=unarrayifyInteger(it,tt+1,rt);tt+1+rt+at>it.length&&logger$C.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{});const st=hexlify(it.slice(tt+1+rt,tt+1+rt+at));return{consumed:1+rt+at,result:st}}else if(it[tt]>=128){const rt=it[tt]-128;tt+1+rt>it.length&&logger$C.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{});const at=hexlify(it.slice(tt+1,tt+1+rt));return{consumed:1+rt,result:at}}return{consumed:1,result:hexlify(it[tt])}}function decode$g(it){const tt=arrayify(it),rt=_decode(tt,0);return rt.consumed!==tt.length&&logger$C.throwArgumentError("invalid rlp data","data",it),rt.result}const lib_esm$g=Object.freeze(Object.defineProperty({__proto__:null,encode:encode$c,decode:decode$g},Symbol.toStringTag,{value:"Module"})),version$n="address/5.7.0",logger$B=new Logger(version$n);function getChecksumAddress(it){isHexString$4(it,20)||logger$B.throwArgumentError("invalid address","address",it),it=it.toLowerCase();const tt=it.substring(2).split(""),rt=new Uint8Array(40);for(let st=0;st<40;st++)rt[st]=tt[st].charCodeAt(0);const at=arrayify(keccak256$1(rt));for(let st=0;st<40;st+=2)at[st>>1]>>4>=8&&(tt[st]=tt[st].toUpperCase()),(at[st>>1]&15)>=8&&(tt[st+1]=tt[st+1].toUpperCase());return"0x"+tt.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(it){return Math.log10?Math.log10(it):Math.log(it)/Math.LN10}const ibanLookup={};for(let it=0;it<10;it++)ibanLookup[String(it)]=String(it);for(let it=0;it<26;it++)ibanLookup[String.fromCharCode(65+it)]=String(10+it);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(it){it=it.toUpperCase(),it=it.substring(4)+it.substring(0,2)+"00";let tt=it.split("").map(at=>ibanLookup[at]).join("");for(;tt.length>=safeDigits;){let at=tt.substring(0,safeDigits);tt=parseInt(at,10)%97+tt.substring(at.length)}let rt=String(98-parseInt(tt,10)%97);for(;rt.length<2;)rt="0"+rt;return rt}function getAddress(it){let tt=null;if(typeof it!="string"&&logger$B.throwArgumentError("invalid address","address",it),it.match(/^(0x)?[0-9a-fA-F]{40}$/))it.substring(0,2)!=="0x"&&(it="0x"+it),tt=getChecksumAddress(it),it.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&tt!==it&&logger$B.throwArgumentError("bad address checksum","address",it);else if(it.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(it.substring(2,4)!==ibanChecksum(it)&&logger$B.throwArgumentError("bad icap checksum","address",it),tt=_base36To16(it.substring(4));tt.length<40;)tt="0"+tt;tt=getChecksumAddress("0x"+tt)}else logger$B.throwArgumentError("invalid address","address",it);return tt}function isAddress(it){try{return getAddress(it),!0}catch{}return!1}function getIcapAddress(it){let tt=_base16To36(getAddress(it).substring(2)).toUpperCase();for(;tt.length<30;)tt="0"+tt;return"XE"+ibanChecksum("XE00"+tt)+tt}function getContractAddress(it){let tt=null;try{tt=getAddress(it.from)}catch{logger$B.throwArgumentError("missing from address","transaction",it)}const rt=stripZeros(arrayify(BigNumber.from(it.nonce).toHexString()));return getAddress(hexDataSlice(keccak256$1(encode$c([tt,rt])),12))}function getCreate2Address(it,tt,rt){return hexDataLength(tt)!==32&&logger$B.throwArgumentError("salt must be 32 bytes","salt",tt),hexDataLength(rt)!==32&&logger$B.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",rt),getAddress(hexDataSlice(keccak256$1(concat$6(["0xff",getAddress(it),tt,rt])),12))}const lib_esm$f=Object.freeze(Object.defineProperty({__proto__:null,getAddress,isAddress,getIcapAddress,getContractAddress,getCreate2Address},Symbol.toStringTag,{value:"Module"}));class AddressCoder extends Coder{constructor(tt){super("address","address",tt,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(tt,rt){try{rt=getAddress(rt)}catch(at){this._throwError(at.message,rt)}return tt.writeValue(rt)}decode(tt){return getAddress(hexZeroPad(tt.readValue().toHexString(),20))}}class AnonymousCoder extends Coder{constructor(tt){super(tt.name,tt.type,void 0,tt.dynamic),this.coder=tt}defaultValue(){return this.coder.defaultValue()}encode(tt,rt){return this.coder.encode(tt,rt)}decode(tt){return this.coder.decode(tt)}}const logger$A=new Logger(version$p);function pack$1(it,tt,rt){let at=null;if(Array.isArray(rt))at=rt;else if(rt&&typeof rt=="object"){let ht={};at=tt.map(mt=>{const bt=mt.localName;return bt||logger$A.throwError("cannot encode object for signature with missing names",Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:mt,value:rt}),ht[bt]&&logger$A.throwError("cannot encode object for signature with duplicate names",Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:mt,value:rt}),ht[bt]=!0,rt[bt]})}else logger$A.throwArgumentError("invalid tuple value","tuple",rt);tt.length!==at.length&&logger$A.throwArgumentError("types/value length mismatch","tuple",rt);let st=new Writer(it.wordSize),ot=new Writer(it.wordSize),lt=[];tt.forEach((ht,mt)=>{let bt=at[mt];if(ht.dynamic){let vt=ot.length;ht.encode(ot,bt);let At=st.writeUpdatableValue();lt.push(xt=>{At(xt+vt)})}else ht.encode(st,bt)}),lt.forEach(ht=>{ht(st.length)});let ut=it.appendWriter(st);return ut+=it.appendWriter(ot),ut}function unpack(it,tt){let rt=[],at=it.subReader(0);tt.forEach(ot=>{let lt=null;if(ot.dynamic){let ut=it.readValue(),ht=at.subReader(ut.toNumber());try{lt=ot.decode(ht)}catch(mt){if(mt.code===Logger.errors.BUFFER_OVERRUN)throw mt;lt=mt,lt.baseType=ot.name,lt.name=ot.localName,lt.type=ot.type}}else try{lt=ot.decode(it)}catch(ut){if(ut.code===Logger.errors.BUFFER_OVERRUN)throw ut;lt=ut,lt.baseType=ot.name,lt.name=ot.localName,lt.type=ot.type}lt!=null&&rt.push(lt)});const st=tt.reduce((ot,lt)=>{const ut=lt.localName;return ut&&(ot[ut]||(ot[ut]=0),ot[ut]++),ot},{});tt.forEach((ot,lt)=>{let ut=ot.localName;if(!ut||st[ut]!==1||(ut==="length"&&(ut="_length"),rt[ut]!=null))return;const ht=rt[lt];ht instanceof Error?Object.defineProperty(rt,ut,{enumerable:!0,get:()=>{throw ht}}):rt[ut]=ht});for(let ot=0;ot<rt.length;ot++){const lt=rt[ot];lt instanceof Error&&Object.defineProperty(rt,ot,{enumerable:!0,get:()=>{throw lt}})}return Object.freeze(rt)}class ArrayCoder extends Coder{constructor(tt,rt,at){const st=tt.type+"["+(rt>=0?rt:"")+"]",ot=rt===-1||tt.dynamic;super("array",st,at,ot),this.coder=tt,this.length=rt}defaultValue(){const tt=this.coder.defaultValue(),rt=[];for(let at=0;at<this.length;at++)rt.push(tt);return rt}encode(tt,rt){Array.isArray(rt)||this._throwError("expected array value",rt);let at=this.length;at===-1&&(at=rt.length,tt.writeValue(rt.length)),logger$A.checkArgumentCount(rt.length,at,"coder array"+(this.localName?" "+this.localName:""));let st=[];for(let ot=0;ot<rt.length;ot++)st.push(this.coder);return pack$1(tt,st,rt)}decode(tt){let rt=this.length;rt===-1&&(rt=tt.readValue().toNumber(),rt*32>tt._data.length&&logger$A.throwError("insufficient data length",Logger.errors.BUFFER_OVERRUN,{length:tt._data.length,count:rt}));let at=[];for(let st=0;st<rt;st++)at.push(new AnonymousCoder(this.coder));return tt.coerce(this.name,unpack(tt,at))}}class BooleanCoder extends Coder{constructor(tt){super("bool","bool",tt,!1)}defaultValue(){return!1}encode(tt,rt){return tt.writeValue(rt?1:0)}decode(tt){return tt.coerce(this.type,!tt.readValue().isZero())}}class DynamicBytesCoder extends Coder{constructor(tt,rt){super(tt,tt,rt,!0)}defaultValue(){return"0x"}encode(tt,rt){rt=arrayify(rt);let at=tt.writeValue(rt.length);return at+=tt.writeBytes(rt),at}decode(tt){return tt.readBytes(tt.readValue().toNumber(),!0)}}class BytesCoder extends DynamicBytesCoder{constructor(tt){super("bytes",tt)}decode(tt){return tt.coerce(this.name,hexlify(super.decode(tt)))}}class FixedBytesCoder extends Coder{constructor(tt,rt){let at="bytes"+String(tt);super(at,at,rt,!1),this.size=tt}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(tt,rt){let at=arrayify(rt);return at.length!==this.size&&this._throwError("incorrect data length",rt),tt.writeBytes(at)}decode(tt){return tt.coerce(this.name,hexlify(tt.readBytes(this.size)))}}class NullCoder extends Coder{constructor(tt){super("null","",tt,!1)}defaultValue(){return null}encode(tt,rt){return rt!=null&&this._throwError("not null",rt),tt.writeBytes([])}decode(tt){return tt.readBytes(0),tt.coerce(this.name,null)}}const AddressZero="0x0000000000000000000000000000000000000000",NegativeOne$1=BigNumber.from(-1),Zero$1=BigNumber.from(0),One$1=BigNumber.from(1),MaxUint256$1=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),HashZero="0x0000000000000000000000000000000000000000000000000000000000000000";class NumberCoder extends Coder{constructor(tt,rt,at){const st=(rt?"int":"uint")+tt*8;super(st,st,at,!1),this.size=tt,this.signed=rt}defaultValue(){return 0}encode(tt,rt){let at=BigNumber.from(rt),st=MaxUint256$1.mask(tt.wordSize*8);if(this.signed){let ot=st.mask(this.size*8-1);(at.gt(ot)||at.lt(ot.add(One$1).mul(NegativeOne$1)))&&this._throwError("value out-of-bounds",rt)}else(at.lt(Zero$1)||at.gt(st.mask(this.size*8)))&&this._throwError("value out-of-bounds",rt);return at=at.toTwos(this.size*8).mask(this.size*8),this.signed&&(at=at.fromTwos(this.size*8).toTwos(8*tt.wordSize)),tt.writeValue(at)}decode(tt){let rt=tt.readValue().mask(this.size*8);return this.signed&&(rt=rt.fromTwos(this.size*8)),tt.coerce(this.name,rt)}}const version$m="strings/5.7.0",logger$z=new Logger(version$m);var UnicodeNormalizationForm;(function(it){it.current="",it.NFC="NFC",it.NFD="NFD",it.NFKC="NFKC",it.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(it){it.UNEXPECTED_CONTINUE="unexpected continuation byte",it.BAD_PREFIX="bad codepoint prefix",it.OVERRUN="string overrun",it.MISSING_CONTINUE="missing continuation byte",it.OUT_OF_RANGE="out of UTF-8 range",it.UTF16_SURROGATE="UTF-16 surrogate",it.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function errorFunc(it,tt,rt,at,st){return logger$z.throwArgumentError(`invalid codepoint at offset ${tt}; ${it}`,"bytes",rt)}function ignoreFunc(it,tt,rt,at,st){if(it===Utf8ErrorReason.BAD_PREFIX||it===Utf8ErrorReason.UNEXPECTED_CONTINUE){let ot=0;for(let lt=tt+1;lt<rt.length&&rt[lt]>>6===2;lt++)ot++;return ot}return it===Utf8ErrorReason.OVERRUN?rt.length-tt-1:0}function replaceFunc(it,tt,rt,at,st){return it===Utf8ErrorReason.OVERLONG?(at.push(st),0):(at.push(65533),ignoreFunc(it,tt,rt))}const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(it,tt){tt==null&&(tt=Utf8ErrorFuncs.error),it=arrayify(it);const rt=[];let at=0;for(;at<it.length;){const st=it[at++];if(st>>7===0){rt.push(st);continue}let ot=null,lt=null;if((st&224)===192)ot=1,lt=127;else if((st&240)===224)ot=2,lt=2047;else if((st&248)===240)ot=3,lt=65535;else{(st&192)===128?at+=tt(Utf8ErrorReason.UNEXPECTED_CONTINUE,at-1,it,rt):at+=tt(Utf8ErrorReason.BAD_PREFIX,at-1,it,rt);continue}if(at-1+ot>=it.length){at+=tt(Utf8ErrorReason.OVERRUN,at-1,it,rt);continue}let ut=st&(1<<8-ot-1)-1;for(let ht=0;ht<ot;ht++){let mt=it[at];if((mt&192)!=128){at+=tt(Utf8ErrorReason.MISSING_CONTINUE,at,it,rt),ut=null;break}ut=ut<<6|mt&63,at++}if(ut!==null){if(ut>1114111){at+=tt(Utf8ErrorReason.OUT_OF_RANGE,at-1-ot,it,rt,ut);continue}if(ut>=55296&&ut<=57343){at+=tt(Utf8ErrorReason.UTF16_SURROGATE,at-1-ot,it,rt,ut);continue}if(ut<=lt){at+=tt(Utf8ErrorReason.OVERLONG,at-1-ot,it,rt,ut);continue}rt.push(ut)}}return rt}function toUtf8Bytes(it,tt=UnicodeNormalizationForm.current){tt!=UnicodeNormalizationForm.current&&(logger$z.checkNormalize(),it=it.normalize(tt));let rt=[];for(let at=0;at<it.length;at++){const st=it.charCodeAt(at);if(st<128)rt.push(st);else if(st<2048)rt.push(st>>6|192),rt.push(st&63|128);else if((st&64512)==55296){at++;const ot=it.charCodeAt(at);if(at>=it.length||(ot&64512)!==56320)throw new Error("invalid utf-8 string");const lt=65536+((st&1023)<<10)+(ot&1023);rt.push(lt>>18|240),rt.push(lt>>12&63|128),rt.push(lt>>6&63|128),rt.push(lt&63|128)}else rt.push(st>>12|224),rt.push(st>>6&63|128),rt.push(st&63|128)}return arrayify(rt)}function escapeChar(it){const tt="0000"+it.toString(16);return"\\u"+tt.substring(tt.length-4)}function _toEscapedUtf8String(it,tt){return'"'+getUtf8CodePoints(it,tt).map(rt=>{if(rt<256){switch(rt){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(rt>=32&&rt<127)return String.fromCharCode(rt)}return rt<=65535?escapeChar(rt):(rt-=65536,escapeChar((rt>>10&1023)+55296)+escapeChar((rt&1023)+56320))}).join("")+'"'}function _toUtf8String(it){return it.map(tt=>tt<=65535?String.fromCharCode(tt):(tt-=65536,String.fromCharCode((tt>>10&1023)+55296,(tt&1023)+56320))).join("")}function toUtf8String(it,tt){return _toUtf8String(getUtf8CodePoints(it,tt))}function toUtf8CodePoints(it,tt=UnicodeNormalizationForm.current){return getUtf8CodePoints(toUtf8Bytes(it,tt))}function formatBytes32String(it){const tt=toUtf8Bytes(it);if(tt.length>31)throw new Error("bytes32 string must be less than 32 bytes");return hexlify(concat$6([tt,HashZero]).slice(0,32))}function parseBytes32String(it){const tt=arrayify(it);if(tt.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(tt[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let rt=31;for(;tt[rt-1]===0;)rt--;return toUtf8String(tt.slice(0,rt))}function bytes2(it){if(it.length%4!==0)throw new Error("bad data");let tt=[];for(let rt=0;rt<it.length;rt+=4)tt.push(parseInt(it.substring(rt,rt+4),16));return tt}function createTable(it,tt){tt||(tt=function(st){return[parseInt(st,16)]});let rt=0,at={};return it.split(",").forEach(st=>{let ot=st.split(":");rt+=parseInt(ot[0],16),at[rt]=tt(ot[1])}),at}function createRangeTable(it){let tt=0;return it.split(",").map(rt=>{let at=rt.split("-");at.length===1?at[1]="0":at[1]===""&&(at[1]="1");let st=tt+parseInt(at[0],16);return tt=parseInt(at[1],16),{l:st,h:tt}})}function matchMap(it,tt){let rt=0;for(let at=0;at<tt.length;at++){let st=tt[at];if(rt+=st.l,it>=rt&&it<=rt+st.h&&(it-rt)%(st.d||1)===0){if(st.e&&st.e.indexOf(it-rt)!==-1)continue;return st}}return null}const Table_A_1_ranges=createRangeTable("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Table_B_1_flags="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(it=>parseInt(it,16)),Table_B_2_ranges=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Table_B_2_lut_abs=createTable("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Table_B_2_lut_rel=createTable("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Table_B_2_complex=createTable("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",bytes2),Table_C_ranges=createRangeTable("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function flatten$1(it){return it.reduce((tt,rt)=>(rt.forEach(at=>{tt.push(at)}),tt),[])}function _nameprepTableA1(it){return!!matchMap(it,Table_A_1_ranges)}function _nameprepTableB2(it){let tt=matchMap(it,Table_B_2_ranges);if(tt)return[it+tt.s];let rt=Table_B_2_lut_abs[it];if(rt)return rt;let at=Table_B_2_lut_rel[it];if(at)return[it+at[0]];let st=Table_B_2_complex[it];return st||null}function _nameprepTableC(it){return!!matchMap(it,Table_C_ranges)}function nameprep(it){if(it.match(/^[a-z0-9-]*$/i)&&it.length<=59)return it.toLowerCase();let tt=toUtf8CodePoints(it);tt=flatten$1(tt.map(at=>{if(Table_B_1_flags.indexOf(at)>=0)return[];if(at>=65024&&at<=65039)return[];let st=_nameprepTableB2(at);return st||[at]})),tt=toUtf8CodePoints(_toUtf8String(tt),UnicodeNormalizationForm.NFKC),tt.forEach(at=>{if(_nameprepTableC(at))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),tt.forEach(at=>{if(_nameprepTableA1(at))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let rt=_toUtf8String(tt);if(rt.substring(0,1)==="-"||rt.substring(2,4)==="--"||rt.substring(rt.length-1)==="-")throw new Error("invalid hyphen");return rt}const lib_esm$e=Object.freeze(Object.defineProperty({__proto__:null,_toEscapedUtf8String,toUtf8Bytes,toUtf8CodePoints,toUtf8String,Utf8ErrorFuncs,get Utf8ErrorReason(){return Utf8ErrorReason},get UnicodeNormalizationForm(){return UnicodeNormalizationForm},formatBytes32String,parseBytes32String,nameprep},Symbol.toStringTag,{value:"Module"}));class StringCoder extends DynamicBytesCoder{constructor(tt){super("string",tt)}defaultValue(){return""}encode(tt,rt){return super.encode(tt,toUtf8Bytes(rt))}decode(tt){return toUtf8String(super.decode(tt))}}class TupleCoder extends Coder{constructor(tt,rt){let at=!1;const st=[];tt.forEach(lt=>{lt.dynamic&&(at=!0),st.push(lt.type)});const ot="tuple("+st.join(",")+")";super("tuple",ot,rt,at),this.coders=tt}defaultValue(){const tt=[];this.coders.forEach(at=>{tt.push(at.defaultValue())});const rt=this.coders.reduce((at,st)=>{const ot=st.localName;return ot&&(at[ot]||(at[ot]=0),at[ot]++),at},{});return this.coders.forEach((at,st)=>{let ot=at.localName;!ot||rt[ot]!==1||(ot==="length"&&(ot="_length"),tt[ot]==null&&(tt[ot]=tt[st]))}),Object.freeze(tt)}encode(tt,rt){return pack$1(tt,this.coders,rt)}decode(tt){return tt.coerce(this.name,unpack(tt,this.coders))}}const logger$y=new Logger(version$p),paramTypeBytes=new RegExp(/^bytes([0-9]*)$/),paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);class AbiCoder{constructor(tt){defineReadOnly(this,"coerceFunc",tt||null)}_getCoder(tt){switch(tt.baseType){case"address":return new AddressCoder(tt.name);case"bool":return new BooleanCoder(tt.name);case"string":return new StringCoder(tt.name);case"bytes":return new BytesCoder(tt.name);case"array":return new ArrayCoder(this._getCoder(tt.arrayChildren),tt.arrayLength,tt.name);case"tuple":return new TupleCoder((tt.components||[]).map(at=>this._getCoder(at)),tt.name);case"":return new NullCoder(tt.name)}let rt=tt.type.match(paramTypeNumber);if(rt){let at=parseInt(rt[2]||"256");return(at===0||at>256||at%8!==0)&&logger$y.throwArgumentError("invalid "+rt[1]+" bit length","param",tt),new NumberCoder(at/8,rt[1]==="int",tt.name)}if(rt=tt.type.match(paramTypeBytes),rt){let at=parseInt(rt[1]);return(at===0||at>32)&&logger$y.throwArgumentError("invalid bytes length","param",tt),new FixedBytesCoder(at,tt.name)}return logger$y.throwArgumentError("invalid type","type",tt.type)}_getWordSize(){return 32}_getReader(tt,rt){return new Reader(tt,this._getWordSize(),this.coerceFunc,rt)}_getWriter(){return new Writer(this._getWordSize())}getDefaultValue(tt){const rt=tt.map(st=>this._getCoder(ParamType.from(st)));return new TupleCoder(rt,"_").defaultValue()}encode(tt,rt){tt.length!==rt.length&&logger$y.throwError("types/values length mismatch",Logger.errors.INVALID_ARGUMENT,{count:{types:tt.length,values:rt.length},value:{types:tt,values:rt}});const at=tt.map(lt=>this._getCoder(ParamType.from(lt))),st=new TupleCoder(at,"_"),ot=this._getWriter();return st.encode(ot,rt),ot.data}decode(tt,rt,at){const st=tt.map(lt=>this._getCoder(ParamType.from(lt)));return new TupleCoder(st,"_").decode(this._getReader(arrayify(rt),at))}}const defaultAbiCoder=new AbiCoder;function id(it){return keccak256$1(toUtf8Bytes(it))}const version$l="hash/5.7.0";function decode$f(it){it=atob(it);const tt=[];for(let rt=0;rt<it.length;rt++)tt.push(it.charCodeAt(rt));return arrayify(tt)}function encode$b(it){it=arrayify(it);let tt="";for(let rt=0;rt<it.length;rt++)tt+=String.fromCharCode(it[rt]);return btoa(tt)}const lib_esm$d=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$f,encode:encode$b},Symbol.toStringTag,{value:"Module"}));function flat$1(it,tt){tt==null&&(tt=1);const rt=[],at=rt.forEach,st=function(ot,lt){at.call(ot,function(ut){lt>0&&Array.isArray(ut)?st(ut,lt-1):rt.push(ut)})};return st(it,tt),rt}function fromEntries(it){const tt={};for(let rt=0;rt<it.length;rt++){const at=it[rt];tt[at[0]]=at[1]}return tt}function decode_arithmetic(it){let tt=0;function rt(){return it[tt++]<<8|it[tt++]}let at=rt(),st=1,ot=[0,1];for(let Dt=1;Dt<at;Dt++)ot.push(st+=rt());let lt=rt(),ut=tt;tt+=lt;let ht=0,mt=0;function bt(){return ht==0&&(mt=mt<<8|it[tt++],ht=8),mt>>--ht&1}const vt=31,At=Math.pow(2,vt),xt=At>>>1,Et=xt>>1,Tt=At-1;let wt=0;for(let Dt=0;Dt<vt;Dt++)wt=wt<<1|bt();let Ct=[],It=0,St=At;for(;;){let Dt=Math.floor(((wt-It+1)*st-1)/St),Wt=0,qt=at;for(;qt-Wt>1;){let jt=Wt+qt>>>1;Dt<ot[jt]?qt=jt:Wt=jt}if(Wt==0)break;Ct.push(Wt);let Vt=It+Math.floor(St*ot[Wt]/st),Yt=It+Math.floor(St*ot[Wt+1]/st)-1;for(;((Vt^Yt)&xt)==0;)wt=wt<<1&Tt|bt(),Vt=Vt<<1&Tt,Yt=Yt<<1&Tt|1;for(;Vt&~Yt&Et;)wt=wt&xt|wt<<1&Tt>>>1|bt(),Vt=Vt<<1^xt,Yt=(Yt^xt)<<1|xt|1;It=Vt,St=1+Yt-Vt}let Rt=at-4;return Ct.map(Dt=>{switch(Dt-Rt){case 3:return Rt+65792+(it[ut++]<<16|it[ut++]<<8|it[ut++]);case 2:return Rt+256+(it[ut++]<<8|it[ut++]);case 1:return Rt+it[ut++];default:return Dt-1}})}function read_payload(it){let tt=0;return()=>it[tt++]}function read_compressed_payload(it){return read_payload(decode_arithmetic(it))}function signed(it){return it&1?~it>>1:it>>1}function read_counts(it,tt){let rt=Array(it);for(let at=0;at<it;at++)rt[at]=1+tt();return rt}function read_ascending(it,tt){let rt=Array(it);for(let at=0,st=-1;at<it;at++)rt[at]=st+=1+tt();return rt}function read_deltas(it,tt){let rt=Array(it);for(let at=0,st=0;at<it;at++)rt[at]=st+=signed(tt());return rt}function read_member_array(it,tt){let rt=read_ascending(it(),it),at=it(),st=read_ascending(at,it),ot=read_counts(at,it);for(let lt=0;lt<at;lt++)for(let ut=0;ut<ot[lt];ut++)rt.push(st[lt]+ut);return tt?rt.map(lt=>tt[lt]):rt}function read_mapped_map(it){let tt=[];for(;;){let rt=it();if(rt==0)break;tt.push(read_linear_table(rt,it))}for(;;){let rt=it()-1;if(rt<0)break;tt.push(read_replacement_table(rt,it))}return fromEntries(flat$1(tt))}function read_zero_terminated_array(it){let tt=[];for(;;){let rt=it();if(rt==0)break;tt.push(rt)}return tt}function read_transposed(it,tt,rt){let at=Array(it).fill(void 0).map(()=>[]);for(let st=0;st<tt;st++)read_deltas(it,rt).forEach((ot,lt)=>at[lt].push(ot));return at}function read_linear_table(it,tt){let rt=1+tt(),at=tt(),st=read_zero_terminated_array(tt),ot=read_transposed(st.length,1+it,tt);return flat$1(ot.map((lt,ut)=>{const ht=lt[0],mt=lt.slice(1);return Array(st[ut]).fill(void 0).map((bt,vt)=>{let At=vt*at;return[ht+vt*rt,mt.map(xt=>xt+At)]})}))}function read_replacement_table(it,tt){let rt=1+tt();return read_transposed(rt,1+it,tt).map(st=>[st[0],st.slice(1)])}function read_emoji_trie(it){let tt=read_member_array(it).sort((at,st)=>at-st);return rt();function rt(){let at=[];for(;;){let mt=read_member_array(it,tt);if(mt.length==0)break;at.push({set:new Set(mt),node:rt()})}at.sort((mt,bt)=>bt.set.size-mt.set.size);let st=it(),ot=st%3;st=st/3|0;let lt=!!(st&1);st>>=1;let ut=st==1,ht=st==2;return{branches:at,valid:ot,fe0f:lt,save:ut,check:ht}}}function getData(){return read_compressed_payload(decode$f("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const r$b=getData(),VALID=new Set(read_member_array(r$b)),IGNORED=new Set(read_member_array(r$b)),MAPPED=read_mapped_map(r$b),EMOJI_ROOT=read_emoji_trie(r$b),HYPHEN=45,UNDERSCORE=95;function explode_cp(it){return toUtf8CodePoints(it)}function filter_fe0f(it){return it.filter(tt=>tt!=65039)}function ens_normalize_post_check(it){for(let tt of it.split(".")){let rt=explode_cp(tt);try{for(let at=rt.lastIndexOf(UNDERSCORE)-1;at>=0;at--)if(rt[at]!==UNDERSCORE)throw new Error("underscore only allowed at start");if(rt.length>=4&&rt.every(at=>at<128)&&rt[2]===HYPHEN&&rt[3]===HYPHEN)throw new Error("invalid label extension")}catch(at){throw new Error(`Invalid label "${tt}": ${at.message}`)}}return it}function ens_normalize(it){return ens_normalize_post_check(normalize$1(it,filter_fe0f))}function normalize$1(it,tt){let rt=explode_cp(it).reverse(),at=[];for(;rt.length;){let st=consume_emoji_reversed(rt);if(st){at.push(...tt(st));continue}let ot=rt.pop();if(VALID.has(ot)){at.push(ot);continue}if(IGNORED.has(ot))continue;let lt=MAPPED[ot];if(lt){at.push(...lt);continue}throw new Error(`Disallowed codepoint: 0x${ot.toString(16).toUpperCase()}`)}return ens_normalize_post_check(nfc(String.fromCodePoint(...at)))}function nfc(it){return it.normalize("NFC")}function consume_emoji_reversed(it,tt){var rt;let at=EMOJI_ROOT,st,ot,lt=[],ut=it.length;for(tt&&(tt.length=0);ut;){let ht=it[--ut];if(at=(rt=at.branches.find(mt=>mt.set.has(ht)))===null||rt===void 0?void 0:rt.node,!at)break;if(at.save)ot=ht;else if(at.check&&ht===ot)break;lt.push(ht),at.fe0f&&(lt.push(65039),ut>0&&it[ut-1]==65039&&ut--),at.valid&&(st=lt.slice(),at.valid==2&&st.splice(1,1),tt&&tt.push(...it.slice(ut).reverse()),it.length=ut)}return st}const logger$x=new Logger(version$l),Zeros$1=new Uint8Array(32);Zeros$1.fill(0);function checkComponent(it){if(it.length===0)throw new Error("invalid ENS name; empty component");return it}function ensNameSplit(it){const tt=toUtf8Bytes(ens_normalize(it)),rt=[];if(it.length===0)return rt;let at=0;for(let st=0;st<tt.length;st++)tt[st]===46&&(rt.push(checkComponent(tt.slice(at,st))),at=st+1);if(at>=tt.length)throw new Error("invalid ENS name; empty component");return rt.push(checkComponent(tt.slice(at))),rt}function ensNormalize(it){return ensNameSplit(it).map(tt=>toUtf8String(tt)).join(".")}function isValidName(it){try{return ensNameSplit(it).length!==0}catch{}return!1}function namehash(it){typeof it!="string"&&logger$x.throwArgumentError("invalid ENS name; not a string","name",it);let tt=Zeros$1;const rt=ensNameSplit(it);for(;rt.length;)tt=keccak256$1(concat$6([tt,keccak256$1(rt.pop())]));return hexlify(tt)}function dnsEncode(it){return hexlify(concat$6(ensNameSplit(it).map(tt=>{if(tt.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const rt=new Uint8Array(tt.length+1);return rt.set(tt,1),rt[0]=rt.length-1,rt})))+"00"}const messagePrefix=`Ethereum Signed Message:
`;function hashMessage(it){return typeof it=="string"&&(it=toUtf8Bytes(it)),keccak256$1(concat$6([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(it.length)),it]))}var __awaiter$e=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$w=new Logger(version$l),padding$1=new Uint8Array(32);padding$1.fill(0);const NegativeOne=BigNumber.from(-1),Zero=BigNumber.from(0),One=BigNumber.from(1),MaxUint256=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(it){const tt=arrayify(it),rt=tt.length%32;return rt?hexConcat([tt,padding$1.slice(rt)]):hexlify(tt)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(it){return function(tt){return typeof tt!="string"&&logger$w.throwArgumentError(`invalid domain value for ${JSON.stringify(it)}`,`domain.${it}`,tt),tt}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(it){try{return BigNumber.from(it).toString()}catch{}return logger$w.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",it)},verifyingContract:function(it){try{return getAddress(it).toLowerCase()}catch{}return logger$w.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",it)},salt:function(it){try{const tt=arrayify(it);if(tt.length!==32)throw new Error("bad length");return hexlify(tt)}catch{}return logger$w.throwArgumentError('invalid domain value "salt"',"domain.salt",it)}};function getBaseEncoder(it){{const tt=it.match(/^(u?)int(\d*)$/);if(tt){const rt=tt[1]==="",at=parseInt(tt[2]||"256");(at%8!==0||at>256||tt[2]&&tt[2]!==String(at))&&logger$w.throwArgumentError("invalid numeric width","type",it);const st=MaxUint256.mask(rt?at-1:at),ot=rt?st.add(One).mul(NegativeOne):Zero;return function(lt){const ut=BigNumber.from(lt);return(ut.lt(ot)||ut.gt(st))&&logger$w.throwArgumentError(`value out-of-bounds for ${it}`,"value",lt),hexZeroPad(ut.toTwos(256).toHexString(),32)}}}{const tt=it.match(/^bytes(\d+)$/);if(tt){const rt=parseInt(tt[1]);return(rt===0||rt>32||tt[1]!==String(rt))&&logger$w.throwArgumentError("invalid bytes width","type",it),function(at){return arrayify(at).length!==rt&&logger$w.throwArgumentError(`invalid length for ${it}`,"value",at),hexPadRight(at)}}}switch(it){case"address":return function(tt){return hexZeroPad(getAddress(tt),32)};case"bool":return function(tt){return tt?hexTrue:hexFalse};case"bytes":return function(tt){return keccak256$1(tt)};case"string":return function(tt){return id(tt)}}return null}function encodeType(it,tt){return`${it}(${tt.map(({name:rt,type:at})=>at+" "+rt).join(",")})`}class TypedDataEncoder{constructor(tt){defineReadOnly(this,"types",Object.freeze(deepCopy(tt))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const rt={},at={},st={};Object.keys(tt).forEach(ut=>{rt[ut]={},at[ut]=[],st[ut]={}});for(const ut in tt){const ht={};tt[ut].forEach(mt=>{ht[mt.name]&&logger$w.throwArgumentError(`duplicate variable name ${JSON.stringify(mt.name)} in ${JSON.stringify(ut)}`,"types",tt),ht[mt.name]=!0;const bt=mt.type.match(/^([^\x5b]*)(\x5b|$)/)[1];bt===ut&&logger$w.throwArgumentError(`circular type reference to ${JSON.stringify(bt)}`,"types",tt),!getBaseEncoder(bt)&&(at[bt]||logger$w.throwArgumentError(`unknown type ${JSON.stringify(bt)}`,"types",tt),at[bt].push(ut),rt[ut][bt]=!0)})}const ot=Object.keys(at).filter(ut=>at[ut].length===0);ot.length===0?logger$w.throwArgumentError("missing primary type","types",tt):ot.length>1&&logger$w.throwArgumentError(`ambiguous primary types or unused types: ${ot.map(ut=>JSON.stringify(ut)).join(", ")}`,"types",tt),defineReadOnly(this,"primaryType",ot[0]);function lt(ut,ht){ht[ut]&&logger$w.throwArgumentError(`circular type reference to ${JSON.stringify(ut)}`,"types",tt),ht[ut]=!0,Object.keys(rt[ut]).forEach(mt=>{!at[mt]||(lt(mt,ht),Object.keys(ht).forEach(bt=>{st[bt][mt]=!0}))}),delete ht[ut]}lt(this.primaryType,{});for(const ut in st){const ht=Object.keys(st[ut]);ht.sort(),this._types[ut]=encodeType(ut,tt[ut])+ht.map(mt=>encodeType(mt,tt[mt])).join("")}}getEncoder(tt){let rt=this._encoderCache[tt];return rt||(rt=this._encoderCache[tt]=this._getEncoder(tt)),rt}_getEncoder(tt){{const st=getBaseEncoder(tt);if(st)return st}const rt=tt.match(/^(.*)(\x5b(\d*)\x5d)$/);if(rt){const st=rt[1],ot=this.getEncoder(st),lt=parseInt(rt[3]);return ut=>{lt>=0&&ut.length!==lt&&logger$w.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",ut);let ht=ut.map(ot);return this._types[st]&&(ht=ht.map(keccak256$1)),keccak256$1(hexConcat(ht))}}const at=this.types[tt];if(at){const st=id(this._types[tt]);return ot=>{const lt=at.map(({name:ut,type:ht})=>{const mt=this.getEncoder(ht)(ot[ut]);return this._types[ht]?keccak256$1(mt):mt});return lt.unshift(st),hexConcat(lt)}}return logger$w.throwArgumentError(`unknown type: ${tt}`,"type",tt)}encodeType(tt){const rt=this._types[tt];return rt||logger$w.throwArgumentError(`unknown type: ${JSON.stringify(tt)}`,"name",tt),rt}encodeData(tt,rt){return this.getEncoder(tt)(rt)}hashStruct(tt,rt){return keccak256$1(this.encodeData(tt,rt))}encode(tt){return this.encodeData(this.primaryType,tt)}hash(tt){return this.hashStruct(this.primaryType,tt)}_visit(tt,rt,at){if(getBaseEncoder(tt))return at(tt,rt);const st=tt.match(/^(.*)(\x5b(\d*)\x5d)$/);if(st){const lt=st[1],ut=parseInt(st[3]);return ut>=0&&rt.length!==ut&&logger$w.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",rt),rt.map(ht=>this._visit(lt,ht,at))}const ot=this.types[tt];return ot?ot.reduce((lt,{name:ut,type:ht})=>(lt[ut]=this._visit(ht,rt[ut],at),lt),{}):logger$w.throwArgumentError(`unknown type: ${tt}`,"type",tt)}visit(tt,rt){return this._visit(this.primaryType,tt,rt)}static from(tt){return new TypedDataEncoder(tt)}static getPrimaryType(tt){return TypedDataEncoder.from(tt).primaryType}static hashStruct(tt,rt,at){return TypedDataEncoder.from(rt).hashStruct(tt,at)}static hashDomain(tt){const rt=[];for(const at in tt){const st=domainFieldTypes[at];st||logger$w.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(at)}`,"domain",tt),rt.push({name:at,type:st})}return rt.sort((at,st)=>domainFieldNames.indexOf(at.name)-domainFieldNames.indexOf(st.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:rt},tt)}static encode(tt,rt,at){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(tt),TypedDataEncoder.from(rt).hash(at)])}static hash(tt,rt,at){return keccak256$1(TypedDataEncoder.encode(tt,rt,at))}static resolveNames(tt,rt,at,st){return __awaiter$e(this,void 0,void 0,function*(){tt=shallowCopy(tt);const ot={};tt.verifyingContract&&!isHexString$4(tt.verifyingContract,20)&&(ot[tt.verifyingContract]="0x");const lt=TypedDataEncoder.from(rt);lt.visit(at,(ut,ht)=>(ut==="address"&&!isHexString$4(ht,20)&&(ot[ht]="0x"),ht));for(const ut in ot)ot[ut]=yield st(ut);return tt.verifyingContract&&ot[tt.verifyingContract]&&(tt.verifyingContract=ot[tt.verifyingContract]),at=lt.visit(at,(ut,ht)=>ut==="address"&&ot[ht]?ot[ht]:ht),{domain:tt,value:at}})}static getPayload(tt,rt,at){TypedDataEncoder.hashDomain(tt);const st={},ot=[];domainFieldNames.forEach(ht=>{const mt=tt[ht];mt!=null&&(st[ht]=domainChecks[ht](mt),ot.push({name:ht,type:domainFieldTypes[ht]}))});const lt=TypedDataEncoder.from(rt),ut=shallowCopy(rt);return ut.EIP712Domain?logger$w.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",rt):ut.EIP712Domain=ot,lt.encode(at),{types:ut,domain:st,primaryType:lt.primaryType,message:lt.visit(at,(ht,mt)=>{if(ht.match(/^bytes(\d*)/))return hexlify(arrayify(mt));if(ht.match(/^u?int/))return BigNumber.from(mt).toString();switch(ht){case"address":return mt.toLowerCase();case"bool":return!!mt;case"string":return typeof mt!="string"&&logger$w.throwArgumentError("invalid string","value",mt),mt}return logger$w.throwArgumentError("unsupported type","type",ht)})}}}const lib_esm$c=Object.freeze(Object.defineProperty({__proto__:null,id,dnsEncode,namehash,isValidName,ensNormalize,messagePrefix,hashMessage,_TypedDataEncoder:TypedDataEncoder},Symbol.toStringTag,{value:"Module"})),logger$v=new Logger(version$p);class LogDescription extends Description{}class TransactionDescription extends Description{}class ErrorDescription extends Description{}class Indexed extends Description{static isIndexed(tt){return!!(tt&&tt._isIndexed)}}const BuiltinErrors={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function wrapAccessError(it,tt){const rt=new Error(`deferred error during ABI decoding triggered accessing ${it}`);return rt.error=tt,rt}class Interface{constructor(tt){let rt=[];typeof tt=="string"?rt=JSON.parse(tt):rt=tt,defineReadOnly(this,"fragments",rt.map(at=>Fragment.from(at)).filter(at=>at!=null)),defineReadOnly(this,"_abiCoder",getStatic(new.target,"getAbiCoder")()),defineReadOnly(this,"functions",{}),defineReadOnly(this,"errors",{}),defineReadOnly(this,"events",{}),defineReadOnly(this,"structs",{}),this.fragments.forEach(at=>{let st=null;switch(at.type){case"constructor":if(this.deploy){logger$v.warn("duplicate definition - constructor");return}defineReadOnly(this,"deploy",at);return;case"function":st=this.functions;break;case"event":st=this.events;break;case"error":st=this.errors;break;default:return}let ot=at.format();if(st[ot]){logger$v.warn("duplicate definition - "+ot);return}st[ot]=at}),this.deploy||defineReadOnly(this,"deploy",ConstructorFragment.from({payable:!1,type:"constructor"})),defineReadOnly(this,"_isInterface",!0)}format(tt){tt||(tt=FormatTypes.full),tt===FormatTypes.sighash&&logger$v.throwArgumentError("interface does not support formatting sighash","format",tt);const rt=this.fragments.map(at=>at.format(tt));return tt===FormatTypes.json?JSON.stringify(rt.map(at=>JSON.parse(at))):rt}static getAbiCoder(){return defaultAbiCoder}static getAddress(tt){return getAddress(tt)}static getSighash(tt){return hexDataSlice(id(tt.format()),0,4)}static getEventTopic(tt){return id(tt.format())}getFunction(tt){if(isHexString$4(tt)){for(const at in this.functions)if(tt===this.getSighash(at))return this.functions[at];logger$v.throwArgumentError("no matching function","sighash",tt)}if(tt.indexOf("(")===-1){const at=tt.trim(),st=Object.keys(this.functions).filter(ot=>ot.split("(")[0]===at);return st.length===0?logger$v.throwArgumentError("no matching function","name",at):st.length>1&&logger$v.throwArgumentError("multiple matching functions","name",at),this.functions[st[0]]}const rt=this.functions[FunctionFragment.fromString(tt).format()];return rt||logger$v.throwArgumentError("no matching function","signature",tt),rt}getEvent(tt){if(isHexString$4(tt)){const at=tt.toLowerCase();for(const st in this.events)if(at===this.getEventTopic(st))return this.events[st];logger$v.throwArgumentError("no matching event","topichash",at)}if(tt.indexOf("(")===-1){const at=tt.trim(),st=Object.keys(this.events).filter(ot=>ot.split("(")[0]===at);return st.length===0?logger$v.throwArgumentError("no matching event","name",at):st.length>1&&logger$v.throwArgumentError("multiple matching events","name",at),this.events[st[0]]}const rt=this.events[EventFragment.fromString(tt).format()];return rt||logger$v.throwArgumentError("no matching event","signature",tt),rt}getError(tt){if(isHexString$4(tt)){const at=getStatic(this.constructor,"getSighash");for(const st in this.errors){const ot=this.errors[st];if(tt===at(ot))return this.errors[st]}logger$v.throwArgumentError("no matching error","sighash",tt)}if(tt.indexOf("(")===-1){const at=tt.trim(),st=Object.keys(this.errors).filter(ot=>ot.split("(")[0]===at);return st.length===0?logger$v.throwArgumentError("no matching error","name",at):st.length>1&&logger$v.throwArgumentError("multiple matching errors","name",at),this.errors[st[0]]}const rt=this.errors[FunctionFragment.fromString(tt).format()];return rt||logger$v.throwArgumentError("no matching error","signature",tt),rt}getSighash(tt){if(typeof tt=="string")try{tt=this.getFunction(tt)}catch(rt){try{tt=this.getError(tt)}catch{throw rt}}return getStatic(this.constructor,"getSighash")(tt)}getEventTopic(tt){return typeof tt=="string"&&(tt=this.getEvent(tt)),getStatic(this.constructor,"getEventTopic")(tt)}_decodeParams(tt,rt){return this._abiCoder.decode(tt,rt)}_encodeParams(tt,rt){return this._abiCoder.encode(tt,rt)}encodeDeploy(tt){return this._encodeParams(this.deploy.inputs,tt||[])}decodeErrorResult(tt,rt){typeof tt=="string"&&(tt=this.getError(tt));const at=arrayify(rt);return hexlify(at.slice(0,4))!==this.getSighash(tt)&&logger$v.throwArgumentError(`data signature does not match error ${tt.name}.`,"data",hexlify(at)),this._decodeParams(tt.inputs,at.slice(4))}encodeErrorResult(tt,rt){return typeof tt=="string"&&(tt=this.getError(tt)),hexlify(concat$6([this.getSighash(tt),this._encodeParams(tt.inputs,rt||[])]))}decodeFunctionData(tt,rt){typeof tt=="string"&&(tt=this.getFunction(tt));const at=arrayify(rt);return hexlify(at.slice(0,4))!==this.getSighash(tt)&&logger$v.throwArgumentError(`data signature does not match function ${tt.name}.`,"data",hexlify(at)),this._decodeParams(tt.inputs,at.slice(4))}encodeFunctionData(tt,rt){return typeof tt=="string"&&(tt=this.getFunction(tt)),hexlify(concat$6([this.getSighash(tt),this._encodeParams(tt.inputs,rt||[])]))}decodeFunctionResult(tt,rt){typeof tt=="string"&&(tt=this.getFunction(tt));let at=arrayify(rt),st=null,ot="",lt=null,ut=null,ht=null;switch(at.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(tt.outputs,at)}catch{}break;case 4:{const mt=hexlify(at.slice(0,4)),bt=BuiltinErrors[mt];if(bt)lt=this._abiCoder.decode(bt.inputs,at.slice(4)),ut=bt.name,ht=bt.signature,bt.reason&&(st=lt[0]),ut==="Error"?ot=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(lt[0])}`:ut==="Panic"&&(ot=`; VM Exception while processing transaction: reverted with panic code ${lt[0]}`);else try{const vt=this.getError(mt);lt=this._abiCoder.decode(vt.inputs,at.slice(4)),ut=vt.name,ht=vt.format()}catch{}break}}return logger$v.throwError("call revert exception"+ot,Logger.errors.CALL_EXCEPTION,{method:tt.format(),data:hexlify(rt),errorArgs:lt,errorName:ut,errorSignature:ht,reason:st})}encodeFunctionResult(tt,rt){return typeof tt=="string"&&(tt=this.getFunction(tt)),hexlify(this._abiCoder.encode(tt.outputs,rt||[]))}encodeFilterTopics(tt,rt){typeof tt=="string"&&(tt=this.getEvent(tt)),rt.length>tt.inputs.length&&logger$v.throwError("too many arguments for "+tt.format(),Logger.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:rt});let at=[];tt.anonymous||at.push(this.getEventTopic(tt));const st=(ot,lt)=>ot.type==="string"?id(lt):ot.type==="bytes"?keccak256$1(hexlify(lt)):(ot.type==="bool"&&typeof lt=="boolean"&&(lt=lt?"0x01":"0x00"),ot.type.match(/^u?int/)&&(lt=BigNumber.from(lt).toHexString()),ot.type==="address"&&this._abiCoder.encode(["address"],[lt]),hexZeroPad(hexlify(lt),32));for(rt.forEach((ot,lt)=>{let ut=tt.inputs[lt];if(!ut.indexed){ot!=null&&logger$v.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+ut.name,ot);return}ot==null?at.push(null):ut.baseType==="array"||ut.baseType==="tuple"?logger$v.throwArgumentError("filtering with tuples or arrays not supported","contract."+ut.name,ot):Array.isArray(ot)?at.push(ot.map(ht=>st(ut,ht))):at.push(st(ut,ot))});at.length&&at[at.length-1]===null;)at.pop();return at}encodeEventLog(tt,rt){typeof tt=="string"&&(tt=this.getEvent(tt));const at=[],st=[],ot=[];return tt.anonymous||at.push(this.getEventTopic(tt)),rt.length!==tt.inputs.length&&logger$v.throwArgumentError("event arguments/values mismatch","values",rt),tt.inputs.forEach((lt,ut)=>{const ht=rt[ut];if(lt.indexed)if(lt.type==="string")at.push(id(ht));else if(lt.type==="bytes")at.push(keccak256$1(ht));else{if(lt.baseType==="tuple"||lt.baseType==="array")throw new Error("not implemented");at.push(this._abiCoder.encode([lt.type],[ht]))}else st.push(lt),ot.push(ht)}),{data:this._abiCoder.encode(st,ot),topics:at}}decodeEventLog(tt,rt,at){if(typeof tt=="string"&&(tt=this.getEvent(tt)),at!=null&&!tt.anonymous){let At=this.getEventTopic(tt);(!isHexString$4(at[0],32)||at[0].toLowerCase()!==At)&&logger$v.throwError("fragment/topic mismatch",Logger.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:At,value:at[0]}),at=at.slice(1)}let st=[],ot=[],lt=[];tt.inputs.forEach((At,xt)=>{At.indexed?At.type==="string"||At.type==="bytes"||At.baseType==="tuple"||At.baseType==="array"?(st.push(ParamType.fromObject({type:"bytes32",name:At.name})),lt.push(!0)):(st.push(At),lt.push(!1)):(ot.push(At),lt.push(!1))});let ut=at!=null?this._abiCoder.decode(st,concat$6(at)):null,ht=this._abiCoder.decode(ot,rt,!0),mt=[],bt=0,vt=0;tt.inputs.forEach((At,xt)=>{if(At.indexed)if(ut==null)mt[xt]=new Indexed({_isIndexed:!0,hash:null});else if(lt[xt])mt[xt]=new Indexed({_isIndexed:!0,hash:ut[vt++]});else try{mt[xt]=ut[vt++]}catch(Et){mt[xt]=Et}else try{mt[xt]=ht[bt++]}catch(Et){mt[xt]=Et}if(At.name&&mt[At.name]==null){const Et=mt[xt];Et instanceof Error?Object.defineProperty(mt,At.name,{enumerable:!0,get:()=>{throw wrapAccessError(`property ${JSON.stringify(At.name)}`,Et)}}):mt[At.name]=Et}});for(let At=0;At<mt.length;At++){const xt=mt[At];xt instanceof Error&&Object.defineProperty(mt,At,{enumerable:!0,get:()=>{throw wrapAccessError(`index ${At}`,xt)}})}return Object.freeze(mt)}parseTransaction(tt){let rt=this.getFunction(tt.data.substring(0,10).toLowerCase());return rt?new TransactionDescription({args:this._abiCoder.decode(rt.inputs,"0x"+tt.data.substring(10)),functionFragment:rt,name:rt.name,signature:rt.format(),sighash:this.getSighash(rt),value:BigNumber.from(tt.value||"0")}):null}parseLog(tt){let rt=this.getEvent(tt.topics[0]);return!rt||rt.anonymous?null:new LogDescription({eventFragment:rt,name:rt.name,signature:rt.format(),topic:this.getEventTopic(rt),args:this.decodeEventLog(rt,tt.data,tt.topics)})}parseError(tt){const rt=hexlify(tt);let at=this.getError(rt.substring(0,10).toLowerCase());return at?new ErrorDescription({args:this._abiCoder.decode(at.inputs,"0x"+rt.substring(10)),errorFragment:at,name:at.name,signature:at.format(),sighash:this.getSighash(at)}):null}static isInterface(tt){return!!(tt&&tt._isInterface)}}const lib_esm$b=Object.freeze(Object.defineProperty({__proto__:null,ConstructorFragment,ErrorFragment,EventFragment,Fragment,FunctionFragment,ParamType,FormatTypes,AbiCoder,defaultAbiCoder,Interface,Indexed,checkResultErrors,LogDescription,TransactionDescription},Symbol.toStringTag,{value:"Module"})),version$k="abstract-provider/5.7.0";var __awaiter$d=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$u=new Logger(version$k);class ForkEvent extends Description{static isForkEvent(tt){return!!(tt&&tt._isForkEvent)}}class Provider$1{constructor(){logger$u.checkAbstract(new.target,Provider$1),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$d(this,void 0,void 0,function*(){const{block:tt,gasPrice:rt}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(lt=>null)});let at=null,st=null,ot=null;return tt&&tt.baseFeePerGas&&(at=tt.baseFeePerGas,ot=BigNumber.from("1500000000"),st=tt.baseFeePerGas.mul(2).add(ot)),{lastBaseFeePerGas:at,maxFeePerGas:st,maxPriorityFeePerGas:ot,gasPrice:rt}})}addListener(tt,rt){return this.on(tt,rt)}removeListener(tt,rt){return this.off(tt,rt)}static isProvider(tt){return!!(tt&&tt._isProvider)}}const version$j="abstract-signer/5.7.0";var __awaiter$c=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$t=new Logger(version$j),allowedTransactionKeys$3=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$t.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(tt){return __awaiter$c(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),tt)})}getTransactionCount(tt){return __awaiter$c(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),tt)})}estimateGas(tt){return __awaiter$c(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const rt=yield resolveProperties(this.checkTransaction(tt));return yield this.provider.estimateGas(rt)})}call(tt,rt){return __awaiter$c(this,void 0,void 0,function*(){this._checkProvider("call");const at=yield resolveProperties(this.checkTransaction(tt));return yield this.provider.call(at,rt)})}sendTransaction(tt){return __awaiter$c(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const rt=yield this.populateTransaction(tt),at=yield this.signTransaction(rt);return yield this.provider.sendTransaction(at)})}getChainId(){return __awaiter$c(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$c(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$c(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(tt){return __awaiter$c(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(tt)})}checkTransaction(tt){for(const at in tt)allowedTransactionKeys$3.indexOf(at)===-1&&logger$t.throwArgumentError("invalid transaction key: "+at,"transaction",tt);const rt=shallowCopy(tt);return rt.from==null?rt.from=this.getAddress():rt.from=Promise.all([Promise.resolve(rt.from),this.getAddress()]).then(at=>(at[0].toLowerCase()!==at[1].toLowerCase()&&logger$t.throwArgumentError("from address mismatch","transaction",tt),at[0])),rt}populateTransaction(tt){return __awaiter$c(this,void 0,void 0,function*(){const rt=yield resolveProperties(this.checkTransaction(tt));rt.to!=null&&(rt.to=Promise.resolve(rt.to).then(st=>__awaiter$c(this,void 0,void 0,function*(){if(st==null)return null;const ot=yield this.resolveName(st);return ot==null&&logger$t.throwArgumentError("provided ENS name resolves to null","tx.to",st),ot})),rt.to.catch(st=>{}));const at=rt.maxFeePerGas!=null||rt.maxPriorityFeePerGas!=null;if(rt.gasPrice!=null&&(rt.type===2||at)?logger$t.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",tt):(rt.type===0||rt.type===1)&&at&&logger$t.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",tt),(rt.type===2||rt.type==null)&&rt.maxFeePerGas!=null&&rt.maxPriorityFeePerGas!=null)rt.type=2;else if(rt.type===0||rt.type===1)rt.gasPrice==null&&(rt.gasPrice=this.getGasPrice());else{const st=yield this.getFeeData();if(rt.type==null)if(st.maxFeePerGas!=null&&st.maxPriorityFeePerGas!=null)if(rt.type=2,rt.gasPrice!=null){const ot=rt.gasPrice;delete rt.gasPrice,rt.maxFeePerGas=ot,rt.maxPriorityFeePerGas=ot}else rt.maxFeePerGas==null&&(rt.maxFeePerGas=st.maxFeePerGas),rt.maxPriorityFeePerGas==null&&(rt.maxPriorityFeePerGas=st.maxPriorityFeePerGas);else st.gasPrice!=null?(at&&logger$t.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),rt.gasPrice==null&&(rt.gasPrice=st.gasPrice),rt.type=0):logger$t.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else rt.type===2&&(rt.maxFeePerGas==null&&(rt.maxFeePerGas=st.maxFeePerGas),rt.maxPriorityFeePerGas==null&&(rt.maxPriorityFeePerGas=st.maxPriorityFeePerGas))}return rt.nonce==null&&(rt.nonce=this.getTransactionCount("pending")),rt.gasLimit==null&&(rt.gasLimit=this.estimateGas(rt).catch(st=>{if(forwardErrors.indexOf(st.code)>=0)throw st;return logger$t.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:st,tx:rt})})),rt.chainId==null?rt.chainId=this.getChainId():rt.chainId=Promise.all([Promise.resolve(rt.chainId),this.getChainId()]).then(st=>(st[1]!==0&&st[0]!==st[1]&&logger$t.throwArgumentError("chainId address mismatch","transaction",tt),st[0])),yield resolveProperties(rt)})}_checkProvider(tt){this.provider||logger$t.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:tt||"_checkProvider"})}static isSigner(tt){return!!(tt&&tt._isSigner)}}class VoidSigner extends Signer{constructor(tt,rt){super(),defineReadOnly(this,"address",tt),defineReadOnly(this,"provider",rt||null)}getAddress(){return Promise.resolve(this.address)}_fail(tt,rt){return Promise.resolve().then(()=>{logger$t.throwError(tt,Logger.errors.UNSUPPORTED_OPERATION,{operation:rt})})}signMessage(tt){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(tt){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(tt,rt,at){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(tt){return new VoidSigner(this.address,tt)}}var hash$4={},utils$i={},minimalisticAssert$1=assert$b;function assert$b(it,tt){if(!it)throw new Error(tt||"Assertion failed")}assert$b.equal=function(tt,rt,at){if(tt!=rt)throw new Error(at||"Assertion failed: "+tt+" != "+rt)};var inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(tt,rt){rt&&(tt.super_=rt,tt.prototype=Object.create(rt.prototype,{constructor:{value:tt,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(tt,rt){if(rt){tt.super_=rt;var at=function(){};at.prototype=rt.prototype,tt.prototype=new at,tt.prototype.constructor=tt}};var assert$a=minimalisticAssert$1,inherits$6=inherits_browser$1.exports;utils$i.inherits=inherits$6;function isSurrogatePair(it,tt){return(it.charCodeAt(tt)&64512)!==55296||tt<0||tt+1>=it.length?!1:(it.charCodeAt(tt+1)&64512)===56320}function toArray$2(it,tt){if(Array.isArray(it))return it.slice();if(!it)return[];var rt=[];if(typeof it=="string")if(tt){if(tt==="hex")for(it=it.replace(/[^a-z0-9]+/ig,""),it.length%2!==0&&(it="0"+it),st=0;st<it.length;st+=2)rt.push(parseInt(it[st]+it[st+1],16))}else for(var at=0,st=0;st<it.length;st++){var ot=it.charCodeAt(st);ot<128?rt[at++]=ot:ot<2048?(rt[at++]=ot>>6|192,rt[at++]=ot&63|128):isSurrogatePair(it,st)?(ot=65536+((ot&1023)<<10)+(it.charCodeAt(++st)&1023),rt[at++]=ot>>18|240,rt[at++]=ot>>12&63|128,rt[at++]=ot>>6&63|128,rt[at++]=ot&63|128):(rt[at++]=ot>>12|224,rt[at++]=ot>>6&63|128,rt[at++]=ot&63|128)}else for(st=0;st<it.length;st++)rt[st]=it[st]|0;return rt}utils$i.toArray=toArray$2;function toHex$1(it){for(var tt="",rt=0;rt<it.length;rt++)tt+=zero2(it[rt].toString(16));return tt}utils$i.toHex=toHex$1;function htonl(it){var tt=it>>>24|it>>>8&65280|it<<8&16711680|(it&255)<<24;return tt>>>0}utils$i.htonl=htonl;function toHex32(it,tt){for(var rt="",at=0;at<it.length;at++){var st=it[at];tt==="little"&&(st=htonl(st)),rt+=zero8(st.toString(16))}return rt}utils$i.toHex32=toHex32;function zero2(it){return it.length===1?"0"+it:it}utils$i.zero2=zero2;function zero8(it){return it.length===7?"0"+it:it.length===6?"00"+it:it.length===5?"000"+it:it.length===4?"0000"+it:it.length===3?"00000"+it:it.length===2?"000000"+it:it.length===1?"0000000"+it:it}utils$i.zero8=zero8;function join32(it,tt,rt,at){var st=rt-tt;assert$a(st%4===0);for(var ot=new Array(st/4),lt=0,ut=tt;lt<ot.length;lt++,ut+=4){var ht;at==="big"?ht=it[ut]<<24|it[ut+1]<<16|it[ut+2]<<8|it[ut+3]:ht=it[ut+3]<<24|it[ut+2]<<16|it[ut+1]<<8|it[ut],ot[lt]=ht>>>0}return ot}utils$i.join32=join32;function split32(it,tt){for(var rt=new Array(it.length*4),at=0,st=0;at<it.length;at++,st+=4){var ot=it[at];tt==="big"?(rt[st]=ot>>>24,rt[st+1]=ot>>>16&255,rt[st+2]=ot>>>8&255,rt[st+3]=ot&255):(rt[st+3]=ot>>>24,rt[st+2]=ot>>>16&255,rt[st+1]=ot>>>8&255,rt[st]=ot&255)}return rt}utils$i.split32=split32;function rotr32$1(it,tt){return it>>>tt|it<<32-tt}utils$i.rotr32=rotr32$1;function rotl32$2(it,tt){return it<<tt|it>>>32-tt}utils$i.rotl32=rotl32$2;function sum32$3(it,tt){return it+tt>>>0}utils$i.sum32=sum32$3;function sum32_3$1(it,tt,rt){return it+tt+rt>>>0}utils$i.sum32_3=sum32_3$1;function sum32_4$2(it,tt,rt,at){return it+tt+rt+at>>>0}utils$i.sum32_4=sum32_4$2;function sum32_5$2(it,tt,rt,at,st){return it+tt+rt+at+st>>>0}utils$i.sum32_5=sum32_5$2;function sum64$1(it,tt,rt,at){var st=it[tt],ot=it[tt+1],lt=at+ot>>>0,ut=(lt<at?1:0)+rt+st;it[tt]=ut>>>0,it[tt+1]=lt}utils$i.sum64=sum64$1;function sum64_hi$1(it,tt,rt,at){var st=tt+at>>>0,ot=(st<tt?1:0)+it+rt;return ot>>>0}utils$i.sum64_hi=sum64_hi$1;function sum64_lo$1(it,tt,rt,at){var st=tt+at;return st>>>0}utils$i.sum64_lo=sum64_lo$1;function sum64_4_hi$1(it,tt,rt,at,st,ot,lt,ut){var ht=0,mt=tt;mt=mt+at>>>0,ht+=mt<tt?1:0,mt=mt+ot>>>0,ht+=mt<ot?1:0,mt=mt+ut>>>0,ht+=mt<ut?1:0;var bt=it+rt+st+lt+ht;return bt>>>0}utils$i.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(it,tt,rt,at,st,ot,lt,ut){var ht=tt+at+ot+ut;return ht>>>0}utils$i.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(it,tt,rt,at,st,ot,lt,ut,ht,mt){var bt=0,vt=tt;vt=vt+at>>>0,bt+=vt<tt?1:0,vt=vt+ot>>>0,bt+=vt<ot?1:0,vt=vt+ut>>>0,bt+=vt<ut?1:0,vt=vt+mt>>>0,bt+=vt<mt?1:0;var At=it+rt+st+lt+ht+bt;return At>>>0}utils$i.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(it,tt,rt,at,st,ot,lt,ut,ht,mt){var bt=tt+at+ot+ut+mt;return bt>>>0}utils$i.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(it,tt,rt){var at=tt<<32-rt|it>>>rt;return at>>>0}utils$i.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(it,tt,rt){var at=it<<32-rt|tt>>>rt;return at>>>0}utils$i.rotr64_lo=rotr64_lo$1;function shr64_hi$1(it,tt,rt){return it>>>rt}utils$i.shr64_hi=shr64_hi$1;function shr64_lo$1(it,tt,rt){var at=it<<32-rt|tt>>>rt;return at>>>0}utils$i.shr64_lo=shr64_lo$1;var common$8={},utils$h=utils$i,assert$9=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$8.BlockHash=BlockHash$4,BlockHash$4.prototype.update=function(tt,rt){if(tt=utils$h.toArray(tt,rt),this.pending?this.pending=this.pending.concat(tt):this.pending=tt,this.pendingTotal+=tt.length,this.pending.length>=this._delta8){tt=this.pending;var at=tt.length%this._delta8;this.pending=tt.slice(tt.length-at,tt.length),this.pending.length===0&&(this.pending=null),tt=utils$h.join32(tt,0,tt.length-at,this.endian);for(var st=0;st<tt.length;st+=this._delta32)this._update(tt,st,st+this._delta32)}return this},BlockHash$4.prototype.digest=function(tt){return this.update(this._pad()),assert$9(this.pending===null),this._digest(tt)},BlockHash$4.prototype._pad=function(){var tt=this.pendingTotal,rt=this._delta8,at=rt-(tt+this.padLength)%rt,st=new Array(at+this.padLength);st[0]=128;for(var ot=1;ot<at;ot++)st[ot]=0;if(tt<<=3,this.endian==="big"){for(var lt=8;lt<this.padLength;lt++)st[ot++]=0;st[ot++]=0,st[ot++]=0,st[ot++]=0,st[ot++]=0,st[ot++]=tt>>>24&255,st[ot++]=tt>>>16&255,st[ot++]=tt>>>8&255,st[ot++]=tt&255}else for(st[ot++]=tt&255,st[ot++]=tt>>>8&255,st[ot++]=tt>>>16&255,st[ot++]=tt>>>24&255,st[ot++]=0,st[ot++]=0,st[ot++]=0,st[ot++]=0,lt=8;lt<this.padLength;lt++)st[ot++]=0;return st};var sha$3={},common$7={},utils$g=utils$i,rotr32=utils$g.rotr32;function ft_1$1(it,tt,rt,at){if(it===0)return ch32$1(tt,rt,at);if(it===1||it===3)return p32(tt,rt,at);if(it===2)return maj32$1(tt,rt,at)}common$7.ft_1=ft_1$1;function ch32$1(it,tt,rt){return it&tt^~it&rt}common$7.ch32=ch32$1;function maj32$1(it,tt,rt){return it&tt^it&rt^tt&rt}common$7.maj32=maj32$1;function p32(it,tt,rt){return it^tt^rt}common$7.p32=p32;function s0_256$1(it){return rotr32(it,2)^rotr32(it,13)^rotr32(it,22)}common$7.s0_256=s0_256$1;function s1_256$1(it){return rotr32(it,6)^rotr32(it,11)^rotr32(it,25)}common$7.s1_256=s1_256$1;function g0_256$1(it){return rotr32(it,7)^rotr32(it,18)^it>>>3}common$7.g0_256=g0_256$1;function g1_256$1(it){return rotr32(it,17)^rotr32(it,19)^it>>>10}common$7.g1_256=g1_256$1;var utils$f=utils$i,common$6=common$8,shaCommon$1=common$7,rotl32$1=utils$f.rotl32,sum32$2=utils$f.sum32,sum32_5$1=utils$f.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$6.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$f.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function(tt,rt){for(var at=this.W,st=0;st<16;st++)at[st]=tt[rt+st];for(;st<at.length;st++)at[st]=rotl32$1(at[st-3]^at[st-8]^at[st-14]^at[st-16],1);var ot=this.h[0],lt=this.h[1],ut=this.h[2],ht=this.h[3],mt=this.h[4];for(st=0;st<at.length;st++){var bt=~~(st/20),vt=sum32_5$1(rotl32$1(ot,5),ft_1(bt,lt,ut,ht),mt,at[st],sha1_K[bt]);mt=ht,ht=ut,ut=rotl32$1(lt,30),lt=ot,ot=vt}this.h[0]=sum32$2(this.h[0],ot),this.h[1]=sum32$2(this.h[1],lt),this.h[2]=sum32$2(this.h[2],ut),this.h[3]=sum32$2(this.h[3],ht),this.h[4]=sum32$2(this.h[4],mt)},SHA1.prototype._digest=function(tt){return tt==="hex"?utils$f.toHex32(this.h,"big"):utils$f.split32(this.h,"big")};var utils$e=utils$i,common$5=common$8,shaCommon=common$7,assert$8=minimalisticAssert$1,sum32$1=utils$e.sum32,sum32_4$1=utils$e.sum32_4,sum32_5=utils$e.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$5.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$e.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512,SHA256$1.outSize=256,SHA256$1.hmacStrength=192,SHA256$1.padLength=64,SHA256$1.prototype._update=function(tt,rt){for(var at=this.W,st=0;st<16;st++)at[st]=tt[rt+st];for(;st<at.length;st++)at[st]=sum32_4$1(g1_256(at[st-2]),at[st-7],g0_256(at[st-15]),at[st-16]);var ot=this.h[0],lt=this.h[1],ut=this.h[2],ht=this.h[3],mt=this.h[4],bt=this.h[5],vt=this.h[6],At=this.h[7];for(assert$8(this.k.length===at.length),st=0;st<at.length;st++){var xt=sum32_5(At,s1_256(mt),ch32(mt,bt,vt),this.k[st],at[st]),Et=sum32$1(s0_256(ot),maj32(ot,lt,ut));At=vt,vt=bt,bt=mt,mt=sum32$1(ht,xt),ht=ut,ut=lt,lt=ot,ot=sum32$1(xt,Et)}this.h[0]=sum32$1(this.h[0],ot),this.h[1]=sum32$1(this.h[1],lt),this.h[2]=sum32$1(this.h[2],ut),this.h[3]=sum32$1(this.h[3],ht),this.h[4]=sum32$1(this.h[4],mt),this.h[5]=sum32$1(this.h[5],bt),this.h[6]=sum32$1(this.h[6],vt),this.h[7]=sum32$1(this.h[7],At)},SHA256$1.prototype._digest=function(tt){return tt==="hex"?utils$e.toHex32(this.h,"big"):utils$e.split32(this.h,"big")};var utils$d=utils$i,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$d.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function(tt){return tt==="hex"?utils$d.toHex32(this.h.slice(0,7),"big"):utils$d.split32(this.h.slice(0,7),"big")};var utils$c=utils$i,common$4=common$8,assert$7=minimalisticAssert$1,rotr64_hi=utils$c.rotr64_hi,rotr64_lo=utils$c.rotr64_lo,shr64_hi=utils$c.shr64_hi,shr64_lo=utils$c.shr64_lo,sum64=utils$c.sum64,sum64_hi=utils$c.sum64_hi,sum64_lo=utils$c.sum64_lo,sum64_4_hi=utils$c.sum64_4_hi,sum64_4_lo=utils$c.sum64_4_lo,sum64_5_hi=utils$c.sum64_5_hi,sum64_5_lo=utils$c.sum64_5_lo,BlockHash$1=common$4.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$2(){if(!(this instanceof SHA512$2))return new SHA512$2;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$c.inherits(SHA512$2,BlockHash$1);var _512=SHA512$2;SHA512$2.blockSize=1024,SHA512$2.outSize=512,SHA512$2.hmacStrength=192,SHA512$2.padLength=128,SHA512$2.prototype._prepareBlock=function(tt,rt){for(var at=this.W,st=0;st<32;st++)at[st]=tt[rt+st];for(;st<at.length;st+=2){var ot=g1_512_hi(at[st-4],at[st-3]),lt=g1_512_lo(at[st-4],at[st-3]),ut=at[st-14],ht=at[st-13],mt=g0_512_hi(at[st-30],at[st-29]),bt=g0_512_lo(at[st-30],at[st-29]),vt=at[st-32],At=at[st-31];at[st]=sum64_4_hi(ot,lt,ut,ht,mt,bt,vt,At),at[st+1]=sum64_4_lo(ot,lt,ut,ht,mt,bt,vt,At)}},SHA512$2.prototype._update=function(tt,rt){this._prepareBlock(tt,rt);var at=this.W,st=this.h[0],ot=this.h[1],lt=this.h[2],ut=this.h[3],ht=this.h[4],mt=this.h[5],bt=this.h[6],vt=this.h[7],At=this.h[8],xt=this.h[9],Et=this.h[10],Tt=this.h[11],wt=this.h[12],Ct=this.h[13],It=this.h[14],St=this.h[15];assert$7(this.k.length===at.length);for(var Rt=0;Rt<at.length;Rt+=2){var Dt=It,Wt=St,qt=s1_512_hi(At,xt),Vt=s1_512_lo(At,xt),Yt=ch64_hi(At,xt,Et,Tt,wt),jt=ch64_lo(At,xt,Et,Tt,wt,Ct),kt=this.k[Rt],zt=this.k[Rt+1],Nt=at[Rt],Mt=at[Rt+1],Lt=sum64_5_hi(Dt,Wt,qt,Vt,Yt,jt,kt,zt,Nt,Mt),Ht=sum64_5_lo(Dt,Wt,qt,Vt,Yt,jt,kt,zt,Nt,Mt);Dt=s0_512_hi(st,ot),Wt=s0_512_lo(st,ot),qt=maj64_hi(st,ot,lt,ut,ht),Vt=maj64_lo(st,ot,lt,ut,ht,mt);var Qt=sum64_hi(Dt,Wt,qt,Vt),Ut=sum64_lo(Dt,Wt,qt,Vt);It=wt,St=Ct,wt=Et,Ct=Tt,Et=At,Tt=xt,At=sum64_hi(bt,vt,Lt,Ht),xt=sum64_lo(vt,vt,Lt,Ht),bt=ht,vt=mt,ht=lt,mt=ut,lt=st,ut=ot,st=sum64_hi(Lt,Ht,Qt,Ut),ot=sum64_lo(Lt,Ht,Qt,Ut)}sum64(this.h,0,st,ot),sum64(this.h,2,lt,ut),sum64(this.h,4,ht,mt),sum64(this.h,6,bt,vt),sum64(this.h,8,At,xt),sum64(this.h,10,Et,Tt),sum64(this.h,12,wt,Ct),sum64(this.h,14,It,St)},SHA512$2.prototype._digest=function(tt){return tt==="hex"?utils$c.toHex32(this.h,"big"):utils$c.split32(this.h,"big")};function ch64_hi(it,tt,rt,at,st){var ot=it&rt^~it&st;return ot<0&&(ot+=4294967296),ot}function ch64_lo(it,tt,rt,at,st,ot){var lt=tt&at^~tt&ot;return lt<0&&(lt+=4294967296),lt}function maj64_hi(it,tt,rt,at,st){var ot=it&rt^it&st^rt&st;return ot<0&&(ot+=4294967296),ot}function maj64_lo(it,tt,rt,at,st,ot){var lt=tt&at^tt&ot^at&ot;return lt<0&&(lt+=4294967296),lt}function s0_512_hi(it,tt){var rt=rotr64_hi(it,tt,28),at=rotr64_hi(tt,it,2),st=rotr64_hi(tt,it,7),ot=rt^at^st;return ot<0&&(ot+=4294967296),ot}function s0_512_lo(it,tt){var rt=rotr64_lo(it,tt,28),at=rotr64_lo(tt,it,2),st=rotr64_lo(tt,it,7),ot=rt^at^st;return ot<0&&(ot+=4294967296),ot}function s1_512_hi(it,tt){var rt=rotr64_hi(it,tt,14),at=rotr64_hi(it,tt,18),st=rotr64_hi(tt,it,9),ot=rt^at^st;return ot<0&&(ot+=4294967296),ot}function s1_512_lo(it,tt){var rt=rotr64_lo(it,tt,14),at=rotr64_lo(it,tt,18),st=rotr64_lo(tt,it,9),ot=rt^at^st;return ot<0&&(ot+=4294967296),ot}function g0_512_hi(it,tt){var rt=rotr64_hi(it,tt,1),at=rotr64_hi(it,tt,8),st=shr64_hi(it,tt,7),ot=rt^at^st;return ot<0&&(ot+=4294967296),ot}function g0_512_lo(it,tt){var rt=rotr64_lo(it,tt,1),at=rotr64_lo(it,tt,8),st=shr64_lo(it,tt,7),ot=rt^at^st;return ot<0&&(ot+=4294967296),ot}function g1_512_hi(it,tt){var rt=rotr64_hi(it,tt,19),at=rotr64_hi(tt,it,29),st=shr64_hi(it,tt,6),ot=rt^at^st;return ot<0&&(ot+=4294967296),ot}function g1_512_lo(it,tt){var rt=rotr64_lo(it,tt,19),at=rotr64_lo(tt,it,29),st=shr64_lo(it,tt,6),ot=rt^at^st;return ot<0&&(ot+=4294967296),ot}var utils$b=utils$i,SHA512$1=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512$1.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$b.inherits(SHA384,SHA512$1);var _384=SHA384;SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(tt){return tt==="hex"?utils$b.toHex32(this.h.slice(0,12),"big"):utils$b.split32(this.h.slice(0,12),"big")},sha$3.sha1=_1,sha$3.sha224=_224,sha$3.sha256=_256,sha$3.sha384=_384,sha$3.sha512=_512;var ripemd={},utils$a=utils$i,common$3=common$8,rotl32=utils$a.rotl32,sum32=utils$a.sum32,sum32_3=utils$a.sum32_3,sum32_4=utils$a.sum32_4,BlockHash=common$3.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$a.inherits(RIPEMD160,BlockHash),ripemd.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function(tt,rt){for(var at=this.h[0],st=this.h[1],ot=this.h[2],lt=this.h[3],ut=this.h[4],ht=at,mt=st,bt=ot,vt=lt,At=ut,xt=0;xt<80;xt++){var Et=sum32(rotl32(sum32_4(at,f$7(xt,st,ot,lt),tt[r$a[xt]+rt],K$5(xt)),s$9[xt]),ut);at=ut,ut=lt,lt=rotl32(ot,10),ot=st,st=Et,Et=sum32(rotl32(sum32_4(ht,f$7(79-xt,mt,bt,vt),tt[rh[xt]+rt],Kh(xt)),sh[xt]),At),ht=At,At=vt,vt=rotl32(bt,10),bt=mt,mt=Et}Et=sum32_3(this.h[1],ot,vt),this.h[1]=sum32_3(this.h[2],lt,At),this.h[2]=sum32_3(this.h[3],ut,ht),this.h[3]=sum32_3(this.h[4],at,mt),this.h[4]=sum32_3(this.h[0],st,bt),this.h[0]=Et},RIPEMD160.prototype._digest=function(tt){return tt==="hex"?utils$a.toHex32(this.h,"little"):utils$a.split32(this.h,"little")};function f$7(it,tt,rt,at){return it<=15?tt^rt^at:it<=31?tt&rt|~tt&at:it<=47?(tt|~rt)^at:it<=63?tt&at|rt&~at:tt^(rt|~at)}function K$5(it){return it<=15?0:it<=31?1518500249:it<=47?1859775393:it<=63?2400959708:2840853838}function Kh(it){return it<=15?1352829926:it<=31?1548603684:it<=47?1836072691:it<=63?2053994217:0}var r$a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$9=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$9=utils$i,assert$6=minimalisticAssert$1;function Hmac(it,tt,rt){if(!(this instanceof Hmac))return new Hmac(it,tt,rt);this.Hash=it,this.blockSize=it.blockSize/8,this.outSize=it.outSize/8,this.inner=null,this.outer=null,this._init(utils$9.toArray(tt,rt))}var hmac$1=Hmac;Hmac.prototype._init=function(tt){tt.length>this.blockSize&&(tt=new this.Hash().update(tt).digest()),assert$6(tt.length<=this.blockSize);for(var rt=tt.length;rt<this.blockSize;rt++)tt.push(0);for(rt=0;rt<tt.length;rt++)tt[rt]^=54;for(this.inner=new this.Hash().update(tt),rt=0;rt<tt.length;rt++)tt[rt]^=106;this.outer=new this.Hash().update(tt)},Hmac.prototype.update=function(tt,rt){return this.inner.update(tt,rt),this},Hmac.prototype.digest=function(tt){return this.outer.update(this.inner.digest()),this.outer.digest(tt)},function(it){var tt=it;tt.utils=utils$i,tt.common=common$8,tt.sha=sha$3,tt.ripemd=ripemd,tt.hmac=hmac$1,tt.sha1=tt.sha.sha1,tt.sha256=tt.sha.sha256,tt.sha224=tt.sha.sha224,tt.sha384=tt.sha.sha384,tt.sha512=tt.sha.sha512,tt.ripemd160=tt.ripemd.ripemd160}(hash$4);const hash$3=hash$4;function createCommonjsModule(it,tt,rt){return rt={path:tt,exports:{},require:function(at,st){return commonjsRequire(at,st==null?rt.path:st)}},it(rt,rt.exports),rt.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert;function assert(it,tt){if(!it)throw new Error(tt||"Assertion failed")}assert.equal=function(tt,rt,at){if(tt!=rt)throw new Error(at||"Assertion failed: "+tt+" != "+rt)};var utils_1$2=createCommonjsModule(function(it,tt){var rt=tt;function at(lt,ut){if(Array.isArray(lt))return lt.slice();if(!lt)return[];var ht=[];if(typeof lt!="string"){for(var mt=0;mt<lt.length;mt++)ht[mt]=lt[mt]|0;return ht}if(ut==="hex"){lt=lt.replace(/[^a-z0-9]+/ig,""),lt.length%2!==0&&(lt="0"+lt);for(var mt=0;mt<lt.length;mt+=2)ht.push(parseInt(lt[mt]+lt[mt+1],16))}else for(var mt=0;mt<lt.length;mt++){var bt=lt.charCodeAt(mt),vt=bt>>8,At=bt&255;vt?ht.push(vt,At):ht.push(At)}return ht}rt.toArray=at;function st(lt){return lt.length===1?"0"+lt:lt}rt.zero2=st;function ot(lt){for(var ut="",ht=0;ht<lt.length;ht++)ut+=st(lt[ht].toString(16));return ut}rt.toHex=ot,rt.encode=function(ut,ht){return ht==="hex"?ot(ut):ut}}),utils_1$1$1=createCommonjsModule(function(it,tt){var rt=tt;rt.assert=minimalisticAssert,rt.toArray=utils_1$2.toArray,rt.zero2=utils_1$2.zero2,rt.toHex=utils_1$2.toHex,rt.encode=utils_1$2.encode;function at(ht,mt,bt){var vt=new Array(Math.max(ht.bitLength(),bt)+1);vt.fill(0);for(var At=1<<mt+1,xt=ht.clone(),Et=0;Et<vt.length;Et++){var Tt,wt=xt.andln(At-1);xt.isOdd()?(wt>(At>>1)-1?Tt=(At>>1)-wt:Tt=wt,xt.isubn(Tt)):Tt=0,vt[Et]=Tt,xt.iushrn(1)}return vt}rt.getNAF=at;function st(ht,mt){var bt=[[],[]];ht=ht.clone(),mt=mt.clone();for(var vt=0,At=0,xt;ht.cmpn(-vt)>0||mt.cmpn(-At)>0;){var Et=ht.andln(3)+vt&3,Tt=mt.andln(3)+At&3;Et===3&&(Et=-1),Tt===3&&(Tt=-1);var wt;(Et&1)===0?wt=0:(xt=ht.andln(7)+vt&7,(xt===3||xt===5)&&Tt===2?wt=-Et:wt=Et),bt[0].push(wt);var Ct;(Tt&1)===0?Ct=0:(xt=mt.andln(7)+At&7,(xt===3||xt===5)&&Et===2?Ct=-Tt:Ct=Tt),bt[1].push(Ct),2*vt===wt+1&&(vt=1-vt),2*At===Ct+1&&(At=1-At),ht.iushrn(1),mt.iushrn(1)}return bt}rt.getJSF=st;function ot(ht,mt,bt){var vt="_"+mt;ht.prototype[mt]=function(){return this[vt]!==void 0?this[vt]:this[vt]=bt.call(this)}}rt.cachedProperty=ot;function lt(ht){return typeof ht=="string"?rt.toArray(ht,"hex"):ht}rt.parseBytes=lt;function ut(ht){return new BN$4(ht,"hex","le")}rt.intFromLE=ut}),getNAF=utils_1$1$1.getNAF,getJSF=utils_1$1$1.getJSF,assert$1=utils_1$1$1.assert;function BaseCurve(it,tt){this.type=it,this.p=new BN$4(tt.p,16),this.red=tt.prime?BN$4.red(tt.prime):BN$4.mont(this.p),this.zero=new BN$4(0).toRed(this.red),this.one=new BN$4(1).toRed(this.red),this.two=new BN$4(2).toRed(this.red),this.n=tt.n&&new BN$4(tt.n,16),this.g=tt.g&&this.pointFromJSON(tt.g,tt.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var rt=this.n&&this.p.div(this.n);!rt||rt.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$5=BaseCurve;BaseCurve.prototype.point=function(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function(tt,rt){assert$1(tt.precomputed);var at=tt._getDoubles(),st=getNAF(rt,1,this._bitLength),ot=(1<<at.step+1)-(at.step%2===0?2:1);ot/=3;var lt=[],ut,ht;for(ut=0;ut<st.length;ut+=at.step){ht=0;for(var mt=ut+at.step-1;mt>=ut;mt--)ht=(ht<<1)+st[mt];lt.push(ht)}for(var bt=this.jpoint(null,null,null),vt=this.jpoint(null,null,null),At=ot;At>0;At--){for(ut=0;ut<lt.length;ut++)ht=lt[ut],ht===At?vt=vt.mixedAdd(at.points[ut]):ht===-At&&(vt=vt.mixedAdd(at.points[ut].neg()));bt=bt.add(vt)}return bt.toP()},BaseCurve.prototype._wnafMul=function(tt,rt){var at=4,st=tt._getNAFPoints(at);at=st.wnd;for(var ot=st.points,lt=getNAF(rt,at,this._bitLength),ut=this.jpoint(null,null,null),ht=lt.length-1;ht>=0;ht--){for(var mt=0;ht>=0&&lt[ht]===0;ht--)mt++;if(ht>=0&&mt++,ut=ut.dblp(mt),ht<0)break;var bt=lt[ht];assert$1(bt!==0),tt.type==="affine"?bt>0?ut=ut.mixedAdd(ot[bt-1>>1]):ut=ut.mixedAdd(ot[-bt-1>>1].neg()):bt>0?ut=ut.add(ot[bt-1>>1]):ut=ut.add(ot[-bt-1>>1].neg())}return tt.type==="affine"?ut.toP():ut},BaseCurve.prototype._wnafMulAdd=function(tt,rt,at,st,ot){var lt=this._wnafT1,ut=this._wnafT2,ht=this._wnafT3,mt=0,bt,vt,At;for(bt=0;bt<st;bt++){At=rt[bt];var xt=At._getNAFPoints(tt);lt[bt]=xt.wnd,ut[bt]=xt.points}for(bt=st-1;bt>=1;bt-=2){var Et=bt-1,Tt=bt;if(lt[Et]!==1||lt[Tt]!==1){ht[Et]=getNAF(at[Et],lt[Et],this._bitLength),ht[Tt]=getNAF(at[Tt],lt[Tt],this._bitLength),mt=Math.max(ht[Et].length,mt),mt=Math.max(ht[Tt].length,mt);continue}var wt=[rt[Et],null,null,rt[Tt]];rt[Et].y.cmp(rt[Tt].y)===0?(wt[1]=rt[Et].add(rt[Tt]),wt[2]=rt[Et].toJ().mixedAdd(rt[Tt].neg())):rt[Et].y.cmp(rt[Tt].y.redNeg())===0?(wt[1]=rt[Et].toJ().mixedAdd(rt[Tt]),wt[2]=rt[Et].add(rt[Tt].neg())):(wt[1]=rt[Et].toJ().mixedAdd(rt[Tt]),wt[2]=rt[Et].toJ().mixedAdd(rt[Tt].neg()));var Ct=[-3,-1,-5,-7,0,7,5,1,3],It=getJSF(at[Et],at[Tt]);for(mt=Math.max(It[0].length,mt),ht[Et]=new Array(mt),ht[Tt]=new Array(mt),vt=0;vt<mt;vt++){var St=It[0][vt]|0,Rt=It[1][vt]|0;ht[Et][vt]=Ct[(St+1)*3+(Rt+1)],ht[Tt][vt]=0,ut[Et]=wt}}var Dt=this.jpoint(null,null,null),Wt=this._wnafT4;for(bt=mt;bt>=0;bt--){for(var qt=0;bt>=0;){var Vt=!0;for(vt=0;vt<st;vt++)Wt[vt]=ht[vt][bt]|0,Wt[vt]!==0&&(Vt=!1);if(!Vt)break;qt++,bt--}if(bt>=0&&qt++,Dt=Dt.dblp(qt),bt<0)break;for(vt=0;vt<st;vt++){var Yt=Wt[vt];Yt!==0&&(Yt>0?At=ut[vt][Yt-1>>1]:Yt<0&&(At=ut[vt][-Yt-1>>1].neg()),At.type==="affine"?Dt=Dt.mixedAdd(At):Dt=Dt.add(At))}}for(bt=0;bt<st;bt++)ut[bt]=null;return ot?Dt:Dt.toP()};function BasePoint(it,tt){this.curve=it,this.type=tt,this.precomputed=null}BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function(){throw new Error("Not implemented")},BasePoint.prototype.validate=function(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function(tt,rt){tt=utils_1$1$1.toArray(tt,rt);var at=this.p.byteLength();if((tt[0]===4||tt[0]===6||tt[0]===7)&&tt.length-1===2*at){tt[0]===6?assert$1(tt[tt.length-1]%2===0):tt[0]===7&&assert$1(tt[tt.length-1]%2===1);var st=this.point(tt.slice(1,1+at),tt.slice(1+at,1+2*at));return st}else if((tt[0]===2||tt[0]===3)&&tt.length-1===at)return this.pointFromX(tt.slice(1,1+at),tt[0]===3);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function(tt){return this.encode(tt,!0)},BasePoint.prototype._encode=function(tt){var rt=this.curve.p.byteLength(),at=this.getX().toArray("be",rt);return tt?[this.getY().isEven()?2:3].concat(at):[4].concat(at,this.getY().toArray("be",rt))},BasePoint.prototype.encode=function(tt,rt){return utils_1$1$1.encode(this._encode(rt),tt)},BasePoint.prototype.precompute=function(tt){if(this.precomputed)return this;var rt={doubles:null,naf:null,beta:null};return rt.naf=this._getNAFPoints(8),rt.doubles=this._getDoubles(4,tt),rt.beta=this._getBeta(),this.precomputed=rt,this},BasePoint.prototype._hasDoubles=function(tt){if(!this.precomputed)return!1;var rt=this.precomputed.doubles;return rt?rt.points.length>=Math.ceil((tt.bitLength()+1)/rt.step):!1},BasePoint.prototype._getDoubles=function(tt,rt){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var at=[this],st=this,ot=0;ot<rt;ot+=tt){for(var lt=0;lt<tt;lt++)st=st.dbl();at.push(st)}return{step:tt,points:at}},BasePoint.prototype._getNAFPoints=function(tt){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var rt=[this],at=(1<<tt)-1,st=at===1?null:this.dbl(),ot=1;ot<at;ot++)rt[ot]=rt[ot-1].add(st);return{wnd:tt,points:rt}},BasePoint.prototype._getBeta=function(){return null},BasePoint.prototype.dblp=function(tt){for(var rt=this,at=0;at<tt;at++)rt=rt.dbl();return rt};var inherits_browser=createCommonjsModule(function(it){typeof Object.create=="function"?it.exports=function(rt,at){at&&(rt.super_=at,rt.prototype=Object.create(at.prototype,{constructor:{value:rt,enumerable:!1,writable:!0,configurable:!0}}))}:it.exports=function(rt,at){if(at){rt.super_=at;var st=function(){};st.prototype=at.prototype,rt.prototype=new st,rt.prototype.constructor=rt}}}),assert$2=utils_1$1$1.assert;function ShortCurve(it){base$5.call(this,"short",it),this.a=new BN$4(it.a,16).toRed(this.red),this.b=new BN$4(it.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(it),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,base$5);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function(tt){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var rt,at;if(tt.beta)rt=new BN$4(tt.beta,16).toRed(this.red);else{var st=this._getEndoRoots(this.p);rt=st[0].cmp(st[1])<0?st[0]:st[1],rt=rt.toRed(this.red)}if(tt.lambda)at=new BN$4(tt.lambda,16);else{var ot=this._getEndoRoots(this.n);this.g.mul(ot[0]).x.cmp(this.g.x.redMul(rt))===0?at=ot[0]:(at=ot[1],assert$2(this.g.mul(at).x.cmp(this.g.x.redMul(rt))===0))}var lt;return tt.basis?lt=tt.basis.map(function(ut){return{a:new BN$4(ut.a,16),b:new BN$4(ut.b,16)}}):lt=this._getEndoBasis(at),{beta:rt,lambda:at,basis:lt}}},ShortCurve.prototype._getEndoRoots=function(tt){var rt=tt===this.p?this.red:BN$4.mont(tt),at=new BN$4(2).toRed(rt).redInvm(),st=at.redNeg(),ot=new BN$4(3).toRed(rt).redNeg().redSqrt().redMul(at),lt=st.redAdd(ot).fromRed(),ut=st.redSub(ot).fromRed();return[lt,ut]},ShortCurve.prototype._getEndoBasis=function(tt){for(var rt=this.n.ushrn(Math.floor(this.n.bitLength()/2)),at=tt,st=this.n.clone(),ot=new BN$4(1),lt=new BN$4(0),ut=new BN$4(0),ht=new BN$4(1),mt,bt,vt,At,xt,Et,Tt,wt=0,Ct,It;at.cmpn(0)!==0;){var St=st.div(at);Ct=st.sub(St.mul(at)),It=ut.sub(St.mul(ot));var Rt=ht.sub(St.mul(lt));if(!vt&&Ct.cmp(rt)<0)mt=Tt.neg(),bt=ot,vt=Ct.neg(),At=It;else if(vt&&++wt===2)break;Tt=Ct,st=at,at=Ct,ut=ot,ot=It,ht=lt,lt=Rt}xt=Ct.neg(),Et=It;var Dt=vt.sqr().add(At.sqr()),Wt=xt.sqr().add(Et.sqr());return Wt.cmp(Dt)>=0&&(xt=mt,Et=bt),vt.negative&&(vt=vt.neg(),At=At.neg()),xt.negative&&(xt=xt.neg(),Et=Et.neg()),[{a:vt,b:At},{a:xt,b:Et}]},ShortCurve.prototype._endoSplit=function(tt){var rt=this.endo.basis,at=rt[0],st=rt[1],ot=st.b.mul(tt).divRound(this.n),lt=at.b.neg().mul(tt).divRound(this.n),ut=ot.mul(at.a),ht=lt.mul(st.a),mt=ot.mul(at.b),bt=lt.mul(st.b),vt=tt.sub(ut).sub(ht),At=mt.add(bt).neg();return{k1:vt,k2:At}},ShortCurve.prototype.pointFromX=function(tt,rt){tt=new BN$4(tt,16),tt.red||(tt=tt.toRed(this.red));var at=tt.redSqr().redMul(tt).redIAdd(tt.redMul(this.a)).redIAdd(this.b),st=at.redSqrt();if(st.redSqr().redSub(at).cmp(this.zero)!==0)throw new Error("invalid point");var ot=st.fromRed().isOdd();return(rt&&!ot||!rt&&ot)&&(st=st.redNeg()),this.point(tt,st)},ShortCurve.prototype.validate=function(tt){if(tt.inf)return!0;var rt=tt.x,at=tt.y,st=this.a.redMul(rt),ot=rt.redSqr().redMul(rt).redIAdd(st).redIAdd(this.b);return at.redSqr().redISub(ot).cmpn(0)===0},ShortCurve.prototype._endoWnafMulAdd=function(tt,rt,at){for(var st=this._endoWnafT1,ot=this._endoWnafT2,lt=0;lt<tt.length;lt++){var ut=this._endoSplit(rt[lt]),ht=tt[lt],mt=ht._getBeta();ut.k1.negative&&(ut.k1.ineg(),ht=ht.neg(!0)),ut.k2.negative&&(ut.k2.ineg(),mt=mt.neg(!0)),st[lt*2]=ht,st[lt*2+1]=mt,ot[lt*2]=ut.k1,ot[lt*2+1]=ut.k2}for(var bt=this._wnafMulAdd(1,st,ot,lt*2,at),vt=0;vt<lt*2;vt++)st[vt]=null,ot[vt]=null;return bt};function Point(it,tt,rt,at){base$5.BasePoint.call(this,it,"affine"),tt===null&&rt===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$4(tt,16),this.y=new BN$4(rt,16),at&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point,base$5.BasePoint),ShortCurve.prototype.point=function(tt,rt,at){return new Point(this,tt,rt,at)},ShortCurve.prototype.pointFromJSON=function(tt,rt){return Point.fromJSON(this,tt,rt)},Point.prototype._getBeta=function(){if(!!this.curve.endo){var tt=this.precomputed;if(tt&&tt.beta)return tt.beta;var rt=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(tt){var at=this.curve,st=function(ot){return at.point(ot.x.redMul(at.endo.beta),ot.y)};tt.beta=rt,rt.precomputed={beta:null,naf:tt.naf&&{wnd:tt.naf.wnd,points:tt.naf.points.map(st)},doubles:tt.doubles&&{step:tt.doubles.step,points:tt.doubles.points.map(st)}}}return rt}},Point.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function(tt,rt,at){typeof rt=="string"&&(rt=JSON.parse(rt));var st=tt.point(rt[0],rt[1],at);if(!rt[2])return st;function ot(ut){return tt.point(ut[0],ut[1],at)}var lt=rt[2];return st.precomputed={beta:null,doubles:lt.doubles&&{step:lt.doubles.step,points:[st].concat(lt.doubles.points.map(ot))},naf:lt.naf&&{wnd:lt.naf.wnd,points:[st].concat(lt.naf.points.map(ot))}},st},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return this.inf},Point.prototype.add=function(tt){if(this.inf)return tt;if(tt.inf)return this;if(this.eq(tt))return this.dbl();if(this.neg().eq(tt))return this.curve.point(null,null);if(this.x.cmp(tt.x)===0)return this.curve.point(null,null);var rt=this.y.redSub(tt.y);rt.cmpn(0)!==0&&(rt=rt.redMul(this.x.redSub(tt.x).redInvm()));var at=rt.redSqr().redISub(this.x).redISub(tt.x),st=rt.redMul(this.x.redSub(at)).redISub(this.y);return this.curve.point(at,st)},Point.prototype.dbl=function(){if(this.inf)return this;var tt=this.y.redAdd(this.y);if(tt.cmpn(0)===0)return this.curve.point(null,null);var rt=this.curve.a,at=this.x.redSqr(),st=tt.redInvm(),ot=at.redAdd(at).redIAdd(at).redIAdd(rt).redMul(st),lt=ot.redSqr().redISub(this.x.redAdd(this.x)),ut=ot.redMul(this.x.redSub(lt)).redISub(this.y);return this.curve.point(lt,ut)},Point.prototype.getX=function(){return this.x.fromRed()},Point.prototype.getY=function(){return this.y.fromRed()},Point.prototype.mul=function(tt){return tt=new BN$4(tt,16),this.isInfinity()?this:this._hasDoubles(tt)?this.curve._fixedNafMul(this,tt):this.curve.endo?this.curve._endoWnafMulAdd([this],[tt]):this.curve._wnafMul(this,tt)},Point.prototype.mulAdd=function(tt,rt,at){var st=[this,rt],ot=[tt,at];return this.curve.endo?this.curve._endoWnafMulAdd(st,ot):this.curve._wnafMulAdd(1,st,ot,2)},Point.prototype.jmulAdd=function(tt,rt,at){var st=[this,rt],ot=[tt,at];return this.curve.endo?this.curve._endoWnafMulAdd(st,ot,!0):this.curve._wnafMulAdd(1,st,ot,2,!0)},Point.prototype.eq=function(tt){return this===tt||this.inf===tt.inf&&(this.inf||this.x.cmp(tt.x)===0&&this.y.cmp(tt.y)===0)},Point.prototype.neg=function(tt){if(this.inf)return this;var rt=this.curve.point(this.x,this.y.redNeg());if(tt&&this.precomputed){var at=this.precomputed,st=function(ot){return ot.neg()};rt.precomputed={naf:at.naf&&{wnd:at.naf.wnd,points:at.naf.points.map(st)},doubles:at.doubles&&{step:at.doubles.step,points:at.doubles.points.map(st)}}}return rt},Point.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var tt=this.curve.jpoint(this.x,this.y,this.curve.one);return tt};function JPoint(it,tt,rt,at){base$5.BasePoint.call(this,it,"jacobian"),tt===null&&rt===null&&at===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$4(0)):(this.x=new BN$4(tt,16),this.y=new BN$4(rt,16),this.z=new BN$4(at,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint,base$5.BasePoint),ShortCurve.prototype.jpoint=function(tt,rt,at){return new JPoint(this,tt,rt,at)},JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var tt=this.z.redInvm(),rt=tt.redSqr(),at=this.x.redMul(rt),st=this.y.redMul(rt).redMul(tt);return this.curve.point(at,st)},JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function(tt){if(this.isInfinity())return tt;if(tt.isInfinity())return this;var rt=tt.z.redSqr(),at=this.z.redSqr(),st=this.x.redMul(rt),ot=tt.x.redMul(at),lt=this.y.redMul(rt.redMul(tt.z)),ut=tt.y.redMul(at.redMul(this.z)),ht=st.redSub(ot),mt=lt.redSub(ut);if(ht.cmpn(0)===0)return mt.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var bt=ht.redSqr(),vt=bt.redMul(ht),At=st.redMul(bt),xt=mt.redSqr().redIAdd(vt).redISub(At).redISub(At),Et=mt.redMul(At.redISub(xt)).redISub(lt.redMul(vt)),Tt=this.z.redMul(tt.z).redMul(ht);return this.curve.jpoint(xt,Et,Tt)},JPoint.prototype.mixedAdd=function(tt){if(this.isInfinity())return tt.toJ();if(tt.isInfinity())return this;var rt=this.z.redSqr(),at=this.x,st=tt.x.redMul(rt),ot=this.y,lt=tt.y.redMul(rt).redMul(this.z),ut=at.redSub(st),ht=ot.redSub(lt);if(ut.cmpn(0)===0)return ht.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var mt=ut.redSqr(),bt=mt.redMul(ut),vt=at.redMul(mt),At=ht.redSqr().redIAdd(bt).redISub(vt).redISub(vt),xt=ht.redMul(vt.redISub(At)).redISub(ot.redMul(bt)),Et=this.z.redMul(ut);return this.curve.jpoint(At,xt,Et)},JPoint.prototype.dblp=function(tt){if(tt===0)return this;if(this.isInfinity())return this;if(!tt)return this.dbl();var rt;if(this.curve.zeroA||this.curve.threeA){var at=this;for(rt=0;rt<tt;rt++)at=at.dbl();return at}var st=this.curve.a,ot=this.curve.tinv,lt=this.x,ut=this.y,ht=this.z,mt=ht.redSqr().redSqr(),bt=ut.redAdd(ut);for(rt=0;rt<tt;rt++){var vt=lt.redSqr(),At=bt.redSqr(),xt=At.redSqr(),Et=vt.redAdd(vt).redIAdd(vt).redIAdd(st.redMul(mt)),Tt=lt.redMul(At),wt=Et.redSqr().redISub(Tt.redAdd(Tt)),Ct=Tt.redISub(wt),It=Et.redMul(Ct);It=It.redIAdd(It).redISub(xt);var St=bt.redMul(ht);rt+1<tt&&(mt=mt.redMul(xt)),lt=wt,ht=St,bt=It}return this.curve.jpoint(lt,bt.redMul(ot),ht)},JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function(){var tt,rt,at;if(this.zOne){var st=this.x.redSqr(),ot=this.y.redSqr(),lt=ot.redSqr(),ut=this.x.redAdd(ot).redSqr().redISub(st).redISub(lt);ut=ut.redIAdd(ut);var ht=st.redAdd(st).redIAdd(st),mt=ht.redSqr().redISub(ut).redISub(ut),bt=lt.redIAdd(lt);bt=bt.redIAdd(bt),bt=bt.redIAdd(bt),tt=mt,rt=ht.redMul(ut.redISub(mt)).redISub(bt),at=this.y.redAdd(this.y)}else{var vt=this.x.redSqr(),At=this.y.redSqr(),xt=At.redSqr(),Et=this.x.redAdd(At).redSqr().redISub(vt).redISub(xt);Et=Et.redIAdd(Et);var Tt=vt.redAdd(vt).redIAdd(vt),wt=Tt.redSqr(),Ct=xt.redIAdd(xt);Ct=Ct.redIAdd(Ct),Ct=Ct.redIAdd(Ct),tt=wt.redISub(Et).redISub(Et),rt=Tt.redMul(Et.redISub(tt)).redISub(Ct),at=this.y.redMul(this.z),at=at.redIAdd(at)}return this.curve.jpoint(tt,rt,at)},JPoint.prototype._threeDbl=function(){var tt,rt,at;if(this.zOne){var st=this.x.redSqr(),ot=this.y.redSqr(),lt=ot.redSqr(),ut=this.x.redAdd(ot).redSqr().redISub(st).redISub(lt);ut=ut.redIAdd(ut);var ht=st.redAdd(st).redIAdd(st).redIAdd(this.curve.a),mt=ht.redSqr().redISub(ut).redISub(ut);tt=mt;var bt=lt.redIAdd(lt);bt=bt.redIAdd(bt),bt=bt.redIAdd(bt),rt=ht.redMul(ut.redISub(mt)).redISub(bt),at=this.y.redAdd(this.y)}else{var vt=this.z.redSqr(),At=this.y.redSqr(),xt=this.x.redMul(At),Et=this.x.redSub(vt).redMul(this.x.redAdd(vt));Et=Et.redAdd(Et).redIAdd(Et);var Tt=xt.redIAdd(xt);Tt=Tt.redIAdd(Tt);var wt=Tt.redAdd(Tt);tt=Et.redSqr().redISub(wt),at=this.y.redAdd(this.z).redSqr().redISub(At).redISub(vt);var Ct=At.redSqr();Ct=Ct.redIAdd(Ct),Ct=Ct.redIAdd(Ct),Ct=Ct.redIAdd(Ct),rt=Et.redMul(Tt.redISub(tt)).redISub(Ct)}return this.curve.jpoint(tt,rt,at)},JPoint.prototype._dbl=function(){var tt=this.curve.a,rt=this.x,at=this.y,st=this.z,ot=st.redSqr().redSqr(),lt=rt.redSqr(),ut=at.redSqr(),ht=lt.redAdd(lt).redIAdd(lt).redIAdd(tt.redMul(ot)),mt=rt.redAdd(rt);mt=mt.redIAdd(mt);var bt=mt.redMul(ut),vt=ht.redSqr().redISub(bt.redAdd(bt)),At=bt.redISub(vt),xt=ut.redSqr();xt=xt.redIAdd(xt),xt=xt.redIAdd(xt),xt=xt.redIAdd(xt);var Et=ht.redMul(At).redISub(xt),Tt=at.redAdd(at).redMul(st);return this.curve.jpoint(vt,Et,Tt)},JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var tt=this.x.redSqr(),rt=this.y.redSqr(),at=this.z.redSqr(),st=rt.redSqr(),ot=tt.redAdd(tt).redIAdd(tt),lt=ot.redSqr(),ut=this.x.redAdd(rt).redSqr().redISub(tt).redISub(st);ut=ut.redIAdd(ut),ut=ut.redAdd(ut).redIAdd(ut),ut=ut.redISub(lt);var ht=ut.redSqr(),mt=st.redIAdd(st);mt=mt.redIAdd(mt),mt=mt.redIAdd(mt),mt=mt.redIAdd(mt);var bt=ot.redIAdd(ut).redSqr().redISub(lt).redISub(ht).redISub(mt),vt=rt.redMul(bt);vt=vt.redIAdd(vt),vt=vt.redIAdd(vt);var At=this.x.redMul(ht).redISub(vt);At=At.redIAdd(At),At=At.redIAdd(At);var xt=this.y.redMul(bt.redMul(mt.redISub(bt)).redISub(ut.redMul(ht)));xt=xt.redIAdd(xt),xt=xt.redIAdd(xt),xt=xt.redIAdd(xt);var Et=this.z.redAdd(ut).redSqr().redISub(at).redISub(ht);return this.curve.jpoint(At,xt,Et)},JPoint.prototype.mul=function(tt,rt){return tt=new BN$4(tt,rt),this.curve._wnafMul(this,tt)},JPoint.prototype.eq=function(tt){if(tt.type==="affine")return this.eq(tt.toJ());if(this===tt)return!0;var rt=this.z.redSqr(),at=tt.z.redSqr();if(this.x.redMul(at).redISub(tt.x.redMul(rt)).cmpn(0)!==0)return!1;var st=rt.redMul(this.z),ot=at.redMul(tt.z);return this.y.redMul(ot).redISub(tt.y.redMul(st)).cmpn(0)===0},JPoint.prototype.eqXToP=function(tt){var rt=this.z.redSqr(),at=tt.toRed(this.curve.red).redMul(rt);if(this.x.cmp(at)===0)return!0;for(var st=tt.clone(),ot=this.curve.redN.redMul(rt);;){if(st.iadd(this.curve.n),st.cmp(this.curve.p)>=0)return!1;if(at.redIAdd(ot),this.x.cmp(at)===0)return!0}},JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(it,tt){var rt=tt;rt.base=base$5,rt.short=short_1,rt.mont=null,rt.edwards=null}),curves_1=createCommonjsModule(function(it,tt){var rt=tt,at=utils_1$1$1.assert;function st(ut){ut.type==="short"?this.curve=new curve_1.short(ut):ut.type==="edwards"?this.curve=new curve_1.edwards(ut):this.curve=new curve_1.mont(ut),this.g=this.curve.g,this.n=this.curve.n,this.hash=ut.hash,at(this.g.validate(),"Invalid curve"),at(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}rt.PresetCurve=st;function ot(ut,ht){Object.defineProperty(rt,ut,{configurable:!0,enumerable:!0,get:function(){var mt=new st(ht);return Object.defineProperty(rt,ut,{configurable:!0,enumerable:!0,value:mt}),mt}})}ot("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$3.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),ot("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$3.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),ot("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$3.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),ot("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$3.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),ot("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$3.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),ot("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["9"]}),ot("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var lt;try{lt=null.crash()}catch{lt=void 0}ot("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",lt]})});function HmacDRBG(it){if(!(this instanceof HmacDRBG))return new HmacDRBG(it);this.hash=it.hash,this.predResist=!!it.predResist,this.outLen=this.hash.outSize,this.minEntropy=it.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var tt=utils_1$2.toArray(it.entropy,it.entropyEnc||"hex"),rt=utils_1$2.toArray(it.nonce,it.nonceEnc||"hex"),at=utils_1$2.toArray(it.pers,it.persEnc||"hex");minimalisticAssert(tt.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(tt,rt,at)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function(tt,rt,at){var st=tt.concat(rt).concat(at);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var ot=0;ot<this.V.length;ot++)this.K[ot]=0,this.V[ot]=1;this._update(st),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function(){return new hash$3.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function(tt){var rt=this._hmac().update(this.V).update([0]);tt&&(rt=rt.update(tt)),this.K=rt.digest(),this.V=this._hmac().update(this.V).digest(),tt&&(this.K=this._hmac().update(this.V).update([1]).update(tt).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function(tt,rt,at,st){typeof rt!="string"&&(st=at,at=rt,rt=null),tt=utils_1$2.toArray(tt,rt),at=utils_1$2.toArray(at,st),minimalisticAssert(tt.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(tt.concat(at||[])),this._reseed=1},HmacDRBG.prototype.generate=function(tt,rt,at,st){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof rt!="string"&&(st=at,at=rt,rt=null),at&&(at=utils_1$2.toArray(at,st||"hex"),this._update(at));for(var ot=[];ot.length<tt;)this.V=this._hmac().update(this.V).digest(),ot=ot.concat(this.V);var lt=ot.slice(0,tt);return this._update(at),this._reseed++,utils_1$2.encode(lt,rt)};var assert$3=utils_1$1$1.assert;function KeyPair(it,tt){this.ec=it,this.priv=null,this.pub=null,tt.priv&&this._importPrivate(tt.priv,tt.privEnc),tt.pub&&this._importPublic(tt.pub,tt.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function(tt,rt,at){return rt instanceof KeyPair?rt:new KeyPair(tt,{pub:rt,pubEnc:at})},KeyPair.fromPrivate=function(tt,rt,at){return rt instanceof KeyPair?rt:new KeyPair(tt,{priv:rt,privEnc:at})},KeyPair.prototype.validate=function(){var tt=this.getPublic();return tt.isInfinity()?{result:!1,reason:"Invalid public key"}:tt.validate()?tt.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function(tt,rt){return typeof tt=="string"&&(rt=tt,tt=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),rt?this.pub.encode(rt,tt):this.pub},KeyPair.prototype.getPrivate=function(tt){return tt==="hex"?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function(tt,rt){this.priv=new BN$4(tt,rt||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function(tt,rt){if(tt.x||tt.y){this.ec.curve.type==="mont"?assert$3(tt.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3(tt.x&&tt.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(tt.x,tt.y);return}this.pub=this.ec.curve.decodePoint(tt,rt)},KeyPair.prototype.derive=function(tt){return tt.validate()||assert$3(tt.validate(),"public point not validated"),tt.mul(this.priv).getX()},KeyPair.prototype.sign=function(tt,rt,at){return this.ec.sign(tt,this,rt,at)},KeyPair.prototype.verify=function(tt,rt){return this.ec.verify(tt,rt,this)},KeyPair.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1$1$1.assert;function Signature(it,tt){if(it instanceof Signature)return it;this._importDER(it,tt)||(assert$4(it.r&&it.s,"Signature without r or s"),this.r=new BN$4(it.r,16),this.s=new BN$4(it.s,16),it.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=it.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(it,tt){var rt=it[tt.place++];if(!(rt&128))return rt;var at=rt&15;if(at===0||at>4)return!1;for(var st=0,ot=0,lt=tt.place;ot<at;ot++,lt++)st<<=8,st|=it[lt],st>>>=0;return st<=127?!1:(tt.place=lt,st)}function rmPadding(it){for(var tt=0,rt=it.length-1;!it[tt]&&!(it[tt+1]&128)&&tt<rt;)tt++;return tt===0?it:it.slice(tt)}Signature.prototype._importDER=function(tt,rt){tt=utils_1$1$1.toArray(tt,rt);var at=new Position;if(tt[at.place++]!==48)return!1;var st=getLength(tt,at);if(st===!1||st+at.place!==tt.length||tt[at.place++]!==2)return!1;var ot=getLength(tt,at);if(ot===!1)return!1;var lt=tt.slice(at.place,ot+at.place);if(at.place+=ot,tt[at.place++]!==2)return!1;var ut=getLength(tt,at);if(ut===!1||tt.length!==ut+at.place)return!1;var ht=tt.slice(at.place,ut+at.place);if(lt[0]===0)if(lt[1]&128)lt=lt.slice(1);else return!1;if(ht[0]===0)if(ht[1]&128)ht=ht.slice(1);else return!1;return this.r=new BN$4(lt),this.s=new BN$4(ht),this.recoveryParam=null,!0};function constructLength(it,tt){if(tt<128){it.push(tt);return}var rt=1+(Math.log(tt)/Math.LN2>>>3);for(it.push(rt|128);--rt;)it.push(tt>>>(rt<<3)&255);it.push(tt)}Signature.prototype.toDER=function(tt){var rt=this.r.toArray(),at=this.s.toArray();for(rt[0]&128&&(rt=[0].concat(rt)),at[0]&128&&(at=[0].concat(at)),rt=rmPadding(rt),at=rmPadding(at);!at[0]&&!(at[1]&128);)at=at.slice(1);var st=[2];constructLength(st,rt.length),st=st.concat(rt),st.push(2),constructLength(st,at.length);var ot=st.concat(at),lt=[48];return constructLength(lt,ot.length),lt=lt.concat(ot),utils_1$1$1.encode(lt,tt)};var rand=function(){throw new Error("unsupported")},assert$5=utils_1$1$1.assert;function EC(it){if(!(this instanceof EC))return new EC(it);typeof it=="string"&&(assert$5(Object.prototype.hasOwnProperty.call(curves_1,it),"Unknown curve "+it),it=curves_1[it]),it instanceof curves_1.PresetCurve&&(it={curve:it}),this.curve=it.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=it.curve.g,this.g.precompute(it.curve.n.bitLength()+1),this.hash=it.hash||it.curve.hash}var ec=EC;EC.prototype.keyPair=function(tt){return new key(this,tt)},EC.prototype.keyFromPrivate=function(tt,rt){return key.fromPrivate(this,tt,rt)},EC.prototype.keyFromPublic=function(tt,rt){return key.fromPublic(this,tt,rt)},EC.prototype.genKeyPair=function(tt){tt||(tt={});for(var rt=new hmacDrbg({hash:this.hash,pers:tt.pers,persEnc:tt.persEnc||"utf8",entropy:tt.entropy||rand(this.hash.hmacStrength),entropyEnc:tt.entropy&&tt.entropyEnc||"utf8",nonce:this.n.toArray()}),at=this.n.byteLength(),st=this.n.sub(new BN$4(2));;){var ot=new BN$4(rt.generate(at));if(!(ot.cmp(st)>0))return ot.iaddn(1),this.keyFromPrivate(ot)}},EC.prototype._truncateToN=function(tt,rt){var at=tt.byteLength()*8-this.n.bitLength();return at>0&&(tt=tt.ushrn(at)),!rt&&tt.cmp(this.n)>=0?tt.sub(this.n):tt},EC.prototype.sign=function(tt,rt,at,st){typeof at=="object"&&(st=at,at=null),st||(st={}),rt=this.keyFromPrivate(rt,at),tt=this._truncateToN(new BN$4(tt,16));for(var ot=this.n.byteLength(),lt=rt.getPrivate().toArray("be",ot),ut=tt.toArray("be",ot),ht=new hmacDrbg({hash:this.hash,entropy:lt,nonce:ut,pers:st.pers,persEnc:st.persEnc||"utf8"}),mt=this.n.sub(new BN$4(1)),bt=0;;bt++){var vt=st.k?st.k(bt):new BN$4(ht.generate(this.n.byteLength()));if(vt=this._truncateToN(vt,!0),!(vt.cmpn(1)<=0||vt.cmp(mt)>=0)){var At=this.g.mul(vt);if(!At.isInfinity()){var xt=At.getX(),Et=xt.umod(this.n);if(Et.cmpn(0)!==0){var Tt=vt.invm(this.n).mul(Et.mul(rt.getPrivate()).iadd(tt));if(Tt=Tt.umod(this.n),Tt.cmpn(0)!==0){var wt=(At.getY().isOdd()?1:0)|(xt.cmp(Et)!==0?2:0);return st.canonical&&Tt.cmp(this.nh)>0&&(Tt=this.n.sub(Tt),wt^=1),new signature({r:Et,s:Tt,recoveryParam:wt})}}}}}},EC.prototype.verify=function(tt,rt,at,st){tt=this._truncateToN(new BN$4(tt,16)),at=this.keyFromPublic(at,st),rt=new signature(rt,"hex");var ot=rt.r,lt=rt.s;if(ot.cmpn(1)<0||ot.cmp(this.n)>=0||lt.cmpn(1)<0||lt.cmp(this.n)>=0)return!1;var ut=lt.invm(this.n),ht=ut.mul(tt).umod(this.n),mt=ut.mul(ot).umod(this.n),bt;return this.curve._maxwellTrick?(bt=this.g.jmulAdd(ht,at.getPublic(),mt),bt.isInfinity()?!1:bt.eqXToP(ot)):(bt=this.g.mulAdd(ht,at.getPublic(),mt),bt.isInfinity()?!1:bt.getX().umod(this.n).cmp(ot)===0)},EC.prototype.recoverPubKey=function(it,tt,rt,at){assert$5((3&rt)===rt,"The recovery param is more than two bits"),tt=new signature(tt,at);var st=this.n,ot=new BN$4(it),lt=tt.r,ut=tt.s,ht=rt&1,mt=rt>>1;if(lt.cmp(this.curve.p.umod(this.curve.n))>=0&&mt)throw new Error("Unable to find sencond key candinate");mt?lt=this.curve.pointFromX(lt.add(this.curve.n),ht):lt=this.curve.pointFromX(lt,ht);var bt=tt.r.invm(st),vt=st.sub(ot).mul(bt).umod(st),At=ut.mul(bt).umod(st);return this.g.mulAdd(vt,lt,At)},EC.prototype.getKeyRecoveryParam=function(it,tt,rt,at){if(tt=new signature(tt,at),tt.recoveryParam!==null)return tt.recoveryParam;for(var st=0;st<4;st++){var ot;try{ot=this.recoverPubKey(it,tt,st)}catch{continue}if(ot.eq(rt))return st}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(it,tt){var rt=tt;rt.version="6.5.4",rt.utils=utils_1$1$1,rt.rand=function(){throw new Error("unsupported")},rt.curve=curve_1,rt.curves=curves_1,rt.ec=ec,rt.eddsa=null}),EC$1=elliptic_1.ec;const version$i="signing-key/5.7.0",logger$s=new Logger(version$i);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}class SigningKey{constructor(tt){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(tt)),hexDataLength(this.privateKey)!==32&&logger$s.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const rt=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+rt.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+rt.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(tt){const rt=getCurve().keyFromPublic(arrayify(this.publicKey)),at=getCurve().keyFromPublic(arrayify(tt));return"0x"+rt.pub.add(at.pub).encodeCompressed("hex")}signDigest(tt){const rt=getCurve().keyFromPrivate(arrayify(this.privateKey)),at=arrayify(tt);at.length!==32&&logger$s.throwArgumentError("bad digest length","digest",tt);const st=rt.sign(at,{canonical:!0});return splitSignature({recoveryParam:st.recoveryParam,r:hexZeroPad("0x"+st.r.toString(16),32),s:hexZeroPad("0x"+st.s.toString(16),32)})}computeSharedSecret(tt){const rt=getCurve().keyFromPrivate(arrayify(this.privateKey)),at=getCurve().keyFromPublic(arrayify(computePublicKey(tt)));return hexZeroPad("0x"+rt.derive(at.getPublic()).toString(16),32)}static isSigningKey(tt){return!!(tt&&tt._isSigningKey)}}function recoverPublicKey(it,tt){const rt=splitSignature(tt),at={r:arrayify(rt.r),s:arrayify(rt.s)};return"0x"+getCurve().recoverPubKey(arrayify(it),at,rt.recoveryParam).encode("hex",!1)}function computePublicKey(it,tt){const rt=arrayify(it);if(rt.length===32){const at=new SigningKey(rt);return tt?"0x"+getCurve().keyFromPrivate(rt).getPublic(!0,"hex"):at.publicKey}else{if(rt.length===33)return tt?hexlify(rt):"0x"+getCurve().keyFromPublic(rt).getPublic(!1,"hex");if(rt.length===65)return tt?"0x"+getCurve().keyFromPublic(rt).getPublic(!0,"hex"):hexlify(rt)}return logger$s.throwArgumentError("invalid public or private key","key","[REDACTED]")}const lib_esm$a=Object.freeze(Object.defineProperty({__proto__:null,SigningKey,recoverPublicKey,computePublicKey},Symbol.toStringTag,{value:"Module"})),version$h="transactions/5.7.0",logger$r=new Logger(version$h);var TransactionTypes;(function(it){it[it.legacy=0]="legacy",it[it.eip2930=1]="eip2930",it[it.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));function handleAddress(it){return it==="0x"?null:getAddress(it)}function handleNumber(it){return it==="0x"?Zero$1:BigNumber.from(it)}const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys$2={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(it){const tt=computePublicKey(it);return getAddress(hexDataSlice(keccak256$1(hexDataSlice(tt,1)),12))}function recoverAddress(it,tt){return computeAddress(recoverPublicKey(arrayify(it),tt))}function formatNumber(it,tt){const rt=stripZeros(BigNumber.from(it).toHexString());return rt.length>32&&logger$r.throwArgumentError("invalid length for "+tt,"transaction:"+tt,it),rt}function accessSetify(it,tt){return{address:getAddress(it),storageKeys:(tt||[]).map((rt,at)=>(hexDataLength(rt)!==32&&logger$r.throwArgumentError("invalid access list storageKey",`accessList[${it}:${at}]`,rt),rt.toLowerCase()))}}function accessListify(it){if(Array.isArray(it))return it.map((rt,at)=>Array.isArray(rt)?(rt.length>2&&logger$r.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${at}]`,rt),accessSetify(rt[0],rt[1])):accessSetify(rt.address,rt.storageKeys));const tt=Object.keys(it).map(rt=>{const at=it[rt].reduce((st,ot)=>(st[ot]=!0,st),{});return accessSetify(rt,Object.keys(at).sort())});return tt.sort((rt,at)=>rt.address.localeCompare(at.address)),tt}function formatAccessList(it){return accessListify(it).map(tt=>[tt.address,tt.storageKeys])}function _serializeEip1559(it,tt){if(it.gasPrice!=null){const at=BigNumber.from(it.gasPrice),st=BigNumber.from(it.maxFeePerGas||0);at.eq(st)||logger$r.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:at,maxFeePerGas:st})}const rt=[formatNumber(it.chainId||0,"chainId"),formatNumber(it.nonce||0,"nonce"),formatNumber(it.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(it.maxFeePerGas||0,"maxFeePerGas"),formatNumber(it.gasLimit||0,"gasLimit"),it.to!=null?getAddress(it.to):"0x",formatNumber(it.value||0,"value"),it.data||"0x",formatAccessList(it.accessList||[])];if(tt){const at=splitSignature(tt);rt.push(formatNumber(at.recoveryParam,"recoveryParam")),rt.push(stripZeros(at.r)),rt.push(stripZeros(at.s))}return hexConcat(["0x02",encode$c(rt)])}function _serializeEip2930(it,tt){const rt=[formatNumber(it.chainId||0,"chainId"),formatNumber(it.nonce||0,"nonce"),formatNumber(it.gasPrice||0,"gasPrice"),formatNumber(it.gasLimit||0,"gasLimit"),it.to!=null?getAddress(it.to):"0x",formatNumber(it.value||0,"value"),it.data||"0x",formatAccessList(it.accessList||[])];if(tt){const at=splitSignature(tt);rt.push(formatNumber(at.recoveryParam,"recoveryParam")),rt.push(stripZeros(at.r)),rt.push(stripZeros(at.s))}return hexConcat(["0x01",encode$c(rt)])}function _serialize(it,tt){checkProperties(it,allowedTransactionKeys$2);const rt=[];transactionFields.forEach(function(lt){let ut=it[lt.name]||[];const ht={};lt.numeric&&(ht.hexPad="left"),ut=arrayify(hexlify(ut,ht)),lt.length&&ut.length!==lt.length&&ut.length>0&&logger$r.throwArgumentError("invalid length for "+lt.name,"transaction:"+lt.name,ut),lt.maxLength&&(ut=stripZeros(ut),ut.length>lt.maxLength&&logger$r.throwArgumentError("invalid length for "+lt.name,"transaction:"+lt.name,ut)),rt.push(hexlify(ut))});let at=0;if(it.chainId!=null?(at=it.chainId,typeof at!="number"&&logger$r.throwArgumentError("invalid transaction.chainId","transaction",it)):tt&&!isBytesLike(tt)&&tt.v>28&&(at=Math.floor((tt.v-35)/2)),at!==0&&(rt.push(hexlify(at)),rt.push("0x"),rt.push("0x")),!tt)return encode$c(rt);const st=splitSignature(tt);let ot=27+st.recoveryParam;return at!==0?(rt.pop(),rt.pop(),rt.pop(),ot+=at*2+8,st.v>28&&st.v!==ot&&logger$r.throwArgumentError("transaction.chainId/signature.v mismatch","signature",tt)):st.v!==ot&&logger$r.throwArgumentError("transaction.chainId/signature.v mismatch","signature",tt),rt.push(hexlify(ot)),rt.push(stripZeros(arrayify(st.r))),rt.push(stripZeros(arrayify(st.s))),encode$c(rt)}function serialize$3(it,tt){if(it.type==null||it.type===0)return it.accessList!=null&&logger$r.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",it),_serialize(it,tt);switch(it.type){case 1:return _serializeEip2930(it,tt);case 2:return _serializeEip1559(it,tt)}return logger$r.throwError(`unsupported transaction type: ${it.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:it.type})}function _parseEipSignature(it,tt,rt){try{const at=handleNumber(tt[0]).toNumber();if(at!==0&&at!==1)throw new Error("bad recid");it.v=at}catch{logger$r.throwArgumentError("invalid v for transaction type: 1","v",tt[0])}it.r=hexZeroPad(tt[1],32),it.s=hexZeroPad(tt[2],32);try{const at=keccak256$1(rt(it));it.from=recoverAddress(at,{r:it.r,s:it.s,recoveryParam:it.v})}catch{}}function _parseEip1559(it){const tt=decode$g(it.slice(1));tt.length!==9&&tt.length!==12&&logger$r.throwArgumentError("invalid component count for transaction type: 2","payload",hexlify(it));const rt=handleNumber(tt[2]),at=handleNumber(tt[3]),st={type:2,chainId:handleNumber(tt[0]).toNumber(),nonce:handleNumber(tt[1]).toNumber(),maxPriorityFeePerGas:rt,maxFeePerGas:at,gasPrice:null,gasLimit:handleNumber(tt[4]),to:handleAddress(tt[5]),value:handleNumber(tt[6]),data:tt[7],accessList:accessListify(tt[8])};return tt.length===9||(st.hash=keccak256$1(it),_parseEipSignature(st,tt.slice(9),_serializeEip1559)),st}function _parseEip2930(it){const tt=decode$g(it.slice(1));tt.length!==8&&tt.length!==11&&logger$r.throwArgumentError("invalid component count for transaction type: 1","payload",hexlify(it));const rt={type:1,chainId:handleNumber(tt[0]).toNumber(),nonce:handleNumber(tt[1]).toNumber(),gasPrice:handleNumber(tt[2]),gasLimit:handleNumber(tt[3]),to:handleAddress(tt[4]),value:handleNumber(tt[5]),data:tt[6],accessList:accessListify(tt[7])};return tt.length===8||(rt.hash=keccak256$1(it),_parseEipSignature(rt,tt.slice(8),_serializeEip2930)),rt}function _parse(it){const tt=decode$g(it);tt.length!==9&&tt.length!==6&&logger$r.throwArgumentError("invalid raw transaction","rawTransaction",it);const rt={nonce:handleNumber(tt[0]).toNumber(),gasPrice:handleNumber(tt[1]),gasLimit:handleNumber(tt[2]),to:handleAddress(tt[3]),value:handleNumber(tt[4]),data:tt[5],chainId:0};if(tt.length===6)return rt;try{rt.v=BigNumber.from(tt[6]).toNumber()}catch{return rt}if(rt.r=hexZeroPad(tt[7],32),rt.s=hexZeroPad(tt[8],32),BigNumber.from(rt.r).isZero()&&BigNumber.from(rt.s).isZero())rt.chainId=rt.v,rt.v=0;else{rt.chainId=Math.floor((rt.v-35)/2),rt.chainId<0&&(rt.chainId=0);let at=rt.v-27;const st=tt.slice(0,6);rt.chainId!==0&&(st.push(hexlify(rt.chainId)),st.push("0x"),st.push("0x"),at-=rt.chainId*2+8);const ot=keccak256$1(encode$c(st));try{rt.from=recoverAddress(ot,{r:hexlify(rt.r),s:hexlify(rt.s),recoveryParam:at})}catch{}rt.hash=keccak256$1(it)}return rt.type=null,rt}function parse$3(it){const tt=arrayify(it);if(tt[0]>127)return _parse(tt);switch(tt[0]){case 1:return _parseEip2930(tt);case 2:return _parseEip1559(tt)}return logger$r.throwError(`unsupported transaction type: ${tt[0]}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:tt[0]})}const lib_esm$9=Object.freeze(Object.defineProperty({__proto__:null,get TransactionTypes(){return TransactionTypes},computeAddress,recoverAddress,accessListify,serialize:serialize$3,parse:parse$3},Symbol.toStringTag,{value:"Module"})),version$g="contracts/5.7.0";var __awaiter$b=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$q=new Logger(version$g),allowedTransactionKeys$1={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function resolveName(it,tt){return __awaiter$b(this,void 0,void 0,function*(){const rt=yield tt;typeof rt!="string"&&logger$q.throwArgumentError("invalid address or ENS name","name",rt);try{return getAddress(rt)}catch{}it||logger$q.throwError("a provider or signer is needed to resolve ENS names",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const at=yield it.resolveName(rt);return at==null&&logger$q.throwArgumentError("resolver or addr is not configured for ENS name","name",rt),at})}function resolveAddresses(it,tt,rt){return __awaiter$b(this,void 0,void 0,function*(){return Array.isArray(rt)?yield Promise.all(rt.map((at,st)=>resolveAddresses(it,Array.isArray(tt)?tt[st]:tt[at.name],at))):rt.type==="address"?yield resolveName(it,tt):rt.type==="tuple"?yield resolveAddresses(it,tt,rt.components):rt.baseType==="array"?Array.isArray(tt)?yield Promise.all(tt.map(at=>resolveAddresses(it,at,rt.arrayChildren))):Promise.reject(logger$q.makeError("invalid value for array",Logger.errors.INVALID_ARGUMENT,{argument:"value",value:tt})):tt})}function populateTransaction(it,tt,rt){return __awaiter$b(this,void 0,void 0,function*(){let at={};rt.length===tt.inputs.length+1&&typeof rt[rt.length-1]=="object"&&(at=shallowCopy(rt.pop())),logger$q.checkArgumentCount(rt.length,tt.inputs.length,"passed to contract"),it.signer?at.from?at.from=resolveProperties({override:resolveName(it.signer,at.from),signer:it.signer.getAddress()}).then(mt=>__awaiter$b(this,void 0,void 0,function*(){return getAddress(mt.signer)!==mt.override&&logger$q.throwError("Contract with a Signer cannot override from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),mt.override})):at.from=it.signer.getAddress():at.from&&(at.from=resolveName(it.provider,at.from));const st=yield resolveProperties({args:resolveAddresses(it.signer||it.provider,rt,tt.inputs),address:it.resolvedAddress,overrides:resolveProperties(at)||{}}),ot=it.interface.encodeFunctionData(tt,st.args),lt={data:ot,to:st.address},ut=st.overrides;if(ut.nonce!=null&&(lt.nonce=BigNumber.from(ut.nonce).toNumber()),ut.gasLimit!=null&&(lt.gasLimit=BigNumber.from(ut.gasLimit)),ut.gasPrice!=null&&(lt.gasPrice=BigNumber.from(ut.gasPrice)),ut.maxFeePerGas!=null&&(lt.maxFeePerGas=BigNumber.from(ut.maxFeePerGas)),ut.maxPriorityFeePerGas!=null&&(lt.maxPriorityFeePerGas=BigNumber.from(ut.maxPriorityFeePerGas)),ut.from!=null&&(lt.from=ut.from),ut.type!=null&&(lt.type=ut.type),ut.accessList!=null&&(lt.accessList=accessListify(ut.accessList)),lt.gasLimit==null&&tt.gas!=null){let mt=21e3;const bt=arrayify(ot);for(let vt=0;vt<bt.length;vt++)mt+=4,bt[vt]&&(mt+=64);lt.gasLimit=BigNumber.from(tt.gas).add(mt)}if(ut.value){const mt=BigNumber.from(ut.value);!mt.isZero()&&!tt.payable&&logger$q.throwError("non-payable method cannot override value",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:at.value}),lt.value=mt}ut.customData&&(lt.customData=shallowCopy(ut.customData)),ut.ccipReadEnabled&&(lt.ccipReadEnabled=!!ut.ccipReadEnabled),delete at.nonce,delete at.gasLimit,delete at.gasPrice,delete at.from,delete at.value,delete at.type,delete at.accessList,delete at.maxFeePerGas,delete at.maxPriorityFeePerGas,delete at.customData,delete at.ccipReadEnabled;const ht=Object.keys(at).filter(mt=>at[mt]!=null);return ht.length&&logger$q.throwError(`cannot override ${ht.map(mt=>JSON.stringify(mt)).join(",")}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:ht}),lt})}function buildPopulate(it,tt){return function(...rt){return populateTransaction(it,tt,rt)}}function buildEstimate(it,tt){const rt=it.signer||it.provider;return function(...at){return __awaiter$b(this,void 0,void 0,function*(){rt||logger$q.throwError("estimate require a provider or signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const st=yield populateTransaction(it,tt,at);return yield rt.estimateGas(st)})}}function addContractWait(it,tt){const rt=tt.wait.bind(tt);tt.wait=at=>rt(at).then(st=>(st.events=st.logs.map(ot=>{let lt=deepCopy(ot),ut=null;try{ut=it.interface.parseLog(ot)}catch{}return ut&&(lt.args=ut.args,lt.decode=(ht,mt)=>it.interface.decodeEventLog(ut.eventFragment,ht,mt),lt.event=ut.name,lt.eventSignature=ut.signature),lt.removeListener=()=>it.provider,lt.getBlock=()=>it.provider.getBlock(st.blockHash),lt.getTransaction=()=>it.provider.getTransaction(st.transactionHash),lt.getTransactionReceipt=()=>Promise.resolve(st),lt}),st))}function buildCall(it,tt,rt){const at=it.signer||it.provider;return function(...st){return __awaiter$b(this,void 0,void 0,function*(){let ot;if(st.length===tt.inputs.length+1&&typeof st[st.length-1]=="object"){const ht=shallowCopy(st.pop());ht.blockTag!=null&&(ot=yield ht.blockTag),delete ht.blockTag,st.push(ht)}it.deployTransaction!=null&&(yield it._deployed(ot));const lt=yield populateTransaction(it,tt,st),ut=yield at.call(lt,ot);try{let ht=it.interface.decodeFunctionResult(tt,ut);return rt&&tt.outputs.length===1&&(ht=ht[0]),ht}catch(ht){throw ht.code===Logger.errors.CALL_EXCEPTION&&(ht.address=it.address,ht.args=st,ht.transaction=lt),ht}})}}function buildSend(it,tt){return function(...rt){return __awaiter$b(this,void 0,void 0,function*(){it.signer||logger$q.throwError("sending a transaction requires a signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),it.deployTransaction!=null&&(yield it._deployed());const at=yield populateTransaction(it,tt,rt),st=yield it.signer.sendTransaction(at);return addContractWait(it,st),st})}}function buildDefault(it,tt,rt){return tt.constant?buildCall(it,tt,rt):buildSend(it,tt)}function getEventTag$1(it){return it.address&&(it.topics==null||it.topics.length===0)?"*":(it.address||"*")+"@"+(it.topics?it.topics.map(tt=>Array.isArray(tt)?tt.join("|"):tt).join(":"):"")}class RunningEvent{constructor(tt,rt){defineReadOnly(this,"tag",tt),defineReadOnly(this,"filter",rt),this._listeners=[]}addListener(tt,rt){this._listeners.push({listener:tt,once:rt})}removeListener(tt){let rt=!1;this._listeners=this._listeners.filter(at=>rt||at.listener!==tt?!0:(rt=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(tt=>tt.listener)}listenerCount(){return this._listeners.length}run(tt){const rt=this.listenerCount();return this._listeners=this._listeners.filter(at=>{const st=tt.slice();return setTimeout(()=>{at.listener.apply(this,st)},0),!at.once}),rt}prepareEvent(tt){}getEmit(tt){return[tt]}}class ErrorRunningEvent extends RunningEvent{constructor(){super("error",null)}}class FragmentRunningEvent extends RunningEvent{constructor(tt,rt,at,st){const ot={address:tt};let lt=rt.getEventTopic(at);st?(lt!==st[0]&&logger$q.throwArgumentError("topic mismatch","topics",st),ot.topics=st.slice()):ot.topics=[lt],super(getEventTag$1(ot),ot),defineReadOnly(this,"address",tt),defineReadOnly(this,"interface",rt),defineReadOnly(this,"fragment",at)}prepareEvent(tt){super.prepareEvent(tt),tt.event=this.fragment.name,tt.eventSignature=this.fragment.format(),tt.decode=(rt,at)=>this.interface.decodeEventLog(this.fragment,rt,at);try{tt.args=this.interface.decodeEventLog(this.fragment,tt.data,tt.topics)}catch(rt){tt.args=null,tt.decodeError=rt}}getEmit(tt){const rt=checkResultErrors(tt.args);if(rt.length)throw rt[0].error;const at=(tt.args||[]).slice();return at.push(tt),at}}class WildcardRunningEvent extends RunningEvent{constructor(tt,rt){super("*",{address:tt}),defineReadOnly(this,"address",tt),defineReadOnly(this,"interface",rt)}prepareEvent(tt){super.prepareEvent(tt);try{const rt=this.interface.parseLog(tt);tt.event=rt.name,tt.eventSignature=rt.signature,tt.decode=(at,st)=>this.interface.decodeEventLog(rt.eventFragment,at,st),tt.args=rt.args}catch{}}}class BaseContract{constructor(tt,rt,at){defineReadOnly(this,"interface",getStatic(new.target,"getInterface")(rt)),at==null?(defineReadOnly(this,"provider",null),defineReadOnly(this,"signer",null)):Signer.isSigner(at)?(defineReadOnly(this,"provider",at.provider||null),defineReadOnly(this,"signer",at)):Provider$1.isProvider(at)?(defineReadOnly(this,"provider",at),defineReadOnly(this,"signer",null)):logger$q.throwArgumentError("invalid signer or provider","signerOrProvider",at),defineReadOnly(this,"callStatic",{}),defineReadOnly(this,"estimateGas",{}),defineReadOnly(this,"functions",{}),defineReadOnly(this,"populateTransaction",{}),defineReadOnly(this,"filters",{});{const lt={};Object.keys(this.interface.events).forEach(ut=>{const ht=this.interface.events[ut];defineReadOnly(this.filters,ut,(...mt)=>({address:this.address,topics:this.interface.encodeFilterTopics(ht,mt)})),lt[ht.name]||(lt[ht.name]=[]),lt[ht.name].push(ut)}),Object.keys(lt).forEach(ut=>{const ht=lt[ut];ht.length===1?defineReadOnly(this.filters,ut,this.filters[ht[0]]):logger$q.warn(`Duplicate definition of ${ut} (${ht.join(", ")})`)})}if(defineReadOnly(this,"_runningEvents",{}),defineReadOnly(this,"_wrappedEmits",{}),tt==null&&logger$q.throwArgumentError("invalid contract address or ENS name","addressOrName",tt),defineReadOnly(this,"address",tt),this.provider)defineReadOnly(this,"resolvedAddress",resolveName(this.provider,tt));else try{defineReadOnly(this,"resolvedAddress",Promise.resolve(getAddress(tt)))}catch{logger$q.throwError("provider is required to use ENS name as contract address",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(lt=>{});const st={},ot={};Object.keys(this.interface.functions).forEach(lt=>{const ut=this.interface.functions[lt];if(ot[lt]){logger$q.warn(`Duplicate ABI entry for ${JSON.stringify(lt)}`);return}ot[lt]=!0;{const ht=ut.name;st[`%${ht}`]||(st[`%${ht}`]=[]),st[`%${ht}`].push(lt)}this[lt]==null&&defineReadOnly(this,lt,buildDefault(this,ut,!0)),this.functions[lt]==null&&defineReadOnly(this.functions,lt,buildDefault(this,ut,!1)),this.callStatic[lt]==null&&defineReadOnly(this.callStatic,lt,buildCall(this,ut,!0)),this.populateTransaction[lt]==null&&defineReadOnly(this.populateTransaction,lt,buildPopulate(this,ut)),this.estimateGas[lt]==null&&defineReadOnly(this.estimateGas,lt,buildEstimate(this,ut))}),Object.keys(st).forEach(lt=>{const ut=st[lt];if(ut.length>1)return;lt=lt.substring(1);const ht=ut[0];try{this[lt]==null&&defineReadOnly(this,lt,this[ht])}catch{}this.functions[lt]==null&&defineReadOnly(this.functions,lt,this.functions[ht]),this.callStatic[lt]==null&&defineReadOnly(this.callStatic,lt,this.callStatic[ht]),this.populateTransaction[lt]==null&&defineReadOnly(this.populateTransaction,lt,this.populateTransaction[ht]),this.estimateGas[lt]==null&&defineReadOnly(this.estimateGas,lt,this.estimateGas[ht])})}static getContractAddress(tt){return getContractAddress(tt)}static getInterface(tt){return Interface.isInterface(tt)?tt:new Interface(tt)}deployed(){return this._deployed()}_deployed(tt){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,tt).then(rt=>(rt==="0x"&&logger$q.throwError("contract not deployed",Logger.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(tt){this.signer||logger$q.throwError("sending a transactions require a signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const rt=shallowCopy(tt||{});return["from","to"].forEach(function(at){rt[at]!=null&&logger$q.throwError("cannot override "+at,Logger.errors.UNSUPPORTED_OPERATION,{operation:at})}),rt.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(rt))}connect(tt){typeof tt=="string"&&(tt=new VoidSigner(tt,this.provider));const rt=new this.constructor(this.address,this.interface,tt);return this.deployTransaction&&defineReadOnly(rt,"deployTransaction",this.deployTransaction),rt}attach(tt){return new this.constructor(tt,this.interface,this.signer||this.provider)}static isIndexed(tt){return Indexed.isIndexed(tt)}_normalizeRunningEvent(tt){return this._runningEvents[tt.tag]?this._runningEvents[tt.tag]:tt}_getRunningEvent(tt){if(typeof tt=="string"){if(tt==="error")return this._normalizeRunningEvent(new ErrorRunningEvent);if(tt==="event")return this._normalizeRunningEvent(new RunningEvent("event",null));if(tt==="*")return this._normalizeRunningEvent(new WildcardRunningEvent(this.address,this.interface));const rt=this.interface.getEvent(tt);return this._normalizeRunningEvent(new FragmentRunningEvent(this.address,this.interface,rt))}if(tt.topics&&tt.topics.length>0){try{const at=tt.topics[0];if(typeof at!="string")throw new Error("invalid topic");const st=this.interface.getEvent(at);return this._normalizeRunningEvent(new FragmentRunningEvent(this.address,this.interface,st,tt.topics))}catch{}const rt={address:this.address,topics:tt.topics};return this._normalizeRunningEvent(new RunningEvent(getEventTag$1(rt),rt))}return this._normalizeRunningEvent(new WildcardRunningEvent(this.address,this.interface))}_checkRunningEvents(tt){if(tt.listenerCount()===0){delete this._runningEvents[tt.tag];const rt=this._wrappedEmits[tt.tag];rt&&tt.filter&&(this.provider.off(tt.filter,rt),delete this._wrappedEmits[tt.tag])}}_wrapEvent(tt,rt,at){const st=deepCopy(rt);return st.removeListener=()=>{!at||(tt.removeListener(at),this._checkRunningEvents(tt))},st.getBlock=()=>this.provider.getBlock(rt.blockHash),st.getTransaction=()=>this.provider.getTransaction(rt.transactionHash),st.getTransactionReceipt=()=>this.provider.getTransactionReceipt(rt.transactionHash),tt.prepareEvent(st),st}_addEventListener(tt,rt,at){if(this.provider||logger$q.throwError("events require a provider or a signer with a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"once"}),tt.addListener(rt,at),this._runningEvents[tt.tag]=tt,!this._wrappedEmits[tt.tag]){const st=ot=>{let lt=this._wrapEvent(tt,ot,rt);if(lt.decodeError==null)try{const ut=tt.getEmit(lt);this.emit(tt.filter,...ut)}catch(ut){lt.decodeError=ut.error}tt.filter!=null&&this.emit("event",lt),lt.decodeError!=null&&this.emit("error",lt.decodeError,lt)};this._wrappedEmits[tt.tag]=st,tt.filter!=null&&this.provider.on(tt.filter,st)}}queryFilter(tt,rt,at){const st=this._getRunningEvent(tt),ot=shallowCopy(st.filter);return typeof rt=="string"&&isHexString$4(rt,32)?(at!=null&&logger$q.throwArgumentError("cannot specify toBlock with blockhash","toBlock",at),ot.blockHash=rt):(ot.fromBlock=rt!=null?rt:0,ot.toBlock=at!=null?at:"latest"),this.provider.getLogs(ot).then(lt=>lt.map(ut=>this._wrapEvent(st,ut,null)))}on(tt,rt){return this._addEventListener(this._getRunningEvent(tt),rt,!1),this}once(tt,rt){return this._addEventListener(this._getRunningEvent(tt),rt,!0),this}emit(tt,...rt){if(!this.provider)return!1;const at=this._getRunningEvent(tt),st=at.run(rt)>0;return this._checkRunningEvents(at),st}listenerCount(tt){return this.provider?tt==null?Object.keys(this._runningEvents).reduce((rt,at)=>rt+this._runningEvents[at].listenerCount(),0):this._getRunningEvent(tt).listenerCount():0}listeners(tt){if(!this.provider)return[];if(tt==null){const rt=[];for(let at in this._runningEvents)this._runningEvents[at].listeners().forEach(st=>{rt.push(st)});return rt}return this._getRunningEvent(tt).listeners()}removeAllListeners(tt){if(!this.provider)return this;if(tt==null){for(const at in this._runningEvents){const st=this._runningEvents[at];st.removeAllListeners(),this._checkRunningEvents(st)}return this}const rt=this._getRunningEvent(tt);return rt.removeAllListeners(),this._checkRunningEvents(rt),this}off(tt,rt){if(!this.provider)return this;const at=this._getRunningEvent(tt);return at.removeListener(rt),this._checkRunningEvents(at),this}removeListener(tt,rt){return this.off(tt,rt)}}class Contract extends BaseContract{}class ContractFactory$1{constructor(tt,rt,at){let st=null;typeof rt=="string"?st=rt:isBytes(rt)?st=hexlify(rt):rt&&typeof rt.object=="string"?st=rt.object:st="!",st.substring(0,2)!=="0x"&&(st="0x"+st),(!isHexString$4(st)||st.length%2)&&logger$q.throwArgumentError("invalid bytecode","bytecode",rt),at&&!Signer.isSigner(at)&&logger$q.throwArgumentError("invalid signer","signer",at),defineReadOnly(this,"bytecode",st),defineReadOnly(this,"interface",getStatic(new.target,"getInterface")(tt)),defineReadOnly(this,"signer",at||null)}getDeployTransaction(...tt){let rt={};if(tt.length===this.interface.deploy.inputs.length+1&&typeof tt[tt.length-1]=="object"){rt=shallowCopy(tt.pop());for(const at in rt)if(!allowedTransactionKeys$1[at])throw new Error("unknown transaction override "+at)}return["data","from","to"].forEach(at=>{rt[at]!=null&&logger$q.throwError("cannot override "+at,Logger.errors.UNSUPPORTED_OPERATION,{operation:at})}),rt.value&&!BigNumber.from(rt.value).isZero()&&!this.interface.deploy.payable&&logger$q.throwError("non-payable constructor cannot override value",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:rt.value}),logger$q.checkArgumentCount(tt.length,this.interface.deploy.inputs.length," in Contract constructor"),rt.data=hexlify(concat$6([this.bytecode,this.interface.encodeDeploy(tt)])),rt}deploy(...tt){return __awaiter$b(this,void 0,void 0,function*(){let rt={};tt.length===this.interface.deploy.inputs.length+1&&(rt=tt.pop()),logger$q.checkArgumentCount(tt.length,this.interface.deploy.inputs.length," in Contract constructor");const at=yield resolveAddresses(this.signer,tt,this.interface.deploy.inputs);at.push(rt);const st=this.getDeployTransaction(...at),ot=yield this.signer.sendTransaction(st),lt=getStatic(this.constructor,"getContractAddress")(ot),ut=getStatic(this.constructor,"getContract")(lt,this.interface,this.signer);return addContractWait(ut,ot),defineReadOnly(ut,"deployTransaction",ot),ut})}attach(tt){return this.constructor.getContract(tt,this.interface,this.signer)}connect(tt){return new this.constructor(this.interface,this.bytecode,tt)}static fromSolidity(tt,rt){tt==null&&logger$q.throwError("missing compiler output",Logger.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof tt=="string"&&(tt=JSON.parse(tt));const at=tt.abi;let st=null;return tt.bytecode?st=tt.bytecode:tt.evm&&tt.evm.bytecode&&(st=tt.evm.bytecode),new this(at,st,rt)}static getInterface(tt){return Contract.getInterface(tt)}static getContractAddress(tt){return getContractAddress(tt)}static getContract(tt,rt,at){return new Contract(tt,rt,at)}}class BaseX{constructor(tt){defineReadOnly(this,"alphabet",tt),defineReadOnly(this,"base",tt.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",tt.charAt(0));for(let rt=0;rt<tt.length;rt++)this._alphabetMap[tt.charAt(rt)]=rt}encode(tt){let rt=arrayify(tt);if(rt.length===0)return"";let at=[0];for(let ot=0;ot<rt.length;++ot){let lt=rt[ot];for(let ut=0;ut<at.length;++ut)lt+=at[ut]<<8,at[ut]=lt%this.base,lt=lt/this.base|0;for(;lt>0;)at.push(lt%this.base),lt=lt/this.base|0}let st="";for(let ot=0;rt[ot]===0&&ot<rt.length-1;++ot)st+=this._leader;for(let ot=at.length-1;ot>=0;--ot)st+=this.alphabet[at[ot]];return st}decode(tt){if(typeof tt!="string")throw new TypeError("Expected String");let rt=[];if(tt.length===0)return new Uint8Array(rt);rt.push(0);for(let at=0;at<tt.length;at++){let st=this._alphabetMap[tt[at]];if(st===void 0)throw new Error("Non-base"+this.base+" character");let ot=st;for(let lt=0;lt<rt.length;++lt)ot+=rt[lt]*this.base,rt[lt]=ot&255,ot>>=8;for(;ot>0;)rt.push(ot&255),ot>>=8}for(let at=0;tt[at]===this._leader&&at<tt.length-1;++at)rt.push(0);return arrayify(new Uint8Array(rt.reverse()))}}const Base32=new BaseX("abcdefghijklmnopqrstuvwxyz234567"),Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),lib_esm$8=Object.freeze(Object.defineProperty({__proto__:null,BaseX,Base32,Base58},Symbol.toStringTag,{value:"Module"}));var SupportedAlgorithm;(function(it){it.sha256="sha256",it.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$f="sha2/5.7.0",logger$p=new Logger(version$f);function ripemd160$1(it){return"0x"+hash$3.ripemd160().update(arrayify(it)).digest("hex")}function sha256$4(it){return"0x"+hash$3.sha256().update(arrayify(it)).digest("hex")}function sha512$3(it){return"0x"+hash$3.sha512().update(arrayify(it)).digest("hex")}function computeHmac(it,tt,rt){return SupportedAlgorithm[it]||logger$p.throwError("unsupported algorithm "+it,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:it}),"0x"+hash$3.hmac(hash$3[it],arrayify(tt)).update(arrayify(rt)).digest("hex")}const lib_esm$7=Object.freeze(Object.defineProperty({__proto__:null,computeHmac,ripemd160:ripemd160$1,sha256:sha256$4,sha512:sha512$3,get SupportedAlgorithm(){return SupportedAlgorithm}},Symbol.toStringTag,{value:"Module"}));function pbkdf2$2(it,tt,rt,at,st){it=arrayify(it),tt=arrayify(tt);let ot,lt=1;const ut=new Uint8Array(at),ht=new Uint8Array(tt.length+4);ht.set(tt);let mt,bt;for(let vt=1;vt<=lt;vt++){ht[tt.length]=vt>>24&255,ht[tt.length+1]=vt>>16&255,ht[tt.length+2]=vt>>8&255,ht[tt.length+3]=vt&255;let At=arrayify(computeHmac(st,it,ht));ot||(ot=At.length,bt=new Uint8Array(ot),lt=Math.ceil(at/ot),mt=at-(lt-1)*ot),bt.set(At);for(let Tt=1;Tt<rt;Tt++){At=arrayify(computeHmac(st,it,At));for(let wt=0;wt<ot;wt++)bt[wt]^=At[wt]}const xt=(vt-1)*ot,Et=vt===lt?mt:ot;ut.set(arrayify(bt).slice(0,Et),xt)}return hexlify(ut)}const version$e="wordlists/5.7.0",logger$o=new Logger(version$e);class Wordlist{constructor(tt){logger$o.checkAbstract(new.target,Wordlist),defineReadOnly(this,"locale",tt)}split(tt){return tt.toLowerCase().split(/ +/g)}join(tt){return tt.join(" ")}static check(tt){const rt=[];for(let at=0;at<2048;at++){const st=tt.getWord(at);if(at!==tt.getWordIndex(st))return"0x";rt.push(st)}return id(rt.join(`
`)+`
`)}static register(tt,rt){rt||(rt=tt.locale)}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(it){if(wordlist==null&&(wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist.check(it)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist=null,new Error("BIP39 Wordlist for en (English) FAILED")}class LangEn extends Wordlist{constructor(){super("en")}getWord(tt){return loadWords(this),wordlist[tt]}getWordIndex(tt){return loadWords(this),wordlist.indexOf(tt)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists={en:langEn},version$d="hdnode/5.7.0",logger$n=new Logger(version$d),N$4=BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret=toUtf8Bytes("Bitcoin seed"),HardenedBit=2147483648;function getUpperMask(it){return(1<<it)-1<<8-it}function getLowerMask(it){return(1<<it)-1}function bytes32(it){return hexZeroPad(hexlify(it),32)}function base58check(it){return Base58.encode(concat$6([it,hexDataSlice(sha256$4(sha256$4(it)),0,4)]))}function getWordlist(it){if(it==null)return wordlists.en;if(typeof it=="string"){const tt=wordlists[it];return tt==null&&logger$n.throwArgumentError("unknown locale","wordlist",it),tt}return it}const _constructorGuard$1={},defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(tt,rt,at,st,ot,lt,ut,ht){if(tt!==_constructorGuard$1)throw new Error("HDNode constructor cannot be called directly");if(rt){const mt=new SigningKey(rt);defineReadOnly(this,"privateKey",mt.privateKey),defineReadOnly(this,"publicKey",mt.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify(at));defineReadOnly(this,"parentFingerprint",st),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160$1(sha256$4(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress(this.publicKey)),defineReadOnly(this,"chainCode",ot),defineReadOnly(this,"index",lt),defineReadOnly(this,"depth",ut),ht==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof ht=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",ht)):(defineReadOnly(this,"mnemonic",ht),defineReadOnly(this,"path",ht.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat$6([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat$6(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard$1,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(tt){if(tt>4294967295)throw new Error("invalid index - "+String(tt));let rt=this.path;rt&&(rt+="/"+(tt&~HardenedBit));const at=new Uint8Array(37);if(tt&HardenedBit){if(!this.privateKey)throw new Error("cannot derive child of neutered node");at.set(arrayify(this.privateKey),1),rt&&(rt+="'")}else at.set(arrayify(this.publicKey));for(let vt=24;vt>=0;vt-=8)at[33+(vt>>3)]=tt>>24-vt&255;const st=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,at)),ot=st.slice(0,32),lt=st.slice(32);let ut=null,ht=null;this.privateKey?ut=bytes32(BigNumber.from(ot).add(this.privateKey).mod(N$4)):ht=new SigningKey(hexlify(ot))._addPoint(this.publicKey);let mt=rt;const bt=this.mnemonic;return bt&&(mt=Object.freeze({phrase:bt.phrase,path:rt,locale:bt.locale||"en"})),new HDNode(_constructorGuard$1,ut,ht,this.fingerprint,bytes32(lt),tt,this.depth+1,mt)}derivePath(tt){const rt=tt.split("/");if(rt.length===0||rt[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+tt);rt[0]==="m"&&rt.shift();let at=this;for(let st=0;st<rt.length;st++){const ot=rt[st];if(ot.match(/^[0-9]+'$/)){const lt=parseInt(ot.substring(0,ot.length-1));if(lt>=HardenedBit)throw new Error("invalid path index - "+ot);at=at._derive(HardenedBit+lt)}else if(ot.match(/^[0-9]+$/)){const lt=parseInt(ot);if(lt>=HardenedBit)throw new Error("invalid path index - "+ot);at=at._derive(lt)}else throw new Error("invalid path component - "+ot)}return at}static _fromSeed(tt,rt){const at=arrayify(tt);if(at.length<16||at.length>64)throw new Error("invalid seed");const st=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,at));return new HDNode(_constructorGuard$1,bytes32(st.slice(0,32)),null,"0x00000000",bytes32(st.slice(32)),0,0,rt)}static fromMnemonic(tt,rt,at){return at=getWordlist(at),tt=entropyToMnemonic(mnemonicToEntropy(tt,at),at),HDNode._fromSeed(mnemonicToSeed(tt,rt),{phrase:tt,path:"m",locale:at.locale})}static fromSeed(tt){return HDNode._fromSeed(tt,null)}static fromExtendedKey(tt){const rt=Base58.decode(tt);(rt.length!==82||base58check(rt.slice(0,78))!==tt)&&logger$n.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const at=rt[4],st=hexlify(rt.slice(5,9)),ot=parseInt(hexlify(rt.slice(9,13)).substring(2),16),lt=hexlify(rt.slice(13,45)),ut=rt.slice(45,78);switch(hexlify(rt.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard$1,null,hexlify(ut),st,lt,ot,at,null);case"0x0488ade4":case"0x04358394 ":if(ut[0]!==0)break;return new HDNode(_constructorGuard$1,hexlify(ut.slice(1)),null,st,lt,ot,at,null)}return logger$n.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(it,tt){tt||(tt="");const rt=toUtf8Bytes("mnemonic"+tt,UnicodeNormalizationForm.NFKD);return pbkdf2$2(toUtf8Bytes(it,UnicodeNormalizationForm.NFKD),rt,2048,64,"sha512")}function mnemonicToEntropy(it,tt){tt=getWordlist(tt),logger$n.checkNormalize();const rt=tt.split(it);if(rt.length%3!==0)throw new Error("invalid mnemonic");const at=arrayify(new Uint8Array(Math.ceil(11*rt.length/8)));let st=0;for(let mt=0;mt<rt.length;mt++){let bt=tt.getWordIndex(rt[mt].normalize("NFKD"));if(bt===-1)throw new Error("invalid mnemonic");for(let vt=0;vt<11;vt++)bt&1<<10-vt&&(at[st>>3]|=1<<7-st%8),st++}const ot=32*rt.length/3,lt=rt.length/3,ut=getUpperMask(lt);if((arrayify(sha256$4(at.slice(0,ot/8)))[0]&ut)!==(at[at.length-1]&ut))throw new Error("invalid checksum");return hexlify(at.slice(0,ot/8))}function entropyToMnemonic(it,tt){if(tt=getWordlist(tt),it=arrayify(it),it.length%4!==0||it.length<16||it.length>32)throw new Error("invalid entropy");const rt=[0];let at=11;for(let lt=0;lt<it.length;lt++)at>8?(rt[rt.length-1]<<=8,rt[rt.length-1]|=it[lt],at-=8):(rt[rt.length-1]<<=at,rt[rt.length-1]|=it[lt]>>8-at,rt.push(it[lt]&getLowerMask(8-at)),at+=3);const st=it.length/4,ot=arrayify(sha256$4(it))[0]&getUpperMask(st);return rt[rt.length-1]<<=st,rt[rt.length-1]|=ot>>8-st,tt.join(rt.map(lt=>tt.getWord(lt)))}function isValidMnemonic(it,tt){try{return mnemonicToEntropy(it,tt),!0}catch{}return!1}function getAccountPath(it){return(typeof it!="number"||it<0||it>=HardenedBit||it%1)&&logger$n.throwArgumentError("invalid account index","index",it),`m/44'/60'/${it}'/0/0`}const lib_esm$6=Object.freeze(Object.defineProperty({__proto__:null,defaultPath,HDNode,mnemonicToSeed,mnemonicToEntropy,entropyToMnemonic,isValidMnemonic,getAccountPath},Symbol.toStringTag,{value:"Module"})),version$c="random/5.7.0",logger$m=new Logger(version$c);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")}const anyGlobal=getGlobal();let crypto$5=anyGlobal.crypto||anyGlobal.msCrypto;(!crypto$5||!crypto$5.getRandomValues)&&(logger$m.warn("WARNING: Missing strong random number source"),crypto$5={getRandomValues:function(it){return logger$m.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes$1(it){(it<=0||it>1024||it%1||it!=it)&&logger$m.throwArgumentError("invalid length","length",it);const tt=new Uint8Array(it);return crypto$5.getRandomValues(tt),arrayify(tt)}function shuffled(it){it=it.slice();for(let tt=it.length-1;tt>0;tt--){const rt=Math.floor(Math.random()*(tt+1)),at=it[tt];it[tt]=it[rt],it[rt]=at}return it}const lib_esm$5=Object.freeze(Object.defineProperty({__proto__:null,randomBytes:randomBytes$1,shuffled},Symbol.toStringTag,{value:"Module"}));var aesJs={exports:{}};(function(it,tt){(function(rt){function at(Gt){return parseInt(Gt)===Gt}function st(Gt){if(!at(Gt.length))return!1;for(var Pt=0;Pt<Gt.length;Pt++)if(!at(Gt[Pt])||Gt[Pt]<0||Gt[Pt]>255)return!1;return!0}function ot(Gt,Pt){if(Gt.buffer&&ArrayBuffer.isView(Gt)&&Gt.name==="Uint8Array")return Pt&&(Gt.slice?Gt=Gt.slice():Gt=Array.prototype.slice.call(Gt)),Gt;if(Array.isArray(Gt)){if(!st(Gt))throw new Error("Array contains invalid value: "+Gt);return new Uint8Array(Gt)}if(at(Gt.length)&&st(Gt))return new Uint8Array(Gt);throw new Error("unsupported array-like object")}function lt(Gt){return new Uint8Array(Gt)}function ut(Gt,Pt,Zt,an,Jt){(an!=null||Jt!=null)&&(Gt.slice?Gt=Gt.slice(an,Jt):Gt=Array.prototype.slice.call(Gt,an,Jt)),Pt.set(Gt,Zt)}var ht=function(){function Gt(Zt){var an=[],Jt=0;for(Zt=encodeURI(Zt);Jt<Zt.length;){var rn=Zt.charCodeAt(Jt++);rn===37?(an.push(parseInt(Zt.substr(Jt,2),16)),Jt+=2):an.push(rn)}return ot(an)}function Pt(Zt){for(var an=[],Jt=0;Jt<Zt.length;){var rn=Zt[Jt];rn<128?(an.push(String.fromCharCode(rn)),Jt++):rn>191&&rn<224?(an.push(String.fromCharCode((rn&31)<<6|Zt[Jt+1]&63)),Jt+=2):(an.push(String.fromCharCode((rn&15)<<12|(Zt[Jt+1]&63)<<6|Zt[Jt+2]&63)),Jt+=3)}return an.join("")}return{toBytes:Gt,fromBytes:Pt}}(),mt=function(){function Gt(an){for(var Jt=[],rn=0;rn<an.length;rn+=2)Jt.push(parseInt(an.substr(rn,2),16));return Jt}var Pt="0123456789abcdef";function Zt(an){for(var Jt=[],rn=0;rn<an.length;rn++){var fn=an[rn];Jt.push(Pt[(fn&240)>>4]+Pt[fn&15])}return Jt.join("")}return{toBytes:Gt,fromBytes:Zt}}(),bt={16:10,24:12,32:14},vt=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],At=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],xt=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Et=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Tt=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],wt=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Ct=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],It=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],St=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Rt=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Dt=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Wt=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],qt=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Vt=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Yt=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function jt(Gt){for(var Pt=[],Zt=0;Zt<Gt.length;Zt+=4)Pt.push(Gt[Zt]<<24|Gt[Zt+1]<<16|Gt[Zt+2]<<8|Gt[Zt+3]);return Pt}var kt=function(Gt){if(!(this instanceof kt))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:ot(Gt,!0)}),this._prepare()};kt.prototype._prepare=function(){var Gt=bt[this.key.length];if(Gt==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var Pt=0;Pt<=Gt;Pt++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var Zt=(Gt+1)*4,an=this.key.length/4,Jt=jt(this.key),rn,Pt=0;Pt<an;Pt++)rn=Pt>>2,this._Ke[rn][Pt%4]=Jt[Pt],this._Kd[Gt-rn][Pt%4]=Jt[Pt];for(var fn=0,pn=an,vn;pn<Zt;){if(vn=Jt[an-1],Jt[0]^=At[vn>>16&255]<<24^At[vn>>8&255]<<16^At[vn&255]<<8^At[vn>>24&255]^vt[fn]<<24,fn+=1,an!=8)for(var Pt=1;Pt<an;Pt++)Jt[Pt]^=Jt[Pt-1];else{for(var Pt=1;Pt<an/2;Pt++)Jt[Pt]^=Jt[Pt-1];vn=Jt[an/2-1],Jt[an/2]^=At[vn&255]^At[vn>>8&255]<<8^At[vn>>16&255]<<16^At[vn>>24&255]<<24;for(var Pt=an/2+1;Pt<an;Pt++)Jt[Pt]^=Jt[Pt-1]}for(var Pt=0,En,dn;Pt<an&&pn<Zt;)En=pn>>2,dn=pn%4,this._Ke[En][dn]=Jt[Pt],this._Kd[Gt-En][dn]=Jt[Pt++],pn++}for(var En=1;En<Gt;En++)for(var dn=0;dn<4;dn++)vn=this._Kd[En][dn],this._Kd[En][dn]=Wt[vn>>24&255]^qt[vn>>16&255]^Vt[vn>>8&255]^Yt[vn&255]},kt.prototype.encrypt=function(Gt){if(Gt.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var Pt=this._Ke.length-1,Zt=[0,0,0,0],an=jt(Gt),Jt=0;Jt<4;Jt++)an[Jt]^=this._Ke[0][Jt];for(var rn=1;rn<Pt;rn++){for(var Jt=0;Jt<4;Jt++)Zt[Jt]=Et[an[Jt]>>24&255]^Tt[an[(Jt+1)%4]>>16&255]^wt[an[(Jt+2)%4]>>8&255]^Ct[an[(Jt+3)%4]&255]^this._Ke[rn][Jt];an=Zt.slice()}for(var fn=lt(16),pn,Jt=0;Jt<4;Jt++)pn=this._Ke[Pt][Jt],fn[4*Jt]=(At[an[Jt]>>24&255]^pn>>24)&255,fn[4*Jt+1]=(At[an[(Jt+1)%4]>>16&255]^pn>>16)&255,fn[4*Jt+2]=(At[an[(Jt+2)%4]>>8&255]^pn>>8)&255,fn[4*Jt+3]=(At[an[(Jt+3)%4]&255]^pn)&255;return fn},kt.prototype.decrypt=function(Gt){if(Gt.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var Pt=this._Kd.length-1,Zt=[0,0,0,0],an=jt(Gt),Jt=0;Jt<4;Jt++)an[Jt]^=this._Kd[0][Jt];for(var rn=1;rn<Pt;rn++){for(var Jt=0;Jt<4;Jt++)Zt[Jt]=It[an[Jt]>>24&255]^St[an[(Jt+3)%4]>>16&255]^Rt[an[(Jt+2)%4]>>8&255]^Dt[an[(Jt+1)%4]&255]^this._Kd[rn][Jt];an=Zt.slice()}for(var fn=lt(16),pn,Jt=0;Jt<4;Jt++)pn=this._Kd[Pt][Jt],fn[4*Jt]=(xt[an[Jt]>>24&255]^pn>>24)&255,fn[4*Jt+1]=(xt[an[(Jt+3)%4]>>16&255]^pn>>16)&255,fn[4*Jt+2]=(xt[an[(Jt+2)%4]>>8&255]^pn>>8)&255,fn[4*Jt+3]=(xt[an[(Jt+1)%4]&255]^pn)&255;return fn};var zt=function(Gt){if(!(this instanceof zt))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new kt(Gt)};zt.prototype.encrypt=function(Gt){if(Gt=ot(Gt),Gt.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var Pt=lt(Gt.length),Zt=lt(16),an=0;an<Gt.length;an+=16)ut(Gt,Zt,0,an,an+16),Zt=this._aes.encrypt(Zt),ut(Zt,Pt,an);return Pt},zt.prototype.decrypt=function(Gt){if(Gt=ot(Gt),Gt.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var Pt=lt(Gt.length),Zt=lt(16),an=0;an<Gt.length;an+=16)ut(Gt,Zt,0,an,an+16),Zt=this._aes.decrypt(Zt),ut(Zt,Pt,an);return Pt};var Nt=function(Gt,Pt){if(!(this instanceof Nt))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!Pt)Pt=lt(16);else if(Pt.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=ot(Pt,!0),this._aes=new kt(Gt)};Nt.prototype.encrypt=function(Gt){if(Gt=ot(Gt),Gt.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var Pt=lt(Gt.length),Zt=lt(16),an=0;an<Gt.length;an+=16){ut(Gt,Zt,0,an,an+16);for(var Jt=0;Jt<16;Jt++)Zt[Jt]^=this._lastCipherblock[Jt];this._lastCipherblock=this._aes.encrypt(Zt),ut(this._lastCipherblock,Pt,an)}return Pt},Nt.prototype.decrypt=function(Gt){if(Gt=ot(Gt),Gt.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var Pt=lt(Gt.length),Zt=lt(16),an=0;an<Gt.length;an+=16){ut(Gt,Zt,0,an,an+16),Zt=this._aes.decrypt(Zt);for(var Jt=0;Jt<16;Jt++)Pt[an+Jt]=Zt[Jt]^this._lastCipherblock[Jt];ut(Gt,this._lastCipherblock,0,an,an+16)}return Pt};var Mt=function(Gt,Pt,Zt){if(!(this instanceof Mt))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!Pt)Pt=lt(16);else if(Pt.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");Zt||(Zt=1),this.segmentSize=Zt,this._shiftRegister=ot(Pt,!0),this._aes=new kt(Gt)};Mt.prototype.encrypt=function(Gt){if(Gt.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var Pt=ot(Gt,!0),Zt,an=0;an<Pt.length;an+=this.segmentSize){Zt=this._aes.encrypt(this._shiftRegister);for(var Jt=0;Jt<this.segmentSize;Jt++)Pt[an+Jt]^=Zt[Jt];ut(this._shiftRegister,this._shiftRegister,0,this.segmentSize),ut(Pt,this._shiftRegister,16-this.segmentSize,an,an+this.segmentSize)}return Pt},Mt.prototype.decrypt=function(Gt){if(Gt.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var Pt=ot(Gt,!0),Zt,an=0;an<Pt.length;an+=this.segmentSize){Zt=this._aes.encrypt(this._shiftRegister);for(var Jt=0;Jt<this.segmentSize;Jt++)Pt[an+Jt]^=Zt[Jt];ut(this._shiftRegister,this._shiftRegister,0,this.segmentSize),ut(Gt,this._shiftRegister,16-this.segmentSize,an,an+this.segmentSize)}return Pt};var Lt=function(Gt,Pt){if(!(this instanceof Lt))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!Pt)Pt=lt(16);else if(Pt.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=ot(Pt,!0),this._lastPrecipherIndex=16,this._aes=new kt(Gt)};Lt.prototype.encrypt=function(Gt){for(var Pt=ot(Gt,!0),Zt=0;Zt<Pt.length;Zt++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),Pt[Zt]^=this._lastPrecipher[this._lastPrecipherIndex++];return Pt},Lt.prototype.decrypt=Lt.prototype.encrypt;var Ht=function(Gt){if(!(this instanceof Ht))throw Error("Counter must be instanitated with `new`");Gt!==0&&!Gt&&(Gt=1),typeof Gt=="number"?(this._counter=lt(16),this.setValue(Gt)):this.setBytes(Gt)};Ht.prototype.setValue=function(Gt){if(typeof Gt!="number"||parseInt(Gt)!=Gt)throw new Error("invalid counter value (must be an integer)");for(var Pt=15;Pt>=0;--Pt)this._counter[Pt]=Gt%256,Gt=Gt>>8},Ht.prototype.setBytes=function(Gt){if(Gt=ot(Gt,!0),Gt.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=Gt},Ht.prototype.increment=function(){for(var Gt=15;Gt>=0;Gt--)if(this._counter[Gt]===255)this._counter[Gt]=0;else{this._counter[Gt]++;break}};var Qt=function(Gt,Pt){if(!(this instanceof Qt))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",Pt instanceof Ht||(Pt=new Ht(Pt)),this._counter=Pt,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new kt(Gt)};Qt.prototype.encrypt=function(Gt){for(var Pt=ot(Gt,!0),Zt=0;Zt<Pt.length;Zt++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),Pt[Zt]^=this._remainingCounter[this._remainingCounterIndex++];return Pt},Qt.prototype.decrypt=Qt.prototype.encrypt;function Ut(Gt){Gt=ot(Gt,!0);var Pt=16-Gt.length%16,Zt=lt(Gt.length+Pt);ut(Gt,Zt);for(var an=Gt.length;an<Zt.length;an++)Zt[an]=Pt;return Zt}function Bt(Gt){if(Gt=ot(Gt,!0),Gt.length<16)throw new Error("PKCS#7 invalid length");var Pt=Gt[Gt.length-1];if(Pt>16)throw new Error("PKCS#7 padding byte out of range");for(var Zt=Gt.length-Pt,an=0;an<Pt;an++)if(Gt[Zt+an]!==Pt)throw new Error("PKCS#7 invalid padding byte");var Jt=lt(Zt);return ut(Gt,Jt,0,0,Zt),Jt}var Kt={AES:kt,Counter:Ht,ModeOfOperation:{ecb:zt,cbc:Nt,cfb:Mt,ofb:Lt,ctr:Qt},utils:{hex:mt,utf8:ht},padding:{pkcs7:{pad:Ut,strip:Bt}},_arrayTest:{coerceArray:ot,createArray:lt,copyArray:ut}};it.exports=Kt})()})(aesJs);const aes$1=aesJs.exports,version$b="json-wallets/5.7.0";function looseArrayify(it){return typeof it=="string"&&it.substring(0,2)!=="0x"&&(it="0x"+it),arrayify(it)}function zpad(it,tt){for(it=String(it);it.length<tt;)it="0"+it;return it}function getPassword(it){return typeof it=="string"?toUtf8Bytes(it,UnicodeNormalizationForm.NFKC):arrayify(it)}function searchPath(it,tt){let rt=it;const at=tt.toLowerCase().split("/");for(let st=0;st<at.length;st++){let ot=null;for(const lt in rt)if(lt.toLowerCase()===at[st]){ot=rt[lt];break}if(ot===null)return null;rt=ot}return rt}function uuidV4(it){const tt=arrayify(it);tt[6]=tt[6]&15|64,tt[8]=tt[8]&63|128;const rt=hexlify(tt);return[rt.substring(2,10),rt.substring(10,14),rt.substring(14,18),rt.substring(18,22),rt.substring(22,34)].join("-")}const logger$l=new Logger(version$b);class CrowdsaleAccount extends Description{isCrowdsaleAccount(tt){return!!(tt&&tt._isCrowdsaleAccount)}}function decrypt$3(it,tt){const rt=JSON.parse(it);tt=getPassword(tt);const at=getAddress(searchPath(rt,"ethaddr")),st=looseArrayify(searchPath(rt,"encseed"));(!st||st.length%16!==0)&&logger$l.throwArgumentError("invalid encseed","json",it);const ot=arrayify(pbkdf2$2(tt,tt,2e3,32,"sha256")).slice(0,16),lt=st.slice(0,16),ut=st.slice(16),ht=new aes$1.ModeOfOperation.cbc(ot,lt),mt=aes$1.padding.pkcs7.strip(arrayify(ht.decrypt(ut)));let bt="";for(let xt=0;xt<mt.length;xt++)bt+=String.fromCharCode(mt[xt]);const vt=toUtf8Bytes(bt),At=keccak256$1(vt);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:at,privateKey:At})}function isCrowdsaleWallet(it){let tt=null;try{tt=JSON.parse(it)}catch{return!1}return tt.encseed&&tt.ethaddr}function isKeystoreWallet(it){let tt=null;try{tt=JSON.parse(it)}catch{return!1}return!(!tt.version||parseInt(tt.version)!==tt.version||parseInt(tt.version)!==3)}function getJsonWalletAddress(it){if(isCrowdsaleWallet(it))try{return getAddress(JSON.parse(it).ethaddr)}catch{return null}if(isKeystoreWallet(it))try{return getAddress(JSON.parse(it).address)}catch{return null}return null}var scrypt$1={exports:{}};(function(it,tt){(function(rt){function st(Tt){const wt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let Ct=1779033703,It=3144134277,St=1013904242,Rt=2773480762,Dt=1359893119,Wt=2600822924,qt=528734635,Vt=1541459225;const Yt=new Uint32Array(64);function jt(Qt){let Ut=0,Bt=Qt.length;for(;Bt>=64;){let Kt=Ct,Gt=It,Pt=St,Zt=Rt,an=Dt,Jt=Wt,rn=qt,fn=Vt,pn,vn,En,dn,cn;for(vn=0;vn<16;vn++)En=Ut+vn*4,Yt[vn]=(Qt[En]&255)<<24|(Qt[En+1]&255)<<16|(Qt[En+2]&255)<<8|Qt[En+3]&255;for(vn=16;vn<64;vn++)pn=Yt[vn-2],dn=(pn>>>17|pn<<32-17)^(pn>>>19|pn<<32-19)^pn>>>10,pn=Yt[vn-15],cn=(pn>>>7|pn<<32-7)^(pn>>>18|pn<<32-18)^pn>>>3,Yt[vn]=(dn+Yt[vn-7]|0)+(cn+Yt[vn-16]|0)|0;for(vn=0;vn<64;vn++)dn=(((an>>>6|an<<32-6)^(an>>>11|an<<32-11)^(an>>>25|an<<32-25))+(an&Jt^~an&rn)|0)+(fn+(wt[vn]+Yt[vn]|0)|0)|0,cn=((Kt>>>2|Kt<<32-2)^(Kt>>>13|Kt<<32-13)^(Kt>>>22|Kt<<32-22))+(Kt&Gt^Kt&Pt^Gt&Pt)|0,fn=rn,rn=Jt,Jt=an,an=Zt+dn|0,Zt=Pt,Pt=Gt,Gt=Kt,Kt=dn+cn|0;Ct=Ct+Kt|0,It=It+Gt|0,St=St+Pt|0,Rt=Rt+Zt|0,Dt=Dt+an|0,Wt=Wt+Jt|0,qt=qt+rn|0,Vt=Vt+fn|0,Ut+=64,Bt-=64}}jt(Tt);let kt,zt=Tt.length%64,Nt=Tt.length/536870912|0,Mt=Tt.length<<3,Lt=zt<56?56:120,Ht=Tt.slice(Tt.length-zt,Tt.length);for(Ht.push(128),kt=zt+1;kt<Lt;kt++)Ht.push(0);return Ht.push(Nt>>>24&255),Ht.push(Nt>>>16&255),Ht.push(Nt>>>8&255),Ht.push(Nt>>>0&255),Ht.push(Mt>>>24&255),Ht.push(Mt>>>16&255),Ht.push(Mt>>>8&255),Ht.push(Mt>>>0&255),jt(Ht),[Ct>>>24&255,Ct>>>16&255,Ct>>>8&255,Ct>>>0&255,It>>>24&255,It>>>16&255,It>>>8&255,It>>>0&255,St>>>24&255,St>>>16&255,St>>>8&255,St>>>0&255,Rt>>>24&255,Rt>>>16&255,Rt>>>8&255,Rt>>>0&255,Dt>>>24&255,Dt>>>16&255,Dt>>>8&255,Dt>>>0&255,Wt>>>24&255,Wt>>>16&255,Wt>>>8&255,Wt>>>0&255,qt>>>24&255,qt>>>16&255,qt>>>8&255,qt>>>0&255,Vt>>>24&255,Vt>>>16&255,Vt>>>8&255,Vt>>>0&255]}function ot(Tt,wt,Ct){Tt=Tt.length<=64?Tt:st(Tt);const It=64+wt.length+4,St=new Array(It),Rt=new Array(64);let Dt,Wt=[];for(Dt=0;Dt<64;Dt++)St[Dt]=54;for(Dt=0;Dt<Tt.length;Dt++)St[Dt]^=Tt[Dt];for(Dt=0;Dt<wt.length;Dt++)St[64+Dt]=wt[Dt];for(Dt=It-4;Dt<It;Dt++)St[Dt]=0;for(Dt=0;Dt<64;Dt++)Rt[Dt]=92;for(Dt=0;Dt<Tt.length;Dt++)Rt[Dt]^=Tt[Dt];function qt(){for(let Vt=It-1;Vt>=It-4;Vt--){if(St[Vt]++,St[Vt]<=255)return;St[Vt]=0}}for(;Ct>=32;)qt(),Wt=Wt.concat(st(Rt.concat(st(St)))),Ct-=32;return Ct>0&&(qt(),Wt=Wt.concat(st(Rt.concat(st(St))).slice(0,Ct))),Wt}function lt(Tt,wt,Ct,It,St){let Rt;for(bt(Tt,(2*Ct-1)*16,St,0,16),Rt=0;Rt<2*Ct;Rt++)mt(Tt,Rt*16,St,16),ht(St,It),bt(St,0,Tt,wt+Rt*16,16);for(Rt=0;Rt<Ct;Rt++)bt(Tt,wt+Rt*2*16,Tt,Rt*16,16);for(Rt=0;Rt<Ct;Rt++)bt(Tt,wt+(Rt*2+1)*16,Tt,(Rt+Ct)*16,16)}function ut(Tt,wt){return Tt<<wt|Tt>>>32-wt}function ht(Tt,wt){bt(Tt,0,wt,0,16);for(let Ct=8;Ct>0;Ct-=2)wt[4]^=ut(wt[0]+wt[12],7),wt[8]^=ut(wt[4]+wt[0],9),wt[12]^=ut(wt[8]+wt[4],13),wt[0]^=ut(wt[12]+wt[8],18),wt[9]^=ut(wt[5]+wt[1],7),wt[13]^=ut(wt[9]+wt[5],9),wt[1]^=ut(wt[13]+wt[9],13),wt[5]^=ut(wt[1]+wt[13],18),wt[14]^=ut(wt[10]+wt[6],7),wt[2]^=ut(wt[14]+wt[10],9),wt[6]^=ut(wt[2]+wt[14],13),wt[10]^=ut(wt[6]+wt[2],18),wt[3]^=ut(wt[15]+wt[11],7),wt[7]^=ut(wt[3]+wt[15],9),wt[11]^=ut(wt[7]+wt[3],13),wt[15]^=ut(wt[11]+wt[7],18),wt[1]^=ut(wt[0]+wt[3],7),wt[2]^=ut(wt[1]+wt[0],9),wt[3]^=ut(wt[2]+wt[1],13),wt[0]^=ut(wt[3]+wt[2],18),wt[6]^=ut(wt[5]+wt[4],7),wt[7]^=ut(wt[6]+wt[5],9),wt[4]^=ut(wt[7]+wt[6],13),wt[5]^=ut(wt[4]+wt[7],18),wt[11]^=ut(wt[10]+wt[9],7),wt[8]^=ut(wt[11]+wt[10],9),wt[9]^=ut(wt[8]+wt[11],13),wt[10]^=ut(wt[9]+wt[8],18),wt[12]^=ut(wt[15]+wt[14],7),wt[13]^=ut(wt[12]+wt[15],9),wt[14]^=ut(wt[13]+wt[12],13),wt[15]^=ut(wt[14]+wt[13],18);for(let Ct=0;Ct<16;++Ct)Tt[Ct]+=wt[Ct]}function mt(Tt,wt,Ct,It){for(let St=0;St<It;St++)Ct[St]^=Tt[wt+St]}function bt(Tt,wt,Ct,It,St){for(;St--;)Ct[It++]=Tt[wt++]}function vt(Tt){if(!Tt||typeof Tt.length!="number")return!1;for(let wt=0;wt<Tt.length;wt++){const Ct=Tt[wt];if(typeof Ct!="number"||Ct%1||Ct<0||Ct>=256)return!1}return!0}function At(Tt,wt){if(typeof Tt!="number"||Tt%1)throw new Error("invalid "+wt);return Tt}function xt(Tt,wt,Ct,It,St,Rt,Dt){if(Ct=At(Ct,"N"),It=At(It,"r"),St=At(St,"p"),Rt=At(Rt,"dkLen"),Ct===0||(Ct&Ct-1)!==0)throw new Error("N must be power of 2");if(Ct>2147483647/128/It)throw new Error("N too large");if(It>2147483647/128/St)throw new Error("r too large");if(!vt(Tt))throw new Error("password must be an array or buffer");if(Tt=Array.prototype.slice.call(Tt),!vt(wt))throw new Error("salt must be an array or buffer");wt=Array.prototype.slice.call(wt);let Wt=ot(Tt,wt,St*128*It);const qt=new Uint32Array(St*32*It);for(let an=0;an<qt.length;an++){const Jt=an*4;qt[an]=(Wt[Jt+3]&255)<<24|(Wt[Jt+2]&255)<<16|(Wt[Jt+1]&255)<<8|(Wt[Jt+0]&255)<<0}const Vt=new Uint32Array(64*It),Yt=new Uint32Array(32*It*Ct),jt=32*It,kt=new Uint32Array(16),zt=new Uint32Array(16),Nt=St*Ct*2;let Mt=0,Lt=null,Ht=!1,Qt=0,Ut=0,Bt,Kt;const Gt=Dt?parseInt(1e3/It):4294967295,Pt=typeof setImmediate<"u"?setImmediate:setTimeout,Zt=function(){if(Ht)return Dt(new Error("cancelled"),Mt/Nt);let an;switch(Qt){case 0:Kt=Ut*32*It,bt(qt,Kt,Vt,0,jt),Qt=1,Bt=0;case 1:an=Ct-Bt,an>Gt&&(an=Gt);for(let rn=0;rn<an;rn++)bt(Vt,0,Yt,(Bt+rn)*jt,jt),lt(Vt,jt,It,kt,zt);if(Bt+=an,Mt+=an,Dt){const rn=parseInt(1e3*Mt/Nt);if(rn!==Lt){if(Ht=Dt(null,Mt/Nt),Ht)break;Lt=rn}}if(Bt<Ct)break;Bt=0,Qt=2;case 2:an=Ct-Bt,an>Gt&&(an=Gt);for(let rn=0;rn<an;rn++){const fn=(2*It-1)*16,pn=Vt[fn]&Ct-1;mt(Yt,pn*jt,Vt,jt),lt(Vt,jt,It,kt,zt)}if(Bt+=an,Mt+=an,Dt){const rn=parseInt(1e3*Mt/Nt);if(rn!==Lt){if(Ht=Dt(null,Mt/Nt),Ht)break;Lt=rn}}if(Bt<Ct)break;if(bt(Vt,0,qt,Kt,jt),Ut++,Ut<St){Qt=0;break}Wt=[];for(let rn=0;rn<qt.length;rn++)Wt.push(qt[rn]>>0&255),Wt.push(qt[rn]>>8&255),Wt.push(qt[rn]>>16&255),Wt.push(qt[rn]>>24&255);const Jt=ot(Tt,Wt,Rt);return Dt&&Dt(null,1,Jt),Jt}Dt&&Pt(Zt)};if(!Dt)for(;;){const an=Zt();if(an!=null)return an}Zt()}const Et={scrypt:function(Tt,wt,Ct,It,St,Rt,Dt){return new Promise(function(Wt,qt){let Vt=0;Dt&&Dt(0),xt(Tt,wt,Ct,It,St,Rt,function(Yt,jt,kt){if(Yt)qt(Yt);else if(kt)Dt&&Vt!==1&&Dt(1),Wt(new Uint8Array(kt));else if(Dt&&jt!==Vt)return Vt=jt,Dt(jt)})})},syncScrypt:function(Tt,wt,Ct,It,St,Rt){return new Uint8Array(xt(Tt,wt,Ct,It,St,Rt))}};it.exports=Et})()})(scrypt$1);const scrypt=scrypt$1.exports;var __awaiter$a=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$k=new Logger(version$b);function hasMnemonic$1(it){return it!=null&&it.mnemonic&&it.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(tt){return!!(tt&&tt._isKeystoreAccount)}}function _decrypt(it,tt,rt){if(searchPath(it,"crypto/cipher")==="aes-128-ctr"){const st=looseArrayify(searchPath(it,"crypto/cipherparams/iv")),ot=new aes$1.Counter(st),lt=new aes$1.ModeOfOperation.ctr(tt,ot);return arrayify(lt.decrypt(rt))}return null}function _getAccount(it,tt){const rt=looseArrayify(searchPath(it,"crypto/ciphertext"));if(hexlify(keccak256$1(concat$6([tt.slice(16,32),rt]))).substring(2)!==searchPath(it,"crypto/mac").toLowerCase())throw new Error("invalid password");const st=_decrypt(it,tt.slice(0,16),rt);st||logger$k.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const ot=tt.slice(32,64),lt=computeAddress(st);if(it.address){let ht=it.address.toLowerCase();if(ht.substring(0,2)!=="0x"&&(ht="0x"+ht),getAddress(ht)!==lt)throw new Error("address mismatch")}const ut={_isKeystoreAccount:!0,address:lt,privateKey:hexlify(st)};if(searchPath(it,"x-ethers/version")==="0.1"){const ht=looseArrayify(searchPath(it,"x-ethers/mnemonicCiphertext")),mt=looseArrayify(searchPath(it,"x-ethers/mnemonicCounter")),bt=new aes$1.Counter(mt),vt=new aes$1.ModeOfOperation.ctr(ot,bt),At=searchPath(it,"x-ethers/path")||defaultPath,xt=searchPath(it,"x-ethers/locale")||"en",Et=arrayify(vt.decrypt(ht));try{const Tt=entropyToMnemonic(Et,xt),wt=HDNode.fromMnemonic(Tt,null,xt).derivePath(At);if(wt.privateKey!=ut.privateKey)throw new Error("mnemonic mismatch");ut.mnemonic=wt.mnemonic}catch(Tt){if(Tt.code!==Logger.errors.INVALID_ARGUMENT||Tt.argument!=="wordlist")throw Tt}}return new KeystoreAccount(ut)}function pbkdf2Sync(it,tt,rt,at,st){return arrayify(pbkdf2$2(it,tt,rt,at,st))}function pbkdf2$1(it,tt,rt,at,st){return Promise.resolve(pbkdf2Sync(it,tt,rt,at,st))}function _computeKdfKey(it,tt,rt,at,st){const ot=getPassword(tt),lt=searchPath(it,"crypto/kdf");if(lt&&typeof lt=="string"){const ut=function(ht,mt){return logger$k.throwArgumentError("invalid key-derivation function parameters",ht,mt)};if(lt.toLowerCase()==="scrypt"){const ht=looseArrayify(searchPath(it,"crypto/kdfparams/salt")),mt=parseInt(searchPath(it,"crypto/kdfparams/n")),bt=parseInt(searchPath(it,"crypto/kdfparams/r")),vt=parseInt(searchPath(it,"crypto/kdfparams/p"));(!mt||!bt||!vt)&&ut("kdf",lt),(mt&mt-1)!==0&&ut("N",mt);const At=parseInt(searchPath(it,"crypto/kdfparams/dklen"));return At!==32&&ut("dklen",At),at(ot,ht,mt,bt,vt,64,st)}else if(lt.toLowerCase()==="pbkdf2"){const ht=looseArrayify(searchPath(it,"crypto/kdfparams/salt"));let mt=null;const bt=searchPath(it,"crypto/kdfparams/prf");bt==="hmac-sha256"?mt="sha256":bt==="hmac-sha512"?mt="sha512":ut("prf",bt);const vt=parseInt(searchPath(it,"crypto/kdfparams/c")),At=parseInt(searchPath(it,"crypto/kdfparams/dklen"));return At!==32&&ut("dklen",At),rt(ot,ht,vt,At,mt)}}return logger$k.throwArgumentError("unsupported key-derivation function","kdf",lt)}function decryptSync(it,tt){const rt=JSON.parse(it),at=_computeKdfKey(rt,tt,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(rt,at)}function decrypt$2(it,tt,rt){return __awaiter$a(this,void 0,void 0,function*(){const at=JSON.parse(it),st=yield _computeKdfKey(at,tt,pbkdf2$1,scrypt.scrypt,rt);return _getAccount(at,st)})}function encrypt$2(it,tt,rt,at){try{if(getAddress(it.address)!==computeAddress(it.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(it)){const wt=it.mnemonic;if(HDNode.fromMnemonic(wt.phrase,null,wt.locale).derivePath(wt.path||defaultPath).privateKey!=it.privateKey)throw new Error("mnemonic mismatch")}}catch(wt){return Promise.reject(wt)}typeof rt=="function"&&!at&&(at=rt,rt={}),rt||(rt={});const st=arrayify(it.privateKey),ot=getPassword(tt);let lt=null,ut=null,ht=null;if(hasMnemonic$1(it)){const wt=it.mnemonic;lt=arrayify(mnemonicToEntropy(wt.phrase,wt.locale||"en")),ut=wt.path||defaultPath,ht=wt.locale||"en"}let mt=rt.client;mt||(mt="ethers.js");let bt=null;rt.salt?bt=arrayify(rt.salt):bt=randomBytes$1(32);let vt=null;if(rt.iv){if(vt=arrayify(rt.iv),vt.length!==16)throw new Error("invalid iv")}else vt=randomBytes$1(16);let At=null;if(rt.uuid){if(At=arrayify(rt.uuid),At.length!==16)throw new Error("invalid uuid")}else At=randomBytes$1(16);let xt=1<<17,Et=8,Tt=1;return rt.scrypt&&(rt.scrypt.N&&(xt=rt.scrypt.N),rt.scrypt.r&&(Et=rt.scrypt.r),rt.scrypt.p&&(Tt=rt.scrypt.p)),scrypt.scrypt(ot,bt,xt,Et,Tt,64,at).then(wt=>{wt=arrayify(wt);const Ct=wt.slice(0,16),It=wt.slice(16,32),St=wt.slice(32,64),Rt=new aes$1.Counter(vt),Dt=new aes$1.ModeOfOperation.ctr(Ct,Rt),Wt=arrayify(Dt.encrypt(st)),qt=keccak256$1(concat$6([It,Wt])),Vt={address:it.address.substring(2).toLowerCase(),id:uuidV4(At),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(vt).substring(2)},ciphertext:hexlify(Wt).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(bt).substring(2),n:xt,dklen:32,p:Tt,r:Et},mac:qt.substring(2)}};if(lt){const Yt=randomBytes$1(16),jt=new aes$1.Counter(Yt),kt=new aes$1.ModeOfOperation.ctr(St,jt),zt=arrayify(kt.encrypt(lt)),Nt=new Date,Mt=Nt.getUTCFullYear()+"-"+zpad(Nt.getUTCMonth()+1,2)+"-"+zpad(Nt.getUTCDate(),2)+"T"+zpad(Nt.getUTCHours(),2)+"-"+zpad(Nt.getUTCMinutes(),2)+"-"+zpad(Nt.getUTCSeconds(),2)+".0Z";Vt["x-ethers"]={client:mt,gethFilename:"UTC--"+Mt+"--"+Vt.address,mnemonicCounter:hexlify(Yt).substring(2),mnemonicCiphertext:hexlify(zt).substring(2),path:ut,locale:ht,version:"0.1"}}return JSON.stringify(Vt)})}function decryptJsonWallet(it,tt,rt){if(isCrowdsaleWallet(it)){rt&&rt(0);const at=decrypt$3(it,tt);return rt&&rt(1),Promise.resolve(at)}return isKeystoreWallet(it)?decrypt$2(it,tt,rt):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(it,tt){if(isCrowdsaleWallet(it))return decrypt$3(it,tt);if(isKeystoreWallet(it))return decryptSync(it,tt);throw new Error("invalid JSON wallet")}const lib_esm$4=Object.freeze(Object.defineProperty({__proto__:null,decryptCrowdsale:decrypt$3,decryptKeystore:decrypt$2,decryptKeystoreSync:decryptSync,encryptKeystore:encrypt$2,isCrowdsaleWallet,isKeystoreWallet,getJsonWalletAddress,decryptJsonWallet,decryptJsonWalletSync},Symbol.toStringTag,{value:"Module"})),version$a="wallet/5.7.0";var __awaiter$9=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$j=new Logger(version$a);function isAccount(it){return it!=null&&isHexString$4(it.privateKey,32)&&it.address!=null}function hasMnemonic(it){const tt=it.mnemonic;return tt&&tt.phrase}class Wallet extends Signer{constructor(tt,rt){if(super(),isAccount(tt)){const at=new SigningKey(tt.privateKey);if(defineReadOnly(this,"_signingKey",()=>at),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(tt.address)&&logger$j.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(tt)){const st=tt.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:st.phrase,path:st.path||defaultPath,locale:st.locale||"en"}));const ot=this.mnemonic,lt=HDNode.fromMnemonic(ot.phrase,null,ot.locale).derivePath(ot.path);computeAddress(lt.privateKey)!==this.address&&logger$j.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(tt))tt.curve!=="secp256k1"&&logger$j.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>tt);else{typeof tt=="string"&&tt.match(/^[0-9a-f]*$/i)&&tt.length===64&&(tt="0x"+tt);const at=new SigningKey(tt);defineReadOnly(this,"_signingKey",()=>at)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}rt&&!Provider$1.isProvider(rt)&&logger$j.throwArgumentError("invalid provider","provider",rt),defineReadOnly(this,"provider",rt||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(tt){return new Wallet(this,tt)}signTransaction(tt){return resolveProperties(tt).then(rt=>{rt.from!=null&&(getAddress(rt.from)!==this.address&&logger$j.throwArgumentError("transaction from address mismatch","transaction.from",tt.from),delete rt.from);const at=this._signingKey().signDigest(keccak256$1(serialize$3(rt)));return serialize$3(rt,at)})}signMessage(tt){return __awaiter$9(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(tt)))})}_signTypedData(tt,rt,at){return __awaiter$9(this,void 0,void 0,function*(){const st=yield TypedDataEncoder.resolveNames(tt,rt,at,ot=>(this.provider==null&&logger$j.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:ot}),this.provider.resolveName(ot)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(st.domain,rt,st.value)))})}encrypt(tt,rt,at){if(typeof rt=="function"&&!at&&(at=rt,rt={}),at&&typeof at!="function")throw new Error("invalid callback");return rt||(rt={}),encrypt$2(this,tt,rt,at)}static createRandom(tt){let rt=randomBytes$1(16);tt||(tt={}),tt.extraEntropy&&(rt=arrayify(hexDataSlice(keccak256$1(concat$6([rt,tt.extraEntropy])),0,16)));const at=entropyToMnemonic(rt,tt.locale);return Wallet.fromMnemonic(at,tt.path,tt.locale)}static fromEncryptedJson(tt,rt,at){return decryptJsonWallet(tt,rt,at).then(st=>new Wallet(st))}static fromEncryptedJsonSync(tt,rt){return new Wallet(decryptJsonWalletSync(tt,rt))}static fromMnemonic(tt,rt,at){return rt||(rt=defaultPath),new Wallet(HDNode.fromMnemonic(tt,null,at).derivePath(rt))}}function verifyMessage(it,tt){return recoverAddress(hashMessage(it),tt)}function verifyTypedData(it,tt,rt,at){return recoverAddress(TypedDataEncoder.hash(it,tt,rt),at)}const lib_esm$3=Object.freeze(Object.defineProperty({__proto__:null,Wallet,verifyMessage,verifyTypedData},Symbol.toStringTag,{value:"Module"})),version$9="networks/5.7.1",logger$i=new Logger(version$9);function isRenetworkable(it){return it&&typeof it.renetwork=="function"}function ethDefaultProvider(it){const tt=function(rt,at){at==null&&(at={});const st=[];if(rt.InfuraProvider&&at.infura!=="-")try{st.push(new rt.InfuraProvider(it,at.infura))}catch{}if(rt.EtherscanProvider&&at.etherscan!=="-")try{st.push(new rt.EtherscanProvider(it,at.etherscan))}catch{}if(rt.AlchemyProvider&&at.alchemy!=="-")try{st.push(new rt.AlchemyProvider(it,at.alchemy))}catch{}if(rt.PocketProvider&&at.pocket!=="-"){const ot=["goerli","ropsten","rinkeby","sepolia"];try{const lt=new rt.PocketProvider(it,at.pocket);lt.network&&ot.indexOf(lt.network.name)===-1&&st.push(lt)}catch{}}if(rt.CloudflareProvider&&at.cloudflare!=="-")try{st.push(new rt.CloudflareProvider(it))}catch{}if(rt.AnkrProvider&&at.ankr!=="-")try{const ot=["ropsten"],lt=new rt.AnkrProvider(it,at.ankr);lt.network&&ot.indexOf(lt.network.name)===-1&&st.push(lt)}catch{}if(st.length===0)return null;if(rt.FallbackProvider){let ot=1;return at.quorum!=null?ot=at.quorum:it==="homestead"&&(ot=2),new rt.FallbackProvider(st,ot)}return st[0]};return tt.renetwork=function(rt){return ethDefaultProvider(rt)},tt}function etcDefaultProvider(it,tt){const rt=function(at,st){return at.JsonRpcProvider?new at.JsonRpcProvider(it,tt):null};return rt.renetwork=function(at){return etcDefaultProvider(it,at)},rt}const homestead={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ethDefaultProvider("homestead")},ropsten={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ethDefaultProvider("ropsten")},classicMordor={chainId:63,name:"classicMordor",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/mordor","classicMordor")},networks={unspecified:{chainId:0,name:"unspecified"},homestead,mainnet:homestead,morden:{chainId:2,name:"morden"},ropsten,testnet:ropsten,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ethDefaultProvider("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ethDefaultProvider("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ethDefaultProvider("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ethDefaultProvider("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor,classicTestnet:classicMordor,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ethDefaultProvider("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ethDefaultProvider("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function getNetwork(it){if(it==null)return null;if(typeof it=="number"){for(const at in networks){const st=networks[at];if(st.chainId===it)return{name:st.name,chainId:st.chainId,ensAddress:st.ensAddress||null,_defaultProvider:st._defaultProvider||null}}return{chainId:it,name:"unknown"}}if(typeof it=="string"){const at=networks[it];return at==null?null:{name:at.name,chainId:at.chainId,ensAddress:at.ensAddress,_defaultProvider:at._defaultProvider||null}}const tt=networks[it.name];if(!tt)return typeof it.chainId!="number"&&logger$i.throwArgumentError("invalid network chainId","network",it),it;it.chainId!==0&&it.chainId!==tt.chainId&&logger$i.throwArgumentError("network chainId mismatch","network",it);let rt=it._defaultProvider||null;return rt==null&&tt._defaultProvider&&(isRenetworkable(tt._defaultProvider)?rt=tt._defaultProvider.renetwork(it):rt=tt._defaultProvider),{name:it.name,chainId:tt.chainId,ensAddress:it.ensAddress||tt.ensAddress||null,_defaultProvider:rt}}const version$8="web/5.7.1";var __awaiter$8=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};function getUrl(it,tt){return __awaiter$8(this,void 0,void 0,function*(){tt==null&&(tt={});const rt={method:tt.method||"GET",headers:tt.headers||{},body:tt.body||void 0};if(tt.skipFetchSetup!==!0&&(rt.mode="cors",rt.cache="no-cache",rt.credentials="same-origin",rt.redirect="follow",rt.referrer="client"),tt.fetchOptions!=null){const lt=tt.fetchOptions;lt.mode&&(rt.mode=lt.mode),lt.cache&&(rt.cache=lt.cache),lt.credentials&&(rt.credentials=lt.credentials),lt.redirect&&(rt.redirect=lt.redirect),lt.referrer&&(rt.referrer=lt.referrer)}const at=yield fetch(it,rt),st=yield at.arrayBuffer(),ot={};return at.headers.forEach?at.headers.forEach((lt,ut)=>{ot[ut.toLowerCase()]=lt}):at.headers.keys().forEach(lt=>{ot[lt.toLowerCase()]=at.headers.get(lt)}),{headers:ot,statusCode:at.status,statusMessage:at.statusText,body:arrayify(new Uint8Array(st))}})}var __awaiter$7=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$h=new Logger(version$8);function staller(it){return new Promise(tt=>{setTimeout(tt,it)})}function bodyify(it,tt){if(it==null)return null;if(typeof it=="string")return it;if(isBytesLike(it)){if(tt&&(tt.split("/")[0]==="text"||tt.split(";")[0].trim()==="application/json"))try{return toUtf8String(it)}catch{}return hexlify(it)}return it}function unpercent(it){return toUtf8Bytes(it.replace(/%([0-9a-f][0-9a-f])/gi,(tt,rt)=>String.fromCharCode(parseInt(rt,16))))}function _fetchData(it,tt,rt){const at=typeof it=="object"&&it.throttleLimit!=null?it.throttleLimit:12;logger$h.assertArgument(at>0&&at%1===0,"invalid connection throttle limit","connection.throttleLimit",at);const st=typeof it=="object"?it.throttleCallback:null,ot=typeof it=="object"&&typeof it.throttleSlotInterval=="number"?it.throttleSlotInterval:100;logger$h.assertArgument(ot>0&&ot%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",ot);const lt=typeof it=="object"?!!it.errorPassThrough:!1,ut={};let ht=null;const mt={method:"GET"};let bt=!1,vt=2*60*1e3;if(typeof it=="string")ht=it;else if(typeof it=="object"){if((it==null||it.url==null)&&logger$h.throwArgumentError("missing URL","connection.url",it),ht=it.url,typeof it.timeout=="number"&&it.timeout>0&&(vt=it.timeout),it.headers)for(const Ct in it.headers)ut[Ct.toLowerCase()]={key:Ct,value:String(it.headers[Ct])},["if-none-match","if-modified-since"].indexOf(Ct.toLowerCase())>=0&&(bt=!0);if(mt.allowGzip=!!it.allowGzip,it.user!=null&&it.password!=null){ht.substring(0,6)!=="https:"&&it.allowInsecureAuthentication!==!0&&logger$h.throwError("basic authentication requires a secure https url",Logger.errors.INVALID_ARGUMENT,{argument:"url",url:ht,user:it.user,password:"[REDACTED]"});const Ct=it.user+":"+it.password;ut.authorization={key:"Authorization",value:"Basic "+encode$b(toUtf8Bytes(Ct))}}it.skipFetchSetup!=null&&(mt.skipFetchSetup=!!it.skipFetchSetup),it.fetchOptions!=null&&(mt.fetchOptions=shallowCopy(it.fetchOptions))}const At=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),xt=ht?ht.match(At):null;if(xt)try{const Ct={statusCode:200,statusMessage:"OK",headers:{"content-type":xt[1]||"text/plain"},body:xt[2]?decode$f(xt[3]):unpercent(xt[3])};let It=Ct.body;return rt&&(It=rt(Ct.body,Ct)),Promise.resolve(It)}catch(Ct){logger$h.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(xt[1],xt[2]),error:Ct,requestBody:null,requestMethod:"GET",url:ht})}tt&&(mt.method="POST",mt.body=tt,ut["content-type"]==null&&(ut["content-type"]={key:"Content-Type",value:"application/octet-stream"}),ut["content-length"]==null&&(ut["content-length"]={key:"Content-Length",value:String(tt.length)}));const Et={};Object.keys(ut).forEach(Ct=>{const It=ut[Ct];Et[It.key]=It.value}),mt.headers=Et;const Tt=function(){let Ct=null;return{promise:new Promise(function(Rt,Dt){vt&&(Ct=setTimeout(()=>{Ct!=null&&(Ct=null,Dt(logger$h.makeError("timeout",Logger.errors.TIMEOUT,{requestBody:bodyify(mt.body,Et["content-type"]),requestMethod:mt.method,timeout:vt,url:ht})))},vt))}),cancel:function(){Ct!=null&&(clearTimeout(Ct),Ct=null)}}}(),wt=function(){return __awaiter$7(this,void 0,void 0,function*(){for(let Ct=0;Ct<at;Ct++){let It=null;try{if(It=yield getUrl(ht,mt),Ct<at){if(It.statusCode===301||It.statusCode===302){const Rt=It.headers.location||"";if(mt.method==="GET"&&Rt.match(/^https:/)){ht=It.headers.location;continue}}else if(It.statusCode===429){let Rt=!0;if(st&&(Rt=yield st(Ct,ht)),Rt){let Dt=0;const Wt=It.headers["retry-after"];typeof Wt=="string"&&Wt.match(/^[1-9][0-9]*$/)?Dt=parseInt(Wt)*1e3:Dt=ot*parseInt(String(Math.random()*Math.pow(2,Ct))),yield staller(Dt);continue}}}}catch(Rt){It=Rt.response,It==null&&(Tt.cancel(),logger$h.throwError("missing response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(mt.body,Et["content-type"]),requestMethod:mt.method,serverError:Rt,url:ht}))}let St=It.body;if(bt&&It.statusCode===304?St=null:!lt&&(It.statusCode<200||It.statusCode>=300)&&(Tt.cancel(),logger$h.throwError("bad response",Logger.errors.SERVER_ERROR,{status:It.statusCode,headers:It.headers,body:bodyify(St,It.headers?It.headers["content-type"]:null),requestBody:bodyify(mt.body,Et["content-type"]),requestMethod:mt.method,url:ht})),rt)try{const Rt=yield rt(St,It);return Tt.cancel(),Rt}catch(Rt){if(Rt.throttleRetry&&Ct<at){let Dt=!0;if(st&&(Dt=yield st(Ct,ht)),Dt){const Wt=ot*parseInt(String(Math.random()*Math.pow(2,Ct)));yield staller(Wt);continue}}Tt.cancel(),logger$h.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(St,It.headers?It.headers["content-type"]:null),error:Rt,requestBody:bodyify(mt.body,Et["content-type"]),requestMethod:mt.method,url:ht})}return Tt.cancel(),St}return logger$h.throwError("failed response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(mt.body,Et["content-type"]),requestMethod:mt.method,url:ht})})}();return Promise.race([Tt.promise,wt])}function fetchJson(it,tt,rt){let at=(ot,lt)=>{let ut=null;if(ot!=null)try{ut=JSON.parse(toUtf8String(ot))}catch(ht){logger$h.throwError("invalid JSON",Logger.errors.SERVER_ERROR,{body:ot,error:ht})}return rt&&(ut=rt(ut,lt)),ut},st=null;if(tt!=null){st=toUtf8Bytes(tt);const ot=typeof it=="string"?{url:it}:shallowCopy(it);ot.headers?Object.keys(ot.headers).filter(ut=>ut.toLowerCase()==="content-type").length!==0||(ot.headers=shallowCopy(ot.headers),ot.headers["content-type"]="application/json"):ot.headers={"content-type":"application/json"},it=ot}return _fetchData(it,st,at)}function poll(it,tt){return tt||(tt={}),tt=shallowCopy(tt),tt.floor==null&&(tt.floor=0),tt.ceiling==null&&(tt.ceiling=1e4),tt.interval==null&&(tt.interval=250),new Promise(function(rt,at){let st=null,ot=!1;const lt=()=>ot?!1:(ot=!0,st&&clearTimeout(st),!0);tt.timeout&&(st=setTimeout(()=>{lt()&&at(new Error("timeout"))},tt.timeout));const ut=tt.retryLimit;let ht=0;function mt(){return it().then(function(bt){if(bt!==void 0)lt()&&rt(bt);else if(tt.oncePoll)tt.oncePoll.once("poll",mt);else if(tt.onceBlock)tt.onceBlock.once("block",mt);else if(!ot){if(ht++,ht>ut){lt()&&at(new Error("retry limit reached"));return}let vt=tt.interval*parseInt(String(Math.random()*Math.pow(2,ht)));vt<tt.floor&&(vt=tt.floor),vt>tt.ceiling&&(vt=tt.ceiling),setTimeout(mt,vt)}return null},function(bt){lt()&&at(bt)})}mt()})}const lib_esm$2=Object.freeze(Object.defineProperty({__proto__:null,_fetchData,fetchJson,poll},Symbol.toStringTag,{value:"Module"}));for(var ALPHABET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={},z$7=0;z$7<ALPHABET$1.length;z$7++){var x$8=ALPHABET$1.charAt(z$7);if(ALPHABET_MAP[x$8]!==void 0)throw new TypeError(x$8+" is ambiguous");ALPHABET_MAP[x$8]=z$7}function polymodStep(it){var tt=it>>25;return(it&33554431)<<5^-(tt>>0&1)&996825010^-(tt>>1&1)&642813549^-(tt>>2&1)&513874426^-(tt>>3&1)&1027748829^-(tt>>4&1)&705979059}function prefixChk(it){for(var tt=1,rt=0;rt<it.length;++rt){var at=it.charCodeAt(rt);if(at<33||at>126)return"Invalid prefix ("+it+")";tt=polymodStep(tt)^at>>5}for(tt=polymodStep(tt),rt=0;rt<it.length;++rt){var st=it.charCodeAt(rt);tt=polymodStep(tt)^st&31}return tt}function encode$a(it,tt,rt){if(rt=rt||90,it.length+7+tt.length>rt)throw new TypeError("Exceeds length limit");it=it.toLowerCase();var at=prefixChk(it);if(typeof at=="string")throw new Error(at);for(var st=it+"1",ot=0;ot<tt.length;++ot){var lt=tt[ot];if(lt>>5!==0)throw new Error("Non 5-bit word");at=polymodStep(at)^lt,st+=ALPHABET$1.charAt(lt)}for(ot=0;ot<6;++ot)at=polymodStep(at);for(at^=1,ot=0;ot<6;++ot){var ut=at>>(5-ot)*5&31;st+=ALPHABET$1.charAt(ut)}return st}function __decode(it,tt){if(tt=tt||90,it.length<8)return it+" too short";if(it.length>tt)return"Exceeds length limit";var rt=it.toLowerCase(),at=it.toUpperCase();if(it!==rt&&it!==at)return"Mixed-case string "+it;it=rt;var st=it.lastIndexOf("1");if(st===-1)return"No separator character for "+it;if(st===0)return"Missing prefix for "+it;var ot=it.slice(0,st),lt=it.slice(st+1);if(lt.length<6)return"Data too short";var ut=prefixChk(ot);if(typeof ut=="string")return ut;for(var ht=[],mt=0;mt<lt.length;++mt){var bt=lt.charAt(mt),vt=ALPHABET_MAP[bt];if(vt===void 0)return"Unknown character "+bt;ut=polymodStep(ut)^vt,!(mt+6>=lt.length)&&ht.push(vt)}return ut!==1?"Invalid checksum for "+it:{prefix:ot,words:ht}}function decodeUnsafe(){var it=__decode.apply(null,arguments);if(typeof it=="object")return it}function decode$e(it){var tt=__decode.apply(null,arguments);if(typeof tt=="object")return tt;throw new Error(tt)}function convert$3(it,tt,rt,at){for(var st=0,ot=0,lt=(1<<rt)-1,ut=[],ht=0;ht<it.length;++ht)for(st=st<<tt|it[ht],ot+=tt;ot>=rt;)ot-=rt,ut.push(st>>ot&lt);if(at)ot>0&&ut.push(st<<rt-ot&lt);else{if(ot>=tt)return"Excess padding";if(st<<rt-ot&lt)return"Non-zero padding"}return ut}function toWordsUnsafe(it){var tt=convert$3(it,8,5,!0);if(Array.isArray(tt))return tt}function toWords(it){var tt=convert$3(it,8,5,!0);if(Array.isArray(tt))return tt;throw new Error(tt)}function fromWordsUnsafe(it){var tt=convert$3(it,5,8,!1);if(Array.isArray(tt))return tt}function fromWords(it){var tt=convert$3(it,5,8,!1);if(Array.isArray(tt))return tt;throw new Error(tt)}var bech32={decodeUnsafe,decode:decode$e,encode:encode$a,toWordsUnsafe,toWords,fromWordsUnsafe,fromWords};const version$7="providers/5.7.2",logger$g=new Logger(version$7);class Formatter{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const tt={},rt=this.address.bind(this),at=this.bigNumber.bind(this),st=this.blockTag.bind(this),ot=this.data.bind(this),lt=this.hash.bind(this),ut=this.hex.bind(this),ht=this.number.bind(this),mt=this.type.bind(this),bt=vt=>this.data(vt,!0);return tt.transaction={hash:lt,type:mt,accessList:Formatter.allowNull(this.accessList.bind(this),null),blockHash:Formatter.allowNull(lt,null),blockNumber:Formatter.allowNull(ht,null),transactionIndex:Formatter.allowNull(ht,null),confirmations:Formatter.allowNull(ht,null),from:rt,gasPrice:Formatter.allowNull(at),maxPriorityFeePerGas:Formatter.allowNull(at),maxFeePerGas:Formatter.allowNull(at),gasLimit:at,to:Formatter.allowNull(rt,null),value:at,nonce:ht,data:ot,r:Formatter.allowNull(this.uint256),s:Formatter.allowNull(this.uint256),v:Formatter.allowNull(ht),creates:Formatter.allowNull(rt,null),raw:Formatter.allowNull(ot)},tt.transactionRequest={from:Formatter.allowNull(rt),nonce:Formatter.allowNull(ht),gasLimit:Formatter.allowNull(at),gasPrice:Formatter.allowNull(at),maxPriorityFeePerGas:Formatter.allowNull(at),maxFeePerGas:Formatter.allowNull(at),to:Formatter.allowNull(rt),value:Formatter.allowNull(at),data:Formatter.allowNull(bt),type:Formatter.allowNull(ht),accessList:Formatter.allowNull(this.accessList.bind(this),null)},tt.receiptLog={transactionIndex:ht,blockNumber:ht,transactionHash:lt,address:rt,topics:Formatter.arrayOf(lt),data:ot,logIndex:ht,blockHash:lt},tt.receipt={to:Formatter.allowNull(this.address,null),from:Formatter.allowNull(this.address,null),contractAddress:Formatter.allowNull(rt,null),transactionIndex:ht,root:Formatter.allowNull(ut),gasUsed:at,logsBloom:Formatter.allowNull(ot),blockHash:lt,transactionHash:lt,logs:Formatter.arrayOf(this.receiptLog.bind(this)),blockNumber:ht,confirmations:Formatter.allowNull(ht,null),cumulativeGasUsed:at,effectiveGasPrice:Formatter.allowNull(at),status:Formatter.allowNull(ht),type:mt},tt.block={hash:Formatter.allowNull(lt),parentHash:lt,number:ht,timestamp:ht,nonce:Formatter.allowNull(ut),difficulty:this.difficulty.bind(this),gasLimit:at,gasUsed:at,miner:Formatter.allowNull(rt),extraData:ot,transactions:Formatter.allowNull(Formatter.arrayOf(lt)),baseFeePerGas:Formatter.allowNull(at)},tt.blockWithTransactions=shallowCopy(tt.block),tt.blockWithTransactions.transactions=Formatter.allowNull(Formatter.arrayOf(this.transactionResponse.bind(this))),tt.filter={fromBlock:Formatter.allowNull(st,void 0),toBlock:Formatter.allowNull(st,void 0),blockHash:Formatter.allowNull(lt,void 0),address:Formatter.allowNull(rt,void 0),topics:Formatter.allowNull(this.topics.bind(this),void 0)},tt.filterLog={blockNumber:Formatter.allowNull(ht),blockHash:Formatter.allowNull(lt),transactionIndex:ht,removed:Formatter.allowNull(this.boolean.bind(this)),address:rt,data:Formatter.allowFalsish(ot,"0x"),topics:Formatter.arrayOf(lt),transactionHash:lt,logIndex:ht},tt}accessList(tt){return accessListify(tt||[])}number(tt){return tt==="0x"?0:BigNumber.from(tt).toNumber()}type(tt){return tt==="0x"||tt==null?0:BigNumber.from(tt).toNumber()}bigNumber(tt){return BigNumber.from(tt)}boolean(tt){if(typeof tt=="boolean")return tt;if(typeof tt=="string"){if(tt=tt.toLowerCase(),tt==="true")return!0;if(tt==="false")return!1}throw new Error("invalid boolean - "+tt)}hex(tt,rt){return typeof tt=="string"&&(!rt&&tt.substring(0,2)!=="0x"&&(tt="0x"+tt),isHexString$4(tt))?tt.toLowerCase():logger$g.throwArgumentError("invalid hash","value",tt)}data(tt,rt){const at=this.hex(tt,rt);if(at.length%2!==0)throw new Error("invalid data; odd-length - "+tt);return at}address(tt){return getAddress(tt)}callAddress(tt){if(!isHexString$4(tt,32))return null;const rt=getAddress(hexDataSlice(tt,12));return rt===AddressZero?null:rt}contractAddress(tt){return getContractAddress(tt)}blockTag(tt){if(tt==null)return"latest";if(tt==="earliest")return"0x0";switch(tt){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return tt}if(typeof tt=="number"||isHexString$4(tt))return hexValue(tt);throw new Error("invalid blockTag")}hash(tt,rt){const at=this.hex(tt,rt);return hexDataLength(at)!==32?logger$g.throwArgumentError("invalid hash","value",tt):at}difficulty(tt){if(tt==null)return null;const rt=BigNumber.from(tt);try{return rt.toNumber()}catch{}return null}uint256(tt){if(!isHexString$4(tt))throw new Error("invalid uint256");return hexZeroPad(tt,32)}_block(tt,rt){tt.author!=null&&tt.miner==null&&(tt.miner=tt.author);const at=tt._difficulty!=null?tt._difficulty:tt.difficulty,st=Formatter.check(rt,tt);return st._difficulty=at==null?null:BigNumber.from(at),st}block(tt){return this._block(tt,this.formats.block)}blockWithTransactions(tt){return this._block(tt,this.formats.blockWithTransactions)}transactionRequest(tt){return Formatter.check(this.formats.transactionRequest,tt)}transactionResponse(tt){tt.gas!=null&&tt.gasLimit==null&&(tt.gasLimit=tt.gas),tt.to&&BigNumber.from(tt.to).isZero()&&(tt.to="0x0000000000000000000000000000000000000000"),tt.input!=null&&tt.data==null&&(tt.data=tt.input),tt.to==null&&tt.creates==null&&(tt.creates=this.contractAddress(tt)),(tt.type===1||tt.type===2)&&tt.accessList==null&&(tt.accessList=[]);const rt=Formatter.check(this.formats.transaction,tt);if(tt.chainId!=null){let at=tt.chainId;isHexString$4(at)&&(at=BigNumber.from(at).toNumber()),rt.chainId=at}else{let at=tt.networkId;at==null&&rt.v==null&&(at=tt.chainId),isHexString$4(at)&&(at=BigNumber.from(at).toNumber()),typeof at!="number"&&rt.v!=null&&(at=(rt.v-35)/2,at<0&&(at=0),at=parseInt(at)),typeof at!="number"&&(at=0),rt.chainId=at}return rt.blockHash&&rt.blockHash.replace(/0/g,"")==="x"&&(rt.blockHash=null),rt}transaction(tt){return parse$3(tt)}receiptLog(tt){return Formatter.check(this.formats.receiptLog,tt)}receipt(tt){const rt=Formatter.check(this.formats.receipt,tt);if(rt.root!=null)if(rt.root.length<=4){const at=BigNumber.from(rt.root).toNumber();at===0||at===1?(rt.status!=null&&rt.status!==at&&logger$g.throwArgumentError("alt-root-status/status mismatch","value",{root:rt.root,status:rt.status}),rt.status=at,delete rt.root):logger$g.throwArgumentError("invalid alt-root-status","value.root",rt.root)}else rt.root.length!==66&&logger$g.throwArgumentError("invalid root hash","value.root",rt.root);return rt.status!=null&&(rt.byzantium=!0),rt}topics(tt){return Array.isArray(tt)?tt.map(rt=>this.topics(rt)):tt!=null?this.hash(tt,!0):null}filter(tt){return Formatter.check(this.formats.filter,tt)}filterLog(tt){return Formatter.check(this.formats.filterLog,tt)}static check(tt,rt){const at={};for(const st in tt)try{const ot=tt[st](rt[st]);ot!==void 0&&(at[st]=ot)}catch(ot){throw ot.checkKey=st,ot.checkValue=rt[st],ot}return at}static allowNull(tt,rt){return function(at){return at==null?rt:tt(at)}}static allowFalsish(tt,rt){return function(at){return at?tt(at):rt}}static arrayOf(tt){return function(rt){if(!Array.isArray(rt))throw new Error("not an array");const at=[];return rt.forEach(function(st){at.push(tt(st))}),at}}}function isCommunityResourcable(it){return it&&typeof it.isCommunityResource=="function"}function isCommunityResource(it){return isCommunityResourcable(it)&&it.isCommunityResource()}let throttleMessage=!1;function showThrottleMessage(){throttleMessage||(throttleMessage=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var __awaiter$6=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$f=new Logger(version$7),MAX_CCIP_REDIRECTS=10;function checkTopic(it){return it==null?"null":(hexDataLength(it)!==32&&logger$f.throwArgumentError("invalid topic","topic",it),it.toLowerCase())}function serializeTopics(it){for(it=it.slice();it.length>0&&it[it.length-1]==null;)it.pop();return it.map(tt=>{if(Array.isArray(tt)){const rt={};tt.forEach(st=>{rt[checkTopic(st)]=!0});const at=Object.keys(rt);return at.sort(),at.join("|")}else return checkTopic(tt)}).join("&")}function deserializeTopics(it){return it===""?[]:it.split(/&/g).map(tt=>{if(tt==="")return[];const rt=tt.split("|").map(at=>at==="null"?null:at);return rt.length===1?rt[0]:rt})}function getEventTag(it){if(typeof it=="string"){if(it=it.toLowerCase(),hexDataLength(it)===32)return"tx:"+it;if(it.indexOf(":")===-1)return it}else{if(Array.isArray(it))return"filter:*:"+serializeTopics(it);if(ForkEvent.isForkEvent(it))throw logger$f.warn("not implemented"),new Error("not implemented");if(it&&typeof it=="object")return"filter:"+(it.address||"*")+":"+serializeTopics(it.topics||[])}throw new Error("invalid event - "+it)}function getTime(){return new Date().getTime()}function stall$1(it){return new Promise(tt=>{setTimeout(tt,it)})}const PollableEvents=["block","network","pending","poll"];class Event{constructor(tt,rt,at){defineReadOnly(this,"tag",tt),defineReadOnly(this,"listener",rt),defineReadOnly(this,"once",at),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const tt=this.tag.split(":");return tt[0]!=="tx"?null:tt[1]}get filter(){const tt=this.tag.split(":");if(tt[0]!=="filter")return null;const rt=tt[1],at=deserializeTopics(tt[2]),st={};return at.length>0&&(st.topics=at),rt&&rt!=="*"&&(st.address=rt),st}pollable(){return this.tag.indexOf(":")>=0||PollableEvents.indexOf(this.tag)>=0}}const coinInfos={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function bytes32ify(it){return hexZeroPad(BigNumber.from(it).toHexString(),32)}function base58Encode(it){return Base58.encode(concat$6([it,hexDataSlice(sha256$4(sha256$4(it)),0,4)]))}const matcherIpfs=new RegExp("^(ipfs)://(.*)$","i"),matchers=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),matcherIpfs,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _parseString(it,tt){try{return toUtf8String(_parseBytes(it,tt))}catch{}return null}function _parseBytes(it,tt){if(it==="0x")return null;const rt=BigNumber.from(hexDataSlice(it,tt,tt+32)).toNumber(),at=BigNumber.from(hexDataSlice(it,rt,rt+32)).toNumber();return hexDataSlice(it,rt+32,rt+32+at)}function getIpfsLink(it){return it.match(/^ipfs:\/\/ipfs\//i)?it=it.substring(12):it.match(/^ipfs:\/\//i)?it=it.substring(7):logger$f.throwArgumentError("unsupported IPFS format","link",it),`https://gateway.ipfs.io/ipfs/${it}`}function numPad(it){const tt=arrayify(it);if(tt.length>32)throw new Error("internal; should not happen");const rt=new Uint8Array(32);return rt.set(tt,32-tt.length),rt}function bytesPad(it){if(it.length%32===0)return it;const tt=new Uint8Array(Math.ceil(it.length/32)*32);return tt.set(it),tt}function encodeBytes(it){const tt=[];let rt=0;for(let at=0;at<it.length;at++)tt.push(null),rt+=32;for(let at=0;at<it.length;at++){const st=arrayify(it[at]);tt[at]=numPad(rt),tt.push(numPad(st.length)),tt.push(bytesPad(st)),rt+=32+Math.ceil(st.length/32)*32}return hexConcat(tt)}class Resolver{constructor(tt,rt,at,st){defineReadOnly(this,"provider",tt),defineReadOnly(this,"name",at),defineReadOnly(this,"address",tt.formatter.address(rt)),defineReadOnly(this,"_resolvedAddress",st)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(tt=>BigNumber.from(tt).eq(1)).catch(tt=>{if(tt.code===Logger.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,tt})),this._supportsEip2544}_fetch(tt,rt){return __awaiter$6(this,void 0,void 0,function*(){const at={to:this.address,ccipReadEnabled:!0,data:hexConcat([tt,namehash(this.name),rt||"0x"])};let st=!1;(yield this.supportsWildcard())&&(st=!0,at.data=hexConcat(["0x9061b923",encodeBytes([dnsEncode(this.name),at.data])]));try{let ot=yield this.provider.call(at);return arrayify(ot).length%32===4&&logger$f.throwError("resolver threw error",Logger.errors.CALL_EXCEPTION,{transaction:at,data:ot}),st&&(ot=_parseBytes(ot,0)),ot}catch(ot){if(ot.code===Logger.errors.CALL_EXCEPTION)return null;throw ot}})}_fetchBytes(tt,rt){return __awaiter$6(this,void 0,void 0,function*(){const at=yield this._fetch(tt,rt);return at!=null?_parseBytes(at,0):null})}_getAddress(tt,rt){const at=coinInfos[String(tt)];if(at==null&&logger$f.throwError(`unsupported coin type: ${tt}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${tt})`}),at.ilk==="eth")return this.provider.formatter.address(rt);const st=arrayify(rt);if(at.p2pkh!=null){const ot=rt.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(ot){const lt=parseInt(ot[1],16);if(ot[2].length===lt*2&&lt>=1&&lt<=75)return base58Encode(concat$6([[at.p2pkh],"0x"+ot[2]]))}}if(at.p2sh!=null){const ot=rt.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(ot){const lt=parseInt(ot[1],16);if(ot[2].length===lt*2&&lt>=1&&lt<=75)return base58Encode(concat$6([[at.p2sh],"0x"+ot[2]]))}}if(at.prefix!=null){const ot=st[1];let lt=st[0];if(lt===0?ot!==20&&ot!==32&&(lt=-1):lt=-1,lt>=0&&st.length===2+ot&&ot>=1&&ot<=75){const ut=bech32.toWords(st.slice(2));return ut.unshift(lt),bech32.encode(at.prefix,ut)}}return null}getAddress(tt){return __awaiter$6(this,void 0,void 0,function*(){if(tt==null&&(tt=60),tt===60)try{const st=yield this._fetch("0x3b3b57de");return st==="0x"||st===HashZero?null:this.provider.formatter.callAddress(st)}catch(st){if(st.code===Logger.errors.CALL_EXCEPTION)return null;throw st}const rt=yield this._fetchBytes("0xf1cb7e06",bytes32ify(tt));if(rt==null||rt==="0x")return null;const at=this._getAddress(tt,rt);return at==null&&logger$f.throwError("invalid or unsupported coin data",Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${tt})`,coinType:tt,data:rt}),at})}getAvatar(){return __awaiter$6(this,void 0,void 0,function*(){const tt=[{type:"name",content:this.name}];try{const rt=yield this.getText("avatar");if(rt==null)return null;for(let at=0;at<matchers.length;at++){const st=rt.match(matchers[at]);if(st==null)continue;const ot=st[1].toLowerCase();switch(ot){case"https":return tt.push({type:"url",content:rt}),{linkage:tt,url:rt};case"data":return tt.push({type:"data",content:rt}),{linkage:tt,url:rt};case"ipfs":return tt.push({type:"ipfs",content:rt}),{linkage:tt,url:getIpfsLink(rt)};case"erc721":case"erc1155":{const lt=ot==="erc721"?"0xc87b56dd":"0x0e89341c";tt.push({type:ot,content:rt});const ut=this._resolvedAddress||(yield this.getAddress()),ht=(st[2]||"").split("/");if(ht.length!==2)return null;const mt=yield this.provider.formatter.address(ht[0]),bt=hexZeroPad(BigNumber.from(ht[1]).toHexString(),32);if(ot==="erc721"){const Tt=this.provider.formatter.callAddress(yield this.provider.call({to:mt,data:hexConcat(["0x6352211e",bt])}));if(ut!==Tt)return null;tt.push({type:"owner",content:Tt})}else if(ot==="erc1155"){const Tt=BigNumber.from(yield this.provider.call({to:mt,data:hexConcat(["0x00fdd58e",hexZeroPad(ut,32),bt])}));if(Tt.isZero())return null;tt.push({type:"balance",content:Tt.toString()})}const vt={to:this.provider.formatter.address(ht[0]),data:hexConcat([lt,bt])};let At=_parseString(yield this.provider.call(vt),0);if(At==null)return null;tt.push({type:"metadata-url-base",content:At}),ot==="erc1155"&&(At=At.replace("{id}",bt.substring(2)),tt.push({type:"metadata-url-expanded",content:At})),At.match(/^ipfs:/i)&&(At=getIpfsLink(At)),tt.push({type:"metadata-url",content:At});const xt=yield fetchJson(At);if(!xt)return null;tt.push({type:"metadata",content:JSON.stringify(xt)});let Et=xt.image;if(typeof Et!="string")return null;if(!Et.match(/^(https:\/\/|data:)/i)){if(Et.match(matcherIpfs)==null)return null;tt.push({type:"url-ipfs",content:Et}),Et=getIpfsLink(Et)}return tt.push({type:"url",content:Et}),{linkage:tt,url:Et}}}}}catch{}return null})}getContentHash(){return __awaiter$6(this,void 0,void 0,function*(){const tt=yield this._fetchBytes("0xbc1c58d1");if(tt==null||tt==="0x")return null;const rt=tt.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(rt){const lt=parseInt(rt[3],16);if(rt[4].length===lt*2)return"ipfs://"+Base58.encode("0x"+rt[1])}const at=tt.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(at){const lt=parseInt(at[3],16);if(at[4].length===lt*2)return"ipns://"+Base58.encode("0x"+at[1])}const st=tt.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(st&&st[1].length===32*2)return"bzz://"+st[1];const ot=tt.match(/^0x90b2c605([0-9a-f]*)$/);if(ot&&ot[1].length===34*2){const lt={"=":"","+":"-","/":"_"};return"sia://"+encode$b("0x"+ot[1]).replace(/[=+\/]/g,ht=>lt[ht])}return logger$f.throwError("invalid or unsupported content hash data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:tt})})}getText(tt){return __awaiter$6(this,void 0,void 0,function*(){let rt=toUtf8Bytes(tt);rt=concat$6([bytes32ify(64),bytes32ify(rt.length),rt]),rt.length%32!==0&&(rt=concat$6([rt,hexZeroPad("0x",32-tt.length%32)]));const at=yield this._fetchBytes("0x59d1d43c",hexlify(rt));return at==null||at==="0x"?null:toUtf8String(at)})}}let defaultFormatter=null,nextPollId=1;class BaseProvider extends Provider$1{constructor(tt){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),defineReadOnly(this,"anyNetwork",tt==="any"),this.anyNetwork&&(tt=this.detectNetwork()),tt instanceof Promise)this._networkPromise=tt,tt.catch(rt=>{}),this._ready().catch(rt=>{});else{const rt=getStatic(new.target,"getNetwork")(tt);rt?(defineReadOnly(this,"_network",rt),this.emit("network",rt,null)):logger$f.throwArgumentError("invalid network","network",tt)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return __awaiter$6(this,void 0,void 0,function*(){if(this._network==null){let tt=null;if(this._networkPromise)try{tt=yield this._networkPromise}catch{}tt==null&&(tt=yield this.detectNetwork()),tt||logger$f.throwError("no network detected",Logger.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=tt:defineReadOnly(this,"_network",tt),this.emit("network",tt,null))}return this._network})}get ready(){return poll(()=>this._ready().then(tt=>tt,tt=>{if(!(tt.code===Logger.errors.NETWORK_ERROR&&tt.event==="noNetwork"))throw tt}))}static getFormatter(){return defaultFormatter==null&&(defaultFormatter=new Formatter),defaultFormatter}static getNetwork(tt){return getNetwork(tt==null?"homestead":tt)}ccipReadFetch(tt,rt,at){return __awaiter$6(this,void 0,void 0,function*(){if(this.disableCcipRead||at.length===0)return null;const st=tt.to.toLowerCase(),ot=rt.toLowerCase(),lt=[];for(let ut=0;ut<at.length;ut++){const ht=at[ut],mt=ht.replace("{sender}",st).replace("{data}",ot),bt=ht.indexOf("{data}")>=0?null:JSON.stringify({data:ot,sender:st}),vt=yield fetchJson({url:mt,errorPassThrough:!0},bt,(xt,Et)=>(xt.status=Et.statusCode,xt));if(vt.data)return vt.data;const At=vt.message||"unknown error";if(vt.status>=400&&vt.status<500)return logger$f.throwError(`response not found during CCIP fetch: ${At}`,Logger.errors.SERVER_ERROR,{url:ht,errorMessage:At});lt.push(At)}return logger$f.throwError(`error encountered during CCIP fetch: ${lt.map(ut=>JSON.stringify(ut)).join(", ")}`,Logger.errors.SERVER_ERROR,{urls:at,errorMessages:lt})})}_getInternalBlockNumber(tt){return __awaiter$6(this,void 0,void 0,function*(){if(yield this._ready(),tt>0)for(;this._internalBlockNumber;){const st=this._internalBlockNumber;try{const ot=yield st;if(getTime()-ot.respTime<=tt)return ot.blockNumber;break}catch{if(this._internalBlockNumber===st)break}}const rt=getTime(),at=resolveProperties({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(st=>null,st=>st)}).then(({blockNumber:st,networkError:ot})=>{if(ot)throw this._internalBlockNumber===at&&(this._internalBlockNumber=null),ot;const lt=getTime();return st=BigNumber.from(st).toNumber(),st<this._maxInternalBlockNumber&&(st=this._maxInternalBlockNumber),this._maxInternalBlockNumber=st,this._setFastBlockNumber(st),{blockNumber:st,reqTime:rt,respTime:lt}});return this._internalBlockNumber=at,at.catch(st=>{this._internalBlockNumber===at&&(this._internalBlockNumber=null)}),(yield at).blockNumber})}poll(){return __awaiter$6(this,void 0,void 0,function*(){const tt=nextPollId++,rt=[];let at=null;try{at=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(st){this.emit("error",st);return}if(this._setFastBlockNumber(at),this.emit("poll",tt,at),at===this._lastBlockNumber){this.emit("didPoll",tt);return}if(this._emitted.block===-2&&(this._emitted.block=at-1),Math.abs(this._emitted.block-at)>1e3)logger$f.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${at})`),this.emit("error",logger$f.makeError("network block skew detected",Logger.errors.NETWORK_ERROR,{blockNumber:at,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",at);else for(let st=this._emitted.block+1;st<=at;st++)this.emit("block",st);this._emitted.block!==at&&(this._emitted.block=at,Object.keys(this._emitted).forEach(st=>{if(st==="block")return;const ot=this._emitted[st];ot!=="pending"&&at-ot>12&&delete this._emitted[st]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=at-1),this._events.forEach(st=>{switch(st.type){case"tx":{const ot=st.hash;let lt=this.getTransactionReceipt(ot).then(ut=>(!ut||ut.blockNumber==null||(this._emitted["t:"+ot]=ut.blockNumber,this.emit(ot,ut)),null)).catch(ut=>{this.emit("error",ut)});rt.push(lt);break}case"filter":{if(!st._inflight){st._inflight=!0,st._lastBlockNumber===-2&&(st._lastBlockNumber=at-1);const ot=st.filter;ot.fromBlock=st._lastBlockNumber+1,ot.toBlock=at;const lt=ot.toBlock-this._maxFilterBlockRange;lt>ot.fromBlock&&(ot.fromBlock=lt),ot.fromBlock<0&&(ot.fromBlock=0);const ut=this.getLogs(ot).then(ht=>{st._inflight=!1,ht.length!==0&&ht.forEach(mt=>{mt.blockNumber>st._lastBlockNumber&&(st._lastBlockNumber=mt.blockNumber),this._emitted["b:"+mt.blockHash]=mt.blockNumber,this._emitted["t:"+mt.transactionHash]=mt.blockNumber,this.emit(ot,mt)})}).catch(ht=>{this.emit("error",ht),st._inflight=!1});rt.push(ut)}break}}}),this._lastBlockNumber=at,Promise.all(rt).then(()=>{this.emit("didPoll",tt)}).catch(st=>{this.emit("error",st)})})}resetEventsBlock(tt){this._lastBlockNumber=tt-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return __awaiter$6(this,void 0,void 0,function*(){return logger$f.throwError("provider does not support network detection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return __awaiter$6(this,void 0,void 0,function*(){const tt=yield this._ready(),rt=yield this.detectNetwork();if(tt.chainId!==rt.chainId){if(this.anyNetwork)return this._network=rt,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",rt,tt),yield stall$1(0),this._network;const at=logger$f.makeError("underlying network changed",Logger.errors.NETWORK_ERROR,{event:"changed",network:tt,detectedNetwork:rt});throw this.emit("error",at),at}return tt})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(tt=>{this._setFastBlockNumber(tt)},tt=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(tt){tt&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!tt&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(tt){if(typeof tt!="number"||tt<=0||parseInt(String(tt))!=tt)throw new Error("invalid polling interval");this._pollingInterval=tt,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const tt=getTime();return tt-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=tt,this._fastBlockNumberPromise=this.getBlockNumber().then(rt=>((this._fastBlockNumber==null||rt>this._fastBlockNumber)&&(this._fastBlockNumber=rt),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(tt){this._fastBlockNumber!=null&&tt<this._fastBlockNumber||(this._fastQueryDate=getTime(),(this._fastBlockNumber==null||tt>this._fastBlockNumber)&&(this._fastBlockNumber=tt,this._fastBlockNumberPromise=Promise.resolve(tt)))}waitForTransaction(tt,rt,at){return __awaiter$6(this,void 0,void 0,function*(){return this._waitForTransaction(tt,rt==null?1:rt,at||0,null)})}_waitForTransaction(tt,rt,at,st){return __awaiter$6(this,void 0,void 0,function*(){const ot=yield this.getTransactionReceipt(tt);return(ot?ot.confirmations:0)>=rt?ot:new Promise((lt,ut)=>{const ht=[];let mt=!1;const bt=function(){return mt?!0:(mt=!0,ht.forEach(At=>{At()}),!1)},vt=At=>{At.confirmations<rt||bt()||lt(At)};if(this.on(tt,vt),ht.push(()=>{this.removeListener(tt,vt)}),st){let At=st.startBlock,xt=null;const Et=Tt=>__awaiter$6(this,void 0,void 0,function*(){mt||(yield stall$1(1e3),this.getTransactionCount(st.from).then(wt=>__awaiter$6(this,void 0,void 0,function*(){if(!mt){if(wt<=st.nonce)At=Tt;else{{const Ct=yield this.getTransaction(tt);if(Ct&&Ct.blockNumber!=null)return}for(xt==null&&(xt=At-3,xt<st.startBlock&&(xt=st.startBlock));xt<=Tt;){if(mt)return;const Ct=yield this.getBlockWithTransactions(xt);for(let It=0;It<Ct.transactions.length;It++){const St=Ct.transactions[It];if(St.hash===tt)return;if(St.from===st.from&&St.nonce===st.nonce){if(mt)return;const Rt=yield this.waitForTransaction(St.hash,rt);if(bt())return;let Dt="replaced";St.data===st.data&&St.to===st.to&&St.value.eq(st.value)?Dt="repriced":St.data==="0x"&&St.from===St.to&&St.value.isZero()&&(Dt="cancelled"),ut(logger$f.makeError("transaction was replaced",Logger.errors.TRANSACTION_REPLACED,{cancelled:Dt==="replaced"||Dt==="cancelled",reason:Dt,replacement:this._wrapTransaction(St),hash:tt,receipt:Rt}));return}}xt++}}mt||this.once("block",Et)}}),wt=>{mt||this.once("block",Et)}))});if(mt)return;this.once("block",Et),ht.push(()=>{this.removeListener("block",Et)})}if(typeof at=="number"&&at>0){const At=setTimeout(()=>{bt()||ut(logger$f.makeError("timeout exceeded",Logger.errors.TIMEOUT,{timeout:at}))},at);At.unref&&At.unref(),ht.push(()=>{clearTimeout(At)})}})})}getBlockNumber(){return __awaiter$6(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const tt=yield this.perform("getGasPrice",{});try{return BigNumber.from(tt)}catch(rt){return logger$f.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getGasPrice",result:tt,error:rt})}})}getBalance(tt,rt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const at=yield resolveProperties({address:this._getAddress(tt),blockTag:this._getBlockTag(rt)}),st=yield this.perform("getBalance",at);try{return BigNumber.from(st)}catch(ot){return logger$f.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getBalance",params:at,result:st,error:ot})}})}getTransactionCount(tt,rt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const at=yield resolveProperties({address:this._getAddress(tt),blockTag:this._getBlockTag(rt)}),st=yield this.perform("getTransactionCount",at);try{return BigNumber.from(st).toNumber()}catch(ot){return logger$f.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getTransactionCount",params:at,result:st,error:ot})}})}getCode(tt,rt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const at=yield resolveProperties({address:this._getAddress(tt),blockTag:this._getBlockTag(rt)}),st=yield this.perform("getCode",at);try{return hexlify(st)}catch(ot){return logger$f.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getCode",params:at,result:st,error:ot})}})}getStorageAt(tt,rt,at){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const st=yield resolveProperties({address:this._getAddress(tt),blockTag:this._getBlockTag(at),position:Promise.resolve(rt).then(lt=>hexValue(lt))}),ot=yield this.perform("getStorageAt",st);try{return hexlify(ot)}catch(lt){return logger$f.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getStorageAt",params:st,result:ot,error:lt})}})}_wrapTransaction(tt,rt,at){if(rt!=null&&hexDataLength(rt)!==32)throw new Error("invalid response - sendTransaction");const st=tt;return rt!=null&&tt.hash!==rt&&logger$f.throwError("Transaction hash mismatch from Provider.sendTransaction.",Logger.errors.UNKNOWN_ERROR,{expectedHash:tt.hash,returnedHash:rt}),st.wait=(ot,lt)=>__awaiter$6(this,void 0,void 0,function*(){ot==null&&(ot=1),lt==null&&(lt=0);let ut;ot!==0&&at!=null&&(ut={data:tt.data,from:tt.from,nonce:tt.nonce,to:tt.to,value:tt.value,startBlock:at});const ht=yield this._waitForTransaction(tt.hash,ot,lt,ut);return ht==null&&ot===0?null:(this._emitted["t:"+tt.hash]=ht.blockNumber,ht.status===0&&logger$f.throwError("transaction failed",Logger.errors.CALL_EXCEPTION,{transactionHash:tt.hash,transaction:tt,receipt:ht}),ht)}),st}sendTransaction(tt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const rt=yield Promise.resolve(tt).then(ot=>hexlify(ot)),at=this.formatter.transaction(tt);at.confirmations==null&&(at.confirmations=0);const st=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const ot=yield this.perform("sendTransaction",{signedTransaction:rt});return this._wrapTransaction(at,ot,st)}catch(ot){throw ot.transaction=at,ot.transactionHash=at.hash,ot}})}_getTransactionRequest(tt){return __awaiter$6(this,void 0,void 0,function*(){const rt=yield tt,at={};return["from","to"].forEach(st=>{rt[st]!=null&&(at[st]=Promise.resolve(rt[st]).then(ot=>ot?this._getAddress(ot):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(st=>{rt[st]!=null&&(at[st]=Promise.resolve(rt[st]).then(ot=>ot?BigNumber.from(ot):null))}),["type"].forEach(st=>{rt[st]!=null&&(at[st]=Promise.resolve(rt[st]).then(ot=>ot!=null?ot:null))}),rt.accessList&&(at.accessList=this.formatter.accessList(rt.accessList)),["data"].forEach(st=>{rt[st]!=null&&(at[st]=Promise.resolve(rt[st]).then(ot=>ot?hexlify(ot):null))}),this.formatter.transactionRequest(yield resolveProperties(at))})}_getFilter(tt){return __awaiter$6(this,void 0,void 0,function*(){tt=yield tt;const rt={};return tt.address!=null&&(rt.address=this._getAddress(tt.address)),["blockHash","topics"].forEach(at=>{tt[at]!=null&&(rt[at]=tt[at])}),["fromBlock","toBlock"].forEach(at=>{tt[at]!=null&&(rt[at]=this._getBlockTag(tt[at]))}),this.formatter.filter(yield resolveProperties(rt))})}_call(tt,rt,at){return __awaiter$6(this,void 0,void 0,function*(){at>=MAX_CCIP_REDIRECTS&&logger$f.throwError("CCIP read exceeded maximum redirections",Logger.errors.SERVER_ERROR,{redirects:at,transaction:tt});const st=tt.to,ot=yield this.perform("call",{transaction:tt,blockTag:rt});if(at>=0&&rt==="latest"&&st!=null&&ot.substring(0,10)==="0x556f1830"&&hexDataLength(ot)%32===4)try{const lt=hexDataSlice(ot,4),ut=hexDataSlice(lt,0,32);BigNumber.from(ut).eq(st)||logger$f.throwError("CCIP Read sender did not match",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:tt,data:ot});const ht=[],mt=BigNumber.from(hexDataSlice(lt,32,64)).toNumber(),bt=BigNumber.from(hexDataSlice(lt,mt,mt+32)).toNumber(),vt=hexDataSlice(lt,mt+32);for(let Ct=0;Ct<bt;Ct++){const It=_parseString(vt,Ct*32);It==null&&logger$f.throwError("CCIP Read contained corrupt URL string",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:tt,data:ot}),ht.push(It)}const At=_parseBytes(lt,64);BigNumber.from(hexDataSlice(lt,100,128)).isZero()||logger$f.throwError("CCIP Read callback selector included junk",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:tt,data:ot});const xt=hexDataSlice(lt,96,100),Et=_parseBytes(lt,128),Tt=yield this.ccipReadFetch(tt,At,ht);Tt==null&&logger$f.throwError("CCIP Read disabled or provided no URLs",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:tt,data:ot});const wt={to:st,data:hexConcat([xt,encodeBytes([Tt,Et])])};return this._call(wt,rt,at+1)}catch(lt){if(lt.code===Logger.errors.SERVER_ERROR)throw lt}try{return hexlify(ot)}catch(lt){return logger$f.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"call",params:{transaction:tt,blockTag:rt},result:ot,error:lt})}})}call(tt,rt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const at=yield resolveProperties({transaction:this._getTransactionRequest(tt),blockTag:this._getBlockTag(rt),ccipReadEnabled:Promise.resolve(tt.ccipReadEnabled)});return this._call(at.transaction,at.blockTag,at.ccipReadEnabled?0:-1)})}estimateGas(tt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const rt=yield resolveProperties({transaction:this._getTransactionRequest(tt)}),at=yield this.perform("estimateGas",rt);try{return BigNumber.from(at)}catch(st){return logger$f.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"estimateGas",params:rt,result:at,error:st})}})}_getAddress(tt){return __awaiter$6(this,void 0,void 0,function*(){tt=yield tt,typeof tt!="string"&&logger$f.throwArgumentError("invalid address or ENS name","name",tt);const rt=yield this.resolveName(tt);return rt==null&&logger$f.throwError("ENS name not configured",Logger.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(tt)})`}),rt})}_getBlock(tt,rt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork(),tt=yield tt;let at=-128;const st={includeTransactions:!!rt};if(isHexString$4(tt,32))st.blockHash=tt;else try{st.blockTag=yield this._getBlockTag(tt),isHexString$4(st.blockTag)&&(at=parseInt(st.blockTag.substring(2),16))}catch{logger$f.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",tt)}return poll(()=>__awaiter$6(this,void 0,void 0,function*(){const ot=yield this.perform("getBlock",st);if(ot==null)return st.blockHash!=null&&this._emitted["b:"+st.blockHash]==null||st.blockTag!=null&&at>this._emitted.block?null:void 0;if(rt){let lt=null;for(let ht=0;ht<ot.transactions.length;ht++){const mt=ot.transactions[ht];if(mt.blockNumber==null)mt.confirmations=0;else if(mt.confirmations==null){lt==null&&(lt=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let bt=lt-mt.blockNumber+1;bt<=0&&(bt=1),mt.confirmations=bt}}const ut=this.formatter.blockWithTransactions(ot);return ut.transactions=ut.transactions.map(ht=>this._wrapTransaction(ht)),ut}return this.formatter.block(ot)}),{oncePoll:this})})}getBlock(tt){return this._getBlock(tt,!1)}getBlockWithTransactions(tt){return this._getBlock(tt,!0)}getTransaction(tt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork(),tt=yield tt;const rt={transactionHash:this.formatter.hash(tt,!0)};return poll(()=>__awaiter$6(this,void 0,void 0,function*(){const at=yield this.perform("getTransaction",rt);if(at==null)return this._emitted["t:"+tt]==null?null:void 0;const st=this.formatter.transactionResponse(at);if(st.blockNumber==null)st.confirmations=0;else if(st.confirmations==null){let lt=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-st.blockNumber+1;lt<=0&&(lt=1),st.confirmations=lt}return this._wrapTransaction(st)}),{oncePoll:this})})}getTransactionReceipt(tt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork(),tt=yield tt;const rt={transactionHash:this.formatter.hash(tt,!0)};return poll(()=>__awaiter$6(this,void 0,void 0,function*(){const at=yield this.perform("getTransactionReceipt",rt);if(at==null)return this._emitted["t:"+tt]==null?null:void 0;if(at.blockHash==null)return;const st=this.formatter.receipt(at);if(st.blockNumber==null)st.confirmations=0;else if(st.confirmations==null){let lt=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-st.blockNumber+1;lt<=0&&(lt=1),st.confirmations=lt}return st}),{oncePoll:this})})}getLogs(tt){return __awaiter$6(this,void 0,void 0,function*(){yield this.getNetwork();const rt=yield resolveProperties({filter:this._getFilter(tt)}),at=yield this.perform("getLogs",rt);return at.forEach(st=>{st.removed==null&&(st.removed=!1)}),Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(at)})}getEtherPrice(){return __awaiter$6(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(tt){return __awaiter$6(this,void 0,void 0,function*(){if(tt=yield tt,typeof tt=="number"&&tt<0){tt%1&&logger$f.throwArgumentError("invalid BlockTag","blockTag",tt);let rt=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return rt+=tt,rt<0&&(rt=0),this.formatter.blockTag(rt)}return this.formatter.blockTag(tt)})}getResolver(tt){return __awaiter$6(this,void 0,void 0,function*(){let rt=tt;for(;;){if(rt===""||rt==="."||tt!=="eth"&&rt==="eth")return null;const at=yield this._getResolver(rt,"getResolver");if(at!=null){const st=new Resolver(this,at,tt);return rt!==tt&&!(yield st.supportsWildcard())?null:st}rt=rt.split(".").slice(1).join(".")}})}_getResolver(tt,rt){return __awaiter$6(this,void 0,void 0,function*(){rt==null&&(rt="ENS");const at=yield this.getNetwork();at.ensAddress||logger$f.throwError("network does not support ENS",Logger.errors.UNSUPPORTED_OPERATION,{operation:rt,network:at.name});try{const st=yield this.call({to:at.ensAddress,data:"0x0178b8bf"+namehash(tt).substring(2)});return this.formatter.callAddress(st)}catch{}return null})}resolveName(tt){return __awaiter$6(this,void 0,void 0,function*(){tt=yield tt;try{return Promise.resolve(this.formatter.address(tt))}catch(at){if(isHexString$4(tt))throw at}typeof tt!="string"&&logger$f.throwArgumentError("invalid ENS name","name",tt);const rt=yield this.getResolver(tt);return rt?yield rt.getAddress():null})}lookupAddress(tt){return __awaiter$6(this,void 0,void 0,function*(){tt=yield tt,tt=this.formatter.address(tt);const rt=tt.substring(2).toLowerCase()+".addr.reverse",at=yield this._getResolver(rt,"lookupAddress");if(at==null)return null;const st=_parseString(yield this.call({to:at,data:"0x691f3431"+namehash(rt).substring(2)}),0);return(yield this.resolveName(st))!=tt?null:st})}getAvatar(tt){return __awaiter$6(this,void 0,void 0,function*(){let rt=null;if(isHexString$4(tt)){const ot=this.formatter.address(tt).substring(2).toLowerCase()+".addr.reverse",lt=yield this._getResolver(ot,"getAvatar");if(!lt)return null;rt=new Resolver(this,lt,ot);try{const ut=yield rt.getAvatar();if(ut)return ut.url}catch(ut){if(ut.code!==Logger.errors.CALL_EXCEPTION)throw ut}try{const ut=_parseString(yield this.call({to:lt,data:"0x691f3431"+namehash(ot).substring(2)}),0);rt=yield this.getResolver(ut)}catch(ut){if(ut.code!==Logger.errors.CALL_EXCEPTION)throw ut;return null}}else if(rt=yield this.getResolver(tt),!rt)return null;const at=yield rt.getAvatar();return at==null?null:at.url})}perform(tt,rt){return logger$f.throwError(tt+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:tt})}_startEvent(tt){this.polling=this._events.filter(rt=>rt.pollable()).length>0}_stopEvent(tt){this.polling=this._events.filter(rt=>rt.pollable()).length>0}_addEventListener(tt,rt,at){const st=new Event(getEventTag(tt),rt,at);return this._events.push(st),this._startEvent(st),this}on(tt,rt){return this._addEventListener(tt,rt,!1)}once(tt,rt){return this._addEventListener(tt,rt,!0)}emit(tt,...rt){let at=!1,st=[],ot=getEventTag(tt);return this._events=this._events.filter(lt=>lt.tag!==ot?!0:(setTimeout(()=>{lt.listener.apply(this,rt)},0),at=!0,lt.once?(st.push(lt),!1):!0)),st.forEach(lt=>{this._stopEvent(lt)}),at}listenerCount(tt){if(!tt)return this._events.length;let rt=getEventTag(tt);return this._events.filter(at=>at.tag===rt).length}listeners(tt){if(tt==null)return this._events.map(at=>at.listener);let rt=getEventTag(tt);return this._events.filter(at=>at.tag===rt).map(at=>at.listener)}off(tt,rt){if(rt==null)return this.removeAllListeners(tt);const at=[];let st=!1,ot=getEventTag(tt);return this._events=this._events.filter(lt=>lt.tag!==ot||lt.listener!=rt||st?!0:(st=!0,at.push(lt),!1)),at.forEach(lt=>{this._stopEvent(lt)}),this}removeAllListeners(tt){let rt=[];if(tt==null)rt=this._events,this._events=[];else{const at=getEventTag(tt);this._events=this._events.filter(st=>st.tag!==at?!0:(rt.push(st),!1))}return rt.forEach(at=>{this._stopEvent(at)}),this}}var __awaiter$5=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$e=new Logger(version$7),errorGas=["call","estimateGas"];function spelunk(it,tt){if(it==null)return null;if(typeof it.message=="string"&&it.message.match("reverted")){const rt=isHexString$4(it.data)?it.data:null;if(!tt||rt)return{message:it.message,data:rt}}if(typeof it=="object"){for(const rt in it){const at=spelunk(it[rt],tt);if(at)return at}return null}if(typeof it=="string")try{return spelunk(JSON.parse(it),tt)}catch{}return null}function checkError$1(it,tt,rt){const at=rt.transaction||rt.signedTransaction;if(it==="call"){const ot=spelunk(tt,!0);if(ot)return ot.data;logger$e.throwError("missing revert data in call exception; Transaction reverted without a reason string",Logger.errors.CALL_EXCEPTION,{data:"0x",transaction:at,error:tt})}if(it==="estimateGas"){let ot=spelunk(tt.body,!1);ot==null&&(ot=spelunk(tt,!1)),ot&&logger$e.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{reason:ot.message,method:it,transaction:at,error:tt})}let st=tt.message;throw tt.code===Logger.errors.SERVER_ERROR&&tt.error&&typeof tt.error.message=="string"?st=tt.error.message:typeof tt.body=="string"?st=tt.body:typeof tt.responseText=="string"&&(st=tt.responseText),st=(st||"").toLowerCase(),st.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&logger$e.throwError("insufficient funds for intrinsic transaction cost",Logger.errors.INSUFFICIENT_FUNDS,{error:tt,method:it,transaction:at}),st.match(/nonce (is )?too low/i)&&logger$e.throwError("nonce has already been used",Logger.errors.NONCE_EXPIRED,{error:tt,method:it,transaction:at}),st.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&logger$e.throwError("replacement fee too low",Logger.errors.REPLACEMENT_UNDERPRICED,{error:tt,method:it,transaction:at}),st.match(/only replay-protected/i)&&logger$e.throwError("legacy pre-eip-155 transactions not supported",Logger.errors.UNSUPPORTED_OPERATION,{error:tt,method:it,transaction:at}),errorGas.indexOf(it)>=0&&st.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&logger$e.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:tt,method:it,transaction:at}),tt}function timer$1(it){return new Promise(function(tt){setTimeout(tt,it)})}function getResult$1(it){if(it.error){const tt=new Error(it.error.message);throw tt.code=it.error.code,tt.data=it.error.data,tt}return it.result}function getLowerCase(it){return it&&it.toLowerCase()}const _constructorGuard={};class JsonRpcSigner extends Signer{constructor(tt,rt,at){if(super(),tt!==_constructorGuard)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");defineReadOnly(this,"provider",rt),at==null&&(at=0),typeof at=="string"?(defineReadOnly(this,"_address",this.provider.formatter.address(at)),defineReadOnly(this,"_index",null)):typeof at=="number"?(defineReadOnly(this,"_index",at),defineReadOnly(this,"_address",null)):logger$e.throwArgumentError("invalid address or index","addressOrIndex",at)}connect(tt){return logger$e.throwError("cannot alter JSON-RPC Signer connection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new UncheckedJsonRpcSigner(_constructorGuard,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(tt=>(tt.length<=this._index&&logger$e.throwError("unknown account #"+this._index,Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(tt[this._index])))}sendUncheckedTransaction(tt){tt=shallowCopy(tt);const rt=this.getAddress().then(at=>(at&&(at=at.toLowerCase()),at));if(tt.gasLimit==null){const at=shallowCopy(tt);at.from=rt,tt.gasLimit=this.provider.estimateGas(at)}return tt.to!=null&&(tt.to=Promise.resolve(tt.to).then(at=>__awaiter$5(this,void 0,void 0,function*(){if(at==null)return null;const st=yield this.provider.resolveName(at);return st==null&&logger$e.throwArgumentError("provided ENS name resolves to null","tx.to",at),st}))),resolveProperties({tx:resolveProperties(tt),sender:rt}).then(({tx:at,sender:st})=>{at.from!=null?at.from.toLowerCase()!==st&&logger$e.throwArgumentError("from address mismatch","transaction",tt):at.from=st;const ot=this.provider.constructor.hexlifyTransaction(at,{from:!0});return this.provider.send("eth_sendTransaction",[ot]).then(lt=>lt,lt=>(typeof lt.message=="string"&&lt.message.match(/user denied/i)&&logger$e.throwError("user rejected transaction",Logger.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:at}),checkError$1("sendTransaction",lt,ot)))})}signTransaction(tt){return logger$e.throwError("signing transactions is unsupported",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(tt){return __awaiter$5(this,void 0,void 0,function*(){const rt=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),at=yield this.sendUncheckedTransaction(tt);try{return yield poll(()=>__awaiter$5(this,void 0,void 0,function*(){const st=yield this.provider.getTransaction(at);if(st!==null)return this.provider._wrapTransaction(st,at,rt)}),{oncePoll:this.provider})}catch(st){throw st.transactionHash=at,st}})}signMessage(tt){return __awaiter$5(this,void 0,void 0,function*(){const rt=typeof tt=="string"?toUtf8Bytes(tt):tt,at=yield this.getAddress();try{return yield this.provider.send("personal_sign",[hexlify(rt),at.toLowerCase()])}catch(st){throw typeof st.message=="string"&&st.message.match(/user denied/i)&&logger$e.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"signMessage",from:at,messageData:tt}),st}})}_legacySignMessage(tt){return __awaiter$5(this,void 0,void 0,function*(){const rt=typeof tt=="string"?toUtf8Bytes(tt):tt,at=yield this.getAddress();try{return yield this.provider.send("eth_sign",[at.toLowerCase(),hexlify(rt)])}catch(st){throw typeof st.message=="string"&&st.message.match(/user denied/i)&&logger$e.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:at,messageData:tt}),st}})}_signTypedData(tt,rt,at){return __awaiter$5(this,void 0,void 0,function*(){const st=yield TypedDataEncoder.resolveNames(tt,rt,at,lt=>this.provider.resolveName(lt)),ot=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[ot.toLowerCase(),JSON.stringify(TypedDataEncoder.getPayload(st.domain,rt,st.value))])}catch(lt){throw typeof lt.message=="string"&&lt.message.match(/user denied/i)&&logger$e.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"_signTypedData",from:ot,messageData:{domain:st.domain,types:rt,value:st.value}}),lt}})}unlock(tt){return __awaiter$5(this,void 0,void 0,function*(){const rt=this.provider,at=yield this.getAddress();return rt.send("personal_unlockAccount",[at.toLowerCase(),tt,null])})}}class UncheckedJsonRpcSigner extends JsonRpcSigner{sendTransaction(tt){return this.sendUncheckedTransaction(tt).then(rt=>({hash:rt,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:at=>this.provider.waitForTransaction(rt,at)}))}}const allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class JsonRpcProvider$1 extends BaseProvider{constructor(tt,rt){let at=rt;at==null&&(at=new Promise((st,ot)=>{setTimeout(()=>{this.detectNetwork().then(lt=>{st(lt)},lt=>{ot(lt)})},0)})),super(at),tt||(tt=getStatic(this.constructor,"defaultUrl")()),typeof tt=="string"?defineReadOnly(this,"connection",Object.freeze({url:tt})):defineReadOnly(this,"connection",Object.freeze(shallowCopy(tt))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return __awaiter$5(this,void 0,void 0,function*(){yield timer$1(0);let tt=null;try{tt=yield this.send("eth_chainId",[])}catch{try{tt=yield this.send("net_version",[])}catch{}}if(tt!=null){const rt=getStatic(this.constructor,"getNetwork");try{return rt(BigNumber.from(tt).toNumber())}catch(at){return logger$e.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{chainId:tt,event:"invalidNetwork",serverError:at})}}return logger$e.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(tt){return new JsonRpcSigner(_constructorGuard,this,tt)}getUncheckedSigner(tt){return this.getSigner(tt).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(tt=>tt.map(rt=>this.formatter.address(rt)))}send(tt,rt){const at={method:tt,params:rt,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:deepCopy(at),provider:this});const st=["eth_chainId","eth_blockNumber"].indexOf(tt)>=0;if(st&&this._cache[tt])return this._cache[tt];const ot=fetchJson(this.connection,JSON.stringify(at),getResult$1).then(lt=>(this.emit("debug",{action:"response",request:at,response:lt,provider:this}),lt),lt=>{throw this.emit("debug",{action:"response",error:lt,request:at,provider:this}),lt});return st&&(this._cache[tt]=ot,setTimeout(()=>{this._cache[tt]=null},0)),ot}prepareRequest(tt,rt){switch(tt){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[getLowerCase(rt.address),rt.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[getLowerCase(rt.address),rt.blockTag]];case"getCode":return["eth_getCode",[getLowerCase(rt.address),rt.blockTag]];case"getStorageAt":return["eth_getStorageAt",[getLowerCase(rt.address),hexZeroPad(rt.position,32),rt.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[rt.signedTransaction]];case"getBlock":return rt.blockTag?["eth_getBlockByNumber",[rt.blockTag,!!rt.includeTransactions]]:rt.blockHash?["eth_getBlockByHash",[rt.blockHash,!!rt.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[rt.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[rt.transactionHash]];case"call":return["eth_call",[getStatic(this.constructor,"hexlifyTransaction")(rt.transaction,{from:!0}),rt.blockTag]];case"estimateGas":return["eth_estimateGas",[getStatic(this.constructor,"hexlifyTransaction")(rt.transaction,{from:!0})]];case"getLogs":return rt.filter&&rt.filter.address!=null&&(rt.filter.address=getLowerCase(rt.filter.address)),["eth_getLogs",[rt.filter]]}return null}perform(tt,rt){return __awaiter$5(this,void 0,void 0,function*(){if(tt==="call"||tt==="estimateGas"){const st=rt.transaction;if(st&&st.type!=null&&BigNumber.from(st.type).isZero()&&st.maxFeePerGas==null&&st.maxPriorityFeePerGas==null){const ot=yield this.getFeeData();ot.maxFeePerGas==null&&ot.maxPriorityFeePerGas==null&&(rt=shallowCopy(rt),rt.transaction=shallowCopy(st),delete rt.transaction.type)}}const at=this.prepareRequest(tt,rt);at==null&&logger$e.throwError(tt+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:tt});try{return yield this.send(at[0],at[1])}catch(st){return checkError$1(tt,st,rt)}})}_startEvent(tt){tt.tag==="pending"&&this._startPending(),super._startEvent(tt)}_startPending(){if(this._pendingFilter!=null)return;const tt=this,rt=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=rt,rt.then(function(at){function st(){tt.send("eth_getFilterChanges",[at]).then(function(ot){if(tt._pendingFilter!=rt)return null;let lt=Promise.resolve();return ot.forEach(function(ut){tt._emitted["t:"+ut.toLowerCase()]="pending",lt=lt.then(function(){return tt.getTransaction(ut).then(function(ht){return tt.emit("pending",ht),null})})}),lt.then(function(){return timer$1(1e3)})}).then(function(){if(tt._pendingFilter!=rt){tt.send("eth_uninstallFilter",[at]);return}return setTimeout(function(){st()},0),null}).catch(ot=>{})}return st(),at}).catch(at=>{})}_stopEvent(tt){tt.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(tt)}static hexlifyTransaction(tt,rt){const at=shallowCopy(allowedTransactionKeys);if(rt)for(const ot in rt)rt[ot]&&(at[ot]=!0);checkProperties(tt,at);const st={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(ot){if(tt[ot]==null)return;const lt=hexValue(BigNumber.from(tt[ot]));ot==="gasLimit"&&(ot="gas"),st[ot]=lt}),["from","to","data"].forEach(function(ot){tt[ot]!=null&&(st[ot]=hexlify(tt[ot]))}),tt.accessList&&(st.accessList=accessListify(tt.accessList)),st}}let WS$1=null;try{if(WS$1=WebSocket,WS$1==null)throw new Error("inject please")}catch(it){const tt=new Logger(version$7);WS$1=function(){tt.throwError("WebSockets not supported in this environment",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var __awaiter$4=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$d=new Logger(version$7);let NextId=1;class WebSocketProvider extends JsonRpcProvider$1{constructor(tt,rt){rt==="any"&&logger$d.throwError("WebSocketProvider does not support 'any' network yet",Logger.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof tt=="string"?super(tt,rt):super("_websocket",rt),this._pollingInterval=-1,this._wsReady=!1,typeof tt=="string"?defineReadOnly(this,"_websocket",new WS$1(this.connection.url)):defineReadOnly(this,"_websocket",tt),defineReadOnly(this,"_requests",{}),defineReadOnly(this,"_subs",{}),defineReadOnly(this,"_subIds",{}),defineReadOnly(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(st=>{this.websocket.send(this._requests[st].payload)})},this.websocket.onmessage=st=>{const ot=st.data,lt=JSON.parse(ot);if(lt.id!=null){const ut=String(lt.id),ht=this._requests[ut];if(delete this._requests[ut],lt.result!==void 0)ht.callback(null,lt.result),this.emit("debug",{action:"response",request:JSON.parse(ht.payload),response:lt.result,provider:this});else{let mt=null;lt.error?(mt=new Error(lt.error.message||"unknown error"),defineReadOnly(mt,"code",lt.error.code||null),defineReadOnly(mt,"response",ot)):mt=new Error("unknown error"),ht.callback(mt,void 0),this.emit("debug",{action:"response",error:mt,request:JSON.parse(ht.payload),provider:this})}}else if(lt.method==="eth_subscription"){const ut=this._subs[lt.params.subscription];ut&&ut.processFunc(lt.params.result)}else console.warn("this should not happen")};const at=setInterval(()=>{this.emit("poll")},1e3);at.unref&&at.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(tt){logger$d.throwError("cannot reset events block on WebSocketProvider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(tt){logger$d.throwError("cannot set polling interval on WebSocketProvider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return __awaiter$4(this,void 0,void 0,function*(){return null})}set polling(tt){!tt||logger$d.throwError("cannot set polling on WebSocketProvider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(tt,rt){const at=NextId++;return new Promise((st,ot)=>{function lt(ht,mt){return ht?ot(ht):st(mt)}const ut=JSON.stringify({method:tt,params:rt,id:at,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(ut),provider:this}),this._requests[String(at)]={callback:lt,payload:ut},this._wsReady&&this.websocket.send(ut)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(tt,rt,at){return __awaiter$4(this,void 0,void 0,function*(){let st=this._subIds[tt];st==null&&(st=Promise.all(rt).then(lt=>this.send("eth_subscribe",lt)),this._subIds[tt]=st);const ot=yield st;this._subs[ot]={tag:tt,processFunc:at}})}_startEvent(tt){switch(tt.type){case"block":this._subscribe("block",["newHeads"],rt=>{const at=BigNumber.from(rt.number).toNumber();this._emitted.block=at,this.emit("block",at)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],rt=>{this.emit("pending",rt)});break;case"filter":this._subscribe(tt.tag,["logs",this._getFilter(tt.filter)],rt=>{rt.removed==null&&(rt.removed=!1),this.emit(tt.filter,this.formatter.filterLog(rt))});break;case"tx":{const rt=at=>{const st=at.hash;this.getTransactionReceipt(st).then(ot=>{!ot||this.emit(st,ot)})};rt(tt),this._subscribe("tx",["newHeads"],at=>{this._events.filter(st=>st.type==="tx").forEach(rt)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",tt);break}}_stopEvent(tt){let rt=tt.tag;if(tt.type==="tx"){if(this._events.filter(st=>st.type==="tx").length)return;rt="tx"}else if(this.listenerCount(tt.event))return;const at=this._subIds[rt];!at||(delete this._subIds[rt],at.then(st=>{!this._subs[st]||(delete this._subs[st],this.send("eth_unsubscribe",[st]))}))}destroy(){return __awaiter$4(this,void 0,void 0,function*(){this.websocket.readyState===WS$1.CONNECTING&&(yield new Promise(tt=>{this.websocket.onopen=function(){tt(!0)},this.websocket.onerror=function(){tt(!1)}})),this.websocket.close(1e3)})}}var __awaiter$3=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$c=new Logger(version$7);class StaticJsonRpcProvider extends JsonRpcProvider$1{detectNetwork(){const tt=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return __awaiter$3(this,void 0,void 0,function*(){let rt=this.network;return rt==null&&(rt=yield tt.detectNetwork.call(this),rt||logger$c.throwError("no network detected",Logger.errors.UNKNOWN_ERROR,{}),this._network==null&&(defineReadOnly(this,"_network",rt),this.emit("network",rt,null))),rt})}}class UrlJsonRpcProvider extends StaticJsonRpcProvider{constructor(tt,rt){logger$c.checkAbstract(new.target,UrlJsonRpcProvider),tt=getStatic(new.target,"getNetwork")(tt),rt=getStatic(new.target,"getApiKey")(rt);const at=getStatic(new.target,"getUrl")(tt,rt);super(at,tt),typeof rt=="string"?defineReadOnly(this,"apiKey",rt):rt!=null&&Object.keys(rt).forEach(st=>{defineReadOnly(this,st,rt[st])})}_startPending(){logger$c.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(tt){return logger$c.throwError("API provider does not support signing",Logger.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(tt){return tt}static getUrl(tt,rt){return logger$c.throwError("not implemented; sub-classes must override getUrl",Logger.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const logger$b=new Logger(version$7),defaultApiKey$2="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class AlchemyWebSocketProvider extends WebSocketProvider{constructor(tt,rt){const at=new AlchemyProvider(tt,rt),st=at.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(st,at.network),defineReadOnly(this,"apiKey",at.apiKey)}isCommunityResource(){return this.apiKey===defaultApiKey$2}}class AlchemyProvider extends UrlJsonRpcProvider{static getWebSocketProvider(tt,rt){return new AlchemyWebSocketProvider(tt,rt)}static getApiKey(tt){return tt==null?defaultApiKey$2:(tt&&typeof tt!="string"&&logger$b.throwArgumentError("invalid apiKey","apiKey",tt),tt)}static getUrl(tt,rt){let at=null;switch(tt.name){case"homestead":at="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":at="eth-goerli.g.alchemy.com/v2/";break;case"matic":at="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":at="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":at="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":at="arb-goerli.g.alchemy.com/v2/";break;case"optimism":at="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":at="opt-goerli.g.alchemy.com/v2/";break;default:logger$b.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+at+rt,throttleCallback:(st,ot)=>(rt===defaultApiKey$2&&showThrottleMessage(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===defaultApiKey$2}}const logger$a=new Logger(version$7),defaultApiKey$1="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function getHost(it){switch(it){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return logger$a.throwArgumentError("unsupported network","name",it)}class AnkrProvider extends UrlJsonRpcProvider{isCommunityResource(){return this.apiKey===defaultApiKey$1}static getApiKey(tt){return tt==null?defaultApiKey$1:tt}static getUrl(tt,rt){rt==null&&(rt=defaultApiKey$1);const at={allowGzip:!0,url:"https://"+getHost(tt.name)+rt,throttleCallback:(st,ot)=>(rt.apiKey===defaultApiKey$1&&showThrottleMessage(),Promise.resolve(!0))};return rt.projectSecret!=null&&(at.user="",at.password=rt.projectSecret),at}}var __awaiter$2=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$9=new Logger(version$7);class CloudflareProvider extends UrlJsonRpcProvider{static getApiKey(tt){return tt!=null&&logger$9.throwArgumentError("apiKey not supported for cloudflare","apiKey",tt),null}static getUrl(tt,rt){let at=null;switch(tt.name){case"homestead":at="https://cloudflare-eth.com/";break;default:logger$9.throwArgumentError("unsupported network","network",arguments[0])}return at}perform(tt,rt){const at=Object.create(null,{perform:{get:()=>super.perform}});return __awaiter$2(this,void 0,void 0,function*(){return tt==="getBlockNumber"?(yield at.perform.call(this,"getBlock",{blockTag:"latest"})).number:at.perform.call(this,tt,rt)})}}var __awaiter$1=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$8=new Logger(version$7);function getTransactionPostData(it){const tt={};for(let rt in it){if(it[rt]==null)continue;let at=it[rt];rt==="type"&&at===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[rt]?at=hexValue(hexlify(at)):rt==="accessList"?at="["+accessListify(at).map(st=>`{address:"${st.address}",storageKeys:["${st.storageKeys.join('","')}"]}`).join(",")+"]":at=hexlify(at),tt[rt]=at)}return tt}function getResult(it){if(it.status==0&&(it.message==="No records found"||it.message==="No transactions found"))return it.result;if(it.status!=1||typeof it.message!="string"||!it.message.match(/^OK/)){const tt=new Error("invalid response");throw tt.result=JSON.stringify(it),(it.result||"").toLowerCase().indexOf("rate limit")>=0&&(tt.throttleRetry=!0),tt}return it.result}function getJsonResult(it){if(it&&it.status==0&&it.message=="NOTOK"&&(it.result||"").toLowerCase().indexOf("rate limit")>=0){const tt=new Error("throttled response");throw tt.result=JSON.stringify(it),tt.throttleRetry=!0,tt}if(it.jsonrpc!="2.0"){const tt=new Error("invalid response");throw tt.result=JSON.stringify(it),tt}if(it.error){const tt=new Error(it.error.message||"unknown error");throw it.error.code&&(tt.code=it.error.code),it.error.data&&(tt.data=it.error.data),tt}return it.result}function checkLogTag(it){if(it==="pending")throw new Error("pending not supported");return it==="latest"?it:parseInt(it.substring(2),16)}function checkError(it,tt,rt){if(it==="call"&&tt.code===Logger.errors.SERVER_ERROR){const st=tt.error;if(st&&(st.message.match(/reverted/i)||st.message.match(/VM execution error/i))){let ot=st.data;if(ot&&(ot="0x"+ot.replace(/^.*0x/i,"")),isHexString$4(ot))return ot;logger$8.throwError("missing revert data in call exception",Logger.errors.CALL_EXCEPTION,{error:tt,data:"0x"})}}let at=tt.message;throw tt.code===Logger.errors.SERVER_ERROR&&(tt.error&&typeof tt.error.message=="string"?at=tt.error.message:typeof tt.body=="string"?at=tt.body:typeof tt.responseText=="string"&&(at=tt.responseText)),at=(at||"").toLowerCase(),at.match(/insufficient funds/)&&logger$8.throwError("insufficient funds for intrinsic transaction cost",Logger.errors.INSUFFICIENT_FUNDS,{error:tt,method:it,transaction:rt}),at.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&logger$8.throwError("nonce has already been used",Logger.errors.NONCE_EXPIRED,{error:tt,method:it,transaction:rt}),at.match(/another transaction with same nonce/)&&logger$8.throwError("replacement fee too low",Logger.errors.REPLACEMENT_UNDERPRICED,{error:tt,method:it,transaction:rt}),at.match(/execution failed due to an exception|execution reverted/)&&logger$8.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:tt,method:it,transaction:rt}),tt}class EtherscanProvider extends BaseProvider{constructor(tt,rt){super(tt),defineReadOnly(this,"baseUrl",this.getBaseUrl()),defineReadOnly(this,"apiKey",rt||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return logger$8.throwArgumentError("unsupported network","network",this.network.name)}getUrl(tt,rt){const at=Object.keys(rt).reduce((ot,lt)=>{const ut=rt[lt];return ut!=null&&(ot+=`&${lt}=${ut}`),ot},""),st=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${tt}${at}${st}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(tt,rt){return rt.module=tt,rt.apikey=this.apiKey,rt}fetch(tt,rt,at){return __awaiter$1(this,void 0,void 0,function*(){const st=at?this.getPostUrl():this.getUrl(tt,rt),ot=at?this.getPostData(tt,rt):null,lt=tt==="proxy"?getJsonResult:getResult;this.emit("debug",{action:"request",request:st,provider:this});const ut={url:st,throttleSlotInterval:1e3,throttleCallback:(bt,vt)=>(this.isCommunityResource()&&showThrottleMessage(),Promise.resolve(!0))};let ht=null;ot&&(ut.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},ht=Object.keys(ot).map(bt=>`${bt}=${ot[bt]}`).join("&"));const mt=yield fetchJson(ut,ht,lt||getJsonResult);return this.emit("debug",{action:"response",request:st,response:deepCopy(mt),provider:this}),mt})}detectNetwork(){return __awaiter$1(this,void 0,void 0,function*(){return this.network})}perform(tt,rt){const at=Object.create(null,{perform:{get:()=>super.perform}});return __awaiter$1(this,void 0,void 0,function*(){switch(tt){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:rt.address,tag:rt.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:rt.address,tag:rt.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:rt.address,tag:rt.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:rt.address,position:rt.position,tag:rt.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:rt.signedTransaction},!0).catch(st=>checkError("sendTransaction",st,rt.signedTransaction));case"getBlock":if(rt.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:rt.blockTag,boolean:rt.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:rt.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:rt.transactionHash});case"call":{if(rt.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const st=getTransactionPostData(rt.transaction);st.module="proxy",st.action="eth_call";try{return yield this.fetch("proxy",st,!0)}catch(ot){return checkError("call",ot,rt.transaction)}}case"estimateGas":{const st=getTransactionPostData(rt.transaction);st.module="proxy",st.action="eth_estimateGas";try{return yield this.fetch("proxy",st,!0)}catch(ot){return checkError("estimateGas",ot,rt.transaction)}}case"getLogs":{const st={action:"getLogs"};if(rt.filter.fromBlock&&(st.fromBlock=checkLogTag(rt.filter.fromBlock)),rt.filter.toBlock&&(st.toBlock=checkLogTag(rt.filter.toBlock)),rt.filter.address&&(st.address=rt.filter.address),rt.filter.topics&&rt.filter.topics.length>0&&(rt.filter.topics.length>1&&logger$8.throwError("unsupported topic count",Logger.errors.UNSUPPORTED_OPERATION,{topics:rt.filter.topics}),rt.filter.topics.length===1)){const ut=rt.filter.topics[0];(typeof ut!="string"||ut.length!==66)&&logger$8.throwError("unsupported topic format",Logger.errors.UNSUPPORTED_OPERATION,{topic0:ut}),st.topic0=ut}const ot=yield this.fetch("logs",st);let lt={};for(let ut=0;ut<ot.length;ut++){const ht=ot[ut];if(ht.blockHash==null){if(lt[ht.blockNumber]==null){const mt=yield this.getBlock(ht.blockNumber);mt&&(lt[ht.blockNumber]=mt.hash)}ht.blockHash=lt[ht.blockNumber]}}return ot}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return at.perform.call(this,tt,rt)})}getHistory(tt,rt,at){return __awaiter$1(this,void 0,void 0,function*(){const st={action:"txlist",address:yield this.resolveName(tt),startblock:rt==null?0:rt,endblock:at==null?99999999:at,sort:"asc"};return(yield this.fetch("account",st)).map(lt=>{["contractAddress","to"].forEach(function(ht){lt[ht]==""&&delete lt[ht]}),lt.creates==null&&lt.contractAddress!=null&&(lt.creates=lt.contractAddress);const ut=this.formatter.transactionResponse(lt);return lt.timeStamp&&(ut.timestamp=parseInt(lt.timeStamp)),ut})})}isCommunityResource(){return this.apiKey==null}}var __awaiter=globalThis&&globalThis.__awaiter||function(it,tt,rt,at){function st(ot){return ot instanceof rt?ot:new rt(function(lt){lt(ot)})}return new(rt||(rt=Promise))(function(ot,lt){function ut(bt){try{mt(at.next(bt))}catch(vt){lt(vt)}}function ht(bt){try{mt(at.throw(bt))}catch(vt){lt(vt)}}function mt(bt){bt.done?ot(bt.value):st(bt.value).then(ut,ht)}mt((at=at.apply(it,tt||[])).next())})};const logger$7=new Logger(version$7);function now(){return new Date().getTime()}function checkNetworks(it){let tt=null;for(let rt=0;rt<it.length;rt++){const at=it[rt];if(at==null)return null;tt?tt.name===at.name&&tt.chainId===at.chainId&&(tt.ensAddress===at.ensAddress||tt.ensAddress==null&&at.ensAddress==null)||logger$7.throwArgumentError("provider mismatch","networks",it):tt=at}return tt}function median(it,tt){it=it.slice().sort();const rt=Math.floor(it.length/2);if(it.length%2)return it[rt];const at=it[rt-1],st=it[rt];return tt!=null&&Math.abs(at-st)>tt?null:(at+st)/2}function serialize$2(it){if(it===null)return"null";if(typeof it=="number"||typeof it=="boolean")return JSON.stringify(it);if(typeof it=="string")return it;if(BigNumber.isBigNumber(it))return it.toString();if(Array.isArray(it))return JSON.stringify(it.map(tt=>serialize$2(tt)));if(typeof it=="object"){const tt=Object.keys(it);return tt.sort(),"{"+tt.map(rt=>{let at=it[rt];return typeof at=="function"?at="[function]":at=serialize$2(at),JSON.stringify(rt)+":"+at}).join(",")+"}"}throw new Error("unknown value type: "+typeof it)}let nextRid=1;function stall(it){let tt=null,rt=null,at=new Promise(lt=>{tt=function(){rt&&(clearTimeout(rt),rt=null),lt()},rt=setTimeout(tt,it)});const st=lt=>(at=at.then(lt),at);function ot(){return at}return{cancel:tt,getPromise:ot,wait:st}}const ForwardErrors=[Logger.errors.CALL_EXCEPTION,Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED,Logger.errors.UNPREDICTABLE_GAS_LIMIT],ForwardProperties=["address","args","errorArgs","errorSignature","method","transaction"];function exposeDebugConfig(it,tt){const rt={weight:it.weight};return Object.defineProperty(rt,"provider",{get:()=>it.provider}),it.start&&(rt.start=it.start),tt&&(rt.duration=tt-it.start),it.done&&(it.error?rt.error=it.error:rt.result=it.result||null),rt}function normalizedTally(it,tt){return function(rt){const at={};rt.forEach(ot=>{const lt=it(ot.result);at[lt]||(at[lt]={count:0,result:ot.result}),at[lt].count++});const st=Object.keys(at);for(let ot=0;ot<st.length;ot++){const lt=at[st[ot]];if(lt.count>=tt)return lt.result}}}function getProcessFunc(it,tt,rt){let at=serialize$2;switch(tt){case"getBlockNumber":return function(st){const ot=st.map(ut=>ut.result);let lt=median(st.map(ut=>ut.result),2);if(lt!=null)return lt=Math.ceil(lt),ot.indexOf(lt+1)>=0&&lt++,lt>=it._highestBlockNumber&&(it._highestBlockNumber=lt),it._highestBlockNumber};case"getGasPrice":return function(st){const ot=st.map(lt=>lt.result);return ot.sort(),ot[Math.floor(ot.length/2)]};case"getEtherPrice":return function(st){return median(st.map(ot=>ot.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":at=function(st){return st==null?null:(st=shallowCopy(st),st.confirmations=-1,serialize$2(st))};break;case"getBlock":rt.includeTransactions?at=function(st){return st==null?null:(st=shallowCopy(st),st.transactions=st.transactions.map(ot=>(ot=shallowCopy(ot),ot.confirmations=-1,ot)),serialize$2(st))}:at=function(st){return st==null?null:serialize$2(st)};break;default:throw new Error("unknown method: "+tt)}return normalizedTally(at,it.quorum)}function waitForSync(it,tt){return __awaiter(this,void 0,void 0,function*(){const rt=it.provider;return rt.blockNumber!=null&&rt.blockNumber>=tt||tt===-1?rt:poll(()=>new Promise((at,st)=>{setTimeout(function(){return rt.blockNumber>=tt?at(rt):it.cancelled?at(null):at(void 0)},0)}),{oncePoll:rt})})}function getRunner(it,tt,rt,at){return __awaiter(this,void 0,void 0,function*(){let st=it.provider;switch(rt){case"getBlockNumber":case"getGasPrice":return st[rt]();case"getEtherPrice":if(st.getEtherPrice)return st.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return at.blockTag&&isHexString$4(at.blockTag)&&(st=yield waitForSync(it,tt)),st[rt](at.address,at.blockTag||"latest");case"getStorageAt":return at.blockTag&&isHexString$4(at.blockTag)&&(st=yield waitForSync(it,tt)),st.getStorageAt(at.address,at.position,at.blockTag||"latest");case"getBlock":return at.blockTag&&isHexString$4(at.blockTag)&&(st=yield waitForSync(it,tt)),st[at.includeTransactions?"getBlockWithTransactions":"getBlock"](at.blockTag||at.blockHash);case"call":case"estimateGas":return at.blockTag&&isHexString$4(at.blockTag)&&(st=yield waitForSync(it,tt)),rt==="call"&&at.blockTag?st[rt](at.transaction,at.blockTag):st[rt](at.transaction);case"getTransaction":case"getTransactionReceipt":return st[rt](at.transactionHash);case"getLogs":{let ot=at.filter;return(ot.fromBlock&&isHexString$4(ot.fromBlock)||ot.toBlock&&isHexString$4(ot.toBlock))&&(st=yield waitForSync(it,tt)),st.getLogs(ot)}}return logger$7.throwError("unknown method error",Logger.errors.UNKNOWN_ERROR,{method:rt,params:at})})}class FallbackProvider extends BaseProvider{constructor(tt,rt){tt.length===0&&logger$7.throwArgumentError("missing providers","providers",tt);const at=tt.map((lt,ut)=>{if(Provider$1.isProvider(lt)){const bt=isCommunityResource(lt)?2e3:750;return Object.freeze({provider:lt,weight:1,stallTimeout:bt,priority:1})}const ht=shallowCopy(lt);ht.priority==null&&(ht.priority=1),ht.stallTimeout==null&&(ht.stallTimeout=isCommunityResource(lt)?2e3:750),ht.weight==null&&(ht.weight=1);const mt=ht.weight;return(mt%1||mt>512||mt<1)&&logger$7.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${ut}].weight`,mt),Object.freeze(ht)}),st=at.reduce((lt,ut)=>lt+ut.weight,0);rt==null?rt=st/2:rt>st&&logger$7.throwArgumentError("quorum will always fail; larger than total weight","quorum",rt);let ot=checkNetworks(at.map(lt=>lt.provider.network));ot==null&&(ot=new Promise((lt,ut)=>{setTimeout(()=>{this.detectNetwork().then(lt,ut)},0)})),super(ot),defineReadOnly(this,"providerConfigs",Object.freeze(at)),defineReadOnly(this,"quorum",rt),this._highestBlockNumber=-1}detectNetwork(){return __awaiter(this,void 0,void 0,function*(){const tt=yield Promise.all(this.providerConfigs.map(rt=>rt.provider.getNetwork()));return checkNetworks(tt)})}perform(tt,rt){return __awaiter(this,void 0,void 0,function*(){if(tt==="sendTransaction"){const ht=yield Promise.all(this.providerConfigs.map(mt=>mt.provider.sendTransaction(rt.signedTransaction).then(bt=>bt.hash,bt=>bt)));for(let mt=0;mt<ht.length;mt++){const bt=ht[mt];if(typeof bt=="string")return bt}throw ht[0]}this._highestBlockNumber===-1&&tt!=="getBlockNumber"&&(yield this.getBlockNumber());const at=getProcessFunc(this,tt,rt),st=shuffled(this.providerConfigs.map(shallowCopy));st.sort((ht,mt)=>ht.priority-mt.priority);const ot=this._highestBlockNumber;let lt=0,ut=!0;for(;;){const ht=now();let mt=st.filter(xt=>xt.runner&&ht-xt.start<xt.stallTimeout).reduce((xt,Et)=>xt+Et.weight,0);for(;mt<this.quorum&&lt<st.length;){const xt=st[lt++],Et=nextRid++;xt.start=now(),xt.staller=stall(xt.stallTimeout),xt.staller.wait(()=>{xt.staller=null}),xt.runner=getRunner(xt,ot,tt,rt).then(Tt=>{xt.done=!0,xt.result=Tt,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:Et,backend:exposeDebugConfig(xt,now()),request:{method:tt,params:deepCopy(rt)},provider:this})},Tt=>{xt.done=!0,xt.error=Tt,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:Et,backend:exposeDebugConfig(xt,now()),request:{method:tt,params:deepCopy(rt)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:Et,backend:exposeDebugConfig(xt,null),request:{method:tt,params:deepCopy(rt)},provider:this}),mt+=xt.weight}const bt=[];st.forEach(xt=>{xt.done||!xt.runner||(bt.push(xt.runner),xt.staller&&bt.push(xt.staller.getPromise()))}),bt.length&&(yield Promise.race(bt));const vt=st.filter(xt=>xt.done&&xt.error==null);if(vt.length>=this.quorum){const xt=at(vt);if(xt!==void 0)return st.forEach(Et=>{Et.staller&&Et.staller.cancel(),Et.cancelled=!0}),xt;ut||(yield stall(100).getPromise()),ut=!1}const At=st.reduce((xt,Et)=>{if(!Et.done||Et.error==null)return xt;const Tt=Et.error.code;return ForwardErrors.indexOf(Tt)>=0&&(xt[Tt]||(xt[Tt]={error:Et.error,weight:0}),xt[Tt].weight+=Et.weight),xt},{});if(Object.keys(At).forEach(xt=>{const Et=At[xt];if(Et.weight<this.quorum)return;st.forEach(Ct=>{Ct.staller&&Ct.staller.cancel(),Ct.cancelled=!0});const Tt=Et.error,wt={};ForwardProperties.forEach(Ct=>{Tt[Ct]!=null&&(wt[Ct]=Tt[Ct])}),logger$7.throwError(Tt.reason||Tt.message,xt,wt)}),st.filter(xt=>!xt.done).length===0)break}return st.forEach(ht=>{ht.staller&&ht.staller.cancel(),ht.cancelled=!0}),logger$7.throwError("failed to meet quorum",Logger.errors.SERVER_ERROR,{method:tt,params:rt,results:st.map(ht=>exposeDebugConfig(ht)),provider:this})})}}const IpcProvider=null,logger$6=new Logger(version$7),defaultProjectId="84842078b09946638c03157f83405213";class InfuraWebSocketProvider extends WebSocketProvider{constructor(tt,rt){const at=new InfuraProvider(tt,rt),st=at.connection;st.password&&logger$6.throwError("INFURA WebSocket project secrets unsupported",Logger.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const ot=st.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(ot,tt),defineReadOnly(this,"apiKey",at.projectId),defineReadOnly(this,"projectId",at.projectId),defineReadOnly(this,"projectSecret",at.projectSecret)}isCommunityResource(){return this.projectId===defaultProjectId}}class InfuraProvider extends UrlJsonRpcProvider{static getWebSocketProvider(tt,rt){return new InfuraWebSocketProvider(tt,rt)}static getApiKey(tt){const rt={apiKey:defaultProjectId,projectId:defaultProjectId,projectSecret:null};return tt==null||(typeof tt=="string"?rt.projectId=tt:tt.projectSecret!=null?(logger$6.assertArgument(typeof tt.projectId=="string","projectSecret requires a projectId","projectId",tt.projectId),logger$6.assertArgument(typeof tt.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),rt.projectId=tt.projectId,rt.projectSecret=tt.projectSecret):tt.projectId&&(rt.projectId=tt.projectId),rt.apiKey=rt.projectId),rt}static getUrl(tt,rt){let at=null;switch(tt?tt.name:"unknown"){case"homestead":at="mainnet.infura.io";break;case"goerli":at="goerli.infura.io";break;case"sepolia":at="sepolia.infura.io";break;case"matic":at="polygon-mainnet.infura.io";break;case"maticmum":at="polygon-mumbai.infura.io";break;case"optimism":at="optimism-mainnet.infura.io";break;case"optimism-goerli":at="optimism-goerli.infura.io";break;case"arbitrum":at="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":at="arbitrum-goerli.infura.io";break;default:logger$6.throwError("unsupported network",Logger.errors.INVALID_ARGUMENT,{argument:"network",value:tt})}const st={allowGzip:!0,url:"https://"+at+"/v3/"+rt.projectId,throttleCallback:(ot,lt)=>(rt.projectId===defaultProjectId&&showThrottleMessage(),Promise.resolve(!0))};return rt.projectSecret!=null&&(st.user="",st.password=rt.projectSecret),st}isCommunityResource(){return this.projectId===defaultProjectId}}class JsonRpcBatchProvider extends JsonRpcProvider$1{send(tt,rt){const at={method:tt,params:rt,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const st={request:at,resolve:null,reject:null},ot=new Promise((lt,ut)=>{st.resolve=lt,st.reject=ut});return this._pendingBatch.push(st),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const lt=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const ut=lt.map(ht=>ht.request);return this.emit("debug",{action:"requestBatch",request:deepCopy(ut),provider:this}),fetchJson(this.connection,JSON.stringify(ut)).then(ht=>{this.emit("debug",{action:"response",request:ut,response:ht,provider:this}),lt.forEach((mt,bt)=>{const vt=ht[bt];if(vt.error){const At=new Error(vt.error.message);At.code=vt.error.code,At.data=vt.error.data,mt.reject(At)}else mt.resolve(vt.result)})},ht=>{this.emit("debug",{action:"response",error:ht,request:ut,provider:this}),lt.forEach(mt=>{mt.reject(ht)})})},10)),ot}}const logger$5=new Logger(version$7),defaultApiKey="ETHERS_JS_SHARED";class NodesmithProvider extends UrlJsonRpcProvider{static getApiKey(tt){return tt&&typeof tt!="string"&&logger$5.throwArgumentError("invalid apiKey","apiKey",tt),tt||defaultApiKey}static getUrl(tt,rt){logger$5.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let at=null;switch(tt.name){case"homestead":at="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":at="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":at="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":at="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":at="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:logger$5.throwArgumentError("unsupported network","network",arguments[0])}return at+"?apiKey="+rt}}const logger$4=new Logger(version$7),defaultApplicationId="62e1ad51b37b8e00394bda3b";class PocketProvider extends UrlJsonRpcProvider{static getApiKey(tt){const rt={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return tt==null?rt.applicationId=defaultApplicationId:typeof tt=="string"?rt.applicationId=tt:tt.applicationSecretKey!=null?(rt.applicationId=tt.applicationId,rt.applicationSecretKey=tt.applicationSecretKey):tt.applicationId?rt.applicationId=tt.applicationId:logger$4.throwArgumentError("unsupported PocketProvider apiKey","apiKey",tt),rt}static getUrl(tt,rt){let at=null;switch(tt?tt.name:"unknown"){case"goerli":at="eth-goerli.gateway.pokt.network";break;case"homestead":at="eth-mainnet.gateway.pokt.network";break;case"kovan":at="poa-kovan.gateway.pokt.network";break;case"matic":at="poly-mainnet.gateway.pokt.network";break;case"maticmum":at="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":at="eth-rinkeby.gateway.pokt.network";break;case"ropsten":at="eth-ropsten.gateway.pokt.network";break;default:logger$4.throwError("unsupported network",Logger.errors.INVALID_ARGUMENT,{argument:"network",value:tt})}const st=`https://${at}/v1/lb/${rt.applicationId}`,ot={headers:{},url:st};return rt.applicationSecretKey!=null&&(ot.user="",ot.password=rt.applicationSecretKey),ot}isCommunityResource(){return this.applicationId===defaultApplicationId}}const logger$3=new Logger(version$7);let _nextId=1;function buildWeb3LegacyFetcher(it,tt){const rt="Web3LegacyFetcher";return function(at,st){const ot={method:at,params:st,id:_nextId++,jsonrpc:"2.0"};return new Promise((lt,ut)=>{this.emit("debug",{action:"request",fetcher:rt,request:deepCopy(ot),provider:this}),tt(ot,(ht,mt)=>{if(ht)return this.emit("debug",{action:"response",fetcher:rt,error:ht,request:ot,provider:this}),ut(ht);if(this.emit("debug",{action:"response",fetcher:rt,request:ot,response:mt,provider:this}),mt.error){const bt=new Error(mt.error.message);return bt.code=mt.error.code,bt.data=mt.error.data,ut(bt)}lt(mt.result)})})}}function buildEip1193Fetcher(it){return function(tt,rt){rt==null&&(rt=[]);const at={method:tt,params:rt};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:deepCopy(at),provider:this}),it.request(at).then(st=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:at,response:st,provider:this}),st),st=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:at,error:st,provider:this}),st})}}class Web3Provider extends JsonRpcProvider$1{constructor(tt,rt){tt==null&&logger$3.throwArgumentError("missing provider","provider",tt);let at=null,st=null,ot=null;typeof tt=="function"?(at="unknown:",st=tt):(at=tt.host||tt.path||"",!at&&tt.isMetaMask&&(at="metamask"),ot=tt,tt.request?(at===""&&(at="eip-1193:"),st=buildEip1193Fetcher(tt)):tt.sendAsync?st=buildWeb3LegacyFetcher(tt,tt.sendAsync.bind(tt)):tt.send?st=buildWeb3LegacyFetcher(tt,tt.send.bind(tt)):logger$3.throwArgumentError("unsupported provider","provider",tt),at||(at="unknown:")),super(at,rt),defineReadOnly(this,"jsonRpcFetchFunc",st),defineReadOnly(this,"provider",ot)}send(tt,rt){return this.jsonRpcFetchFunc(tt,rt)}}const logger$2=new Logger(version$7);function getDefaultProvider(it,tt){if(it==null&&(it="homestead"),typeof it=="string"){const at=it.match(/^(ws|http)s?:/i);if(at)switch(at[1].toLowerCase()){case"http":case"https":return new JsonRpcProvider$1(it);case"ws":case"wss":return new WebSocketProvider(it);default:logger$2.throwArgumentError("unsupported URL scheme","network",it)}}const rt=getNetwork(it);return(!rt||!rt._defaultProvider)&&logger$2.throwError("unsupported getDefaultProvider network",Logger.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:it}),rt._defaultProvider({FallbackProvider,AlchemyProvider,AnkrProvider,CloudflareProvider,EtherscanProvider,InfuraProvider,JsonRpcProvider:JsonRpcProvider$1,NodesmithProvider,PocketProvider,Web3Provider,IpcProvider},tt)}const version$6="solidity/5.7.0",regexBytes=new RegExp("^bytes([0-9]+)$"),regexNumber=new RegExp("^(u?int)([0-9]*)$"),regexArray=new RegExp("^(.*)\\[([0-9]*)\\]$"),Zeros="0000000000000000000000000000000000000000000000000000000000000000",logger$1=new Logger(version$6);function _pack(it,tt,rt){switch(it){case"address":return rt?zeroPad(tt,32):arrayify(tt);case"string":return toUtf8Bytes(tt);case"bytes":return arrayify(tt);case"bool":return tt=tt?"0x01":"0x00",rt?zeroPad(tt,32):arrayify(tt)}let at=it.match(regexNumber);if(at){let st=parseInt(at[2]||"256");return(at[2]&&String(st)!==at[2]||st%8!==0||st===0||st>256)&&logger$1.throwArgumentError("invalid number type","type",it),rt&&(st=256),tt=BigNumber.from(tt).toTwos(st),zeroPad(tt,st/8)}if(at=it.match(regexBytes),at){const st=parseInt(at[1]);return(String(st)!==at[1]||st===0||st>32)&&logger$1.throwArgumentError("invalid bytes type","type",it),arrayify(tt).byteLength!==st&&logger$1.throwArgumentError(`invalid value for ${it}`,"value",tt),rt?arrayify((tt+Zeros).substring(0,66)):tt}if(at=it.match(regexArray),at&&Array.isArray(tt)){const st=at[1];parseInt(at[2]||String(tt.length))!=tt.length&&logger$1.throwArgumentError(`invalid array length for ${it}`,"value",tt);const lt=[];return tt.forEach(function(ut){lt.push(_pack(st,ut,!0))}),concat$6(lt)}return logger$1.throwArgumentError("invalid type","type",it)}function pack(it,tt){it.length!=tt.length&&logger$1.throwArgumentError("wrong number of values; expected ${ types.length }","values",tt);const rt=[];return it.forEach(function(at,st){rt.push(_pack(at,tt[st]))}),hexlify(concat$6(rt))}function keccak256(it,tt){return keccak256$1(pack(it,tt))}function sha256$3(it,tt){return sha256$4(pack(it,tt))}const lib_esm$1=Object.freeze(Object.defineProperty({__proto__:null,pack,keccak256,sha256:sha256$3},Symbol.toStringTag,{value:"Module"})),version$5="units/5.7.0",logger=new Logger(version$5),names$4=["wei","kwei","mwei","gwei","szabo","finney","ether"];function commify(it){const tt=String(it).split(".");(tt.length>2||!tt[0].match(/^-?[0-9]*$/)||tt[1]&&!tt[1].match(/^[0-9]*$/)||it==="."||it==="-.")&&logger.throwArgumentError("invalid value","value",it);let rt=tt[0],at="";for(rt.substring(0,1)==="-"&&(at="-",rt=rt.substring(1));rt.substring(0,1)==="0";)rt=rt.substring(1);rt===""&&(rt="0");let st="";for(tt.length===2&&(st="."+(tt[1]||"0"));st.length>2&&st[st.length-1]==="0";)st=st.substring(0,st.length-1);const ot=[];for(;rt.length;)if(rt.length<=3){ot.unshift(rt);break}else{const lt=rt.length-3;ot.unshift(rt.substring(lt)),rt=rt.substring(0,lt)}return at+ot.join(",")+st}function formatUnits(it,tt){if(typeof tt=="string"){const rt=names$4.indexOf(tt);rt!==-1&&(tt=3*rt)}return formatFixed(it,tt!=null?tt:18)}function parseUnits(it,tt){if(typeof it!="string"&&logger.throwArgumentError("value must be a string","value",it),typeof tt=="string"){const rt=names$4.indexOf(tt);rt!==-1&&(tt=3*rt)}return parseFixed(it,tt!=null?tt:18)}function formatEther(it){return formatUnits(it,18)}function parseEther(it){return parseUnits(it,18)}const lib_esm=Object.freeze(Object.defineProperty({__proto__:null,commify,formatUnits,parseUnits,formatEther,parseEther},Symbol.toStringTag,{value:"Module"})),version$4="ethers/5.7.2";new Logger(version$4);var util$b;(function(it){it.assertEqual=st=>st;function tt(st){}it.assertIs=tt;function rt(st){throw new Error}it.assertNever=rt,it.arrayToEnum=st=>{const ot={};for(const lt of st)ot[lt]=lt;return ot},it.getValidEnumValues=st=>{const ot=it.objectKeys(st).filter(ut=>typeof st[st[ut]]!="number"),lt={};for(const ut of ot)lt[ut]=st[ut];return it.objectValues(lt)},it.objectValues=st=>it.objectKeys(st).map(function(ot){return st[ot]}),it.objectKeys=typeof Object.keys=="function"?st=>Object.keys(st):st=>{const ot=[];for(const lt in st)Object.prototype.hasOwnProperty.call(st,lt)&&ot.push(lt);return ot},it.find=(st,ot)=>{for(const lt of st)if(ot(lt))return lt},it.isInteger=typeof Number.isInteger=="function"?st=>Number.isInteger(st):st=>typeof st=="number"&&isFinite(st)&&Math.floor(st)===st;function at(st,ot=" | "){return st.map(lt=>typeof lt=="string"?`'${lt}'`:lt).join(ot)}it.joinValues=at,it.jsonStringifyReplacer=(st,ot)=>typeof ot=="bigint"?ot.toString():ot})(util$b||(util$b={}));var objectUtil;(function(it){it.mergeShapes=(tt,rt)=>({...tt,...rt})})(objectUtil||(objectUtil={}));const ZodParsedType=util$b.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=it=>{switch(typeof it){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(it)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(it)?ZodParsedType.array:it===null?ZodParsedType.null:it.then&&typeof it.then=="function"&&it.catch&&typeof it.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&it instanceof Map?ZodParsedType.map:typeof Set<"u"&&it instanceof Set?ZodParsedType.set:typeof Date<"u"&&it instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util$b.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=it=>JSON.stringify(it,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(tt){super(),this.issues=[],this.addIssue=at=>{this.issues=[...this.issues,at]},this.addIssues=(at=[])=>{this.issues=[...this.issues,...at]};const rt=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,rt):this.__proto__=rt,this.name="ZodError",this.issues=tt}get errors(){return this.issues}format(tt){const rt=tt||function(ot){return ot.message},at={_errors:[]},st=ot=>{for(const lt of ot.issues)if(lt.code==="invalid_union")lt.unionErrors.map(st);else if(lt.code==="invalid_return_type")st(lt.returnTypeError);else if(lt.code==="invalid_arguments")st(lt.argumentsError);else if(lt.path.length===0)at._errors.push(rt(lt));else{let ut=at,ht=0;for(;ht<lt.path.length;){const mt=lt.path[ht];ht===lt.path.length-1?(ut[mt]=ut[mt]||{_errors:[]},ut[mt]._errors.push(rt(lt))):ut[mt]=ut[mt]||{_errors:[]},ut=ut[mt],ht++}}};return st(this),at}toString(){return this.message}get message(){return JSON.stringify(this.issues,util$b.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(tt=rt=>rt.message){const rt={},at=[];for(const st of this.issues)st.path.length>0?(rt[st.path[0]]=rt[st.path[0]]||[],rt[st.path[0]].push(tt(st))):at.push(tt(st));return{formErrors:at,fieldErrors:rt}}get formErrors(){return this.flatten()}}ZodError.create=it=>new ZodError(it);const errorMap=(it,tt)=>{let rt;switch(it.code){case ZodIssueCode.invalid_type:it.received===ZodParsedType.undefined?rt="Required":rt=`Expected ${it.expected}, received ${it.received}`;break;case ZodIssueCode.invalid_literal:rt=`Invalid literal value, expected ${JSON.stringify(it.expected,util$b.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:rt=`Unrecognized key(s) in object: ${util$b.joinValues(it.keys,", ")}`;break;case ZodIssueCode.invalid_union:rt="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:rt=`Invalid discriminator value. Expected ${util$b.joinValues(it.options)}`;break;case ZodIssueCode.invalid_enum_value:rt=`Invalid enum value. Expected ${util$b.joinValues(it.options)}, received '${it.received}'`;break;case ZodIssueCode.invalid_arguments:rt="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:rt="Invalid function return type";break;case ZodIssueCode.invalid_date:rt="Invalid date";break;case ZodIssueCode.invalid_string:typeof it.validation=="object"?"includes"in it.validation?(rt=`Invalid input: must include "${it.validation.includes}"`,typeof it.validation.position=="number"&&(rt=`${rt} at one or more positions greater than or equal to ${it.validation.position}`)):"startsWith"in it.validation?rt=`Invalid input: must start with "${it.validation.startsWith}"`:"endsWith"in it.validation?rt=`Invalid input: must end with "${it.validation.endsWith}"`:util$b.assertNever(it.validation):it.validation!=="regex"?rt=`Invalid ${it.validation}`:rt="Invalid";break;case ZodIssueCode.too_small:it.type==="array"?rt=`Array must contain ${it.exact?"exactly":it.inclusive?"at least":"more than"} ${it.minimum} element(s)`:it.type==="string"?rt=`String must contain ${it.exact?"exactly":it.inclusive?"at least":"over"} ${it.minimum} character(s)`:it.type==="number"?rt=`Number must be ${it.exact?"exactly equal to ":it.inclusive?"greater than or equal to ":"greater than "}${it.minimum}`:it.type==="date"?rt=`Date must be ${it.exact?"exactly equal to ":it.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(it.minimum))}`:rt="Invalid input";break;case ZodIssueCode.too_big:it.type==="array"?rt=`Array must contain ${it.exact?"exactly":it.inclusive?"at most":"less than"} ${it.maximum} element(s)`:it.type==="string"?rt=`String must contain ${it.exact?"exactly":it.inclusive?"at most":"under"} ${it.maximum} character(s)`:it.type==="number"?rt=`Number must be ${it.exact?"exactly":it.inclusive?"less than or equal to":"less than"} ${it.maximum}`:it.type==="bigint"?rt=`BigInt must be ${it.exact?"exactly":it.inclusive?"less than or equal to":"less than"} ${it.maximum}`:it.type==="date"?rt=`Date must be ${it.exact?"exactly":it.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(it.maximum))}`:rt="Invalid input";break;case ZodIssueCode.custom:rt="Invalid input";break;case ZodIssueCode.invalid_intersection_types:rt="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:rt=`Number must be a multiple of ${it.multipleOf}`;break;case ZodIssueCode.not_finite:rt="Number must be finite";break;default:rt=tt.defaultError,util$b.assertNever(it)}return{message:rt}};let overrideErrorMap=errorMap;function setErrorMap(it){overrideErrorMap=it}function getErrorMap(){return overrideErrorMap}const makeIssue=it=>{const{data:tt,path:rt,errorMaps:at,issueData:st}=it,ot=[...rt,...st.path||[]],lt={...st,path:ot};let ut="";const ht=at.filter(mt=>!!mt).slice().reverse();for(const mt of ht)ut=mt(lt,{data:tt,defaultError:ut}).message;return{...st,path:ot,message:st.message||ut}},EMPTY_PATH=[];function addIssueToContext(it,tt){const rt=makeIssue({issueData:tt,data:it.data,path:it.path,errorMaps:[it.common.contextualErrorMap,it.schemaErrorMap,getErrorMap(),errorMap].filter(at=>!!at)});it.common.issues.push(rt)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(tt,rt){const at=[];for(const st of rt){if(st.status==="aborted")return INVALID;st.status==="dirty"&&tt.dirty(),at.push(st.value)}return{status:tt.value,value:at}}static async mergeObjectAsync(tt,rt){const at=[];for(const st of rt)at.push({key:await st.key,value:await st.value});return ParseStatus.mergeObjectSync(tt,at)}static mergeObjectSync(tt,rt){const at={};for(const st of rt){const{key:ot,value:lt}=st;if(ot.status==="aborted"||lt.status==="aborted")return INVALID;ot.status==="dirty"&&tt.dirty(),lt.status==="dirty"&&tt.dirty(),(typeof lt.value<"u"||st.alwaysSet)&&(at[ot.value]=lt.value)}return{status:tt.value,value:at}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=it=>({status:"dirty",value:it}),OK=it=>({status:"valid",value:it}),isAborted=it=>it.status==="aborted",isDirty=it=>it.status==="dirty",isValid=it=>it.status==="valid",isAsync=it=>typeof Promise<"u"&&it instanceof Promise;var errorUtil;(function(it){it.errToObj=tt=>typeof tt=="string"?{message:tt}:tt||{},it.toString=tt=>typeof tt=="string"?tt:tt==null?void 0:tt.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(tt,rt,at,st){this._cachedPath=[],this.parent=tt,this.data=rt,this._path=at,this._key=st}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(it,tt)=>{if(isValid(tt))return{success:!0,data:tt.value};if(!it.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const rt=new ZodError(it.common.issues);return this._error=rt,this._error}}};function processCreateParams(it){if(!it)return{};const{errorMap:tt,invalid_type_error:rt,required_error:at,description:st}=it;if(tt&&(rt||at))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return tt?{errorMap:tt,description:st}:{errorMap:(lt,ut)=>lt.code!=="invalid_type"?{message:ut.defaultError}:typeof ut.data>"u"?{message:at!=null?at:ut.defaultError}:{message:rt!=null?rt:ut.defaultError},description:st}}class ZodType{constructor(tt){this.spa=this.safeParseAsync,this._def=tt,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(tt){return getParsedType(tt.data)}_getOrReturnCtx(tt,rt){return rt||{common:tt.parent.common,data:tt.data,parsedType:getParsedType(tt.data),schemaErrorMap:this._def.errorMap,path:tt.path,parent:tt.parent}}_processInputParams(tt){return{status:new ParseStatus,ctx:{common:tt.parent.common,data:tt.data,parsedType:getParsedType(tt.data),schemaErrorMap:this._def.errorMap,path:tt.path,parent:tt.parent}}}_parseSync(tt){const rt=this._parse(tt);if(isAsync(rt))throw new Error("Synchronous parse encountered promise.");return rt}_parseAsync(tt){const rt=this._parse(tt);return Promise.resolve(rt)}parse(tt,rt){const at=this.safeParse(tt,rt);if(at.success)return at.data;throw at.error}safeParse(tt,rt){var at;const st={common:{issues:[],async:(at=rt==null?void 0:rt.async)!==null&&at!==void 0?at:!1,contextualErrorMap:rt==null?void 0:rt.errorMap},path:(rt==null?void 0:rt.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:tt,parsedType:getParsedType(tt)},ot=this._parseSync({data:tt,path:st.path,parent:st});return handleResult(st,ot)}async parseAsync(tt,rt){const at=await this.safeParseAsync(tt,rt);if(at.success)return at.data;throw at.error}async safeParseAsync(tt,rt){const at={common:{issues:[],contextualErrorMap:rt==null?void 0:rt.errorMap,async:!0},path:(rt==null?void 0:rt.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:tt,parsedType:getParsedType(tt)},st=this._parse({data:tt,path:at.path,parent:at}),ot=await(isAsync(st)?st:Promise.resolve(st));return handleResult(at,ot)}refine(tt,rt){const at=st=>typeof rt=="string"||typeof rt>"u"?{message:rt}:typeof rt=="function"?rt(st):rt;return this._refinement((st,ot)=>{const lt=tt(st),ut=()=>ot.addIssue({code:ZodIssueCode.custom,...at(st)});return typeof Promise<"u"&&lt instanceof Promise?lt.then(ht=>ht?!0:(ut(),!1)):lt?!0:(ut(),!1)})}refinement(tt,rt){return this._refinement((at,st)=>tt(at)?!0:(st.addIssue(typeof rt=="function"?rt(at,st):rt),!1))}_refinement(tt){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:tt}})}superRefine(tt){return this._refinement(tt)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(tt){return ZodUnion.create([this,tt],this._def)}and(tt){return ZodIntersection.create(this,tt,this._def)}transform(tt){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:tt}})}default(tt){const rt=typeof tt=="function"?tt:()=>tt;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:rt,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(tt){const rt=typeof tt=="function"?tt:()=>tt;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:rt,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(tt){const rt=this.constructor;return new rt({...this._def,description:tt})}pipe(tt){return ZodPipeline.create(this,tt)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[a-z][a-z0-9]*$/,ulidRegex=/[0-9A-HJKMNP-TV-Z]{26}/,uuidRegex=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,emailRegex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,emojiRegex=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,ipv4Regex=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,datetimeRegex=it=>it.precision?it.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${it.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${it.precision}}Z$`):it.precision===0?it.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):it.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(it,tt){return!!((tt==="v4"||!tt)&&ipv4Regex.test(it)||(tt==="v6"||!tt)&&ipv6Regex.test(it))}class ZodString extends ZodType{constructor(){super(...arguments),this._regex=(tt,rt,at)=>this.refinement(st=>tt.test(st),{validation:rt,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(at)}),this.nonempty=tt=>this.min(1,errorUtil.errToObj(tt)),this.trim=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(tt){if(this._def.coerce&&(tt.data=String(tt.data)),this._getType(tt)!==ZodParsedType.string){const ot=this._getOrReturnCtx(tt);return addIssueToContext(ot,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:ot.parsedType}),INVALID}const at=new ParseStatus;let st;for(const ot of this._def.checks)if(ot.kind==="min")tt.data.length<ot.value&&(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{code:ZodIssueCode.too_small,minimum:ot.value,type:"string",inclusive:!0,exact:!1,message:ot.message}),at.dirty());else if(ot.kind==="max")tt.data.length>ot.value&&(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{code:ZodIssueCode.too_big,maximum:ot.value,type:"string",inclusive:!0,exact:!1,message:ot.message}),at.dirty());else if(ot.kind==="length"){const lt=tt.data.length>ot.value,ut=tt.data.length<ot.value;(lt||ut)&&(st=this._getOrReturnCtx(tt,st),lt?addIssueToContext(st,{code:ZodIssueCode.too_big,maximum:ot.value,type:"string",inclusive:!0,exact:!0,message:ot.message}):ut&&addIssueToContext(st,{code:ZodIssueCode.too_small,minimum:ot.value,type:"string",inclusive:!0,exact:!0,message:ot.message}),at.dirty())}else if(ot.kind==="email")emailRegex.test(tt.data)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"email",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty());else if(ot.kind==="emoji")emojiRegex.test(tt.data)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"emoji",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty());else if(ot.kind==="uuid")uuidRegex.test(tt.data)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"uuid",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty());else if(ot.kind==="cuid")cuidRegex.test(tt.data)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"cuid",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty());else if(ot.kind==="cuid2")cuid2Regex.test(tt.data)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty());else if(ot.kind==="ulid")ulidRegex.test(tt.data)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"ulid",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty());else if(ot.kind==="url")try{new URL(tt.data)}catch{st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"url",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty()}else ot.kind==="regex"?(ot.regex.lastIndex=0,ot.regex.test(tt.data)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"regex",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty())):ot.kind==="trim"?tt.data=tt.data.trim():ot.kind==="includes"?tt.data.includes(ot.value,ot.position)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{code:ZodIssueCode.invalid_string,validation:{includes:ot.value,position:ot.position},message:ot.message}),at.dirty()):ot.kind==="toLowerCase"?tt.data=tt.data.toLowerCase():ot.kind==="toUpperCase"?tt.data=tt.data.toUpperCase():ot.kind==="startsWith"?tt.data.startsWith(ot.value)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{code:ZodIssueCode.invalid_string,validation:{startsWith:ot.value},message:ot.message}),at.dirty()):ot.kind==="endsWith"?tt.data.endsWith(ot.value)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{code:ZodIssueCode.invalid_string,validation:{endsWith:ot.value},message:ot.message}),at.dirty()):ot.kind==="datetime"?datetimeRegex(ot).test(tt.data)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{code:ZodIssueCode.invalid_string,validation:"datetime",message:ot.message}),at.dirty()):ot.kind==="ip"?isValidIP(tt.data,ot.version)||(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{validation:"ip",code:ZodIssueCode.invalid_string,message:ot.message}),at.dirty()):util$b.assertNever(ot);return{status:at.value,value:tt.data}}_addCheck(tt){return new ZodString({...this._def,checks:[...this._def.checks,tt]})}email(tt){return this._addCheck({kind:"email",...errorUtil.errToObj(tt)})}url(tt){return this._addCheck({kind:"url",...errorUtil.errToObj(tt)})}emoji(tt){return this._addCheck({kind:"emoji",...errorUtil.errToObj(tt)})}uuid(tt){return this._addCheck({kind:"uuid",...errorUtil.errToObj(tt)})}cuid(tt){return this._addCheck({kind:"cuid",...errorUtil.errToObj(tt)})}cuid2(tt){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(tt)})}ulid(tt){return this._addCheck({kind:"ulid",...errorUtil.errToObj(tt)})}ip(tt){return this._addCheck({kind:"ip",...errorUtil.errToObj(tt)})}datetime(tt){var rt;return typeof tt=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:tt}):this._addCheck({kind:"datetime",precision:typeof(tt==null?void 0:tt.precision)>"u"?null:tt==null?void 0:tt.precision,offset:(rt=tt==null?void 0:tt.offset)!==null&&rt!==void 0?rt:!1,...errorUtil.errToObj(tt==null?void 0:tt.message)})}regex(tt,rt){return this._addCheck({kind:"regex",regex:tt,...errorUtil.errToObj(rt)})}includes(tt,rt){return this._addCheck({kind:"includes",value:tt,position:rt==null?void 0:rt.position,...errorUtil.errToObj(rt==null?void 0:rt.message)})}startsWith(tt,rt){return this._addCheck({kind:"startsWith",value:tt,...errorUtil.errToObj(rt)})}endsWith(tt,rt){return this._addCheck({kind:"endsWith",value:tt,...errorUtil.errToObj(rt)})}min(tt,rt){return this._addCheck({kind:"min",value:tt,...errorUtil.errToObj(rt)})}max(tt,rt){return this._addCheck({kind:"max",value:tt,...errorUtil.errToObj(rt)})}length(tt,rt){return this._addCheck({kind:"length",value:tt,...errorUtil.errToObj(rt)})}get isDatetime(){return!!this._def.checks.find(tt=>tt.kind==="datetime")}get isEmail(){return!!this._def.checks.find(tt=>tt.kind==="email")}get isURL(){return!!this._def.checks.find(tt=>tt.kind==="url")}get isEmoji(){return!!this._def.checks.find(tt=>tt.kind==="emoji")}get isUUID(){return!!this._def.checks.find(tt=>tt.kind==="uuid")}get isCUID(){return!!this._def.checks.find(tt=>tt.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(tt=>tt.kind==="cuid2")}get isULID(){return!!this._def.checks.find(tt=>tt.kind==="ulid")}get isIP(){return!!this._def.checks.find(tt=>tt.kind==="ip")}get minLength(){let tt=null;for(const rt of this._def.checks)rt.kind==="min"&&(tt===null||rt.value>tt)&&(tt=rt.value);return tt}get maxLength(){let tt=null;for(const rt of this._def.checks)rt.kind==="max"&&(tt===null||rt.value<tt)&&(tt=rt.value);return tt}}ZodString.create=it=>{var tt;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(tt=it==null?void 0:it.coerce)!==null&&tt!==void 0?tt:!1,...processCreateParams(it)})};function floatSafeRemainder(it,tt){const rt=(it.toString().split(".")[1]||"").length,at=(tt.toString().split(".")[1]||"").length,st=rt>at?rt:at,ot=parseInt(it.toFixed(st).replace(".","")),lt=parseInt(tt.toFixed(st).replace(".",""));return ot%lt/Math.pow(10,st)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(tt){if(this._def.coerce&&(tt.data=Number(tt.data)),this._getType(tt)!==ZodParsedType.number){const ot=this._getOrReturnCtx(tt);return addIssueToContext(ot,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:ot.parsedType}),INVALID}let at;const st=new ParseStatus;for(const ot of this._def.checks)ot.kind==="int"?util$b.isInteger(tt.data)||(at=this._getOrReturnCtx(tt,at),addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:ot.message}),st.dirty()):ot.kind==="min"?(ot.inclusive?tt.data<ot.value:tt.data<=ot.value)&&(at=this._getOrReturnCtx(tt,at),addIssueToContext(at,{code:ZodIssueCode.too_small,minimum:ot.value,type:"number",inclusive:ot.inclusive,exact:!1,message:ot.message}),st.dirty()):ot.kind==="max"?(ot.inclusive?tt.data>ot.value:tt.data>=ot.value)&&(at=this._getOrReturnCtx(tt,at),addIssueToContext(at,{code:ZodIssueCode.too_big,maximum:ot.value,type:"number",inclusive:ot.inclusive,exact:!1,message:ot.message}),st.dirty()):ot.kind==="multipleOf"?floatSafeRemainder(tt.data,ot.value)!==0&&(at=this._getOrReturnCtx(tt,at),addIssueToContext(at,{code:ZodIssueCode.not_multiple_of,multipleOf:ot.value,message:ot.message}),st.dirty()):ot.kind==="finite"?Number.isFinite(tt.data)||(at=this._getOrReturnCtx(tt,at),addIssueToContext(at,{code:ZodIssueCode.not_finite,message:ot.message}),st.dirty()):util$b.assertNever(ot);return{status:st.value,value:tt.data}}gte(tt,rt){return this.setLimit("min",tt,!0,errorUtil.toString(rt))}gt(tt,rt){return this.setLimit("min",tt,!1,errorUtil.toString(rt))}lte(tt,rt){return this.setLimit("max",tt,!0,errorUtil.toString(rt))}lt(tt,rt){return this.setLimit("max",tt,!1,errorUtil.toString(rt))}setLimit(tt,rt,at,st){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:tt,value:rt,inclusive:at,message:errorUtil.toString(st)}]})}_addCheck(tt){return new ZodNumber({...this._def,checks:[...this._def.checks,tt]})}int(tt){return this._addCheck({kind:"int",message:errorUtil.toString(tt)})}positive(tt){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(tt)})}negative(tt){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(tt)})}nonpositive(tt){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(tt)})}nonnegative(tt){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(tt)})}multipleOf(tt,rt){return this._addCheck({kind:"multipleOf",value:tt,message:errorUtil.toString(rt)})}finite(tt){return this._addCheck({kind:"finite",message:errorUtil.toString(tt)})}safe(tt){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(tt)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(tt)})}get minValue(){let tt=null;for(const rt of this._def.checks)rt.kind==="min"&&(tt===null||rt.value>tt)&&(tt=rt.value);return tt}get maxValue(){let tt=null;for(const rt of this._def.checks)rt.kind==="max"&&(tt===null||rt.value<tt)&&(tt=rt.value);return tt}get isInt(){return!!this._def.checks.find(tt=>tt.kind==="int"||tt.kind==="multipleOf"&&util$b.isInteger(tt.value))}get isFinite(){let tt=null,rt=null;for(const at of this._def.checks){if(at.kind==="finite"||at.kind==="int"||at.kind==="multipleOf")return!0;at.kind==="min"?(rt===null||at.value>rt)&&(rt=at.value):at.kind==="max"&&(tt===null||at.value<tt)&&(tt=at.value)}return Number.isFinite(rt)&&Number.isFinite(tt)}}ZodNumber.create=it=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(it==null?void 0:it.coerce)||!1,...processCreateParams(it)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(tt){if(this._def.coerce&&(tt.data=BigInt(tt.data)),this._getType(tt)!==ZodParsedType.bigint){const ot=this._getOrReturnCtx(tt);return addIssueToContext(ot,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:ot.parsedType}),INVALID}let at;const st=new ParseStatus;for(const ot of this._def.checks)ot.kind==="min"?(ot.inclusive?tt.data<ot.value:tt.data<=ot.value)&&(at=this._getOrReturnCtx(tt,at),addIssueToContext(at,{code:ZodIssueCode.too_small,type:"bigint",minimum:ot.value,inclusive:ot.inclusive,message:ot.message}),st.dirty()):ot.kind==="max"?(ot.inclusive?tt.data>ot.value:tt.data>=ot.value)&&(at=this._getOrReturnCtx(tt,at),addIssueToContext(at,{code:ZodIssueCode.too_big,type:"bigint",maximum:ot.value,inclusive:ot.inclusive,message:ot.message}),st.dirty()):ot.kind==="multipleOf"?tt.data%ot.value!==BigInt(0)&&(at=this._getOrReturnCtx(tt,at),addIssueToContext(at,{code:ZodIssueCode.not_multiple_of,multipleOf:ot.value,message:ot.message}),st.dirty()):util$b.assertNever(ot);return{status:st.value,value:tt.data}}gte(tt,rt){return this.setLimit("min",tt,!0,errorUtil.toString(rt))}gt(tt,rt){return this.setLimit("min",tt,!1,errorUtil.toString(rt))}lte(tt,rt){return this.setLimit("max",tt,!0,errorUtil.toString(rt))}lt(tt,rt){return this.setLimit("max",tt,!1,errorUtil.toString(rt))}setLimit(tt,rt,at,st){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:tt,value:rt,inclusive:at,message:errorUtil.toString(st)}]})}_addCheck(tt){return new ZodBigInt({...this._def,checks:[...this._def.checks,tt]})}positive(tt){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(tt)})}negative(tt){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(tt)})}nonpositive(tt){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(tt)})}nonnegative(tt){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(tt)})}multipleOf(tt,rt){return this._addCheck({kind:"multipleOf",value:tt,message:errorUtil.toString(rt)})}get minValue(){let tt=null;for(const rt of this._def.checks)rt.kind==="min"&&(tt===null||rt.value>tt)&&(tt=rt.value);return tt}get maxValue(){let tt=null;for(const rt of this._def.checks)rt.kind==="max"&&(tt===null||rt.value<tt)&&(tt=rt.value);return tt}}ZodBigInt.create=it=>{var tt;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(tt=it==null?void 0:it.coerce)!==null&&tt!==void 0?tt:!1,...processCreateParams(it)})};class ZodBoolean extends ZodType{_parse(tt){if(this._def.coerce&&(tt.data=Boolean(tt.data)),this._getType(tt)!==ZodParsedType.boolean){const at=this._getOrReturnCtx(tt);return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:at.parsedType}),INVALID}return OK(tt.data)}}ZodBoolean.create=it=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(it==null?void 0:it.coerce)||!1,...processCreateParams(it)});class ZodDate extends ZodType{_parse(tt){if(this._def.coerce&&(tt.data=new Date(tt.data)),this._getType(tt)!==ZodParsedType.date){const ot=this._getOrReturnCtx(tt);return addIssueToContext(ot,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:ot.parsedType}),INVALID}if(isNaN(tt.data.getTime())){const ot=this._getOrReturnCtx(tt);return addIssueToContext(ot,{code:ZodIssueCode.invalid_date}),INVALID}const at=new ParseStatus;let st;for(const ot of this._def.checks)ot.kind==="min"?tt.data.getTime()<ot.value&&(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{code:ZodIssueCode.too_small,message:ot.message,inclusive:!0,exact:!1,minimum:ot.value,type:"date"}),at.dirty()):ot.kind==="max"?tt.data.getTime()>ot.value&&(st=this._getOrReturnCtx(tt,st),addIssueToContext(st,{code:ZodIssueCode.too_big,message:ot.message,inclusive:!0,exact:!1,maximum:ot.value,type:"date"}),at.dirty()):util$b.assertNever(ot);return{status:at.value,value:new Date(tt.data.getTime())}}_addCheck(tt){return new ZodDate({...this._def,checks:[...this._def.checks,tt]})}min(tt,rt){return this._addCheck({kind:"min",value:tt.getTime(),message:errorUtil.toString(rt)})}max(tt,rt){return this._addCheck({kind:"max",value:tt.getTime(),message:errorUtil.toString(rt)})}get minDate(){let tt=null;for(const rt of this._def.checks)rt.kind==="min"&&(tt===null||rt.value>tt)&&(tt=rt.value);return tt!=null?new Date(tt):null}get maxDate(){let tt=null;for(const rt of this._def.checks)rt.kind==="max"&&(tt===null||rt.value<tt)&&(tt=rt.value);return tt!=null?new Date(tt):null}}ZodDate.create=it=>new ZodDate({checks:[],coerce:(it==null?void 0:it.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(it)});class ZodSymbol extends ZodType{_parse(tt){if(this._getType(tt)!==ZodParsedType.symbol){const at=this._getOrReturnCtx(tt);return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:at.parsedType}),INVALID}return OK(tt.data)}}ZodSymbol.create=it=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(it)});class ZodUndefined extends ZodType{_parse(tt){if(this._getType(tt)!==ZodParsedType.undefined){const at=this._getOrReturnCtx(tt);return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:at.parsedType}),INVALID}return OK(tt.data)}}ZodUndefined.create=it=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(it)});class ZodNull extends ZodType{_parse(tt){if(this._getType(tt)!==ZodParsedType.null){const at=this._getOrReturnCtx(tt);return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:at.parsedType}),INVALID}return OK(tt.data)}}ZodNull.create=it=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(it)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(tt){return OK(tt.data)}}ZodAny.create=it=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(it)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(tt){return OK(tt.data)}}ZodUnknown.create=it=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(it)});class ZodNever extends ZodType{_parse(tt){const rt=this._getOrReturnCtx(tt);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:rt.parsedType}),INVALID}}ZodNever.create=it=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(it)});class ZodVoid extends ZodType{_parse(tt){if(this._getType(tt)!==ZodParsedType.undefined){const at=this._getOrReturnCtx(tt);return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:at.parsedType}),INVALID}return OK(tt.data)}}ZodVoid.create=it=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(it)});class ZodArray extends ZodType{_parse(tt){const{ctx:rt,status:at}=this._processInputParams(tt),st=this._def;if(rt.parsedType!==ZodParsedType.array)return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:rt.parsedType}),INVALID;if(st.exactLength!==null){const lt=rt.data.length>st.exactLength.value,ut=rt.data.length<st.exactLength.value;(lt||ut)&&(addIssueToContext(rt,{code:lt?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:ut?st.exactLength.value:void 0,maximum:lt?st.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:st.exactLength.message}),at.dirty())}if(st.minLength!==null&&rt.data.length<st.minLength.value&&(addIssueToContext(rt,{code:ZodIssueCode.too_small,minimum:st.minLength.value,type:"array",inclusive:!0,exact:!1,message:st.minLength.message}),at.dirty()),st.maxLength!==null&&rt.data.length>st.maxLength.value&&(addIssueToContext(rt,{code:ZodIssueCode.too_big,maximum:st.maxLength.value,type:"array",inclusive:!0,exact:!1,message:st.maxLength.message}),at.dirty()),rt.common.async)return Promise.all([...rt.data].map((lt,ut)=>st.type._parseAsync(new ParseInputLazyPath(rt,lt,rt.path,ut)))).then(lt=>ParseStatus.mergeArray(at,lt));const ot=[...rt.data].map((lt,ut)=>st.type._parseSync(new ParseInputLazyPath(rt,lt,rt.path,ut)));return ParseStatus.mergeArray(at,ot)}get element(){return this._def.type}min(tt,rt){return new ZodArray({...this._def,minLength:{value:tt,message:errorUtil.toString(rt)}})}max(tt,rt){return new ZodArray({...this._def,maxLength:{value:tt,message:errorUtil.toString(rt)}})}length(tt,rt){return new ZodArray({...this._def,exactLength:{value:tt,message:errorUtil.toString(rt)}})}nonempty(tt){return this.min(1,tt)}}ZodArray.create=(it,tt)=>new ZodArray({type:it,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(tt)});function deepPartialify(it){if(it instanceof ZodObject){const tt={};for(const rt in it.shape){const at=it.shape[rt];tt[rt]=ZodOptional.create(deepPartialify(at))}return new ZodObject({...it._def,shape:()=>tt})}else return it instanceof ZodArray?new ZodArray({...it._def,type:deepPartialify(it.element)}):it instanceof ZodOptional?ZodOptional.create(deepPartialify(it.unwrap())):it instanceof ZodNullable?ZodNullable.create(deepPartialify(it.unwrap())):it instanceof ZodTuple?ZodTuple.create(it.items.map(tt=>deepPartialify(tt))):it}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const tt=this._def.shape(),rt=util$b.objectKeys(tt);return this._cached={shape:tt,keys:rt}}_parse(tt){if(this._getType(tt)!==ZodParsedType.object){const mt=this._getOrReturnCtx(tt);return addIssueToContext(mt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:mt.parsedType}),INVALID}const{status:at,ctx:st}=this._processInputParams(tt),{shape:ot,keys:lt}=this._getCached(),ut=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const mt in st.data)lt.includes(mt)||ut.push(mt);const ht=[];for(const mt of lt){const bt=ot[mt],vt=st.data[mt];ht.push({key:{status:"valid",value:mt},value:bt._parse(new ParseInputLazyPath(st,vt,st.path,mt)),alwaysSet:mt in st.data})}if(this._def.catchall instanceof ZodNever){const mt=this._def.unknownKeys;if(mt==="passthrough")for(const bt of ut)ht.push({key:{status:"valid",value:bt},value:{status:"valid",value:st.data[bt]}});else if(mt==="strict")ut.length>0&&(addIssueToContext(st,{code:ZodIssueCode.unrecognized_keys,keys:ut}),at.dirty());else if(mt!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const mt=this._def.catchall;for(const bt of ut){const vt=st.data[bt];ht.push({key:{status:"valid",value:bt},value:mt._parse(new ParseInputLazyPath(st,vt,st.path,bt)),alwaysSet:bt in st.data})}}return st.common.async?Promise.resolve().then(async()=>{const mt=[];for(const bt of ht){const vt=await bt.key;mt.push({key:vt,value:await bt.value,alwaysSet:bt.alwaysSet})}return mt}).then(mt=>ParseStatus.mergeObjectSync(at,mt)):ParseStatus.mergeObjectSync(at,ht)}get shape(){return this._def.shape()}strict(tt){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...tt!==void 0?{errorMap:(rt,at)=>{var st,ot,lt,ut;const ht=(lt=(ot=(st=this._def).errorMap)===null||ot===void 0?void 0:ot.call(st,rt,at).message)!==null&&lt!==void 0?lt:at.defaultError;return rt.code==="unrecognized_keys"?{message:(ut=errorUtil.errToObj(tt).message)!==null&&ut!==void 0?ut:ht}:{message:ht}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(tt){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...tt})})}merge(tt){return new ZodObject({unknownKeys:tt._def.unknownKeys,catchall:tt._def.catchall,shape:()=>({...this._def.shape(),...tt._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(tt,rt){return this.augment({[tt]:rt})}catchall(tt){return new ZodObject({...this._def,catchall:tt})}pick(tt){const rt={};return util$b.objectKeys(tt).forEach(at=>{tt[at]&&this.shape[at]&&(rt[at]=this.shape[at])}),new ZodObject({...this._def,shape:()=>rt})}omit(tt){const rt={};return util$b.objectKeys(this.shape).forEach(at=>{tt[at]||(rt[at]=this.shape[at])}),new ZodObject({...this._def,shape:()=>rt})}deepPartial(){return deepPartialify(this)}partial(tt){const rt={};return util$b.objectKeys(this.shape).forEach(at=>{const st=this.shape[at];tt&&!tt[at]?rt[at]=st:rt[at]=st.optional()}),new ZodObject({...this._def,shape:()=>rt})}required(tt){const rt={};return util$b.objectKeys(this.shape).forEach(at=>{if(tt&&!tt[at])rt[at]=this.shape[at];else{let ot=this.shape[at];for(;ot instanceof ZodOptional;)ot=ot._def.innerType;rt[at]=ot}}),new ZodObject({...this._def,shape:()=>rt})}keyof(){return createZodEnum(util$b.objectKeys(this.shape))}}ZodObject.create=(it,tt)=>new ZodObject({shape:()=>it,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(tt)}),ZodObject.strictCreate=(it,tt)=>new ZodObject({shape:()=>it,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(tt)}),ZodObject.lazycreate=(it,tt)=>new ZodObject({shape:it,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(tt)});class ZodUnion extends ZodType{_parse(tt){const{ctx:rt}=this._processInputParams(tt),at=this._def.options;function st(ot){for(const ut of ot)if(ut.result.status==="valid")return ut.result;for(const ut of ot)if(ut.result.status==="dirty")return rt.common.issues.push(...ut.ctx.common.issues),ut.result;const lt=ot.map(ut=>new ZodError(ut.ctx.common.issues));return addIssueToContext(rt,{code:ZodIssueCode.invalid_union,unionErrors:lt}),INVALID}if(rt.common.async)return Promise.all(at.map(async ot=>{const lt={...rt,common:{...rt.common,issues:[]},parent:null};return{result:await ot._parseAsync({data:rt.data,path:rt.path,parent:lt}),ctx:lt}})).then(st);{let ot;const lt=[];for(const ht of at){const mt={...rt,common:{...rt.common,issues:[]},parent:null},bt=ht._parseSync({data:rt.data,path:rt.path,parent:mt});if(bt.status==="valid")return bt;bt.status==="dirty"&&!ot&&(ot={result:bt,ctx:mt}),mt.common.issues.length&&lt.push(mt.common.issues)}if(ot)return rt.common.issues.push(...ot.ctx.common.issues),ot.result;const ut=lt.map(ht=>new ZodError(ht));return addIssueToContext(rt,{code:ZodIssueCode.invalid_union,unionErrors:ut}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(it,tt)=>new ZodUnion({options:it,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(tt)});const getDiscriminator=it=>it instanceof ZodLazy?getDiscriminator(it.schema):it instanceof ZodEffects?getDiscriminator(it.innerType()):it instanceof ZodLiteral?[it.value]:it instanceof ZodEnum?it.options:it instanceof ZodNativeEnum?Object.keys(it.enum):it instanceof ZodDefault?getDiscriminator(it._def.innerType):it instanceof ZodUndefined?[void 0]:it instanceof ZodNull?[null]:null;class ZodDiscriminatedUnion extends ZodType{_parse(tt){const{ctx:rt}=this._processInputParams(tt);if(rt.parsedType!==ZodParsedType.object)return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:rt.parsedType}),INVALID;const at=this.discriminator,st=rt.data[at],ot=this.optionsMap.get(st);return ot?rt.common.async?ot._parseAsync({data:rt.data,path:rt.path,parent:rt}):ot._parseSync({data:rt.data,path:rt.path,parent:rt}):(addIssueToContext(rt,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[at]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(tt,rt,at){const st=new Map;for(const ot of rt){const lt=getDiscriminator(ot.shape[tt]);if(!lt)throw new Error(`A discriminator value for key \`${tt}\` could not be extracted from all schema options`);for(const ut of lt){if(st.has(ut))throw new Error(`Discriminator property ${String(tt)} has duplicate value ${String(ut)}`);st.set(ut,ot)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:tt,options:rt,optionsMap:st,...processCreateParams(at)})}}function mergeValues(it,tt){const rt=getParsedType(it),at=getParsedType(tt);if(it===tt)return{valid:!0,data:it};if(rt===ZodParsedType.object&&at===ZodParsedType.object){const st=util$b.objectKeys(tt),ot=util$b.objectKeys(it).filter(ut=>st.indexOf(ut)!==-1),lt={...it,...tt};for(const ut of ot){const ht=mergeValues(it[ut],tt[ut]);if(!ht.valid)return{valid:!1};lt[ut]=ht.data}return{valid:!0,data:lt}}else if(rt===ZodParsedType.array&&at===ZodParsedType.array){if(it.length!==tt.length)return{valid:!1};const st=[];for(let ot=0;ot<it.length;ot++){const lt=it[ot],ut=tt[ot],ht=mergeValues(lt,ut);if(!ht.valid)return{valid:!1};st.push(ht.data)}return{valid:!0,data:st}}else return rt===ZodParsedType.date&&at===ZodParsedType.date&&+it==+tt?{valid:!0,data:it}:{valid:!1}}class ZodIntersection extends ZodType{_parse(tt){const{status:rt,ctx:at}=this._processInputParams(tt),st=(ot,lt)=>{if(isAborted(ot)||isAborted(lt))return INVALID;const ut=mergeValues(ot.value,lt.value);return ut.valid?((isDirty(ot)||isDirty(lt))&&rt.dirty(),{status:rt.value,value:ut.data}):(addIssueToContext(at,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return at.common.async?Promise.all([this._def.left._parseAsync({data:at.data,path:at.path,parent:at}),this._def.right._parseAsync({data:at.data,path:at.path,parent:at})]).then(([ot,lt])=>st(ot,lt)):st(this._def.left._parseSync({data:at.data,path:at.path,parent:at}),this._def.right._parseSync({data:at.data,path:at.path,parent:at}))}}ZodIntersection.create=(it,tt,rt)=>new ZodIntersection({left:it,right:tt,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(rt)});class ZodTuple extends ZodType{_parse(tt){const{status:rt,ctx:at}=this._processInputParams(tt);if(at.parsedType!==ZodParsedType.array)return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:at.parsedType}),INVALID;if(at.data.length<this._def.items.length)return addIssueToContext(at,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&at.data.length>this._def.items.length&&(addIssueToContext(at,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),rt.dirty());const ot=[...at.data].map((lt,ut)=>{const ht=this._def.items[ut]||this._def.rest;return ht?ht._parse(new ParseInputLazyPath(at,lt,at.path,ut)):null}).filter(lt=>!!lt);return at.common.async?Promise.all(ot).then(lt=>ParseStatus.mergeArray(rt,lt)):ParseStatus.mergeArray(rt,ot)}get items(){return this._def.items}rest(tt){return new ZodTuple({...this._def,rest:tt})}}ZodTuple.create=(it,tt)=>{if(!Array.isArray(it))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:it,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(tt)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(tt){const{status:rt,ctx:at}=this._processInputParams(tt);if(at.parsedType!==ZodParsedType.object)return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:at.parsedType}),INVALID;const st=[],ot=this._def.keyType,lt=this._def.valueType;for(const ut in at.data)st.push({key:ot._parse(new ParseInputLazyPath(at,ut,at.path,ut)),value:lt._parse(new ParseInputLazyPath(at,at.data[ut],at.path,ut))});return at.common.async?ParseStatus.mergeObjectAsync(rt,st):ParseStatus.mergeObjectSync(rt,st)}get element(){return this._def.valueType}static create(tt,rt,at){return rt instanceof ZodType?new ZodRecord({keyType:tt,valueType:rt,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(at)}):new ZodRecord({keyType:ZodString.create(),valueType:tt,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(rt)})}}class ZodMap extends ZodType{_parse(tt){const{status:rt,ctx:at}=this._processInputParams(tt);if(at.parsedType!==ZodParsedType.map)return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:at.parsedType}),INVALID;const st=this._def.keyType,ot=this._def.valueType,lt=[...at.data.entries()].map(([ut,ht],mt)=>({key:st._parse(new ParseInputLazyPath(at,ut,at.path,[mt,"key"])),value:ot._parse(new ParseInputLazyPath(at,ht,at.path,[mt,"value"]))}));if(at.common.async){const ut=new Map;return Promise.resolve().then(async()=>{for(const ht of lt){const mt=await ht.key,bt=await ht.value;if(mt.status==="aborted"||bt.status==="aborted")return INVALID;(mt.status==="dirty"||bt.status==="dirty")&&rt.dirty(),ut.set(mt.value,bt.value)}return{status:rt.value,value:ut}})}else{const ut=new Map;for(const ht of lt){const mt=ht.key,bt=ht.value;if(mt.status==="aborted"||bt.status==="aborted")return INVALID;(mt.status==="dirty"||bt.status==="dirty")&&rt.dirty(),ut.set(mt.value,bt.value)}return{status:rt.value,value:ut}}}}ZodMap.create=(it,tt,rt)=>new ZodMap({valueType:tt,keyType:it,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(rt)});class ZodSet extends ZodType{_parse(tt){const{status:rt,ctx:at}=this._processInputParams(tt);if(at.parsedType!==ZodParsedType.set)return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:at.parsedType}),INVALID;const st=this._def;st.minSize!==null&&at.data.size<st.minSize.value&&(addIssueToContext(at,{code:ZodIssueCode.too_small,minimum:st.minSize.value,type:"set",inclusive:!0,exact:!1,message:st.minSize.message}),rt.dirty()),st.maxSize!==null&&at.data.size>st.maxSize.value&&(addIssueToContext(at,{code:ZodIssueCode.too_big,maximum:st.maxSize.value,type:"set",inclusive:!0,exact:!1,message:st.maxSize.message}),rt.dirty());const ot=this._def.valueType;function lt(ht){const mt=new Set;for(const bt of ht){if(bt.status==="aborted")return INVALID;bt.status==="dirty"&&rt.dirty(),mt.add(bt.value)}return{status:rt.value,value:mt}}const ut=[...at.data.values()].map((ht,mt)=>ot._parse(new ParseInputLazyPath(at,ht,at.path,mt)));return at.common.async?Promise.all(ut).then(ht=>lt(ht)):lt(ut)}min(tt,rt){return new ZodSet({...this._def,minSize:{value:tt,message:errorUtil.toString(rt)}})}max(tt,rt){return new ZodSet({...this._def,maxSize:{value:tt,message:errorUtil.toString(rt)}})}size(tt,rt){return this.min(tt,rt).max(tt,rt)}nonempty(tt){return this.min(1,tt)}}ZodSet.create=(it,tt)=>new ZodSet({valueType:it,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(tt)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(tt){const{ctx:rt}=this._processInputParams(tt);if(rt.parsedType!==ZodParsedType.function)return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:rt.parsedType}),INVALID;function at(ut,ht){return makeIssue({data:ut,path:rt.path,errorMaps:[rt.common.contextualErrorMap,rt.schemaErrorMap,getErrorMap(),errorMap].filter(mt=>!!mt),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:ht}})}function st(ut,ht){return makeIssue({data:ut,path:rt.path,errorMaps:[rt.common.contextualErrorMap,rt.schemaErrorMap,getErrorMap(),errorMap].filter(mt=>!!mt),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:ht}})}const ot={errorMap:rt.common.contextualErrorMap},lt=rt.data;return this._def.returns instanceof ZodPromise?OK(async(...ut)=>{const ht=new ZodError([]),mt=await this._def.args.parseAsync(ut,ot).catch(At=>{throw ht.addIssue(at(ut,At)),ht}),bt=await lt(...mt);return await this._def.returns._def.type.parseAsync(bt,ot).catch(At=>{throw ht.addIssue(st(bt,At)),ht})}):OK((...ut)=>{const ht=this._def.args.safeParse(ut,ot);if(!ht.success)throw new ZodError([at(ut,ht.error)]);const mt=lt(...ht.data),bt=this._def.returns.safeParse(mt,ot);if(!bt.success)throw new ZodError([st(mt,bt.error)]);return bt.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...tt){return new ZodFunction({...this._def,args:ZodTuple.create(tt).rest(ZodUnknown.create())})}returns(tt){return new ZodFunction({...this._def,returns:tt})}implement(tt){return this.parse(tt)}strictImplement(tt){return this.parse(tt)}static create(tt,rt,at){return new ZodFunction({args:tt||ZodTuple.create([]).rest(ZodUnknown.create()),returns:rt||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(at)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(tt){const{ctx:rt}=this._processInputParams(tt);return this._def.getter()._parse({data:rt.data,path:rt.path,parent:rt})}}ZodLazy.create=(it,tt)=>new ZodLazy({getter:it,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(tt)});class ZodLiteral extends ZodType{_parse(tt){if(tt.data!==this._def.value){const rt=this._getOrReturnCtx(tt);return addIssueToContext(rt,{received:rt.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:tt.data}}get value(){return this._def.value}}ZodLiteral.create=(it,tt)=>new ZodLiteral({value:it,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(tt)});function createZodEnum(it,tt){return new ZodEnum({values:it,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(tt)})}class ZodEnum extends ZodType{_parse(tt){if(typeof tt.data!="string"){const rt=this._getOrReturnCtx(tt),at=this._def.values;return addIssueToContext(rt,{expected:util$b.joinValues(at),received:rt.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._def.values.indexOf(tt.data)===-1){const rt=this._getOrReturnCtx(tt),at=this._def.values;return addIssueToContext(rt,{received:rt.data,code:ZodIssueCode.invalid_enum_value,options:at}),INVALID}return OK(tt.data)}get options(){return this._def.values}get enum(){const tt={};for(const rt of this._def.values)tt[rt]=rt;return tt}get Values(){const tt={};for(const rt of this._def.values)tt[rt]=rt;return tt}get Enum(){const tt={};for(const rt of this._def.values)tt[rt]=rt;return tt}extract(tt){return ZodEnum.create(tt)}exclude(tt){return ZodEnum.create(this.options.filter(rt=>!tt.includes(rt)))}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(tt){const rt=util$b.getValidEnumValues(this._def.values),at=this._getOrReturnCtx(tt);if(at.parsedType!==ZodParsedType.string&&at.parsedType!==ZodParsedType.number){const st=util$b.objectValues(rt);return addIssueToContext(at,{expected:util$b.joinValues(st),received:at.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(rt.indexOf(tt.data)===-1){const st=util$b.objectValues(rt);return addIssueToContext(at,{received:at.data,code:ZodIssueCode.invalid_enum_value,options:st}),INVALID}return OK(tt.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(it,tt)=>new ZodNativeEnum({values:it,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(tt)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(tt){const{ctx:rt}=this._processInputParams(tt);if(rt.parsedType!==ZodParsedType.promise&&rt.common.async===!1)return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:rt.parsedType}),INVALID;const at=rt.parsedType===ZodParsedType.promise?rt.data:Promise.resolve(rt.data);return OK(at.then(st=>this._def.type.parseAsync(st,{path:rt.path,errorMap:rt.common.contextualErrorMap})))}}ZodPromise.create=(it,tt)=>new ZodPromise({type:it,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(tt)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(tt){const{status:rt,ctx:at}=this._processInputParams(tt),st=this._def.effect||null;if(st.type==="preprocess"){const lt=st.transform(at.data);return at.common.async?Promise.resolve(lt).then(ut=>this._def.schema._parseAsync({data:ut,path:at.path,parent:at})):this._def.schema._parseSync({data:lt,path:at.path,parent:at})}const ot={addIssue:lt=>{addIssueToContext(at,lt),lt.fatal?rt.abort():rt.dirty()},get path(){return at.path}};if(ot.addIssue=ot.addIssue.bind(ot),st.type==="refinement"){const lt=ut=>{const ht=st.refinement(ut,ot);if(at.common.async)return Promise.resolve(ht);if(ht instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return ut};if(at.common.async===!1){const ut=this._def.schema._parseSync({data:at.data,path:at.path,parent:at});return ut.status==="aborted"?INVALID:(ut.status==="dirty"&&rt.dirty(),lt(ut.value),{status:rt.value,value:ut.value})}else return this._def.schema._parseAsync({data:at.data,path:at.path,parent:at}).then(ut=>ut.status==="aborted"?INVALID:(ut.status==="dirty"&&rt.dirty(),lt(ut.value).then(()=>({status:rt.value,value:ut.value}))))}if(st.type==="transform")if(at.common.async===!1){const lt=this._def.schema._parseSync({data:at.data,path:at.path,parent:at});if(!isValid(lt))return lt;const ut=st.transform(lt.value,ot);if(ut instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:rt.value,value:ut}}else return this._def.schema._parseAsync({data:at.data,path:at.path,parent:at}).then(lt=>isValid(lt)?Promise.resolve(st.transform(lt.value,ot)).then(ut=>({status:rt.value,value:ut})):lt);util$b.assertNever(st)}}ZodEffects.create=(it,tt,rt)=>new ZodEffects({schema:it,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:tt,...processCreateParams(rt)}),ZodEffects.createWithPreprocess=(it,tt,rt)=>new ZodEffects({schema:tt,effect:{type:"preprocess",transform:it},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(rt)});class ZodOptional extends ZodType{_parse(tt){return this._getType(tt)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(tt)}unwrap(){return this._def.innerType}}ZodOptional.create=(it,tt)=>new ZodOptional({innerType:it,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(tt)});class ZodNullable extends ZodType{_parse(tt){return this._getType(tt)===ZodParsedType.null?OK(null):this._def.innerType._parse(tt)}unwrap(){return this._def.innerType}}ZodNullable.create=(it,tt)=>new ZodNullable({innerType:it,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(tt)});class ZodDefault extends ZodType{_parse(tt){const{ctx:rt}=this._processInputParams(tt);let at=rt.data;return rt.parsedType===ZodParsedType.undefined&&(at=this._def.defaultValue()),this._def.innerType._parse({data:at,path:rt.path,parent:rt})}removeDefault(){return this._def.innerType}}ZodDefault.create=(it,tt)=>new ZodDefault({innerType:it,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof tt.default=="function"?tt.default:()=>tt.default,...processCreateParams(tt)});class ZodCatch extends ZodType{_parse(tt){const{ctx:rt}=this._processInputParams(tt),at={...rt,common:{...rt.common,issues:[]}},st=this._def.innerType._parse({data:at.data,path:at.path,parent:{...at}});return isAsync(st)?st.then(ot=>({status:"valid",value:ot.status==="valid"?ot.value:this._def.catchValue({get error(){return new ZodError(at.common.issues)},input:at.data})})):{status:"valid",value:st.status==="valid"?st.value:this._def.catchValue({get error(){return new ZodError(at.common.issues)},input:at.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(it,tt)=>new ZodCatch({innerType:it,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof tt.catch=="function"?tt.catch:()=>tt.catch,...processCreateParams(tt)});class ZodNaN extends ZodType{_parse(tt){if(this._getType(tt)!==ZodParsedType.nan){const at=this._getOrReturnCtx(tt);return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:at.parsedType}),INVALID}return{status:"valid",value:tt.data}}}ZodNaN.create=it=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(it)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(tt){const{ctx:rt}=this._processInputParams(tt),at=rt.data;return this._def.type._parse({data:at,path:rt.path,parent:rt})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(tt){const{status:rt,ctx:at}=this._processInputParams(tt);if(at.common.async)return(async()=>{const ot=await this._def.in._parseAsync({data:at.data,path:at.path,parent:at});return ot.status==="aborted"?INVALID:ot.status==="dirty"?(rt.dirty(),DIRTY(ot.value)):this._def.out._parseAsync({data:ot.value,path:at.path,parent:at})})();{const st=this._def.in._parseSync({data:at.data,path:at.path,parent:at});return st.status==="aborted"?INVALID:st.status==="dirty"?(rt.dirty(),{status:"dirty",value:st.value}):this._def.out._parseSync({data:st.value,path:at.path,parent:at})}}static create(tt,rt){return new ZodPipeline({in:tt,out:rt,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}const custom=(it,tt={},rt)=>it?ZodAny.create().superRefine((at,st)=>{var ot,lt;if(!it(at)){const ut=typeof tt=="function"?tt(at):typeof tt=="string"?{message:tt}:tt,ht=(lt=(ot=ut.fatal)!==null&&ot!==void 0?ot:rt)!==null&&lt!==void 0?lt:!0,mt=typeof ut=="string"?{message:ut}:ut;st.addIssue({code:"custom",...mt,fatal:ht})}}):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(it){it.ZodString="ZodString",it.ZodNumber="ZodNumber",it.ZodNaN="ZodNaN",it.ZodBigInt="ZodBigInt",it.ZodBoolean="ZodBoolean",it.ZodDate="ZodDate",it.ZodSymbol="ZodSymbol",it.ZodUndefined="ZodUndefined",it.ZodNull="ZodNull",it.ZodAny="ZodAny",it.ZodUnknown="ZodUnknown",it.ZodNever="ZodNever",it.ZodVoid="ZodVoid",it.ZodArray="ZodArray",it.ZodObject="ZodObject",it.ZodUnion="ZodUnion",it.ZodDiscriminatedUnion="ZodDiscriminatedUnion",it.ZodIntersection="ZodIntersection",it.ZodTuple="ZodTuple",it.ZodRecord="ZodRecord",it.ZodMap="ZodMap",it.ZodSet="ZodSet",it.ZodFunction="ZodFunction",it.ZodLazy="ZodLazy",it.ZodLiteral="ZodLiteral",it.ZodEnum="ZodEnum",it.ZodEffects="ZodEffects",it.ZodNativeEnum="ZodNativeEnum",it.ZodOptional="ZodOptional",it.ZodNullable="ZodNullable",it.ZodDefault="ZodDefault",it.ZodCatch="ZodCatch",it.ZodPromise="ZodPromise",it.ZodBranded="ZodBranded",it.ZodPipeline="ZodPipeline"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(it,tt={message:`Input not instance of ${it.name}`})=>custom(rt=>rt instanceof it,tt),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce$1={string:it=>ZodString.create({...it,coerce:!0}),number:it=>ZodNumber.create({...it,coerce:!0}),boolean:it=>ZodBoolean.create({...it,coerce:!0}),bigint:it=>ZodBigInt.create({...it,coerce:!0}),date:it=>ZodDate.create({...it,coerce:!0})},NEVER$1=INVALID;var z$6=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util$b},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce:coerce$1,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER:NEVER$1,ZodIssueCode,quotelessJson,ZodError});const DEFAULT_API_KEY$3="c6634ad2d97b74baf15ff556016830c251050e6c36b9da508ce3ec80095d3dc1",isBrowser$5=()=>typeof window<"u",FileOrBufferUnionSchema=isBrowser$5()?z$6.instanceof(File):z$6.instanceof(Buffer),FileOrBufferSchema=z$6.union([FileOrBufferUnionSchema,z$6.object({data:z$6.union([FileOrBufferUnionSchema,z$6.string()]),name:z$6.string()})]),FileOrBufferOrStringSchema=z$6.union([FileOrBufferSchema,z$6.string()]),MAX_BPS=1e4,BytesLikeSchema=z$6.union([z$6.array(z$6.number()),z$6.string()]),BigNumberSchema$1=z$6.union([z$6.string(),z$6.number(),z$6.bigint(),z$6.custom(it=>BigNumber.isBigNumber(it)),z$6.custom(it=>BN$4.isBN(it))]).transform(it=>{let tt=BN$4.isBN(it)?new BN$4(it).toString():BigNumber.from(it).toString();return BigNumber.from(tt)});BigNumberSchema$1.transform(it=>it.toString());const BigNumberTransformSchema$1=z$6.union([z$6.bigint(),z$6.custom(it=>BigNumber.isBigNumber(it)),z$6.custom(it=>BN$4.isBN(it))]).transform(it=>BN$4.isBN(it)?new BN$4(it).toString():BigNumber.from(it).toString()),BasisPointsSchema=z$6.number().max(MAX_BPS,"Cannot exceed 100%").min(0,"Cannot be below 0%"),PercentSchema=z$6.number().max(100,"Cannot exceed 100%").min(0,"Cannot be below 0%"),HexColor=z$6.union([z$6.string().regex(/^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Invalid hex color"),z$6.string().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Invalid hex color").transform(it=>it.replace("#","")),z$6.string().length(0)]),AmountSchema=z$6.union([z$6.string().regex(/^([0-9]+\.?[0-9]*|\.[0-9]+)$/,"Invalid amount"),z$6.number().min(0,"Amount cannot be negative")]).transform(it=>typeof it=="number"?it.toString():it),QuantitySchema=z$6.union([AmountSchema,z$6.literal("unlimited")]).default("unlimited"),RawDateSchema$2=z$6.date().transform(it=>BigNumber.from(Math.floor(it.getTime()/1e3)));RawDateSchema$2.default(new Date(0)),RawDateSchema$2.default(new Date(Date.now()+1e3*60*60*24*365*10));function _toPrimitive$3(it,tt){if(typeof it!="object"||it===null)return it;var rt=it[Symbol.toPrimitive];if(rt!==void 0){var at=rt.call(it,tt||"default");if(typeof at!="object")return at;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(it)}function _toPropertyKey$3(it){var tt=_toPrimitive$3(it,"string");return typeof tt=="symbol"?tt:String(tt)}function _defineProperty$4(it,tt,rt){return tt=_toPropertyKey$3(tt),tt in it?Object.defineProperty(it,tt,{value:rt,enumerable:!0,configurable:!0,writable:!0}):it[tt]=rt,it}const PropertiesInput$1=z$6.object({}).catchall(z$6.union([BigNumberTransformSchema$1,z$6.unknown()])),OptionalPropertiesInput=z$6.union([z$6.array(PropertiesInput$1),PropertiesInput$1]).optional().nullable(),CommonNFTInput=z$6.object({name:z$6.union([z$6.string(),z$6.number()]).optional().nullable(),description:z$6.string().nullable().optional().nullable(),image:FileOrBufferOrStringSchema.nullable().optional(),external_url:FileOrBufferOrStringSchema.nullable().optional(),animation_url:FileOrBufferOrStringSchema.optional().nullable(),background_color:HexColor.optional().nullable(),properties:OptionalPropertiesInput,attributes:OptionalPropertiesInput}).catchall(z$6.union([BigNumberTransformSchema$1,z$6.unknown()])),NFTInputOrUriSchema=z$6.union([CommonNFTInput,z$6.string()]),CommonNFTOutput=CommonNFTInput.extend({id:z$6.string(),uri:z$6.string(),image:z$6.string().nullable().optional(),external_url:z$6.string().nullable().optional(),animation_url:z$6.string().nullable().optional()}),DEFAULT_QUERY_ALL_COUNT=100;z$6.object({start:z$6.number().default(0),count:z$6.number().default(DEFAULT_QUERY_ALL_COUNT)}).default({start:0,count:DEFAULT_QUERY_ALL_COUNT});const ERC165Abi=[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Erc721Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],Erc1155Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"bool",name:"_approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"_ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"_values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_value",type:"string"},{indexed:!0,internalType:"uint256",name:"_id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_ids",type:"uint256[]"},{internalType:"uint256[]",name:"_values",type:"uint256[]"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"}],ERC20Abi$1=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"who",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],IThirdwebContractABI=[{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"}],IBurnableERC20Abi=[{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],IDrop=[{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition[]",name:"claimConditions",type:"tuple[]"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],DropERC20_V2Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"},{internalType:"uint256",name:"proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],IDropSinglePhase=[{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropSinglePhase.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition",name:"phase",type:"tuple"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],IDropSinglePhaseV1=[{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IClaimCondition_V1.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"maxQuantityInAllowlist",type:"uint256"}],internalType:"struct IDropSinglePhase_V1.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IClaimCondition_V1.ClaimCondition",name:"phase",type:"tuple"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],IERC20PermitAbi=[{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"}],IMintableERC20Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityMinted",type:"uint256"}],name:"TokensMinted",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintTo",outputs:[],stateMutability:"nonpayable",type:"function"}],MulticallAbi=[{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"}],ISignatureMintERC20Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ISignatureMintERC20.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC20.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"address",name:"signer",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC20.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"success",type:"bool"},{internalType:"address",name:"signer",type:"address"}],stateMutability:"view",type:"function"}],IBurnableERC721Abi=[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"}],IClaimableERC721=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"}],name:"verifyClaim",outputs:[],stateMutability:"view",type:"function"}],DelayedRevealAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"TokenURIRevealed",type:"event"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bytes",name:"key",type:"bytes"}],name:"encryptDecrypt",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"identifier",type:"uint256"},{internalType:"bytes",name:"key",type:"bytes"}],name:"reveal",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"nonpayable",type:"function"}],DropERC721_V3Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"NFTRevealed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"},{internalType:"uint256",name:"proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"operator",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"baseURIForTokens",type:"string"},{internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"lazyMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],Erc721EnumerableAbi=[{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Erc721SupplyAbi=[{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],ILazyMintAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"baseURIForTokens",type:"string"},{internalType:"bytes",name:"extraData",type:"bytes"}],name:"lazyMint",outputs:[{internalType:"uint256",name:"batchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],IMintableERC721Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{indexed:!1,internalType:"string",name:"uri",type:"string"}],name:"TokensMinted",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"mintTo",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],SignatureMintERC721Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ISignatureMintERC721.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC721.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"address",name:"signer",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC721.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"success",type:"bool"},{internalType:"address",name:"signer",type:"address"}],stateMutability:"view",type:"function"}],SignatureMintERC721_V1Abi=[{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"uint256",name:"tokenIdMinted",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],TieredDropAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"tier",type:"string"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{inputs:[],name:"getBaseURICount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"getBatchIdAtIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMetadataForAllTiers",outputs:[{components:[{internalType:"string",name:"tier",type:"string"},{components:[{internalType:"uint256",name:"startIdInclusive",type:"uint256"},{internalType:"uint256",name:"endIdNonInclusive",type:"uint256"}],internalType:"struct LazyMintWithTier.TokenRange[]",name:"ranges",type:"tuple[]"},{internalType:"string[]",name:"baseURIs",type:"string[]"}],internalType:"struct LazyMintWithTier.TierMetadata[]",name:"metadataForAllTiers",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"string",name:"_baseURIForTokens",type:"string"},{internalType:"string",name:"_tier",type:"string"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"lazyMint",outputs:[{internalType:"uint256",name:"batchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],IBurnableERC1155Abi=[{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"}],IClaimableERC1155=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"}],name:"verifyClaim",outputs:[],stateMutability:"view",type:"function"}],IDropMultiPhase1155=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition[]",name:"claimConditions",type:"tuple[]"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop1155.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],DropERC1155_V2Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"saleRecipient",type:"address"}],name:"SaleRecipientForTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!1,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"},{internalType:"uint256",name:"proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"baseURIForTokens",type:"string"}],name:"lazyMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"phases",type:"tuple[]"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],IDropSinglePhase1155=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropSinglePhase1155.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition",name:"phase",type:"tuple"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],IDropSinglePhase1155_V1=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IClaimCondition_V1.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"maxQuantityInAllowlist",type:"uint256"}],internalType:"struct IDropSinglePhase1155_V1.AllowlistProof",name:"allowlistProof",type:"tuple"},{internalType:"bytes",name:"data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IClaimCondition_V1.ClaimCondition",name:"phase",type:"tuple"},{internalType:"bool",name:"resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"}],Erc1155EnumerableAbi=[{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],IMintableERC1155Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{indexed:!1,internalType:"string",name:"uri",type:"string"},{indexed:!1,internalType:"uint256",name:"quantityMinted",type:"uint256"}],name:"TokensMinted",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintTo",outputs:[],stateMutability:"nonpayable",type:"function"}],ISignatureMintERC1155Abi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ISignatureMintERC1155.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC1155.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"address",name:"signer",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC1155.MintRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"success",type:"bool"},{internalType:"address",name:"signer",type:"address"}],stateMutability:"view",type:"function"}],IERC2771ContextAbi=[{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],IAppURI=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"AppURIUpdated",type:"event"},{inputs:[],name:"appURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setAppURI",outputs:[],stateMutability:"nonpayable",type:"function"}],IContractMetadataAbi=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"}],IDirectListingsAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"BuyerApprovedForListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"listingCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"}],name:"CancelledListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"currency",type:"address"},{indexed:!1,internalType:"uint256",name:"pricePerToken",type:"uint256"}],name:"CurrencyApprovedForListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"listingCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IDirectListings.Listing",name:"listing",type:"tuple"}],name:"NewListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"listingCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityBought",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalPricePaid",type:"uint256"}],name:"NewSale",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"listingCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IDirectListings.Listing",name:"listing",type:"tuple"}],name:"UpdatedListing",type:"event"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_buyer",type:"address"},{internalType:"bool",name:"_toApprove",type:"bool"}],name:"approveBuyerForListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerTokenInCurrency",type:"uint256"}],name:"approveCurrencyForListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_buyFor",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_expectedTotalPrice",type:"uint256"}],name:"buyFromListing",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"}],name:"cancelListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"}],internalType:"struct IDirectListings.ListingParameters",name:"_params",type:"tuple"}],name:"createListing",outputs:[{internalType:"uint256",name:"listingId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllListings",outputs:[{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],internalType:"struct IDirectListings.Listing[]",name:"listings",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllValidListings",outputs:[{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],internalType:"struct IDirectListings.Listing[]",name:"listings",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"}],name:"getListing",outputs:[{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"listingCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"},{internalType:"enum IDirectListings.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IDirectListings.Status",name:"status",type:"uint8"}],internalType:"struct IDirectListings.Listing",name:"listing",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalListings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint128",name:"startTimestamp",type:"uint128"},{internalType:"uint128",name:"endTimestamp",type:"uint128"},{internalType:"bool",name:"reserved",type:"bool"}],internalType:"struct IDirectListings.ListingParameters",name:"_params",type:"tuple"}],name:"updateListing",outputs:[],stateMutability:"nonpayable",type:"function"}],IEnglishAuctionsAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"auctionId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!0,internalType:"address",name:"closer",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"auctionCreator",type:"address"},{indexed:!1,internalType:"address",name:"winningBidder",type:"address"}],name:"AuctionClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"auctionCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"auctionId",type:"uint256"}],name:"CancelledAuction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"auctionCreator",type:"address"},{indexed:!0,internalType:"uint256",name:"auctionId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IEnglishAuctions.Auction",name:"auction",type:"tuple"}],name:"NewAuction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"auctionId",type:"uint256"},{indexed:!0,internalType:"address",name:"bidder",type:"address"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!1,internalType:"uint256",name:"bidAmount",type:"uint256"},{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IEnglishAuctions.Auction",name:"auction",type:"tuple"}],name:"NewBid",type:"event"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"},{internalType:"uint256",name:"_bidAmount",type:"uint256"}],name:"bidInAuction",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"cancelAuction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"collectAuctionPayout",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"collectAuctionTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"}],internalType:"struct IEnglishAuctions.AuctionParameters",name:"_params",type:"tuple"}],name:"createAuction",outputs:[{internalType:"uint256",name:"auctionId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllAuctions",outputs:[{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],internalType:"struct IEnglishAuctions.Auction[]",name:"auctions",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllValidAuctions",outputs:[{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],internalType:"struct IEnglishAuctions.Auction[]",name:"auctions",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"getAuction",outputs:[{components:[{internalType:"uint256",name:"auctionId",type:"uint256"},{internalType:"address",name:"auctionCreator",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"minimumBidAmount",type:"uint256"},{internalType:"uint256",name:"buyoutBidAmount",type:"uint256"},{internalType:"uint64",name:"timeBufferInSeconds",type:"uint64"},{internalType:"uint64",name:"bidBufferBps",type:"uint64"},{internalType:"uint64",name:"startTimestamp",type:"uint64"},{internalType:"uint64",name:"endTimestamp",type:"uint64"},{internalType:"enum IEnglishAuctions.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IEnglishAuctions.Status",name:"status",type:"uint8"}],internalType:"struct IEnglishAuctions.Auction",name:"auction",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"getWinningBid",outputs:[{internalType:"address",name:"bidder",type:"address"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"bidAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"}],name:"isAuctionExpired",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_auctionId",type:"uint256"},{internalType:"uint256",name:"_bidAmount",type:"uint256"}],name:"isNewWinningBid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],IOffersAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"uint256",name:"offerId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityBought",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalPricePaid",type:"uint256"}],name:"AcceptedOffer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"uint256",name:"offerId",type:"uint256"}],name:"CancelledOffer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"uint256",name:"offerId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{components:[{internalType:"uint256",name:"offerId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"},{internalType:"enum IOffers.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IOffers.Status",name:"status",type:"uint8"}],indexed:!1,internalType:"struct IOffers.Offer",name:"offer",type:"tuple"}],name:"NewOffer",type:"event"},{inputs:[{internalType:"uint256",name:"_offerId",type:"uint256"}],name:"acceptOffer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_offerId",type:"uint256"}],name:"cancelOffer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllOffers",outputs:[{components:[{internalType:"uint256",name:"offerId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"},{internalType:"enum IOffers.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IOffers.Status",name:"status",type:"uint8"}],internalType:"struct IOffers.Offer[]",name:"offers",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_startId",type:"uint256"},{internalType:"uint256",name:"_endId",type:"uint256"}],name:"getAllValidOffers",outputs:[{components:[{internalType:"uint256",name:"offerId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"},{internalType:"enum IOffers.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IOffers.Status",name:"status",type:"uint8"}],internalType:"struct IOffers.Offer[]",name:"offers",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_offerId",type:"uint256"}],name:"getOffer",outputs:[{components:[{internalType:"uint256",name:"offerId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"},{internalType:"enum IOffers.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IOffers.Status",name:"status",type:"uint8"}],internalType:"struct IOffers.Offer",name:"offer",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"totalPrice",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"}],internalType:"struct IOffers.OfferParams",name:"_params",type:"tuple"}],name:"makeOffer",outputs:[{internalType:"uint256",name:"offerId",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],IPackVRFAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"totalPacksCreated",type:"uint256"}],name:"PackCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"opener",type:"address"},{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountToOpen",type:"uint256"},{indexed:!1,internalType:"uint256",name:"requestId",type:"uint256"}],name:"PackOpenRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!0,internalType:"address",name:"opener",type:"address"},{indexed:!1,internalType:"uint256",name:"numOfPacksOpened",type:"uint256"},{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],indexed:!1,internalType:"struct ITokenBundle.Token[]",name:"rewardUnitsDistributed",type:"tuple[]"}],name:"PackOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"requestId",type:"uint256"}],name:"PackRandomnessFulfilled",type:"event"},{inputs:[{internalType:"address",name:"_opener",type:"address"}],name:"canClaimRewards",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimRewards",outputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"rewardUnits",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"contents",type:"tuple[]"},{internalType:"uint256[]",name:"numOfRewardUnits",type:"uint256[]"},{internalType:"string",name:"packUri",type:"string"},{internalType:"uint128",name:"openStartTimestamp",type:"uint128"},{internalType:"uint128",name:"amountDistributedPerOpen",type:"uint128"},{internalType:"address",name:"recipient",type:"address"}],name:"createPack",outputs:[{internalType:"uint256",name:"packId",type:"uint256"},{internalType:"uint256",name:"packTotalSupply",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"packId",type:"uint256"},{internalType:"uint256",name:"amountToOpen",type:"uint256"}],name:"openPack",outputs:[{internalType:"uint256",name:"requestId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_packId",type:"uint256"},{internalType:"uint256",name:"_amountToOpen",type:"uint256"},{internalType:"uint32",name:"_callBackGasLimit",type:"uint32"}],name:"openPackAndClaimRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],IPermissionsAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"}],IPermissionsEnumerableAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"}],IThirdwebPlatformFeeAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"}],IThirdwebPrimarySaleAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"}],IThirdwebRoyaltyAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],IOwnableAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"}];function base$4(it){if(it.length>=255)throw new TypeError("Alphabet too long");for(var tt=new Uint8Array(256),rt=0;rt<tt.length;rt++)tt[rt]=255;for(var at=0;at<it.length;at++){var st=it.charAt(at),ot=st.charCodeAt(0);if(tt[ot]!==255)throw new TypeError(st+" is ambiguous");tt[ot]=at}var lt=it.length,ut=it.charAt(0),ht=Math.log(lt)/Math.log(256),mt=Math.log(256)/Math.log(lt);function bt(xt){if(xt instanceof Uint8Array||(ArrayBuffer.isView(xt)?xt=new Uint8Array(xt.buffer,xt.byteOffset,xt.byteLength):Array.isArray(xt)&&(xt=Uint8Array.from(xt))),!(xt instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(xt.length===0)return"";for(var Et=0,Tt=0,wt=0,Ct=xt.length;wt!==Ct&&xt[wt]===0;)wt++,Et++;for(var It=(Ct-wt)*mt+1>>>0,St=new Uint8Array(It);wt!==Ct;){for(var Rt=xt[wt],Dt=0,Wt=It-1;(Rt!==0||Dt<Tt)&&Wt!==-1;Wt--,Dt++)Rt+=256*St[Wt]>>>0,St[Wt]=Rt%lt>>>0,Rt=Rt/lt>>>0;if(Rt!==0)throw new Error("Non-zero carry");Tt=Dt,wt++}for(var qt=It-Tt;qt!==It&&St[qt]===0;)qt++;for(var Vt=ut.repeat(Et);qt<It;++qt)Vt+=it.charAt(St[qt]);return Vt}function vt(xt){if(typeof xt!="string")throw new TypeError("Expected String");if(xt.length===0)return new Uint8Array;for(var Et=0,Tt=0,wt=0;xt[Et]===ut;)Tt++,Et++;for(var Ct=(xt.length-Et)*ht+1>>>0,It=new Uint8Array(Ct);xt[Et];){var St=tt[xt.charCodeAt(Et)];if(St===255)return;for(var Rt=0,Dt=Ct-1;(St!==0||Rt<wt)&&Dt!==-1;Dt--,Rt++)St+=lt*It[Dt]>>>0,It[Dt]=St%256>>>0,St=St/256>>>0;if(St!==0)throw new Error("Non-zero carry");wt=Rt,Et++}for(var Wt=Ct-wt;Wt!==Ct&&It[Wt]===0;)Wt++;for(var qt=new Uint8Array(Tt+(Ct-Wt)),Vt=Tt;Wt!==Ct;)qt[Vt++]=It[Wt++];return qt}function At(xt){var Et=vt(xt);if(Et)return Et;throw new Error("Non-base"+lt+" character")}return{encode:bt,decodeUnsafe:vt,decode:At}}var src$e=base$4;const basex=src$e,ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var bs58=basex(ALPHABET),browserPonyfill={exports:{}};(function(it,tt){var rt=function(){function st(){this.fetch=!1,this.DOMException=globalThis.DOMException}return st.prototype=globalThis,new st}();(function(st){(function(ot){var lt={searchParams:"URLSearchParams"in st,iterable:"Symbol"in st&&"iterator"in Symbol,blob:"FileReader"in st&&"Blob"in st&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in st,arrayBuffer:"ArrayBuffer"in st};function ut(Nt){return Nt&&DataView.prototype.isPrototypeOf(Nt)}if(lt.arrayBuffer)var ht=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],mt=ArrayBuffer.isView||function(Nt){return Nt&&ht.indexOf(Object.prototype.toString.call(Nt))>-1};function bt(Nt){if(typeof Nt!="string"&&(Nt=String(Nt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Nt))throw new TypeError("Invalid character in header field name");return Nt.toLowerCase()}function vt(Nt){return typeof Nt!="string"&&(Nt=String(Nt)),Nt}function At(Nt){var Mt={next:function(){var Lt=Nt.shift();return{done:Lt===void 0,value:Lt}}};return lt.iterable&&(Mt[Symbol.iterator]=function(){return Mt}),Mt}function xt(Nt){this.map={},Nt instanceof xt?Nt.forEach(function(Mt,Lt){this.append(Lt,Mt)},this):Array.isArray(Nt)?Nt.forEach(function(Mt){this.append(Mt[0],Mt[1])},this):Nt&&Object.getOwnPropertyNames(Nt).forEach(function(Mt){this.append(Mt,Nt[Mt])},this)}xt.prototype.append=function(Nt,Mt){Nt=bt(Nt),Mt=vt(Mt);var Lt=this.map[Nt];this.map[Nt]=Lt?Lt+", "+Mt:Mt},xt.prototype.delete=function(Nt){delete this.map[bt(Nt)]},xt.prototype.get=function(Nt){return Nt=bt(Nt),this.has(Nt)?this.map[Nt]:null},xt.prototype.has=function(Nt){return this.map.hasOwnProperty(bt(Nt))},xt.prototype.set=function(Nt,Mt){this.map[bt(Nt)]=vt(Mt)},xt.prototype.forEach=function(Nt,Mt){for(var Lt in this.map)this.map.hasOwnProperty(Lt)&&Nt.call(Mt,this.map[Lt],Lt,this)},xt.prototype.keys=function(){var Nt=[];return this.forEach(function(Mt,Lt){Nt.push(Lt)}),At(Nt)},xt.prototype.values=function(){var Nt=[];return this.forEach(function(Mt){Nt.push(Mt)}),At(Nt)},xt.prototype.entries=function(){var Nt=[];return this.forEach(function(Mt,Lt){Nt.push([Lt,Mt])}),At(Nt)},lt.iterable&&(xt.prototype[Symbol.iterator]=xt.prototype.entries);function Et(Nt){if(Nt.bodyUsed)return Promise.reject(new TypeError("Already read"));Nt.bodyUsed=!0}function Tt(Nt){return new Promise(function(Mt,Lt){Nt.onload=function(){Mt(Nt.result)},Nt.onerror=function(){Lt(Nt.error)}})}function wt(Nt){var Mt=new FileReader,Lt=Tt(Mt);return Mt.readAsArrayBuffer(Nt),Lt}function Ct(Nt){var Mt=new FileReader,Lt=Tt(Mt);return Mt.readAsText(Nt),Lt}function It(Nt){for(var Mt=new Uint8Array(Nt),Lt=new Array(Mt.length),Ht=0;Ht<Mt.length;Ht++)Lt[Ht]=String.fromCharCode(Mt[Ht]);return Lt.join("")}function St(Nt){if(Nt.slice)return Nt.slice(0);var Mt=new Uint8Array(Nt.byteLength);return Mt.set(new Uint8Array(Nt)),Mt.buffer}function Rt(){return this.bodyUsed=!1,this._initBody=function(Nt){this._bodyInit=Nt,Nt?typeof Nt=="string"?this._bodyText=Nt:lt.blob&&Blob.prototype.isPrototypeOf(Nt)?this._bodyBlob=Nt:lt.formData&&FormData.prototype.isPrototypeOf(Nt)?this._bodyFormData=Nt:lt.searchParams&&URLSearchParams.prototype.isPrototypeOf(Nt)?this._bodyText=Nt.toString():lt.arrayBuffer&&lt.blob&&ut(Nt)?(this._bodyArrayBuffer=St(Nt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):lt.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Nt)||mt(Nt))?this._bodyArrayBuffer=St(Nt):this._bodyText=Nt=Object.prototype.toString.call(Nt):this._bodyText="",this.headers.get("content-type")||(typeof Nt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):lt.searchParams&&URLSearchParams.prototype.isPrototypeOf(Nt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},lt.blob&&(this.blob=function(){var Nt=Et(this);if(Nt)return Nt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Et(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(wt)}),this.text=function(){var Nt=Et(this);if(Nt)return Nt;if(this._bodyBlob)return Ct(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(It(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},lt.formData&&(this.formData=function(){return this.text().then(Vt)}),this.json=function(){return this.text().then(JSON.parse)},this}var Dt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Wt(Nt){var Mt=Nt.toUpperCase();return Dt.indexOf(Mt)>-1?Mt:Nt}function qt(Nt,Mt){Mt=Mt||{};var Lt=Mt.body;if(Nt instanceof qt){if(Nt.bodyUsed)throw new TypeError("Already read");this.url=Nt.url,this.credentials=Nt.credentials,Mt.headers||(this.headers=new xt(Nt.headers)),this.method=Nt.method,this.mode=Nt.mode,this.signal=Nt.signal,!Lt&&Nt._bodyInit!=null&&(Lt=Nt._bodyInit,Nt.bodyUsed=!0)}else this.url=String(Nt);if(this.credentials=Mt.credentials||this.credentials||"same-origin",(Mt.headers||!this.headers)&&(this.headers=new xt(Mt.headers)),this.method=Wt(Mt.method||this.method||"GET"),this.mode=Mt.mode||this.mode||null,this.signal=Mt.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Lt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Lt)}qt.prototype.clone=function(){return new qt(this,{body:this._bodyInit})};function Vt(Nt){var Mt=new FormData;return Nt.trim().split("&").forEach(function(Lt){if(Lt){var Ht=Lt.split("="),Qt=Ht.shift().replace(/\+/g," "),Ut=Ht.join("=").replace(/\+/g," ");Mt.append(decodeURIComponent(Qt),decodeURIComponent(Ut))}}),Mt}function Yt(Nt){var Mt=new xt,Lt=Nt.replace(/\r?\n[\t ]+/g," ");return Lt.split(/\r?\n/).forEach(function(Ht){var Qt=Ht.split(":"),Ut=Qt.shift().trim();if(Ut){var Bt=Qt.join(":").trim();Mt.append(Ut,Bt)}}),Mt}Rt.call(qt.prototype);function jt(Nt,Mt){Mt||(Mt={}),this.type="default",this.status=Mt.status===void 0?200:Mt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Mt?Mt.statusText:"OK",this.headers=new xt(Mt.headers),this.url=Mt.url||"",this._initBody(Nt)}Rt.call(jt.prototype),jt.prototype.clone=function(){return new jt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new xt(this.headers),url:this.url})},jt.error=function(){var Nt=new jt(null,{status:0,statusText:""});return Nt.type="error",Nt};var kt=[301,302,303,307,308];jt.redirect=function(Nt,Mt){if(kt.indexOf(Mt)===-1)throw new RangeError("Invalid status code");return new jt(null,{status:Mt,headers:{location:Nt}})},ot.DOMException=st.DOMException;try{new ot.DOMException}catch{ot.DOMException=function(Mt,Lt){this.message=Mt,this.name=Lt;var Ht=Error(Mt);this.stack=Ht.stack},ot.DOMException.prototype=Object.create(Error.prototype),ot.DOMException.prototype.constructor=ot.DOMException}function zt(Nt,Mt){return new Promise(function(Lt,Ht){var Qt=new qt(Nt,Mt);if(Qt.signal&&Qt.signal.aborted)return Ht(new ot.DOMException("Aborted","AbortError"));var Ut=new XMLHttpRequest;function Bt(){Ut.abort()}Ut.onload=function(){var Kt={status:Ut.status,statusText:Ut.statusText,headers:Yt(Ut.getAllResponseHeaders()||"")};Kt.url="responseURL"in Ut?Ut.responseURL:Kt.headers.get("X-Request-URL");var Gt="response"in Ut?Ut.response:Ut.responseText;Lt(new jt(Gt,Kt))},Ut.onerror=function(){Ht(new TypeError("Network request failed"))},Ut.ontimeout=function(){Ht(new TypeError("Network request failed"))},Ut.onabort=function(){Ht(new ot.DOMException("Aborted","AbortError"))},Ut.open(Qt.method,Qt.url,!0),Qt.credentials==="include"?Ut.withCredentials=!0:Qt.credentials==="omit"&&(Ut.withCredentials=!1),"responseType"in Ut&&lt.blob&&(Ut.responseType="blob"),Qt.headers.forEach(function(Kt,Gt){Ut.setRequestHeader(Gt,Kt)}),Qt.signal&&(Qt.signal.addEventListener("abort",Bt),Ut.onreadystatechange=function(){Ut.readyState===4&&Qt.signal.removeEventListener("abort",Bt)}),Ut.send(typeof Qt._bodyInit>"u"?null:Qt._bodyInit)})}return zt.polyfill=!0,st.fetch||(st.fetch=zt,st.Headers=xt,st.Request=qt,st.Response=jt),ot.Headers=xt,ot.Request=qt,ot.Response=jt,ot.fetch=zt,Object.defineProperty(ot,"__esModule",{value:!0}),ot})({})})(rt),rt.fetch.ponyfill=!0,delete rt.fetch.polyfill;var at=rt;tt=at.fetch,tt.default=at.fetch,tt.fetch=at.fetch,tt.Headers=at.Headers,tt.Request=at.Request,tt.Response=at.Response,it.exports=tt})(browserPonyfill,browserPonyfill.exports);const fetch$1=getDefaultExportFromCjs(browserPonyfill.exports);var eventemitter3$3={exports:{}};(function(it){var tt=Object.prototype.hasOwnProperty,rt="~";function at(){}Object.create&&(at.prototype=Object.create(null),new at().__proto__||(rt=!1));function st(ht,mt,bt){this.fn=ht,this.context=mt,this.once=bt||!1}function ot(ht,mt,bt,vt,At){if(typeof bt!="function")throw new TypeError("The listener must be a function");var xt=new st(bt,vt||ht,At),Et=rt?rt+mt:mt;return ht._events[Et]?ht._events[Et].fn?ht._events[Et]=[ht._events[Et],xt]:ht._events[Et].push(xt):(ht._events[Et]=xt,ht._eventsCount++),ht}function lt(ht,mt){--ht._eventsCount===0?ht._events=new at:delete ht._events[mt]}function ut(){this._events=new at,this._eventsCount=0}ut.prototype.eventNames=function(){var mt=[],bt,vt;if(this._eventsCount===0)return mt;for(vt in bt=this._events)tt.call(bt,vt)&&mt.push(rt?vt.slice(1):vt);return Object.getOwnPropertySymbols?mt.concat(Object.getOwnPropertySymbols(bt)):mt},ut.prototype.listeners=function(mt){var bt=rt?rt+mt:mt,vt=this._events[bt];if(!vt)return[];if(vt.fn)return[vt.fn];for(var At=0,xt=vt.length,Et=new Array(xt);At<xt;At++)Et[At]=vt[At].fn;return Et},ut.prototype.listenerCount=function(mt){var bt=rt?rt+mt:mt,vt=this._events[bt];return vt?vt.fn?1:vt.length:0},ut.prototype.emit=function(mt,bt,vt,At,xt,Et){var Tt=rt?rt+mt:mt;if(!this._events[Tt])return!1;var wt=this._events[Tt],Ct=arguments.length,It,St;if(wt.fn){switch(wt.once&&this.removeListener(mt,wt.fn,void 0,!0),Ct){case 1:return wt.fn.call(wt.context),!0;case 2:return wt.fn.call(wt.context,bt),!0;case 3:return wt.fn.call(wt.context,bt,vt),!0;case 4:return wt.fn.call(wt.context,bt,vt,At),!0;case 5:return wt.fn.call(wt.context,bt,vt,At,xt),!0;case 6:return wt.fn.call(wt.context,bt,vt,At,xt,Et),!0}for(St=1,It=new Array(Ct-1);St<Ct;St++)It[St-1]=arguments[St];wt.fn.apply(wt.context,It)}else{var Rt=wt.length,Dt;for(St=0;St<Rt;St++)switch(wt[St].once&&this.removeListener(mt,wt[St].fn,void 0,!0),Ct){case 1:wt[St].fn.call(wt[St].context);break;case 2:wt[St].fn.call(wt[St].context,bt);break;case 3:wt[St].fn.call(wt[St].context,bt,vt);break;case 4:wt[St].fn.call(wt[St].context,bt,vt,At);break;default:if(!It)for(Dt=1,It=new Array(Ct-1);Dt<Ct;Dt++)It[Dt-1]=arguments[Dt];wt[St].fn.apply(wt[St].context,It)}}return!0},ut.prototype.on=function(mt,bt,vt){return ot(this,mt,bt,vt,!1)},ut.prototype.once=function(mt,bt,vt){return ot(this,mt,bt,vt,!0)},ut.prototype.removeListener=function(mt,bt,vt,At){var xt=rt?rt+mt:mt;if(!this._events[xt])return this;if(!bt)return lt(this,xt),this;var Et=this._events[xt];if(Et.fn)Et.fn===bt&&(!At||Et.once)&&(!vt||Et.context===vt)&&lt(this,xt);else{for(var Tt=0,wt=[],Ct=Et.length;Tt<Ct;Tt++)(Et[Tt].fn!==bt||At&&!Et[Tt].once||vt&&Et[Tt].context!==vt)&&wt.push(Et[Tt]);wt.length?this._events[xt]=wt.length===1?wt[0]:wt:lt(this,xt)}return this},ut.prototype.removeAllListeners=function(mt){var bt;return mt?(bt=rt?rt+mt:mt,this._events[bt]&&lt(this,bt)):(this._events=new at,this._eventsCount=0),this},ut.prototype.off=ut.prototype.removeListener,ut.prototype.addListener=ut.prototype.on,ut.prefixed=rt,ut.EventEmitter=ut,it.exports=ut})(eventemitter3$3);const EventEmitter$1$1=eventemitter3$3.exports,ForwarderABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{components:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"gas",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Forwarder.ForwardRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"execute",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"gas",type:"uint256"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Forwarder.ForwardRequest",name:"req",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}];async function*batch$1(it,tt=1){let rt=[];tt<1&&(tt=1);for await(const at of it)for(rt.push(at);rt.length>=tt;)yield rt.slice(0,tt),rt=rt.slice(tt);for(;rt.length;)yield rt.slice(0,tt),rt=rt.slice(tt)}var itBatch=batch$1;const batch=itBatch;async function*parallelBatch$1(it,tt=1){for await(const rt of batch(it,tt)){const at=rt.map(st=>st().then(ot=>({ok:!0,value:ot}),ot=>({ok:!1,err:ot})));for(let st=0;st<at.length;st++){const ot=await at[st];if(ot.ok)yield ot.value;else throw ot.err}}}var itParallelBatch=parallelBatch$1,isPlainObj=it=>{if(Object.prototype.toString.call(it)!=="[object Object]")return!1;const tt=Object.getPrototypeOf(it);return tt===null||tt===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty:hasOwnProperty$3}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(it,tt,rt)=>Object.defineProperty(it,tt,{value:rt,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=it=>{const tt=[];for(const rt in it)hasOwnProperty$3.call(it,rt)&&tt.push(rt);if(Object.getOwnPropertySymbols){const rt=Object.getOwnPropertySymbols(it);for(const at of rt)propertyIsEnumerable.call(it,at)&&tt.push(at)}return tt};function clone$1(it){return Array.isArray(it)?cloneArray(it):isOptionObject(it)?cloneOptionObject(it):it}function cloneArray(it){const tt=it.slice(0,0);return getEnumerableOwnPropertyKeys(it).forEach(rt=>{defineProperty(tt,rt,clone$1(it[rt]))}),tt}function cloneOptionObject(it){const tt=Object.getPrototypeOf(it)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(it).forEach(rt=>{defineProperty(tt,rt,clone$1(it[rt]))}),tt}const mergeKeys=(it,tt,rt,at)=>(rt.forEach(st=>{typeof tt[st]>"u"&&at.ignoreUndefined||(st in it&&it[st]!==Object.getPrototypeOf(it)?defineProperty(it,st,merge$4(it[st],tt[st],at)):defineProperty(it,st,clone$1(tt[st])))}),it),concatArrays$1=(it,tt,rt)=>{let at=it.slice(0,0),st=0;return[it,tt].forEach(ot=>{const lt=[];for(let ut=0;ut<ot.length;ut++)!hasOwnProperty$3.call(ot,ut)||(lt.push(String(ut)),ot===it?defineProperty(at,st++,ot[ut]):defineProperty(at,st++,clone$1(ot[ut])));at=mergeKeys(at,ot,getEnumerableOwnPropertyKeys(ot).filter(ut=>!lt.includes(ut)),rt)}),at};function merge$4(it,tt,rt){return rt.concatArrays&&Array.isArray(it)&&Array.isArray(tt)?concatArrays$1(it,tt,rt):!isOptionObject(tt)||!isOptionObject(it)?clone$1(tt):mergeKeys(it,tt,getEnumerableOwnPropertyKeys(tt),rt)}var mergeOptions$1=function(...it){const tt=merge$4(clone$1(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let rt={_:{}};for(const at of it)if(at!==void 0){if(!isOptionObject(at))throw new TypeError("`"+at+"` is not an Option Object");rt=merge$4(rt,{_:at},tt)}return rt._};function assign$2(it,tt){for(const rt in tt)Object.defineProperty(it,rt,{value:tt[rt],enumerable:!0,configurable:!0});return it}function createError(it,tt,rt){if(!it||typeof it=="string")throw new TypeError("Please pass an Error to err-code");rt||(rt={}),typeof tt=="object"&&(rt=tt,tt=""),tt&&(rt.code=tt);try{return assign$2(it,rt)}catch{rt.message=it.message,rt.stack=it.stack;const st=function(){};return st.prototype=Object.create(Object.getPrototypeOf(it)),assign$2(new st,rt)}}var errCode=createError,src$d={exports:{}};function base$3(it){if(it.length>=255)throw new TypeError("Alphabet too long");for(var tt=new Uint8Array(256),rt=0;rt<tt.length;rt++)tt[rt]=255;for(var at=0;at<it.length;at++){var st=it.charAt(at),ot=st.charCodeAt(0);if(tt[ot]!==255)throw new TypeError(st+" is ambiguous");tt[ot]=at}var lt=it.length,ut=it.charAt(0),ht=Math.log(lt)/Math.log(256),mt=Math.log(256)/Math.log(lt);function bt(xt){if(xt instanceof Uint8Array||(ArrayBuffer.isView(xt)?xt=new Uint8Array(xt.buffer,xt.byteOffset,xt.byteLength):Array.isArray(xt)&&(xt=Uint8Array.from(xt))),!(xt instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(xt.length===0)return"";for(var Et=0,Tt=0,wt=0,Ct=xt.length;wt!==Ct&&xt[wt]===0;)wt++,Et++;for(var It=(Ct-wt)*mt+1>>>0,St=new Uint8Array(It);wt!==Ct;){for(var Rt=xt[wt],Dt=0,Wt=It-1;(Rt!==0||Dt<Tt)&&Wt!==-1;Wt--,Dt++)Rt+=256*St[Wt]>>>0,St[Wt]=Rt%lt>>>0,Rt=Rt/lt>>>0;if(Rt!==0)throw new Error("Non-zero carry");Tt=Dt,wt++}for(var qt=It-Tt;qt!==It&&St[qt]===0;)qt++;for(var Vt=ut.repeat(Et);qt<It;++qt)Vt+=it.charAt(St[qt]);return Vt}function vt(xt){if(typeof xt!="string")throw new TypeError("Expected String");if(xt.length===0)return new Uint8Array;var Et=0;if(xt[Et]!==" "){for(var Tt=0,wt=0;xt[Et]===ut;)Tt++,Et++;for(var Ct=(xt.length-Et)*ht+1>>>0,It=new Uint8Array(Ct);xt[Et];){var St=tt[xt.charCodeAt(Et)];if(St===255)return;for(var Rt=0,Dt=Ct-1;(St!==0||Rt<wt)&&Dt!==-1;Dt--,Rt++)St+=lt*It[Dt]>>>0,It[Dt]=St%256>>>0,St=St/256>>>0;if(St!==0)throw new Error("Non-zero carry");wt=Rt,Et++}if(xt[Et]!==" "){for(var Wt=Ct-wt;Wt!==Ct&&It[Wt]===0;)Wt++;for(var qt=new Uint8Array(Tt+(Ct-Wt)),Vt=Tt;Wt!==Ct;)qt[Vt++]=It[Wt++];return qt}}}function At(xt){var Et=vt(xt);if(Et)return Et;throw new Error("Non-base"+lt+" character")}return{encode:bt,decodeUnsafe:vt,decode:At}}var src$c=base$3;const textDecoder$1=new TextDecoder,decodeText$1=it=>textDecoder$1.decode(it),textEncoder$1=new TextEncoder,encodeText$2=it=>textEncoder$1.encode(it);function concat$5(it,tt){const rt=new Uint8Array(tt);let at=0;for(const st of it)rt.set(st,at),at+=st.length;return rt}var util$a={decodeText:decodeText$1,encodeText:encodeText$2,concat:concat$5};const{encodeText:encodeText$1}=util$a;class Base$3{constructor(tt,rt,at,st){this.name=tt,this.code=rt,this.codeBuf=encodeText$1(this.code),this.alphabet=st,this.codec=at(st)}encode(tt){return this.codec.encode(tt)}decode(tt){for(const rt of tt)if(this.alphabet&&this.alphabet.indexOf(rt)<0)throw new Error(`invalid character '${rt}' in '${tt}'`);return this.codec.decode(tt)}}var base$2=Base$3;const decode$d=(it,tt,rt)=>{const at={};for(let mt=0;mt<tt.length;++mt)at[tt[mt]]=mt;let st=it.length;for(;it[st-1]==="=";)--st;const ot=new Uint8Array(st*rt/8|0);let lt=0,ut=0,ht=0;for(let mt=0;mt<st;++mt){const bt=at[it[mt]];if(bt===void 0)throw new SyntaxError("Invalid character "+it[mt]);ut=ut<<rt|bt,lt+=rt,lt>=8&&(lt-=8,ot[ht++]=255&ut>>lt)}if(lt>=rt||255&ut<<8-lt)throw new SyntaxError("Unexpected end of data");return ot},encode$9=(it,tt,rt)=>{const at=tt[tt.length-1]==="=",st=(1<<rt)-1;let ot="",lt=0,ut=0;for(let ht=0;ht<it.length;++ht)for(ut=ut<<8|it[ht],lt+=8;lt>rt;)lt-=rt,ot+=tt[st&ut>>lt];if(lt&&(ot+=tt[st&ut<<rt-lt]),at)for(;ot.length*rt&7;)ot+="=";return ot},rfc4648$2=it=>tt=>({encode(rt){return encode$9(rt,tt,it)},decode(rt){return decode$d(rt,tt,it)}});var rfc4648_1={rfc4648:rfc4648$2};const baseX$1=src$c,Base$2=base$2,{rfc4648:rfc4648$1}=rfc4648_1,{decodeText,encodeText}=util$a,identity$5=()=>({encode:decodeText,decode:encodeText}),constants$2=[["identity","\0",identity$5,""],["base2","0",rfc4648$1(1),"01"],["base8","7",rfc4648$1(3),"01234567"],["base10","9",baseX$1,"0123456789"],["base16","f",rfc4648$1(4),"0123456789abcdef"],["base16upper","F",rfc4648$1(4),"0123456789ABCDEF"],["base32hex","v",rfc4648$1(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",rfc4648$1(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",rfc4648$1(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",rfc4648$1(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",rfc4648$1(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",rfc4648$1(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",rfc4648$1(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",rfc4648$1(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",rfc4648$1(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",baseX$1,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",baseX$1,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",baseX$1,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",baseX$1,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",rfc4648$1(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",rfc4648$1(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",rfc4648$1(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",rfc4648$1(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],names$3=constants$2.reduce((it,tt)=>(it[tt[0]]=new Base$2(tt[0],tt[1],tt[2],tt[3]),it),{}),codes$2=constants$2.reduce((it,tt)=>(it[tt[1]]=names$3[tt[0]],it),{});var constants_1={names:names$3,codes:codes$2};(function(it,tt){const rt=constants_1,{encodeText:at,decodeText:st,concat:ot}=util$a;function lt(Tt,wt){if(!wt)throw new Error("requires an encoded Uint8Array");const{name:Ct,codeBuf:It}=vt(Tt);return bt(Ct,wt),ot([It,wt],It.length+wt.length)}function ut(Tt,wt){const Ct=vt(Tt),It=at(Ct.encode(wt));return ot([Ct.codeBuf,It],Ct.codeBuf.length+It.length)}function ht(Tt){Tt instanceof Uint8Array&&(Tt=st(Tt));const wt=Tt[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(wt)&&(Tt=Tt.toLowerCase()),vt(Tt[0]).decode(Tt.substring(1))}function mt(Tt){if(Tt instanceof Uint8Array&&(Tt=st(Tt)),Object.prototype.toString.call(Tt)!=="[object String]")return!1;try{return vt(Tt[0]).name}catch{return!1}}function bt(Tt,wt){vt(Tt).decode(st(wt))}function vt(Tt){if(Object.prototype.hasOwnProperty.call(rt.names,Tt))return rt.names[Tt];if(Object.prototype.hasOwnProperty.call(rt.codes,Tt))return rt.codes[Tt];throw new Error(`Unsupported encoding: ${Tt}`)}function At(Tt){return Tt instanceof Uint8Array&&(Tt=st(Tt)),vt(Tt[0])}tt=it.exports=lt,tt.encode=ut,tt.decode=ht,tt.isEncoded=mt,tt.encoding=vt,tt.encodingFromData=At;const xt=Object.freeze(rt.names),Et=Object.freeze(rt.codes);tt.names=xt,tt.codes=Et})(src$d,src$d.exports);var encode_1$2=encode$8,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$8(it,tt,rt){tt=tt||[],rt=rt||0;for(var at=rt;it>=INT$1;)tt[rt++]=it&255|MSB$3,it/=128;for(;it&MSBALL$1;)tt[rt++]=it&255|MSB$3,it>>>=7;return tt[rt]=it|0,encode$8.bytes=rt-at+1,tt}var decode$c=read$2,MSB$2=128,REST$2=127;function read$2(it,at){var rt=0,at=at||0,st=0,ot=at,lt,ut=it.length;do{if(ot>=ut)throw read$2.bytes=0,new RangeError("Could not decode varint");lt=it[ot++],rt+=st<28?(lt&REST$2)<<st:(lt&REST$2)*Math.pow(2,st),st+=7}while(lt>=MSB$2);return read$2.bytes=ot-at,rt}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$3=function(it){return it<N1$1?1:it<N2$1?2:it<N3$1?3:it<N4$1?4:it<N5$1?5:it<N6$1?6:it<N7$1?7:it<N8$1?8:it<N9$1?9:10},varint$4={encode:encode_1$2,decode:decode$c,encodingLength:length$3};const names$2=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});var constants$1={names:names$2};function base$1(it,tt){if(it.length>=255)throw new TypeError("Alphabet too long");for(var rt=new Uint8Array(256),at=0;at<rt.length;at++)rt[at]=255;for(var st=0;st<it.length;st++){var ot=it.charAt(st),lt=ot.charCodeAt(0);if(rt[lt]!==255)throw new TypeError(ot+" is ambiguous");rt[lt]=st}var ut=it.length,ht=it.charAt(0),mt=Math.log(ut)/Math.log(256),bt=Math.log(256)/Math.log(ut);function vt(Et){if(Et instanceof Uint8Array||(ArrayBuffer.isView(Et)?Et=new Uint8Array(Et.buffer,Et.byteOffset,Et.byteLength):Array.isArray(Et)&&(Et=Uint8Array.from(Et))),!(Et instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Et.length===0)return"";for(var Tt=0,wt=0,Ct=0,It=Et.length;Ct!==It&&Et[Ct]===0;)Ct++,Tt++;for(var St=(It-Ct)*bt+1>>>0,Rt=new Uint8Array(St);Ct!==It;){for(var Dt=Et[Ct],Wt=0,qt=St-1;(Dt!==0||Wt<wt)&&qt!==-1;qt--,Wt++)Dt+=256*Rt[qt]>>>0,Rt[qt]=Dt%ut>>>0,Dt=Dt/ut>>>0;if(Dt!==0)throw new Error("Non-zero carry");wt=Wt,Ct++}for(var Vt=St-wt;Vt!==St&&Rt[Vt]===0;)Vt++;for(var Yt=ht.repeat(Tt);Vt<St;++Vt)Yt+=it.charAt(Rt[Vt]);return Yt}function At(Et){if(typeof Et!="string")throw new TypeError("Expected String");if(Et.length===0)return new Uint8Array;var Tt=0;if(Et[Tt]!==" "){for(var wt=0,Ct=0;Et[Tt]===ht;)wt++,Tt++;for(var It=(Et.length-Tt)*mt+1>>>0,St=new Uint8Array(It);Et[Tt];){var Rt=rt[Et.charCodeAt(Tt)];if(Rt===255)return;for(var Dt=0,Wt=It-1;(Rt!==0||Dt<Ct)&&Wt!==-1;Wt--,Dt++)Rt+=ut*St[Wt]>>>0,St[Wt]=Rt%256>>>0,Rt=Rt/256>>>0;if(Rt!==0)throw new Error("Non-zero carry");Ct=Dt,Tt++}if(Et[Tt]!==" "){for(var qt=It-Ct;qt!==It&&St[qt]===0;)qt++;for(var Vt=new Uint8Array(wt+(It-qt)),Yt=wt;qt!==It;)Vt[Yt++]=St[qt++];return Vt}}}function xt(Et){var Tt=At(Et);if(Tt)return Tt;throw new Error(`Non-${tt} character`)}return{encode:vt,decodeUnsafe:At,decode:xt}}var src$b=base$1,_brrp__multiformats_scope_baseX=src$b;const empty$2=new Uint8Array(0),toHex=it=>it.reduce((tt,rt)=>tt+rt.toString(16).padStart(2,"0"),""),fromHex=it=>{const tt=it.match(/../g);return tt?new Uint8Array(tt.map(rt=>parseInt(rt,16))):empty$2},equals$4=(it,tt)=>{if(it===tt)return!0;if(it.byteLength!==tt.byteLength)return!1;for(let rt=0;rt<it.byteLength;rt++)if(it[rt]!==tt[rt])return!1;return!0},coerce=it=>{if(it instanceof Uint8Array&&it.constructor.name==="Uint8Array")return it;if(it instanceof ArrayBuffer)return new Uint8Array(it);if(ArrayBuffer.isView(it))return new Uint8Array(it.buffer,it.byteOffset,it.byteLength);throw new Error("Unknown type, must be binary type")},isBinary=it=>it instanceof ArrayBuffer||ArrayBuffer.isView(it),fromString$3=it=>new TextEncoder().encode(it),toString$4=it=>new TextDecoder().decode(it),bytes=Object.freeze(Object.defineProperty({__proto__:null,equals:equals$4,coerce,isBinary,fromHex,toHex,fromString:fromString$3,toString:toString$4,empty:empty$2},Symbol.toStringTag,{value:"Module"}));class Encoder{constructor(tt,rt,at){this.name=tt,this.prefix=rt,this.baseEncode=at}encode(tt){if(tt instanceof Uint8Array)return`${this.prefix}${this.baseEncode(tt)}`;throw Error("Unknown type, must be binary type")}}class Decoder$1{constructor(tt,rt,at){if(this.name=tt,this.prefix=rt,rt.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=rt.codePointAt(0),this.baseDecode=at}decode(tt){if(typeof tt=="string"){if(tt.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(tt)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(tt.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(tt){return or$1(this,tt)}}class ComposedDecoder{constructor(tt){this.decoders=tt}or(tt){return or$1(this,tt)}decode(tt){const rt=tt[0],at=this.decoders[rt];if(at)return at.decode(tt);throw RangeError(`Unable to decode multibase string ${JSON.stringify(tt)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$1=(it,tt)=>new ComposedDecoder({...it.decoders||{[it.prefix]:it},...tt.decoders||{[tt.prefix]:tt}});class Codec{constructor(tt,rt,at,st){this.name=tt,this.prefix=rt,this.baseEncode=at,this.baseDecode=st,this.encoder=new Encoder(tt,rt,at),this.decoder=new Decoder$1(tt,rt,st)}encode(tt){return this.encoder.encode(tt)}decode(tt){return this.decoder.decode(tt)}}const from$4=({name:it,prefix:tt,encode:rt,decode:at})=>new Codec(it,tt,rt,at),baseX=({prefix:it,name:tt,alphabet:rt})=>{const{encode:at,decode:st}=_brrp__multiformats_scope_baseX(rt,tt);return from$4({prefix:it,name:tt,encode:at,decode:ot=>coerce(st(ot))})},decode$b=(it,tt,rt,at)=>{const st={};for(let bt=0;bt<tt.length;++bt)st[tt[bt]]=bt;let ot=it.length;for(;it[ot-1]==="=";)--ot;const lt=new Uint8Array(ot*rt/8|0);let ut=0,ht=0,mt=0;for(let bt=0;bt<ot;++bt){const vt=st[it[bt]];if(vt===void 0)throw new SyntaxError(`Non-${at} character`);ht=ht<<rt|vt,ut+=rt,ut>=8&&(ut-=8,lt[mt++]=255&ht>>ut)}if(ut>=rt||255&ht<<8-ut)throw new SyntaxError("Unexpected end of data");return lt},encode$7=(it,tt,rt)=>{const at=tt[tt.length-1]==="=",st=(1<<rt)-1;let ot="",lt=0,ut=0;for(let ht=0;ht<it.length;++ht)for(ut=ut<<8|it[ht],lt+=8;lt>rt;)lt-=rt,ot+=tt[st&ut>>lt];if(lt&&(ot+=tt[st&ut<<rt-lt]),at)for(;ot.length*rt&7;)ot+="=";return ot},rfc4648=({name:it,prefix:tt,bitsPerChar:rt,alphabet:at})=>from$4({prefix:tt,name:it,encode(st){return encode$7(st,at,rt)},decode(st){return decode$b(st,at,rt,it)}}),identity$4=from$4({prefix:"\0",name:"identity",encode:it=>toString$4(it),decode:it=>fromString$3(it)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$4},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"})),base64$1=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$2=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$1,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars=alphabet.reduce((it,tt,rt)=>(it[rt]=tt,it),[]),alphabetCharsToBytes=alphabet.reduce((it,tt,rt)=>(it[tt.codePointAt(0)]=rt,it),[]);function encode$6(it){return it.reduce((tt,rt)=>(tt+=alphabetBytesToChars[rt],tt),"")}function decode$a(it){const tt=[];for(const rt of it){const at=alphabetCharsToBytes[rt.codePointAt(0)];if(at===void 0)throw new Error(`Non-base256emoji character: ${rt}`);tt.push(at)}return new Uint8Array(tt)}const base256emoji=from$4({prefix:"\u{1F680}",name:"base256emoji",encode:encode$6,decode:decode$a}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"}));var encode_1$1=encode$5,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$5(it,tt,rt){tt=tt||[],rt=rt||0;for(var at=rt;it>=INT;)tt[rt++]=it&255|MSB,it/=128;for(;it&MSBALL;)tt[rt++]=it&255|MSB,it>>>=7;return tt[rt]=it|0,encode$5.bytes=rt-at+1,tt}var decode$9=read$1,MSB$1=128,REST$1=127;function read$1(it,at){var rt=0,at=at||0,st=0,ot=at,lt,ut=it.length;do{if(ot>=ut)throw read$1.bytes=0,new RangeError("Could not decode varint");lt=it[ot++],rt+=st<28?(lt&REST$1)<<st:(lt&REST$1)*Math.pow(2,st),st+=7}while(lt>=MSB$1);return read$1.bytes=ot-at,rt}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length$2=function(it){return it<N1?1:it<N2?2:it<N3?3:it<N4?4:it<N5?5:it<N6?6:it<N7?7:it<N8?8:it<N9?9:10},varint$3={encode:encode_1$1,decode:decode$9,encodingLength:length$2},_brrp_varint=varint$3;const decode$8=(it,tt=0)=>[_brrp_varint.decode(it,tt),_brrp_varint.decode.bytes],encodeTo=(it,tt,rt=0)=>(_brrp_varint.encode(it,tt,rt),tt),encodingLength=it=>_brrp_varint.encodingLength(it),varint$2=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$8,encodeTo,encodingLength},Symbol.toStringTag,{value:"Module"})),create=(it,tt)=>{const rt=tt.byteLength,at=encodingLength(it),st=at+encodingLength(rt),ot=new Uint8Array(st+rt);return encodeTo(it,ot,0),encodeTo(rt,ot,at),ot.set(tt,st),new Digest(it,rt,tt,ot)},decode$7=it=>{const tt=coerce(it),[rt,at]=decode$8(tt),[st,ot]=decode$8(tt.subarray(at)),lt=tt.subarray(at+ot);if(lt.byteLength!==st)throw new Error("Incorrect length");return new Digest(rt,st,lt,tt)},equals$3=(it,tt)=>it===tt?!0:it.code===tt.code&&it.size===tt.size&&equals$4(it.bytes,tt.bytes);class Digest{constructor(tt,rt,at,st){this.code=tt,this.size=rt,this.digest=at,this.bytes=st}}const digest$2=Object.freeze(Object.defineProperty({__proto__:null,create,decode:decode$7,equals:equals$3,Digest},Symbol.toStringTag,{value:"Module"})),from$3=({name:it,code:tt,encode:rt})=>new Hasher(it,tt,rt);class Hasher{constructor(tt,rt,at){this.name=tt,this.code=rt,this.encode=at}digest(tt){if(tt instanceof Uint8Array){const rt=this.encode(tt);return rt instanceof Uint8Array?create(this.code,rt):rt.then(at=>create(this.code,at))}else throw Error("Unknown type, must be binary type")}}const hasher=Object.freeze(Object.defineProperty({__proto__:null,from:from$3,Hasher},Symbol.toStringTag,{value:"Module"})),sha$2=it=>async tt=>new Uint8Array(await crypto.subtle.digest(it,tt)),sha256$2=from$3({name:"sha2-256",code:18,encode:sha$2("SHA-256")}),sha512$2=from$3({name:"sha2-512",code:19,encode:sha$2("SHA-512")}),sha2=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$2,sha512:sha512$2},Symbol.toStringTag,{value:"Module"})),code$3=0,name$4="identity",encode$4=coerce,digest$1=it=>create(code$3,encode$4(it)),identity$2={code:code$3,name:name$4,encode:encode$4,digest:digest$1},identity$3=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$2},Symbol.toStringTag,{value:"Module"})),name$3="raw",code$2=85,encode$3=it=>coerce(it),decode$6=it=>coerce(it),raw=Object.freeze(Object.defineProperty({__proto__:null,name:name$3,code:code$2,encode:encode$3,decode:decode$6},Symbol.toStringTag,{value:"Module"})),textEncoder=new TextEncoder,textDecoder=new TextDecoder,name$2="json",code$1=512,encode$2=it=>textEncoder.encode(JSON.stringify(it)),decode$5=it=>JSON.parse(textDecoder.decode(it)),json=Object.freeze(Object.defineProperty({__proto__:null,name:name$2,code:code$1,encode:encode$2,decode:decode$5},Symbol.toStringTag,{value:"Module"}));class CID{constructor(tt,rt,at,st){this.code=rt,this.version=tt,this.multihash=at,this.bytes=st,this.byteOffset=st.byteOffset,this.byteLength=st.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly,version:readonly,multihash:readonly,bytes:readonly,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:tt,multihash:rt}=this;if(tt!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(rt.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(rt)}}}toV1(){switch(this.version){case 0:{const{code:tt,digest:rt}=this.multihash,at=create(tt,rt);return CID.createV1(this.code,at)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(tt){return tt&&this.code===tt.code&&this.version===tt.version&&equals$3(this.multihash,tt.multihash)}toString(tt){const{bytes:rt,version:at,_baseCache:st}=this;switch(at){case 0:return toStringV0(rt,st,tt||base58btc.encoder);default:return toStringV1(rt,st,tt||base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(tt){return deprecate$1(/^0\.0/,IS_CID_DEPRECATION),!!(tt&&(tt[cidSymbol]||tt.asCID===tt))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(tt){if(tt instanceof CID)return tt;if(tt!=null&&tt.asCID===tt){const{version:rt,code:at,multihash:st,bytes:ot}=tt;return new CID(rt,at,st,ot||encodeCID(rt,at,st.bytes))}else if(tt!=null&&tt[cidSymbol]===!0){const{version:rt,multihash:at,code:st}=tt,ot=decode$7(at);return CID.create(rt,st,ot)}else return null}static create(tt,rt,at){if(typeof rt!="number")throw new Error("String codecs are no longer supported");switch(tt){case 0:{if(rt!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(tt,rt,at,at.bytes)}case 1:{const st=encodeCID(tt,rt,at.bytes);return new CID(tt,rt,at,st)}default:throw new Error("Invalid version")}}static createV0(tt){return CID.create(0,DAG_PB_CODE,tt)}static createV1(tt,rt){return CID.create(1,tt,rt)}static decode(tt){const[rt,at]=CID.decodeFirst(tt);if(at.length)throw new Error("Incorrect length");return rt}static decodeFirst(tt){const rt=CID.inspectBytes(tt),at=rt.size-rt.multihashSize,st=coerce(tt.subarray(at,at+rt.multihashSize));if(st.byteLength!==rt.multihashSize)throw new Error("Incorrect length");const ot=st.subarray(rt.multihashSize-rt.digestSize),lt=new Digest(rt.multihashCode,rt.digestSize,ot,st);return[rt.version===0?CID.createV0(lt):CID.createV1(rt.codec,lt),tt.subarray(rt.size)]}static inspectBytes(tt){let rt=0;const at=()=>{const[vt,At]=decode$8(tt.subarray(rt));return rt+=At,vt};let st=at(),ot=DAG_PB_CODE;if(st===18?(st=0,rt=0):st===1&&(ot=at()),st!==0&&st!==1)throw new RangeError(`Invalid CID version ${st}`);const lt=rt,ut=at(),ht=at(),mt=rt+ht,bt=mt-lt;return{version:st,codec:ot,multihashCode:ut,digestSize:ht,multihashSize:bt,size:mt}}static parse(tt,rt){const[at,st]=parseCIDtoBytes(tt,rt),ot=CID.decode(st);return ot._baseCache.set(at,tt),ot}}const parseCIDtoBytes=(it,tt)=>{switch(it[0]){case"Q":{const rt=tt||base58btc;return[base58btc.prefix,rt.decode(`${base58btc.prefix}${it}`)]}case base58btc.prefix:{const rt=tt||base58btc;return[base58btc.prefix,rt.decode(it)]}case base32.prefix:{const rt=tt||base32;return[base32.prefix,rt.decode(it)]}default:{if(tt==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[it[0],tt.decode(it)]}}},toStringV0=(it,tt,rt)=>{const{prefix:at}=rt;if(at!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${rt.name} encoding`);const st=tt.get(at);if(st==null){const ot=rt.encode(it).slice(1);return tt.set(at,ot),ot}else return st},toStringV1=(it,tt,rt)=>{const{prefix:at}=rt,st=tt.get(at);if(st==null){const ot=rt.encode(it);return tt.set(at,ot),ot}else return st},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(it,tt,rt)=>{const at=encodingLength(it),st=at+encodingLength(tt),ot=new Uint8Array(st+rt.byteLength);return encodeTo(it,ot,0),encodeTo(tt,ot,at),ot.set(rt,st),ot},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$3="0.0.0-dev",deprecate$1=(it,tt)=>{if(it.test(version$3))console.warn(tt);else throw new Error(tt)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$2,...base256emoji$1},hashes={...sha2,...identity$3},codecs={raw,json},basics=Object.freeze(Object.defineProperty({__proto__:null,CID,hasher,digest:digest$2,varint:varint$2,bytes,hashes,bases,codecs},Symbol.toStringTag,{value:"Module"}));function asUint8Array(it){return globalThis.Buffer!=null?new Uint8Array(it.buffer,it.byteOffset,it.byteLength):it}function allocUnsafe$1(it=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(it)):new Uint8Array(it)}function createCodec(it,tt,rt,at){return{name:it,prefix:tt,encoder:{name:it,prefix:tt,encode:rt},decoder:{decode:at}}}const string=createCodec("utf8","u",it=>"u"+new TextDecoder("utf8").decode(it),it=>new TextEncoder().encode(it.substring(1))),ascii=createCodec("ascii","a",it=>{let tt="a";for(let rt=0;rt<it.length;rt++)tt+=String.fromCharCode(it[rt]);return tt},it=>{it=it.substring(1);const tt=allocUnsafe$1(it.length);for(let rt=0;rt<it.length;rt++)tt[rt]=it.charCodeAt(rt);return tt}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$2(it,tt="utf8"){const rt=BASES[tt];if(!rt)throw new Error(`Unsupported encoding "${tt}"`);return(tt==="utf8"||tt==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(it.buffer,it.byteOffset,it.byteLength).toString("utf8"):rt.encoder.encode(it).substring(1)}const toString$3=Object.freeze(Object.defineProperty({__proto__:null,toString:toString$2},Symbol.toStringTag,{value:"Module"})),require$$5$1=getAugmentedNamespace(toString$3);function fromString$1(it,tt="utf8"){const rt=BASES[tt];if(!rt)throw new Error(`Unsupported encoding "${tt}"`);return(tt==="utf8"||tt==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(it,"utf-8")):rt.decoder.decode(`${rt.prefix}${it}`)}const fromString$2=Object.freeze(Object.defineProperty({__proto__:null,fromString:fromString$1},Symbol.toStringTag,{value:"Module"})),require$$1$3=getAugmentedNamespace(fromString$2);function concat$3(it,tt){tt||(tt=it.reduce((st,ot)=>st+ot.length,0));const rt=allocUnsafe$1(tt);let at=0;for(const st of it)rt.set(st,at),at+=st.length;return asUint8Array(rt)}const concat$4=Object.freeze(Object.defineProperty({__proto__:null,concat:concat$3},Symbol.toStringTag,{value:"Module"})),require$$1$2=getAugmentedNamespace(concat$4),multibase=src$d.exports,varint$1=varint$4,{names:names$1}=constants$1,{toString:uint8ArrayToString}=require$$5$1,{fromString:uint8ArrayFromString$1}=require$$1$3,{concat:uint8ArrayConcat}=require$$1$2,codes$1={};for(const it in names$1){const tt=it;codes$1[names$1[tt]]=tt}Object.freeze(codes$1);function toHexString(it){if(!(it instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return uint8ArrayToString(it,"base16")}function fromHexString(it){return uint8ArrayFromString$1(it,"base16")}function toB58String(it){if(!(it instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return uint8ArrayToString(multibase.encode("base58btc",it)).slice(1)}function fromB58String(it){const tt=it instanceof Uint8Array?uint8ArrayToString(it):it;return multibase.decode("z"+tt)}function decode$4(it){if(!(it instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(it.length<2)throw new Error("multihash too short. must be > 2 bytes.");const tt=varint$1.decode(it);if(!isValidCode(tt))throw new Error(`multihash unknown function code: 0x${tt.toString(16)}`);it=it.slice(varint$1.decode.bytes);const rt=varint$1.decode(it);if(rt<0)throw new Error(`multihash invalid length: ${rt}`);if(it=it.slice(varint$1.decode.bytes),it.length!==rt)throw new Error(`multihash length inconsistent: 0x${uint8ArrayToString(it,"base16")}`);return{code:tt,name:codes$1[tt],length:rt,digest:it}}function encode$1(it,tt,rt){if(!it||tt===void 0)throw new Error("multihash encode requires at least two args: digest, code");const at=coerceCode(tt);if(!(it instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(rt==null&&(rt=it.length),rt&&it.length!==rt)throw new Error("digest length should be equal to specified length.");const st=varint$1.encode(at),ot=varint$1.encode(rt);return uint8ArrayConcat([st,ot,it],st.length+ot.length+it.length)}function coerceCode(it){let tt=it;if(typeof it=="string"){if(names$1[it]===void 0)throw new Error(`Unrecognized hash function named: ${it}`);tt=names$1[it]}if(typeof tt!="number")throw new Error(`Hash function code should be a number. Got: ${tt}`);if(codes$1[tt]===void 0&&!isAppCode(tt))throw new Error(`Unrecognized function code: ${tt}`);return tt}function isAppCode(it){return it>0&&it<16}function isValidCode(it){return!!(isAppCode(it)||codes$1[it])}function validate(it){decode$4(it)}function prefix$1(it){return validate(it),it.subarray(0,2)}var src$a={names:names$1,codes:codes$1,toHexString,fromHexString,toB58String,fromB58String,decode:decode$4,encode:encode$1,coerceCode,isAppCode,validate,prefix:prefix$1,isValidCode},murmurhash3jsRevisited={exports:{}},murmurHash3js={exports:{}};(function(it,tt){(function(rt,at){var st={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function ot(Tt){if(!Array.isArray(Tt)&&!ArrayBuffer.isView(Tt))return!1;for(var wt=0;wt<Tt.length;wt++)if(!Number.isInteger(Tt[wt])||Tt[wt]<0||Tt[wt]>255)return!1;return!0}function lt(Tt,wt){return(Tt&65535)*wt+(((Tt>>>16)*wt&65535)<<16)}function ut(Tt,wt){return Tt<<wt|Tt>>>32-wt}function ht(Tt){return Tt^=Tt>>>16,Tt=lt(Tt,2246822507),Tt^=Tt>>>13,Tt=lt(Tt,3266489909),Tt^=Tt>>>16,Tt}function mt(Tt,wt){Tt=[Tt[0]>>>16,Tt[0]&65535,Tt[1]>>>16,Tt[1]&65535],wt=[wt[0]>>>16,wt[0]&65535,wt[1]>>>16,wt[1]&65535];var Ct=[0,0,0,0];return Ct[3]+=Tt[3]+wt[3],Ct[2]+=Ct[3]>>>16,Ct[3]&=65535,Ct[2]+=Tt[2]+wt[2],Ct[1]+=Ct[2]>>>16,Ct[2]&=65535,Ct[1]+=Tt[1]+wt[1],Ct[0]+=Ct[1]>>>16,Ct[1]&=65535,Ct[0]+=Tt[0]+wt[0],Ct[0]&=65535,[Ct[0]<<16|Ct[1],Ct[2]<<16|Ct[3]]}function bt(Tt,wt){Tt=[Tt[0]>>>16,Tt[0]&65535,Tt[1]>>>16,Tt[1]&65535],wt=[wt[0]>>>16,wt[0]&65535,wt[1]>>>16,wt[1]&65535];var Ct=[0,0,0,0];return Ct[3]+=Tt[3]*wt[3],Ct[2]+=Ct[3]>>>16,Ct[3]&=65535,Ct[2]+=Tt[2]*wt[3],Ct[1]+=Ct[2]>>>16,Ct[2]&=65535,Ct[2]+=Tt[3]*wt[2],Ct[1]+=Ct[2]>>>16,Ct[2]&=65535,Ct[1]+=Tt[1]*wt[3],Ct[0]+=Ct[1]>>>16,Ct[1]&=65535,Ct[1]+=Tt[2]*wt[2],Ct[0]+=Ct[1]>>>16,Ct[1]&=65535,Ct[1]+=Tt[3]*wt[1],Ct[0]+=Ct[1]>>>16,Ct[1]&=65535,Ct[0]+=Tt[0]*wt[3]+Tt[1]*wt[2]+Tt[2]*wt[1]+Tt[3]*wt[0],Ct[0]&=65535,[Ct[0]<<16|Ct[1],Ct[2]<<16|Ct[3]]}function vt(Tt,wt){return wt%=64,wt===32?[Tt[1],Tt[0]]:wt<32?[Tt[0]<<wt|Tt[1]>>>32-wt,Tt[1]<<wt|Tt[0]>>>32-wt]:(wt-=32,[Tt[1]<<wt|Tt[0]>>>32-wt,Tt[0]<<wt|Tt[1]>>>32-wt])}function At(Tt,wt){return wt%=64,wt===0?Tt:wt<32?[Tt[0]<<wt|Tt[1]>>>32-wt,Tt[1]<<wt]:[Tt[1]<<wt-32,0]}function xt(Tt,wt){return[Tt[0]^wt[0],Tt[1]^wt[1]]}function Et(Tt){return Tt=xt(Tt,[0,Tt[0]>>>1]),Tt=bt(Tt,[4283543511,3981806797]),Tt=xt(Tt,[0,Tt[0]>>>1]),Tt=bt(Tt,[3301882366,444984403]),Tt=xt(Tt,[0,Tt[0]>>>1]),Tt}st.x86.hash32=function(Tt,wt){if(st.inputValidation&&!ot(Tt))return at;wt=wt||0;for(var Ct=Tt.length%4,It=Tt.length-Ct,St=wt,Rt=0,Dt=3432918353,Wt=461845907,qt=0;qt<It;qt=qt+4)Rt=Tt[qt]|Tt[qt+1]<<8|Tt[qt+2]<<16|Tt[qt+3]<<24,Rt=lt(Rt,Dt),Rt=ut(Rt,15),Rt=lt(Rt,Wt),St^=Rt,St=ut(St,13),St=lt(St,5)+3864292196;switch(Rt=0,Ct){case 3:Rt^=Tt[qt+2]<<16;case 2:Rt^=Tt[qt+1]<<8;case 1:Rt^=Tt[qt],Rt=lt(Rt,Dt),Rt=ut(Rt,15),Rt=lt(Rt,Wt),St^=Rt}return St^=Tt.length,St=ht(St),St>>>0},st.x86.hash128=function(Tt,wt){if(st.inputValidation&&!ot(Tt))return at;wt=wt||0;for(var Ct=Tt.length%16,It=Tt.length-Ct,St=wt,Rt=wt,Dt=wt,Wt=wt,qt=0,Vt=0,Yt=0,jt=0,kt=597399067,zt=2869860233,Nt=951274213,Mt=2716044179,Lt=0;Lt<It;Lt=Lt+16)qt=Tt[Lt]|Tt[Lt+1]<<8|Tt[Lt+2]<<16|Tt[Lt+3]<<24,Vt=Tt[Lt+4]|Tt[Lt+5]<<8|Tt[Lt+6]<<16|Tt[Lt+7]<<24,Yt=Tt[Lt+8]|Tt[Lt+9]<<8|Tt[Lt+10]<<16|Tt[Lt+11]<<24,jt=Tt[Lt+12]|Tt[Lt+13]<<8|Tt[Lt+14]<<16|Tt[Lt+15]<<24,qt=lt(qt,kt),qt=ut(qt,15),qt=lt(qt,zt),St^=qt,St=ut(St,19),St+=Rt,St=lt(St,5)+1444728091,Vt=lt(Vt,zt),Vt=ut(Vt,16),Vt=lt(Vt,Nt),Rt^=Vt,Rt=ut(Rt,17),Rt+=Dt,Rt=lt(Rt,5)+197830471,Yt=lt(Yt,Nt),Yt=ut(Yt,17),Yt=lt(Yt,Mt),Dt^=Yt,Dt=ut(Dt,15),Dt+=Wt,Dt=lt(Dt,5)+2530024501,jt=lt(jt,Mt),jt=ut(jt,18),jt=lt(jt,kt),Wt^=jt,Wt=ut(Wt,13),Wt+=St,Wt=lt(Wt,5)+850148119;switch(qt=0,Vt=0,Yt=0,jt=0,Ct){case 15:jt^=Tt[Lt+14]<<16;case 14:jt^=Tt[Lt+13]<<8;case 13:jt^=Tt[Lt+12],jt=lt(jt,Mt),jt=ut(jt,18),jt=lt(jt,kt),Wt^=jt;case 12:Yt^=Tt[Lt+11]<<24;case 11:Yt^=Tt[Lt+10]<<16;case 10:Yt^=Tt[Lt+9]<<8;case 9:Yt^=Tt[Lt+8],Yt=lt(Yt,Nt),Yt=ut(Yt,17),Yt=lt(Yt,Mt),Dt^=Yt;case 8:Vt^=Tt[Lt+7]<<24;case 7:Vt^=Tt[Lt+6]<<16;case 6:Vt^=Tt[Lt+5]<<8;case 5:Vt^=Tt[Lt+4],Vt=lt(Vt,zt),Vt=ut(Vt,16),Vt=lt(Vt,Nt),Rt^=Vt;case 4:qt^=Tt[Lt+3]<<24;case 3:qt^=Tt[Lt+2]<<16;case 2:qt^=Tt[Lt+1]<<8;case 1:qt^=Tt[Lt],qt=lt(qt,kt),qt=ut(qt,15),qt=lt(qt,zt),St^=qt}return St^=Tt.length,Rt^=Tt.length,Dt^=Tt.length,Wt^=Tt.length,St+=Rt,St+=Dt,St+=Wt,Rt+=St,Dt+=St,Wt+=St,St=ht(St),Rt=ht(Rt),Dt=ht(Dt),Wt=ht(Wt),St+=Rt,St+=Dt,St+=Wt,Rt+=St,Dt+=St,Wt+=St,("00000000"+(St>>>0).toString(16)).slice(-8)+("00000000"+(Rt>>>0).toString(16)).slice(-8)+("00000000"+(Dt>>>0).toString(16)).slice(-8)+("00000000"+(Wt>>>0).toString(16)).slice(-8)},st.x64.hash128=function(Tt,wt){if(st.inputValidation&&!ot(Tt))return at;wt=wt||0;for(var Ct=Tt.length%16,It=Tt.length-Ct,St=[0,wt],Rt=[0,wt],Dt=[0,0],Wt=[0,0],qt=[2277735313,289559509],Vt=[1291169091,658871167],Yt=0;Yt<It;Yt=Yt+16)Dt=[Tt[Yt+4]|Tt[Yt+5]<<8|Tt[Yt+6]<<16|Tt[Yt+7]<<24,Tt[Yt]|Tt[Yt+1]<<8|Tt[Yt+2]<<16|Tt[Yt+3]<<24],Wt=[Tt[Yt+12]|Tt[Yt+13]<<8|Tt[Yt+14]<<16|Tt[Yt+15]<<24,Tt[Yt+8]|Tt[Yt+9]<<8|Tt[Yt+10]<<16|Tt[Yt+11]<<24],Dt=bt(Dt,qt),Dt=vt(Dt,31),Dt=bt(Dt,Vt),St=xt(St,Dt),St=vt(St,27),St=mt(St,Rt),St=mt(bt(St,[0,5]),[0,1390208809]),Wt=bt(Wt,Vt),Wt=vt(Wt,33),Wt=bt(Wt,qt),Rt=xt(Rt,Wt),Rt=vt(Rt,31),Rt=mt(Rt,St),Rt=mt(bt(Rt,[0,5]),[0,944331445]);switch(Dt=[0,0],Wt=[0,0],Ct){case 15:Wt=xt(Wt,At([0,Tt[Yt+14]],48));case 14:Wt=xt(Wt,At([0,Tt[Yt+13]],40));case 13:Wt=xt(Wt,At([0,Tt[Yt+12]],32));case 12:Wt=xt(Wt,At([0,Tt[Yt+11]],24));case 11:Wt=xt(Wt,At([0,Tt[Yt+10]],16));case 10:Wt=xt(Wt,At([0,Tt[Yt+9]],8));case 9:Wt=xt(Wt,[0,Tt[Yt+8]]),Wt=bt(Wt,Vt),Wt=vt(Wt,33),Wt=bt(Wt,qt),Rt=xt(Rt,Wt);case 8:Dt=xt(Dt,At([0,Tt[Yt+7]],56));case 7:Dt=xt(Dt,At([0,Tt[Yt+6]],48));case 6:Dt=xt(Dt,At([0,Tt[Yt+5]],40));case 5:Dt=xt(Dt,At([0,Tt[Yt+4]],32));case 4:Dt=xt(Dt,At([0,Tt[Yt+3]],24));case 3:Dt=xt(Dt,At([0,Tt[Yt+2]],16));case 2:Dt=xt(Dt,At([0,Tt[Yt+1]],8));case 1:Dt=xt(Dt,[0,Tt[Yt]]),Dt=bt(Dt,qt),Dt=vt(Dt,31),Dt=bt(Dt,Vt),St=xt(St,Dt)}return St=xt(St,[0,Tt.length]),Rt=xt(Rt,[0,Tt.length]),St=mt(St,Rt),Rt=mt(Rt,St),St=Et(St),Rt=Et(Rt),St=mt(St,Rt),Rt=mt(Rt,St),("00000000"+(St[0]>>>0).toString(16)).slice(-8)+("00000000"+(St[1]>>>0).toString(16)).slice(-8)+("00000000"+(Rt[0]>>>0).toString(16)).slice(-8)+("00000000"+(Rt[1]>>>0).toString(16)).slice(-8)},it.exports&&(tt=it.exports=st),tt.murmurHash3=st})()})(murmurHash3js,murmurHash3js.exports),function(it){it.exports=murmurHash3js.exports}(murmurhash3jsRevisited);const multihash$1=src$a,crypto$4=self.crypto||self.msCrypto,digest=async(it,tt)=>{if(typeof self>"u"||!crypto$4)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");switch(tt){case"sha1":return new Uint8Array(await crypto$4.subtle.digest({name:"SHA-1"},it));case"sha2-256":return new Uint8Array(await crypto$4.subtle.digest({name:"SHA-256"},it));case"sha2-512":return new Uint8Array(await crypto$4.subtle.digest({name:"SHA-512"},it));case"dbl-sha2-256":{const rt=await crypto$4.subtle.digest({name:"SHA-256"},it);return new Uint8Array(await crypto$4.subtle.digest({name:"SHA-256"},rt))}default:throw new Error(`${tt} is not a supported algorithm`)}};var sha_browser={factory:it=>async tt=>digest(tt,it),digest,multihashing:async(it,tt,rt)=>{const at=await digest(it,tt);return multihash$1.encode(at,tt,rt)}};const fromNumberTo32BitBuf$1=it=>{const tt=new Uint8Array(4);for(let rt=0;rt<4;rt++)tt[rt]=it&255,it=it>>8;return tt};var utils$8={fromNumberTo32BitBuf:fromNumberTo32BitBuf$1},util$9,hasRequiredUtil$3;function requireUtil$3(){if(hasRequiredUtil$3)return util$9;hasRequiredUtil$3=1;const it="Input must be an string, Buffer or Uint8Array";function tt(lt){let ut;if(lt instanceof Uint8Array)ut=lt;else if(typeof lt=="string")ut=new TextEncoder().encode(lt);else throw new Error(it);return ut}function rt(lt){return Array.prototype.map.call(lt,function(ut){return(ut<16?"0":"")+ut.toString(16)}).join("")}function at(lt){return(4294967296+lt).toString(16).substring(1)}function st(lt,ut,ht){let mt=`
`+lt+" = ";for(let bt=0;bt<ut.length;bt+=2){if(ht===32)mt+=at(ut[bt]).toUpperCase(),mt+=" ",mt+=at(ut[bt+1]).toUpperCase();else if(ht===64)mt+=at(ut[bt+1]).toUpperCase(),mt+=at(ut[bt]).toUpperCase();else throw new Error("Invalid size "+ht);bt%6===4?mt+=`
`+new Array(lt.length+4).join(" "):bt<ut.length-2&&(mt+=" ")}console.log(mt)}function ot(lt,ut,ht){let mt=new Date().getTime();const bt=new Uint8Array(ut);for(let At=0;At<ut;At++)bt[At]=At%256;const vt=new Date().getTime();console.log("Generated random input in "+(vt-mt)+"ms"),mt=vt;for(let At=0;At<ht;At++){const xt=lt(bt),Et=new Date().getTime(),Tt=Et-mt;mt=Et,console.log("Hashed in "+Tt+"ms: "+xt.substring(0,20)+"..."),console.log(Math.round(ut/(1<<20)/(Tt/1e3)*100)/100+" MB PER SECOND")}}return util$9={normalizeInput:tt,toHex:rt,debugPrint:st,testSpeed:ot},util$9}var blake2b_1,hasRequiredBlake2b;function requireBlake2b(){if(hasRequiredBlake2b)return blake2b_1;hasRequiredBlake2b=1;const it=requireUtil$3();function tt(Ct,It,St){const Rt=Ct[It]+Ct[St];let Dt=Ct[It+1]+Ct[St+1];Rt>=4294967296&&Dt++,Ct[It]=Rt,Ct[It+1]=Dt}function rt(Ct,It,St,Rt){let Dt=Ct[It]+St;St<0&&(Dt+=4294967296);let Wt=Ct[It+1]+Rt;Dt>=4294967296&&Wt++,Ct[It]=Dt,Ct[It+1]=Wt}function at(Ct,It){return Ct[It]^Ct[It+1]<<8^Ct[It+2]<<16^Ct[It+3]<<24}function st(Ct,It,St,Rt,Dt,Wt){const qt=mt[Dt],Vt=mt[Dt+1],Yt=mt[Wt],jt=mt[Wt+1];tt(ht,Ct,It),rt(ht,Ct,qt,Vt);let kt=ht[Rt]^ht[Ct],zt=ht[Rt+1]^ht[Ct+1];ht[Rt]=zt,ht[Rt+1]=kt,tt(ht,St,Rt),kt=ht[It]^ht[St],zt=ht[It+1]^ht[St+1],ht[It]=kt>>>24^zt<<8,ht[It+1]=zt>>>24^kt<<8,tt(ht,Ct,It),rt(ht,Ct,Yt,jt),kt=ht[Rt]^ht[Ct],zt=ht[Rt+1]^ht[Ct+1],ht[Rt]=kt>>>16^zt<<16,ht[Rt+1]=zt>>>16^kt<<16,tt(ht,St,Rt),kt=ht[It]^ht[St],zt=ht[It+1]^ht[St+1],ht[It]=zt>>>31^kt<<1,ht[It+1]=kt>>>31^zt<<1}const ot=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),lt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],ut=new Uint8Array(lt.map(function(Ct){return Ct*2})),ht=new Uint32Array(32),mt=new Uint32Array(32);function bt(Ct,It){let St=0;for(St=0;St<16;St++)ht[St]=Ct.h[St],ht[St+16]=ot[St];for(ht[24]=ht[24]^Ct.t,ht[25]=ht[25]^Ct.t/4294967296,It&&(ht[28]=~ht[28],ht[29]=~ht[29]),St=0;St<32;St++)mt[St]=at(Ct.b,4*St);for(St=0;St<12;St++)st(0,8,16,24,ut[St*16+0],ut[St*16+1]),st(2,10,18,26,ut[St*16+2],ut[St*16+3]),st(4,12,20,28,ut[St*16+4],ut[St*16+5]),st(6,14,22,30,ut[St*16+6],ut[St*16+7]),st(0,10,20,30,ut[St*16+8],ut[St*16+9]),st(2,12,22,24,ut[St*16+10],ut[St*16+11]),st(4,14,16,26,ut[St*16+12],ut[St*16+13]),st(6,8,18,28,ut[St*16+14],ut[St*16+15]);for(St=0;St<16;St++)Ct.h[St]=Ct.h[St]^ht[St]^ht[St+16]}const vt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function At(Ct,It,St,Rt){if(Ct===0||Ct>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(It&&It.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(St&&St.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(Rt&&Rt.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const Dt={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:Ct};vt.fill(0),vt[0]=Ct,It&&(vt[1]=It.length),vt[2]=1,vt[3]=1,St&&vt.set(St,32),Rt&&vt.set(Rt,48);for(let Wt=0;Wt<16;Wt++)Dt.h[Wt]=ot[Wt]^at(vt,Wt*4);return It&&(xt(Dt,It),Dt.c=128),Dt}function xt(Ct,It){for(let St=0;St<It.length;St++)Ct.c===128&&(Ct.t+=Ct.c,bt(Ct,!1),Ct.c=0),Ct.b[Ct.c++]=It[St]}function Et(Ct){for(Ct.t+=Ct.c;Ct.c<128;)Ct.b[Ct.c++]=0;bt(Ct,!0);const It=new Uint8Array(Ct.outlen);for(let St=0;St<Ct.outlen;St++)It[St]=Ct.h[St>>2]>>8*(St&3);return It}function Tt(Ct,It,St,Rt,Dt){St=St||64,Ct=it.normalizeInput(Ct),Rt&&(Rt=it.normalizeInput(Rt)),Dt&&(Dt=it.normalizeInput(Dt));const Wt=At(St,It,Rt,Dt);return xt(Wt,Ct),Et(Wt)}function wt(Ct,It,St,Rt,Dt){const Wt=Tt(Ct,It,St,Rt,Dt);return it.toHex(Wt)}return blake2b_1={blake2b:Tt,blake2bHex:wt,blake2bInit:At,blake2bUpdate:xt,blake2bFinal:Et},blake2b_1}var blake2s_1,hasRequiredBlake2s;function requireBlake2s(){if(hasRequiredBlake2s)return blake2s_1;hasRequiredBlake2s=1;const it=requireUtil$3();function tt(Et,Tt){return Et[Tt]^Et[Tt+1]<<8^Et[Tt+2]<<16^Et[Tt+3]<<24}function rt(Et,Tt,wt,Ct,It,St){lt[Et]=lt[Et]+lt[Tt]+It,lt[Ct]=at(lt[Ct]^lt[Et],16),lt[wt]=lt[wt]+lt[Ct],lt[Tt]=at(lt[Tt]^lt[wt],12),lt[Et]=lt[Et]+lt[Tt]+St,lt[Ct]=at(lt[Ct]^lt[Et],8),lt[wt]=lt[wt]+lt[Ct],lt[Tt]=at(lt[Tt]^lt[wt],7)}function at(Et,Tt){return Et>>>Tt^Et<<32-Tt}const st=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ot=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),lt=new Uint32Array(16),ut=new Uint32Array(16);function ht(Et,Tt){let wt=0;for(wt=0;wt<8;wt++)lt[wt]=Et.h[wt],lt[wt+8]=st[wt];for(lt[12]^=Et.t,lt[13]^=Et.t/4294967296,Tt&&(lt[14]=~lt[14]),wt=0;wt<16;wt++)ut[wt]=tt(Et.b,4*wt);for(wt=0;wt<10;wt++)rt(0,4,8,12,ut[ot[wt*16+0]],ut[ot[wt*16+1]]),rt(1,5,9,13,ut[ot[wt*16+2]],ut[ot[wt*16+3]]),rt(2,6,10,14,ut[ot[wt*16+4]],ut[ot[wt*16+5]]),rt(3,7,11,15,ut[ot[wt*16+6]],ut[ot[wt*16+7]]),rt(0,5,10,15,ut[ot[wt*16+8]],ut[ot[wt*16+9]]),rt(1,6,11,12,ut[ot[wt*16+10]],ut[ot[wt*16+11]]),rt(2,7,8,13,ut[ot[wt*16+12]],ut[ot[wt*16+13]]),rt(3,4,9,14,ut[ot[wt*16+14]],ut[ot[wt*16+15]]);for(wt=0;wt<8;wt++)Et.h[wt]^=lt[wt]^lt[wt+8]}function mt(Et,Tt){if(!(Et>0&&Et<=32))throw new Error("Incorrect output length, should be in [1, 32]");const wt=Tt?Tt.length:0;if(Tt&&!(wt>0&&wt<=32))throw new Error("Incorrect key length, should be in [1, 32]");const Ct={h:new Uint32Array(st),b:new Uint8Array(64),c:0,t:0,outlen:Et};return Ct.h[0]^=16842752^wt<<8^Et,wt>0&&(bt(Ct,Tt),Ct.c=64),Ct}function bt(Et,Tt){for(let wt=0;wt<Tt.length;wt++)Et.c===64&&(Et.t+=Et.c,ht(Et,!1),Et.c=0),Et.b[Et.c++]=Tt[wt]}function vt(Et){for(Et.t+=Et.c;Et.c<64;)Et.b[Et.c++]=0;ht(Et,!0);const Tt=new Uint8Array(Et.outlen);for(let wt=0;wt<Et.outlen;wt++)Tt[wt]=Et.h[wt>>2]>>8*(wt&3)&255;return Tt}function At(Et,Tt,wt){wt=wt||32,Et=it.normalizeInput(Et);const Ct=mt(wt,Tt);return bt(Ct,Et),vt(Ct)}function xt(Et,Tt,wt){const Ct=At(Et,Tt,wt);return it.toHex(Ct)}return blake2s_1={blake2s:At,blake2sHex:xt,blake2sInit:mt,blake2sUpdate:bt,blake2sFinal:vt},blake2s_1}var blakejs,hasRequiredBlakejs;function requireBlakejs(){if(hasRequiredBlakejs)return blakejs;hasRequiredBlakejs=1;const it=requireBlake2b(),tt=requireBlake2s();return blakejs={blake2b:it.blake2b,blake2bHex:it.blake2bHex,blake2bInit:it.blake2bInit,blake2bUpdate:it.blake2bUpdate,blake2bFinal:it.blake2bFinal,blake2s:tt.blake2s,blake2sHex:tt.blake2sHex,blake2sInit:tt.blake2sInit,blake2sUpdate:tt.blake2sUpdate,blake2sFinal:tt.blake2sFinal},blakejs}var blake_1,hasRequiredBlake;function requireBlake(){if(hasRequiredBlake)return blake_1;hasRequiredBlake=1;const it=requireBlakejs(),tt=45569,rt=45633,at={init:it.blake2bInit,update:it.blake2bUpdate,digest:it.blake2bFinal},st={init:it.blake2sInit,update:it.blake2sUpdate,digest:it.blake2sFinal},ot=(lt,ut)=>async ht=>{const mt=ut.init(lt,null);return ut.update(mt,ht),ut.digest(mt)};return blake_1=lt=>{for(let ut=0;ut<64;ut++)lt[tt+ut]=ot(ut+1,at);for(let ut=0;ut<32;ut++)lt[rt+ut]=ot(ut+1,st)},blake_1}const sha3$1=sha3$3.exports,mur=murmurhash3jsRevisited.exports,{factory:sha$1}=sha_browser,{fromNumberTo32BitBuf}=utils$8,{fromString:uint8ArrayFromString}=require$$1$3,hash$2=it=>async tt=>{switch(it){case"sha3-224":return new Uint8Array(sha3$1.sha3_224.arrayBuffer(tt));case"sha3-256":return new Uint8Array(sha3$1.sha3_256.arrayBuffer(tt));case"sha3-384":return new Uint8Array(sha3$1.sha3_384.arrayBuffer(tt));case"sha3-512":return new Uint8Array(sha3$1.sha3_512.arrayBuffer(tt));case"shake-128":return new Uint8Array(sha3$1.shake128.create(128).update(tt).arrayBuffer());case"shake-256":return new Uint8Array(sha3$1.shake256.create(256).update(tt).arrayBuffer());case"keccak-224":return new Uint8Array(sha3$1.keccak224.arrayBuffer(tt));case"keccak-256":return new Uint8Array(sha3$1.keccak256.arrayBuffer(tt));case"keccak-384":return new Uint8Array(sha3$1.keccak384.arrayBuffer(tt));case"keccak-512":return new Uint8Array(sha3$1.keccak512.arrayBuffer(tt));case"murmur3-128":return uint8ArrayFromString(mur.x64.hash128(tt),"base16");case"murmur3-32":return fromNumberTo32BitBuf(mur.x86.hash32(tt));default:throw new TypeError(`${it} is not a supported algorithm`)}},identity$1=it=>it;var crypto$3={identity:identity$1,sha1:sha$1("sha1"),sha2256:sha$1("sha2-256"),sha2512:sha$1("sha2-512"),dblSha2256:sha$1("dbl-sha2-256"),sha3224:hash$2("sha3-224"),sha3256:hash$2("sha3-256"),sha3384:hash$2("sha3-384"),sha3512:hash$2("sha3-512"),shake128:hash$2("shake-128"),shake256:hash$2("shake-256"),keccak224:hash$2("keccak-224"),keccak256:hash$2("keccak-256"),keccak384:hash$2("keccak-384"),keccak512:hash$2("keccak-512"),murmur3128:hash$2("murmur3-128"),murmur332:hash$2("murmur3-32"),addBlake:requireBlake()};function equals$1(it,tt){if(it===tt)return!0;if(it.byteLength!==tt.byteLength)return!1;for(let rt=0;rt<it.byteLength;rt++)if(it[rt]!==tt[rt])return!1;return!0}const equals$2=Object.freeze(Object.defineProperty({__proto__:null,equals:equals$1},Symbol.toStringTag,{value:"Module"})),require$$6$1=getAugmentedNamespace(equals$2),errcode=errCode,multihash=src$a,crypto$2=crypto$3,{equals}=require$$6$1;async function Multihashing(it,tt,rt){const at=await Multihashing.digest(it,tt,rt);return multihash.encode(at,tt,rt)}Multihashing.multihash=multihash,Multihashing.digest=async(it,tt,rt)=>{const st=await Multihashing.createHash(tt)(it);return rt?st.slice(0,rt):st},Multihashing.createHash=function(it){if(!it)throw errcode(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");const tt=multihash.coerceCode(it);if(!Multihashing.functions[tt])throw errcode(new Error(`multihash function '${it}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing.functions[tt]},Multihashing.functions={0:crypto$2.identity,17:crypto$2.sha1,18:crypto$2.sha2256,19:crypto$2.sha2512,20:crypto$2.sha3512,21:crypto$2.sha3384,22:crypto$2.sha3256,23:crypto$2.sha3224,24:crypto$2.shake128,25:crypto$2.shake256,26:crypto$2.keccak224,27:crypto$2.keccak256,28:crypto$2.keccak384,29:crypto$2.keccak512,34:crypto$2.murmur3128,35:crypto$2.murmur332,86:crypto$2.dblSha2256},crypto$2.addBlake(Multihashing.functions),Multihashing.validate=async(it,tt)=>{const rt=await Multihashing(it,multihash.decode(tt).name);return equals(tt,rt)};var src$9=Multihashing;const mergeOptions=mergeOptions$1.bind({ignoreUndefined:!0}),multihashing=src$9;async function hamtHashFn(it){const rt=(await multihashing(it,"murmur3-128")).slice(2,10),at=rt.length,st=new Uint8Array(at);for(let ot=0;ot<at;ot++)st[at-ot-1]=rt[ot];return st}const defaultOptions$4={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hashAlg:"sha2-256",leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,pin:!1,recursive:!1,hidden:!1,preload:!1,timeout:void 0,hamtHashFn,hamtHashCode:34,hamtBucketBits:8};var options=function(it={}){return mergeOptions(defaultOptions$4,it)},minimal$1={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=it;function it(tt,rt){for(var at=new Array(arguments.length-1),st=0,ot=2,lt=!0;ot<arguments.length;)at[st++]=arguments[ot++];return new Promise(function(ht,mt){at[st]=function(vt){if(lt)if(lt=!1,vt)mt(vt);else{for(var At=new Array(arguments.length-1),xt=0;xt<At.length;)At[xt++]=arguments[xt];ht.apply(null,At)}};try{tt.apply(rt||null,at)}catch(bt){lt&&(lt=!1,mt(bt))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(it){var tt=it;tt.length=function(ut){var ht=ut.length;if(!ht)return 0;for(var mt=0;--ht%4>1&&ut.charAt(ht)==="=";)++mt;return Math.ceil(ut.length*3)/4-mt};for(var rt=new Array(64),at=new Array(123),st=0;st<64;)at[rt[st]=st<26?st+65:st<52?st+71:st<62?st-4:st-59|43]=st++;tt.encode=function(ut,ht,mt){for(var bt=null,vt=[],At=0,xt=0,Et;ht<mt;){var Tt=ut[ht++];switch(xt){case 0:vt[At++]=rt[Tt>>2],Et=(Tt&3)<<4,xt=1;break;case 1:vt[At++]=rt[Et|Tt>>4],Et=(Tt&15)<<2,xt=2;break;case 2:vt[At++]=rt[Et|Tt>>6],vt[At++]=rt[Tt&63],xt=0;break}At>8191&&((bt||(bt=[])).push(String.fromCharCode.apply(String,vt)),At=0)}return xt&&(vt[At++]=rt[Et],vt[At++]=61,xt===1&&(vt[At++]=61)),bt?(At&&bt.push(String.fromCharCode.apply(String,vt.slice(0,At))),bt.join("")):String.fromCharCode.apply(String,vt.slice(0,At))};var ot="invalid encoding";tt.decode=function(ut,ht,mt){for(var bt=mt,vt=0,At,xt=0;xt<ut.length;){var Et=ut.charCodeAt(xt++);if(Et===61&&vt>1)break;if((Et=at[Et])===void 0)throw Error(ot);switch(vt){case 0:At=Et,vt=1;break;case 1:ht[mt++]=At<<2|(Et&48)>>4,At=Et,vt=2;break;case 2:ht[mt++]=(At&15)<<4|(Et&60)>>2,At=Et,vt=3;break;case 3:ht[mt++]=(At&3)<<6|Et,vt=0;break}}if(vt===1)throw Error(ot);return mt-bt},tt.test=function(ut){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(ut)}}(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=it;function it(){this._listeners={}}return it.prototype.on=function(rt,at,st){return(this._listeners[rt]||(this._listeners[rt]=[])).push({fn:at,ctx:st||this}),this},it.prototype.off=function(rt,at){if(rt===void 0)this._listeners={};else if(at===void 0)this._listeners[rt]=[];else for(var st=this._listeners[rt],ot=0;ot<st.length;)st[ot].fn===at?st.splice(ot,1):++ot;return this},it.prototype.emit=function(rt){var at=this._listeners[rt];if(at){for(var st=[],ot=1;ot<arguments.length;)st.push(arguments[ot++]);for(ot=0;ot<at.length;)at[ot].fn.apply(at[ot++].ctx,st)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=it(it);function it(ot){return typeof Float32Array<"u"?function(){var lt=new Float32Array([-0]),ut=new Uint8Array(lt.buffer),ht=ut[3]===128;function mt(xt,Et,Tt){lt[0]=xt,Et[Tt]=ut[0],Et[Tt+1]=ut[1],Et[Tt+2]=ut[2],Et[Tt+3]=ut[3]}function bt(xt,Et,Tt){lt[0]=xt,Et[Tt]=ut[3],Et[Tt+1]=ut[2],Et[Tt+2]=ut[1],Et[Tt+3]=ut[0]}ot.writeFloatLE=ht?mt:bt,ot.writeFloatBE=ht?bt:mt;function vt(xt,Et){return ut[0]=xt[Et],ut[1]=xt[Et+1],ut[2]=xt[Et+2],ut[3]=xt[Et+3],lt[0]}function At(xt,Et){return ut[3]=xt[Et],ut[2]=xt[Et+1],ut[1]=xt[Et+2],ut[0]=xt[Et+3],lt[0]}ot.readFloatLE=ht?vt:At,ot.readFloatBE=ht?At:vt}():function(){function lt(ht,mt,bt,vt){var At=mt<0?1:0;if(At&&(mt=-mt),mt===0)ht(1/mt>0?0:2147483648,bt,vt);else if(isNaN(mt))ht(2143289344,bt,vt);else if(mt>34028234663852886e22)ht((At<<31|2139095040)>>>0,bt,vt);else if(mt<11754943508222875e-54)ht((At<<31|Math.round(mt/1401298464324817e-60))>>>0,bt,vt);else{var xt=Math.floor(Math.log(mt)/Math.LN2),Et=Math.round(mt*Math.pow(2,-xt)*8388608)&8388607;ht((At<<31|xt+127<<23|Et)>>>0,bt,vt)}}ot.writeFloatLE=lt.bind(null,tt),ot.writeFloatBE=lt.bind(null,rt);function ut(ht,mt,bt){var vt=ht(mt,bt),At=(vt>>31)*2+1,xt=vt>>>23&255,Et=vt&8388607;return xt===255?Et?NaN:At*(1/0):xt===0?At*1401298464324817e-60*Et:At*Math.pow(2,xt-150)*(Et+8388608)}ot.readFloatLE=ut.bind(null,at),ot.readFloatBE=ut.bind(null,st)}(),typeof Float64Array<"u"?function(){var lt=new Float64Array([-0]),ut=new Uint8Array(lt.buffer),ht=ut[7]===128;function mt(xt,Et,Tt){lt[0]=xt,Et[Tt]=ut[0],Et[Tt+1]=ut[1],Et[Tt+2]=ut[2],Et[Tt+3]=ut[3],Et[Tt+4]=ut[4],Et[Tt+5]=ut[5],Et[Tt+6]=ut[6],Et[Tt+7]=ut[7]}function bt(xt,Et,Tt){lt[0]=xt,Et[Tt]=ut[7],Et[Tt+1]=ut[6],Et[Tt+2]=ut[5],Et[Tt+3]=ut[4],Et[Tt+4]=ut[3],Et[Tt+5]=ut[2],Et[Tt+6]=ut[1],Et[Tt+7]=ut[0]}ot.writeDoubleLE=ht?mt:bt,ot.writeDoubleBE=ht?bt:mt;function vt(xt,Et){return ut[0]=xt[Et],ut[1]=xt[Et+1],ut[2]=xt[Et+2],ut[3]=xt[Et+3],ut[4]=xt[Et+4],ut[5]=xt[Et+5],ut[6]=xt[Et+6],ut[7]=xt[Et+7],lt[0]}function At(xt,Et){return ut[7]=xt[Et],ut[6]=xt[Et+1],ut[5]=xt[Et+2],ut[4]=xt[Et+3],ut[3]=xt[Et+4],ut[2]=xt[Et+5],ut[1]=xt[Et+6],ut[0]=xt[Et+7],lt[0]}ot.readDoubleLE=ht?vt:At,ot.readDoubleBE=ht?At:vt}():function(){function lt(ht,mt,bt,vt,At,xt){var Et=vt<0?1:0;if(Et&&(vt=-vt),vt===0)ht(0,At,xt+mt),ht(1/vt>0?0:2147483648,At,xt+bt);else if(isNaN(vt))ht(0,At,xt+mt),ht(2146959360,At,xt+bt);else if(vt>17976931348623157e292)ht(0,At,xt+mt),ht((Et<<31|2146435072)>>>0,At,xt+bt);else{var Tt;if(vt<22250738585072014e-324)Tt=vt/5e-324,ht(Tt>>>0,At,xt+mt),ht((Et<<31|Tt/4294967296)>>>0,At,xt+bt);else{var wt=Math.floor(Math.log(vt)/Math.LN2);wt===1024&&(wt=1023),Tt=vt*Math.pow(2,-wt),ht(Tt*4503599627370496>>>0,At,xt+mt),ht((Et<<31|wt+1023<<20|Tt*1048576&1048575)>>>0,At,xt+bt)}}}ot.writeDoubleLE=lt.bind(null,tt,0,4),ot.writeDoubleBE=lt.bind(null,rt,4,0);function ut(ht,mt,bt,vt,At){var xt=ht(vt,At+mt),Et=ht(vt,At+bt),Tt=(Et>>31)*2+1,wt=Et>>>20&2047,Ct=4294967296*(Et&1048575)+xt;return wt===2047?Ct?NaN:Tt*(1/0):wt===0?Tt*5e-324*Ct:Tt*Math.pow(2,wt-1075)*(Ct+4503599627370496)}ot.readDoubleLE=ut.bind(null,at,0,4),ot.readDoubleBE=ut.bind(null,st,4,0)}(),ot}function tt(ot,lt,ut){lt[ut]=ot&255,lt[ut+1]=ot>>>8&255,lt[ut+2]=ot>>>16&255,lt[ut+3]=ot>>>24}function rt(ot,lt,ut){lt[ut]=ot>>>24,lt[ut+1]=ot>>>16&255,lt[ut+2]=ot>>>8&255,lt[ut+3]=ot&255}function at(ot,lt){return(ot[lt]|ot[lt+1]<<8|ot[lt+2]<<16|ot[lt+3]<<24)>>>0}function st(ot,lt){return(ot[lt]<<24|ot[lt+1]<<16|ot[lt+2]<<8|ot[lt+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(it){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(it){var tt=it;tt.length=function(at){for(var st=0,ot=0,lt=0;lt<at.length;++lt)ot=at.charCodeAt(lt),ot<128?st+=1:ot<2048?st+=2:(ot&64512)===55296&&(at.charCodeAt(lt+1)&64512)===56320?(++lt,st+=4):st+=3;return st},tt.read=function(at,st,ot){var lt=ot-st;if(lt<1)return"";for(var ut=null,ht=[],mt=0,bt;st<ot;)bt=at[st++],bt<128?ht[mt++]=bt:bt>191&&bt<224?ht[mt++]=(bt&31)<<6|at[st++]&63:bt>239&&bt<365?(bt=((bt&7)<<18|(at[st++]&63)<<12|(at[st++]&63)<<6|at[st++]&63)-65536,ht[mt++]=55296+(bt>>10),ht[mt++]=56320+(bt&1023)):ht[mt++]=(bt&15)<<12|(at[st++]&63)<<6|at[st++]&63,mt>8191&&((ut||(ut=[])).push(String.fromCharCode.apply(String,ht)),mt=0);return ut?(mt&&ut.push(String.fromCharCode.apply(String,ht.slice(0,mt))),ut.join("")):String.fromCharCode.apply(String,ht.slice(0,mt))},tt.write=function(at,st,ot){for(var lt=ot,ut,ht,mt=0;mt<at.length;++mt)ut=at.charCodeAt(mt),ut<128?st[ot++]=ut:ut<2048?(st[ot++]=ut>>6|192,st[ot++]=ut&63|128):(ut&64512)===55296&&((ht=at.charCodeAt(mt+1))&64512)===56320?(ut=65536+((ut&1023)<<10)+(ht&1023),++mt,st[ot++]=ut>>18|240,st[ot++]=ut>>12&63|128,st[ot++]=ut>>6&63|128,st[ot++]=ut&63|128):(st[ot++]=ut>>12|224,st[ot++]=ut>>6&63|128,st[ot++]=ut&63|128);return ot-lt}}(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=it;function it(tt,rt,at){var st=at||8192,ot=st>>>1,lt=null,ut=st;return function(mt){if(mt<1||mt>ot)return tt(mt);ut+mt>st&&(lt=tt(st),ut=0);var bt=rt.call(lt,ut,ut+=mt);return ut&7&&(ut=(ut|7)+1),bt}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=tt;var it=requireMinimal$1();function tt(ot,lt){this.lo=ot>>>0,this.hi=lt>>>0}var rt=tt.zero=new tt(0,0);rt.toNumber=function(){return 0},rt.zzEncode=rt.zzDecode=function(){return this},rt.length=function(){return 1};var at=tt.zeroHash="\0\0\0\0\0\0\0\0";tt.fromNumber=function(lt){if(lt===0)return rt;var ut=lt<0;ut&&(lt=-lt);var ht=lt>>>0,mt=(lt-ht)/4294967296>>>0;return ut&&(mt=~mt>>>0,ht=~ht>>>0,++ht>4294967295&&(ht=0,++mt>4294967295&&(mt=0))),new tt(ht,mt)},tt.from=function(lt){if(typeof lt=="number")return tt.fromNumber(lt);if(it.isString(lt))if(it.Long)lt=it.Long.fromString(lt);else return tt.fromNumber(parseInt(lt,10));return lt.low||lt.high?new tt(lt.low>>>0,lt.high>>>0):rt},tt.prototype.toNumber=function(lt){if(!lt&&this.hi>>>31){var ut=~this.lo+1>>>0,ht=~this.hi>>>0;return ut||(ht=ht+1>>>0),-(ut+ht*4294967296)}return this.lo+this.hi*4294967296},tt.prototype.toLong=function(lt){return it.Long?new it.Long(this.lo|0,this.hi|0,Boolean(lt)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(lt)}};var st=String.prototype.charCodeAt;return tt.fromHash=function(lt){return lt===at?rt:new tt((st.call(lt,0)|st.call(lt,1)<<8|st.call(lt,2)<<16|st.call(lt,3)<<24)>>>0,(st.call(lt,4)|st.call(lt,5)<<8|st.call(lt,6)<<16|st.call(lt,7)<<24)>>>0)},tt.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},tt.prototype.zzEncode=function(){var lt=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^lt)>>>0,this.lo=(this.lo<<1^lt)>>>0,this},tt.prototype.zzDecode=function(){var lt=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^lt)>>>0,this.hi=(this.hi>>>1^lt)>>>0,this},tt.prototype.length=function(){var lt=this.lo,ut=(this.lo>>>28|this.hi<<4)>>>0,ht=this.hi>>>24;return ht===0?ut===0?lt<16384?lt<128?1:2:lt<2097152?3:4:ut<16384?ut<128?5:6:ut<2097152?7:8:ht<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(it){var tt=it;tt.asPromise=requireAspromise(),tt.base64=requireBase64(),tt.EventEmitter=requireEventemitter(),tt.float=requireFloat(),tt.inquire=requireInquire(),tt.utf8=requireUtf8(),tt.pool=requirePool(),tt.LongBits=requireLongbits(),tt.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node),tt.global=tt.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,tt.emptyArray=Object.freeze?Object.freeze([]):[],tt.emptyObject=Object.freeze?Object.freeze({}):{},tt.isInteger=Number.isInteger||function(ot){return typeof ot=="number"&&isFinite(ot)&&Math.floor(ot)===ot},tt.isString=function(ot){return typeof ot=="string"||ot instanceof String},tt.isObject=function(ot){return ot&&typeof ot=="object"},tt.isset=tt.isSet=function(ot,lt){var ut=ot[lt];return ut!=null&&ot.hasOwnProperty(lt)?typeof ut!="object"||(Array.isArray(ut)?ut.length:Object.keys(ut).length)>0:!1},tt.Buffer=function(){try{var st=tt.inquire("buffer").Buffer;return st.prototype.utf8Write?st:null}catch{return null}}(),tt._Buffer_from=null,tt._Buffer_allocUnsafe=null,tt.newBuffer=function(ot){return typeof ot=="number"?tt.Buffer?tt._Buffer_allocUnsafe(ot):new tt.Array(ot):tt.Buffer?tt._Buffer_from(ot):typeof Uint8Array>"u"?ot:new Uint8Array(ot)},tt.Array=typeof Uint8Array<"u"?Uint8Array:Array,tt.Long=tt.global.dcodeIO&&tt.global.dcodeIO.Long||tt.global.Long||tt.inquire("long"),tt.key2Re=/^true|false|0|1$/,tt.key32Re=/^-?(?:0|[1-9][0-9]*)$/,tt.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,tt.longToHash=function(ot){return ot?tt.LongBits.from(ot).toHash():tt.LongBits.zeroHash},tt.longFromHash=function(ot,lt){var ut=tt.LongBits.fromHash(ot);return tt.Long?tt.Long.fromBits(ut.lo,ut.hi,lt):ut.toNumber(Boolean(lt))};function rt(st,ot,lt){for(var ut=Object.keys(ot),ht=0;ht<ut.length;++ht)(st[ut[ht]]===void 0||!lt)&&(st[ut[ht]]=ot[ut[ht]]);return st}tt.merge=rt,tt.lcFirst=function(ot){return ot.charAt(0).toLowerCase()+ot.substring(1)};function at(st){function ot(lt,ut){if(!(this instanceof ot))return new ot(lt,ut);Object.defineProperty(this,"message",{get:function(){return lt}}),Error.captureStackTrace?Error.captureStackTrace(this,ot):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ut&&rt(this,ut)}return(ot.prototype=Object.create(Error.prototype)).constructor=ot,Object.defineProperty(ot.prototype,"name",{get:function(){return st}}),ot.prototype.toString=function(){return this.name+": "+this.message},ot}tt.newError=at,tt.ProtocolError=at("ProtocolError"),tt.oneOfGetter=function(ot){for(var lt={},ut=0;ut<ot.length;++ut)lt[ot[ut]]=1;return function(){for(var ht=Object.keys(this),mt=ht.length-1;mt>-1;--mt)if(lt[ht[mt]]===1&&this[ht[mt]]!==void 0&&this[ht[mt]]!==null)return ht[mt]}},tt.oneOfSetter=function(ot){return function(lt){for(var ut=0;ut<ot.length;++ut)ot[ut]!==lt&&delete this[ot[ut]]}},tt.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},tt._configure=function(){var st=tt.Buffer;if(!st){tt._Buffer_from=tt._Buffer_allocUnsafe=null;return}tt._Buffer_from=st.from!==Uint8Array.from&&st.from||function(lt,ut){return new st(lt,ut)},tt._Buffer_allocUnsafe=st.allocUnsafe||function(lt){return new st(lt)}}}(minimal)),minimal}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=ht;var it=requireMinimal$1(),tt,rt=it.LongBits,at=it.base64,st=it.utf8;function ot(wt,Ct,It){this.fn=wt,this.len=Ct,this.next=void 0,this.val=It}function lt(){}function ut(wt){this.head=wt.head,this.tail=wt.tail,this.len=wt.len,this.next=wt.states}function ht(){this.len=0,this.head=new ot(lt,0,0),this.tail=this.head,this.states=null}var mt=function(){return it.Buffer?function(){return(ht.create=function(){return new tt})()}:function(){return new ht}};ht.create=mt(),ht.alloc=function(Ct){return new it.Array(Ct)},it.Array!==Array&&(ht.alloc=it.pool(ht.alloc,it.Array.prototype.subarray)),ht.prototype._push=function(Ct,It,St){return this.tail=this.tail.next=new ot(Ct,It,St),this.len+=It,this};function bt(wt,Ct,It){Ct[It]=wt&255}function vt(wt,Ct,It){for(;wt>127;)Ct[It++]=wt&127|128,wt>>>=7;Ct[It]=wt}function At(wt,Ct){this.len=wt,this.next=void 0,this.val=Ct}At.prototype=Object.create(ot.prototype),At.prototype.fn=vt,ht.prototype.uint32=function(Ct){return this.len+=(this.tail=this.tail.next=new At((Ct=Ct>>>0)<128?1:Ct<16384?2:Ct<2097152?3:Ct<268435456?4:5,Ct)).len,this},ht.prototype.int32=function(Ct){return Ct<0?this._push(xt,10,rt.fromNumber(Ct)):this.uint32(Ct)},ht.prototype.sint32=function(Ct){return this.uint32((Ct<<1^Ct>>31)>>>0)};function xt(wt,Ct,It){for(;wt.hi;)Ct[It++]=wt.lo&127|128,wt.lo=(wt.lo>>>7|wt.hi<<25)>>>0,wt.hi>>>=7;for(;wt.lo>127;)Ct[It++]=wt.lo&127|128,wt.lo=wt.lo>>>7;Ct[It++]=wt.lo}ht.prototype.uint64=function(Ct){var It=rt.from(Ct);return this._push(xt,It.length(),It)},ht.prototype.int64=ht.prototype.uint64,ht.prototype.sint64=function(Ct){var It=rt.from(Ct).zzEncode();return this._push(xt,It.length(),It)},ht.prototype.bool=function(Ct){return this._push(bt,1,Ct?1:0)};function Et(wt,Ct,It){Ct[It]=wt&255,Ct[It+1]=wt>>>8&255,Ct[It+2]=wt>>>16&255,Ct[It+3]=wt>>>24}ht.prototype.fixed32=function(Ct){return this._push(Et,4,Ct>>>0)},ht.prototype.sfixed32=ht.prototype.fixed32,ht.prototype.fixed64=function(Ct){var It=rt.from(Ct);return this._push(Et,4,It.lo)._push(Et,4,It.hi)},ht.prototype.sfixed64=ht.prototype.fixed64,ht.prototype.float=function(Ct){return this._push(it.float.writeFloatLE,4,Ct)},ht.prototype.double=function(Ct){return this._push(it.float.writeDoubleLE,8,Ct)};var Tt=it.Array.prototype.set?function(Ct,It,St){It.set(Ct,St)}:function(Ct,It,St){for(var Rt=0;Rt<Ct.length;++Rt)It[St+Rt]=Ct[Rt]};return ht.prototype.bytes=function(Ct){var It=Ct.length>>>0;if(!It)return this._push(bt,1,0);if(it.isString(Ct)){var St=ht.alloc(It=at.length(Ct));at.decode(Ct,St,0),Ct=St}return this.uint32(It)._push(Tt,It,Ct)},ht.prototype.string=function(Ct){var It=st.length(Ct);return It?this.uint32(It)._push(st.write,It,Ct):this._push(bt,1,0)},ht.prototype.fork=function(){return this.states=new ut(this),this.head=this.tail=new ot(lt,0,0),this.len=0,this},ht.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ot(lt,0,0),this.len=0),this},ht.prototype.ldelim=function(){var Ct=this.head,It=this.tail,St=this.len;return this.reset().uint32(St),St&&(this.tail.next=Ct.next,this.tail=It,this.len+=St),this},ht.prototype.finish=function(){for(var Ct=this.head.next,It=this.constructor.alloc(this.len),St=0;Ct;)Ct.fn(Ct.val,It,St),St+=Ct.len,Ct=Ct.next;return It},ht._configure=function(wt){tt=wt,ht.create=mt(),tt._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=rt;var it=requireWriter();(rt.prototype=Object.create(it.prototype)).constructor=rt;var tt=requireMinimal$1();function rt(){it.call(this)}rt._configure=function(){rt.alloc=tt._Buffer_allocUnsafe,rt.writeBytesBuffer=tt.Buffer&&tt.Buffer.prototype instanceof Uint8Array&&tt.Buffer.prototype.set.name==="set"?function(ot,lt,ut){lt.set(ot,ut)}:function(ot,lt,ut){if(ot.copy)ot.copy(lt,ut,0,ot.length);else for(var ht=0;ht<ot.length;)lt[ut++]=ot[ht++]}},rt.prototype.bytes=function(ot){tt.isString(ot)&&(ot=tt._Buffer_from(ot,"base64"));var lt=ot.length>>>0;return this.uint32(lt),lt&&this._push(rt.writeBytesBuffer,lt,ot),this};function at(st,ot,lt){st.length<40?tt.utf8.write(st,ot,lt):ot.utf8Write?ot.utf8Write(st,lt):ot.write(st,lt)}return rt.prototype.string=function(ot){var lt=tt.Buffer.byteLength(ot);return this.uint32(lt),lt&&this._push(at,lt,ot),this},rt._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=ot;var it=requireMinimal$1(),tt,rt=it.LongBits,at=it.utf8;function st(vt,At){return RangeError("index out of range: "+vt.pos+" + "+(At||1)+" > "+vt.len)}function ot(vt){this.buf=vt,this.pos=0,this.len=vt.length}var lt=typeof Uint8Array<"u"?function(At){if(At instanceof Uint8Array||Array.isArray(At))return new ot(At);throw Error("illegal buffer")}:function(At){if(Array.isArray(At))return new ot(At);throw Error("illegal buffer")},ut=function(){return it.Buffer?function(xt){return(ot.create=function(Tt){return it.Buffer.isBuffer(Tt)?new tt(Tt):lt(Tt)})(xt)}:lt};ot.create=ut(),ot.prototype._slice=it.Array.prototype.subarray||it.Array.prototype.slice,ot.prototype.uint32=function(){var At=4294967295;return function(){if(At=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(At=(At|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(At=(At|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(At=(At|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(At=(At|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return At;if((this.pos+=5)>this.len)throw this.pos=this.len,st(this,10);return At}}(),ot.prototype.int32=function(){return this.uint32()|0},ot.prototype.sint32=function(){var At=this.uint32();return At>>>1^-(At&1)|0};function ht(){var vt=new rt(0,0),At=0;if(this.len-this.pos>4){for(;At<4;++At)if(vt.lo=(vt.lo|(this.buf[this.pos]&127)<<At*7)>>>0,this.buf[this.pos++]<128)return vt;if(vt.lo=(vt.lo|(this.buf[this.pos]&127)<<28)>>>0,vt.hi=(vt.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return vt;At=0}else{for(;At<3;++At){if(this.pos>=this.len)throw st(this);if(vt.lo=(vt.lo|(this.buf[this.pos]&127)<<At*7)>>>0,this.buf[this.pos++]<128)return vt}return vt.lo=(vt.lo|(this.buf[this.pos++]&127)<<At*7)>>>0,vt}if(this.len-this.pos>4){for(;At<5;++At)if(vt.hi=(vt.hi|(this.buf[this.pos]&127)<<At*7+3)>>>0,this.buf[this.pos++]<128)return vt}else for(;At<5;++At){if(this.pos>=this.len)throw st(this);if(vt.hi=(vt.hi|(this.buf[this.pos]&127)<<At*7+3)>>>0,this.buf[this.pos++]<128)return vt}throw Error("invalid varint encoding")}ot.prototype.bool=function(){return this.uint32()!==0};function mt(vt,At){return(vt[At-4]|vt[At-3]<<8|vt[At-2]<<16|vt[At-1]<<24)>>>0}ot.prototype.fixed32=function(){if(this.pos+4>this.len)throw st(this,4);return mt(this.buf,this.pos+=4)},ot.prototype.sfixed32=function(){if(this.pos+4>this.len)throw st(this,4);return mt(this.buf,this.pos+=4)|0};function bt(){if(this.pos+8>this.len)throw st(this,8);return new rt(mt(this.buf,this.pos+=4),mt(this.buf,this.pos+=4))}return ot.prototype.float=function(){if(this.pos+4>this.len)throw st(this,4);var At=it.float.readFloatLE(this.buf,this.pos);return this.pos+=4,At},ot.prototype.double=function(){if(this.pos+8>this.len)throw st(this,4);var At=it.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,At},ot.prototype.bytes=function(){var At=this.uint32(),xt=this.pos,Et=this.pos+At;if(Et>this.len)throw st(this,At);return this.pos+=At,Array.isArray(this.buf)?this.buf.slice(xt,Et):xt===Et?new this.buf.constructor(0):this._slice.call(this.buf,xt,Et)},ot.prototype.string=function(){var At=this.bytes();return at.read(At,0,At.length)},ot.prototype.skip=function(At){if(typeof At=="number"){if(this.pos+At>this.len)throw st(this,At);this.pos+=At}else do if(this.pos>=this.len)throw st(this);while(this.buf[this.pos++]&128);return this},ot.prototype.skipType=function(vt){switch(vt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(vt=this.uint32()&7)!==4;)this.skipType(vt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+vt+" at offset "+this.pos)}return this},ot._configure=function(vt){tt=vt,ot.create=ut(),tt._configure();var At=it.Long?"toLong":"toNumber";it.merge(ot.prototype,{int64:function(){return ht.call(this)[At](!1)},uint64:function(){return ht.call(this)[At](!0)},sint64:function(){return ht.call(this).zzDecode()[At](!1)},fixed64:function(){return bt.call(this)[At](!0)},sfixed64:function(){return bt.call(this)[At](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=rt;var it=requireReader();(rt.prototype=Object.create(it.prototype)).constructor=rt;var tt=requireMinimal$1();function rt(at){it.call(this,at)}return rt._configure=function(){tt.Buffer&&(rt.prototype._slice=tt.Buffer.prototype.slice)},rt.prototype.string=function(){var st=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+st,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+st,this.len))},rt._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=tt;var it=requireMinimal$1();(tt.prototype=Object.create(it.EventEmitter.prototype)).constructor=tt;function tt(rt,at,st){if(typeof rt!="function")throw TypeError("rpcImpl must be a function");it.EventEmitter.call(this),this.rpcImpl=rt,this.requestDelimited=Boolean(at),this.responseDelimited=Boolean(st)}return tt.prototype.rpcCall=function rt(at,st,ot,lt,ut){if(!lt)throw TypeError("request must be specified");var ht=this;if(!ut)return it.asPromise(rt,ht,at,st,ot,lt);if(!ht.rpcImpl){setTimeout(function(){ut(Error("already ended"))},0);return}try{return ht.rpcImpl(at,st[ht.requestDelimited?"encodeDelimited":"encode"](lt).finish(),function(bt,vt){if(bt)return ht.emit("error",bt,at),ut(bt);if(vt===null){ht.end(!0);return}if(!(vt instanceof ot))try{vt=ot[ht.responseDelimited?"decodeDelimited":"decode"](vt)}catch(At){return ht.emit("error",At,at),ut(At)}return ht.emit("data",vt,at),ut(null,vt)})}catch(mt){ht.emit("error",mt,at),setTimeout(function(){ut(mt)},0);return}},tt.prototype.end=function(at){return this.rpcImpl&&(at||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(it){var tt=it;tt.Service=requireService()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(it){var tt=it;tt.build="minimal",tt.Writer=requireWriter(),tt.BufferWriter=requireWriter_buffer(),tt.Reader=requireReader(),tt.BufferReader=requireReader_buffer(),tt.util=requireMinimal$1(),tt.rpc=requireRpc(),tt.roots=requireRoots(),tt.configure=rt;function rt(){tt.util._configure(),tt.Writer._configure(tt.BufferWriter),tt.Reader._configure(tt.BufferReader)}rt()}(indexMinimal)),indexMinimal}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(it){it.exports=requireIndexMinimal()}(minimal$1)),minimal$1.exports}var unixfs,hasRequiredUnixfs;function requireUnixfs(){if(hasRequiredUnixfs)return unixfs;hasRequiredUnixfs=1;var it=requireMinimal(),tt=it.Reader,rt=it.Writer,at=it.util,st=it.roots["ipfs-unixfs"]||(it.roots["ipfs-unixfs"]={});return st.Data=function(){function ot(lt){if(this.blocksizes=[],lt)for(var ut=Object.keys(lt),ht=0;ht<ut.length;++ht)lt[ut[ht]]!=null&&(this[ut[ht]]=lt[ut[ht]])}return ot.prototype.Type=0,ot.prototype.Data=at.newBuffer([]),ot.prototype.filesize=at.Long?at.Long.fromBits(0,0,!0):0,ot.prototype.blocksizes=at.emptyArray,ot.prototype.hashType=at.Long?at.Long.fromBits(0,0,!0):0,ot.prototype.fanout=at.Long?at.Long.fromBits(0,0,!0):0,ot.prototype.mode=0,ot.prototype.mtime=null,ot.encode=function(ut,ht){if(ht||(ht=rt.create()),ht.uint32(8).int32(ut.Type),ut.Data!=null&&Object.hasOwnProperty.call(ut,"Data")&&ht.uint32(18).bytes(ut.Data),ut.filesize!=null&&Object.hasOwnProperty.call(ut,"filesize")&&ht.uint32(24).uint64(ut.filesize),ut.blocksizes!=null&&ut.blocksizes.length)for(var mt=0;mt<ut.blocksizes.length;++mt)ht.uint32(32).uint64(ut.blocksizes[mt]);return ut.hashType!=null&&Object.hasOwnProperty.call(ut,"hashType")&&ht.uint32(40).uint64(ut.hashType),ut.fanout!=null&&Object.hasOwnProperty.call(ut,"fanout")&&ht.uint32(48).uint64(ut.fanout),ut.mode!=null&&Object.hasOwnProperty.call(ut,"mode")&&ht.uint32(56).uint32(ut.mode),ut.mtime!=null&&Object.hasOwnProperty.call(ut,"mtime")&&st.UnixTime.encode(ut.mtime,ht.uint32(66).fork()).ldelim(),ht},ot.decode=function(ut,ht){ut instanceof tt||(ut=tt.create(ut));for(var mt=ht===void 0?ut.len:ut.pos+ht,bt=new st.Data;ut.pos<mt;){var vt=ut.uint32();switch(vt>>>3){case 1:bt.Type=ut.int32();break;case 2:bt.Data=ut.bytes();break;case 3:bt.filesize=ut.uint64();break;case 4:if(bt.blocksizes&&bt.blocksizes.length||(bt.blocksizes=[]),(vt&7)===2)for(var At=ut.uint32()+ut.pos;ut.pos<At;)bt.blocksizes.push(ut.uint64());else bt.blocksizes.push(ut.uint64());break;case 5:bt.hashType=ut.uint64();break;case 6:bt.fanout=ut.uint64();break;case 7:bt.mode=ut.uint32();break;case 8:bt.mtime=st.UnixTime.decode(ut,ut.uint32());break;default:ut.skipType(vt&7);break}}if(!bt.hasOwnProperty("Type"))throw at.ProtocolError("missing required 'Type'",{instance:bt});return bt},ot.fromObject=function(ut){if(ut instanceof st.Data)return ut;var ht=new st.Data;switch(ut.Type){case"Raw":case 0:ht.Type=0;break;case"Directory":case 1:ht.Type=1;break;case"File":case 2:ht.Type=2;break;case"Metadata":case 3:ht.Type=3;break;case"Symlink":case 4:ht.Type=4;break;case"HAMTShard":case 5:ht.Type=5;break}if(ut.Data!=null&&(typeof ut.Data=="string"?at.base64.decode(ut.Data,ht.Data=at.newBuffer(at.base64.length(ut.Data)),0):ut.Data.length&&(ht.Data=ut.Data)),ut.filesize!=null&&(at.Long?(ht.filesize=at.Long.fromValue(ut.filesize)).unsigned=!0:typeof ut.filesize=="string"?ht.filesize=parseInt(ut.filesize,10):typeof ut.filesize=="number"?ht.filesize=ut.filesize:typeof ut.filesize=="object"&&(ht.filesize=new at.LongBits(ut.filesize.low>>>0,ut.filesize.high>>>0).toNumber(!0))),ut.blocksizes){if(!Array.isArray(ut.blocksizes))throw TypeError(".Data.blocksizes: array expected");ht.blocksizes=[];for(var mt=0;mt<ut.blocksizes.length;++mt)at.Long?(ht.blocksizes[mt]=at.Long.fromValue(ut.blocksizes[mt])).unsigned=!0:typeof ut.blocksizes[mt]=="string"?ht.blocksizes[mt]=parseInt(ut.blocksizes[mt],10):typeof ut.blocksizes[mt]=="number"?ht.blocksizes[mt]=ut.blocksizes[mt]:typeof ut.blocksizes[mt]=="object"&&(ht.blocksizes[mt]=new at.LongBits(ut.blocksizes[mt].low>>>0,ut.blocksizes[mt].high>>>0).toNumber(!0))}if(ut.hashType!=null&&(at.Long?(ht.hashType=at.Long.fromValue(ut.hashType)).unsigned=!0:typeof ut.hashType=="string"?ht.hashType=parseInt(ut.hashType,10):typeof ut.hashType=="number"?ht.hashType=ut.hashType:typeof ut.hashType=="object"&&(ht.hashType=new at.LongBits(ut.hashType.low>>>0,ut.hashType.high>>>0).toNumber(!0))),ut.fanout!=null&&(at.Long?(ht.fanout=at.Long.fromValue(ut.fanout)).unsigned=!0:typeof ut.fanout=="string"?ht.fanout=parseInt(ut.fanout,10):typeof ut.fanout=="number"?ht.fanout=ut.fanout:typeof ut.fanout=="object"&&(ht.fanout=new at.LongBits(ut.fanout.low>>>0,ut.fanout.high>>>0).toNumber(!0))),ut.mode!=null&&(ht.mode=ut.mode>>>0),ut.mtime!=null){if(typeof ut.mtime!="object")throw TypeError(".Data.mtime: object expected");ht.mtime=st.UnixTime.fromObject(ut.mtime)}return ht},ot.toObject=function(ut,ht){ht||(ht={});var mt={};if((ht.arrays||ht.defaults)&&(mt.blocksizes=[]),ht.defaults){if(mt.Type=ht.enums===String?"Raw":0,ht.bytes===String?mt.Data="":(mt.Data=[],ht.bytes!==Array&&(mt.Data=at.newBuffer(mt.Data))),at.Long){var bt=new at.Long(0,0,!0);mt.filesize=ht.longs===String?bt.toString():ht.longs===Number?bt.toNumber():bt}else mt.filesize=ht.longs===String?"0":0;if(at.Long){var bt=new at.Long(0,0,!0);mt.hashType=ht.longs===String?bt.toString():ht.longs===Number?bt.toNumber():bt}else mt.hashType=ht.longs===String?"0":0;if(at.Long){var bt=new at.Long(0,0,!0);mt.fanout=ht.longs===String?bt.toString():ht.longs===Number?bt.toNumber():bt}else mt.fanout=ht.longs===String?"0":0;mt.mode=0,mt.mtime=null}if(ut.Type!=null&&ut.hasOwnProperty("Type")&&(mt.Type=ht.enums===String?st.Data.DataType[ut.Type]:ut.Type),ut.Data!=null&&ut.hasOwnProperty("Data")&&(mt.Data=ht.bytes===String?at.base64.encode(ut.Data,0,ut.Data.length):ht.bytes===Array?Array.prototype.slice.call(ut.Data):ut.Data),ut.filesize!=null&&ut.hasOwnProperty("filesize")&&(typeof ut.filesize=="number"?mt.filesize=ht.longs===String?String(ut.filesize):ut.filesize:mt.filesize=ht.longs===String?at.Long.prototype.toString.call(ut.filesize):ht.longs===Number?new at.LongBits(ut.filesize.low>>>0,ut.filesize.high>>>0).toNumber(!0):ut.filesize),ut.blocksizes&&ut.blocksizes.length){mt.blocksizes=[];for(var vt=0;vt<ut.blocksizes.length;++vt)typeof ut.blocksizes[vt]=="number"?mt.blocksizes[vt]=ht.longs===String?String(ut.blocksizes[vt]):ut.blocksizes[vt]:mt.blocksizes[vt]=ht.longs===String?at.Long.prototype.toString.call(ut.blocksizes[vt]):ht.longs===Number?new at.LongBits(ut.blocksizes[vt].low>>>0,ut.blocksizes[vt].high>>>0).toNumber(!0):ut.blocksizes[vt]}return ut.hashType!=null&&ut.hasOwnProperty("hashType")&&(typeof ut.hashType=="number"?mt.hashType=ht.longs===String?String(ut.hashType):ut.hashType:mt.hashType=ht.longs===String?at.Long.prototype.toString.call(ut.hashType):ht.longs===Number?new at.LongBits(ut.hashType.low>>>0,ut.hashType.high>>>0).toNumber(!0):ut.hashType),ut.fanout!=null&&ut.hasOwnProperty("fanout")&&(typeof ut.fanout=="number"?mt.fanout=ht.longs===String?String(ut.fanout):ut.fanout:mt.fanout=ht.longs===String?at.Long.prototype.toString.call(ut.fanout):ht.longs===Number?new at.LongBits(ut.fanout.low>>>0,ut.fanout.high>>>0).toNumber(!0):ut.fanout),ut.mode!=null&&ut.hasOwnProperty("mode")&&(mt.mode=ut.mode),ut.mtime!=null&&ut.hasOwnProperty("mtime")&&(mt.mtime=st.UnixTime.toObject(ut.mtime,ht)),mt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,it.util.toJSONOptions)},ot.DataType=function(){var lt={},ut=Object.create(lt);return ut[lt[0]="Raw"]=0,ut[lt[1]="Directory"]=1,ut[lt[2]="File"]=2,ut[lt[3]="Metadata"]=3,ut[lt[4]="Symlink"]=4,ut[lt[5]="HAMTShard"]=5,ut}(),ot}(),st.UnixTime=function(){function ot(lt){if(lt)for(var ut=Object.keys(lt),ht=0;ht<ut.length;++ht)lt[ut[ht]]!=null&&(this[ut[ht]]=lt[ut[ht]])}return ot.prototype.Seconds=at.Long?at.Long.fromBits(0,0,!1):0,ot.prototype.FractionalNanoseconds=0,ot.encode=function(ut,ht){return ht||(ht=rt.create()),ht.uint32(8).int64(ut.Seconds),ut.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(ut,"FractionalNanoseconds")&&ht.uint32(21).fixed32(ut.FractionalNanoseconds),ht},ot.decode=function(ut,ht){ut instanceof tt||(ut=tt.create(ut));for(var mt=ht===void 0?ut.len:ut.pos+ht,bt=new st.UnixTime;ut.pos<mt;){var vt=ut.uint32();switch(vt>>>3){case 1:bt.Seconds=ut.int64();break;case 2:bt.FractionalNanoseconds=ut.fixed32();break;default:ut.skipType(vt&7);break}}if(!bt.hasOwnProperty("Seconds"))throw at.ProtocolError("missing required 'Seconds'",{instance:bt});return bt},ot.fromObject=function(ut){if(ut instanceof st.UnixTime)return ut;var ht=new st.UnixTime;return ut.Seconds!=null&&(at.Long?(ht.Seconds=at.Long.fromValue(ut.Seconds)).unsigned=!1:typeof ut.Seconds=="string"?ht.Seconds=parseInt(ut.Seconds,10):typeof ut.Seconds=="number"?ht.Seconds=ut.Seconds:typeof ut.Seconds=="object"&&(ht.Seconds=new at.LongBits(ut.Seconds.low>>>0,ut.Seconds.high>>>0).toNumber())),ut.FractionalNanoseconds!=null&&(ht.FractionalNanoseconds=ut.FractionalNanoseconds>>>0),ht},ot.toObject=function(ut,ht){ht||(ht={});var mt={};if(ht.defaults){if(at.Long){var bt=new at.Long(0,0,!1);mt.Seconds=ht.longs===String?bt.toString():ht.longs===Number?bt.toNumber():bt}else mt.Seconds=ht.longs===String?"0":0;mt.FractionalNanoseconds=0}return ut.Seconds!=null&&ut.hasOwnProperty("Seconds")&&(typeof ut.Seconds=="number"?mt.Seconds=ht.longs===String?String(ut.Seconds):ut.Seconds:mt.Seconds=ht.longs===String?at.Long.prototype.toString.call(ut.Seconds):ht.longs===Number?new at.LongBits(ut.Seconds.low>>>0,ut.Seconds.high>>>0).toNumber():ut.Seconds),ut.FractionalNanoseconds!=null&&ut.hasOwnProperty("FractionalNanoseconds")&&(mt.FractionalNanoseconds=ut.FractionalNanoseconds),mt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,it.util.toJSONOptions)},ot}(),st.Metadata=function(){function ot(lt){if(lt)for(var ut=Object.keys(lt),ht=0;ht<ut.length;++ht)lt[ut[ht]]!=null&&(this[ut[ht]]=lt[ut[ht]])}return ot.prototype.MimeType="",ot.encode=function(ut,ht){return ht||(ht=rt.create()),ut.MimeType!=null&&Object.hasOwnProperty.call(ut,"MimeType")&&ht.uint32(10).string(ut.MimeType),ht},ot.decode=function(ut,ht){ut instanceof tt||(ut=tt.create(ut));for(var mt=ht===void 0?ut.len:ut.pos+ht,bt=new st.Metadata;ut.pos<mt;){var vt=ut.uint32();switch(vt>>>3){case 1:bt.MimeType=ut.string();break;default:ut.skipType(vt&7);break}}return bt},ot.fromObject=function(ut){if(ut instanceof st.Metadata)return ut;var ht=new st.Metadata;return ut.MimeType!=null&&(ht.MimeType=String(ut.MimeType)),ht},ot.toObject=function(ut,ht){ht||(ht={});var mt={};return ht.defaults&&(mt.MimeType=""),ut.MimeType!=null&&ut.hasOwnProperty("MimeType")&&(mt.MimeType=ut.MimeType),mt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,it.util.toJSONOptions)},ot}(),unixfs=st,unixfs}var src$8,hasRequiredSrc$5;function requireSrc$5(){if(hasRequiredSrc$5)return src$8;hasRequiredSrc$5=1;const{Data:it}=requireUnixfs(),tt=errCode,rt=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],at=["directory","hamt-sharded-directory"],st=parseInt("0644",8),ot=parseInt("0755",8);function lt(mt){if(mt!=null)return typeof mt=="number"?mt&4095:(mt=mt.toString(),mt.substring(0,1)==="0"?parseInt(mt,8)&4095:parseInt(mt,10)&4095)}function ut(mt){if(mt==null)return;let bt;if(mt.secs!=null&&(bt={secs:mt.secs,nsecs:mt.nsecs}),mt.Seconds!=null&&(bt={secs:mt.Seconds,nsecs:mt.FractionalNanoseconds}),Array.isArray(mt)&&(bt={secs:mt[0],nsecs:mt[1]}),mt instanceof Date){const vt=mt.getTime(),At=Math.floor(vt/1e3);bt={secs:At,nsecs:(vt-At*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(bt,"secs")){if(bt!=null&&bt.nsecs!=null&&(bt.nsecs<0||bt.nsecs>999999999))throw tt(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return bt}}class ht{static unmarshal(bt){const vt=it.decode(bt),At=it.toObject(vt,{defaults:!1,arrays:!0,longs:Number,objects:!1}),xt=new ht({type:rt[At.Type],data:At.Data,blockSizes:At.blocksizes,mode:At.mode,mtime:At.mtime?{secs:At.mtime.Seconds,nsecs:At.mtime.FractionalNanoseconds}:void 0});return xt._originalMode=At.mode||0,xt}constructor(bt={type:"file"}){const{type:vt,data:At,blockSizes:xt,hashType:Et,fanout:Tt,mtime:wt,mode:Ct}=bt;if(vt&&!rt.includes(vt))throw tt(new Error("Type: "+vt+" is not valid"),"ERR_INVALID_TYPE");this.type=vt||"file",this.data=At,this.hashType=Et,this.fanout=Tt,this.blockSizes=xt||[],this._originalMode=0,this.mode=lt(Ct),wt&&(this.mtime=ut(wt),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(bt){this._mode=this.isDirectory()?ot:st;const vt=lt(bt);vt!==void 0&&(this._mode=vt)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&at.includes(this.type))}addBlockSize(bt){this.blockSizes.push(bt)}removeBlockSize(bt){this.blockSizes.splice(bt,1)}fileSize(){if(this.isDirectory())return 0;let bt=0;return this.blockSizes.forEach(vt=>{bt+=vt}),this.data&&(bt+=this.data.length),bt}marshal(){let bt;switch(this.type){case"raw":bt=it.DataType.Raw;break;case"directory":bt=it.DataType.Directory;break;case"file":bt=it.DataType.File;break;case"metadata":bt=it.DataType.Metadata;break;case"symlink":bt=it.DataType.Symlink;break;case"hamt-sharded-directory":bt=it.DataType.HAMTShard;break;default:throw tt(new Error("Type: "+bt+" is not valid"),"ERR_INVALID_TYPE")}let vt=this.data;(!this.data||!this.data.length)&&(vt=void 0);let At;this.mode!=null&&(At=this._originalMode&4294963200|(lt(this.mode)||0),At===st&&!this.isDirectory()&&(At=void 0),At===ot&&this.isDirectory()&&(At=void 0));let xt;if(this.mtime!=null){const Tt=ut(this.mtime);Tt&&(xt={Seconds:Tt.secs,FractionalNanoseconds:Tt.nsecs},xt.FractionalNanoseconds===0&&delete xt.FractionalNanoseconds)}const Et={Type:bt,Data:vt,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:At,mtime:xt};return it.encode(Et).finish()}}return src$8={UnixFS:ht,parseMode:lt,parseMtime:ut},src$8}var encode_1,hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode_1;hasRequiredEncode=1,encode_1=st;var it=128,tt=127,rt=~tt,at=Math.pow(2,31);function st(ot,lt,ut){if(Number.MAX_SAFE_INTEGER&&ot>Number.MAX_SAFE_INTEGER)throw st.bytes=0,new RangeError("Could not encode varint");lt=lt||[],ut=ut||0;for(var ht=ut;ot>=at;)lt[ut++]=ot&255|it,ot/=128;for(;ot&rt;)lt[ut++]=ot&255|it,ot>>>=7;return lt[ut]=ot|0,st.bytes=ut-ht+1,lt}return encode_1}var decode$3,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$3;hasRequiredDecode=1,decode$3=rt;var it=128,tt=127;function rt(at,lt){var ot=0,lt=lt||0,ut=0,ht=lt,mt,bt=at.length;do{if(ht>=bt||ut>49)throw rt.bytes=0,new RangeError("Could not decode varint");mt=at[ht++],ot+=ut<28?(mt&tt)<<ut:(mt&tt)*Math.pow(2,ut),ut+=7}while(mt>=it);return rt.bytes=ht-lt,ot}return decode$3}var length$1,hasRequiredLength;function requireLength(){if(hasRequiredLength)return length$1;hasRequiredLength=1;var it=Math.pow(2,7),tt=Math.pow(2,14),rt=Math.pow(2,21),at=Math.pow(2,28),st=Math.pow(2,35),ot=Math.pow(2,42),lt=Math.pow(2,49),ut=Math.pow(2,56),ht=Math.pow(2,63);return length$1=function(mt){return mt<it?1:mt<tt?2:mt<rt?3:mt<at?4:mt<st?5:mt<ot?6:mt<lt?7:mt<ut?8:mt<ht?9:10},length$1}var varint,hasRequiredVarint;function requireVarint(){return hasRequiredVarint||(hasRequiredVarint=1,varint={encode:requireEncode(),decode:requireDecode(),encodingLength:requireLength()}),varint}var util$8,hasRequiredUtil$2;function requireUtil$2(){if(hasRequiredUtil$2)return util$8;hasRequiredUtil$2=1;const it=requireVarint(),{toString:tt}=require$$5$1,{fromString:rt}=require$$1$3;util$8={numberToUint8Array:st,uint8ArrayToNumber:at,varintUint8ArrayEncode:ot,varintEncode:lt};function at(ut){return parseInt(tt(ut,"base16"),16)}function st(ut){let ht=ut.toString(16);return ht.length%2===1&&(ht="0"+ht),rt(ht,"base16")}function ot(ut){return Uint8Array.from(it.encode(at(ut)))}function lt(ut){return Uint8Array.from(it.encode(ut))}return util$8}var generatedTable,hasRequiredGeneratedTable;function requireGeneratedTable(){return hasRequiredGeneratedTable||(hasRequiredGeneratedTable=1,generatedTable={baseTable:Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"eth-receipt-log-trie":153,"eth-reciept-log":154,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,"caip-50":202,streamid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,noise:454,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,"swhid-1-snp":496,json:512,messagepack:513,"libp2p-peer-record":769,"libp2p-relay-rsvp":770,"car-index-sorted":1024,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,"secp256k1-priv":4865,"x25519-priv":4866,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056,"arweave-ns":11704592})}),generatedTable}var maps,hasRequiredMaps;function requireMaps(){if(hasRequiredMaps)return maps;hasRequiredMaps=1;const{baseTable:it}=requireGeneratedTable(),tt=requireUtil$2().varintEncode,rt={},at={},st={};for(const lt in it){const ut=lt,ht=it[ut];rt[ut]=tt(ht);const mt=ut.toUpperCase().replace(/-/g,"_");at[mt]=ht,st[ht]||(st[ht]=ut)}Object.freeze(rt),Object.freeze(at),Object.freeze(st);const ot=Object.freeze(it);return maps={nameToVarint:rt,constantToCode:at,nameToCode:ot,codeToName:st},maps}var src$7,hasRequiredSrc$4;function requireSrc$4(){if(hasRequiredSrc$4)return src$7;hasRequiredSrc$4=1;const it=requireVarint(),{concat:tt}=require$$1$2,rt=requireUtil$2(),{nameToVarint:at,constantToCode:st,nameToCode:ot,codeToName:lt}=requireMaps();function ut(Dt,Wt){let qt;if(Dt instanceof Uint8Array)qt=rt.varintUint8ArrayEncode(Dt);else if(at[Dt])qt=at[Dt];else throw new Error("multicodec not recognized");return tt([qt,Wt],qt.length+Wt.length)}function ht(Dt){return it.decode(Dt),Dt.slice(it.decode.bytes)}function mt(Dt){const Wt=it.decode(Dt),qt=lt[Wt];if(qt===void 0)throw new Error(`Code "${Wt}" not found`);return qt}function bt(Dt){return lt[Dt]}function vt(Dt){const Wt=ot[Dt];if(Wt===void 0)throw new Error(`Codec "${Dt}" not found`);return Wt}function At(Dt){return it.decode(Dt)}function xt(Dt){const Wt=at[Dt];if(Wt===void 0)throw new Error(`Codec "${Dt}" not found`);return Wt}function Et(Dt){return rt.varintEncode(Dt)}function Tt(Dt){return mt(Dt)}function wt(Dt){return bt(Dt)}function Ct(Dt){return vt(Dt)}function It(Dt){return At(Dt)}function St(Dt){return xt(Dt)}function Rt(Dt){return Array.from(Et(Dt))}return src$7={addPrefix:ut,rmPrefix:ht,getNameFromData:mt,getNameFromCode:bt,getCodeFromName:vt,getCodeFromData:At,getVarintFromName:xt,getVarintFromCode:Et,getCodec:Tt,getName:wt,getNumber:Ct,getCode:It,getCodeVarint:St,getVarint:Rt,...st,nameToVarint:at,nameToCode:ot,codeToName:lt},src$7}var cidUtil,hasRequiredCidUtil;function requireCidUtil(){if(hasRequiredCidUtil)return cidUtil;hasRequiredCidUtil=1;const it=src$a;return cidUtil={checkCIDComponents:function(rt){if(rt==null)return"null values are not valid CIDs";if(!(rt.version===0||rt.version===1))return"Invalid version, must be a number equal to 1 or 0";if(typeof rt.codec!="string")return"codec must be string";if(rt.version===0){if(rt.codec!=="dag-pb")return"codec must be 'dag-pb' for CIDv0";if(rt.multibaseName!=="base58btc")return"multibaseName must be 'base58btc' for CIDv0"}if(!(rt.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{it.validate(rt.multihash)}catch(at){let st=at.message;return st||(st="Multihash validation failed"),st}}},cidUtil}var src$6,hasRequiredSrc$3;function requireSrc$3(){if(hasRequiredSrc$3)return src$6;hasRequiredSrc$3=1;const it=src$a,tt=src$d.exports,rt=requireSrc$4(),at=requireCidUtil(),{concat:st}=require$$1$2,{toString:ot}=require$$5$1,{equals:lt}=require$$6$1,ut=rt.nameToCode,ht=Object.keys(ut).reduce((vt,At)=>(vt[ut[At]]=At,vt),{}),mt=Symbol.for("@ipld/js-cid/CID");class bt{constructor(At,xt,Et,Tt){if(this.version,this.codec,this.multihash,Object.defineProperty(this,mt,{value:!0}),bt.isCID(At)){const wt=At;this.version=wt.version,this.codec=wt.codec,this.multihash=wt.multihash,this.multibaseName=wt.multibaseName||(wt.version===0?"base58btc":"base32");return}if(typeof At=="string"){const wt=tt.isEncoded(At);if(wt){const Ct=tt.decode(At);this.version=parseInt(Ct[0].toString(),16),this.codec=rt.getCodec(Ct.slice(1)),this.multihash=rt.rmPrefix(Ct.slice(1)),this.multibaseName=wt}else this.version=0,this.codec="dag-pb",this.multihash=it.fromB58String(At),this.multibaseName="base58btc";bt.validateCID(this),Object.defineProperty(this,"string",{value:At});return}if(At instanceof Uint8Array){const wt=parseInt(At[0].toString(),16);if(wt===1){const Ct=At;this.version=wt,this.codec=rt.getCodec(Ct.slice(1)),this.multihash=rt.rmPrefix(Ct.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=At,this.multibaseName="base58btc";bt.validateCID(this);return}this.version=At,typeof xt=="number"&&(xt=ht[xt]),this.codec=xt,this.multihash=Et,this.multibaseName=Tt||(At===0?"base58btc":"base32"),bt.validateCID(this)}get bytes(){let At=this._bytes;if(!At){if(this.version===0)At=this.multihash;else if(this.version===1){const xt=rt.getCodeVarint(this.codec);At=st([[1],xt,this.multihash],1+xt.byteLength+this.multihash.byteLength)}else throw new Error("unsupported version");Object.defineProperty(this,"_bytes",{value:At})}return At}get prefix(){const At=rt.getCodeVarint(this.codec),xt=it.prefix(this.multihash);return st([[this.version],At,xt],1+At.byteLength+xt.byteLength)}get code(){return ut[this.codec]}toV0(){if(this.codec!=="dag-pb")throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:At,length:xt}=it.decode(this.multihash);if(At!=="sha2-256")throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(xt!==32)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new bt(0,this.codec,this.multihash)}toV1(){return new bt(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(At=this.multibaseName){if(this.string&&this.string.length!==0&&At===this.multibaseName)return this.string;let xt;if(this.version===0){if(At!=="base58btc")throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");xt=it.toB58String(this.multihash)}else if(this.version===1)xt=ot(tt.encode(At,this.bytes));else throw new Error("unsupported version");return At===this.multibaseName&&Object.defineProperty(this,"string",{value:xt}),xt}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(At){return this.toBaseEncodedString(At)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(At){return this.codec===At.codec&&this.version===At.version&&lt(this.multihash,At.multihash)}static validateCID(At){const xt=at.checkCIDComponents(At);if(xt)throw new Error(xt)}static isCID(At){return At instanceof bt||Boolean(At&&At[mt])}}return bt.codecs=ut,src$6=bt,src$6}var persist_1,hasRequiredPersist;function requirePersist(){if(hasRequiredPersist)return persist_1;hasRequiredPersist=1;const it=src$9,tt=requireSrc$3();return persist_1=async(at,st,ot)=>{ot.codec||(ot.codec="dag-pb"),ot.cidVersion||(ot.cidVersion=0),ot.hashAlg||(ot.hashAlg="sha2-256"),ot.hashAlg!=="sha2-256"&&(ot.cidVersion=1);const lt=await it(at,ot.hashAlg),ut=new tt(ot.cidVersion,ot.codec,lt);return ot.onlyHash||await st.put(at,{pin:ot.pin,preload:ot.preload,timeout:ot.timeout,cid:ut}),ut},persist_1}var resolver={},dag,hasRequiredDag;function requireDag(){if(hasRequiredDag)return dag;hasRequiredDag=1;var it=requireMinimal(),tt=it.Reader,rt=it.Writer,at=it.util,st=it.roots.default||(it.roots.default={});return st.PBLink=function(){function ot(lt){if(lt)for(var ut=Object.keys(lt),ht=0;ht<ut.length;++ht)lt[ut[ht]]!=null&&(this[ut[ht]]=lt[ut[ht]])}return ot.prototype.Hash=at.newBuffer([]),ot.prototype.Name="",ot.prototype.Tsize=at.Long?at.Long.fromBits(0,0,!0):0,ot.encode=function(ut,ht){return ht||(ht=rt.create()),ut.Hash!=null&&Object.hasOwnProperty.call(ut,"Hash")&&ht.uint32(10).bytes(ut.Hash),ut.Name!=null&&Object.hasOwnProperty.call(ut,"Name")&&ht.uint32(18).string(ut.Name),ut.Tsize!=null&&Object.hasOwnProperty.call(ut,"Tsize")&&ht.uint32(24).uint64(ut.Tsize),ht},ot.decode=function(ut,ht){ut instanceof tt||(ut=tt.create(ut));for(var mt=ht===void 0?ut.len:ut.pos+ht,bt=new st.PBLink;ut.pos<mt;){var vt=ut.uint32();switch(vt>>>3){case 1:bt.Hash=ut.bytes();break;case 2:bt.Name=ut.string();break;case 3:bt.Tsize=ut.uint64();break;default:ut.skipType(vt&7);break}}return bt},ot.fromObject=function(ut){if(ut instanceof st.PBLink)return ut;var ht=new st.PBLink;return ut.Hash!=null&&(typeof ut.Hash=="string"?at.base64.decode(ut.Hash,ht.Hash=at.newBuffer(at.base64.length(ut.Hash)),0):ut.Hash.length&&(ht.Hash=ut.Hash)),ut.Name!=null&&(ht.Name=String(ut.Name)),ut.Tsize!=null&&(at.Long?(ht.Tsize=at.Long.fromValue(ut.Tsize)).unsigned=!0:typeof ut.Tsize=="string"?ht.Tsize=parseInt(ut.Tsize,10):typeof ut.Tsize=="number"?ht.Tsize=ut.Tsize:typeof ut.Tsize=="object"&&(ht.Tsize=new at.LongBits(ut.Tsize.low>>>0,ut.Tsize.high>>>0).toNumber(!0))),ht},ot.toObject=function(ut,ht){ht||(ht={});var mt={};if(ht.defaults)if(ht.bytes===String?mt.Hash="":(mt.Hash=[],ht.bytes!==Array&&(mt.Hash=at.newBuffer(mt.Hash))),mt.Name="",at.Long){var bt=new at.Long(0,0,!0);mt.Tsize=ht.longs===String?bt.toString():ht.longs===Number?bt.toNumber():bt}else mt.Tsize=ht.longs===String?"0":0;return ut.Hash!=null&&ut.hasOwnProperty("Hash")&&(mt.Hash=ht.bytes===String?at.base64.encode(ut.Hash,0,ut.Hash.length):ht.bytes===Array?Array.prototype.slice.call(ut.Hash):ut.Hash),ut.Name!=null&&ut.hasOwnProperty("Name")&&(mt.Name=ut.Name),ut.Tsize!=null&&ut.hasOwnProperty("Tsize")&&(typeof ut.Tsize=="number"?mt.Tsize=ht.longs===String?String(ut.Tsize):ut.Tsize:mt.Tsize=ht.longs===String?at.Long.prototype.toString.call(ut.Tsize):ht.longs===Number?new at.LongBits(ut.Tsize.low>>>0,ut.Tsize.high>>>0).toNumber(!0):ut.Tsize),mt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,it.util.toJSONOptions)},ot}(),st.PBNode=function(){function ot(lt){if(this.Links=[],lt)for(var ut=Object.keys(lt),ht=0;ht<ut.length;++ht)lt[ut[ht]]!=null&&(this[ut[ht]]=lt[ut[ht]])}return ot.prototype.Links=at.emptyArray,ot.prototype.Data=at.newBuffer([]),ot.encode=function(ut,ht){if(ht||(ht=rt.create()),ut.Data!=null&&Object.hasOwnProperty.call(ut,"Data")&&ht.uint32(10).bytes(ut.Data),ut.Links!=null&&ut.Links.length)for(var mt=0;mt<ut.Links.length;++mt)st.PBLink.encode(ut.Links[mt],ht.uint32(18).fork()).ldelim();return ht},ot.decode=function(ut,ht){ut instanceof tt||(ut=tt.create(ut));for(var mt=ht===void 0?ut.len:ut.pos+ht,bt=new st.PBNode;ut.pos<mt;){var vt=ut.uint32();switch(vt>>>3){case 2:bt.Links&&bt.Links.length||(bt.Links=[]),bt.Links.push(st.PBLink.decode(ut,ut.uint32()));break;case 1:bt.Data=ut.bytes();break;default:ut.skipType(vt&7);break}}return bt},ot.fromObject=function(ut){if(ut instanceof st.PBNode)return ut;var ht=new st.PBNode;if(ut.Links){if(!Array.isArray(ut.Links))throw TypeError(".PBNode.Links: array expected");ht.Links=[];for(var mt=0;mt<ut.Links.length;++mt){if(typeof ut.Links[mt]!="object")throw TypeError(".PBNode.Links: object expected");ht.Links[mt]=st.PBLink.fromObject(ut.Links[mt])}}return ut.Data!=null&&(typeof ut.Data=="string"?at.base64.decode(ut.Data,ht.Data=at.newBuffer(at.base64.length(ut.Data)),0):ut.Data.length&&(ht.Data=ut.Data)),ht},ot.toObject=function(ut,ht){ht||(ht={});var mt={};if((ht.arrays||ht.defaults)&&(mt.Links=[]),ht.defaults&&(ht.bytes===String?mt.Data="":(mt.Data=[],ht.bytes!==Array&&(mt.Data=at.newBuffer(mt.Data)))),ut.Data!=null&&ut.hasOwnProperty("Data")&&(mt.Data=ht.bytes===String?at.base64.encode(ut.Data,0,ut.Data.length):ht.bytes===Array?Array.prototype.slice.call(ut.Data):ut.Data),ut.Links&&ut.Links.length){mt.Links=[];for(var bt=0;bt<ut.Links.length;++bt)mt.Links[bt]=st.PBLink.toObject(ut.Links[bt],ht)}return mt},ot.prototype.toJSON=function(){return this.constructor.toObject(this,it.util.toJSONOptions)},ot}(),dag=st,dag}const require$$0$4=getAugmentedNamespace(basics);var bases_1$1,hasRequiredBases$1;function requireBases$1(){if(hasRequiredBases$1)return bases_1$1;hasRequiredBases$1=1;const{bases:it}=require$$0$4;function tt(ot,lt,ut,ht){return{name:ot,prefix:lt,encoder:{name:ot,prefix:lt,encode:ut},decoder:{decode:ht}}}const rt=tt("utf8","u",ot=>"u"+new TextDecoder("utf8").decode(ot),ot=>new TextEncoder().encode(ot.substring(1))),at=tt("ascii","a",ot=>{let lt="a";for(let ut=0;ut<ot.length;ut++)lt+=String.fromCharCode(ot[ut]);return lt},ot=>{ot=ot.substring(1);const lt=new Uint8Array(ot.length);for(let ut=0;ut<ot.length;ut++)lt[ut]=ot.charCodeAt(ut);return lt});return bases_1$1={utf8:rt,"utf-8":rt,hex:it.base16,latin1:at,ascii:at,binary:at,...it},bases_1$1}var fromString_1$1,hasRequiredFromString$1;function requireFromString$1(){if(hasRequiredFromString$1)return fromString_1$1;hasRequiredFromString$1=1;const it=requireBases$1();function tt(rt,at="utf8"){const st=it[at];if(!st)throw new Error(`Unsupported encoding "${at}"`);return st.decoder.decode(`${st.prefix}${rt}`)}return fromString_1$1=tt,fromString_1$1}var dagLink,hasRequiredDagLink;function requireDagLink(){if(hasRequiredDagLink)return dagLink;hasRequiredDagLink=1;const it=requireSrc$3(),tt=requireFromString$1();class rt{constructor(st,ot,lt){if(!lt)throw new Error("A link requires a cid to point to");this.Name=st||"",this.Tsize=ot,this.Hash=new it(lt),Object.defineProperties(this,{_nameBuf:{value:null,writable:!0,enumerable:!1}})}toString(){return`DAGLink <${this.Hash.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){return this._json||(this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})),Object.assign({},this._json)}get nameAsBuffer(){return this._nameBuf!=null?this._nameBuf:(this._nameBuf=tt(this.Name),this._nameBuf)}}return dagLink=rt,dagLink}var stable={exports:{}},hasRequiredStable;function requireStable(){return hasRequiredStable||(hasRequiredStable=1,function(it,tt){//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//!  2018 Angry Bytes and contributors. MIT licensed.
(function(rt,at){it.exports=at()})(commonjsGlobal,function(){var rt=function(ot,lt){return at(ot.slice(),lt)};rt.inplace=function(ot,lt){var ut=at(ot,lt);return ut!==ot&&st(ut,null,ot.length,ot),ot};function at(ot,lt){typeof lt!="function"&&(lt=function(vt,At){return String(vt).localeCompare(At)});var ut=ot.length;if(ut<=1)return ot;for(var ht=new Array(ut),mt=1;mt<ut;mt*=2){st(ot,lt,mt,ht);var bt=ot;ot=ht,ht=bt}return ot}var st=function(ot,lt,ut,ht){var mt=ot.length,bt=0,vt=ut*2,At,xt,Et,Tt,wt;for(At=0;At<mt;At+=vt)for(xt=At+ut,Et=xt+ut,xt>mt&&(xt=mt),Et>mt&&(Et=mt),Tt=At,wt=xt;;)if(Tt<xt&&wt<Et)lt(ot[Tt],ot[wt])<=0?ht[bt++]=ot[Tt++]:ht[bt++]=ot[wt++];else if(Tt<xt)ht[bt++]=ot[Tt++];else if(wt<Et)ht[bt++]=ot[wt++];else break};return rt})}(stable)),stable.exports}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;function it(tt,rt){for(let at=0;at<tt.byteLength;at++){if(tt[at]<rt[at])return-1;if(tt[at]>rt[at])return 1}return tt.byteLength>rt.byteLength?1:tt.byteLength<rt.byteLength?-1:0}return compare_1=it,compare_1}var sortLinks_1,hasRequiredSortLinks;function requireSortLinks(){if(hasRequiredSortLinks)return sortLinks_1;hasRequiredSortLinks=1;const it=requireStable(),tt=requireCompare(),rt=(st,ot)=>{const lt=st.nameAsBuffer,ut=ot.nameAsBuffer;return tt(lt,ut)};return sortLinks_1=st=>{it.inplace(st,rt)},sortLinks_1}var util$7,hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$7;hasRequiredUtil$1=1;const it=requireDagLink();function tt(rt){return new it(rt.Name||rt.name||"",rt.Tsize||rt.Size||rt.size||0,rt.Hash||rt.hash||rt.multihash||rt.cid)}return util$7={createDagLinkFromB58EncodedHash:tt},util$7}var serialize$1,hasRequiredSerialize;function requireSerialize(){if(hasRequiredSerialize)return serialize$1;hasRequiredSerialize=1;const it=requireMinimal(),{PBLink:tt}=requireDag(),{createDagLinkFromB58EncodedHash:rt}=requireUtil$1(),at=ut=>{const ht={};return ut.Data&&ut.Data.byteLength>0?ht.Data=ut.Data:ht.Data=null,ut.Links&&ut.Links.length>0?ht.Links=ut.Links.map(mt=>({Hash:mt.Hash.bytes,Name:mt.Name,Tsize:mt.Tsize})):ht.Links=null,ht};serialize$1={serializeDAGNode:ut=>lt(at(ut)),serializeDAGNodeLike:(ut,ht=[])=>{const mt={Data:ut,Links:ht.map(bt=>rt(bt))};return lt(at(mt))}};function lt(ut){const ht=it.Writer.create();if(ut.Links!=null)for(let mt=0;mt<ut.Links.length;mt++)tt.encode(ut.Links[mt],ht.uint32(18).fork()).ldelim();return ut.Data!=null&&ht.uint32(10).bytes(ut.Data),ht.finish()}return serialize$1}var genCid,hasRequiredGenCid;function requireGenCid(){if(hasRequiredGenCid)return genCid;hasRequiredGenCid=1;const it=requireSrc$3(),tt=requireSrc$4(),rt=src$9,{multihash:at}=rt,st=tt.DAG_PB,ot=at.names["sha2-256"];return genCid={codec:st,defaultHashAlg:ot,cid:async(ut,ht={})=>{const mt={cidVersion:ht.cidVersion==null?1:ht.cidVersion,hashAlg:ht.hashAlg==null?ot:ht.hashAlg},bt=at.codes[mt.hashAlg],vt=await rt(ut,bt),At=tt.getNameFromCode(st);return new it(mt.cidVersion,At,vt)}},genCid}var toDagLink,hasRequiredToDagLink;function requireToDagLink(){if(hasRequiredToDagLink)return toDagLink;hasRequiredToDagLink=1;const it=requireDagLink(),tt=requireGenCid();return toDagLink=async(at,st={})=>{const ot=at.serialize(),lt=await tt.cid(ot,st);return new it(st.name||"",at.size,lt)},toDagLink}var addLink_1,hasRequiredAddLink;function requireAddLink(){if(hasRequiredAddLink)return addLink_1;hasRequiredAddLink=1;const it=requireSortLinks(),tt=requireDagLink(),rt=st=>{if(st instanceof tt)return st;if(!("cid"in st||"hash"in st||"Hash"in st||"multihash"in st))throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.");return new tt(st.Name||st.name,st.Tsize||st.size,st.Hash||st.multihash||st.hash||st.cid)};return addLink_1=(st,ot)=>{const lt=rt(ot);st.Links.push(lt),it(st.Links)},addLink_1}var equals_1,hasRequiredEquals;function requireEquals(){if(hasRequiredEquals)return equals_1;hasRequiredEquals=1;function it(tt,rt){if(tt===rt)return!0;if(tt.byteLength!==rt.byteLength)return!1;for(let at=0;at<tt.byteLength;at++)if(tt[at]!==rt[at])return!1;return!0}return equals_1=it,equals_1}var rmLink_1,hasRequiredRmLink;function requireRmLink(){if(hasRequiredRmLink)return rmLink_1;hasRequiredRmLink=1;const it=requireSrc$3(),tt=requireEquals();return rmLink_1=(at,st)=>{let ot=null;if(typeof st=="string"?ot=lt=>lt.Name===st:st instanceof Uint8Array?ot=lt=>tt(lt.Hash.bytes,st):it.isCID(st)&&(ot=lt=>tt(lt.Hash.bytes,st.bytes)),ot){const lt=at.Links;let ut=0;for(;ut<lt.length;){const ht=lt[ut];ot(ht)?lt.splice(ut,1):ut++}}else throw new Error("second arg needs to be a name or CID")},rmLink_1}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;const it=requireBases$1();function tt(rt,at="utf8"){const st=it[at];if(!st)throw new Error(`Unsupported encoding "${at}"`);return st.encoder.encode(rt).substring(1)}return toString_1=tt,toString_1}var dagNode,hasRequiredDagNode;function requireDagNode(){if(hasRequiredDagNode)return dagNode;hasRequiredDagNode=1;const it=requireSortLinks(),tt=requireDagLink(),{createDagLinkFromB58EncodedHash:rt}=requireUtil$1(),{serializeDAGNode:at}=requireSerialize(),st=requireToDagLink(),ot=requireAddLink(),lt=requireRmLink(),ut=requireFromString$1(),ht=requireToString();class mt{constructor(vt,At=[],xt=null){if(vt||(vt=new Uint8Array(0)),typeof vt=="string"&&(vt=ut(vt)),!(vt instanceof Uint8Array))throw new Error("Passed 'data' is not a Uint8Array or a String!");if(xt!==null&&typeof xt!="number")throw new Error("Passed 'serializedSize' must be a number!");const Et=At.map(Tt=>Tt instanceof tt?Tt:rt(Tt));it(Et),this.Data=vt,this.Links=Et,Object.defineProperties(this,{_serializedSize:{value:xt,writable:!0,enumerable:!1},_size:{value:null,writable:!0,enumerable:!1}})}toJSON(){return this._json||(this._json=Object.freeze({data:this.Data,links:this.Links.map(vt=>vt.toJSON()),size:this.size})),Object.assign({},this._json)}toString(){return`DAGNode <data: "${ht(this.Data,"base64urlpad")}", links: ${this.Links.length}, size: ${this.size}>`}_invalidateCached(){this._serializedSize=null,this._size=null}addLink(vt){return this._invalidateCached(),ot(this,vt)}rmLink(vt){return this._invalidateCached(),lt(this,vt)}toDAGLink(vt){return st(this,vt)}serialize(){const vt=at(this);return this._serializedSize=vt.length,vt}get size(){if(this._size==null){let vt;vt==null&&(this._serializedSize=this.serialize().length,vt=this._serializedSize),this._size=this.Links.reduce((At,xt)=>At+xt.Tsize,vt)}return this._size}set size(vt){throw new Error("Can't set property: 'size' is immutable")}}return dagNode=mt,dagNode}var util$6,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$6;hasRequiredUtil=1;const{PBNode:it}=requireDag(),tt=requireDagLink(),rt=requireDagNode(),{serializeDAGNode:at,serializeDAGNodeLike:st}=requireSerialize(),ot=requireGenCid(),lt=(mt,bt)=>ot.cid(mt,bt),ut=mt=>mt instanceof rt?at(mt):st(mt.Data,mt.Links),ht=mt=>{const bt=it.decode(mt),vt=it.toObject(bt,{defaults:!1,arrays:!0,longs:Number,objects:!1}),At=vt.Links.map(Et=>new tt(Et.Name,Et.Tsize,Et.Hash)),xt=vt.Data==null?new Uint8Array(0):vt.Data;return new rt(xt,At,mt.byteLength)};return util$6={codec:ot.codec,defaultHashAlg:ot.defaultHashAlg,serialize:ut,deserialize:ht,cid:lt},util$6}var hasRequiredResolver;function requireResolver(){if(hasRequiredResolver)return resolver;hasRequiredResolver=1;const it=requireSrc$3(),tt=requireUtil();return resolver.resolve=(rt,at="/")=>{let st=tt.deserialize(rt);const ot=at.split("/").filter(Boolean);for(;ot.length;){const lt=ot.shift();if(st[lt]===void 0){for(const ut of st.Links)if(ut.Name===lt)return{value:ut.Hash,remainderPath:ot.join("/")};throw new Error(`Object has no property '${lt}'`)}if(st=st[lt],it.isCID(st))return{value:st,remainderPath:ot.join("/")}}return{value:st,remainderPath:""}},resolver.tree=function*(rt){const at=tt.deserialize(rt);yield"Data",yield"Links";for(let st=0;st<at.Links.length;st++)yield`Links/${st}`,yield`Links/${st}/Name`,yield`Links/${st}/Tsize`,yield`Links/${st}/Hash`},resolver}var src$5,hasRequiredSrc$2;function requireSrc$2(){if(hasRequiredSrc$2)return src$5;hasRequiredSrc$2=1;const it=requireResolver(),tt=requireUtil(),rt=requireDagNode(),at=requireDagLink();return src$5={DAGNode:rt,DAGLink:at,resolver:it,util:tt,codec:tt.codec,defaultHashAlg:tt.defaultHashAlg},src$5}var dir$1,hasRequiredDir$1;function requireDir$1(){if(hasRequiredDir$1)return dir$1;hasRequiredDir$1=1;const{UnixFS:it}=requireSrc$5(),tt=requirePersist(),{DAGNode:rt}=requireSrc$2();return dir$1=async(st,ot,lt)=>{const ut=new it({type:"directory",mtime:st.mtime,mode:st.mode}),ht=new rt(ut.marshal()).serialize(),mt=await tt(ht,ot,lt),bt=st.path;return{cid:mt,path:bt,unixfs:ut,size:ht.length}},dir$1}var itAll,hasRequiredItAll;function requireItAll(){return hasRequiredItAll||(hasRequiredItAll=1,itAll=async tt=>{const rt=[];for await(const at of tt)rt.push(at);return rt}),itAll}var flat,hasRequiredFlat;function requireFlat(){if(hasRequiredFlat)return flat;hasRequiredFlat=1;const it=requireItAll();return flat=async function(tt,rt){return rt(await it(tt))},flat}var balanced_1,hasRequiredBalanced;function requireBalanced(){if(hasRequiredBalanced)return balanced_1;hasRequiredBalanced=1;const it=itBatch;function tt(at,st,ot){return rt(at,st,ot)}async function rt(at,st,ot){const lt=[];for await(const ut of it(at,ot.maxChildrenPerNode))lt.push(await st(ut));return lt.length>1?rt(lt,st,ot):lt[0]}return balanced_1=tt,balanced_1}var trickle,hasRequiredTrickle;function requireTrickle(){if(hasRequiredTrickle)return trickle;hasRequiredTrickle=1;const it=itBatch;trickle=async function(st,ot,lt){const ut=new rt(lt.layerRepeat);let ht=0,mt=1,bt=ut;for await(const vt of it(st,lt.maxChildrenPerNode))bt.isFull()&&(bt!==ut&&ut.addChild(await bt.reduce(ot)),ht&&ht%lt.layerRepeat===0&&mt++,bt=new tt(mt,lt.layerRepeat,ht),ht++),bt.append(vt);return bt&&bt!==ut&&ut.addChild(await bt.reduce(ot)),ut.reduce(ot)};class tt{constructor(st,ot,lt=0){this.maxDepth=st,this.layerRepeat=ot,this.currentDepth=1,this.iteration=lt,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:st,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const st=this._findParent(this.node,this.currentDepth);return st?(this._addNextNodeToParent(st),!1):!0}_addNextNodeToParent(st){this.parent=st;const ot={children:[],depth:st.depth+1,parent:st,maxDepth:this.maxDepth,maxChildren:Math.floor(st.children.length/this.layerRepeat)*this.layerRepeat};st.children.push(ot),this.currentDepth=ot.depth,this.node=ot}append(st){this.node.data=st}reduce(st){return this._reduce(this.root,st)}async _reduce(st,ot){let lt=[];return st.children.length&&(lt=await Promise.all(st.children.filter(ut=>ut.data).map(ut=>this._reduce(ut,ot)))),ot((st.data||[]).concat(lt))}_findParent(st,ot){const lt=st.parent;if(!(!lt||lt.depth===0))return lt.children.length===lt.maxChildren||!lt.maxChildren?this._findParent(lt,ot):lt}}class rt extends tt{constructor(st){super(0,st),this.root.depth=0,this.currentDepth=1}addChild(st){this.root.children.push(st)}reduce(st){return st((this.root.data||[]).concat(this.root.children))}}return trickle}var bufferImporter_1,hasRequiredBufferImporter;function requireBufferImporter(){if(hasRequiredBufferImporter)return bufferImporter_1;hasRequiredBufferImporter=1;const{UnixFS:it}=requireSrc$5(),tt=requirePersist(),{DAGNode:rt}=requireSrc$2();async function*at(st,ot,lt){for await(let ut of st.content)yield async()=>{lt.progress(ut.length,st.path);let ht;const mt={codec:"dag-pb",cidVersion:lt.cidVersion,hashAlg:lt.hashAlg,onlyHash:lt.onlyHash};return lt.rawLeaves?(mt.codec="raw",mt.cidVersion=1):(ht=new it({type:lt.leafType,data:ut,mtime:st.mtime,mode:st.mode}),ut=new rt(ht.marshal()).serialize()),{cid:await tt(ut,ot,mt),unixfs:ht,size:ut.length}}}return bufferImporter_1=at,bufferImporter_1}var file,hasRequiredFile;function requireFile(){if(hasRequiredFile)return file;hasRequiredFile=1;const it=errCode,{UnixFS:tt}=requireSrc$5(),rt=requirePersist(),{DAGNode:at,DAGLink:st}=requireSrc$2(),ot=itParallelBatch,lt=src$9.multihash,ut={flat:requireFlat(),balanced:requireBalanced(),trickle:requireTrickle()};async function*ht(vt,At,xt){let Et=-1,Tt,wt;typeof xt.bufferImporter=="function"?wt=xt.bufferImporter:wt=requireBufferImporter();for await(const Ct of ot(wt(vt,At,xt),xt.blockWriteConcurrency)){if(Et++,Et===0){Tt=Ct;continue}else Et===1&&Tt&&(yield Tt,Tt=null);yield Ct}Tt&&(Tt.single=!0,yield Tt)}const mt=(vt,At,xt)=>{async function Et(Tt){if(Tt.length===1&&Tt[0].single&&xt.reduceSingleLeafToSelf){const Dt=Tt[0];if(Dt.cid.codec==="raw"&&(vt.mtime!==void 0||vt.mode!==void 0)){let{data:Wt}=await At.get(Dt.cid,xt);Dt.unixfs=new tt({type:"file",mtime:vt.mtime,mode:vt.mode,data:Wt});const qt=lt.decode(Dt.cid.multihash);Wt=new at(Dt.unixfs.marshal()).serialize(),Dt.cid=await rt(Wt,At,{...xt,codec:"dag-pb",hashAlg:qt.name,cidVersion:xt.cidVersion}),Dt.size=Wt.length}return{cid:Dt.cid,path:vt.path,unixfs:Dt.unixfs,size:Dt.size}}const wt=new tt({type:"file",mtime:vt.mtime,mode:vt.mode}),Ct=Tt.filter(Dt=>Dt.cid.codec==="raw"&&Dt.size||Dt.unixfs&&!Dt.unixfs.data&&Dt.unixfs.fileSize()?!0:Boolean(Dt.unixfs&&Dt.unixfs.data&&Dt.unixfs.data.length)).map(Dt=>Dt.cid.codec==="raw"?(wt.addBlockSize(Dt.size),new st("",Dt.size,Dt.cid)):(!Dt.unixfs||!Dt.unixfs.data?wt.addBlockSize(Dt.unixfs&&Dt.unixfs.fileSize()||0):wt.addBlockSize(Dt.unixfs.data.length),new st("",Dt.size,Dt.cid))),It=new at(wt.marshal(),Ct),St=It.serialize();return{cid:await rt(St,At,xt),path:vt.path,unixfs:wt,size:St.length+It.Links.reduce((Dt,Wt)=>Dt+Wt.Tsize,0)}}return Et};function bt(vt,At,xt){const Et=ut[xt.strategy];if(!Et)throw it(new Error(`Unknown importer build strategy name: ${xt.strategy}`),"ERR_BAD_STRATEGY");return Et(ht(vt,At,xt),mt(vt,At,xt),xt)}return file=bt,file}var buffer$2={},base64Js={};base64Js.byteLength=byteLength$1,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i$9=0,len=code.length;i$9<len;++i$9)lookup[i$9]=code[i$9],revLookup[code.charCodeAt(i$9)]=i$9;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;function getLens(it){var tt=it.length;if(tt%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var rt=it.indexOf("=");rt===-1&&(rt=tt);var at=rt===tt?0:4-rt%4;return[rt,at]}function byteLength$1(it){var tt=getLens(it),rt=tt[0],at=tt[1];return(rt+at)*3/4-at}function _byteLength(it,tt,rt){return(tt+rt)*3/4-rt}function toByteArray(it){var tt,rt=getLens(it),at=rt[0],st=rt[1],ot=new Arr(_byteLength(it,at,st)),lt=0,ut=st>0?at-4:at,ht;for(ht=0;ht<ut;ht+=4)tt=revLookup[it.charCodeAt(ht)]<<18|revLookup[it.charCodeAt(ht+1)]<<12|revLookup[it.charCodeAt(ht+2)]<<6|revLookup[it.charCodeAt(ht+3)],ot[lt++]=tt>>16&255,ot[lt++]=tt>>8&255,ot[lt++]=tt&255;return st===2&&(tt=revLookup[it.charCodeAt(ht)]<<2|revLookup[it.charCodeAt(ht+1)]>>4,ot[lt++]=tt&255),st===1&&(tt=revLookup[it.charCodeAt(ht)]<<10|revLookup[it.charCodeAt(ht+1)]<<4|revLookup[it.charCodeAt(ht+2)]>>2,ot[lt++]=tt>>8&255,ot[lt++]=tt&255),ot}function tripletToBase64(it){return lookup[it>>18&63]+lookup[it>>12&63]+lookup[it>>6&63]+lookup[it&63]}function encodeChunk(it,tt,rt){for(var at,st=[],ot=tt;ot<rt;ot+=3)at=(it[ot]<<16&16711680)+(it[ot+1]<<8&65280)+(it[ot+2]&255),st.push(tripletToBase64(at));return st.join("")}function fromByteArray(it){for(var tt,rt=it.length,at=rt%3,st=[],ot=16383,lt=0,ut=rt-at;lt<ut;lt+=ot)st.push(encodeChunk(it,lt,lt+ot>ut?ut:lt+ot));return at===1?(tt=it[rt-1],st.push(lookup[tt>>2]+lookup[tt<<4&63]+"==")):at===2&&(tt=(it[rt-2]<<8)+it[rt-1],st.push(lookup[tt>>10]+lookup[tt>>4&63]+lookup[tt<<2&63]+"=")),st.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(it,tt,rt,at,st){var ot,lt,ut=st*8-at-1,ht=(1<<ut)-1,mt=ht>>1,bt=-7,vt=rt?st-1:0,At=rt?-1:1,xt=it[tt+vt];for(vt+=At,ot=xt&(1<<-bt)-1,xt>>=-bt,bt+=ut;bt>0;ot=ot*256+it[tt+vt],vt+=At,bt-=8);for(lt=ot&(1<<-bt)-1,ot>>=-bt,bt+=at;bt>0;lt=lt*256+it[tt+vt],vt+=At,bt-=8);if(ot===0)ot=1-mt;else{if(ot===ht)return lt?NaN:(xt?-1:1)*(1/0);lt=lt+Math.pow(2,at),ot=ot-mt}return(xt?-1:1)*lt*Math.pow(2,ot-at)},ieee754.write=function(it,tt,rt,at,st,ot){var lt,ut,ht,mt=ot*8-st-1,bt=(1<<mt)-1,vt=bt>>1,At=st===23?Math.pow(2,-24)-Math.pow(2,-77):0,xt=at?0:ot-1,Et=at?1:-1,Tt=tt<0||tt===0&&1/tt<0?1:0;for(tt=Math.abs(tt),isNaN(tt)||tt===1/0?(ut=isNaN(tt)?1:0,lt=bt):(lt=Math.floor(Math.log(tt)/Math.LN2),tt*(ht=Math.pow(2,-lt))<1&&(lt--,ht*=2),lt+vt>=1?tt+=At/ht:tt+=At*Math.pow(2,1-vt),tt*ht>=2&&(lt++,ht/=2),lt+vt>=bt?(ut=0,lt=bt):lt+vt>=1?(ut=(tt*ht-1)*Math.pow(2,st),lt=lt+vt):(ut=tt*Math.pow(2,vt-1)*Math.pow(2,st),lt=0));st>=8;it[rt+xt]=ut&255,xt+=Et,ut/=256,st-=8);for(lt=lt<<st|ut,mt+=st;mt>0;it[rt+xt]=lt&255,xt+=Et,lt/=256,mt-=8);it[rt+xt-Et]|=Tt*128};/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/(function(it){const tt=base64Js,rt=ieee754,at=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;it.Buffer=ut,it.SlowBuffer=It,it.INSPECT_MAX_BYTES=50;const st=2147483647;it.kMaxLength=st,ut.TYPED_ARRAY_SUPPORT=ot(),!ut.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function ot(){try{const on=new Uint8Array(1),Xt={foo:function(){return 42}};return Object.setPrototypeOf(Xt,Uint8Array.prototype),Object.setPrototypeOf(on,Xt),on.foo()===42}catch{return!1}}Object.defineProperty(ut.prototype,"parent",{enumerable:!0,get:function(){if(!!ut.isBuffer(this))return this.buffer}}),Object.defineProperty(ut.prototype,"offset",{enumerable:!0,get:function(){if(!!ut.isBuffer(this))return this.byteOffset}});function lt(on){if(on>st)throw new RangeError('The value "'+on+'" is invalid for option "size"');const Xt=new Uint8Array(on);return Object.setPrototypeOf(Xt,ut.prototype),Xt}function ut(on,Xt,tn){if(typeof on=="number"){if(typeof Xt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return vt(on)}return ht(on,Xt,tn)}ut.poolSize=8192;function ht(on,Xt,tn){if(typeof on=="string")return At(on,Xt);if(ArrayBuffer.isView(on))return Et(on);if(on==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof on);if(gn(on,ArrayBuffer)||on&&gn(on.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(gn(on,SharedArrayBuffer)||on&&gn(on.buffer,SharedArrayBuffer)))return Tt(on,Xt,tn);if(typeof on=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const un=on.valueOf&&on.valueOf();if(un!=null&&un!==on)return ut.from(un,Xt,tn);const xn=wt(on);if(xn)return xn;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof on[Symbol.toPrimitive]=="function")return ut.from(on[Symbol.toPrimitive]("string"),Xt,tn);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof on)}ut.from=function(on,Xt,tn){return ht(on,Xt,tn)},Object.setPrototypeOf(ut.prototype,Uint8Array.prototype),Object.setPrototypeOf(ut,Uint8Array);function mt(on){if(typeof on!="number")throw new TypeError('"size" argument must be of type number');if(on<0)throw new RangeError('The value "'+on+'" is invalid for option "size"')}function bt(on,Xt,tn){return mt(on),on<=0?lt(on):Xt!==void 0?typeof tn=="string"?lt(on).fill(Xt,tn):lt(on).fill(Xt):lt(on)}ut.alloc=function(on,Xt,tn){return bt(on,Xt,tn)};function vt(on){return mt(on),lt(on<0?0:Ct(on)|0)}ut.allocUnsafe=function(on){return vt(on)},ut.allocUnsafeSlow=function(on){return vt(on)};function At(on,Xt){if((typeof Xt!="string"||Xt==="")&&(Xt="utf8"),!ut.isEncoding(Xt))throw new TypeError("Unknown encoding: "+Xt);const tn=St(on,Xt)|0;let un=lt(tn);const xn=un.write(on,Xt);return xn!==tn&&(un=un.slice(0,xn)),un}function xt(on){const Xt=on.length<0?0:Ct(on.length)|0,tn=lt(Xt);for(let un=0;un<Xt;un+=1)tn[un]=on[un]&255;return tn}function Et(on){if(gn(on,Uint8Array)){const Xt=new Uint8Array(on);return Tt(Xt.buffer,Xt.byteOffset,Xt.byteLength)}return xt(on)}function Tt(on,Xt,tn){if(Xt<0||on.byteLength<Xt)throw new RangeError('"offset" is outside of buffer bounds');if(on.byteLength<Xt+(tn||0))throw new RangeError('"length" is outside of buffer bounds');let un;return Xt===void 0&&tn===void 0?un=new Uint8Array(on):tn===void 0?un=new Uint8Array(on,Xt):un=new Uint8Array(on,Xt,tn),Object.setPrototypeOf(un,ut.prototype),un}function wt(on){if(ut.isBuffer(on)){const Xt=Ct(on.length)|0,tn=lt(Xt);return tn.length===0||on.copy(tn,0,0,Xt),tn}if(on.length!==void 0)return typeof on.length!="number"||mn(on.length)?lt(0):xt(on);if(on.type==="Buffer"&&Array.isArray(on.data))return xt(on.data)}function Ct(on){if(on>=st)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+st.toString(16)+" bytes");return on|0}function It(on){return+on!=on&&(on=0),ut.alloc(+on)}ut.isBuffer=function(Xt){return Xt!=null&&Xt._isBuffer===!0&&Xt!==ut.prototype},ut.compare=function(Xt,tn){if(gn(Xt,Uint8Array)&&(Xt=ut.from(Xt,Xt.offset,Xt.byteLength)),gn(tn,Uint8Array)&&(tn=ut.from(tn,tn.offset,tn.byteLength)),!ut.isBuffer(Xt)||!ut.isBuffer(tn))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Xt===tn)return 0;let un=Xt.length,xn=tn.length;for(let Tn=0,In=Math.min(un,xn);Tn<In;++Tn)if(Xt[Tn]!==tn[Tn]){un=Xt[Tn],xn=tn[Tn];break}return un<xn?-1:xn<un?1:0},ut.isEncoding=function(Xt){switch(String(Xt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ut.concat=function(Xt,tn){if(!Array.isArray(Xt))throw new TypeError('"list" argument must be an Array of Buffers');if(Xt.length===0)return ut.alloc(0);let un;if(tn===void 0)for(tn=0,un=0;un<Xt.length;++un)tn+=Xt[un].length;const xn=ut.allocUnsafe(tn);let Tn=0;for(un=0;un<Xt.length;++un){let In=Xt[un];if(gn(In,Uint8Array))Tn+In.length>xn.length?(ut.isBuffer(In)||(In=ut.from(In)),In.copy(xn,Tn)):Uint8Array.prototype.set.call(xn,In,Tn);else if(ut.isBuffer(In))In.copy(xn,Tn);else throw new TypeError('"list" argument must be an Array of Buffers');Tn+=In.length}return xn};function St(on,Xt){if(ut.isBuffer(on))return on.length;if(ArrayBuffer.isView(on)||gn(on,ArrayBuffer))return on.byteLength;if(typeof on!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof on);const tn=on.length,un=arguments.length>2&&arguments[2]===!0;if(!un&&tn===0)return 0;let xn=!1;for(;;)switch(Xt){case"ascii":case"latin1":case"binary":return tn;case"utf8":case"utf-8":return nn(on).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tn*2;case"hex":return tn>>>1;case"base64":return Cn(on).length;default:if(xn)return un?-1:nn(on).length;Xt=(""+Xt).toLowerCase(),xn=!0}}ut.byteLength=St;function Rt(on,Xt,tn){let un=!1;if((Xt===void 0||Xt<0)&&(Xt=0),Xt>this.length||((tn===void 0||tn>this.length)&&(tn=this.length),tn<=0)||(tn>>>=0,Xt>>>=0,tn<=Xt))return"";for(on||(on="utf8");;)switch(on){case"hex":return Bt(this,Xt,tn);case"utf8":case"utf-8":return Mt(this,Xt,tn);case"ascii":return Qt(this,Xt,tn);case"latin1":case"binary":return Ut(this,Xt,tn);case"base64":return Nt(this,Xt,tn);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kt(this,Xt,tn);default:if(un)throw new TypeError("Unknown encoding: "+on);on=(on+"").toLowerCase(),un=!0}}ut.prototype._isBuffer=!0;function Dt(on,Xt,tn){const un=on[Xt];on[Xt]=on[tn],on[tn]=un}ut.prototype.swap16=function(){const Xt=this.length;if(Xt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let tn=0;tn<Xt;tn+=2)Dt(this,tn,tn+1);return this},ut.prototype.swap32=function(){const Xt=this.length;if(Xt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let tn=0;tn<Xt;tn+=4)Dt(this,tn,tn+3),Dt(this,tn+1,tn+2);return this},ut.prototype.swap64=function(){const Xt=this.length;if(Xt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let tn=0;tn<Xt;tn+=8)Dt(this,tn,tn+7),Dt(this,tn+1,tn+6),Dt(this,tn+2,tn+5),Dt(this,tn+3,tn+4);return this},ut.prototype.toString=function(){const Xt=this.length;return Xt===0?"":arguments.length===0?Mt(this,0,Xt):Rt.apply(this,arguments)},ut.prototype.toLocaleString=ut.prototype.toString,ut.prototype.equals=function(Xt){if(!ut.isBuffer(Xt))throw new TypeError("Argument must be a Buffer");return this===Xt?!0:ut.compare(this,Xt)===0},ut.prototype.inspect=function(){let Xt="";const tn=it.INSPECT_MAX_BYTES;return Xt=this.toString("hex",0,tn).replace(/(.{2})/g,"$1 ").trim(),this.length>tn&&(Xt+=" ... "),"<Buffer "+Xt+">"},at&&(ut.prototype[at]=ut.prototype.inspect),ut.prototype.compare=function(Xt,tn,un,xn,Tn){if(gn(Xt,Uint8Array)&&(Xt=ut.from(Xt,Xt.offset,Xt.byteLength)),!ut.isBuffer(Xt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Xt);if(tn===void 0&&(tn=0),un===void 0&&(un=Xt?Xt.length:0),xn===void 0&&(xn=0),Tn===void 0&&(Tn=this.length),tn<0||un>Xt.length||xn<0||Tn>this.length)throw new RangeError("out of range index");if(xn>=Tn&&tn>=un)return 0;if(xn>=Tn)return-1;if(tn>=un)return 1;if(tn>>>=0,un>>>=0,xn>>>=0,Tn>>>=0,this===Xt)return 0;let In=Tn-xn,jn=un-tn;const Un=Math.min(In,jn),zn=this.slice(xn,Tn),Xn=Xt.slice(tn,un);for(let Gn=0;Gn<Un;++Gn)if(zn[Gn]!==Xn[Gn]){In=zn[Gn],jn=Xn[Gn];break}return In<jn?-1:jn<In?1:0};function Wt(on,Xt,tn,un,xn){if(on.length===0)return-1;if(typeof tn=="string"?(un=tn,tn=0):tn>2147483647?tn=2147483647:tn<-2147483648&&(tn=-2147483648),tn=+tn,mn(tn)&&(tn=xn?0:on.length-1),tn<0&&(tn=on.length+tn),tn>=on.length){if(xn)return-1;tn=on.length-1}else if(tn<0)if(xn)tn=0;else return-1;if(typeof Xt=="string"&&(Xt=ut.from(Xt,un)),ut.isBuffer(Xt))return Xt.length===0?-1:qt(on,Xt,tn,un,xn);if(typeof Xt=="number")return Xt=Xt&255,typeof Uint8Array.prototype.indexOf=="function"?xn?Uint8Array.prototype.indexOf.call(on,Xt,tn):Uint8Array.prototype.lastIndexOf.call(on,Xt,tn):qt(on,[Xt],tn,un,xn);throw new TypeError("val must be string, number or Buffer")}function qt(on,Xt,tn,un,xn){let Tn=1,In=on.length,jn=Xt.length;if(un!==void 0&&(un=String(un).toLowerCase(),un==="ucs2"||un==="ucs-2"||un==="utf16le"||un==="utf-16le")){if(on.length<2||Xt.length<2)return-1;Tn=2,In/=2,jn/=2,tn/=2}function Un(Xn,Gn){return Tn===1?Xn[Gn]:Xn.readUInt16BE(Gn*Tn)}let zn;if(xn){let Xn=-1;for(zn=tn;zn<In;zn++)if(Un(on,zn)===Un(Xt,Xn===-1?0:zn-Xn)){if(Xn===-1&&(Xn=zn),zn-Xn+1===jn)return Xn*Tn}else Xn!==-1&&(zn-=zn-Xn),Xn=-1}else for(tn+jn>In&&(tn=In-jn),zn=tn;zn>=0;zn--){let Xn=!0;for(let Gn=0;Gn<jn;Gn++)if(Un(on,zn+Gn)!==Un(Xt,Gn)){Xn=!1;break}if(Xn)return zn}return-1}ut.prototype.includes=function(Xt,tn,un){return this.indexOf(Xt,tn,un)!==-1},ut.prototype.indexOf=function(Xt,tn,un){return Wt(this,Xt,tn,un,!0)},ut.prototype.lastIndexOf=function(Xt,tn,un){return Wt(this,Xt,tn,un,!1)};function Vt(on,Xt,tn,un){tn=Number(tn)||0;const xn=on.length-tn;un?(un=Number(un),un>xn&&(un=xn)):un=xn;const Tn=Xt.length;un>Tn/2&&(un=Tn/2);let In;for(In=0;In<un;++In){const jn=parseInt(Xt.substr(In*2,2),16);if(mn(jn))return In;on[tn+In]=jn}return In}function Yt(on,Xt,tn,un){return $n(nn(Xt,on.length-tn),on,tn,un)}function jt(on,Xt,tn,un){return $n(sn(Xt),on,tn,un)}function kt(on,Xt,tn,un){return $n(Cn(Xt),on,tn,un)}function zt(on,Xt,tn,un){return $n(hn(Xt,on.length-tn),on,tn,un)}ut.prototype.write=function(Xt,tn,un,xn){if(tn===void 0)xn="utf8",un=this.length,tn=0;else if(un===void 0&&typeof tn=="string")xn=tn,un=this.length,tn=0;else if(isFinite(tn))tn=tn>>>0,isFinite(un)?(un=un>>>0,xn===void 0&&(xn="utf8")):(xn=un,un=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Tn=this.length-tn;if((un===void 0||un>Tn)&&(un=Tn),Xt.length>0&&(un<0||tn<0)||tn>this.length)throw new RangeError("Attempt to write outside buffer bounds");xn||(xn="utf8");let In=!1;for(;;)switch(xn){case"hex":return Vt(this,Xt,tn,un);case"utf8":case"utf-8":return Yt(this,Xt,tn,un);case"ascii":case"latin1":case"binary":return jt(this,Xt,tn,un);case"base64":return kt(this,Xt,tn,un);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zt(this,Xt,tn,un);default:if(In)throw new TypeError("Unknown encoding: "+xn);xn=(""+xn).toLowerCase(),In=!0}},ut.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Nt(on,Xt,tn){return Xt===0&&tn===on.length?tt.fromByteArray(on):tt.fromByteArray(on.slice(Xt,tn))}function Mt(on,Xt,tn){tn=Math.min(on.length,tn);const un=[];let xn=Xt;for(;xn<tn;){const Tn=on[xn];let In=null,jn=Tn>239?4:Tn>223?3:Tn>191?2:1;if(xn+jn<=tn){let Un,zn,Xn,Gn;switch(jn){case 1:Tn<128&&(In=Tn);break;case 2:Un=on[xn+1],(Un&192)===128&&(Gn=(Tn&31)<<6|Un&63,Gn>127&&(In=Gn));break;case 3:Un=on[xn+1],zn=on[xn+2],(Un&192)===128&&(zn&192)===128&&(Gn=(Tn&15)<<12|(Un&63)<<6|zn&63,Gn>2047&&(Gn<55296||Gn>57343)&&(In=Gn));break;case 4:Un=on[xn+1],zn=on[xn+2],Xn=on[xn+3],(Un&192)===128&&(zn&192)===128&&(Xn&192)===128&&(Gn=(Tn&15)<<18|(Un&63)<<12|(zn&63)<<6|Xn&63,Gn>65535&&Gn<1114112&&(In=Gn))}}In===null?(In=65533,jn=1):In>65535&&(In-=65536,un.push(In>>>10&1023|55296),In=56320|In&1023),un.push(In),xn+=jn}return Ht(un)}const Lt=4096;function Ht(on){const Xt=on.length;if(Xt<=Lt)return String.fromCharCode.apply(String,on);let tn="",un=0;for(;un<Xt;)tn+=String.fromCharCode.apply(String,on.slice(un,un+=Lt));return tn}function Qt(on,Xt,tn){let un="";tn=Math.min(on.length,tn);for(let xn=Xt;xn<tn;++xn)un+=String.fromCharCode(on[xn]&127);return un}function Ut(on,Xt,tn){let un="";tn=Math.min(on.length,tn);for(let xn=Xt;xn<tn;++xn)un+=String.fromCharCode(on[xn]);return un}function Bt(on,Xt,tn){const un=on.length;(!Xt||Xt<0)&&(Xt=0),(!tn||tn<0||tn>un)&&(tn=un);let xn="";for(let Tn=Xt;Tn<tn;++Tn)xn+=Mn[on[Tn]];return xn}function Kt(on,Xt,tn){const un=on.slice(Xt,tn);let xn="";for(let Tn=0;Tn<un.length-1;Tn+=2)xn+=String.fromCharCode(un[Tn]+un[Tn+1]*256);return xn}ut.prototype.slice=function(Xt,tn){const un=this.length;Xt=~~Xt,tn=tn===void 0?un:~~tn,Xt<0?(Xt+=un,Xt<0&&(Xt=0)):Xt>un&&(Xt=un),tn<0?(tn+=un,tn<0&&(tn=0)):tn>un&&(tn=un),tn<Xt&&(tn=Xt);const xn=this.subarray(Xt,tn);return Object.setPrototypeOf(xn,ut.prototype),xn};function Gt(on,Xt,tn){if(on%1!==0||on<0)throw new RangeError("offset is not uint");if(on+Xt>tn)throw new RangeError("Trying to access beyond buffer length")}ut.prototype.readUintLE=ut.prototype.readUIntLE=function(Xt,tn,un){Xt=Xt>>>0,tn=tn>>>0,un||Gt(Xt,tn,this.length);let xn=this[Xt],Tn=1,In=0;for(;++In<tn&&(Tn*=256);)xn+=this[Xt+In]*Tn;return xn},ut.prototype.readUintBE=ut.prototype.readUIntBE=function(Xt,tn,un){Xt=Xt>>>0,tn=tn>>>0,un||Gt(Xt,tn,this.length);let xn=this[Xt+--tn],Tn=1;for(;tn>0&&(Tn*=256);)xn+=this[Xt+--tn]*Tn;return xn},ut.prototype.readUint8=ut.prototype.readUInt8=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,1,this.length),this[Xt]},ut.prototype.readUint16LE=ut.prototype.readUInt16LE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,2,this.length),this[Xt]|this[Xt+1]<<8},ut.prototype.readUint16BE=ut.prototype.readUInt16BE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,2,this.length),this[Xt]<<8|this[Xt+1]},ut.prototype.readUint32LE=ut.prototype.readUInt32LE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,4,this.length),(this[Xt]|this[Xt+1]<<8|this[Xt+2]<<16)+this[Xt+3]*16777216},ut.prototype.readUint32BE=ut.prototype.readUInt32BE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,4,this.length),this[Xt]*16777216+(this[Xt+1]<<16|this[Xt+2]<<8|this[Xt+3])},ut.prototype.readBigUInt64LE=On(function(Xt){Xt=Xt>>>0,_n(Xt,"offset");const tn=this[Xt],un=this[Xt+7];(tn===void 0||un===void 0)&&wn(Xt,this.length-8);const xn=tn+this[++Xt]*2**8+this[++Xt]*2**16+this[++Xt]*2**24,Tn=this[++Xt]+this[++Xt]*2**8+this[++Xt]*2**16+un*2**24;return BigInt(xn)+(BigInt(Tn)<<BigInt(32))}),ut.prototype.readBigUInt64BE=On(function(Xt){Xt=Xt>>>0,_n(Xt,"offset");const tn=this[Xt],un=this[Xt+7];(tn===void 0||un===void 0)&&wn(Xt,this.length-8);const xn=tn*2**24+this[++Xt]*2**16+this[++Xt]*2**8+this[++Xt],Tn=this[++Xt]*2**24+this[++Xt]*2**16+this[++Xt]*2**8+un;return(BigInt(xn)<<BigInt(32))+BigInt(Tn)}),ut.prototype.readIntLE=function(Xt,tn,un){Xt=Xt>>>0,tn=tn>>>0,un||Gt(Xt,tn,this.length);let xn=this[Xt],Tn=1,In=0;for(;++In<tn&&(Tn*=256);)xn+=this[Xt+In]*Tn;return Tn*=128,xn>=Tn&&(xn-=Math.pow(2,8*tn)),xn},ut.prototype.readIntBE=function(Xt,tn,un){Xt=Xt>>>0,tn=tn>>>0,un||Gt(Xt,tn,this.length);let xn=tn,Tn=1,In=this[Xt+--xn];for(;xn>0&&(Tn*=256);)In+=this[Xt+--xn]*Tn;return Tn*=128,In>=Tn&&(In-=Math.pow(2,8*tn)),In},ut.prototype.readInt8=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,1,this.length),this[Xt]&128?(255-this[Xt]+1)*-1:this[Xt]},ut.prototype.readInt16LE=function(Xt,tn){Xt=Xt>>>0,tn||Gt(Xt,2,this.length);const un=this[Xt]|this[Xt+1]<<8;return un&32768?un|4294901760:un},ut.prototype.readInt16BE=function(Xt,tn){Xt=Xt>>>0,tn||Gt(Xt,2,this.length);const un=this[Xt+1]|this[Xt]<<8;return un&32768?un|4294901760:un},ut.prototype.readInt32LE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,4,this.length),this[Xt]|this[Xt+1]<<8|this[Xt+2]<<16|this[Xt+3]<<24},ut.prototype.readInt32BE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,4,this.length),this[Xt]<<24|this[Xt+1]<<16|this[Xt+2]<<8|this[Xt+3]},ut.prototype.readBigInt64LE=On(function(Xt){Xt=Xt>>>0,_n(Xt,"offset");const tn=this[Xt],un=this[Xt+7];(tn===void 0||un===void 0)&&wn(Xt,this.length-8);const xn=this[Xt+4]+this[Xt+5]*2**8+this[Xt+6]*2**16+(un<<24);return(BigInt(xn)<<BigInt(32))+BigInt(tn+this[++Xt]*2**8+this[++Xt]*2**16+this[++Xt]*2**24)}),ut.prototype.readBigInt64BE=On(function(Xt){Xt=Xt>>>0,_n(Xt,"offset");const tn=this[Xt],un=this[Xt+7];(tn===void 0||un===void 0)&&wn(Xt,this.length-8);const xn=(tn<<24)+this[++Xt]*2**16+this[++Xt]*2**8+this[++Xt];return(BigInt(xn)<<BigInt(32))+BigInt(this[++Xt]*2**24+this[++Xt]*2**16+this[++Xt]*2**8+un)}),ut.prototype.readFloatLE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,4,this.length),rt.read(this,Xt,!0,23,4)},ut.prototype.readFloatBE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,4,this.length),rt.read(this,Xt,!1,23,4)},ut.prototype.readDoubleLE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,8,this.length),rt.read(this,Xt,!0,52,8)},ut.prototype.readDoubleBE=function(Xt,tn){return Xt=Xt>>>0,tn||Gt(Xt,8,this.length),rt.read(this,Xt,!1,52,8)};function Pt(on,Xt,tn,un,xn,Tn){if(!ut.isBuffer(on))throw new TypeError('"buffer" argument must be a Buffer instance');if(Xt>xn||Xt<Tn)throw new RangeError('"value" argument is out of bounds');if(tn+un>on.length)throw new RangeError("Index out of range")}ut.prototype.writeUintLE=ut.prototype.writeUIntLE=function(Xt,tn,un,xn){if(Xt=+Xt,tn=tn>>>0,un=un>>>0,!xn){const jn=Math.pow(2,8*un)-1;Pt(this,Xt,tn,un,jn,0)}let Tn=1,In=0;for(this[tn]=Xt&255;++In<un&&(Tn*=256);)this[tn+In]=Xt/Tn&255;return tn+un},ut.prototype.writeUintBE=ut.prototype.writeUIntBE=function(Xt,tn,un,xn){if(Xt=+Xt,tn=tn>>>0,un=un>>>0,!xn){const jn=Math.pow(2,8*un)-1;Pt(this,Xt,tn,un,jn,0)}let Tn=un-1,In=1;for(this[tn+Tn]=Xt&255;--Tn>=0&&(In*=256);)this[tn+Tn]=Xt/In&255;return tn+un},ut.prototype.writeUint8=ut.prototype.writeUInt8=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,1,255,0),this[tn]=Xt&255,tn+1},ut.prototype.writeUint16LE=ut.prototype.writeUInt16LE=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,2,65535,0),this[tn]=Xt&255,this[tn+1]=Xt>>>8,tn+2},ut.prototype.writeUint16BE=ut.prototype.writeUInt16BE=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,2,65535,0),this[tn]=Xt>>>8,this[tn+1]=Xt&255,tn+2},ut.prototype.writeUint32LE=ut.prototype.writeUInt32LE=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,4,4294967295,0),this[tn+3]=Xt>>>24,this[tn+2]=Xt>>>16,this[tn+1]=Xt>>>8,this[tn]=Xt&255,tn+4},ut.prototype.writeUint32BE=ut.prototype.writeUInt32BE=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,4,4294967295,0),this[tn]=Xt>>>24,this[tn+1]=Xt>>>16,this[tn+2]=Xt>>>8,this[tn+3]=Xt&255,tn+4};function Zt(on,Xt,tn,un,xn){cn(Xt,un,xn,on,tn,7);let Tn=Number(Xt&BigInt(4294967295));on[tn++]=Tn,Tn=Tn>>8,on[tn++]=Tn,Tn=Tn>>8,on[tn++]=Tn,Tn=Tn>>8,on[tn++]=Tn;let In=Number(Xt>>BigInt(32)&BigInt(4294967295));return on[tn++]=In,In=In>>8,on[tn++]=In,In=In>>8,on[tn++]=In,In=In>>8,on[tn++]=In,tn}function an(on,Xt,tn,un,xn){cn(Xt,un,xn,on,tn,7);let Tn=Number(Xt&BigInt(4294967295));on[tn+7]=Tn,Tn=Tn>>8,on[tn+6]=Tn,Tn=Tn>>8,on[tn+5]=Tn,Tn=Tn>>8,on[tn+4]=Tn;let In=Number(Xt>>BigInt(32)&BigInt(4294967295));return on[tn+3]=In,In=In>>8,on[tn+2]=In,In=In>>8,on[tn+1]=In,In=In>>8,on[tn]=In,tn+8}ut.prototype.writeBigUInt64LE=On(function(Xt,tn=0){return Zt(this,Xt,tn,BigInt(0),BigInt("0xffffffffffffffff"))}),ut.prototype.writeBigUInt64BE=On(function(Xt,tn=0){return an(this,Xt,tn,BigInt(0),BigInt("0xffffffffffffffff"))}),ut.prototype.writeIntLE=function(Xt,tn,un,xn){if(Xt=+Xt,tn=tn>>>0,!xn){const Un=Math.pow(2,8*un-1);Pt(this,Xt,tn,un,Un-1,-Un)}let Tn=0,In=1,jn=0;for(this[tn]=Xt&255;++Tn<un&&(In*=256);)Xt<0&&jn===0&&this[tn+Tn-1]!==0&&(jn=1),this[tn+Tn]=(Xt/In>>0)-jn&255;return tn+un},ut.prototype.writeIntBE=function(Xt,tn,un,xn){if(Xt=+Xt,tn=tn>>>0,!xn){const Un=Math.pow(2,8*un-1);Pt(this,Xt,tn,un,Un-1,-Un)}let Tn=un-1,In=1,jn=0;for(this[tn+Tn]=Xt&255;--Tn>=0&&(In*=256);)Xt<0&&jn===0&&this[tn+Tn+1]!==0&&(jn=1),this[tn+Tn]=(Xt/In>>0)-jn&255;return tn+un},ut.prototype.writeInt8=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,1,127,-128),Xt<0&&(Xt=255+Xt+1),this[tn]=Xt&255,tn+1},ut.prototype.writeInt16LE=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,2,32767,-32768),this[tn]=Xt&255,this[tn+1]=Xt>>>8,tn+2},ut.prototype.writeInt16BE=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,2,32767,-32768),this[tn]=Xt>>>8,this[tn+1]=Xt&255,tn+2},ut.prototype.writeInt32LE=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,4,2147483647,-2147483648),this[tn]=Xt&255,this[tn+1]=Xt>>>8,this[tn+2]=Xt>>>16,this[tn+3]=Xt>>>24,tn+4},ut.prototype.writeInt32BE=function(Xt,tn,un){return Xt=+Xt,tn=tn>>>0,un||Pt(this,Xt,tn,4,2147483647,-2147483648),Xt<0&&(Xt=4294967295+Xt+1),this[tn]=Xt>>>24,this[tn+1]=Xt>>>16,this[tn+2]=Xt>>>8,this[tn+3]=Xt&255,tn+4},ut.prototype.writeBigInt64LE=On(function(Xt,tn=0){return Zt(this,Xt,tn,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ut.prototype.writeBigInt64BE=On(function(Xt,tn=0){return an(this,Xt,tn,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Jt(on,Xt,tn,un,xn,Tn){if(tn+un>on.length)throw new RangeError("Index out of range");if(tn<0)throw new RangeError("Index out of range")}function rn(on,Xt,tn,un,xn){return Xt=+Xt,tn=tn>>>0,xn||Jt(on,Xt,tn,4),rt.write(on,Xt,tn,un,23,4),tn+4}ut.prototype.writeFloatLE=function(Xt,tn,un){return rn(this,Xt,tn,!0,un)},ut.prototype.writeFloatBE=function(Xt,tn,un){return rn(this,Xt,tn,!1,un)};function fn(on,Xt,tn,un,xn){return Xt=+Xt,tn=tn>>>0,xn||Jt(on,Xt,tn,8),rt.write(on,Xt,tn,un,52,8),tn+8}ut.prototype.writeDoubleLE=function(Xt,tn,un){return fn(this,Xt,tn,!0,un)},ut.prototype.writeDoubleBE=function(Xt,tn,un){return fn(this,Xt,tn,!1,un)},ut.prototype.copy=function(Xt,tn,un,xn){if(!ut.isBuffer(Xt))throw new TypeError("argument should be a Buffer");if(un||(un=0),!xn&&xn!==0&&(xn=this.length),tn>=Xt.length&&(tn=Xt.length),tn||(tn=0),xn>0&&xn<un&&(xn=un),xn===un||Xt.length===0||this.length===0)return 0;if(tn<0)throw new RangeError("targetStart out of bounds");if(un<0||un>=this.length)throw new RangeError("Index out of range");if(xn<0)throw new RangeError("sourceEnd out of bounds");xn>this.length&&(xn=this.length),Xt.length-tn<xn-un&&(xn=Xt.length-tn+un);const Tn=xn-un;return this===Xt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(tn,un,xn):Uint8Array.prototype.set.call(Xt,this.subarray(un,xn),tn),Tn},ut.prototype.fill=function(Xt,tn,un,xn){if(typeof Xt=="string"){if(typeof tn=="string"?(xn=tn,tn=0,un=this.length):typeof un=="string"&&(xn=un,un=this.length),xn!==void 0&&typeof xn!="string")throw new TypeError("encoding must be a string");if(typeof xn=="string"&&!ut.isEncoding(xn))throw new TypeError("Unknown encoding: "+xn);if(Xt.length===1){const In=Xt.charCodeAt(0);(xn==="utf8"&&In<128||xn==="latin1")&&(Xt=In)}}else typeof Xt=="number"?Xt=Xt&255:typeof Xt=="boolean"&&(Xt=Number(Xt));if(tn<0||this.length<tn||this.length<un)throw new RangeError("Out of range index");if(un<=tn)return this;tn=tn>>>0,un=un===void 0?this.length:un>>>0,Xt||(Xt=0);let Tn;if(typeof Xt=="number")for(Tn=tn;Tn<un;++Tn)this[Tn]=Xt;else{const In=ut.isBuffer(Xt)?Xt:ut.from(Xt,xn),jn=In.length;if(jn===0)throw new TypeError('The value "'+Xt+'" is invalid for argument "value"');for(Tn=0;Tn<un-tn;++Tn)this[Tn+tn]=In[Tn%jn]}return this};const pn={};function vn(on,Xt,tn){pn[on]=class extends tn{constructor(){super(),Object.defineProperty(this,"message",{value:Xt.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${on}]`,this.stack,delete this.name}get code(){return on}set code(xn){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:xn,writable:!0})}toString(){return`${this.name} [${on}]: ${this.message}`}}}vn("ERR_BUFFER_OUT_OF_BOUNDS",function(on){return on?`${on} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vn("ERR_INVALID_ARG_TYPE",function(on,Xt){return`The "${on}" argument must be of type number. Received type ${typeof Xt}`},TypeError),vn("ERR_OUT_OF_RANGE",function(on,Xt,tn){let un=`The value of "${on}" is out of range.`,xn=tn;return Number.isInteger(tn)&&Math.abs(tn)>2**32?xn=En(String(tn)):typeof tn=="bigint"&&(xn=String(tn),(tn>BigInt(2)**BigInt(32)||tn<-(BigInt(2)**BigInt(32)))&&(xn=En(xn)),xn+="n"),un+=` It must be ${Xt}. Received ${xn}`,un},RangeError);function En(on){let Xt="",tn=on.length;const un=on[0]==="-"?1:0;for(;tn>=un+4;tn-=3)Xt=`_${on.slice(tn-3,tn)}${Xt}`;return`${on.slice(0,tn)}${Xt}`}function dn(on,Xt,tn){_n(Xt,"offset"),(on[Xt]===void 0||on[Xt+tn]===void 0)&&wn(Xt,on.length-(tn+1))}function cn(on,Xt,tn,un,xn,Tn){if(on>tn||on<Xt){const In=typeof Xt=="bigint"?"n":"";let jn;throw Tn>3?Xt===0||Xt===BigInt(0)?jn=`>= 0${In} and < 2${In} ** ${(Tn+1)*8}${In}`:jn=`>= -(2${In} ** ${(Tn+1)*8-1}${In}) and < 2 ** ${(Tn+1)*8-1}${In}`:jn=`>= ${Xt}${In} and <= ${tn}${In}`,new pn.ERR_OUT_OF_RANGE("value",jn,on)}dn(un,xn,Tn)}function _n(on,Xt){if(typeof on!="number")throw new pn.ERR_INVALID_ARG_TYPE(Xt,"number",on)}function wn(on,Xt,tn){throw Math.floor(on)!==on?(_n(on,tn),new pn.ERR_OUT_OF_RANGE(tn||"offset","an integer",on)):Xt<0?new pn.ERR_BUFFER_OUT_OF_BOUNDS:new pn.ERR_OUT_OF_RANGE(tn||"offset",`>= ${tn?1:0} and <= ${Xt}`,on)}const Ln=/[^+/0-9A-Za-z-_]/g;function yn(on){if(on=on.split("=")[0],on=on.trim().replace(Ln,""),on.length<2)return"";for(;on.length%4!==0;)on=on+"=";return on}function nn(on,Xt){Xt=Xt||1/0;let tn;const un=on.length;let xn=null;const Tn=[];for(let In=0;In<un;++In){if(tn=on.charCodeAt(In),tn>55295&&tn<57344){if(!xn){if(tn>56319){(Xt-=3)>-1&&Tn.push(239,191,189);continue}else if(In+1===un){(Xt-=3)>-1&&Tn.push(239,191,189);continue}xn=tn;continue}if(tn<56320){(Xt-=3)>-1&&Tn.push(239,191,189),xn=tn;continue}tn=(xn-55296<<10|tn-56320)+65536}else xn&&(Xt-=3)>-1&&Tn.push(239,191,189);if(xn=null,tn<128){if((Xt-=1)<0)break;Tn.push(tn)}else if(tn<2048){if((Xt-=2)<0)break;Tn.push(tn>>6|192,tn&63|128)}else if(tn<65536){if((Xt-=3)<0)break;Tn.push(tn>>12|224,tn>>6&63|128,tn&63|128)}else if(tn<1114112){if((Xt-=4)<0)break;Tn.push(tn>>18|240,tn>>12&63|128,tn>>6&63|128,tn&63|128)}else throw new Error("Invalid code point")}return Tn}function sn(on){const Xt=[];for(let tn=0;tn<on.length;++tn)Xt.push(on.charCodeAt(tn)&255);return Xt}function hn(on,Xt){let tn,un,xn;const Tn=[];for(let In=0;In<on.length&&!((Xt-=2)<0);++In)tn=on.charCodeAt(In),un=tn>>8,xn=tn%256,Tn.push(xn),Tn.push(un);return Tn}function Cn(on){return tt.toByteArray(yn(on))}function $n(on,Xt,tn,un){let xn;for(xn=0;xn<un&&!(xn+tn>=Xt.length||xn>=on.length);++xn)Xt[xn+tn]=on[xn];return xn}function gn(on,Xt){return on instanceof Xt||on!=null&&on.constructor!=null&&on.constructor.name!=null&&on.constructor.name===Xt.name}function mn(on){return on!==on}const Mn=function(){const on="0123456789abcdef",Xt=new Array(256);for(let tn=0;tn<16;++tn){const un=tn*16;for(let xn=0;xn<16;++xn)Xt[un+xn]=on[tn]+on[xn]}return Xt}();function On(on){return typeof BigInt>"u"?Dn:on}function Dn(){throw new Error("BigInt not supported")}})(buffer$2);var BufferList_1,hasRequiredBufferList;function requireBufferList(){if(hasRequiredBufferList)return BufferList_1;hasRequiredBufferList=1;const{Buffer:it}=buffer$2,tt=Symbol.for("BufferList");function rt(at){if(!(this instanceof rt))return new rt(at);rt._init.call(this,at)}return rt._init=function(st){Object.defineProperty(this,tt,{value:!0}),this._bufs=[],this.length=0,st&&this.append(st)},rt.prototype._new=function(st){return new rt(st)},rt.prototype._offset=function(st){if(st===0)return[0,0];let ot=0;for(let lt=0;lt<this._bufs.length;lt++){const ut=ot+this._bufs[lt].length;if(st<ut||lt===this._bufs.length-1)return[lt,st-ot];ot=ut}},rt.prototype._reverseOffset=function(at){const st=at[0];let ot=at[1];for(let lt=0;lt<st;lt++)ot+=this._bufs[lt].length;return ot},rt.prototype.get=function(st){if(st>this.length||st<0)return;const ot=this._offset(st);return this._bufs[ot[0]][ot[1]]},rt.prototype.slice=function(st,ot){return typeof st=="number"&&st<0&&(st+=this.length),typeof ot=="number"&&ot<0&&(ot+=this.length),this.copy(null,0,st,ot)},rt.prototype.copy=function(st,ot,lt,ut){if((typeof lt!="number"||lt<0)&&(lt=0),(typeof ut!="number"||ut>this.length)&&(ut=this.length),lt>=this.length||ut<=0)return st||it.alloc(0);const ht=!!st,mt=this._offset(lt),bt=ut-lt;let vt=bt,At=ht&&ot||0,xt=mt[1];if(lt===0&&ut===this.length){if(!ht)return this._bufs.length===1?this._bufs[0]:it.concat(this._bufs,this.length);for(let Et=0;Et<this._bufs.length;Et++)this._bufs[Et].copy(st,At),At+=this._bufs[Et].length;return st}if(vt<=this._bufs[mt[0]].length-xt)return ht?this._bufs[mt[0]].copy(st,ot,xt,xt+vt):this._bufs[mt[0]].slice(xt,xt+vt);ht||(st=it.allocUnsafe(bt));for(let Et=mt[0];Et<this._bufs.length;Et++){const Tt=this._bufs[Et].length-xt;if(vt>Tt)this._bufs[Et].copy(st,At,xt),At+=Tt;else{this._bufs[Et].copy(st,At,xt,xt+vt),At+=Tt;break}vt-=Tt,xt&&(xt=0)}return st.length>At?st.slice(0,At):st},rt.prototype.shallowSlice=function(st,ot){if(st=st||0,ot=typeof ot!="number"?this.length:ot,st<0&&(st+=this.length),ot<0&&(ot+=this.length),st===ot)return this._new();const lt=this._offset(st),ut=this._offset(ot),ht=this._bufs.slice(lt[0],ut[0]+1);return ut[1]===0?ht.pop():ht[ht.length-1]=ht[ht.length-1].slice(0,ut[1]),lt[1]!==0&&(ht[0]=ht[0].slice(lt[1])),this._new(ht)},rt.prototype.toString=function(st,ot,lt){return this.slice(ot,lt).toString(st)},rt.prototype.consume=function(st){if(st=Math.trunc(st),Number.isNaN(st)||st<=0)return this;for(;this._bufs.length;)if(st>=this._bufs[0].length)st-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(st),this.length-=st;break}return this},rt.prototype.duplicate=function(){const st=this._new();for(let ot=0;ot<this._bufs.length;ot++)st.append(this._bufs[ot]);return st},rt.prototype.append=function(st){if(st==null)return this;if(st.buffer)this._appendBuffer(it.from(st.buffer,st.byteOffset,st.byteLength));else if(Array.isArray(st))for(let ot=0;ot<st.length;ot++)this.append(st[ot]);else if(this._isBufferList(st))for(let ot=0;ot<st._bufs.length;ot++)this.append(st._bufs[ot]);else typeof st=="number"&&(st=st.toString()),this._appendBuffer(it.from(st));return this},rt.prototype._appendBuffer=function(st){this._bufs.push(st),this.length+=st.length},rt.prototype.indexOf=function(at,st,ot){if(ot===void 0&&typeof st=="string"&&(ot=st,st=void 0),typeof at=="function"||Array.isArray(at))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof at=="number"?at=it.from([at]):typeof at=="string"?at=it.from(at,ot):this._isBufferList(at)?at=at.slice():Array.isArray(at.buffer)?at=it.from(at.buffer,at.byteOffset,at.byteLength):it.isBuffer(at)||(at=it.from(at)),st=Number(st||0),isNaN(st)&&(st=0),st<0&&(st=this.length+st),st<0&&(st=0),at.length===0)return st>this.length?this.length:st;const lt=this._offset(st);let ut=lt[0],ht=lt[1];for(;ut<this._bufs.length;ut++){const mt=this._bufs[ut];for(;ht<mt.length;)if(mt.length-ht>=at.length){const vt=mt.indexOf(at,ht);if(vt!==-1)return this._reverseOffset([ut,vt]);ht=mt.length-at.length+1}else{const vt=this._reverseOffset([ut,ht]);if(this._match(vt,at))return vt;ht++}ht=0}return-1},rt.prototype._match=function(at,st){if(this.length-at<st.length)return!1;for(let ot=0;ot<st.length;ot++)if(this.get(at+ot)!==st[ot])return!1;return!0},function(){const at={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const st in at)(function(ot){at[ot]===null?rt.prototype[ot]=function(lt,ut){return this.slice(lt,lt+ut)[ot](0,ut)}:rt.prototype[ot]=function(lt=0){return this.slice(lt,lt+at[ot])[ot](0)}})(st)}(),rt.prototype._isBufferList=function(st){return st instanceof rt||rt.isBufferList(st)},rt.isBufferList=function(st){return st!=null&&st[tt]},BufferList_1=rt,BufferList_1}var rabin,hasRequiredRabin$1;function requireRabin$1(){if(hasRequiredRabin$1)return rabin;hasRequiredRabin$1=1;class it{constructor(rt,at=12,st=8*1024,ot=32*1024,lt=64,ut){this.bits=at,this.min=st,this.max=ot,this.asModule=rt,this.rabin=new rt.Rabin(at,st,ot,lt,ut),this.polynomial=ut}fingerprint(rt){const{__retain:at,__release:st,__allocArray:ot,__getInt32Array:lt,Int32Array_ID:ut,Uint8Array_ID:ht}=this.asModule,mt=new Int32Array(Math.ceil(rt.length/this.min)),bt=at(ot(ut,mt)),vt=at(ot(ht,rt)),At=this.rabin.fingerprint(vt,bt),xt=lt(At);st(vt),st(bt);const Et=xt.indexOf(0);return Et>=0?xt.subarray(0,Et):xt}}return rabin=it,rabin}var loader={},hasRequiredLoader;function requireLoader(){if(hasRequiredLoader)return loader;hasRequiredLoader=1;const it=-8,tt=-4,rt=0,at=1,st=1<<0,ot=1<<1,lt=5,ut=1<<10,ht=1<<11,mt=1<<13,bt=0,vt=4,At=8,xt=12,Et=12,Tt=16,wt=typeof BigUint64Array<"u",Ct=Symbol(),It=1024;function St(kt,zt){const Nt=new Uint32Array(kt),Mt=new Uint16Array(kt);var Lt=Nt[zt+tt>>>2]>>>1,Ht=zt>>>1;if(Lt<=It)return String.fromCharCode.apply(String,Mt.subarray(Ht,Ht+Lt));const Qt=[];do{const Ut=Mt[Ht+It-1],Bt=Ut>=55296&&Ut<56320?It-1:It;Qt.push(String.fromCharCode.apply(String,Mt.subarray(Ht,Ht+=Bt))),Lt-=Bt}while(Lt>It);return Qt.join("")+String.fromCharCode.apply(String,Mt.subarray(Ht,Ht+Lt))}function Rt(kt){const zt={};function Nt(Lt,Ht){return Lt?St(Lt.buffer,Ht):"<yet unknown>"}const Mt=kt.env=kt.env||{};return Mt.abort=Mt.abort||function(Ht,Qt,Ut,Bt){const Kt=zt.memory||Mt.memory;throw Error("abort: "+Nt(Kt,Ht)+" at "+Nt(Kt,Qt)+":"+Ut+":"+Bt)},Mt.trace=Mt.trace||function(Ht,Qt){const Ut=zt.memory||Mt.memory;console.log("trace: "+Nt(Ut,Ht)+(Qt?" ":"")+Array.prototype.slice.call(arguments,2,2+Qt).join(", "))},kt.Math=kt.Math||Math,kt.Date=kt.Date||Date,zt}function Dt(kt,zt){const Nt=zt.exports,Mt=Nt.memory,Lt=Nt.table,Ht=Nt.__alloc,Qt=Nt.__retain,Ut=Nt.__rtti_base||-1;function Bt(cn){const _n=new Uint32Array(Mt.buffer),wn=_n[Ut>>>2];if((cn>>>=0)>=wn)throw Error("invalid id: "+cn);return _n[(Ut+4>>>2)+cn*2]}function Kt(cn){const _n=new Uint32Array(Mt.buffer),wn=_n[Ut>>>2];if((cn>>>=0)>=wn)throw Error("invalid id: "+cn);return _n[(Ut+4>>>2)+cn*2+1]}function Gt(cn){return 31-Math.clz32(cn>>>lt&31)}function Pt(cn){const _n=cn.length,wn=Ht(_n<<1,at),Ln=new Uint16Array(Mt.buffer);for(var yn=0,nn=wn>>>1;yn<_n;++yn)Ln[nn+yn]=cn.charCodeAt(yn);return wn}kt.__allocString=Pt;function Zt(cn){const _n=Mt.buffer;if(new Uint32Array(_n)[cn+it>>>2]!==at)throw Error("not a string: "+cn);return St(_n,cn)}kt.__getString=Zt;function an(cn,_n,wn){const Ln=Mt.buffer;if(wn)switch(cn){case 2:return new Float32Array(Ln);case 3:return new Float64Array(Ln)}else switch(cn){case 0:return new(_n?Int8Array:Uint8Array)(Ln);case 1:return new(_n?Int16Array:Uint16Array)(Ln);case 2:return new(_n?Int32Array:Uint32Array)(Ln);case 3:return new(_n?BigInt64Array:BigUint64Array)(Ln)}throw Error("unsupported align: "+cn)}function Jt(cn,_n){const wn=Bt(cn);if(!(wn&(st|ot)))throw Error("not an array: "+cn+" @ "+wn);const Ln=Gt(wn),yn=_n.length,nn=Ht(yn<<Ln,rt),sn=Ht(wn&ot?Tt:xt,cn),hn=new Uint32Array(Mt.buffer);hn[sn+bt>>>2]=Qt(nn),hn[sn+vt>>>2]=nn,hn[sn+At>>>2]=yn<<Ln,wn&ot&&(hn[sn+Et>>>2]=yn);const Cn=an(Ln,wn&ut,wn&ht);if(wn&mt)for(let $n=0;$n<yn;++$n)Cn[(nn>>>Ln)+$n]=Qt(_n[$n]);else Cn.set(_n,nn>>>Ln);return sn}kt.__allocArray=Jt;function rn(cn){const _n=new Uint32Array(Mt.buffer),wn=_n[cn+it>>>2],Ln=Bt(wn);if(!(Ln&st))throw Error("not an array: "+wn);const yn=Gt(Ln);var nn=_n[cn+vt>>>2];const sn=Ln&ot?_n[cn+Et>>>2]:_n[nn+tt>>>2]>>>yn;return an(yn,Ln&ut,Ln&ht).subarray(nn>>>=yn,nn+sn)}kt.__getArrayView=rn;function fn(cn){const _n=rn(cn),wn=_n.length,Ln=new Array(wn);for(let yn=0;yn<wn;yn++)Ln[yn]=_n[yn];return Ln}kt.__getArray=fn;function pn(cn){const _n=Mt.buffer,wn=new Uint32Array(_n)[cn+tt>>>2];return _n.slice(cn,cn+wn)}kt.__getArrayBuffer=pn;function vn(cn,_n,wn){return new cn(En(cn,_n,wn))}function En(cn,_n,wn){const Ln=Mt.buffer,yn=new Uint32Array(Ln),nn=yn[wn+vt>>>2];return new cn(Ln,nn,yn[nn+tt>>>2]>>>_n)}kt.__getInt8Array=vn.bind(null,Int8Array,0),kt.__getInt8ArrayView=En.bind(null,Int8Array,0),kt.__getUint8Array=vn.bind(null,Uint8Array,0),kt.__getUint8ArrayView=En.bind(null,Uint8Array,0),kt.__getUint8ClampedArray=vn.bind(null,Uint8ClampedArray,0),kt.__getUint8ClampedArrayView=En.bind(null,Uint8ClampedArray,0),kt.__getInt16Array=vn.bind(null,Int16Array,1),kt.__getInt16ArrayView=En.bind(null,Int16Array,1),kt.__getUint16Array=vn.bind(null,Uint16Array,1),kt.__getUint16ArrayView=En.bind(null,Uint16Array,1),kt.__getInt32Array=vn.bind(null,Int32Array,2),kt.__getInt32ArrayView=En.bind(null,Int32Array,2),kt.__getUint32Array=vn.bind(null,Uint32Array,2),kt.__getUint32ArrayView=En.bind(null,Uint32Array,2),wt&&(kt.__getInt64Array=vn.bind(null,BigInt64Array,3),kt.__getInt64ArrayView=En.bind(null,BigInt64Array,3),kt.__getUint64Array=vn.bind(null,BigUint64Array,3),kt.__getUint64ArrayView=En.bind(null,BigUint64Array,3)),kt.__getFloat32Array=vn.bind(null,Float32Array,2),kt.__getFloat32ArrayView=En.bind(null,Float32Array,2),kt.__getFloat64Array=vn.bind(null,Float64Array,3),kt.__getFloat64ArrayView=En.bind(null,Float64Array,3);function dn(cn,_n){const wn=new Uint32Array(Mt.buffer);var Ln=wn[cn+it>>>2];if(Ln<=wn[Ut>>>2])do if(Ln==_n)return!0;while(Ln=Kt(Ln));return!1}return kt.__instanceof=dn,kt.memory=kt.memory||Mt,kt.table=kt.table||Lt,jt(Nt,kt)}function Wt(kt){return typeof Response<"u"&&kt instanceof Response}async function qt(kt,zt){return Wt(kt=await kt)?Yt(kt,zt):Dt(Rt(zt||(zt={})),await WebAssembly.instantiate(kt instanceof WebAssembly.Module?kt:await WebAssembly.compile(kt),zt))}loader.instantiate=qt;function Vt(kt,zt){return Dt(Rt(zt||(zt={})),new WebAssembly.Instance(kt instanceof WebAssembly.Module?kt:new WebAssembly.Module(kt),zt))}loader.instantiateSync=Vt;async function Yt(kt,zt){return WebAssembly.instantiateStreaming?Dt(Rt(zt||(zt={})),(await WebAssembly.instantiateStreaming(kt,zt)).instance):qt(Wt(kt=await kt)?kt.arrayBuffer():kt,zt)}loader.instantiateStreaming=Yt;function jt(kt,zt){var Nt=zt?Object.create(zt):{},Mt=kt.__argumentsLength?function(Lt){kt.__argumentsLength.value=Lt}:kt.__setArgumentsLength||kt.__setargc||function(){};for(let Lt in kt){if(!Object.prototype.hasOwnProperty.call(kt,Lt))continue;const Ht=kt[Lt];let Qt=Lt.split("."),Ut=Nt;for(;Qt.length>1;){let Gt=Qt.shift();Object.prototype.hasOwnProperty.call(Ut,Gt)||(Ut[Gt]={}),Ut=Ut[Gt]}let Bt=Qt[0],Kt=Bt.indexOf("#");if(Kt>=0){let Gt=Bt.substring(0,Kt),Pt=Ut[Gt];if(typeof Pt>"u"||!Pt.prototype){let Zt=function(...an){return Zt.wrap(Zt.prototype.constructor(0,...an))};Zt.prototype={valueOf:function(){return this[Ct]}},Zt.wrap=function(an){return Object.create(Zt.prototype,{[Ct]:{value:an,writable:!1}})},Pt&&Object.getOwnPropertyNames(Pt).forEach(an=>Object.defineProperty(Zt,an,Object.getOwnPropertyDescriptor(Pt,an))),Ut[Gt]=Zt}if(Bt=Bt.substring(Kt+1),Ut=Ut[Gt].prototype,/^(get|set):/.test(Bt)){if(!Object.prototype.hasOwnProperty.call(Ut,Bt=Bt.substring(4))){let Zt=kt[Lt.replace("set:","get:")],an=kt[Lt.replace("get:","set:")];Object.defineProperty(Ut,Bt,{get:function(){return Zt(this[Ct])},set:function(Jt){an(this[Ct],Jt)},enumerable:!0})}}else Bt==="constructor"?(Ut[Bt]=(...Zt)=>(Mt(Zt.length),Ht(...Zt))).original=Ht:(Ut[Bt]=function(...Zt){return Mt(Zt.length),Ht(this[Ct],...Zt)}).original=Ht}else/^(get|set):/.test(Bt)?Object.prototype.hasOwnProperty.call(Ut,Bt=Bt.substring(4))||Object.defineProperty(Ut,Bt,{get:kt[Lt.replace("set:","get:")],set:kt[Lt.replace("get:","set:")],enumerable:!0}):typeof Ht=="function"&&Ht!==Mt?(Ut[Bt]=(...Gt)=>(Mt(Gt.length),Ht(...Gt))).original=Ht:Ut[Bt]=Ht}return Nt}return loader.demangle=jt,loader}var rabinWasm,hasRequiredRabinWasm;function requireRabinWasm(){if(hasRequiredRabinWasm)return rabinWasm;hasRequiredRabinWasm=1;const{instantiate:it}=requireLoader();tt.supported=typeof WebAssembly<"u";function tt(rt={}){if(!tt.supported)return null;var at=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return it(new Response(new Blob([at],{type:"application/wasm"})),rt)}return rabinWasm=tt,rabinWasm}var src$4,hasRequiredSrc$1;function requireSrc$1(){if(hasRequiredSrc$1)return src$4;hasRequiredSrc$1=1;const it=requireRabin$1(),tt=requireRabinWasm();return src$4={Rabin:it,create:async(at,st,ot,lt,ut)=>{const ht=await tt();return new it(ht,at,st,ot,lt,ut)}},src$4}var rabin_1,hasRequiredRabin;function requireRabin(){if(hasRequiredRabin)return rabin_1;hasRequiredRabin=1;const it=requireBufferList(),{create:tt}=requireSrc$1(),rt=errCode;rabin_1=async function*(ot,lt){let ut,ht,mt;if(lt.minChunkSize&&lt.maxChunkSize&&lt.avgChunkSize)mt=lt.avgChunkSize,ut=lt.minChunkSize,ht=lt.maxChunkSize;else if(lt.avgChunkSize)mt=lt.avgChunkSize,ut=mt/3,ht=mt+mt/2;else throw rt(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(ut<16)throw rt(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");ht<ut&&(ht=ut),mt<ut&&(mt=ut);const bt=Math.floor(Math.log2(mt));for await(const vt of at(ot,{min:ut,max:ht,bits:bt,window:lt.window,polynomial:lt.polynomial}))yield vt};async function*at(st,ot){const lt=await tt(ot.bits,ot.min,ot.max,ot.window),ut=new it;for await(const ht of st){ut.append(ht);const mt=lt.fingerprint(ht);for(let bt=0;bt<mt.length;bt++){const vt=mt[bt],At=ut.slice(0,vt);ut.consume(vt),yield At}}ut.length&&(yield ut.slice(0))}return rabin_1}var fixedSize,hasRequiredFixedSize;function requireFixedSize(){if(hasRequiredFixedSize)return fixedSize;hasRequiredFixedSize=1;const it=requireBufferList();return fixedSize=async function*(rt,at){let st=new it,ot=0,lt=!1;const ut=at.maxChunkSize;for await(const ht of rt)for(st.append(ht),ot+=ht.length;ot>=ut;)if(yield st.slice(0,ut),lt=!0,ut===st.length)st=new it,ot=0;else{const mt=new it;mt.append(st.shallowSlice(ut)),st=mt,ot-=ut}(!lt||ot)&&(yield st.slice(0,ot))},fixedSize}var bases_1,hasRequiredBases;function requireBases(){if(hasRequiredBases)return bases_1;hasRequiredBases=1;const{bases:it}=require$$0$4;function tt(ot,lt,ut,ht){return{name:ot,prefix:lt,encoder:{name:ot,prefix:lt,encode:ut},decoder:{decode:ht}}}const rt=tt("utf8","u",ot=>"u"+new TextDecoder("utf8").decode(ot),ot=>new TextEncoder().encode(ot.substring(1))),at=tt("ascii","a",ot=>{let lt="a";for(let ut=0;ut<ot.length;ut++)lt+=String.fromCharCode(ot[ut]);return lt},ot=>{ot=ot.substring(1);const lt=new Uint8Array(ot.length);for(let ut=0;ut<ot.length;ut++)lt[ut]=ot.charCodeAt(ut);return lt});return bases_1={utf8:rt,"utf-8":rt,hex:it.base16,latin1:at,ascii:at,binary:at,...it},bases_1}var fromString_1,hasRequiredFromString;function requireFromString(){if(hasRequiredFromString)return fromString_1;hasRequiredFromString=1;const it=requireBases();function tt(rt,at="utf8"){const st=it[at];if(!st)throw new Error(`Unsupported encoding "${at}"`);return st.decoder.decode(`${st.prefix}${rt}`)}return fromString_1=tt,fromString_1}var validateChunks_1,hasRequiredValidateChunks;function requireValidateChunks(){if(hasRequiredValidateChunks)return validateChunks_1;hasRequiredValidateChunks=1;const it=errCode,tt=requireFromString();async function*rt(at){for await(const st of at){if(st.length===void 0)throw it(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof st=="string"||st instanceof String)yield tt(st.toString());else if(Array.isArray(st))yield Uint8Array.from(st);else if(st instanceof Uint8Array)yield st;else throw it(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}return validateChunks_1=rt,validateChunks_1}var dagBuilder_1,hasRequiredDagBuilder;function requireDagBuilder(){if(hasRequiredDagBuilder)return dagBuilder_1;hasRequiredDagBuilder=1;const it=requireDir$1(),tt=requireFile(),rt=errCode;function at(ut){return Symbol.iterator in ut}function st(ut){return Symbol.asyncIterator in ut}function ot(ut){try{if(ut instanceof Uint8Array)return async function*(){yield ut}();if(at(ut))return async function*(){yield*ut}();if(st(ut))return ut}catch{throw rt(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw rt(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*lt(ut,ht,mt){for await(const bt of ut)if(bt.path&&(bt.path.substring(0,2)==="./"&&(mt.wrapWithDirectory=!0),bt.path=bt.path.split("/").filter(vt=>vt&&vt!==".").join("/")),bt.content){let vt;typeof mt.chunker=="function"?vt=mt.chunker:mt.chunker==="rabin"?vt=requireRabin():vt=requireFixedSize();let At;typeof mt.chunkValidator=="function"?At=mt.chunkValidator:At=requireValidateChunks();const xt={path:bt.path,mtime:bt.mtime,mode:bt.mode,content:vt(At(ot(bt.content),mt),mt)};yield()=>tt(xt,ht,mt)}else if(bt.path){const vt={path:bt.path,mtime:bt.mtime,mode:bt.mode};yield()=>it(vt,ht,mt)}else throw new Error("Import candidate must have content or path or both")}return dagBuilder_1=lt,dagBuilder_1}var dir,hasRequiredDir;function requireDir(){if(hasRequiredDir)return dir;hasRequiredDir=1;class it{constructor(rt,at){this.options=at||{},this.root=rt.root,this.dir=rt.dir,this.path=rt.path,this.dirty=rt.dirty,this.flat=rt.flat,this.parent=rt.parent,this.parentKey=rt.parentKey,this.unixfs=rt.unixfs,this.mode=rt.mode,this.mtime=rt.mtime,this.cid=void 0,this.size=void 0}async put(rt,at){}get(rt){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(rt){}}return dir=it,dir}var dirFlat,hasRequiredDirFlat;function requireDirFlat(){if(hasRequiredDirFlat)return dirFlat;hasRequiredDirFlat=1;const{DAGLink:it,DAGNode:tt}=requireSrc$2(),{UnixFS:rt}=requireSrc$5(),at=requireDir(),st=requirePersist();class ot extends at{constructor(ut,ht){super(ut,ht),this._children={}}async put(ut,ht){this.cid=void 0,this.size=void 0,this._children[ut]=ht}get(ut){return Promise.resolve(this._children[ut])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const ut=Object.keys(this._children);for(let ht=0;ht<ut.length;ht++){const mt=ut[ht];yield{key:mt,child:this._children[mt]}}}async*flush(ut){const ht=Object.keys(this._children),mt=[];for(let Tt=0;Tt<ht.length;Tt++){let wt=this._children[ht[Tt]];if(wt instanceof at)for await(const Ct of wt.flush(ut))wt=Ct,yield wt;wt.size!=null&&wt.cid&&mt.push(new it(ht[Tt],wt.size,wt.cid))}const bt=new rt({type:"directory",mtime:this.mtime,mode:this.mode}),vt=new tt(bt.marshal(),mt),At=vt.serialize(),xt=await st(At,ut,this.options),Et=At.length+vt.Links.reduce((Tt,wt)=>Tt+wt.Tsize,0);this.cid=xt,this.size=Et,yield{cid:xt,unixfs:bt,path:this.path,size:Et}}}return dirFlat=ot,dirFlat}var sparseArray,hasRequiredSparseArray;function requireSparseArray(){if(hasRequiredSparseArray)return sparseArray;hasRequiredSparseArray=1;const it=7;sparseArray=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(lt,ut){let ht=this._internalPositionFor(lt,!1);if(ut===void 0)ht!==-1&&(this._unsetInternalPos(ht),this._unsetBit(lt),this._changedLength=!0,this._changedData=!0);else{let mt=!1;ht===-1?(ht=this._data.length,this._setBit(lt),this._changedData=!0):mt=!0,this._setInternalPos(ht,lt,ut,mt),this._changedLength=!0}}unset(lt){this.set(lt,void 0)}get(lt){this._sortData();const ut=this._internalPositionFor(lt,!0);if(ut!==-1)return this._data[ut][1]}push(lt){return this.set(this.length,lt),this.length}get length(){if(this._sortData(),this._changedLength){const lt=this._data[this._data.length-1];this._length=lt?lt[0]+1:0,this._changedLength=!1}return this._length}forEach(lt){let ut=0;for(;ut<this.length;)lt(this.get(ut),ut,this),ut++}map(lt){let ut=0,ht=new Array(this.length);for(;ut<this.length;)ht[ut]=lt(this.get(ut),ut,this),ut++;return ht}reduce(lt,ut){let ht=0,mt=ut;for(;ht<this.length;){const bt=this.get(ht);mt=lt(mt,bt,ht),ht++}return mt}find(lt){let ut=0,ht,mt;for(;ut<this.length&&!ht;)mt=this.get(ut),ht=lt(mt),ut++;return ht?mt:void 0}_internalPositionFor(lt,ut){const ht=this._bytePosFor(lt,ut);if(ht>=this._bitArrays.length)return-1;const mt=this._bitArrays[ht],bt=lt-ht*it;if(!((mt&1<<bt)>0))return-1;const At=this._bitArrays.slice(0,ht).reduce(tt,0),xt=~(4294967295<<bt+1),Et=rt(mt&xt);return At+Et-1}_bytePosFor(lt,ut){const ht=Math.floor(lt/it),mt=ht+1;for(;!ut&&this._bitArrays.length<mt;)this._bitArrays.push(0);return ht}_setBit(lt){const ut=this._bytePosFor(lt,!1);this._bitArrays[ut]|=1<<lt-ut*it}_unsetBit(lt){const ut=this._bytePosFor(lt,!1);this._bitArrays[ut]&=~(1<<lt-ut*it)}_setInternalPos(lt,ut,ht,mt){const bt=this._data,vt=[ut,ht];if(mt)this._sortData(),bt[lt]=vt;else{if(bt.length)if(bt[bt.length-1][0]>=ut)bt.push(vt);else if(bt[0][0]<=ut)bt.unshift(vt);else{const At=Math.round(bt.length/2);this._data=bt.slice(0,At).concat(vt).concat(bt.slice(At))}else this._data.push(vt);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(lt){this._data.splice(lt,1)}_sortData(){this._changedData&&this._data.sort(at),this._changedData=!1}bitField(){const lt=[];let ut=8,ht=0,mt=0,bt;const vt=this._bitArrays.slice();for(;vt.length||ht;){ht===0&&(bt=vt.shift(),ht=7);const xt=Math.min(ht,ut),Et=~(255<<xt),Tt=bt&Et;mt|=Tt<<8-ut,bt=bt>>>xt,ht-=xt,ut-=xt,(!ut||!ht&&!vt.length)&&(lt.push(mt),mt=0,ut=8)}for(var At=lt.length-1;At>0&&lt[At]===0;At--)lt.pop();return lt}compactArray(){return this._sortData(),this._data.map(st)}};function tt(ot,lt){return ot+rt(lt)}function rt(ot){let lt=ot;return lt=lt-(lt>>1&1431655765),lt=(lt&858993459)+(lt>>2&858993459),(lt+(lt>>4)&252645135)*16843009>>24}function at(ot,lt){return ot[0]-lt[0]}function st(ot){return ot[1]}return sparseArray}var bucket,hasRequiredBucket;function requireBucket(){if(hasRequiredBucket)return bucket;hasRequiredBucket=1;const it=requireSparseArray(),{fromString:tt}=require$$1$3;class rt{constructor(ht,mt,bt=0){this._options=ht,this._popCount=0,this._parent=mt,this._posAtParent=bt,this._children=new it,this.key=null}async put(ht,mt){const bt=await this._findNewBucketAndPos(ht);await bt.bucket._putAt(bt,ht,mt)}async get(ht){const mt=await this._findChild(ht);if(mt)return mt.value}async del(ht){const mt=await this._findPlace(ht),bt=mt.bucket._at(mt.pos);bt&&bt.key===ht&&mt.bucket._delAt(mt.pos)}leafCount(){return this._children.compactArray().reduce((mt,bt)=>bt instanceof rt?mt+bt.leafCount():mt+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const ht=this._children.compactArray();for(const mt of ht)mt instanceof rt?yield*mt.eachLeafSeries():yield mt;return[]}serialize(ht,mt){const bt=[];return mt(this._children.reduce((vt,At,xt)=>(At&&(At instanceof rt?vt.push(At.serialize(ht,mt)):vt.push(ht(At,xt))),vt),bt))}asyncTransform(ht,mt){return lt(this,ht,mt)}toJSON(){return this.serialize(st,ot)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(ht){const mt=await this._findPlace(ht),bt=mt.bucket._at(mt.pos);if(!(bt instanceof rt)&&bt&&bt.key===ht)return bt}async _findPlace(ht){const mt=this._options.hash(typeof ht=="string"?tt(ht):ht),bt=await mt.take(this._options.bits),vt=this._children.get(bt);return vt instanceof rt?vt._findPlace(mt):{bucket:this,pos:bt,hash:mt,existingChild:vt}}async _findNewBucketAndPos(ht){const mt=await this._findPlace(ht);if(mt.existingChild&&mt.existingChild.key!==ht){const bt=new rt(this._options,mt.bucket,mt.pos);mt.bucket._putObjectAt(mt.pos,bt);const vt=await bt._findPlace(mt.existingChild.hash);return vt.bucket._putAt(vt,mt.existingChild.key,mt.existingChild.value),bt._findNewBucketAndPos(mt.hash)}return mt}_putAt(ht,mt,bt){this._putObjectAt(ht.pos,{key:mt,value:bt,hash:ht.hash})}_putObjectAt(ht,mt){this._children.get(ht)||this._popCount++,this._children.set(ht,mt)}_delAt(ht){if(ht===-1)throw new Error("Invalid position");this._children.get(ht)&&this._popCount--,this._children.unset(ht),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){const ht=this._children.find(at);if(ht&&!(ht instanceof rt)){const mt=ht.hash;mt.untake(this._options.bits);const bt={pos:this._posAtParent,hash:mt,bucket:this._parent};this._parent._putAt(bt,ht.key,ht.value)}}else this._parent._delAt(this._posAtParent)}_at(ht){return this._children.get(ht)}}function at(ut){return Boolean(ut)}function st(ut,ht){return ut.key}function ot(ut){return ut}async function lt(ut,ht,mt){const bt=[];for(const vt of ut._children.compactArray())if(vt instanceof rt)await lt(vt,ht,mt);else{const At=await ht(vt);bt.push({bitField:ut._children.bitField(),children:At})}return mt(bt)}return bucket=rt,bucket}var consumableHash={exports:{}},consumableBuffer,hasRequiredConsumableBuffer;function requireConsumableBuffer(){if(hasRequiredConsumableBuffer)return consumableBuffer;hasRequiredConsumableBuffer=1;const it=[255,254,252,248,240,224,192,128],tt=[1,3,7,15,31,63,127,255];consumableBuffer=class{constructor(ot){this._value=ot,this._currentBytePos=ot.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(ot){let lt=ot,ut=0;for(;lt&&this._haveBits();){const ht=this._value[this._currentBytePos],mt=this._currentBitPos+1,bt=Math.min(mt,lt),vt=rt(ht,mt-bt,bt);ut=(ut<<bt)+vt,lt-=bt,this._currentBitPos-=bt,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return ut}untake(ot){for(this._currentBitPos+=ot;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function rt(st,ot,lt){const ut=at(ot,lt);return(st&ut)>>>ot}function at(st,ot){return it[st]&tt[Math.min(ot+st-1,7)]}return consumableBuffer}var hasRequiredConsumableHash;function requireConsumableHash(){if(hasRequiredConsumableHash)return consumableHash.exports;hasRequiredConsumableHash=1;const it=requireConsumableBuffer(),{concat:tt}=require$$1$2;function rt(st){function ot(lt){return lt instanceof at?lt:new at(lt,st)}return ot}class at{constructor(ot,lt){if(!(ot instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=ot,this._hashFn=lt,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(ot){let lt=ot;for(;this._availableBits<lt;)await this._produceMoreBits();let ut=0;for(;lt>0;){const ht=this._buffers[this._currentBufferIndex],mt=Math.min(ht.availableBits(),lt),bt=ht.take(mt);ut=(ut<<mt)+bt,lt-=mt,this._availableBits-=mt,ht.availableBits()===0&&this._currentBufferIndex++}return ut}untake(ot){let lt=ot;for(;lt>0;){const ut=this._buffers[this._currentBufferIndex],ht=Math.min(ut.totalBits()-ut.availableBits(),lt);ut.untake(ht),lt-=ht,this._availableBits+=ht,this._currentBufferIndex>0&&ut.totalBits()===ut.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const ot=this._depth?tt([this._value,Uint8Array.from([this._depth])]):this._value,lt=await this._hashFn(ot),ut=new it(lt);this._buffers.push(ut),this._availableBits+=ut.availableBits()}}return consumableHash.exports=rt,consumableHash.exports.InfiniteHash=at,consumableHash.exports}var src$3,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src$3;hasRequiredSrc=1;const it=requireBucket(),tt=requireConsumableHash();function rt(at){if(!at||!at.hashFn)throw new Error("please define an options.hashFn");const st={bits:at.bits||8,hash:tt(at.hashFn)};return new it(st)}return src$3={createHAMT:rt,Bucket:it},src$3}var dirSharded,hasRequiredDirSharded;function requireDirSharded(){if(hasRequiredDirSharded)return dirSharded;hasRequiredDirSharded=1;const{DAGLink:it,DAGNode:tt}=requireSrc$2(),{UnixFS:rt}=requireSrc$5(),at=requireDir(),st=requirePersist(),{createHAMT:ot,Bucket:lt}=requireSrc();class ut extends at{constructor(bt,vt){super(bt,vt),this._bucket=ot({hashFn:vt.hamtHashFn,bits:vt.hamtBucketBits})}async put(bt,vt){await this._bucket.put(bt,vt)}get(bt){return this._bucket.get(bt)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:bt,value:vt}of this._bucket.eachLeafSeries())yield{key:bt,child:vt}}async*flush(bt){for await(const vt of ht(this._bucket,bt,this,this.options))yield{...vt,path:this.path}}}dirSharded=ut;async function*ht(mt,bt,vt,At){const xt=mt._children,Et=[];let Tt=0;for(let Wt=0;Wt<xt.length;Wt++){const qt=xt.get(Wt);if(!qt)continue;const Vt=Wt.toString(16).toUpperCase().padStart(2,"0");if(qt instanceof lt){let Yt;for await(const jt of await ht(qt,bt,null,At))Yt=jt;if(!Yt)throw new Error("Could not flush sharded directory, no subshard found");Et.push(new it(Vt,Yt.size,Yt.cid)),Tt+=Yt.size}else if(typeof qt.value.flush=="function"){const Yt=qt.value;let jt;for await(const zt of Yt.flush(bt))jt=zt,yield jt;const kt=Vt+qt.key;Et.push(new it(kt,jt.size,jt.cid)),Tt+=jt.size}else{const Yt=qt.value;if(!Yt.cid)continue;const jt=Vt+qt.key,kt=Yt.size;Et.push(new it(jt,kt,Yt.cid)),Tt+=kt}}const wt=Uint8Array.from(xt.bitField().reverse()),Ct=new rt({type:"hamt-sharded-directory",data:wt,fanout:mt.tableSize(),hashType:At.hamtHashCode,mtime:vt&&vt.mtime,mode:vt&&vt.mode}),St=new tt(Ct.marshal(),Et).serialize(),Rt=await st(St,bt,At),Dt=St.length+Tt;yield{cid:Rt,unixfs:Ct,size:Dt}}return dirSharded}var flatToShard,hasRequiredFlatToShard;function requireFlatToShard(){if(hasRequiredFlatToShard)return flatToShard;hasRequiredFlatToShard=1;const it=requireDirSharded(),tt=requireDirFlat();flatToShard=async function at(st,ot,lt,ut){let ht=ot;ot instanceof tt&&ot.directChildrenCount()>=lt&&(ht=await rt(ot,ut));const mt=ht.parent;if(mt){if(ht!==ot){if(st&&(st.parent=ht),!ht.parentKey)throw new Error("No parent key found");await mt.put(ht.parentKey,ht)}return at(ht,mt,lt,ut)}return ht};async function rt(at,st){const ot=new it({root:at.root,dir:!0,parent:at.parent,parentKey:at.parentKey,path:at.path,dirty:at.dirty,flat:!1,mtime:at.mtime,mode:at.mode},st);for await(const{key:lt,child:ut}of at.eachChildSeries())await ot.put(lt,ut);return ot}return flatToShard}var toPathComponents_1,hasRequiredToPathComponents;function requireToPathComponents(){return hasRequiredToPathComponents||(hasRequiredToPathComponents=1,toPathComponents_1=(tt="")=>(tt.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)),toPathComponents_1}var treeBuilder_1,hasRequiredTreeBuilder;function requireTreeBuilder(){if(hasRequiredTreeBuilder)return treeBuilder_1;hasRequiredTreeBuilder=1;const it=requireDirFlat(),tt=requireFlatToShard(),rt=requireDir(),at=requireToPathComponents();async function st(ut,ht,mt){const bt=at(ut.path||""),vt=bt.length-1;let At=ht,xt="";for(let Et=0;Et<bt.length;Et++){const Tt=bt[Et];xt+=`${xt?"/":""}${Tt}`;const wt=Et===vt;if(At.dirty=!0,At.cid=void 0,At.size=void 0,wt)await At.put(Tt,ut),ht=await tt(null,At,mt.shardSplitThreshold,mt);else{let Ct=await At.get(Tt);(!Ct||!(Ct instanceof rt))&&(Ct=new it({root:!1,dir:!0,parent:At,parentKey:Tt,path:xt,dirty:!0,flat:!0,mtime:Ct&&Ct.unixfs&&Ct.unixfs.mtime,mode:Ct&&Ct.unixfs&&Ct.unixfs.mode},mt)),await At.put(Tt,Ct),At=Ct}}return ht}async function*ot(ut,ht){if(!(ut instanceof rt)){ut&&ut.unixfs&&ut.unixfs.isDirectory()&&(yield ut);return}yield*ut.flush(ht)}async function*lt(ut,ht,mt){let bt=new it({root:!0,dir:!0,path:"",dirty:!0,flat:!0},mt);for await(const vt of ut)!vt||(bt=await st(vt,bt,mt),(!vt.unixfs||!vt.unixfs.isDirectory())&&(yield vt));if(mt.wrapWithDirectory)yield*ot(bt,ht);else for await(const vt of bt.eachChildSeries())!vt||(yield*ot(vt.child,ht))}return treeBuilder_1=lt,treeBuilder_1}const parallelBatch=itParallelBatch,defaultOptions$3=options;async function*importer(it,tt,rt={}){const at=defaultOptions$3(rt);let st;typeof rt.dagBuilder=="function"?st=rt.dagBuilder:st=requireDagBuilder();let ot;typeof rt.treeBuilder=="function"?ot=rt.treeBuilder:ot=requireTreeBuilder();let lt;Symbol.asyncIterator in it||Symbol.iterator in it?lt=it:lt=[it];for await(const ut of ot(parallelBatch(st(lt,tt,at),at.fileImportConcurrency),tt,at))yield{cid:ut.cid,path:ut.path,unixfs:ut.unixfs,size:ut.size}}var src$2={importer},browser$2=typeof self=="object"?self.FormData:window.FormData;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let it=0;it<256;++it)byteToHex.push((it+256).toString(16).slice(1));function unsafeStringify(it,tt=0){return(byteToHex[it[tt+0]]+byteToHex[it[tt+1]]+byteToHex[it[tt+2]]+byteToHex[it[tt+3]]+"-"+byteToHex[it[tt+4]]+byteToHex[it[tt+5]]+"-"+byteToHex[it[tt+6]]+byteToHex[it[tt+7]]+"-"+byteToHex[it[tt+8]]+byteToHex[it[tt+9]]+"-"+byteToHex[it[tt+10]]+byteToHex[it[tt+11]]+byteToHex[it[tt+12]]+byteToHex[it[tt+13]]+byteToHex[it[tt+14]]+byteToHex[it[tt+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(it,tt,rt){if(native.randomUUID&&!tt&&!it)return native.randomUUID();it=it||{};const at=it.random||(it.rng||rng)();if(at[6]=at[6]&15|64,at[8]=at[8]&63|128,tt){rt=rt||0;for(let st=0;st<16;++st)tt[rt+st]=at[st];return tt}return unsafeStringify(at)}function _toPrimitive$2(it,tt){if(typeof it!="object"||it===null)return it;var rt=it[Symbol.toPrimitive];if(rt!==void 0){var at=rt.call(it,tt||"default");if(typeof at!="object")return at;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(it)}function _toPropertyKey$2(it){var tt=_toPrimitive$2(it,"string");return typeof tt=="symbol"?tt:String(tt)}function _defineProperty$3(it,tt,rt){return tt=_toPropertyKey$2(tt),tt in it?Object.defineProperty(it,tt,{value:rt,enumerable:!0,configurable:!0,writable:!0}):it[tt]=rt,it}const DEFAULT_GATEWAY_URLS={"ipfs://":["https://gateway.ipfscdn.io/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://ipfs.io/ipfs/"]},TW_IPFS_SERVER_URL="https://upload.nftlabs.co",PINATA_IPFS_URL="https://api.pinata.cloud/pinning/pinFileToIPFS";function parseGatewayUrls(it){return Array.isArray(it)?{"ipfs://":it}:it||{}}function prepareGatewayUrls(it){const tt={...it,...DEFAULT_GATEWAY_URLS};for(const rt of Object.keys(DEFAULT_GATEWAY_URLS))if(it&&it[rt]){const at=it[rt].map(st=>st.replace(/\/$/,"")+"/");tt[rt]=[...at,...DEFAULT_GATEWAY_URLS[rt]]}return tt}function isBrowser$4(){return typeof window<"u"}function isFileInstance(it){return globalThis.File&&it instanceof File}function isBufferInstance(it){return globalThis.Buffer&&it instanceof Buffer}function isBufferOrStringWithName(it){return!!(it&&it.name&&it.data&&typeof it.name=="string"&&(typeof it.data=="string"||isBufferInstance(it.data)))}function isFileOrBuffer(it){return isFileInstance(it)||isBufferInstance(it)||isBufferOrStringWithName(it)}function isFileBufferOrStringEqual(it,tt){if(isFileInstance(it)&&isFileInstance(tt)){if(it.name===tt.name&&it.lastModified===tt.lastModified&&it.size===tt.size)return!0}else{if(isBufferInstance(it)&&isBufferInstance(tt))return it.equals(tt);if(isBufferOrStringWithName(it)&&isBufferOrStringWithName(tt)&&it.name===tt.name){if(typeof it.data=="string"&&typeof tt.data=="string")return it.data===tt.data;if(isBufferInstance(it.data)&&isBufferInstance(tt.data))return it.data.equals(tt.data)}}return!1}function replaceGatewayUrlWithScheme(it,tt){for(const rt of Object.keys(tt))for(const at of tt[rt])if(it.startsWith(at))return it.replace(at,rt);return it}function replaceSchemeWithGatewayUrl(it,tt){let rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const at=Object.keys(tt).find(ot=>it.startsWith(ot)),st=at?tt[at]:[];if(!(!at&&rt>0||at&&rt>=st.length))return at?it.replace(at,st[rt]):it}function replaceObjectGatewayUrlsWithSchemes(it,tt){return typeof it=="string"?replaceGatewayUrlWithScheme(it,tt):typeof it=="object"?!it||isFileOrBuffer(it)?it:Array.isArray(it)?it.map(rt=>replaceObjectGatewayUrlsWithSchemes(rt,tt)):Object.fromEntries(Object.entries(it).map(rt=>{let[at,st]=rt;return[at,replaceObjectGatewayUrlsWithSchemes(st,tt)]})):it}function replaceObjectSchemesWithGatewayUrls(it,tt){return typeof it=="string"?replaceSchemeWithGatewayUrl(it,tt):typeof it=="object"?!it||isFileOrBuffer(it)?it:Array.isArray(it)?it.map(rt=>replaceObjectSchemesWithGatewayUrls(rt,tt)):Object.fromEntries(Object.entries(it).map(rt=>{let[at,st]=rt;return[at,replaceObjectSchemesWithGatewayUrls(st,tt)]})):it}function extractObjectFiles(it){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(isFileOrBuffer(it))return tt.push(it),tt;if(typeof it=="object"){if(!it)return tt;Array.isArray(it)?it.forEach(rt=>extractObjectFiles(rt,tt)):Object.keys(it).map(rt=>extractObjectFiles(it[rt],tt))}return tt}function replaceObjectFilesWithUris(it,tt){if(isFileOrBuffer(it)){if(tt.length)return it=tt.shift(),it;console.warn("Not enough URIs to replace all files in object.")}return typeof it=="object"?it&&(Array.isArray(it)?it.map(rt=>replaceObjectFilesWithUris(rt,tt)):Object.fromEntries(Object.entries(it).map(rt=>{let[at,st]=rt;return[at,replaceObjectFilesWithUris(st,tt)]}))):it}async function getCIDForUpload(it,tt){let rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,at=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const st=await Promise.all(it.map(async(ot,lt)=>{const ut=tt[lt];let ht;if(typeof ot=="string")ht=new TextEncoder().encode(ot);else if(isBufferOrStringWithName(ot))typeof ot.data=="string"?ht=new TextEncoder().encode(ot.data):ht=ot.data;else if(Buffer.isBuffer(ot))ht=ot;else{const mt=await ot.arrayBuffer();ht=new Uint8Array(mt)}return{path:ut,content:ht}}));return getCID(st,rt,at)}async function getCID(it){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const at={onlyHash:!0,wrapWithDirectory:tt,cidVersion:rt},st={put:async()=>{}};let ot;for await(const{cid:lt}of src$2.importer(it,st,at))ot=lt;return`${ot}`}async function isUploaded(it){return(await fetch$1(`${DEFAULT_GATEWAY_URLS["ipfs://"][0]}${it}`,{method:"HEAD"})).ok}class StorageDownloader{async download(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(at>3)throw new Error("[FAILED_TO_DOWNLOAD_ERROR] Failed to download from URI - too many attempts failed.");const st=replaceSchemeWithGatewayUrl(tt,rt,at);if(!st)throw new Error("[FAILED_TO_DOWNLOAD_ERROR] Unable to download from URI - all gateway URLs failed to respond.");const ot=await fetch$1(st);return ot.status>=500||ot.status===403||ot.status===408?(console.warn(`Request to ${st} failed with status ${ot.status} - ${ot.statusText}`),this.download(tt,rt,at+1)):ot}}class IpfsUploader{constructor(tt){_defineProperty$3(this,"uploadWithGatewayUrl",void 0),this.uploadWithGatewayUrl=(tt==null?void 0:tt.uploadWithGatewayUrl)||!1}async uploadBatch(tt,rt){if((rt==null?void 0:rt.uploadWithoutDirectory)&&tt.length>1)throw new Error("[UPLOAD_WITHOUT_DIRECTORY_ERROR] Cannot upload more than one file or object without directory!");const at=new browser$2,{form:st,fileNames:ot}=this.buildFormData(at,tt,rt);try{const lt=await getCIDForUpload(tt,ot.map(ut=>decodeURIComponent(ut)),!(rt!=null&&rt.uploadWithoutDirectory));if(await isUploaded(lt)&&!(rt!=null&&rt.alwaysUpload))return rt!=null&&rt.onProgress&&(rt==null||rt.onProgress({progress:100,total:100})),rt!=null&&rt.uploadWithoutDirectory?[`ipfs://${lt}`]:ot.map(ut=>`ipfs://${lt}/${ut}`)}catch{}return isBrowser$4()?this.uploadBatchBrowser(st,ot,rt):this.uploadBatchNode(st,ot,rt)}async getUploadToken(){const tt=await fetch$1(`${TW_IPFS_SERVER_URL}/grant`,{method:"GET",headers:{"X-APP-NAME":{}.CI?"Storage SDK CI":"Storage SDK"}});if(!tt.ok)throw new Error("Failed to get upload token");return await tt.text()}buildFormData(tt,rt,at){const st=new Map,ot=[];for(let ut=0;ut<rt.length;ut++){const ht=rt[ut];let mt="",bt=ht;if(isFileInstance(ht))if(at!=null&&at.rewriteFileNames){let At="";if(ht.name){const xt=ht.name.lastIndexOf(".");xt>-1&&(At=ht.name.substring(xt))}mt=`${ut+at.rewriteFileNames.fileStartNumber}${At}`}else mt=`${ht.name}`;else isBufferOrStringWithName(ht)?(bt=ht.data,at!=null&&at.rewriteFileNames?mt=`${ut+at.rewriteFileNames.fileStartNumber}`:mt=`${ht.name}`):at!=null&&at.rewriteFileNames?mt=`${ut+at.rewriteFileNames.fileStartNumber}`:mt=`${ut}`;const vt=at!=null&&at.uploadWithoutDirectory?"files":`files/${mt}`;if(st.has(mt)){if(isFileBufferOrStringEqual(st.get(mt),ht)){ot.push(mt);continue}throw new Error(`[DUPLICATE_FILE_NAME_ERROR] File name ${mt} was passed for more than one different file.`)}st.set(mt,ht),ot.push(mt),isBrowser$4()?tt.append("file",new Blob([bt]),vt):tt.append("file",bt,{filepath:vt})}const lt={name:"Storage SDK",keyvalues:{...at==null?void 0:at.metadata}};return tt.append("pinataMetadata",JSON.stringify(lt)),at!=null&&at.uploadWithoutDirectory&&tt.append("pinataOptions",JSON.stringify({wrapWithDirectory:!1})),{form:tt,fileNames:ot.map(ut=>encodeURIComponent(ut))}}async uploadBatchBrowser(tt,rt,at){const st=await this.getUploadToken();return new Promise((ot,lt)=>{const ut=new XMLHttpRequest;let ht=setTimeout(()=>{ut.abort(),lt(new Error("Request to upload timed out! No upload progress received in 30s"))},3e4);ut.upload.addEventListener("loadstart",()=>{console.log(`[${Date.now()}] [IPFS] Started`)}),ut.upload.addEventListener("progress",mt=>{console.log(`[IPFS] Progress Event ${mt.loaded}/${mt.total}`),clearTimeout(ht),mt.loaded<mt.total?ht=setTimeout(()=>{ut.abort(),lt(new Error("Request to upload timed out! No upload progress received in 30s"))},3e4):console.log(`[${Date.now()}] [IPFS] Uploaded files. Waiting for response.`),mt.lengthComputable&&(at==null?void 0:at.onProgress)&&(at==null||at.onProgress({progress:mt.loaded,total:mt.total}))}),ut.addEventListener("load",()=>{if(console.log(`[${Date.now()}] [IPFS] Load`),clearTimeout(ht),ut.status>=200&&ut.status<300){let mt;try{mt=JSON.parse(ut.responseText)}catch{return lt(new Error("Failed to parse JSON from upload response"))}const bt=mt.IpfsHash;if(!bt)throw new Error("Failed to get IPFS hash from upload response");return at!=null&&at.uploadWithoutDirectory?ot([`ipfs://${bt}`]):ot(rt.map(vt=>`ipfs://${bt}/${vt}`))}return lt(new Error(`Upload failed with status ${ut.status} - ${ut.responseText}`))}),ut.addEventListener("error",()=>(console.log("[IPFS] Load"),clearTimeout(ht),ut.readyState!==0&&ut.readyState!==4||ut.status===0?lt(new Error("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.")):lt(new Error("Unknown upload error occured")))),ut.open("POST",PINATA_IPFS_URL),ut.setRequestHeader("Authorization",`Bearer ${st}`),ut.send(tt)})}async uploadBatchNode(tt,rt,at){const st=await this.getUploadToken();at!=null&&at.onProgress&&console.warn("The onProgress option is only supported in the browser");const ot=await fetch$1(PINATA_IPFS_URL,{method:"POST",headers:{Authorization:`Bearer ${st}`,...tt.getHeaders()},body:tt.getBuffer()}),lt=await ot.json();if(!ot.ok)throw console.warn(lt),new Error("Failed to upload files to IPFS");const ut=lt.IpfsHash;if(!ut)throw new Error("Failed to upload files to IPFS");return at!=null&&at.uploadWithoutDirectory?[`ipfs://${ut}`]:rt.map(ht=>`ipfs://${ut}/${ht}`)}}class ThirdwebStorage{constructor(tt){_defineProperty$3(this,"uploader",void 0),_defineProperty$3(this,"downloader",void 0),_defineProperty$3(this,"gatewayUrls",void 0),this.uploader=(tt==null?void 0:tt.uploader)||new IpfsUploader,this.downloader=(tt==null?void 0:tt.downloader)||new StorageDownloader,this.gatewayUrls=prepareGatewayUrls(parseGatewayUrls(tt==null?void 0:tt.gatewayUrls))}resolveScheme(tt){return replaceSchemeWithGatewayUrl(tt,this.gatewayUrls)}async download(tt){return this.downloader.download(tt,this.gatewayUrls)}async downloadJSON(tt){const at=await(await this.download(tt)).json();return replaceObjectSchemesWithGatewayUrls(at,this.gatewayUrls)}async upload(tt,rt){const[at]=await this.uploadBatch([tt],rt);return at}async uploadBatch(tt,rt){if(tt=tt.filter(ot=>ot!==void 0),!tt.length)return[];const at=tt.map(ot=>isFileOrBuffer(ot)||typeof ot=="string").every(ot=>!!ot);let st=[];if(at)st=await this.uploader.uploadBatch(tt,rt);else{const ot=(await this.uploadAndReplaceFilesWithHashes(tt,rt)).map(lt=>typeof lt=="string"?lt:JSON.stringify(lt));st=await this.uploader.uploadBatch(ot,rt)}return(rt==null?void 0:rt.uploadWithGatewayUrl)||this.uploader.uploadWithGatewayUrl?st.map(ot=>this.resolveScheme(ot)):st}async uploadAndReplaceFilesWithHashes(tt,rt){let at=tt;at=replaceObjectGatewayUrlsWithSchemes(at,this.gatewayUrls);const st=extractObjectFiles(at);if(st.length){const ot=await this.uploader.uploadBatch(st,rt);at=replaceObjectFilesWithUris(at,ot)}return((rt==null?void 0:rt.uploadWithGatewayUrl)||this.uploader.uploadWithGatewayUrl)&&(at=replaceObjectSchemesWithGatewayUrls(at,this.gatewayUrls)),at}}const ERC20MetadataAbi=[{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];var dist$4={},MerkleTree$1={},bufferReverse=function it(tt){for(var rt=new Buffer(tt.length),at=0,st=tt.length-1;at<=st;++at,--st)rt[at]=tt[st],rt[st]=tt[at];return rt},sha256$1={exports:{}},core={exports:{}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(it,tt){(function(rt,at){it.exports=at()})(commonjsGlobal,function(){var rt=rt||function(at,st){var ot=Object.create||function(){function wt(){}return function(Ct){var It;return wt.prototype=Ct,It=new wt,wt.prototype=null,It}}(),lt={},ut=lt.lib={},ht=ut.Base=function(){return{extend:function(wt){var Ct=ot(this);return wt&&Ct.mixIn(wt),(!Ct.hasOwnProperty("init")||this.init===Ct.init)&&(Ct.init=function(){Ct.$super.init.apply(this,arguments)}),Ct.init.prototype=Ct,Ct.$super=this,Ct},create:function(){var wt=this.extend();return wt.init.apply(wt,arguments),wt},init:function(){},mixIn:function(wt){for(var Ct in wt)wt.hasOwnProperty(Ct)&&(this[Ct]=wt[Ct]);wt.hasOwnProperty("toString")&&(this.toString=wt.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),mt=ut.WordArray=ht.extend({init:function(wt,Ct){wt=this.words=wt||[],Ct!=st?this.sigBytes=Ct:this.sigBytes=wt.length*4},toString:function(wt){return(wt||vt).stringify(this)},concat:function(wt){var Ct=this.words,It=wt.words,St=this.sigBytes,Rt=wt.sigBytes;if(this.clamp(),St%4)for(var Dt=0;Dt<Rt;Dt++){var Wt=It[Dt>>>2]>>>24-Dt%4*8&255;Ct[St+Dt>>>2]|=Wt<<24-(St+Dt)%4*8}else for(var Dt=0;Dt<Rt;Dt+=4)Ct[St+Dt>>>2]=It[Dt>>>2];return this.sigBytes+=Rt,this},clamp:function(){var wt=this.words,Ct=this.sigBytes;wt[Ct>>>2]&=4294967295<<32-Ct%4*8,wt.length=at.ceil(Ct/4)},clone:function(){var wt=ht.clone.call(this);return wt.words=this.words.slice(0),wt},random:function(wt){for(var Ct=[],It=function(qt){var qt=qt,Vt=987654321,Yt=4294967295;return function(){Vt=36969*(Vt&65535)+(Vt>>16)&Yt,qt=18e3*(qt&65535)+(qt>>16)&Yt;var jt=(Vt<<16)+qt&Yt;return jt/=4294967296,jt+=.5,jt*(at.random()>.5?1:-1)}},St=0,Rt;St<wt;St+=4){var Dt=It((Rt||at.random())*4294967296);Rt=Dt()*987654071,Ct.push(Dt()*4294967296|0)}return new mt.init(Ct,wt)}}),bt=lt.enc={},vt=bt.Hex={stringify:function(wt){for(var Ct=wt.words,It=wt.sigBytes,St=[],Rt=0;Rt<It;Rt++){var Dt=Ct[Rt>>>2]>>>24-Rt%4*8&255;St.push((Dt>>>4).toString(16)),St.push((Dt&15).toString(16))}return St.join("")},parse:function(wt){for(var Ct=wt.length,It=[],St=0;St<Ct;St+=2)It[St>>>3]|=parseInt(wt.substr(St,2),16)<<24-St%8*4;return new mt.init(It,Ct/2)}},At=bt.Latin1={stringify:function(wt){for(var Ct=wt.words,It=wt.sigBytes,St=[],Rt=0;Rt<It;Rt++){var Dt=Ct[Rt>>>2]>>>24-Rt%4*8&255;St.push(String.fromCharCode(Dt))}return St.join("")},parse:function(wt){for(var Ct=wt.length,It=[],St=0;St<Ct;St++)It[St>>>2]|=(wt.charCodeAt(St)&255)<<24-St%4*8;return new mt.init(It,Ct)}},xt=bt.Utf8={stringify:function(wt){try{return decodeURIComponent(escape(At.stringify(wt)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(wt){return At.parse(unescape(encodeURIComponent(wt)))}},Et=ut.BufferedBlockAlgorithm=ht.extend({reset:function(){this._data=new mt.init,this._nDataBytes=0},_append:function(wt){typeof wt=="string"&&(wt=xt.parse(wt)),this._data.concat(wt),this._nDataBytes+=wt.sigBytes},_process:function(wt){var Ct=this._data,It=Ct.words,St=Ct.sigBytes,Rt=this.blockSize,Dt=Rt*4,Wt=St/Dt;wt?Wt=at.ceil(Wt):Wt=at.max((Wt|0)-this._minBufferSize,0);var qt=Wt*Rt,Vt=at.min(qt*4,St);if(qt){for(var Yt=0;Yt<qt;Yt+=Rt)this._doProcessBlock(It,Yt);var jt=It.splice(0,qt);Ct.sigBytes-=Vt}return new mt.init(jt,Vt)},clone:function(){var wt=ht.clone.call(this);return wt._data=this._data.clone(),wt},_minBufferSize:0});ut.Hasher=Et.extend({cfg:ht.extend(),init:function(wt){this.cfg=this.cfg.extend(wt),this.reset()},reset:function(){Et.reset.call(this),this._doReset()},update:function(wt){return this._append(wt),this._process(),this},finalize:function(wt){wt&&this._append(wt);var Ct=this._doFinalize();return Ct},blockSize:16,_createHelper:function(wt){return function(Ct,It){return new wt.init(It).finalize(Ct)}},_createHmacHelper:function(wt){return function(Ct,It){return new Tt.HMAC.init(wt,It).finalize(Ct)}}});var Tt=lt.algo={};return lt}(Math);return rt})}(core)),core.exports}(function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){return function(at){var st=rt,ot=st.lib,lt=ot.WordArray,ut=ot.Hasher,ht=st.algo,mt=[],bt=[];(function(){function xt(Ct){for(var It=at.sqrt(Ct),St=2;St<=It;St++)if(!(Ct%St))return!1;return!0}function Et(Ct){return(Ct-(Ct|0))*4294967296|0}for(var Tt=2,wt=0;wt<64;)xt(Tt)&&(wt<8&&(mt[wt]=Et(at.pow(Tt,1/2))),bt[wt]=Et(at.pow(Tt,1/3)),wt++),Tt++})();var vt=[],At=ht.SHA256=ut.extend({_doReset:function(){this._hash=new lt.init(mt.slice(0))},_doProcessBlock:function(xt,Et){for(var Tt=this._hash.words,wt=Tt[0],Ct=Tt[1],It=Tt[2],St=Tt[3],Rt=Tt[4],Dt=Tt[5],Wt=Tt[6],qt=Tt[7],Vt=0;Vt<64;Vt++){if(Vt<16)vt[Vt]=xt[Et+Vt]|0;else{var Yt=vt[Vt-15],jt=(Yt<<25|Yt>>>7)^(Yt<<14|Yt>>>18)^Yt>>>3,kt=vt[Vt-2],zt=(kt<<15|kt>>>17)^(kt<<13|kt>>>19)^kt>>>10;vt[Vt]=jt+vt[Vt-7]+zt+vt[Vt-16]}var Nt=Rt&Dt^~Rt&Wt,Mt=wt&Ct^wt&It^Ct&It,Lt=(wt<<30|wt>>>2)^(wt<<19|wt>>>13)^(wt<<10|wt>>>22),Ht=(Rt<<26|Rt>>>6)^(Rt<<21|Rt>>>11)^(Rt<<7|Rt>>>25),Qt=qt+Ht+Nt+bt[Vt]+vt[Vt],Ut=Lt+Mt;qt=Wt,Wt=Dt,Dt=Rt,Rt=St+Qt|0,St=It,It=Ct,Ct=wt,wt=Qt+Ut|0}Tt[0]=Tt[0]+wt|0,Tt[1]=Tt[1]+Ct|0,Tt[2]=Tt[2]+It|0,Tt[3]=Tt[3]+St|0,Tt[4]=Tt[4]+Rt|0,Tt[5]=Tt[5]+Dt|0,Tt[6]=Tt[6]+Wt|0,Tt[7]=Tt[7]+qt|0},_doFinalize:function(){var xt=this._data,Et=xt.words,Tt=this._nDataBytes*8,wt=xt.sigBytes*8;return Et[wt>>>5]|=128<<24-wt%32,Et[(wt+64>>>9<<4)+14]=at.floor(Tt/4294967296),Et[(wt+64>>>9<<4)+15]=Tt,xt.sigBytes=Et.length*4,this._process(),this._hash},clone:function(){var xt=ut.clone.call(this);return xt._hash=this._hash.clone(),xt}});st.SHA256=ut._createHelper(At),st.HmacSHA256=ut._createHmacHelper(At)}(Math),rt.SHA256})})(sha256$1);var treeify={exports:{}};(function(it,tt){(function(rt,at){it.exports=at()})(commonjsGlobal,function(){function rt(lt,ut){var ht=ut?"\u2514":"\u251C";return lt?ht+="\u2500 ":ht+="\u2500\u2500\u2510",ht}function at(lt,ut){var ht=[];for(var mt in lt)!lt.hasOwnProperty(mt)||ut&&typeof lt[mt]=="function"||ht.push(mt);return ht}function st(lt,ut,ht,mt,bt,vt,At){var xt="",Et=0,Tt,wt,Ct=mt.slice(0);if(Ct.push([ut,ht])&&mt.length>0&&(mt.forEach(function(St,Rt){Rt>0&&(xt+=(St[1]?" ":"\u2502")+"  "),!wt&&St[0]===ut&&(wt=!0)}),xt+=rt(lt,ht)+lt,bt&&(typeof ut!="object"||ut instanceof Date)&&(xt+=": "+ut),wt&&(xt+=" (circular ref.)"),At(xt)),!wt&&typeof ut=="object"){var It=at(ut,vt);It.forEach(function(St){Tt=++Et===It.length,st(St,ut[St],Tt,Ct,bt,vt,At)})}}var ot={};return ot.asLines=function(lt,ut,ht,mt){var bt=typeof ht!="function"?ht:!1;st(".",lt,!1,[],ut,bt,mt||ht)},ot.asTree=function(lt,ut,ht){var mt="";return st(".",lt,!1,[],ut,ht,function(bt){mt+=bt+`
`}),mt},ot})})(treeify);var Base$1={},cryptoJs={exports:{}},x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){return function(at){var st=rt,ot=st.lib,lt=ot.Base,ut=ot.WordArray,ht=st.x64={};ht.Word=lt.extend({init:function(mt,bt){this.high=mt,this.low=bt}}),ht.WordArray=lt.extend({init:function(mt,bt){mt=this.words=mt||[],bt!=at?this.sigBytes=bt:this.sigBytes=mt.length*8},toX32:function(){for(var mt=this.words,bt=mt.length,vt=[],At=0;At<bt;At++){var xt=mt[At];vt.push(xt.high),vt.push(xt.low)}return ut.create(vt,this.sigBytes)},clone:function(){for(var mt=lt.clone.call(this),bt=mt.words=this.words.slice(0),vt=bt.length,At=0;At<vt;At++)bt[At]=bt[At].clone();return mt}})}(),rt})}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){return function(){if(typeof ArrayBuffer=="function"){var at=rt,st=at.lib,ot=st.WordArray,lt=ot.init,ut=ot.init=function(ht){if(ht instanceof ArrayBuffer&&(ht=new Uint8Array(ht)),(ht instanceof Int8Array||typeof Uint8ClampedArray<"u"&&ht instanceof Uint8ClampedArray||ht instanceof Int16Array||ht instanceof Uint16Array||ht instanceof Int32Array||ht instanceof Uint32Array||ht instanceof Float32Array||ht instanceof Float64Array)&&(ht=new Uint8Array(ht.buffer,ht.byteOffset,ht.byteLength)),ht instanceof Uint8Array){for(var mt=ht.byteLength,bt=[],vt=0;vt<mt;vt++)bt[vt>>>2]|=ht[vt]<<24-vt%4*8;lt.call(this,bt,mt)}else lt.apply(this,arguments)};ut.prototype=ot}}(),rt.lib.WordArray})}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.WordArray,lt=at.enc;lt.Utf16=lt.Utf16BE={stringify:function(ht){for(var mt=ht.words,bt=ht.sigBytes,vt=[],At=0;At<bt;At+=2){var xt=mt[At>>>2]>>>16-At%4*8&65535;vt.push(String.fromCharCode(xt))}return vt.join("")},parse:function(ht){for(var mt=ht.length,bt=[],vt=0;vt<mt;vt++)bt[vt>>>1]|=ht.charCodeAt(vt)<<16-vt%2*16;return ot.create(bt,mt*2)}},lt.Utf16LE={stringify:function(ht){for(var mt=ht.words,bt=ht.sigBytes,vt=[],At=0;At<bt;At+=2){var xt=ut(mt[At>>>2]>>>16-At%4*8&65535);vt.push(String.fromCharCode(xt))}return vt.join("")},parse:function(ht){for(var mt=ht.length,bt=[],vt=0;vt<mt;vt++)bt[vt>>>1]|=ut(ht.charCodeAt(vt)<<16-vt%2*16);return ot.create(bt,mt*2)}};function ut(ht){return ht<<8&4278255360|ht>>>8&16711935}}(),rt.enc.Utf16})}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.WordArray,lt=at.enc;lt.Base64={stringify:function(ht){var mt=ht.words,bt=ht.sigBytes,vt=this._map;ht.clamp();for(var At=[],xt=0;xt<bt;xt+=3)for(var Et=mt[xt>>>2]>>>24-xt%4*8&255,Tt=mt[xt+1>>>2]>>>24-(xt+1)%4*8&255,wt=mt[xt+2>>>2]>>>24-(xt+2)%4*8&255,Ct=Et<<16|Tt<<8|wt,It=0;It<4&&xt+It*.75<bt;It++)At.push(vt.charAt(Ct>>>6*(3-It)&63));var St=vt.charAt(64);if(St)for(;At.length%4;)At.push(St);return At.join("")},parse:function(ht){var mt=ht.length,bt=this._map,vt=this._reverseMap;if(!vt){vt=this._reverseMap=[];for(var At=0;At<bt.length;At++)vt[bt.charCodeAt(At)]=At}var xt=bt.charAt(64);if(xt){var Et=ht.indexOf(xt);Et!==-1&&(mt=Et)}return ut(ht,mt,vt)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function ut(ht,mt,bt){for(var vt=[],At=0,xt=0;xt<mt;xt++)if(xt%4){var Et=bt[ht.charCodeAt(xt-1)]<<xt%4*2,Tt=bt[ht.charCodeAt(xt)]>>>6-xt%4*2;vt[At>>>2]|=(Et|Tt)<<24-At%4*8,At++}return ot.create(vt,At)}}(),rt.enc.Base64})}(encBase64)),encBase64.exports}var md5={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){return function(at){var st=rt,ot=st.lib,lt=ot.WordArray,ut=ot.Hasher,ht=st.algo,mt=[];(function(){for(var Tt=0;Tt<64;Tt++)mt[Tt]=at.abs(at.sin(Tt+1))*4294967296|0})();var bt=ht.MD5=ut.extend({_doReset:function(){this._hash=new lt.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(Tt,wt){for(var Ct=0;Ct<16;Ct++){var It=wt+Ct,St=Tt[It];Tt[It]=(St<<8|St>>>24)&16711935|(St<<24|St>>>8)&4278255360}var Rt=this._hash.words,Dt=Tt[wt+0],Wt=Tt[wt+1],qt=Tt[wt+2],Vt=Tt[wt+3],Yt=Tt[wt+4],jt=Tt[wt+5],kt=Tt[wt+6],zt=Tt[wt+7],Nt=Tt[wt+8],Mt=Tt[wt+9],Lt=Tt[wt+10],Ht=Tt[wt+11],Qt=Tt[wt+12],Ut=Tt[wt+13],Bt=Tt[wt+14],Kt=Tt[wt+15],Gt=Rt[0],Pt=Rt[1],Zt=Rt[2],an=Rt[3];Gt=vt(Gt,Pt,Zt,an,Dt,7,mt[0]),an=vt(an,Gt,Pt,Zt,Wt,12,mt[1]),Zt=vt(Zt,an,Gt,Pt,qt,17,mt[2]),Pt=vt(Pt,Zt,an,Gt,Vt,22,mt[3]),Gt=vt(Gt,Pt,Zt,an,Yt,7,mt[4]),an=vt(an,Gt,Pt,Zt,jt,12,mt[5]),Zt=vt(Zt,an,Gt,Pt,kt,17,mt[6]),Pt=vt(Pt,Zt,an,Gt,zt,22,mt[7]),Gt=vt(Gt,Pt,Zt,an,Nt,7,mt[8]),an=vt(an,Gt,Pt,Zt,Mt,12,mt[9]),Zt=vt(Zt,an,Gt,Pt,Lt,17,mt[10]),Pt=vt(Pt,Zt,an,Gt,Ht,22,mt[11]),Gt=vt(Gt,Pt,Zt,an,Qt,7,mt[12]),an=vt(an,Gt,Pt,Zt,Ut,12,mt[13]),Zt=vt(Zt,an,Gt,Pt,Bt,17,mt[14]),Pt=vt(Pt,Zt,an,Gt,Kt,22,mt[15]),Gt=At(Gt,Pt,Zt,an,Wt,5,mt[16]),an=At(an,Gt,Pt,Zt,kt,9,mt[17]),Zt=At(Zt,an,Gt,Pt,Ht,14,mt[18]),Pt=At(Pt,Zt,an,Gt,Dt,20,mt[19]),Gt=At(Gt,Pt,Zt,an,jt,5,mt[20]),an=At(an,Gt,Pt,Zt,Lt,9,mt[21]),Zt=At(Zt,an,Gt,Pt,Kt,14,mt[22]),Pt=At(Pt,Zt,an,Gt,Yt,20,mt[23]),Gt=At(Gt,Pt,Zt,an,Mt,5,mt[24]),an=At(an,Gt,Pt,Zt,Bt,9,mt[25]),Zt=At(Zt,an,Gt,Pt,Vt,14,mt[26]),Pt=At(Pt,Zt,an,Gt,Nt,20,mt[27]),Gt=At(Gt,Pt,Zt,an,Ut,5,mt[28]),an=At(an,Gt,Pt,Zt,qt,9,mt[29]),Zt=At(Zt,an,Gt,Pt,zt,14,mt[30]),Pt=At(Pt,Zt,an,Gt,Qt,20,mt[31]),Gt=xt(Gt,Pt,Zt,an,jt,4,mt[32]),an=xt(an,Gt,Pt,Zt,Nt,11,mt[33]),Zt=xt(Zt,an,Gt,Pt,Ht,16,mt[34]),Pt=xt(Pt,Zt,an,Gt,Bt,23,mt[35]),Gt=xt(Gt,Pt,Zt,an,Wt,4,mt[36]),an=xt(an,Gt,Pt,Zt,Yt,11,mt[37]),Zt=xt(Zt,an,Gt,Pt,zt,16,mt[38]),Pt=xt(Pt,Zt,an,Gt,Lt,23,mt[39]),Gt=xt(Gt,Pt,Zt,an,Ut,4,mt[40]),an=xt(an,Gt,Pt,Zt,Dt,11,mt[41]),Zt=xt(Zt,an,Gt,Pt,Vt,16,mt[42]),Pt=xt(Pt,Zt,an,Gt,kt,23,mt[43]),Gt=xt(Gt,Pt,Zt,an,Mt,4,mt[44]),an=xt(an,Gt,Pt,Zt,Qt,11,mt[45]),Zt=xt(Zt,an,Gt,Pt,Kt,16,mt[46]),Pt=xt(Pt,Zt,an,Gt,qt,23,mt[47]),Gt=Et(Gt,Pt,Zt,an,Dt,6,mt[48]),an=Et(an,Gt,Pt,Zt,zt,10,mt[49]),Zt=Et(Zt,an,Gt,Pt,Bt,15,mt[50]),Pt=Et(Pt,Zt,an,Gt,jt,21,mt[51]),Gt=Et(Gt,Pt,Zt,an,Qt,6,mt[52]),an=Et(an,Gt,Pt,Zt,Vt,10,mt[53]),Zt=Et(Zt,an,Gt,Pt,Lt,15,mt[54]),Pt=Et(Pt,Zt,an,Gt,Wt,21,mt[55]),Gt=Et(Gt,Pt,Zt,an,Nt,6,mt[56]),an=Et(an,Gt,Pt,Zt,Kt,10,mt[57]),Zt=Et(Zt,an,Gt,Pt,kt,15,mt[58]),Pt=Et(Pt,Zt,an,Gt,Ut,21,mt[59]),Gt=Et(Gt,Pt,Zt,an,Yt,6,mt[60]),an=Et(an,Gt,Pt,Zt,Ht,10,mt[61]),Zt=Et(Zt,an,Gt,Pt,qt,15,mt[62]),Pt=Et(Pt,Zt,an,Gt,Mt,21,mt[63]),Rt[0]=Rt[0]+Gt|0,Rt[1]=Rt[1]+Pt|0,Rt[2]=Rt[2]+Zt|0,Rt[3]=Rt[3]+an|0},_doFinalize:function(){var Tt=this._data,wt=Tt.words,Ct=this._nDataBytes*8,It=Tt.sigBytes*8;wt[It>>>5]|=128<<24-It%32;var St=at.floor(Ct/4294967296),Rt=Ct;wt[(It+64>>>9<<4)+15]=(St<<8|St>>>24)&16711935|(St<<24|St>>>8)&4278255360,wt[(It+64>>>9<<4)+14]=(Rt<<8|Rt>>>24)&16711935|(Rt<<24|Rt>>>8)&4278255360,Tt.sigBytes=(wt.length+1)*4,this._process();for(var Dt=this._hash,Wt=Dt.words,qt=0;qt<4;qt++){var Vt=Wt[qt];Wt[qt]=(Vt<<8|Vt>>>24)&16711935|(Vt<<24|Vt>>>8)&4278255360}return Dt},clone:function(){var Tt=ut.clone.call(this);return Tt._hash=this._hash.clone(),Tt}});function vt(Tt,wt,Ct,It,St,Rt,Dt){var Wt=Tt+(wt&Ct|~wt&It)+St+Dt;return(Wt<<Rt|Wt>>>32-Rt)+wt}function At(Tt,wt,Ct,It,St,Rt,Dt){var Wt=Tt+(wt&It|Ct&~It)+St+Dt;return(Wt<<Rt|Wt>>>32-Rt)+wt}function xt(Tt,wt,Ct,It,St,Rt,Dt){var Wt=Tt+(wt^Ct^It)+St+Dt;return(Wt<<Rt|Wt>>>32-Rt)+wt}function Et(Tt,wt,Ct,It,St,Rt,Dt){var Wt=Tt+(Ct^(wt|~It))+St+Dt;return(Wt<<Rt|Wt>>>32-Rt)+wt}st.MD5=ut._createHelper(bt),st.HmacMD5=ut._createHmacHelper(bt)}(Math),rt.MD5})}(md5)),md5.exports}var sha1$1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.WordArray,lt=st.Hasher,ut=at.algo,ht=[],mt=ut.SHA1=lt.extend({_doReset:function(){this._hash=new ot.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(bt,vt){for(var At=this._hash.words,xt=At[0],Et=At[1],Tt=At[2],wt=At[3],Ct=At[4],It=0;It<80;It++){if(It<16)ht[It]=bt[vt+It]|0;else{var St=ht[It-3]^ht[It-8]^ht[It-14]^ht[It-16];ht[It]=St<<1|St>>>31}var Rt=(xt<<5|xt>>>27)+Ct+ht[It];It<20?Rt+=(Et&Tt|~Et&wt)+1518500249:It<40?Rt+=(Et^Tt^wt)+1859775393:It<60?Rt+=(Et&Tt|Et&wt|Tt&wt)-1894007588:Rt+=(Et^Tt^wt)-899497514,Ct=wt,wt=Tt,Tt=Et<<30|Et>>>2,Et=xt,xt=Rt}At[0]=At[0]+xt|0,At[1]=At[1]+Et|0,At[2]=At[2]+Tt|0,At[3]=At[3]+wt|0,At[4]=At[4]+Ct|0},_doFinalize:function(){var bt=this._data,vt=bt.words,At=this._nDataBytes*8,xt=bt.sigBytes*8;return vt[xt>>>5]|=128<<24-xt%32,vt[(xt+64>>>9<<4)+14]=Math.floor(At/4294967296),vt[(xt+64>>>9<<4)+15]=At,bt.sigBytes=vt.length*4,this._process(),this._hash},clone:function(){var bt=lt.clone.call(this);return bt._hash=this._hash.clone(),bt}});at.SHA1=lt._createHelper(mt),at.HmacSHA1=lt._createHmacHelper(mt)}(),rt.SHA1})}(sha1$1)),sha1$1.exports}var sha224$1={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),sha256$1.exports)})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.WordArray,lt=at.algo,ut=lt.SHA256,ht=lt.SHA224=ut.extend({_doReset:function(){this._hash=new ot.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var mt=ut._doFinalize.call(this);return mt.sigBytes-=4,mt}});at.SHA224=ut._createHelper(ht),at.HmacSHA224=ut._createHmacHelper(ht)}(),rt.SHA224})}(sha224$1)),sha224$1.exports}var sha512$1={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireX64Core())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.Hasher,lt=at.x64,ut=lt.Word,ht=lt.WordArray,mt=at.algo;function bt(){return ut.create.apply(ut,arguments)}var vt=[bt(1116352408,3609767458),bt(1899447441,602891725),bt(3049323471,3964484399),bt(3921009573,2173295548),bt(961987163,4081628472),bt(1508970993,3053834265),bt(2453635748,2937671579),bt(2870763221,3664609560),bt(3624381080,2734883394),bt(310598401,1164996542),bt(607225278,1323610764),bt(1426881987,3590304994),bt(1925078388,4068182383),bt(2162078206,991336113),bt(2614888103,633803317),bt(3248222580,3479774868),bt(3835390401,2666613458),bt(4022224774,944711139),bt(264347078,2341262773),bt(604807628,2007800933),bt(770255983,1495990901),bt(1249150122,1856431235),bt(1555081692,3175218132),bt(1996064986,2198950837),bt(2554220882,3999719339),bt(2821834349,766784016),bt(2952996808,2566594879),bt(3210313671,3203337956),bt(3336571891,1034457026),bt(3584528711,2466948901),bt(113926993,3758326383),bt(338241895,168717936),bt(666307205,1188179964),bt(773529912,1546045734),bt(1294757372,1522805485),bt(1396182291,2643833823),bt(1695183700,2343527390),bt(1986661051,1014477480),bt(2177026350,1206759142),bt(2456956037,344077627),bt(2730485921,1290863460),bt(2820302411,3158454273),bt(3259730800,3505952657),bt(3345764771,106217008),bt(3516065817,3606008344),bt(3600352804,1432725776),bt(4094571909,1467031594),bt(275423344,851169720),bt(430227734,3100823752),bt(506948616,1363258195),bt(659060556,3750685593),bt(883997877,3785050280),bt(958139571,3318307427),bt(1322822218,3812723403),bt(1537002063,2003034995),bt(1747873779,3602036899),bt(1955562222,1575990012),bt(2024104815,1125592928),bt(2227730452,2716904306),bt(2361852424,442776044),bt(2428436474,593698344),bt(2756734187,3733110249),bt(3204031479,2999351573),bt(3329325298,3815920427),bt(3391569614,3928383900),bt(3515267271,566280711),bt(3940187606,3454069534),bt(4118630271,4000239992),bt(116418474,1914138554),bt(174292421,2731055270),bt(289380356,3203993006),bt(460393269,320620315),bt(685471733,587496836),bt(852142971,1086792851),bt(1017036298,365543100),bt(1126000580,2618297676),bt(1288033470,3409855158),bt(1501505948,4234509866),bt(1607167915,987167468),bt(1816402316,1246189591)],At=[];(function(){for(var Et=0;Et<80;Et++)At[Et]=bt()})();var xt=mt.SHA512=ot.extend({_doReset:function(){this._hash=new ht.init([new ut.init(1779033703,4089235720),new ut.init(3144134277,2227873595),new ut.init(1013904242,4271175723),new ut.init(2773480762,1595750129),new ut.init(1359893119,2917565137),new ut.init(2600822924,725511199),new ut.init(528734635,4215389547),new ut.init(1541459225,327033209)])},_doProcessBlock:function(Et,Tt){for(var wt=this._hash.words,Ct=wt[0],It=wt[1],St=wt[2],Rt=wt[3],Dt=wt[4],Wt=wt[5],qt=wt[6],Vt=wt[7],Yt=Ct.high,jt=Ct.low,kt=It.high,zt=It.low,Nt=St.high,Mt=St.low,Lt=Rt.high,Ht=Rt.low,Qt=Dt.high,Ut=Dt.low,Bt=Wt.high,Kt=Wt.low,Gt=qt.high,Pt=qt.low,Zt=Vt.high,an=Vt.low,Jt=Yt,rn=jt,fn=kt,pn=zt,vn=Nt,En=Mt,dn=Lt,cn=Ht,_n=Qt,wn=Ut,Ln=Bt,yn=Kt,nn=Gt,sn=Pt,hn=Zt,Cn=an,$n=0;$n<80;$n++){var gn=At[$n];if($n<16)var mn=gn.high=Et[Tt+$n*2]|0,Mn=gn.low=Et[Tt+$n*2+1]|0;else{var On=At[$n-15],Dn=On.high,on=On.low,Xt=(Dn>>>1|on<<31)^(Dn>>>8|on<<24)^Dn>>>7,tn=(on>>>1|Dn<<31)^(on>>>8|Dn<<24)^(on>>>7|Dn<<25),un=At[$n-2],xn=un.high,Tn=un.low,In=(xn>>>19|Tn<<13)^(xn<<3|Tn>>>29)^xn>>>6,jn=(Tn>>>19|xn<<13)^(Tn<<3|xn>>>29)^(Tn>>>6|xn<<26),Un=At[$n-7],zn=Un.high,Xn=Un.low,Gn=At[$n-16],Sn=Gn.high,Fn=Gn.low,Mn=tn+Xn,mn=Xt+zn+(Mn>>>0<tn>>>0?1:0),Mn=Mn+jn,mn=mn+In+(Mn>>>0<jn>>>0?1:0),Mn=Mn+Fn,mn=mn+Sn+(Mn>>>0<Fn>>>0?1:0);gn.high=mn,gn.low=Mn}var Nn=_n&Ln^~_n&nn,Wn=wn&yn^~wn&sn,Kn=Jt&fn^Jt&vn^fn&vn,Hn=rn&pn^rn&En^pn&En,Yn=(Jt>>>28|rn<<4)^(Jt<<30|rn>>>2)^(Jt<<25|rn>>>7),dr=(rn>>>28|Jt<<4)^(rn<<30|Jt>>>2)^(rn<<25|Jt>>>7),tr=(_n>>>14|wn<<18)^(_n>>>18|wn<<14)^(_n<<23|wn>>>9),Qn=(wn>>>14|_n<<18)^(wn>>>18|_n<<14)^(wn<<23|_n>>>9),mr=vt[$n],Jn=mr.high,rr=mr.low,hr=Cn+Qn,er=hn+tr+(hr>>>0<Cn>>>0?1:0),hr=hr+Wn,er=er+Nn+(hr>>>0<Wn>>>0?1:0),hr=hr+rr,er=er+Jn+(hr>>>0<rr>>>0?1:0),hr=hr+Mn,er=er+mn+(hr>>>0<Mn>>>0?1:0),ir=dr+Hn,An=Yn+Kn+(ir>>>0<dr>>>0?1:0);hn=nn,Cn=sn,nn=Ln,sn=yn,Ln=_n,yn=wn,wn=cn+hr|0,_n=dn+er+(wn>>>0<cn>>>0?1:0)|0,dn=vn,cn=En,vn=fn,En=pn,fn=Jt,pn=rn,rn=hr+ir|0,Jt=er+An+(rn>>>0<hr>>>0?1:0)|0}jt=Ct.low=jt+rn,Ct.high=Yt+Jt+(jt>>>0<rn>>>0?1:0),zt=It.low=zt+pn,It.high=kt+fn+(zt>>>0<pn>>>0?1:0),Mt=St.low=Mt+En,St.high=Nt+vn+(Mt>>>0<En>>>0?1:0),Ht=Rt.low=Ht+cn,Rt.high=Lt+dn+(Ht>>>0<cn>>>0?1:0),Ut=Dt.low=Ut+wn,Dt.high=Qt+_n+(Ut>>>0<wn>>>0?1:0),Kt=Wt.low=Kt+yn,Wt.high=Bt+Ln+(Kt>>>0<yn>>>0?1:0),Pt=qt.low=Pt+sn,qt.high=Gt+nn+(Pt>>>0<sn>>>0?1:0),an=Vt.low=an+Cn,Vt.high=Zt+hn+(an>>>0<Cn>>>0?1:0)},_doFinalize:function(){var Et=this._data,Tt=Et.words,wt=this._nDataBytes*8,Ct=Et.sigBytes*8;Tt[Ct>>>5]|=128<<24-Ct%32,Tt[(Ct+128>>>10<<5)+30]=Math.floor(wt/4294967296),Tt[(Ct+128>>>10<<5)+31]=wt,Et.sigBytes=Tt.length*4,this._process();var It=this._hash.toX32();return It},clone:function(){var Et=ot.clone.call(this);return Et._hash=this._hash.clone(),Et},blockSize:1024/32});at.SHA512=ot._createHelper(xt),at.HmacSHA512=ot._createHmacHelper(xt)}(),rt.SHA512})}(sha512$1)),sha512$1.exports}var sha384$1={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.x64,ot=st.Word,lt=st.WordArray,ut=at.algo,ht=ut.SHA512,mt=ut.SHA384=ht.extend({_doReset:function(){this._hash=new lt.init([new ot.init(3418070365,3238371032),new ot.init(1654270250,914150663),new ot.init(2438529370,812702999),new ot.init(355462360,4144912697),new ot.init(1731405415,4290775857),new ot.init(2394180231,1750603025),new ot.init(3675008525,1694076839),new ot.init(1203062813,3204075428)])},_doFinalize:function(){var bt=ht._doFinalize.call(this);return bt.sigBytes-=16,bt}});at.SHA384=ht._createHelper(mt),at.HmacSHA384=ht._createHmacHelper(mt)}(),rt.SHA384})}(sha384$1)),sha384$1.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireX64Core())})(commonjsGlobal,function(rt){return function(at){var st=rt,ot=st.lib,lt=ot.WordArray,ut=ot.Hasher,ht=st.x64,mt=ht.Word,bt=st.algo,vt=[],At=[],xt=[];(function(){for(var wt=1,Ct=0,It=0;It<24;It++){vt[wt+5*Ct]=(It+1)*(It+2)/2%64;var St=Ct%5,Rt=(2*wt+3*Ct)%5;wt=St,Ct=Rt}for(var wt=0;wt<5;wt++)for(var Ct=0;Ct<5;Ct++)At[wt+5*Ct]=Ct+(2*wt+3*Ct)%5*5;for(var Dt=1,Wt=0;Wt<24;Wt++){for(var qt=0,Vt=0,Yt=0;Yt<7;Yt++){if(Dt&1){var jt=(1<<Yt)-1;jt<32?Vt^=1<<jt:qt^=1<<jt-32}Dt&128?Dt=Dt<<1^113:Dt<<=1}xt[Wt]=mt.create(qt,Vt)}})();var Et=[];(function(){for(var wt=0;wt<25;wt++)Et[wt]=mt.create()})();var Tt=bt.SHA3=ut.extend({cfg:ut.cfg.extend({outputLength:512}),_doReset:function(){for(var wt=this._state=[],Ct=0;Ct<25;Ct++)wt[Ct]=new mt.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(wt,Ct){for(var It=this._state,St=this.blockSize/2,Rt=0;Rt<St;Rt++){var Dt=wt[Ct+2*Rt],Wt=wt[Ct+2*Rt+1];Dt=(Dt<<8|Dt>>>24)&16711935|(Dt<<24|Dt>>>8)&4278255360,Wt=(Wt<<8|Wt>>>24)&16711935|(Wt<<24|Wt>>>8)&4278255360;var qt=It[Rt];qt.high^=Wt,qt.low^=Dt}for(var Vt=0;Vt<24;Vt++){for(var Yt=0;Yt<5;Yt++){for(var jt=0,kt=0,zt=0;zt<5;zt++){var qt=It[Yt+5*zt];jt^=qt.high,kt^=qt.low}var Nt=Et[Yt];Nt.high=jt,Nt.low=kt}for(var Yt=0;Yt<5;Yt++)for(var Mt=Et[(Yt+4)%5],Lt=Et[(Yt+1)%5],Ht=Lt.high,Qt=Lt.low,jt=Mt.high^(Ht<<1|Qt>>>31),kt=Mt.low^(Qt<<1|Ht>>>31),zt=0;zt<5;zt++){var qt=It[Yt+5*zt];qt.high^=jt,qt.low^=kt}for(var Ut=1;Ut<25;Ut++){var qt=It[Ut],Bt=qt.high,Kt=qt.low,Gt=vt[Ut];if(Gt<32)var jt=Bt<<Gt|Kt>>>32-Gt,kt=Kt<<Gt|Bt>>>32-Gt;else var jt=Kt<<Gt-32|Bt>>>64-Gt,kt=Bt<<Gt-32|Kt>>>64-Gt;var Pt=Et[At[Ut]];Pt.high=jt,Pt.low=kt}var Zt=Et[0],an=It[0];Zt.high=an.high,Zt.low=an.low;for(var Yt=0;Yt<5;Yt++)for(var zt=0;zt<5;zt++){var Ut=Yt+5*zt,qt=It[Ut],Jt=Et[Ut],rn=Et[(Yt+1)%5+5*zt],fn=Et[(Yt+2)%5+5*zt];qt.high=Jt.high^~rn.high&fn.high,qt.low=Jt.low^~rn.low&fn.low}var qt=It[0],pn=xt[Vt];qt.high^=pn.high,qt.low^=pn.low}},_doFinalize:function(){var wt=this._data,Ct=wt.words;this._nDataBytes*8;var It=wt.sigBytes*8,St=this.blockSize*32;Ct[It>>>5]|=1<<24-It%32,Ct[(at.ceil((It+1)/St)*St>>>5)-1]|=128,wt.sigBytes=Ct.length*4,this._process();for(var Rt=this._state,Dt=this.cfg.outputLength/8,Wt=Dt/8,qt=[],Vt=0;Vt<Wt;Vt++){var Yt=Rt[Vt],jt=Yt.high,kt=Yt.low;jt=(jt<<8|jt>>>24)&16711935|(jt<<24|jt>>>8)&4278255360,kt=(kt<<8|kt>>>24)&16711935|(kt<<24|kt>>>8)&4278255360,qt.push(kt),qt.push(jt)}return new lt.init(qt,Dt)},clone:function(){for(var wt=ut.clone.call(this),Ct=wt._state=this._state.slice(0),It=0;It<25;It++)Ct[It]=Ct[It].clone();return wt}});st.SHA3=ut._createHelper(Tt),st.HmacSHA3=ut._createHmacHelper(Tt)}(Math),rt.SHA3})}(sha3)),sha3.exports}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(at){var st=rt,ot=st.lib,lt=ot.WordArray,ut=ot.Hasher,ht=st.algo,mt=lt.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),bt=lt.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),vt=lt.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),At=lt.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),xt=lt.create([0,1518500249,1859775393,2400959708,2840853838]),Et=lt.create([1352829926,1548603684,1836072691,2053994217,0]),Tt=ht.RIPEMD160=ut.extend({_doReset:function(){this._hash=lt.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Wt,qt){for(var Vt=0;Vt<16;Vt++){var Yt=qt+Vt,jt=Wt[Yt];Wt[Yt]=(jt<<8|jt>>>24)&16711935|(jt<<24|jt>>>8)&4278255360}var kt=this._hash.words,zt=xt.words,Nt=Et.words,Mt=mt.words,Lt=bt.words,Ht=vt.words,Qt=At.words,Ut,Bt,Kt,Gt,Pt,Zt,an,Jt,rn,fn;Zt=Ut=kt[0],an=Bt=kt[1],Jt=Kt=kt[2],rn=Gt=kt[3],fn=Pt=kt[4];for(var pn,Vt=0;Vt<80;Vt+=1)pn=Ut+Wt[qt+Mt[Vt]]|0,Vt<16?pn+=wt(Bt,Kt,Gt)+zt[0]:Vt<32?pn+=Ct(Bt,Kt,Gt)+zt[1]:Vt<48?pn+=It(Bt,Kt,Gt)+zt[2]:Vt<64?pn+=St(Bt,Kt,Gt)+zt[3]:pn+=Rt(Bt,Kt,Gt)+zt[4],pn=pn|0,pn=Dt(pn,Ht[Vt]),pn=pn+Pt|0,Ut=Pt,Pt=Gt,Gt=Dt(Kt,10),Kt=Bt,Bt=pn,pn=Zt+Wt[qt+Lt[Vt]]|0,Vt<16?pn+=Rt(an,Jt,rn)+Nt[0]:Vt<32?pn+=St(an,Jt,rn)+Nt[1]:Vt<48?pn+=It(an,Jt,rn)+Nt[2]:Vt<64?pn+=Ct(an,Jt,rn)+Nt[3]:pn+=wt(an,Jt,rn)+Nt[4],pn=pn|0,pn=Dt(pn,Qt[Vt]),pn=pn+fn|0,Zt=fn,fn=rn,rn=Dt(Jt,10),Jt=an,an=pn;pn=kt[1]+Kt+rn|0,kt[1]=kt[2]+Gt+fn|0,kt[2]=kt[3]+Pt+Zt|0,kt[3]=kt[4]+Ut+an|0,kt[4]=kt[0]+Bt+Jt|0,kt[0]=pn},_doFinalize:function(){var Wt=this._data,qt=Wt.words,Vt=this._nDataBytes*8,Yt=Wt.sigBytes*8;qt[Yt>>>5]|=128<<24-Yt%32,qt[(Yt+64>>>9<<4)+14]=(Vt<<8|Vt>>>24)&16711935|(Vt<<24|Vt>>>8)&4278255360,Wt.sigBytes=(qt.length+1)*4,this._process();for(var jt=this._hash,kt=jt.words,zt=0;zt<5;zt++){var Nt=kt[zt];kt[zt]=(Nt<<8|Nt>>>24)&16711935|(Nt<<24|Nt>>>8)&4278255360}return jt},clone:function(){var Wt=ut.clone.call(this);return Wt._hash=this._hash.clone(),Wt}});function wt(Wt,qt,Vt){return Wt^qt^Vt}function Ct(Wt,qt,Vt){return Wt&qt|~Wt&Vt}function It(Wt,qt,Vt){return(Wt|~qt)^Vt}function St(Wt,qt,Vt){return Wt&Vt|qt&~Vt}function Rt(Wt,qt,Vt){return Wt^(qt|~Vt)}function Dt(Wt,qt){return Wt<<qt|Wt>>>32-qt}st.RIPEMD160=ut._createHelper(Tt),st.HmacRIPEMD160=ut._createHmacHelper(Tt)}(),rt.RIPEMD160})}(ripemd160)),ripemd160.exports}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(it,tt){(function(rt,at){it.exports=at(requireCore())})(commonjsGlobal,function(rt){(function(){var at=rt,st=at.lib,ot=st.Base,lt=at.enc,ut=lt.Utf8,ht=at.algo;ht.HMAC=ot.extend({init:function(mt,bt){mt=this._hasher=new mt.init,typeof bt=="string"&&(bt=ut.parse(bt));var vt=mt.blockSize,At=vt*4;bt.sigBytes>At&&(bt=mt.finalize(bt)),bt.clamp();for(var xt=this._oKey=bt.clone(),Et=this._iKey=bt.clone(),Tt=xt.words,wt=Et.words,Ct=0;Ct<vt;Ct++)Tt[Ct]^=1549556828,wt[Ct]^=909522486;xt.sigBytes=Et.sigBytes=At,this.reset()},reset:function(){var mt=this._hasher;mt.reset(),mt.update(this._iKey)},update:function(mt){return this._hasher.update(mt),this},finalize:function(mt){var bt=this._hasher,vt=bt.finalize(mt);bt.reset();var At=bt.finalize(this._oKey.clone().concat(vt));return At}})})()})}(hmac)),hmac.exports}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.Base,lt=st.WordArray,ut=at.algo,ht=ut.SHA1,mt=ut.HMAC,bt=ut.PBKDF2=ot.extend({cfg:ot.extend({keySize:128/32,hasher:ht,iterations:1}),init:function(vt){this.cfg=this.cfg.extend(vt)},compute:function(vt,At){for(var xt=this.cfg,Et=mt.create(xt.hasher,vt),Tt=lt.create(),wt=lt.create([1]),Ct=Tt.words,It=wt.words,St=xt.keySize,Rt=xt.iterations;Ct.length<St;){var Dt=Et.update(At).finalize(wt);Et.reset();for(var Wt=Dt.words,qt=Wt.length,Vt=Dt,Yt=1;Yt<Rt;Yt++){Vt=Et.finalize(Vt),Et.reset();for(var jt=Vt.words,kt=0;kt<qt;kt++)Wt[kt]^=jt[kt]}Tt.concat(Dt),It[0]++}return Tt.sigBytes=St*4,Tt}});at.PBKDF2=function(vt,At,xt){return bt.create(xt).compute(vt,At)}}(),rt.PBKDF2})}(pbkdf2)),pbkdf2.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.Base,lt=st.WordArray,ut=at.algo,ht=ut.MD5,mt=ut.EvpKDF=ot.extend({cfg:ot.extend({keySize:128/32,hasher:ht,iterations:1}),init:function(bt){this.cfg=this.cfg.extend(bt)},compute:function(bt,vt){for(var At=this.cfg,xt=At.hasher.create(),Et=lt.create(),Tt=Et.words,wt=At.keySize,Ct=At.iterations;Tt.length<wt;){It&&xt.update(It);var It=xt.update(bt).finalize(vt);xt.reset();for(var St=1;St<Ct;St++)It=xt.finalize(It),xt.reset();Et.concat(It)}return Et.sigBytes=wt*4,Et}});at.EvpKDF=function(bt,vt,At){return mt.create(At).compute(bt,vt)}}(),rt.EvpKDF})}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireEvpkdf())})(commonjsGlobal,function(rt){rt.lib.Cipher||function(at){var st=rt,ot=st.lib,lt=ot.Base,ut=ot.WordArray,ht=ot.BufferedBlockAlgorithm,mt=st.enc;mt.Utf8;var bt=mt.Base64,vt=st.algo,At=vt.EvpKDF,xt=ot.Cipher=ht.extend({cfg:lt.extend(),createEncryptor:function(jt,kt){return this.create(this._ENC_XFORM_MODE,jt,kt)},createDecryptor:function(jt,kt){return this.create(this._DEC_XFORM_MODE,jt,kt)},init:function(jt,kt,zt){this.cfg=this.cfg.extend(zt),this._xformMode=jt,this._key=kt,this.reset()},reset:function(){ht.reset.call(this),this._doReset()},process:function(jt){return this._append(jt),this._process()},finalize:function(jt){jt&&this._append(jt);var kt=this._doFinalize();return kt},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function jt(kt){return typeof kt=="string"?Yt:Wt}return function(kt){return{encrypt:function(zt,Nt,Mt){return jt(Nt).encrypt(kt,zt,Nt,Mt)},decrypt:function(zt,Nt,Mt){return jt(Nt).decrypt(kt,zt,Nt,Mt)}}}}()});ot.StreamCipher=xt.extend({_doFinalize:function(){var jt=this._process(!0);return jt},blockSize:1});var Et=st.mode={},Tt=ot.BlockCipherMode=lt.extend({createEncryptor:function(jt,kt){return this.Encryptor.create(jt,kt)},createDecryptor:function(jt,kt){return this.Decryptor.create(jt,kt)},init:function(jt,kt){this._cipher=jt,this._iv=kt}}),wt=Et.CBC=function(){var jt=Tt.extend();jt.Encryptor=jt.extend({processBlock:function(zt,Nt){var Mt=this._cipher,Lt=Mt.blockSize;kt.call(this,zt,Nt,Lt),Mt.encryptBlock(zt,Nt),this._prevBlock=zt.slice(Nt,Nt+Lt)}}),jt.Decryptor=jt.extend({processBlock:function(zt,Nt){var Mt=this._cipher,Lt=Mt.blockSize,Ht=zt.slice(Nt,Nt+Lt);Mt.decryptBlock(zt,Nt),kt.call(this,zt,Nt,Lt),this._prevBlock=Ht}});function kt(zt,Nt,Mt){var Lt=this._iv;if(Lt){var Ht=Lt;this._iv=at}else var Ht=this._prevBlock;for(var Qt=0;Qt<Mt;Qt++)zt[Nt+Qt]^=Ht[Qt]}return jt}(),Ct=st.pad={},It=Ct.Pkcs7={pad:function(jt,kt){for(var zt=kt*4,Nt=zt-jt.sigBytes%zt,Mt=Nt<<24|Nt<<16|Nt<<8|Nt,Lt=[],Ht=0;Ht<Nt;Ht+=4)Lt.push(Mt);var Qt=ut.create(Lt,Nt);jt.concat(Qt)},unpad:function(jt){var kt=jt.words[jt.sigBytes-1>>>2]&255;jt.sigBytes-=kt}};ot.BlockCipher=xt.extend({cfg:xt.cfg.extend({mode:wt,padding:It}),reset:function(){xt.reset.call(this);var jt=this.cfg,kt=jt.iv,zt=jt.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Nt=zt.createEncryptor;else{var Nt=zt.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==Nt?this._mode.init(this,kt&&kt.words):(this._mode=Nt.call(zt,this,kt&&kt.words),this._mode.__creator=Nt)},_doProcessBlock:function(jt,kt){this._mode.processBlock(jt,kt)},_doFinalize:function(){var jt=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){jt.pad(this._data,this.blockSize);var kt=this._process(!0)}else{var kt=this._process(!0);jt.unpad(kt)}return kt},blockSize:128/32});var St=ot.CipherParams=lt.extend({init:function(jt){this.mixIn(jt)},toString:function(jt){return(jt||this.formatter).stringify(this)}}),Rt=st.format={},Dt=Rt.OpenSSL={stringify:function(jt){var kt=jt.ciphertext,zt=jt.salt;if(zt)var Nt=ut.create([1398893684,1701076831]).concat(zt).concat(kt);else var Nt=kt;return Nt.toString(bt)},parse:function(jt){var kt=bt.parse(jt),zt=kt.words;if(zt[0]==1398893684&&zt[1]==1701076831){var Nt=ut.create(zt.slice(2,4));zt.splice(0,4),kt.sigBytes-=16}return St.create({ciphertext:kt,salt:Nt})}},Wt=ot.SerializableCipher=lt.extend({cfg:lt.extend({format:Dt}),encrypt:function(jt,kt,zt,Nt){Nt=this.cfg.extend(Nt);var Mt=jt.createEncryptor(zt,Nt),Lt=Mt.finalize(kt),Ht=Mt.cfg;return St.create({ciphertext:Lt,key:zt,iv:Ht.iv,algorithm:jt,mode:Ht.mode,padding:Ht.padding,blockSize:jt.blockSize,formatter:Nt.format})},decrypt:function(jt,kt,zt,Nt){Nt=this.cfg.extend(Nt),kt=this._parse(kt,Nt.format);var Mt=jt.createDecryptor(zt,Nt).finalize(kt.ciphertext);return Mt},_parse:function(jt,kt){return typeof jt=="string"?kt.parse(jt,this):jt}}),qt=st.kdf={},Vt=qt.OpenSSL={execute:function(jt,kt,zt,Nt){Nt||(Nt=ut.random(64/8));var Mt=At.create({keySize:kt+zt}).compute(jt,Nt),Lt=ut.create(Mt.words.slice(kt),zt*4);return Mt.sigBytes=kt*4,St.create({key:Mt,iv:Lt,salt:Nt})}},Yt=ot.PasswordBasedCipher=Wt.extend({cfg:Wt.cfg.extend({kdf:Vt}),encrypt:function(jt,kt,zt,Nt){Nt=this.cfg.extend(Nt);var Mt=Nt.kdf.execute(zt,jt.keySize,jt.ivSize);Nt.iv=Mt.iv;var Lt=Wt.encrypt.call(this,jt,kt,Mt.key,Nt);return Lt.mixIn(Mt),Lt},decrypt:function(jt,kt,zt,Nt){Nt=this.cfg.extend(Nt),kt=this._parse(kt,Nt.format);var Mt=Nt.kdf.execute(zt,jt.keySize,jt.ivSize,kt.salt);Nt.iv=Mt.iv;var Lt=Wt.decrypt.call(this,jt,kt,Mt.key,Nt);return Lt}})}()})}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.mode.CFB=function(){var at=rt.lib.BlockCipherMode.extend();at.Encryptor=at.extend({processBlock:function(ot,lt){var ut=this._cipher,ht=ut.blockSize;st.call(this,ot,lt,ht,ut),this._prevBlock=ot.slice(lt,lt+ht)}}),at.Decryptor=at.extend({processBlock:function(ot,lt){var ut=this._cipher,ht=ut.blockSize,mt=ot.slice(lt,lt+ht);st.call(this,ot,lt,ht,ut),this._prevBlock=mt}});function st(ot,lt,ut,ht){var mt=this._iv;if(mt){var bt=mt.slice(0);this._iv=void 0}else var bt=this._prevBlock;ht.encryptBlock(bt,0);for(var vt=0;vt<ut;vt++)ot[lt+vt]^=bt[vt]}return at}(),rt.mode.CFB})}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.mode.CTR=function(){var at=rt.lib.BlockCipherMode.extend(),st=at.Encryptor=at.extend({processBlock:function(ot,lt){var ut=this._cipher,ht=ut.blockSize,mt=this._iv,bt=this._counter;mt&&(bt=this._counter=mt.slice(0),this._iv=void 0);var vt=bt.slice(0);ut.encryptBlock(vt,0),bt[ht-1]=bt[ht-1]+1|0;for(var At=0;At<ht;At++)ot[lt+At]^=vt[At]}});return at.Decryptor=st,at}(),rt.mode.CTR})}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return rt.mode.CTRGladman=function(){var at=rt.lib.BlockCipherMode.extend();function st(ut){if((ut>>24&255)===255){var ht=ut>>16&255,mt=ut>>8&255,bt=ut&255;ht===255?(ht=0,mt===255?(mt=0,bt===255?bt=0:++bt):++mt):++ht,ut=0,ut+=ht<<16,ut+=mt<<8,ut+=bt}else ut+=1<<24;return ut}function ot(ut){return(ut[0]=st(ut[0]))===0&&(ut[1]=st(ut[1])),ut}var lt=at.Encryptor=at.extend({processBlock:function(ut,ht){var mt=this._cipher,bt=mt.blockSize,vt=this._iv,At=this._counter;vt&&(At=this._counter=vt.slice(0),this._iv=void 0),ot(At);var xt=At.slice(0);mt.encryptBlock(xt,0);for(var Et=0;Et<bt;Et++)ut[ht+Et]^=xt[Et]}});return at.Decryptor=lt,at}(),rt.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.mode.OFB=function(){var at=rt.lib.BlockCipherMode.extend(),st=at.Encryptor=at.extend({processBlock:function(ot,lt){var ut=this._cipher,ht=ut.blockSize,mt=this._iv,bt=this._keystream;mt&&(bt=this._keystream=mt.slice(0),this._iv=void 0),ut.encryptBlock(bt,0);for(var vt=0;vt<ht;vt++)ot[lt+vt]^=bt[vt]}});return at.Decryptor=st,at}(),rt.mode.OFB})}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.mode.ECB=function(){var at=rt.lib.BlockCipherMode.extend();return at.Encryptor=at.extend({processBlock:function(st,ot){this._cipher.encryptBlock(st,ot)}}),at.Decryptor=at.extend({processBlock:function(st,ot){this._cipher.decryptBlock(st,ot)}}),at}(),rt.mode.ECB})}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.pad.AnsiX923={pad:function(at,st){var ot=at.sigBytes,lt=st*4,ut=lt-ot%lt,ht=ot+ut-1;at.clamp(),at.words[ht>>>2]|=ut<<24-ht%4*8,at.sigBytes+=ut},unpad:function(at){var st=at.words[at.sigBytes-1>>>2]&255;at.sigBytes-=st}},rt.pad.Ansix923})}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.pad.Iso10126={pad:function(at,st){var ot=st*4,lt=ot-at.sigBytes%ot;at.concat(rt.lib.WordArray.random(lt-1)).concat(rt.lib.WordArray.create([lt<<24],1))},unpad:function(at){var st=at.words[at.sigBytes-1>>>2]&255;at.sigBytes-=st}},rt.pad.Iso10126})}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.pad.Iso97971={pad:function(at,st){at.concat(rt.lib.WordArray.create([2147483648],1)),rt.pad.ZeroPadding.pad(at,st)},unpad:function(at){rt.pad.ZeroPadding.unpad(at),at.sigBytes--}},rt.pad.Iso97971})}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.pad.ZeroPadding={pad:function(at,st){var ot=st*4;at.clamp(),at.sigBytes+=ot-(at.sigBytes%ot||ot)},unpad:function(at){for(var st=at.words,ot=at.sigBytes-1;!(st[ot>>>2]>>>24-ot%4*8&255);)ot--;at.sigBytes=ot+1}},rt.pad.ZeroPadding})}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return rt.pad.NoPadding={pad:function(){},unpad:function(){}},rt.pad.NoPadding})}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireCipherCore())})(commonjsGlobal,function(rt){return function(at){var st=rt,ot=st.lib,lt=ot.CipherParams,ut=st.enc,ht=ut.Hex,mt=st.format;mt.Hex={stringify:function(bt){return bt.ciphertext.toString(ht)},parse:function(bt){var vt=ht.parse(bt);return lt.create({ciphertext:vt})}}}(),rt.format.Hex})}(formatHex)),formatHex.exports}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.BlockCipher,lt=at.algo,ut=[],ht=[],mt=[],bt=[],vt=[],At=[],xt=[],Et=[],Tt=[],wt=[];(function(){for(var St=[],Rt=0;Rt<256;Rt++)Rt<128?St[Rt]=Rt<<1:St[Rt]=Rt<<1^283;for(var Dt=0,Wt=0,Rt=0;Rt<256;Rt++){var qt=Wt^Wt<<1^Wt<<2^Wt<<3^Wt<<4;qt=qt>>>8^qt&255^99,ut[Dt]=qt,ht[qt]=Dt;var Vt=St[Dt],Yt=St[Vt],jt=St[Yt],kt=St[qt]*257^qt*16843008;mt[Dt]=kt<<24|kt>>>8,bt[Dt]=kt<<16|kt>>>16,vt[Dt]=kt<<8|kt>>>24,At[Dt]=kt;var kt=jt*16843009^Yt*65537^Vt*257^Dt*16843008;xt[qt]=kt<<24|kt>>>8,Et[qt]=kt<<16|kt>>>16,Tt[qt]=kt<<8|kt>>>24,wt[qt]=kt,Dt?(Dt=Vt^St[St[St[jt^Vt]]],Wt^=St[St[Wt]]):Dt=Wt=1}})();var Ct=[0,1,2,4,8,16,32,64,128,27,54],It=lt.AES=ot.extend({_doReset:function(){if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var St=this._keyPriorReset=this._key,Rt=St.words,Dt=St.sigBytes/4,Wt=this._nRounds=Dt+6,qt=(Wt+1)*4,Vt=this._keySchedule=[],Yt=0;Yt<qt;Yt++)if(Yt<Dt)Vt[Yt]=Rt[Yt];else{var jt=Vt[Yt-1];Yt%Dt?Dt>6&&Yt%Dt==4&&(jt=ut[jt>>>24]<<24|ut[jt>>>16&255]<<16|ut[jt>>>8&255]<<8|ut[jt&255]):(jt=jt<<8|jt>>>24,jt=ut[jt>>>24]<<24|ut[jt>>>16&255]<<16|ut[jt>>>8&255]<<8|ut[jt&255],jt^=Ct[Yt/Dt|0]<<24),Vt[Yt]=Vt[Yt-Dt]^jt}for(var kt=this._invKeySchedule=[],zt=0;zt<qt;zt++){var Yt=qt-zt;if(zt%4)var jt=Vt[Yt];else var jt=Vt[Yt-4];zt<4||Yt<=4?kt[zt]=jt:kt[zt]=xt[ut[jt>>>24]]^Et[ut[jt>>>16&255]]^Tt[ut[jt>>>8&255]]^wt[ut[jt&255]]}}},encryptBlock:function(St,Rt){this._doCryptBlock(St,Rt,this._keySchedule,mt,bt,vt,At,ut)},decryptBlock:function(St,Rt){var Dt=St[Rt+1];St[Rt+1]=St[Rt+3],St[Rt+3]=Dt,this._doCryptBlock(St,Rt,this._invKeySchedule,xt,Et,Tt,wt,ht);var Dt=St[Rt+1];St[Rt+1]=St[Rt+3],St[Rt+3]=Dt},_doCryptBlock:function(St,Rt,Dt,Wt,qt,Vt,Yt,jt){for(var kt=this._nRounds,zt=St[Rt]^Dt[0],Nt=St[Rt+1]^Dt[1],Mt=St[Rt+2]^Dt[2],Lt=St[Rt+3]^Dt[3],Ht=4,Qt=1;Qt<kt;Qt++){var Ut=Wt[zt>>>24]^qt[Nt>>>16&255]^Vt[Mt>>>8&255]^Yt[Lt&255]^Dt[Ht++],Bt=Wt[Nt>>>24]^qt[Mt>>>16&255]^Vt[Lt>>>8&255]^Yt[zt&255]^Dt[Ht++],Kt=Wt[Mt>>>24]^qt[Lt>>>16&255]^Vt[zt>>>8&255]^Yt[Nt&255]^Dt[Ht++],Gt=Wt[Lt>>>24]^qt[zt>>>16&255]^Vt[Nt>>>8&255]^Yt[Mt&255]^Dt[Ht++];zt=Ut,Nt=Bt,Mt=Kt,Lt=Gt}var Ut=(jt[zt>>>24]<<24|jt[Nt>>>16&255]<<16|jt[Mt>>>8&255]<<8|jt[Lt&255])^Dt[Ht++],Bt=(jt[Nt>>>24]<<24|jt[Mt>>>16&255]<<16|jt[Lt>>>8&255]<<8|jt[zt&255])^Dt[Ht++],Kt=(jt[Mt>>>24]<<24|jt[Lt>>>16&255]<<16|jt[zt>>>8&255]<<8|jt[Nt&255])^Dt[Ht++],Gt=(jt[Lt>>>24]<<24|jt[zt>>>16&255]<<16|jt[Nt>>>8&255]<<8|jt[Mt&255])^Dt[Ht++];St[Rt]=Ut,St[Rt+1]=Bt,St[Rt+2]=Kt,St[Rt+3]=Gt},keySize:256/32});at.AES=ot._createHelper(It)}(),rt.AES})}(aes)),aes.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.WordArray,lt=st.BlockCipher,ut=at.algo,ht=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],mt=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],bt=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],vt=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],At=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],xt=ut.DES=lt.extend({_doReset:function(){for(var Ct=this._key,It=Ct.words,St=[],Rt=0;Rt<56;Rt++){var Dt=ht[Rt]-1;St[Rt]=It[Dt>>>5]>>>31-Dt%32&1}for(var Wt=this._subKeys=[],qt=0;qt<16;qt++){for(var Vt=Wt[qt]=[],Yt=bt[qt],Rt=0;Rt<24;Rt++)Vt[Rt/6|0]|=St[(mt[Rt]-1+Yt)%28]<<31-Rt%6,Vt[4+(Rt/6|0)]|=St[28+(mt[Rt+24]-1+Yt)%28]<<31-Rt%6;Vt[0]=Vt[0]<<1|Vt[0]>>>31;for(var Rt=1;Rt<7;Rt++)Vt[Rt]=Vt[Rt]>>>(Rt-1)*4+3;Vt[7]=Vt[7]<<5|Vt[7]>>>27}for(var jt=this._invSubKeys=[],Rt=0;Rt<16;Rt++)jt[Rt]=Wt[15-Rt]},encryptBlock:function(Ct,It){this._doCryptBlock(Ct,It,this._subKeys)},decryptBlock:function(Ct,It){this._doCryptBlock(Ct,It,this._invSubKeys)},_doCryptBlock:function(Ct,It,St){this._lBlock=Ct[It],this._rBlock=Ct[It+1],Et.call(this,4,252645135),Et.call(this,16,65535),Tt.call(this,2,858993459),Tt.call(this,8,16711935),Et.call(this,1,1431655765);for(var Rt=0;Rt<16;Rt++){for(var Dt=St[Rt],Wt=this._lBlock,qt=this._rBlock,Vt=0,Yt=0;Yt<8;Yt++)Vt|=vt[Yt][((qt^Dt[Yt])&At[Yt])>>>0];this._lBlock=qt,this._rBlock=Wt^Vt}var jt=this._lBlock;this._lBlock=this._rBlock,this._rBlock=jt,Et.call(this,1,1431655765),Tt.call(this,8,16711935),Tt.call(this,2,858993459),Et.call(this,16,65535),Et.call(this,4,252645135),Ct[It]=this._lBlock,Ct[It+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function Et(Ct,It){var St=(this._lBlock>>>Ct^this._rBlock)&It;this._rBlock^=St,this._lBlock^=St<<Ct}function Tt(Ct,It){var St=(this._rBlock>>>Ct^this._lBlock)&It;this._lBlock^=St,this._rBlock^=St<<Ct}at.DES=lt._createHelper(xt);var wt=ut.TripleDES=lt.extend({_doReset:function(){var Ct=this._key,It=Ct.words;this._des1=xt.createEncryptor(ot.create(It.slice(0,2))),this._des2=xt.createEncryptor(ot.create(It.slice(2,4))),this._des3=xt.createEncryptor(ot.create(It.slice(4,6)))},encryptBlock:function(Ct,It){this._des1.encryptBlock(Ct,It),this._des2.decryptBlock(Ct,It),this._des3.encryptBlock(Ct,It)},decryptBlock:function(Ct,It){this._des3.decryptBlock(Ct,It),this._des2.encryptBlock(Ct,It),this._des1.decryptBlock(Ct,It)},keySize:192/32,ivSize:64/32,blockSize:64/32});at.TripleDES=lt._createHelper(wt)}(),rt.TripleDES})}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.StreamCipher,lt=at.algo,ut=lt.RC4=ot.extend({_doReset:function(){for(var bt=this._key,vt=bt.words,At=bt.sigBytes,xt=this._S=[],Et=0;Et<256;Et++)xt[Et]=Et;for(var Et=0,Tt=0;Et<256;Et++){var wt=Et%At,Ct=vt[wt>>>2]>>>24-wt%4*8&255;Tt=(Tt+xt[Et]+Ct)%256;var It=xt[Et];xt[Et]=xt[Tt],xt[Tt]=It}this._i=this._j=0},_doProcessBlock:function(bt,vt){bt[vt]^=ht.call(this)},keySize:256/32,ivSize:0});function ht(){for(var bt=this._S,vt=this._i,At=this._j,xt=0,Et=0;Et<4;Et++){vt=(vt+1)%256,At=(At+bt[vt])%256;var Tt=bt[vt];bt[vt]=bt[At],bt[At]=Tt,xt|=bt[(bt[vt]+bt[At])%256]<<24-Et*8}return this._i=vt,this._j=At,xt}at.RC4=ot._createHelper(ut);var mt=lt.RC4Drop=ut.extend({cfg:ut.cfg.extend({drop:192}),_doReset:function(){ut._doReset.call(this);for(var bt=this.cfg.drop;bt>0;bt--)ht.call(this)}});at.RC4Drop=ot._createHelper(mt)}(),rt.RC4})}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.StreamCipher,lt=at.algo,ut=[],ht=[],mt=[],bt=lt.Rabbit=ot.extend({_doReset:function(){for(var At=this._key.words,xt=this.cfg.iv,Et=0;Et<4;Et++)At[Et]=(At[Et]<<8|At[Et]>>>24)&16711935|(At[Et]<<24|At[Et]>>>8)&4278255360;var Tt=this._X=[At[0],At[3]<<16|At[2]>>>16,At[1],At[0]<<16|At[3]>>>16,At[2],At[1]<<16|At[0]>>>16,At[3],At[2]<<16|At[1]>>>16],wt=this._C=[At[2]<<16|At[2]>>>16,At[0]&4294901760|At[1]&65535,At[3]<<16|At[3]>>>16,At[1]&4294901760|At[2]&65535,At[0]<<16|At[0]>>>16,At[2]&4294901760|At[3]&65535,At[1]<<16|At[1]>>>16,At[3]&4294901760|At[0]&65535];this._b=0;for(var Et=0;Et<4;Et++)vt.call(this);for(var Et=0;Et<8;Et++)wt[Et]^=Tt[Et+4&7];if(xt){var Ct=xt.words,It=Ct[0],St=Ct[1],Rt=(It<<8|It>>>24)&16711935|(It<<24|It>>>8)&4278255360,Dt=(St<<8|St>>>24)&16711935|(St<<24|St>>>8)&4278255360,Wt=Rt>>>16|Dt&4294901760,qt=Dt<<16|Rt&65535;wt[0]^=Rt,wt[1]^=Wt,wt[2]^=Dt,wt[3]^=qt,wt[4]^=Rt,wt[5]^=Wt,wt[6]^=Dt,wt[7]^=qt;for(var Et=0;Et<4;Et++)vt.call(this)}},_doProcessBlock:function(At,xt){var Et=this._X;vt.call(this),ut[0]=Et[0]^Et[5]>>>16^Et[3]<<16,ut[1]=Et[2]^Et[7]>>>16^Et[5]<<16,ut[2]=Et[4]^Et[1]>>>16^Et[7]<<16,ut[3]=Et[6]^Et[3]>>>16^Et[1]<<16;for(var Tt=0;Tt<4;Tt++)ut[Tt]=(ut[Tt]<<8|ut[Tt]>>>24)&16711935|(ut[Tt]<<24|ut[Tt]>>>8)&4278255360,At[xt+Tt]^=ut[Tt]},blockSize:128/32,ivSize:64/32});function vt(){for(var At=this._X,xt=this._C,Et=0;Et<8;Et++)ht[Et]=xt[Et];xt[0]=xt[0]+1295307597+this._b|0,xt[1]=xt[1]+3545052371+(xt[0]>>>0<ht[0]>>>0?1:0)|0,xt[2]=xt[2]+886263092+(xt[1]>>>0<ht[1]>>>0?1:0)|0,xt[3]=xt[3]+1295307597+(xt[2]>>>0<ht[2]>>>0?1:0)|0,xt[4]=xt[4]+3545052371+(xt[3]>>>0<ht[3]>>>0?1:0)|0,xt[5]=xt[5]+886263092+(xt[4]>>>0<ht[4]>>>0?1:0)|0,xt[6]=xt[6]+1295307597+(xt[5]>>>0<ht[5]>>>0?1:0)|0,xt[7]=xt[7]+3545052371+(xt[6]>>>0<ht[6]>>>0?1:0)|0,this._b=xt[7]>>>0<ht[7]>>>0?1:0;for(var Et=0;Et<8;Et++){var Tt=At[Et]+xt[Et],wt=Tt&65535,Ct=Tt>>>16,It=((wt*wt>>>17)+wt*Ct>>>15)+Ct*Ct,St=((Tt&4294901760)*Tt|0)+((Tt&65535)*Tt|0);mt[Et]=It^St}At[0]=mt[0]+(mt[7]<<16|mt[7]>>>16)+(mt[6]<<16|mt[6]>>>16)|0,At[1]=mt[1]+(mt[0]<<8|mt[0]>>>24)+mt[7]|0,At[2]=mt[2]+(mt[1]<<16|mt[1]>>>16)+(mt[0]<<16|mt[0]>>>16)|0,At[3]=mt[3]+(mt[2]<<8|mt[2]>>>24)+mt[1]|0,At[4]=mt[4]+(mt[3]<<16|mt[3]>>>16)+(mt[2]<<16|mt[2]>>>16)|0,At[5]=mt[5]+(mt[4]<<8|mt[4]>>>24)+mt[3]|0,At[6]=mt[6]+(mt[5]<<16|mt[5]>>>16)+(mt[4]<<16|mt[4]>>>16)|0,At[7]=mt[7]+(mt[6]<<8|mt[6]>>>24)+mt[5]|0}at.Rabbit=ot._createHelper(bt)}(),rt.Rabbit})}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(rt){return function(){var at=rt,st=at.lib,ot=st.StreamCipher,lt=at.algo,ut=[],ht=[],mt=[],bt=lt.RabbitLegacy=ot.extend({_doReset:function(){var At=this._key.words,xt=this.cfg.iv,Et=this._X=[At[0],At[3]<<16|At[2]>>>16,At[1],At[0]<<16|At[3]>>>16,At[2],At[1]<<16|At[0]>>>16,At[3],At[2]<<16|At[1]>>>16],Tt=this._C=[At[2]<<16|At[2]>>>16,At[0]&4294901760|At[1]&65535,At[3]<<16|At[3]>>>16,At[1]&4294901760|At[2]&65535,At[0]<<16|At[0]>>>16,At[2]&4294901760|At[3]&65535,At[1]<<16|At[1]>>>16,At[3]&4294901760|At[0]&65535];this._b=0;for(var wt=0;wt<4;wt++)vt.call(this);for(var wt=0;wt<8;wt++)Tt[wt]^=Et[wt+4&7];if(xt){var Ct=xt.words,It=Ct[0],St=Ct[1],Rt=(It<<8|It>>>24)&16711935|(It<<24|It>>>8)&4278255360,Dt=(St<<8|St>>>24)&16711935|(St<<24|St>>>8)&4278255360,Wt=Rt>>>16|Dt&4294901760,qt=Dt<<16|Rt&65535;Tt[0]^=Rt,Tt[1]^=Wt,Tt[2]^=Dt,Tt[3]^=qt,Tt[4]^=Rt,Tt[5]^=Wt,Tt[6]^=Dt,Tt[7]^=qt;for(var wt=0;wt<4;wt++)vt.call(this)}},_doProcessBlock:function(At,xt){var Et=this._X;vt.call(this),ut[0]=Et[0]^Et[5]>>>16^Et[3]<<16,ut[1]=Et[2]^Et[7]>>>16^Et[5]<<16,ut[2]=Et[4]^Et[1]>>>16^Et[7]<<16,ut[3]=Et[6]^Et[3]>>>16^Et[1]<<16;for(var Tt=0;Tt<4;Tt++)ut[Tt]=(ut[Tt]<<8|ut[Tt]>>>24)&16711935|(ut[Tt]<<24|ut[Tt]>>>8)&4278255360,At[xt+Tt]^=ut[Tt]},blockSize:128/32,ivSize:64/32});function vt(){for(var At=this._X,xt=this._C,Et=0;Et<8;Et++)ht[Et]=xt[Et];xt[0]=xt[0]+1295307597+this._b|0,xt[1]=xt[1]+3545052371+(xt[0]>>>0<ht[0]>>>0?1:0)|0,xt[2]=xt[2]+886263092+(xt[1]>>>0<ht[1]>>>0?1:0)|0,xt[3]=xt[3]+1295307597+(xt[2]>>>0<ht[2]>>>0?1:0)|0,xt[4]=xt[4]+3545052371+(xt[3]>>>0<ht[3]>>>0?1:0)|0,xt[5]=xt[5]+886263092+(xt[4]>>>0<ht[4]>>>0?1:0)|0,xt[6]=xt[6]+1295307597+(xt[5]>>>0<ht[5]>>>0?1:0)|0,xt[7]=xt[7]+3545052371+(xt[6]>>>0<ht[6]>>>0?1:0)|0,this._b=xt[7]>>>0<ht[7]>>>0?1:0;for(var Et=0;Et<8;Et++){var Tt=At[Et]+xt[Et],wt=Tt&65535,Ct=Tt>>>16,It=((wt*wt>>>17)+wt*Ct>>>15)+Ct*Ct,St=((Tt&4294901760)*Tt|0)+((Tt&65535)*Tt|0);mt[Et]=It^St}At[0]=mt[0]+(mt[7]<<16|mt[7]>>>16)+(mt[6]<<16|mt[6]>>>16)|0,At[1]=mt[1]+(mt[0]<<8|mt[0]>>>24)+mt[7]|0,At[2]=mt[2]+(mt[1]<<16|mt[1]>>>16)+(mt[0]<<16|mt[0]>>>16)|0,At[3]=mt[3]+(mt[2]<<8|mt[2]>>>24)+mt[1]|0,At[4]=mt[4]+(mt[3]<<16|mt[3]>>>16)+(mt[2]<<16|mt[2]>>>16)|0,At[5]=mt[5]+(mt[4]<<8|mt[4]>>>24)+mt[3]|0,At[6]=mt[6]+(mt[5]<<16|mt[5]>>>16)+(mt[4]<<16|mt[4]>>>16)|0,At[7]=mt[7]+(mt[6]<<8|mt[6]>>>24)+mt[5]|0}at.RabbitLegacy=ot._createHelper(bt)}(),rt.RabbitLegacy})}(rabbitLegacy)),rabbitLegacy.exports}(function(it,tt){(function(rt,at,st){it.exports=at(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireMd5(),requireSha1(),sha256$1.exports,requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy())})(commonjsGlobal,function(rt){return rt})})(cryptoJs);var __importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(Base$1,"__esModule",{value:!0}),Base$1.Base=void 0;const buffer_1$2=buffer$2,crypto_js_1=__importDefault$c(cryptoJs.exports);class Base{print(){Base.print(this)}_bufferIndexOf(tt,rt){for(let at=0;at<tt.length;at++)if(rt.equals(tt[at]))return at;return-1}static bufferify(tt){if(!buffer_1$2.Buffer.isBuffer(tt)){if(typeof tt=="object"&&tt.words)return buffer_1$2.Buffer.from(tt.toString(crypto_js_1.default.enc.Hex),"hex");if(Base.isHexString(tt))return buffer_1$2.Buffer.from(tt.replace(/^0x/,""),"hex");if(typeof tt=="string")return buffer_1$2.Buffer.from(tt);if(typeof tt=="number"){let rt=tt.toString();return rt.length%2&&(rt=`0${rt}`),buffer_1$2.Buffer.from(rt,"hex")}else if(ArrayBuffer.isView(tt))return buffer_1$2.Buffer.from(tt.buffer,tt.byteOffset,tt.byteLength)}return tt}static isHexString(tt){return typeof tt=="string"&&/^(0x)?[0-9A-Fa-f]*$/.test(tt)}static print(tt){console.log(tt.toString())}bufferToHex(tt,rt=!0){return Base.bufferToHex(tt,rt)}static bufferToHex(tt,rt=!0){return`${rt?"0x":""}${(tt||buffer_1$2.Buffer.alloc(0)).toString("hex")}`}bufferify(tt){return Base.bufferify(tt)}bufferifyFn(tt){return rt=>{const at=tt(rt);return buffer_1$2.Buffer.isBuffer(at)?at:this._isHexString(at)?buffer_1$2.Buffer.from(at.replace("0x",""),"hex"):typeof at=="string"?buffer_1$2.Buffer.from(at):ArrayBuffer.isView(at)?buffer_1$2.Buffer.from(at.buffer,at.byteOffset,at.byteLength):buffer_1$2.Buffer.from(tt(crypto_js_1.default.enc.Hex.parse(rt.toString("hex"))).toString(crypto_js_1.default.enc.Hex),"hex")}}_isHexString(tt){return Base.isHexString(tt)}_log2(tt){return tt===1?0:1+this._log2(tt/2|0)}_zip(tt,rt){return tt.map((at,st)=>[at,rt[st]])}}Base$1.Base=Base,Base$1.default=Base;var __importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(MerkleTree$1,"__esModule",{value:!0}),MerkleTree$1.MerkleTree=void 0;const buffer_1$1=buffer$2,buffer_reverse_1=__importDefault$b(bufferReverse),sha256_1$1=__importDefault$b(sha256$1.exports),treeify_1=__importDefault$b(treeify.exports),Base_1$1=__importDefault$b(Base$1);class MerkleTree extends Base_1$1.default{constructor(tt,rt=sha256_1$1.default,at={}){if(super(),this.duplicateOdd=!1,this.hashLeaves=!1,this.isBitcoinTree=!1,this.leaves=[],this.layers=[],this.sortLeaves=!1,this.sortPairs=!1,this.sort=!1,this.fillDefaultHash=null,this.isBitcoinTree=!!at.isBitcoinTree,this.hashLeaves=!!at.hashLeaves,this.sortLeaves=!!at.sortLeaves,this.sortPairs=!!at.sortPairs,at.fillDefaultHash)if(typeof at.fillDefaultHash=="function")this.fillDefaultHash=at.fillDefaultHash;else if(buffer_1$1.Buffer.isBuffer(at.fillDefaultHash)||typeof at.fillDefaultHash=="string")this.fillDefaultHash=(st,ot)=>at.fillDefaultHash;else throw new Error('method "fillDefaultHash" must be a function, Buffer, or string');this.sort=!!at.sort,this.sort&&(this.sortLeaves=!0,this.sortPairs=!0),this.duplicateOdd=!!at.duplicateOdd,this.hashFn=this.bufferifyFn(rt),this.processLeaves(tt)}processLeaves(tt){if(this.hashLeaves&&(tt=tt.map(this.hashFn)),this.leaves=tt.map(this.bufferify),this.sortLeaves&&(this.leaves=this.leaves.sort(buffer_1$1.Buffer.compare)),this.fillDefaultHash)for(let rt=0;rt<Math.pow(2,Math.ceil(Math.log2(this.leaves.length)));rt++)rt>=this.leaves.length&&this.leaves.push(this.bufferify(this.fillDefaultHash(rt,this.hashFn)));this.layers=[this.leaves],this._createHashes(this.leaves)}_createHashes(tt){for(;tt.length>1;){const rt=this.layers.length;this.layers.push([]);for(let at=0;at<tt.length;at+=2){if(at+1===tt.length&&tt.length%2===1){let mt=tt[tt.length-1],bt=mt;if(this.isBitcoinTree){mt=buffer_1$1.Buffer.concat([buffer_reverse_1.default(mt),buffer_reverse_1.default(mt)]),bt=this.hashFn(mt),bt=buffer_reverse_1.default(this.hashFn(bt)),this.layers[rt].push(bt);continue}else if(!this.duplicateOdd){this.layers[rt].push(tt[at]);continue}}const st=tt[at],ot=at+1===tt.length?st:tt[at+1];let lt=null,ut=null;this.isBitcoinTree?ut=[buffer_reverse_1.default(st),buffer_reverse_1.default(ot)]:ut=[st,ot],this.sortPairs&&ut.sort(buffer_1$1.Buffer.compare),lt=buffer_1$1.Buffer.concat(ut);let ht=this.hashFn(lt);this.isBitcoinTree&&(ht=buffer_reverse_1.default(this.hashFn(ht))),this.layers[rt].push(ht)}tt=this.layers[rt]}}addLeaf(tt,rt=!1){rt&&(tt=this.hashFn(tt)),this.processLeaves(this.leaves.concat(tt))}addLeaves(tt,rt=!1){rt&&(tt=tt.map(this.hashFn)),this.processLeaves(this.leaves.concat(tt))}getLeaves(tt){return Array.isArray(tt)?(this.hashLeaves&&(tt=tt.map(this.hashFn),this.sortLeaves&&(tt=tt.sort(buffer_1$1.Buffer.compare))),this.leaves.filter(rt=>this._bufferIndexOf(tt,rt)!==-1)):this.leaves}getLeaf(tt){return tt<0||tt>this.leaves.length-1?buffer_1$1.Buffer.from([]):this.leaves[tt]}getLeafIndex(tt){tt=this.bufferify(tt);const rt=this.getLeaves();for(let at=0;at<rt.length;at++)if(rt[at].equals(tt))return at;return-1}getLeafCount(){return this.leaves.length}getHexLeaves(){return this.leaves.map(tt=>this.bufferToHex(tt))}static marshalLeaves(tt){return JSON.stringify(tt.map(rt=>MerkleTree.bufferToHex(rt)),null,2)}static unmarshalLeaves(tt){let rt=null;if(typeof tt=="string")rt=JSON.parse(tt);else if(tt instanceof Object)rt=tt;else throw new Error("Expected type of string or object");if(!rt)return[];if(!Array.isArray(rt))throw new Error("Expected JSON string to be array");return rt.map(MerkleTree.bufferify)}getLayers(){return this.layers}getHexLayers(){return this.layers.reduce((tt,rt)=>(Array.isArray(rt)?tt.push(rt.map(at=>this.bufferToHex(at))):tt.push(rt),tt),[])}getLayersFlat(){const tt=this.layers.reduce((rt,at)=>(Array.isArray(at)?rt.unshift(...at):rt.unshift(at),rt),[]);return tt.unshift(buffer_1$1.Buffer.from([0])),tt}getHexLayersFlat(){return this.getLayersFlat().map(tt=>this.bufferToHex(tt))}getLayerCount(){return this.getLayers().length}getRoot(){return this.layers.length===0?buffer_1$1.Buffer.from([]):this.layers[this.layers.length-1][0]||buffer_1$1.Buffer.from([])}getHexRoot(){return this.bufferToHex(this.getRoot())}getProof(tt,rt){if(typeof tt>"u")throw new Error("leaf is required");tt=this.bufferify(tt);const at=[];if(!Number.isInteger(rt)){rt=-1;for(let st=0;st<this.leaves.length;st++)buffer_1$1.Buffer.compare(tt,this.leaves[st])===0&&(rt=st)}if(rt<=-1)return[];for(let st=0;st<this.layers.length;st++){const ot=this.layers[st],lt=rt%2,ut=lt?rt-1:this.isBitcoinTree&&rt===ot.length-1&&st<this.layers.length-1?rt:rt+1;ut<ot.length&&at.push({position:lt?"left":"right",data:ot[ut]}),rt=rt/2|0}return at}getHexProof(tt,rt){return this.getProof(tt,rt).map(at=>this.bufferToHex(at.data))}getPositionalHexProof(tt,rt){return this.getProof(tt,rt).map(at=>[at.position==="left"?0:1,this.bufferToHex(at.data)])}static marshalProof(tt){const rt=tt.map(at=>typeof at=="string"?at:buffer_1$1.Buffer.isBuffer(at)?MerkleTree.bufferToHex(at):{position:at.position,data:MerkleTree.bufferToHex(at.data)});return JSON.stringify(rt,null,2)}static unmarshalProof(tt){let rt=null;if(typeof tt=="string")rt=JSON.parse(tt);else if(tt instanceof Object)rt=tt;else throw new Error("Expected type of string or object");if(!rt)return[];if(!Array.isArray(rt))throw new Error("Expected JSON string to be array");return rt.map(at=>{if(typeof at=="string")return MerkleTree.bufferify(at);if(at instanceof Object)return{position:at.position,data:MerkleTree.bufferify(at.data)};throw new Error("Expected item to be of type string or object")})}getProofIndices(tt,rt){const at=Math.pow(2,rt);let st=new Set;for(const mt of tt){let bt=at+mt;for(;bt>1;)st.add(bt^1),bt=bt/2|0}const ot=tt.map(mt=>at+mt),lt=Array.from(st).sort((mt,bt)=>mt-bt).reverse();st=ot.concat(lt);const ut=new Set,ht=[];for(let mt of st)if(!ut.has(mt))for(ht.push(mt);mt>1&&(ut.add(mt),!!ut.has(mt^1));)mt=mt/2|0;return ht.filter(mt=>!tt.includes(mt-at))}getProofIndicesForUnevenTree(tt,rt){const at=Math.ceil(Math.log2(rt)),st=[];for(let ut=0;ut<at;ut++)rt%2!==0&&st.push({index:ut,leavesCount:rt}),rt=Math.ceil(rt/2);const ot=[];let lt=tt;for(let ut=0;ut<at;ut++){let mt=lt.map(vt=>vt%2===0?vt+1:vt-1).filter(vt=>!lt.includes(vt));const bt=st.find(({index:vt})=>vt===ut);bt&&lt.includes(bt.leavesCount-1)&&(mt=mt.slice(0,-1)),ot.push(mt),lt=[...new Set(lt.map(vt=>vt%2===0?vt/2:vt%2===0?(vt+1)/2:(vt-1)/2))]}return ot}getMultiProof(tt,rt){if(rt||(rt=tt,tt=this.getLayersFlat()),this.isUnevenTree()&&rt.every(Number.isInteger))return this.getMultiProofForUnevenTree(rt);if(!rt.every(Number.isInteger)){let st=rt;this.sortPairs&&(st=st.sort(buffer_1$1.Buffer.compare));let ot=st.map(mt=>this._bufferIndexOf(this.leaves,mt)).sort((mt,bt)=>mt===bt?0:mt>bt?1:-1);if(!ot.every(mt=>mt!==-1))throw new Error("Element does not exist in Merkle tree");const lt=[],ut=[];let ht=[];for(let mt=0;mt<this.layers.length;mt++){const bt=this.layers[mt];for(let vt=0;vt<ot.length;vt++){const At=ot[vt],xt=this._getPairNode(bt,At);lt.push(bt[At]),xt&&ut.push(xt),ht.push(At/2|0)}ot=ht.filter((vt,At,xt)=>xt.indexOf(vt)===At),ht=[]}return ut.filter(mt=>!lt.includes(mt))}return this.getProofIndices(rt,this._log2(tt.length/2|0)).map(st=>tt[st])}getMultiProofForUnevenTree(tt,rt){rt||(rt=tt,tt=this.getLayers());let at=[],st=rt;for(const ot of tt){const lt=[];for(const ht of st){if(ht%2===0){const bt=ht+1;if(!st.includes(bt)&&ot[bt]){lt.push(ot[bt]);continue}}const mt=ht-1;if(!st.includes(mt)&&ot[mt]){lt.push(ot[mt]);continue}}at=at.concat(lt);const ut=new Set;for(const ht of st){if(ht%2===0){ut.add(ht/2);continue}if(ht%2===0){ut.add((ht+1)/2);continue}ut.add((ht-1)/2)}st=Array.from(ut)}return at}getHexMultiProof(tt,rt){return this.getMultiProof(tt,rt).map(at=>this.bufferToHex(at))}getProofFlags(tt,rt){if(!Array.isArray(tt)||tt.length<=0)throw new Error("Invalid Inputs!");let at;if(tt.every(Number.isInteger)?at=tt.sort((ut,ht)=>ut===ht?0:ut>ht?1:-1):at=tt.map(ut=>this._bufferIndexOf(this.leaves,ut)).sort((ut,ht)=>ut===ht?0:ut>ht?1:-1),!at.every(ut=>ut!==-1))throw new Error("Element does not exist in Merkle tree");const st=rt.map(ut=>this.bufferify(ut)),ot=[],lt=[];for(let ut=0;ut<this.layers.length;ut++){const ht=this.layers[ut];at=at.reduce((mt,bt)=>{if(!ot.includes(ht[bt])){const At=this._getPairNode(ht,bt),xt=st.includes(ht[bt])||st.includes(At);At&&lt.push(!xt),ot.push(ht[bt]),ot.push(At)}return mt.push(bt/2|0),mt},[])}return lt}verify(tt,rt,at){let st=this.bufferify(rt);if(at=this.bufferify(at),!Array.isArray(tt)||!rt||!at)return!1;for(let ot=0;ot<tt.length;ot++){const lt=tt[ot];let ut=null,ht=null;if(typeof lt=="string")ut=this.bufferify(lt),ht=!0;else if(Array.isArray(lt))ht=lt[0]===0,ut=this.bufferify(lt[1]);else if(buffer_1$1.Buffer.isBuffer(lt))ut=lt,ht=!0;else if(lt instanceof Object)ut=this.bufferify(lt.data),ht=lt.position==="left";else throw new Error("Expected node to be of type string or object");const mt=[];this.isBitcoinTree?(mt.push(buffer_reverse_1.default(st)),mt[ht?"unshift":"push"](buffer_reverse_1.default(ut)),st=this.hashFn(buffer_1$1.Buffer.concat(mt)),st=buffer_reverse_1.default(this.hashFn(st))):this.sortPairs?buffer_1$1.Buffer.compare(st,ut)===-1?(mt.push(st,ut),st=this.hashFn(buffer_1$1.Buffer.concat(mt))):(mt.push(ut,st),st=this.hashFn(buffer_1$1.Buffer.concat(mt))):(mt.push(st),mt[ht?"unshift":"push"](ut),st=this.hashFn(buffer_1$1.Buffer.concat(mt)))}return buffer_1$1.Buffer.compare(st,at)===0}verifyMultiProof(tt,rt,at,st,ot){if(this.isUnevenTree())return this.verifyMultiProofForUnevenTree(tt,rt,at,st,ot);const ut=Math.ceil(Math.log2(st));tt=this.bufferify(tt),at=at.map(vt=>this.bufferify(vt)),ot=ot.map(vt=>this.bufferify(vt));const ht={};for(const[vt,At]of this._zip(rt,at))ht[Math.pow(2,ut)+vt]=At;for(const[vt,At]of this._zip(this.getProofIndices(rt,ut),ot))ht[vt]=At;let mt=Object.keys(ht).map(vt=>+vt).sort((vt,At)=>vt-At);mt=mt.slice(0,mt.length-1);let bt=0;for(;bt<mt.length;){const vt=mt[bt];if(vt>=2&&{}.hasOwnProperty.call(ht,vt^1)){let At=[ht[vt-vt%2],ht[vt-vt%2+1]];this.sortPairs&&(At=At.sort(buffer_1$1.Buffer.compare));const xt=At[1]?this.hashFn(buffer_1$1.Buffer.concat(At)):At[0];ht[vt/2|0]=xt,mt.push(vt/2|0)}bt+=1}return!rt.length||{}.hasOwnProperty.call(ht,1)&&ht[1].equals(tt)}verifyMultiProofWithFlags(tt,rt,at,st){tt=this.bufferify(tt),rt=rt.map(this.bufferify),at=at.map(this.bufferify);const ot=rt.length,lt=st.length,ut=[];let ht=0,mt=0,bt=0;for(let vt=0;vt<lt;vt++){const At=st[vt]?ht<ot?rt[ht++]:ut[mt++]:at[bt++],xt=ht<ot?rt[ht++]:ut[mt++],Et=[At,xt].sort(buffer_1$1.Buffer.compare);ut[vt]=this.hashFn(buffer_1$1.Buffer.concat(Et))}return buffer_1$1.Buffer.compare(ut[lt-1],tt)===0}verifyMultiProofForUnevenTree(tt,rt,at,st,ot){tt=this.bufferify(tt),at=at.map(ut=>this.bufferify(ut)),ot=ot.map(ut=>this.bufferify(ut));const lt=this.calculateRootForUnevenTree(rt,at,st,ot);return tt.equals(lt)}getDepth(){return this.getLayers().length-1}getLayersAsObject(){const tt=this.getLayers().map(at=>at.map(st=>this.bufferToHex(st,!1))),rt=[];for(let at=0;at<tt.length;at++){const st=[];for(let ot=0;ot<tt[at].length;ot++){const lt={[tt[at][ot]]:null};if(rt.length){lt[tt[at][ot]]={};const ut=rt.shift(),ht=Object.keys(ut)[0];if(lt[tt[at][ot]][ht]=ut[ht],rt.length){const mt=rt.shift(),bt=Object.keys(mt)[0];lt[tt[at][ot]][bt]=mt[bt]}}st.push(lt)}rt.push(...st)}return rt[0]}static verify(tt,rt,at,st=sha256_1$1.default,ot={}){return new MerkleTree([],st,ot).verify(tt,rt,at)}static getMultiProof(tt,rt){return new MerkleTree([]).getMultiProof(tt,rt)}resetTree(){this.leaves=[],this.layers=[]}_getPairNode(tt,rt){const at=rt%2===0?rt+1:rt-1;return at<tt.length?tt[at]:null}_toTreeString(){const tt=this.getLayersAsObject();return treeify_1.default.asTree(tt,!0)}toString(){return this._toTreeString()}isUnevenTree(tt){const rt=(tt==null?void 0:tt.length)||this.getDepth();return!this.isPowOf2(rt)}isPowOf2(tt){return tt&&!(tt&tt-1)}calculateRootForUnevenTree(tt,rt,at,st){const ot=this._zip(tt,rt).sort(([vt],[At])=>vt-At),lt=ot.map(([vt])=>vt),ut=this.getProofIndicesForUnevenTree(lt,at);let ht=0;const mt=[];for(let vt=0;vt<ut.length;vt++){const At=ut[vt],xt=ht;ht+=At.length,mt[vt]=this._zip(At,st.slice(xt,ht))}const bt=[ot];for(let vt=0;vt<mt.length;vt++){const At=mt[vt].concat(bt[vt]).sort(([wt],[Ct])=>wt-Ct).map(([,wt])=>wt),xt=bt[vt].map(([wt])=>wt),Et=[...new Set(xt.map(wt=>wt%2===0?wt/2:wt%2===0?(wt+1)/2:(wt-1)/2))],Tt=[];for(let wt=0;wt<Et.length;wt++){const Ct=Et[wt],It=At[wt*2],St=At[wt*2+1],Rt=St?this.hashFn(buffer_1$1.Buffer.concat([It,St])):It;Tt.push([Ct,Rt])}bt.push(Tt)}return bt[bt.length-1][0][1]}}MerkleTree$1.MerkleTree=MerkleTree,typeof window<"u"&&(window.MerkleTree=MerkleTree),MerkleTree$1.default=MerkleTree;var MerkleMountainRange$1={},__importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(MerkleMountainRange$1,"__esModule",{value:!0}),MerkleMountainRange$1.MerkleMountainRange=void 0;const buffer_1=buffer$2,sha256_1=__importDefault$a(sha256$1.exports),Base_1=__importDefault$a(Base$1);class MerkleMountainRange extends Base_1.default{constructor(tt=sha256_1.default,rt=[],at,st,ot){super(),this.root=buffer_1.Buffer.alloc(0),this.size=0,this.width=0,this.hashes={},this.data={},rt=rt.map(this.bufferify),this.hashFn=this.bufferifyFn(tt),this.hashLeafFn=at,this.peakBaggingFn=st,this.hashBranchFn=ot;for(const lt of rt)this.append(lt)}append(tt){tt=this.bufferify(tt);const rt=this.hashFn(tt),at=this.bufferToHex(rt);(!this.data[at]||this.bufferToHex(this.hashFn(this.data[at]))!==at)&&(this.data[at]=tt);const st=this.hashLeaf(this.size+1,rt);this.hashes[this.size+1]=st,this.width+=1;const ot=this.getPeakIndexes(this.width);this.size=this.getSize(this.width);const lt=[];for(let ut=0;ut<ot.length;ut++)lt[ut]=this._getOrCreateNode(ot[ut]);this.root=this.peakBagging(this.width,lt)}hashLeaf(tt,rt){return rt=this.bufferify(rt),this.hashLeafFn?this.bufferify(this.hashLeafFn(tt,rt)):this.hashFn(buffer_1.Buffer.concat([this.bufferify(tt),rt]))}hashBranch(tt,rt,at){return this.hashBranchFn?this.bufferify(this.hashBranchFn(tt,rt,at)):this.hashFn(buffer_1.Buffer.concat([this.bufferify(tt),this.bufferify(rt),this.bufferify(at)]))}getPeaks(){const tt=this.getPeakIndexes(this.width),rt=[];for(let at=0;at<tt.length;at++)rt[at]=this.hashes[tt[at]];return rt}getLeafIndex(tt){return tt%2===1?this.getSize(tt):this.getSize(tt-1)+1}getPeakIndexes(tt){const rt=this.numOfPeaks(tt),at=[];let st=0,ot=0;for(let lt=255;lt>0&&!((tt&1<<lt-1)!==0&&(ot=ot+(1<<lt)-1,at[st++]=ot,at.length>=rt));lt--);if(st!==at.length)throw new Error("invalid bit calculation");return at}numOfPeaks(tt){let rt=tt,at=0;for(;rt>0;)rt%2===1&&at++,rt=rt>>1;return at}peakBagging(tt,rt){const at=this.getSize(tt);if(this.numOfPeaks(tt)!==rt.length)throw new Error("received invalid number of peaks");return tt===0&&!rt.length?buffer_1.Buffer.alloc(0):this.peakBaggingFn?this.bufferify(this.peakBaggingFn(at,rt)):this.hashFn(buffer_1.Buffer.concat([this.bufferify(at),...rt.map(this.bufferify)]))}getSize(tt){return(tt<<1)-this.numOfPeaks(tt)}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.getRoot())}getNode(tt){return this.hashes[tt]}mountainHeight(tt){let rt=1;for(;1<<rt<=tt+rt;)rt++;return rt-1}heightAt(tt){let rt=tt,at=0,st=0;for(;rt>at;)rt-=(1<<st)-1,st=this.mountainHeight(rt),at=(1<<st)-1;return st-(at-rt)}isLeaf(tt){return this.heightAt(tt)===1}getChildren(tt){const rt=tt-(1<<this.heightAt(tt)-1),at=tt-1;if(rt===at)throw new Error("not a parent");return[rt,at]}getMerkleProof(tt){if(tt>this.size)throw new Error("out of range");if(!this.isLeaf(tt))throw new Error("not a leaf");const rt=this.root,at=this.width,st=this.getPeakIndexes(this.width),ot=[];let lt=0;for(let vt=0;vt<st.length;vt++)ot[vt]=this.hashes[st[vt]],st[vt]>=tt&&lt===0&&(lt=st[vt]);let ut=0,ht=0,mt=this.heightAt(lt);const bt=[];for(;lt!==tt;)mt--,[ut,ht]=this.getChildren(lt),lt=tt<=ut?ut:ht,bt[mt-1]=this.hashes[tt<=ut?ht:ut];return{root:rt,width:at,peakBagging:ot,siblings:bt}}verify(tt,rt,at,st,ot,lt){if(st=this.bufferify(st),this.getSize(rt)<at)throw new Error("index is out of range");if(!tt.equals(this.peakBagging(rt,ot)))throw new Error("invalid root hash from the peaks");let ht=0,mt;const bt=this.getPeakIndexes(rt);for(let wt=0;wt<bt.length;wt++)if(bt[wt]>=at){mt=ot[wt],ht=bt[wt];break}if(!mt)throw new Error("target not found");let vt=lt.length+1;const At=new Array(vt);let xt=0,Et=0;for(;vt>0&&(At[--vt]=ht,ht!==at);)[xt,Et]=this.getChildren(ht),ht=at>xt?Et:xt;let Tt;for(;vt<At.length;)ht=At[vt],vt===0?Tt=this.hashLeaf(ht,this.hashFn(st)):ht-1===At[vt-1]?Tt=this.hashBranch(ht,lt[vt-1],Tt):Tt=this.hashBranch(ht,Tt,lt[vt-1]),vt++;if(!Tt.equals(mt))throw new Error("hashed peak is invalid");return!0}peaksToPeakMap(tt,rt){const at={};let st=0,ot=0,lt=rt.length;for(let ut=1;ut<=32;ut++)st=32-ut,ot=1<<ut-1,(tt&ot)!==0?at[st]=rt[--lt]:at[st]=0;if(lt!==0)throw new Error("invalid number of peaks");return at}peakMapToPeaks(tt,rt){const at=this.numOfPeaks(tt),st=new Array(at);let ot=0;for(let lt=0;lt<32;lt++)rt[lt]!==0&&(st[ot++]=rt[lt]);if(ot!==at)throw new Error("invalid number of peaks");return st}peakUpdate(tt,rt,at){const st={},ot=tt+1;let lt=this.getLeafIndex(ot),ut=this.hashLeaf(lt,at),ht=0,mt=0,bt=!1,vt=!1,At=!1;for(let xt=1;xt<=32;xt++)ht=32-xt,At?st[ht]=rt[ht]:(mt=1<<xt-1,bt=(tt&mt)!==0,vt=(ot&mt)!==0,lt++,bt&&(ut=this.hashBranch(lt,rt[ht],ut)),vt?(bt?st[ht]=rt[ht]:st[ht]=ut,At=!0):st[ht]=0);return st}rollUp(tt,rt,at,st){if(!tt.equals(this.peakBagging(rt,at)))throw new Error("invalid root hash from the peaks");let ot=rt,lt=this.peaksToPeakMap(rt,at);for(let ut=0;ut<st.length;ut++)lt=this.peakUpdate(ot,lt,st[ut]),ot++;return this.peakBagging(ot,this.peakMapToPeaks(ot,lt))}_getOrCreateNode(tt){if(tt>this.size)throw new Error("out of range");if(!this.hashes[tt]){const[rt,at]=this.getChildren(tt),st=this._getOrCreateNode(rt),ot=this._getOrCreateNode(at);this.hashes[tt]=this.hashBranch(tt,st,ot)}return this.hashes[tt]}}MerkleMountainRange$1.MerkleMountainRange=MerkleMountainRange,MerkleMountainRange$1.default=MerkleMountainRange,function(it){var tt=commonjsGlobal&&commonjsGlobal.__importDefault||function(st){return st&&st.__esModule?st:{default:st}};Object.defineProperty(it,"__esModule",{value:!0}),it.MerkleTree=void 0;const rt=tt(MerkleTree$1);it.MerkleTree=rt.default;var at=MerkleMountainRange$1;Object.defineProperty(it,"MerkleMountainRange",{enumerable:!0,get:function(){return at.MerkleMountainRange}}),it.default=rt.default}(dist$4);var fastDeepEqual=function it(tt,rt){if(tt===rt)return!0;if(tt&&rt&&typeof tt=="object"&&typeof rt=="object"){if(tt.constructor!==rt.constructor)return!1;var at,st,ot;if(Array.isArray(tt)){if(at=tt.length,at!=rt.length)return!1;for(st=at;st--!==0;)if(!it(tt[st],rt[st]))return!1;return!0}if(tt.constructor===RegExp)return tt.source===rt.source&&tt.flags===rt.flags;if(tt.valueOf!==Object.prototype.valueOf)return tt.valueOf()===rt.valueOf();if(tt.toString!==Object.prototype.toString)return tt.toString()===rt.toString();if(ot=Object.keys(tt),at=ot.length,at!==Object.keys(rt).length)return!1;for(st=at;st--!==0;)if(!Object.prototype.hasOwnProperty.call(rt,ot[st]))return!1;for(st=at;st--!==0;){var lt=ot[st];if(!it(tt[lt],rt[lt]))return!1}return!0}return tt!==tt&&rt!==rt};const ERC721MetadataAbi=[{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],ERC1155MetadataAbi=[{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],DeprecatedAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"TokenURIRevealed",type:"event"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bytes",name:"key",type:"bytes"}],name:"encryptDecrypt",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"identifier",type:"uint256"}],name:"encryptedBaseURI",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"identifier",type:"uint256"},{internalType:"bytes",name:"key",type:"bytes"}],name:"reveal",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"nonpayable",type:"function"}],ContractPublisherAbi=[{inputs:[{internalType:"address",name:"_trustedForwarder",type:"address"},{internalType:"contract IContractPublisher",name:"_prevPublisher",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"publisher",type:"address"},{components:[{internalType:"string",name:"contractId",type:"string"},{internalType:"uint256",name:"publishTimestamp",type:"uint256"},{internalType:"string",name:"publishMetadataUri",type:"string"},{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"implementation",type:"address"}],indexed:!1,internalType:"struct IContractPublisher.CustomContractInstance",name:"publishedContract",type:"tuple"}],name:"ContractPublished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"publisher",type:"address"},{indexed:!0,internalType:"string",name:"contractId",type:"string"}],name:"ContractUnpublished",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"isPaused",type:"bool"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"publisher",type:"address"},{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"PublisherProfileUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"}],name:"getAllPublishedContracts",outputs:[{components:[{internalType:"string",name:"contractId",type:"string"},{internalType:"uint256",name:"publishTimestamp",type:"uint256"},{internalType:"string",name:"publishMetadataUri",type:"string"},{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IContractPublisher.CustomContractInstance[]",name:"published",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"},{internalType:"string",name:"_contractId",type:"string"}],name:"getPublishedContract",outputs:[{components:[{internalType:"string",name:"contractId",type:"string"},{internalType:"uint256",name:"publishTimestamp",type:"uint256"},{internalType:"string",name:"publishMetadataUri",type:"string"},{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IContractPublisher.CustomContractInstance",name:"published",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"},{internalType:"string",name:"_contractId",type:"string"}],name:"getPublishedContractVersions",outputs:[{components:[{internalType:"string",name:"contractId",type:"string"},{internalType:"uint256",name:"publishTimestamp",type:"uint256"},{internalType:"string",name:"publishMetadataUri",type:"string"},{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IContractPublisher.CustomContractInstance[]",name:"published",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"compilerMetadataUri",type:"string"}],name:"getPublishedUriFromCompilerUri",outputs:[{internalType:"string[]",name:"publishedMetadataUris",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"publisher",type:"address"}],name:"getPublisherProfileUri",outputs:[{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"prevPublisher",outputs:[{internalType:"contract IContractPublisher",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"},{internalType:"string",name:"_contractId",type:"string"},{internalType:"string",name:"_publishMetadataUri",type:"string"},{internalType:"string",name:"_compilerMetadataUri",type:"string"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"address",name:"_implementation",type:"address"}],name:"publishContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_pause",type:"bool"}],name:"setPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"publisher",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"setPublisherProfileUri",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_publisher",type:"address"},{internalType:"string",name:"_contractId",type:"string"}],name:"unpublishContract",outputs:[],stateMutability:"nonpayable",type:"function"}],TWRegistryABI=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployer",type:"address"},{indexed:!0,internalType:"address",name:"deployment",type:"address"},{indexed:!0,internalType:"uint256",name:"chainId",type:"uint256"},{indexed:!1,internalType:"string",name:"metadataUri",type:"string"}],name:"Added",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployer",type:"address"},{indexed:!0,internalType:"address",name:"deployment",type:"address"},{indexed:!0,internalType:"uint256",name:"chainId",type:"uint256"}],name:"Deleted",type:"event"},{inputs:[],name:"OPERATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"_msgData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"_msgSender",outputs:[{internalType:"address",name:"sender",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_deployment",type:"address"},{internalType:"uint256",name:"_chainId",type:"uint256"},{internalType:"string",name:"metadataUri",type:"string"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"}],name:"count",outputs:[{internalType:"uint256",name:"deploymentCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"}],name:"getAll",outputs:[{components:[{internalType:"address",name:"deploymentAddress",type:"address"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"string",name:"metadataURI",type:"string"}],internalType:"struct ITWMultichainRegistry.Deployment[]",name:"allDeployments",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_chainId",type:"uint256"},{internalType:"address",name:"_deployment",type:"address"}],name:"getMetadataUri",outputs:[{internalType:"string",name:"metadataUri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_deployment",type:"address"},{internalType:"uint256",name:"_chainId",type:"uint256"}],name:"remove",outputs:[],stateMutability:"nonpayable",type:"function"}],TWRegistryRouterABI=[{inputs:[{internalType:"address",name:"_pluginMap",type:"address"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"string",name:"functionSignature",type:"string"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"oldPluginAddress",type:"address"},{indexed:!0,internalType:"address",name:"newPluginAddress",type:"address"}],name:"PluginUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"_getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"_plugin",type:"tuple"}],name:"addPlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pluginAddress",type:"address"}],name:"getAllFunctionsOfPlugin",outputs:[{internalType:"bytes4[]",name:"registered",type:"bytes4[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pluginMap",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"removePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"_plugin",type:"tuple"}],name:"updatePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],TWFactoryAbi=[{inputs:[{internalType:"address",name:"_trustedForwarder",type:"address"},{internalType:"address",name:"_registry",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"implementation",type:"address"},{indexed:!0,internalType:"bytes32",name:"contractType",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"}],name:"ImplementationAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"implementation",type:"address"},{indexed:!1,internalType:"bool",name:"isApproved",type:"bool"}],name:"ImplementationApproved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"},{indexed:!1,internalType:"address",name:"proxy",type:"address"},{indexed:!0,internalType:"address",name:"deployer",type:"address"}],name:"ProxyDeployed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"FACTORY_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_implementation",type:"address"}],name:"addImplementation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"approval",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_implementation",type:"address"},{internalType:"bool",name:"_toApprove",type:"bool"}],name:"approveImplementation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"currentVersion",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_type",type:"bytes32"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"deployProxy",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_implementation",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"bytes32",name:"_salt",type:"bytes32"}],name:"deployProxyByImplementation",outputs:[{internalType:"address",name:"deployedProxy",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_type",type:"bytes32"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"bytes32",name:"_salt",type:"bytes32"}],name:"deployProxyDeterministic",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"deployer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_type",type:"bytes32"},{internalType:"uint256",name:"_version",type:"uint256"}],name:"getImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_type",type:"bytes32"}],name:"getLatestImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"registry",outputs:[{internalType:"contract TWRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],TWRegistryABI$1=[{inputs:[{internalType:"address",name:"_trustedForwarder",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployer",type:"address"},{indexed:!0,internalType:"address",name:"deployment",type:"address"}],name:"Added",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployer",type:"address"},{indexed:!0,internalType:"address",name:"deployment",type:"address"}],name:"Deleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"OPERATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_deployment",type:"address"}],name:"add",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"}],name:"count",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"}],name:"getAll",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_deployment",type:"address"}],name:"remove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}];function _checkPrivateRedeclaration$2(it,tt){if(tt.has(it))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldInitSpec$2(it,tt,rt){_checkPrivateRedeclaration$2(it,tt),tt.set(it,rt)}function _classApplyDescriptorGet$2(it,tt){return tt.get?tt.get.call(it):tt.value}function _classExtractFieldDescriptor$2(it,tt,rt){if(!tt.has(it))throw new TypeError("attempted to "+rt+" private field on non-instance");return tt.get(it)}function _classPrivateFieldGet$2(it,tt){var rt=_classExtractFieldDescriptor$2(it,tt,"get");return _classApplyDescriptorGet$2(it,rt)}function _classApplyDescriptorSet$2(it,tt,rt){if(tt.set)tt.set.call(it,rt);else{if(!tt.writable)throw new TypeError("attempted to set read only private field");tt.value=rt}}function _classPrivateFieldSet$2(it,tt,rt){var at=_classExtractFieldDescriptor$2(it,tt,"set");return _classApplyDescriptorSet$2(it,at,rt),rt}let ChainId$1;(function(it){it[it.Mainnet=1]="Mainnet",it[it.Goerli=5]="Goerli",it[it.Polygon=137]="Polygon",it[it.Mumbai=80001]="Mumbai",it[it.Localhost=1337]="Localhost",it[it.Hardhat=31337]="Hardhat",it[it.Fantom=250]="Fantom",it[it.FantomTestnet=4002]="FantomTestnet",it[it.Avalanche=43114]="Avalanche",it[it.AvalancheFujiTestnet=43113]="AvalancheFujiTestnet",it[it.Optimism=10]="Optimism",it[it.OptimismGoerli=420]="OptimismGoerli",it[it.Arbitrum=42161]="Arbitrum",it[it.ArbitrumGoerli=421613]="ArbitrumGoerli",it[it.BinanceSmartChainMainnet=56]="BinanceSmartChainMainnet",it[it.BinanceSmartChainTestnet=97]="BinanceSmartChainTestnet"})(ChainId$1||(ChainId$1={}));const SUPPORTED_CHAIN_IDS=[ChainId$1.Mainnet,ChainId$1.Goerli,ChainId$1.Polygon,ChainId$1.Mumbai,ChainId$1.Fantom,ChainId$1.FantomTestnet,ChainId$1.Avalanche,ChainId$1.AvalancheFujiTestnet,ChainId$1.Optimism,ChainId$1.OptimismGoerli,ChainId$1.Arbitrum,ChainId$1.ArbitrumGoerli,ChainId$1.BinanceSmartChainMainnet,ChainId$1.BinanceSmartChainTestnet,ChainId$1.Hardhat,ChainId$1.Localhost];let supportedChains$1=defaultChains$1;function setSupportedChains(it){it&&it.length>0?supportedChains$1=it:supportedChains$1=defaultChains$1}function getSupportedChains(){return supportedChains$1}const LOCAL_NODE_PKEY="0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80",OZ_DEFENDER_FORWARDER_ADDRESS="0xc82BbE41f2cF04e3a8efA18F7032BDD7f6d98a81",TWRegistry_address="0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",TWFactory_address="0x5DBC7B840baa9daBcBe9D2492E45D7244B54A2A0",ContractPublisher_address="0x664244560eBa21Bf82d7150C791bE1AbcD5B4cd7",MultichainRegistry_address="0xcdAD8FA86e18538aC207872E8ff3536501431B73",CONTRACT_ADDRESSES={[ChainId$1.Mainnet]:{openzeppelinForwarder:OZ_DEFENDER_FORWARDER_ADDRESS,openzeppelinForwarderEOA:"0x76ce2CB1Ae48Fa067f4fb8c5f803111AE0B24BEA",biconomyForwarder:"0x84a0856b038eaAd1cC7E297cF34A7e72685A8693",twFactory:TWFactory_address,twRegistry:TWRegistry_address,twBYOCRegistry:AddressZero},[ChainId$1.Goerli]:{openzeppelinForwarder:"0x5001A14CA6163143316a7C614e30e6041033Ac20",openzeppelinForwarderEOA:"0xe73c50cB9c5B378627ff625BB6e6725A4A5D65d2",biconomyForwarder:"0xE041608922d06a4F26C0d4c27d8bCD01daf1f792",twFactory:TWFactory_address,twRegistry:TWRegistry_address,twBYOCRegistry:"0xB1Bd9d7942A250BA2Dce27DD601F2ED4211A60C4"},[ChainId$1.Polygon]:{openzeppelinForwarder:OZ_DEFENDER_FORWARDER_ADDRESS,openzeppelinForwarderEOA:"0x4f247c69184ad61036EC2Bb3213b69F10FbEDe1F",biconomyForwarder:"0x86C80a8aa58e0A4fa09A69624c31Ab2a6CAD56b8",twFactory:TWFactory_address,twRegistry:TWRegistry_address,twBYOCRegistry:"0x308473Be900F4185A56587dE54bDFF5E8f7a6AE7"},[ChainId$1.Mumbai]:{openzeppelinForwarder:OZ_DEFENDER_FORWARDER_ADDRESS,openzeppelinForwarderEOA:"0xb1A2883fc4d287d9cB8Dbb96cFF60C76BEf2D250",biconomyForwarder:"0x9399BB24DBB5C4b782C70c2969F58716Ebbd6a3b",twFactory:TWFactory_address,twRegistry:TWRegistry_address,twBYOCRegistry:"0x3F17972CB27506eb4a6a3D59659e0B57a43fd16C"},[ChainId$1.Avalanche]:{openzeppelinForwarder:OZ_DEFENDER_FORWARDER_ADDRESS,openzeppelinForwarderEOA:"0xb1A2883fc4d287d9cB8Dbb96cFF60C76BEf2D250",biconomyForwarder:"0x64CD353384109423a966dCd3Aa30D884C9b2E057",twFactory:TWFactory_address,twRegistry:TWRegistry_address,twBYOCRegistry:AddressZero},[ChainId$1.AvalancheFujiTestnet]:{openzeppelinForwarder:OZ_DEFENDER_FORWARDER_ADDRESS,openzeppelinForwarderEOA:"0xe73c50cB9c5B378627ff625BB6e6725A4A5D65d2",biconomyForwarder:"0x6271Ca63D30507f2Dcbf99B52787032506D75BBF",twFactory:TWFactory_address,twRegistry:TWRegistry_address,twBYOCRegistry:"0x3E6eE864f850F5e5A98bc950B68E181Cf4010F23"},[ChainId$1.Fantom]:{openzeppelinForwarder:OZ_DEFENDER_FORWARDER_ADDRESS,openzeppelinForwarderEOA:"0xb1A2883fc4d287d9cB8Dbb96cFF60C76BEf2D250",biconomyForwarder:"0x64CD353384109423a966dCd3Aa30D884C9b2E057",twFactory:"0x97EA0Fcc552D5A8Fb5e9101316AAd0D62Ea0876B",twRegistry:TWRegistry_address,twBYOCRegistry:AddressZero},[ChainId$1.FantomTestnet]:{openzeppelinForwarder:OZ_DEFENDER_FORWARDER_ADDRESS,openzeppelinForwarderEOA:"0x42D3048b595B6e1c28a588d70366CcC2AA4dB47b",biconomyForwarder:"0x69FB8Dca8067A5D38703b9e8b39cf2D51473E4b4",twFactory:TWFactory_address,twRegistry:TWRegistry_address,twBYOCRegistry:"0x3E6eE864f850F5e5A98bc950B68E181Cf4010F23"},[ChainId$1.Arbitrum]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x4f247c69184ad61036EC2Bb3213b69F10FbEDe1F",biconomyForwarder:"0xfe0fa3C06d03bDC7fb49c892BbB39113B534fB57",twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",twBYOCRegistry:AddressZero},[ChainId$1.ArbitrumGoerli]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x119704314Ef304EaAAE4b3c7C9ABd59272A28310",biconomyForwarder:AddressZero,twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",twBYOCRegistry:AddressZero},[ChainId$1.Optimism]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x7e80648EB2071E26937F9D42A513ccf4815fc702",biconomyForwarder:"0xefba8a2a82ec1fb1273806174f5e28fbb917cf95",twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",twBYOCRegistry:AddressZero},[ChainId$1.OptimismGoerli]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x119704314Ef304EaAAE4b3c7C9ABd59272A28310",biconomyForwarder:AddressZero,twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd",twBYOCRegistry:AddressZero},[ChainId$1.BinanceSmartChainMainnet]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0xE8dd2Ff0212F86d3197b4AfDC6dAC6ac47eb10aC",biconomyForwarder:"0x86C80a8aa58e0A4fa09A69624c31Ab2a6CAD56b8",twBYOCRegistry:AddressZero,twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd"},[ChainId$1.BinanceSmartChainTestnet]:{openzeppelinForwarder:"0x8cbc8B5d71702032904750A66AEfE8B603eBC538",openzeppelinForwarderEOA:"0x7e80648EB2071E26937F9D42A513ccf4815fc702",biconomyForwarder:"0x61456BF1715C1415730076BB79ae118E806E74d2",twBYOCRegistry:AddressZero,twFactory:"0xd24b3de085CFd8c54b94feAD08a7962D343E6DE0",twRegistry:"0x7c487845f98938Bb955B1D5AD069d9a30e4131fd"},[ChainId$1.Hardhat]:{openzeppelinForwarder:AddressZero,openzeppelinForwarderEOA:AddressZero,biconomyForwarder:AddressZero,twFactory:AddressZero,twRegistry:AddressZero,twBYOCRegistry:AddressZero},[ChainId$1.Localhost]:{openzeppelinForwarder:AddressZero,openzeppelinForwarderEOA:AddressZero,biconomyForwarder:AddressZero,twFactory:AddressZero,twRegistry:AddressZero,twBYOCRegistry:AddressZero}},APPROVED_IMPLEMENTATIONS={[ChainId$1.Mainnet]:{"nft-drop":"0x60fF9952e0084A6DEac44203838cDC91ABeC8736","edition-drop":"0x74af262d0671F378F97a1EDC3d0970Dbe8A1C550","token-drop":"0xE1eE43D23f247b6A9aF81fcE2766E76709482728","signature-drop":"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A"},[ChainId$1.Polygon]:{"nft-drop":"0xB96508050Ba0925256184103560EBADA912Fcc69","edition-drop":"0x74af262d0671F378F97a1EDC3d0970Dbe8A1C550","token-drop":"0x5A8eA4Adad8289746D073947BA06D69A62499aaf","signature-drop":"0xBE2fDc35410E268e41Bec62DBb01AEb43245c7d5"},[ChainId$1.Fantom]:{"nft-drop":"0x2A396b2D90BAcEF19cDa973586B2633d22710fC2","edition-drop":"0x06395FCF9AC6ED827f9dD6e776809cEF1Be0d21B","token-drop":"0x0148b28a38efaaC31b6aa0a6D9FEb70FE7C91FFa","signature-drop":"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10"},[ChainId$1.Avalanche]:{"nft-drop":"0x9cF91118C8ee2913F0588e0F10e36B3d63F68bF6","edition-drop":"0x135fC9D26E5eC51260ece1DF4ED424E2f55c7766","token-drop":"0xca0B071899E575BA86495D46c5066971b6f3A901","signature-drop":"0x1d47526C3292B0130ef0afD5F02c1DA052A017B3"},[ChainId$1.Optimism]:{"nft-drop":"0xFBd7D24d80ee005671E731a7287DEB6073264dD1","edition-drop":"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10","token-drop":"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE","signature-drop":"0x8a4cd3549e548bbEEb38C16E041FFf040a5acabD"},[ChainId$1.Arbitrum]:{"nft-drop":"0xC4903c1Ff5367b9ac2c349B63DC2409421AaEE2a","edition-drop":"0xCcddcec1831646Beff2753249f1B9C580327E89F","token-drop":"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9","signature-drop":"0x2dF9851af45dd41C8584ac55D983C604da985Bc7"},[ChainId$1.BinanceSmartChainMainnet]:{"nft-drop":"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE","edition-drop":"0x2A396b2D90BAcEF19cDa973586B2633d22710fC2","token-drop":"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10","signature-drop":"0xFBd7D24d80ee005671E731a7287DEB6073264dD1"},[ChainId$1.Goerli]:{"nft-drop":"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C","edition-drop":"0x5A8eA4Adad8289746D073947BA06D69A62499aaf","token-drop":"0x5680933221B752EB443654a014f88B101F868d50","signature-drop":"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9"},[ChainId$1.Mumbai]:{"nft-drop":"0xC4903c1Ff5367b9ac2c349B63DC2409421AaEE2a","edition-drop":"0xCcddcec1831646Beff2753249f1B9C580327E89F","token-drop":"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9","signature-drop":"0x2dF9851af45dd41C8584ac55D983C604da985Bc7"},[ChainId$1.FantomTestnet]:{"nft-drop":"0x8a4cd3549e548bbEEb38C16E041FFf040a5acabD","edition-drop":"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE","token-drop":"0xFBd7D24d80ee005671E731a7287DEB6073264dD1","signature-drop":"0x5A8eA4Adad8289746D073947BA06D69A62499aaf"},[ChainId$1.AvalancheFujiTestnet]:{"nft-drop":"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C","edition-drop":"0xE1eE43D23f247b6A9aF81fcE2766E76709482728","token-drop":"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A","signature-drop":"0xCcddcec1831646Beff2753249f1B9C580327E89F"},[ChainId$1.OptimismGoerli]:{"nft-drop":"0xCcddcec1831646Beff2753249f1B9C580327E89F","edition-drop":"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A","token-drop":"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C","signature-drop":"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9"},[ChainId$1.ArbitrumGoerli]:{"nft-drop":"0x9CfE807a5b124b962064Fa8F7FD823Cc701255b6","edition-drop":"0x9cF91118C8ee2913F0588e0F10e36B3d63F68bF6","token-drop":"0x1d47526C3292B0130ef0afD5F02c1DA052A017B3","signature-drop":"0xE1eE43D23f247b6A9aF81fcE2766E76709482728"},[ChainId$1.BinanceSmartChainTestnet]:{"nft-drop":"","edition-drop":"","token-drop":"","signature-drop":""},[ChainId$1.Hardhat]:{"nft-drop":"","edition-drop":"","token-drop":"","signature-drop":""},[ChainId$1.Localhost]:{"nft-drop":"","edition-drop":"","token-drop":"","signature-drop":""}};function getApprovedImplementation(it,tt){if(it in APPROVED_IMPLEMENTATIONS){const rt=APPROVED_IMPLEMENTATIONS[it];if(tt in rt)return rt[tt]}return null}function getContractAddressByChainId(it,tt){var rt;return it===ChainId$1.Hardhat||it===ChainId$1.Localhost?tt==="twFactory"?{}.factoryAddress:tt==="twRegistry"?{}.registryAddress:AddressZero:(rt=CONTRACT_ADDRESSES[it])==null?void 0:rt[tt]}function getContractPublisherAddress(){return{}.contractPublisherAddress?{}.contractPublisherAddress:ContractPublisher_address}function getMultichainRegistryAddress(){return{}.multiChainRegistryAddress?{}.multiChainRegistryAddress:MultichainRegistry_address}function getDefaultTrustedForwarders(it){const tt=SUPPORTED_CHAIN_IDS.find(st=>st===it),rt=tt?CONTRACT_ADDRESSES[tt].biconomyForwarder:AddressZero,at=tt?CONTRACT_ADDRESSES[tt].openzeppelinForwarder:AddressZero;return rt!==AddressZero?[at,rt]:[at]}const InterfaceId_IERC721=arrayify("0x80ac58cd"),InterfaceId_IERC1155=arrayify("0xd9b67a26"),NATIVE_TOKEN_ADDRESS="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",NATIVE_TOKENS={[ChainId$1.Mainnet]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",name:"Wrapped Ether",symbol:"WETH"}},[ChainId$1.Goerli]:{name:"G\xF6rli Ether",symbol:"GOR",decimals:18,wrapped:{address:"0xb4fbf271143f4fbf7b91a5ded31805e42b2208d6",name:"Wrapped Ether",symbol:"WETH"}},[ChainId$1.Polygon]:{name:"Matic",symbol:"MATIC",decimals:18,wrapped:{address:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",name:"Wrapped Matic",symbol:"WMATIC"}},[ChainId$1.Mumbai]:{name:"Matic",symbol:"MATIC",decimals:18,wrapped:{address:"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889",name:"Wrapped Matic",symbol:"WMATIC"}},[ChainId$1.Avalanche]:{name:"Avalanche",symbol:"AVAX",decimals:18,wrapped:{address:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",name:"Wrapped AVAX",symbol:"WAVAX"}},[ChainId$1.AvalancheFujiTestnet]:{name:"Avalanche",symbol:"AVAX",decimals:18,wrapped:{address:"0xd00ae08403B9bbb9124bB305C09058E32C39A48c",name:"Wrapped AVAX",symbol:"WAVAX"}},[ChainId$1.Fantom]:{name:"Fantom",symbol:"FTM",decimals:18,wrapped:{address:"0x21be370D5312f44cB42ce377BC9b8a0cEF1A4C83",name:"Wrapped Fantom",symbol:"WFTM"}},[ChainId$1.FantomTestnet]:{name:"Fantom",symbol:"FTM",decimals:18,wrapped:{address:"0xf1277d1Ed8AD466beddF92ef448A132661956621",name:"Wrapped Fantom",symbol:"WFTM"}},[ChainId$1.Arbitrum]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",name:"Wrapped Ether",symbol:"WETH"}},[ChainId$1.ArbitrumGoerli]:{name:"Arbitrum Goerli Ether",symbol:"AGOR",decimals:18,wrapped:{address:"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3",name:"Wrapped Ether",symbol:"WETH"}},[ChainId$1.Optimism]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x4200000000000000000000000000000000000006",name:"Wrapped Ether",symbol:"WETH"}},[ChainId$1.OptimismGoerli]:{name:"Goerli Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x4200000000000000000000000000000000000006",name:"Wrapped Ether",symbol:"WETH"}},[ChainId$1.BinanceSmartChainMainnet]:{name:"Binance Chain Native Token",symbol:"BNB",decimals:18,wrapped:{address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",name:"Wrapped Binance Chain Token",symbol:"WBNB"}},[ChainId$1.BinanceSmartChainTestnet]:{name:"Binance Chain Native Token",symbol:"TBNB",decimals:18,wrapped:{address:"0xae13d989daC2f0dEbFf460aC112a837C89BAa7cd",name:"Wrapped Binance Chain Testnet Token",symbol:"WBNB"}},[ChainId$1.Hardhat]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x5FbDB2315678afecb367f032d93F642f64180aa3",name:"Wrapped Ether",symbol:"WETH"}},[ChainId$1.Localhost]:{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0x5FbDB2315678afecb367f032d93F642f64180aa3",name:"Wrapped Ether",symbol:"WETH"}}};function getNativeTokenByChainId(it){const tt=getSupportedChains().find(rt=>rt.chainId===it);return tt&&tt.nativeCurrency?{name:tt.nativeCurrency.name,symbol:tt.nativeCurrency.symbol,decimals:18,wrapped:{address:AddressZero,name:`Wrapped ${tt.nativeCurrency.name}`,symbol:`W${tt.nativeCurrency.symbol}`}}:NATIVE_TOKENS[it]||{name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:AddressZero,name:"Wrapped Ether",symbol:"WETH"}}}const LINK_TOKEN_ADDRESS={[ChainId$1.Mainnet]:"0x514910771AF9Ca656af840dff83E8264EcF986CA",[ChainId$1.Goerli]:"0x326C977E6efc84E512bB9C30f76E30c160eD06FB",[ChainId$1.BinanceSmartChainMainnet]:"0x404460C6A5EdE2D891e8297795264fDe62ADBB75",[ChainId$1.Polygon]:"0xb0897686c545045aFc77CF20eC7A532E3120E0F1",[ChainId$1.Mumbai]:"0x326C977E6efc84E512bB9C30f76E30c160eD06FB",[ChainId$1.Avalanche]:"0x5947BB275c521040051D82396192181b413227A3",[ChainId$1.AvalancheFujiTestnet]:"0x0b9d5D9136855f6FEc3c0993feE6E9CE8a297846",[ChainId$1.Fantom]:"0x6F43FF82CCA38001B6699a8AC47A2d0E66939407",[ChainId$1.FantomTestnet]:"0xfaFedb041c0DD4fA2Dc0d87a6B0979Ee6FA7af5F"};let EventType;(function(it){it.Transaction="transaction",it.Signature="signature"})(EventType||(EventType={}));const DEFAULT_BATCH_TIME_LIMIT_MS=50,DEFAULT_BATCH_SIZE_LIMIT=250,DEFAULT_BATCH_OPTIONS={timeLimitMs:DEFAULT_BATCH_TIME_LIMIT_MS,sizeLimit:DEFAULT_BATCH_SIZE_LIMIT};class StaticJsonRpcBatchProvider extends StaticJsonRpcProvider{constructor(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:DEFAULT_BATCH_OPTIONS;super(tt,rt),_defineProperty$4(this,"_timeLimitMs",void 0),_defineProperty$4(this,"_sizeLimit",void 0),_defineProperty$4(this,"_pendingBatchAggregator",void 0),_defineProperty$4(this,"_pendingBatch",void 0),this._timeLimitMs=at.timeLimitMs||DEFAULT_BATCH_SIZE_LIMIT,this._sizeLimit=at.sizeLimit||DEFAULT_BATCH_TIME_LIMIT_MS,this._pendingBatchAggregator=null,this._pendingBatch=null}sendCurrentBatch(tt){this._pendingBatchAggregator&&clearTimeout(this._pendingBatchAggregator);const rt=this._pendingBatch||[];this._pendingBatch=null,this._pendingBatchAggregator=null;const at=rt.map(st=>st.request);return this.emit("debug",{action:"requestBatch",request:deepCopy(tt),provider:this}),fetchJson(this.connection,JSON.stringify(at)).then(st=>{this.emit("debug",{action:"response",request:at,response:st,provider:this}),rt.forEach((ot,lt)=>{const ut=st[lt];if(ut)if(ut.error){const ht=new Error(ut.error.message);ht.code=ut.error.code,ht.data=ut.error.data,ot.reject(ht)}else ot.resolve(ut.result);else ot.reject(new Error("No response for request"))})},st=>{this.emit("debug",{action:"response",error:st,request:at,provider:this}),rt.forEach(ot=>{ot.reject(st)})})}send(tt,rt){const at={method:tt,params:rt,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch===null&&(this._pendingBatch=[]);const st={request:at,resolve:null,reject:null},ot=new Promise((lt,ut)=>{st.resolve=lt,st.reject=ut});return this._pendingBatch.length===this._sizeLimit&&this.sendCurrentBatch(at),this._pendingBatch.push(st),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{this.sendCurrentBatch(at)},this._timeLimitMs)),ot}}const BigNumberSchema=z$6.union([z$6.string(),z$6.number(),z$6.bigint(),z$6.custom(it=>BigNumber.isBigNumber(it))]).transform(it=>BigNumber.from(it)),BigNumberishSchema=BigNumberSchema.transform(it=>it.toString()),BigNumberTransformSchema=z$6.union([z$6.bigint(),z$6.custom(it=>BigNumber.isBigNumber(it))]).transform(it=>BigNumber.from(it).toString()),AddressSchema=z$6.string().refine(it=>isAddress(it),it=>({message:`${it} is not a valid address`})),RawDateSchema$1=z$6.date().transform(it=>BigNumber.from(Math.floor(it.getTime()/1e3))),StartDateSchema=RawDateSchema$1.default(new Date(0)),EndDateSchema=RawDateSchema$1.default(new Date(Date.now()+1e3*60*60*24*365*10)),CallOverrideSchema=z$6.object({gasLimit:BigNumberishSchema.optional(),gasPrice:BigNumberishSchema.optional(),maxFeePerGas:BigNumberishSchema.optional(),maxPriorityFeePerGas:BigNumberishSchema.optional(),nonce:BigNumberishSchema.optional(),value:BigNumberishSchema.optional(),blockTag:z$6.union([z$6.string(),z$6.number()]).optional(),from:AddressSchema.optional(),type:z$6.number().optional()}).strict(),ChainInfoInputSchema=z$6.object({rpc:z$6.array(z$6.string().url()),chainId:z$6.number(),nativeCurrency:z$6.object({name:z$6.string(),symbol:z$6.string(),decimals:z$6.number()}),slug:z$6.string()}),SDKOptionsSchema=z$6.object({supportedChains:z$6.array(ChainInfoInputSchema).default(defaultChains$1),thirdwebApiKey:z$6.string().optional().default(DEFAULT_API_KEY$3),alchemyApiKey:z$6.string().optional().optional(),infuraApiKey:z$6.string().optional().optional(),readonlySettings:z$6.object({rpcUrl:z$6.string().url(),chainId:z$6.number().optional()}).optional(),gasSettings:z$6.object({maxPriceInGwei:z$6.number().min(1,"gas price cannot be less than 1").default(300),speed:z$6.enum(["standard","fast","fastest"]).default("fastest")}).default({maxPriceInGwei:300,speed:"fastest"}),gasless:z$6.union([z$6.object({openzeppelin:z$6.object({relayerUrl:z$6.string().url(),relayerForwarderAddress:z$6.string().optional(),useEOAForwarder:z$6.boolean().default(!1)}),experimentalChainlessSupport:z$6.boolean().default(!1)}),z$6.object({biconomy:z$6.object({apiId:z$6.string(),apiKey:z$6.string(),deadlineSeconds:z$6.number().min(1,"deadlineSeconds cannot be les than 1").default(3600)})})]).optional(),gatewayUrls:z$6.array(z$6.string()).optional()}).default({gasSettings:{maxPriceInGwei:300,speed:"fastest"}}),CurrencySchema=z$6.object({name:z$6.string(),symbol:z$6.string(),decimals:z$6.number()}),CurrencyValueSchema=CurrencySchema.extend({value:BigNumberSchema,displayValue:z$6.string()}),MerkleSchema=z$6.object({merkle:z$6.record(z$6.string()).default({})}),SnapshotEntryInput=z$6.object({address:AddressSchema,maxClaimable:QuantitySchema.default(0),price:QuantitySchema.optional(),currencyAddress:AddressSchema.default(AddressZero).optional()}),SnapshotInputSchema=z$6.union([z$6.array(z$6.string()).transform(it=>it.map(tt=>SnapshotEntryInput.parse({address:tt}))),z$6.array(SnapshotEntryInput)]),SnapshotEntryWithProofSchema=SnapshotEntryInput.extend({proof:z$6.array(z$6.string())}),SnapshotSchema=z$6.object({merkleRoot:z$6.string(),claims:z$6.array(SnapshotEntryWithProofSchema)});z$6.object({merkleRoot:z$6.string(),snapshotUri:z$6.string()});const ClaimConditionMetadataSchema=z$6.object({name:z$6.string().optional()}).catchall(z$6.unknown()),ClaimConditionInputSchema=z$6.object({startTime:StartDateSchema,currencyAddress:z$6.string().default(NATIVE_TOKEN_ADDRESS),price:AmountSchema.default(0),maxClaimableSupply:QuantitySchema,maxClaimablePerWallet:QuantitySchema,waitInSeconds:BigNumberishSchema.default(0),merkleRootHash:BytesLikeSchema.default(hexZeroPad([0],32)),snapshot:z$6.optional(SnapshotInputSchema).nullable(),metadata:ClaimConditionMetadataSchema.optional()}),ClaimConditionInputArray=z$6.array(ClaimConditionInputSchema);ClaimConditionInputSchema.partial();const ClaimConditionOutputSchema=ClaimConditionInputSchema.extend({availableSupply:QuantitySchema,currentMintSupply:QuantitySchema,currencyMetadata:CurrencyValueSchema.default({value:BigNumber.from("0"),displayValue:"0",symbol:"",decimals:18,name:""}),price:BigNumberSchema,waitInSeconds:BigNumberSchema,startTime:BigNumberSchema.transform(it=>new Date(it.toNumber()*1e3)),snapshot:SnapshotInputSchema.optional().nullable()});function resolveOrGenerateId(it){if(it===void 0){const tt=Buffer.alloc(16);return v4({},tt),hexlify(toUtf8Bytes(tt.toString("hex")))}else return hexlify(it)}const BaseSignaturePayloadInput=z$6.object({to:z$6.string().refine(it=>it.toLowerCase()!==AddressZero,{message:"Cannot create payload to mint to zero address"}),price:AmountSchema.default(0),currencyAddress:z$6.string().default(NATIVE_TOKEN_ADDRESS),mintStartTime:StartDateSchema,mintEndTime:EndDateSchema,uid:z$6.string().optional().transform(it=>resolveOrGenerateId(it)),primarySaleRecipient:z$6.string().default(AddressZero)}),Signature20PayloadInput=BaseSignaturePayloadInput.extend({quantity:AmountSchema}),Signature20PayloadOutput=Signature20PayloadInput.extend({mintStartTime:BigNumberSchema,mintEndTime:BigNumberSchema}),Signature721PayloadInput=BaseSignaturePayloadInput.extend({metadata:NFTInputOrUriSchema,royaltyRecipient:z$6.string().default(AddressZero),royaltyBps:BasisPointsSchema.default(0)}),Signature721PayloadOutput=Signature721PayloadInput.extend({uri:z$6.string(),royaltyBps:BigNumberSchema,mintStartTime:BigNumberSchema,mintEndTime:BigNumberSchema}),Signature1155PayloadInput=Signature721PayloadInput.extend({metadata:NFTInputOrUriSchema.default(""),quantity:BigNumberishSchema}),Signature1155PayloadInputWithTokenId=Signature1155PayloadInput.extend({tokenId:BigNumberishSchema}),Signature1155PayloadOutput=Signature721PayloadOutput.extend({tokenId:BigNumberSchema,quantity:BigNumberSchema}),Signature721WithQuantityInput=Signature721PayloadInput.extend({metadata:NFTInputOrUriSchema.default(""),quantity:BigNumberSchema.default(1)}),Signature721WithQuantityOutput=Signature721PayloadOutput.extend({quantity:BigNumberSchema.default(1)}),MintRequest20=[{name:"to",type:"address"},{name:"primarySaleRecipient",type:"address"},{name:"quantity",type:"uint256"},{name:"price",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],MintRequest721=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"uri",type:"string"},{name:"price",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],MintRequest1155=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"tokenId",type:"uint256"},{name:"uri",type:"string"},{name:"quantity",type:"uint256"},{name:"pricePerToken",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],MintRequest721withQuantity=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"uri",type:"string"},{name:"quantity",type:"uint256"},{name:"pricePerToken",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],GenericRequest=[{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"},{name:"data",type:"bytes"}],CommonContractSchema=z$6.object({name:z$6.string(),description:z$6.string().optional(),image:FileOrBufferOrStringSchema.optional(),external_link:z$6.string().optional(),app_uri:z$6.string().optional()}),CommonContractOutputSchema=CommonContractSchema.extend({image:z$6.string().optional()}).catchall(z$6.unknown()),CommonRoyaltySchema=z$6.object({seller_fee_basis_points:BasisPointsSchema.default(0),fee_recipient:AddressSchema.default(AddressZero)}),CommonPrimarySaleSchema=z$6.object({primary_sale_recipient:AddressSchema}),CommonPlatformFeeSchema=z$6.object({platform_fee_basis_points:BasisPointsSchema.default(0),platform_fee_recipient:AddressSchema.default(AddressZero)}),CommonTrustedForwarderSchema=z$6.object({trusted_forwarders:z$6.array(AddressSchema).default([])}),CommonSymbolSchema=z$6.object({symbol:z$6.string().optional().default("")}),DropErc721ContractInput=CommonContractSchema.merge(CommonRoyaltySchema).merge(MerkleSchema).merge(CommonSymbolSchema),DropErc721ContractOutput=CommonContractOutputSchema.merge(CommonRoyaltySchema).merge(MerkleSchema).merge(CommonSymbolSchema),DropErc721ContractDeploy=DropErc721ContractInput.merge(CommonPlatformFeeSchema).merge(CommonPrimarySaleSchema).merge(CommonTrustedForwarderSchema),DropErc721ContractSchema={deploy:DropErc721ContractDeploy,output:DropErc721ContractOutput,input:DropErc721ContractInput},DropErc1155ContractInput=CommonContractSchema.merge(CommonRoyaltySchema).merge(MerkleSchema).merge(CommonSymbolSchema),DropErc1155ContractOutput=CommonContractOutputSchema.merge(CommonRoyaltySchema).merge(MerkleSchema).merge(CommonSymbolSchema),DropErc1155ContractDeploy=DropErc1155ContractInput.merge(CommonPlatformFeeSchema).merge(CommonPrimarySaleSchema).merge(CommonTrustedForwarderSchema),DropErc1155ContractSchema={deploy:DropErc1155ContractDeploy,output:DropErc1155ContractOutput,input:DropErc1155ContractInput},MarketplaceContractInput=CommonContractSchema,MarketplaceContractOutput=CommonContractOutputSchema,MarketplaceContractDeploy=MarketplaceContractInput.merge(CommonPlatformFeeSchema).merge(CommonTrustedForwarderSchema),MarketplaceContractSchema={deploy:MarketplaceContractDeploy,output:MarketplaceContractOutput,input:MarketplaceContractInput},PackContractInput=CommonContractSchema.merge(CommonRoyaltySchema).merge(CommonSymbolSchema),PackContractOutput=CommonContractOutputSchema.merge(CommonRoyaltySchema).merge(CommonSymbolSchema),PackContractDeploy=PackContractInput.merge(CommonPlatformFeeSchema).merge(CommonTrustedForwarderSchema),PackContractSchema={deploy:PackContractDeploy,output:PackContractOutput,input:PackContractInput},SplitRecipientInputSchema=z$6.object({address:AddressSchema,sharesBps:BasisPointsSchema.gt(0,"Shares must be greater than 0")}),SplitRecipientOuputSchema=SplitRecipientInputSchema.extend({address:AddressSchema,sharesBps:BasisPointsSchema}),SplitsContractInput=CommonContractSchema.extend({recipients:z$6.array(SplitRecipientInputSchema).default([]).superRefine((it,tt)=>{const rt={};let at=0;for(let st=0;st<it.length;st++){const ot=it[st];rt[ot.address]&&tt.addIssue({code:z$6.ZodIssueCode.custom,message:"Duplicate address.",path:[st,"address"]}),rt[ot.address]=!0,at+=ot.sharesBps,at>1e4&&tt.addIssue({code:z$6.ZodIssueCode.custom,message:"Total shares cannot go over 100%.",path:[st,"sharesBps"]})}at!==1e4&&tt.addIssue({code:z$6.ZodIssueCode.custom,message:`Total shares need to add up to 100%. Total shares are currently ${at/100}%`,path:[]})})}),SplitsContractOutput=CommonContractOutputSchema.extend({recipients:z$6.array(SplitRecipientOuputSchema)}),SplitsContractDeploy=SplitsContractInput.merge(SplitsContractInput).merge(CommonTrustedForwarderSchema),SplitsContractSchema={deploy:SplitsContractDeploy,output:SplitsContractOutput,input:SplitsContractInput},TokenErc20ContractInput=CommonContractSchema.merge(CommonSymbolSchema),TokenErc20ContractOutput=CommonContractOutputSchema.merge(CommonSymbolSchema),TokenErc20ContractDeploy=TokenErc20ContractInput.merge(CommonPlatformFeeSchema).merge(CommonPrimarySaleSchema).merge(CommonTrustedForwarderSchema),TokenErc20ContractSchema={deploy:TokenErc20ContractDeploy,output:TokenErc20ContractOutput,input:TokenErc20ContractInput},TokenErc721ContractInput=CommonContractSchema.merge(CommonRoyaltySchema).merge(CommonSymbolSchema),TokenErc721ContractOutput=CommonContractOutputSchema.merge(CommonRoyaltySchema).merge(CommonSymbolSchema),TokenErc721ContractDeploy=TokenErc721ContractInput.merge(CommonPlatformFeeSchema).merge(CommonPrimarySaleSchema).merge(CommonTrustedForwarderSchema),TokenErc721ContractSchema={deploy:TokenErc721ContractDeploy,output:TokenErc721ContractOutput,input:TokenErc721ContractInput},TokenErc1155ContractInput=CommonContractSchema.merge(CommonRoyaltySchema).merge(CommonSymbolSchema),TokenErc1155ContractOutput=CommonContractOutputSchema.merge(CommonRoyaltySchema).merge(CommonSymbolSchema),TokenErc1155ContractDeploy=TokenErc1155ContractInput.merge(CommonPlatformFeeSchema).merge(CommonPrimarySaleSchema).merge(CommonTrustedForwarderSchema),TokenErc1155ContractSchema={deploy:TokenErc1155ContractDeploy,output:TokenErc1155ContractOutput,input:TokenErc1155ContractInput},VoteSettingsInputSchema=z$6.object({voting_delay_in_blocks:z$6.number().min(0).default(0),voting_period_in_blocks:z$6.number().min(1).default(1),voting_token_address:AddressSchema,voting_quorum_fraction:PercentSchema.default(0),proposal_token_threshold:BigNumberishSchema.default(1)}),VoteSettingsOuputSchema=VoteSettingsInputSchema.extend({proposal_token_threshold:BigNumberSchema}),VoteContractInput=CommonContractSchema.merge(VoteSettingsInputSchema),VoteContractOutput=CommonContractOutputSchema.merge(VoteSettingsOuputSchema),VoteContractDeploy=VoteContractInput.merge(CommonTrustedForwarderSchema),VoteContractSchema={deploy:VoteContractDeploy,output:VoteContractOutput,input:VoteContractInput};z$6.object({proposalId:BigNumberSchema,proposer:z$6.string(),targets:z$6.array(z$6.string()),values:z$6.array(BigNumberSchema),signatures:z$6.array(z$6.string()),calldatas:z$6.array(z$6.string()),startBlock:BigNumberSchema,endBlock:BigNumberSchema,description:z$6.string()});const PropertiesInput=z$6.object({}).catchall(z$6.union([BigNumberTransformSchema,z$6.unknown()]));z$6.union([z$6.array(PropertiesInput),PropertiesInput]).optional();const EditionMetadataOutputSchema=z$6.object({supply:BigNumberSchema,metadata:CommonNFTOutput});EditionMetadataOutputSchema.extend({owner:z$6.string(),quantityOwned:BigNumberSchema}),z$6.object({supply:BigNumberishSchema,metadata:CommonNFTInput}),z$6.object({supply:BigNumberishSchema,metadata:NFTInputOrUriSchema}),z$6.object({toAddress:AddressSchema,amount:AmountSchema});const CHAIN_NAME_TO_ID={"avalanche-fuji":ChainId$1.AvalancheFujiTestnet,"avalanche-testnet":ChainId$1.AvalancheFujiTestnet,"fantom-testnet":ChainId$1.FantomTestnet,ethereum:ChainId$1.Mainnet,matic:ChainId$1.Polygon,mumbai:ChainId$1.Mumbai,goerli:ChainId$1.Goerli,polygon:ChainId$1.Polygon,mainnet:ChainId$1.Mainnet,optimism:ChainId$1.Optimism,"optimism-goerli":ChainId$1.OptimismGoerli,arbitrum:ChainId$1.Arbitrum,"arbitrum-goerli":ChainId$1.ArbitrumGoerli,fantom:ChainId$1.Fantom,avalanche:ChainId$1.Avalanche,binance:ChainId$1.BinanceSmartChainMainnet,"binance-testnet":ChainId$1.BinanceSmartChainTestnet,hardhat:ChainId$1.Hardhat,localhost:ChainId$1.Localhost};Object.fromEntries(Object.entries(CHAIN_NAME_TO_ID).map(it=>{let[tt,rt]=it;return[rt,tt]}));function buildDefaultMap(){let it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return SDKOptionsSchema.parse(it).supportedChains.reduce((rt,at)=>(rt[at.chainId]=at,rt),{})}function getChainProvider(it,tt){if(typeof it=="string"&&isRpcUrl(it))return getProviderFromRpcUrl(it);const rt=SDKOptionsSchema.parse(tt);isChainConfig(it)&&(rt.supportedChains=[it,...rt.supportedChains]);const at=buildDefaultMap(rt);let st="",ot;try{ot=getChainIdFromNetwork(it,rt),st=getChainRPC(at[ot],{thirdwebApiKey:rt.thirdwebApiKey||DEFAULT_API_KEY$3,infuraApiKey:rt.infuraApiKey,alchemyApiKey:rt.alchemyApiKey})}catch{}if(st||(st=`https://${ot||it}.rpc.thirdweb.com/${rt.thirdwebApiKey||DEFAULT_API_KEY$3}`),!st)throw new Error(`No rpc url found for chain ${it}. Please provide a valid rpc url via the 'supportedChains' property of the sdk options.`);return getProviderFromRpcUrl(st,ot)}function getChainIdFromNetwork(it,tt){if(isChainConfig(it))return it.chainId;if(typeof it=="number")return it;{const rt=tt.supportedChains.reduce((at,st)=>(at[st.slug]=st.chainId,at),{});if(it in rt)return rt[it]}throw new Error(`Cannot resolve chainId from: ${it} - please pass the chainId instead and specify it in the 'supportedChains' property of the SDK options.`)}function isChainConfig(it){return typeof it!="string"&&typeof it!="number"&&!Signer.isSigner(it)&&!Provider$1.isProvider(it)}function isRpcUrl(it){const tt=it.match(/^(ws|http)s?:/i);if(tt)switch(tt[1].toLowerCase()){case"http":case"https":case"ws":case"wss":return!0}return!1}const RPC_PROVIDER_MAP=new Map;function getProviderFromRpcUrl(it,tt){try{const rt=it.match(/^(ws|http)s?:/i);if(rt)switch(rt[1].toLowerCase()){case"http":case"https":const at=`${it}-${tt||-1}`,st=RPC_PROVIDER_MAP.get(at);if(st)return st;const ot=tt?new StaticJsonRpcBatchProvider(it,tt):new JsonRpcBatchProvider(it);return RPC_PROVIDER_MAP.set(at,ot),ot;case"ws":case"wss":return new WebSocketProvider(it,tt)}}catch{}return getDefaultProvider(it)}class NotFoundError extends Error{constructor(tt){super(tt?`Object with id ${tt} NOT FOUND`:"NOT_FOUND")}}class MissingRoleError extends Error{constructor(tt,rt){super(`MISSING ROLE: ${tt} does not have the '${rt}' role`)}}class DuplicateLeafsError extends Error{constructor(tt){super(`DUPLICATE_LEAFS${tt?` : ${tt}`:""}`)}}class AuctionAlreadyStartedError extends Error{constructor(tt){super(`Auction already started with existing bid${tt?`, id: ${tt}`:""}`)}}class ListingNotFoundError extends Error{constructor(tt,rt){super(`Could not find listing.${tt?` marketplace address: ${tt}`:""}${rt?` listing id: ${rt}`:""}`)}}class WrongListingTypeError extends Error{constructor(tt,rt,at,st){super(`Incorrect listing type. Are you sure you're using the right method?.${tt?` marketplace address: ${tt}`:""}${rt?` listing id: ${rt}`:""}${st?` expected type: ${st}`:""}${at?` actual type: ${at}`:""}`)}}class AuctionHasNotEndedError extends Error{constructor(tt,rt){super(`Auction has not ended yet${tt?`, id: ${tt}`:""}${rt?`, end time: ${rt.toString()}`:""}`)}}class ExtensionNotImplementedError extends Error{constructor(tt){super(`This functionality is not available because the contract does not implement the '${tt.docLinks.contracts}' Extension. Learn how to unlock this functionality at https://portal.thirdweb.com/extensions `)}}var _reason=new WeakMap,_info=new WeakMap;class TransactionError extends Error{constructor(tt){var at;let rt=`


\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557
\u2551 TRANSACTION ERROR \u2551
\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D

`;if(rt+=`Reason: ${tt.reason}`,rt+=`


\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557
\u2551 TRANSACTION INFORMATION \u2551
\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D
`,rt+=withSpaces("from",tt.from),rt+=withSpaces("to",tt.contractName?`${tt.to} (${tt.contractName})`:tt.to),rt+=withSpaces("chain",`${tt.network.name} (${tt.network.chainId})`),tt.rpcUrl)try{const st=new URL(tt.rpcUrl);rt+=withSpaces("rpc",st.hostname)}catch{}if(tt.hash&&(rt+=withSpaces("tx hash",tt.hash)),tt.value&&tt.value.gt(0)&&(rt+=withSpaces("value",`${formatEther(tt.value)} ${((at=NATIVE_TOKENS[tt.network.chainId])==null?void 0:at.symbol)||""}`)),rt+=withSpaces("data",`${tt.data}`),tt.method&&(rt+=withSpaces("method",tt.method)),tt.sources){const st=tt.sources.find(ot=>ot.source.includes(tt.reason));if(st){const ot=st.source.split(`
`).map((ht,mt)=>`${mt+1}  ${ht}`),lt=ot.findIndex(ht=>ht.includes(tt.reason));ot[lt]+="   <-- REVERT";const ut=ot.slice(lt-8,lt+4);rt+=`


\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557
\u2551 SOLIDITY STACK TRACE \u2551
\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D

`,rt+=`File: ${st.filename.replace("node_modules/","")}

`,rt+=ut.join(`
`)}}rt+=`


\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557
\u2551 DEBUGGING RESOURCES \u2551
\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D

`,rt+="Need helping debugging? Join our Discord: https://discord.gg/thirdweb",rt+=`

`,super(rt),_classPrivateFieldInitSpec$2(this,_reason,{writable:!0,value:void 0}),_classPrivateFieldInitSpec$2(this,_info,{writable:!0,value:void 0}),_classPrivateFieldSet$2(this,_reason,tt.reason),_classPrivateFieldSet$2(this,_info,tt)}get reason(){return _classPrivateFieldGet$2(this,_reason)}get info(){return _classPrivateFieldGet$2(this,_info)}}function parseRevertReason(it){if(it.reason)return it.reason;let tt=it;return typeof it=="object"?tt=JSON.stringify(it):typeof it!="string"&&(tt=it.toString()),parseMessageParts(/.*?"message":"([^"\\]*).*?/,tt)||parseMessageParts(/.*?"reason":"([^"\\]*).*?/,tt)||it.message||""}function withSpaces(it,tt){if(tt==="")return tt;const rt=Array(10-it.length).fill(" ").join("");return tt.includes(`
`)?tt=`

  `+tt.split(`
`).join(`
  `):tt=`${rt}${tt}`,`
${it}:${tt}`}function parseMessageParts(it,tt){const rt=tt.match(it)||[];let at="";return(rt==null?void 0:rt.length)>0&&(at+=rt[1]),at}function includesErrorMessage(it,tt){return it?it&&it.toString().includes(tt)||it&&it.message&&it.message.toString().includes(tt)||it&&it.error&&it.error.toString().includes(tt):!1}const ForwardRequest=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"}],ChainAwareForwardRequest=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"},{name:"chainid",type:"uint256"}],BiconomyForwarderAbi=[{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"batchId",type:"uint256"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],_nonces={},_noncesSyncTimestamp={};async function getAndIncrementNonce(it,tt,rt){const at=rt.join("|"),st=_noncesSyncTimestamp[at],ot=Date.now()-st>=2e3;if(!(at in _nonces)||ot){const ut=await it.functions[tt](...rt);Array.isArray(ut)&&ut.length>0?_nonces[at]=BigNumber.from(ut[0]):_nonces[at]=BigNumber.from(ut),_noncesSyncTimestamp[at]=Date.now()}const lt=_nonces[at];return _nonces[at]=BigNumber.from(_nonces[at]).add(1),lt}function getGasStationUrl(it){switch(it){case ChainId$1.Polygon:return"https://gasstation-mainnet.matic.network/v2";case ChainId$1.Mumbai:return"https://gasstation-mumbai.matic.today/v2"}}const MIN_POLYGON_GAS_PRICE=parseUnits("31","gwei"),MIN_MUMBAI_GAS_PRICE=parseUnits("1","gwei");function getDefaultGasFee(it){switch(it){case ChainId$1.Polygon:return MIN_POLYGON_GAS_PRICE;case ChainId$1.Mumbai:return MIN_MUMBAI_GAS_PRICE}}async function getPolygonGasPriorityFee(it){const tt=getGasStationUrl(it);try{const at=(await(await fetch$1(tt)).json()).standard.maxPriorityFee;if(at>0){const st=parseFloat(at).toFixed(9);return parseUnits(st,"gwei")}}catch(rt){console.error("failed to fetch gas",rt)}return getDefaultGasFee(it)}async function signTypedDataInternal(it,tt,rt,at){var ht,mt;const st=it==null?void 0:it.provider;if(!st)throw new Error("missing provider");const ot=TypedDataEncoder.getPayload(tt,rt,at);let lt="";const ut=(await it.getAddress()).toLowerCase();if((ht=st==null?void 0:st.provider)!=null&&ht.isWalletConnect)lt=await st.send("eth_signTypedData",[(await it.getAddress()).toLowerCase(),JSON.stringify(ot)]);else try{lt=await it._signTypedData(tt,rt,at)}catch(bt){if((mt=bt==null?void 0:bt.message)!=null&&mt.includes("Method eth_signTypedData_v4 not supported"))lt=await st.send("eth_signTypedData",[ut,JSON.stringify(ot)]);else try{await st.send("eth_signTypedData_v4",[ut,JSON.stringify(ot)])}catch(vt){throw vt}}return{payload:ot,signature:joinSignature(splitSignature(lt))}}const NAME_ABI=[{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],DOMAIN_SEPARATOR_ABI=[{constant:!0,inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"}],NONCES_ABI=[{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"}];async function getSignerNonce(it,tt){const rt=new Contract(tt,NONCES_ABI,it);try{return await rt.nonces(await it.getAddress())}catch{return await rt.getNonce(await it.getAddress())}}async function getDomainSeperator(it,tt){const rt=new Contract(tt,DOMAIN_SEPARATOR_ABI,it);try{return await rt.DOMAIN_SEPARATOR()}catch{try{return await rt.getDomainSeperator()}catch(st){console.error("Error getting domain separator",st)}}}async function getTokenName(it,tt){return new Contract(tt,NAME_ABI,it).name()}async function getChainDomainSeperator(it,tt){const rt=await getDomainSeperator(it,tt.verifyingContract),at={name:tt.name,version:tt.version,verifyingContract:tt.verifyingContract,salt:hexZeroPad(BigNumber.from(tt.chainId).toHexString(),32)};return TypedDataEncoder.hashDomain(at)===rt?at:tt}async function signEIP2612Permit(it,tt,rt,at,st,ot,lt){const ut=await getChainDomainSeperator(it,{name:await getTokenName(it,tt),version:"1",chainId:await it.getChainId(),verifyingContract:tt});lt=lt||(await getSignerNonce(it,tt)).toString(),ot=ot||MaxUint256$1;const ht={owner:rt,spender:at,value:st,nonce:lt,deadline:ot},mt={Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},{signature:bt}=await signTypedDataInternal(it,ut,mt,ht);return{message:ht,signature:bt}}const isBrowser$3=()=>typeof window<"u",isNode$3=()=>!isBrowser$3();function unique(it,tt){if(it.length===0||it.length===1||!tt)return it;for(let rt=0;rt<it.length;rt++)for(let at=rt+1;at<it.length;at++)tt(it[rt],it[at])&&it.splice(at,1);return it}class RPCConnectionHandler extends EventEmitter$1$1{constructor(tt,rt){super(),_defineProperty$4(this,"provider",void 0),_defineProperty$4(this,"signer",void 0),_defineProperty$4(this,"options",void 0);try{this.options=SDKOptionsSchema.parse(rt)}catch(ot){console.error("invalid sdk options object passed, falling back to default options",ot),this.options=SDKOptionsSchema.parse({})}const[at,st]=getSignerAndProvider(tt,this.options);this.signer=at,this.provider=st}updateSignerOrProvider(tt){const[rt,at]=getSignerAndProvider(tt,this.options);this.signer=rt,this.provider=at}isReadOnly(){return!Signer.isSigner(this.signer)}getSigner(){return this.signer}getProvider(){return this.provider}getSignerOrProvider(){return this.getSigner()||this.getProvider()}}function getSignerAndProvider(it,tt){let rt,at;if(Signer.isSigner(it)?(rt=it,it.provider&&(at=it.provider)):Provider$1.isProvider(it)?at=it:at=getChainProvider(it,tt),tt!=null&&tt.readonlySettings&&(at=getProviderFromRpcUrl(tt.readonlySettings.rpcUrl,tt.readonlySettings.chainId)),!at)throw rt?new Error("No provider passed to the SDK! Please make sure that your signer is connected to a provider!"):new Error("No provider found! Make sure to specify which network to connect to, or pass a signer or provider to the SDK!");return[rt,at]}var _storage=new WeakMap;class ContractWrapper extends RPCConnectionHandler{constructor(tt,rt,at,st){super(tt,st),_classPrivateFieldInitSpec$2(this,_storage,{writable:!0,value:void 0}),_defineProperty$4(this,"isValidContract",!1),_defineProperty$4(this,"customOverrides",()=>({})),_defineProperty$4(this,"writeContract",void 0),_defineProperty$4(this,"readContract",void 0),_defineProperty$4(this,"abi",void 0),this.abi=at,this.writeContract=new Contract(rt,at,this.getSignerOrProvider()),this.readContract=this.writeContract.connect(this.getProvider()),_classPrivateFieldSet$2(this,_storage,new ThirdwebStorage)}updateSignerOrProvider(tt){super.updateSignerOrProvider(tt),this.writeContract=this.writeContract.connect(this.getSignerOrProvider()),this.readContract=this.writeContract.connect(this.getProvider())}async getChainID(){const tt=this.getProvider(),{chainId:rt}=await tt.getNetwork();return rt}async getSignerAddress(){const tt=this.getSigner();if(!tt)throw new Error("This action requires a connected wallet to sign the transaction. Please pass a valid signer to the SDK.");return await tt.getAddress()}callStatic(){return this.writeContract.callStatic}async getCallOverrides(){if(isBrowser$3())return{};const tt=await this.getProvider().getFeeData();if(tt.maxFeePerGas&&tt.maxPriorityFeePerGas){const at=await this.getChainID(),st=await this.getProvider().getBlock("latest"),ot=st&&st.baseFeePerGas?st.baseFeePerGas:parseUnits("1","gwei");let lt;at===ChainId$1.Mumbai||at===ChainId$1.Polygon?lt=await getPolygonGasPriorityFee(at):lt=BigNumber.from(tt.maxPriorityFeePerGas);const ut=this.getPreferredPriorityFee(lt);return{maxFeePerGas:ot.mul(2).add(ut),maxPriorityFeePerGas:ut}}else return{gasPrice:await this.getPreferredGasPrice()}}getPreferredPriorityFee(tt){const rt=this.options.gasSettings.speed,at=this.options.gasSettings.maxPriceInGwei;let st;switch(rt){case"standard":st=BigNumber.from(0);break;case"fast":st=tt.div(100).mul(5);break;case"fastest":st=tt.div(100).mul(10);break}let ot=tt.add(st);const lt=parseUnits(at.toString(),"gwei"),ut=parseUnits("2.5","gwei");return ot.gt(lt)&&(ot=lt),ot.lt(ut)&&(ot=ut),ot}async getPreferredGasPrice(){const tt=await this.getProvider().getGasPrice(),rt=this.options.gasSettings.speed,at=this.options.gasSettings.maxPriceInGwei;let st=tt,ot;switch(rt){case"standard":ot=BigNumber.from(1);break;case"fast":ot=tt.div(100).mul(5);break;case"fastest":ot=tt.div(100).mul(10);break}st=st.add(ot);const lt=parseUnits(at.toString(),"gwei");return st.gt(lt)&&(st=lt),st}emitTransactionEvent(tt,rt){this.emit(EventType.Transaction,{status:tt,transactionHash:rt})}async multiCall(tt){return this.sendTransaction("multicall",[tt])}async estimateGas(tt,rt){return this.writeContract.estimateGas[tt](...rt)}withTransactionOverride(tt){this.customOverrides=tt}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];let ot;try{if(at.length>0&&typeof at[at.length-1]=="object"){const bt=at[at.length-1];ot=CallOverrideSchema.parse(bt),at=at.slice(0,at.length-1)}}catch{}const lt=extractFunctionsFromAbi(AbiSchema.parse(this.abi)).filter(bt=>bt.name===tt);if(!lt.length)throw new Error(`Function "${tt}" not found in contract. Check your dashboard for the list of functions available`);const ut=lt.find(bt=>bt.name===tt&&bt.inputs.length===at.length);if(!ut)throw new Error(`Function "${tt}" requires ${lt[0].inputs.length} arguments, but ${at.length} were provided.
Expected function signature: ${lt[0].signature}`);const ht=`${tt}(${ut.inputs.map(bt=>bt.type).join()})`,mt=ht in this.readContract.functions?ht:tt;return ut.stateMutability==="view"||ut.stateMutability==="pure"?this.readContract[mt](...at):{receipt:await this.sendTransaction(mt,at,ot)}}async sendTransaction(tt,rt,at){var st;if(at||(at=await this.getCallOverrides()),at={...at,...this.customOverrides()},this.customOverrides=()=>({}),((st=this.options)==null?void 0:st.gasless)&&("openzeppelin"in this.options.gasless||"biconomy"in this.options.gasless)){if(tt==="multicall"&&Array.isArray(rt[0])&&rt[0].length>0){const ht=await this.getSignerAddress();rt[0]=rt[0].map(mt=>pack(["bytes","address"],[mt,ht]))}const ot=this.getProvider(),lt=await this.sendGaslessTransaction(tt,rt,at);this.emitTransactionEvent("submitted",lt);const ut=await ot.waitForTransaction(lt);return this.emitTransactionEvent("completed",lt),ut}else{if(!this.isValidContract){const ut=await this.getProvider().getCode(this.readContract.address);if(this.isValidContract=ut!=="0x",!this.isValidContract)throw new Error("The address you're trying to send a transaction to is not a smart contract. Make sure you are on the correct network and the contract address is correct")}const ot=await this.sendTransactionByFunction(tt,rt,at);this.emitTransactionEvent("submitted",ot.hash);let lt;try{lt=await ot.wait()}catch(ut){try{await this.writeContract.callStatic[tt](...rt,...at.value?[{value:at.value}]:[])}catch(ht){throw await this.formatError(ht,tt,rt,at)}throw await this.formatError(ut,tt,rt,at)}return this.emitTransactionEvent("completed",ot.hash),lt}}async sendTransactionByFunction(tt,rt,at){const st=this.writeContract.functions[tt];if(!st)throw new Error(`invalid function: "${tt.toString()}"`);if(!at.gasLimit)try{at.gasLimit=await this.writeContract.estimateGas[tt](...rt,at)}catch{try{await this.writeContract.callStatic[tt](...rt,...at.value?[{value:at.value}]:[])}catch(lt){throw await this.formatError(lt,tt,rt,at)}}try{return await st(...rt,at)}catch(ot){const lt=await(at.from||this.getSignerAddress()),ut=await(at.value?at.value:0),ht=await this.getProvider().getBalance(lt);throw ht.eq(0)||ut&&ht.lt(ut)?await this.formatError(new Error("You have insufficient funds in your account to execute this transaction."),tt,rt,at):await this.formatError(ot,tt,rt,at)}}async formatError(tt,rt,at,st){var Rt,Dt,Wt;const ot=this.getProvider(),lt=await ot.getNetwork(),ut=await(st.from||this.getSignerAddress()),ht=this.readContract.address,mt=this.readContract.interface.encodeFunctionData(rt,at),bt=BigNumber.from(st.value||0),vt=(Rt=ot.connection)==null?void 0:Rt.url,At=this.readContract.interface.getFunction(rt),xt=at.map(qt=>JSON.stringify(qt).length<=80?JSON.stringify(qt):JSON.stringify(qt,void 0,2)),Et=xt.join(", ").length<=80?xt.join(", "):`
`+xt.map(qt=>"  "+qt.split(`
`).join(`
  `)).join(`,
`)+`
`,Tt=`${At.name}(${Et})`,wt=tt.transactionHash||((Dt=tt.transaction)==null?void 0:Dt.hash)||((Wt=tt.receipt)==null?void 0:Wt.transactionHash),Ct=parseRevertReason(tt);let It,St;try{const qt=await fetchContractMetadataFromAddress(this.readContract.address,this.getProvider(),_classPrivateFieldGet$2(this,_storage));qt.name&&(St=qt.name),qt.metadata.sources&&(It=await fetchSourceFilesFromMetadata(qt,_classPrivateFieldGet$2(this,_storage)))}catch{}return new TransactionError({reason:Ct,from:ut,to:ht,method:Tt,data:mt,network:lt,rpcUrl:vt,value:bt,hash:wt,contractName:St,sources:It})}async sendGaslessTransaction(tt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],at=arguments.length>2?arguments[2]:void 0;const st=this.getSigner();invariant$1(st,"Cannot execute gasless transaction without valid signer");const ot=await this.getChainID(),lt=await this.getSignerAddress(),ut=this.writeContract.address,ht=(at==null?void 0:at.value)||0;if(BigNumber.from(ht).gt(0))throw new Error("Cannot send native token value with gasless transaction");const mt=this.writeContract.interface.encodeFunctionData(tt,rt);let bt=BigNumber.from(0);try{bt=(await this.readContract.estimateGas[tt](...rt)).mul(2)}catch{}bt.lt(1e5)&&(bt=BigNumber.from(5e5)),at.gasLimit&&BigNumber.from(at.gasLimit).gt(bt)&&(bt=BigNumber.from(at.gasLimit));const vt={from:lt,to:ut,data:mt,chainId:ot,gasLimit:bt,functionName:tt.toString(),functionArgs:rt,callOverrides:at};return await this.defaultGaslessSendFunction(vt)}async signTypedData(tt,rt,at,st){this.emit(EventType.Signature,{status:"submitted",message:st,signature:""});const{signature:ot}=await signTypedDataInternal(tt,rt,at,st);return this.emit(EventType.Signature,{status:"completed",message:st,signature:ot}),ot}parseLogs(tt,rt){if(!rt||rt.length===0)return[];const at=this.writeContract.interface.getEventTopic(tt);return rt.filter(ot=>ot.topics.indexOf(at)>=0).map(ot=>this.writeContract.interface.parseLog(ot))}async defaultGaslessSendFunction(tt){return this.options.gasless&&"biconomy"in this.options.gasless?this.biconomySendFunction(tt):this.defenderSendFunction(tt)}async biconomySendFunction(tt){var vt,At;invariant$1(this.options.gasless&&"biconomy"in this.options.gasless,"calling biconomySendFunction without biconomy");const rt=this.getSigner(),at=this.getProvider();invariant$1(rt&&at,"signer and provider must be set");const st=new Contract(getContractAddressByChainId(tt.chainId,"biconomyForwarder"),BiconomyForwarderAbi,at),ot=0,lt=await getAndIncrementNonce(st,"getNonce",[tt.from,ot]),ut={from:tt.from,to:tt.to,token:AddressZero,txGas:tt.gasLimit.toNumber(),tokenGasPrice:"0",batchId:ot,batchNonce:lt.toNumber(),deadline:Math.floor(Date.now()/1e3+(((vt=this.options)==null?void 0:vt.gasless)&&"biconomy"in this.options.gasless&&((At=this.options.gasless.biconomy)==null?void 0:At.deadlineSeconds)||3600)),data:tt.data},ht=arrayify(keccak256(["address","address","address","uint256","uint256","uint256","uint256","uint256","bytes32"],[ut.from,ut.to,ut.token,ut.txGas,ut.tokenGasPrice,ut.batchId,ut.batchNonce,ut.deadline,keccak256$1(ut.data)]));this.emit(EventType.Signature,{status:"submitted",message:ht,signature:""});const mt=await rt.signMessage(ht);this.emit(EventType.Signature,{status:"completed",message:ht,signature:mt});const bt=await fetch$1("https://api.biconomy.io/api/v2/meta-tx/native",{method:"POST",body:JSON.stringify({from:tt.from,apiId:this.options.gasless.biconomy.apiId,params:[ut,mt],to:tt.to,gasLimit:tt.gasLimit.toHexString()}),headers:{"x-api-key":this.options.gasless.biconomy.apiKey,"Content-Type":"application/json;charset=utf-8"}});if(bt.ok){const xt=await bt.json();if(!xt.txHash)throw new Error(`relay transaction failed: ${xt.log}`);return xt.txHash}throw new Error(`relay transaction failed with status: ${bt.status} (${bt.statusText})`)}async defenderSendFunction(tt){invariant$1(this.options.gasless&&"openzeppelin"in this.options.gasless,"calling openzeppelin gasless transaction without openzeppelin config in the SDK options");const rt=this.getSigner(),at=this.getProvider();invariant$1(rt,"provider is not set"),invariant$1(at,"provider is not set");const st=this.options.gasless.openzeppelin.relayerForwarderAddress||(this.options.gasless.openzeppelin.useEOAForwarder?CONTRACT_ADDRESSES[tt.chainId].openzeppelinForwarderEOA:CONTRACT_ADDRESSES[tt.chainId].openzeppelinForwarder),ot=new Contract(st,ForwarderABI,at),lt=await getAndIncrementNonce(ot,"getNonce",[tt.from]);let ut,ht,mt;this.options.gasless.experimentalChainlessSupport?(ut={name:"GSNv2 Forwarder",version:"0.0.1",verifyingContract:st},ht={ForwardRequest:ChainAwareForwardRequest},mt={from:tt.from,to:tt.to,value:BigNumber.from(0).toString(),gas:BigNumber.from(tt.gasLimit).toString(),nonce:BigNumber.from(lt).toString(),data:tt.data,chainid:BigNumber.from(tt.chainId).toString()}):(ut={name:"GSNv2 Forwarder",version:"0.0.1",chainId:tt.chainId,verifyingContract:st},ht={ForwardRequest},mt={from:tt.from,to:tt.to,value:BigNumber.from(0).toString(),gas:BigNumber.from(tt.gasLimit).toString(),nonce:BigNumber.from(lt).toString(),data:tt.data});let bt;if(this.emit(EventType.Signature,{status:"submitted",message:mt,signature:""}),tt.functionName==="approve"&&tt.functionArgs.length===2){const Et=tt.functionArgs[0],Tt=tt.functionArgs[1],{message:wt,signature:Ct}=await signEIP2612Permit(rt,this.writeContract.address,tt.from,Et,Tt),{r:It,s:St,v:Rt}=splitSignature(Ct);mt={to:this.readContract.address,owner:wt.owner,spender:wt.spender,value:BigNumber.from(wt.value).toString(),nonce:BigNumber.from(wt.nonce).toString(),deadline:BigNumber.from(wt.deadline).toString(),r:It,s:St,v:Rt},bt=Ct}else{const{signature:Et}=await signTypedDataInternal(rt,ut,ht,mt);bt=Et}let vt="forward";mt!=null&&mt.owner&&(vt="permit");const At=JSON.stringify({request:mt,signature:bt,forwarderAddress:st,type:vt});this.emit(EventType.Signature,{status:"completed",message:mt,signature:bt});const xt=await fetch$1(this.options.gasless.openzeppelin.relayerUrl,{method:"POST",body:At});if(xt.ok){const Et=await xt.json();if(!Et.result)throw new Error(`Relay transaction failed: ${Et.message}`);return JSON.parse(Et.result).txHash}throw new Error(`relay transaction failed with status: ${xt.status} (${xt.statusText})`)}}function isNativeToken(it){return it.toLowerCase()===NATIVE_TOKEN_ADDRESS||it.toLowerCase()===AddressZero}function cleanCurrencyAddress(it){return isNativeToken(it)?NATIVE_TOKEN_ADDRESS:it}async function normalizePriceValue(it,tt,rt){const at=await fetchCurrencyMetadata(it,rt);return parseUnits(AmountSchema.parse(tt),at.decimals)}async function fetchCurrencyMetadata(it,tt){if(isNativeToken(tt)){const rt=await it.getNetwork(),at=getNativeTokenByChainId(rt.chainId);return{name:at.name,symbol:at.symbol,decimals:at.decimals}}else{const rt=new Contract(tt,ERC20MetadataAbi,it),[at,st,ot]=await Promise.all([rt.name(),rt.symbol(),rt.decimals()]);return{name:at,symbol:st,decimals:ot}}}async function fetchCurrencyValue(it,tt,rt){const at=await fetchCurrencyMetadata(it,tt);return{...at,value:BigNumber.from(rt),displayValue:formatUnits(rt,at.decimals)}}async function setErc20Allowance(it,tt,rt,at){if(isNativeToken(rt))at.value=tt;else{const st=it.getSigner(),ot=it.getProvider(),lt=new ContractWrapper(st||ot,rt,ERC20Abi$1,it.options),ut=await it.getSignerAddress(),ht=it.readContract.address;return(await lt.readContract.allowance(ut,ht)).lt(tt)&&await lt.sendTransaction("approve",[ht,tt]),at}}async function approveErc20Allowance(it,tt,rt,at,st){const ot=it.getSigner(),lt=it.getProvider(),ut=new ContractWrapper(ot||lt,tt,ERC20Abi$1,it.options),ht=await it.getSignerAddress(),mt=it.readContract.address,bt=await ut.readContract.allowance(ht,mt),vt=BigNumber.from(rt).mul(BigNumber.from(at)).div(parseUnits("1",st));bt.lt(vt)&&await ut.sendTransaction("approve",[mt,bt.add(vt)])}async function hasERC20Allowance(it,tt,rt){const at=it.getProvider(),st=new ContractWrapper(at,tt,ERC20Abi$1,{}),ot=await it.getSignerAddress(),lt=it.readContract.address;return(await st.readContract.allowance(ot,lt)).gte(rt)}async function prepareClaim(it,tt,rt,at,st,ot,lt,ut,ht){let mt=convertQuantityToBigNumber(rt.maxClaimablePerWallet,st),bt=[hexZeroPad([0],32)],vt=rt.price,At=rt.currencyAddress;try{if(!rt.merkleRootHash.toString().startsWith(AddressZero)){const wt=await fetchSnapshotEntryForAddress(it,rt.merkleRootHash.toString(),await at(),ot.getProvider(),lt,ht);if(wt)bt=wt.proof,mt=wt.maxClaimable==="unlimited"?MaxUint256$1:parseUnits(wt.maxClaimable,st),vt=wt.price===void 0||wt.price==="unlimited"?MaxUint256$1:await normalizePriceValue(ot.getProvider(),wt.price,wt.currencyAddress||AddressZero),At=wt.currencyAddress||AddressZero;else if(ht===SnapshotFormatVersion.V1)throw new Error("No claim found for this address")}}catch(wt){if((wt==null?void 0:wt.message)==="No claim found for this address")throw wt;console.warn("failed to check claim condition merkle root hash, continuing anyways",wt)}const xt=await ot.getCallOverrides()||{},Et=vt.toString()!==MaxUint256$1.toString()?vt:rt.price,Tt=At!==AddressZero?At:rt.currencyAddress;return Et.gt(0)&&(isNativeToken(Tt)?xt.value=BigNumber.from(Et).mul(tt).div(parseUnits("1",st)):ut&&await approveErc20Allowance(ot,Tt,Et,tt,st)),{overrides:xt,proofs:bt,maxClaimable:mt,price:Et,currencyAddress:Tt,priceInProof:vt,currencyAddressInProof:At}}async function fetchSnapshot(it,tt,rt){if(!tt)return null;const at=tt[it];if(at){const st=await rt.downloadJSON(at);if(st.isShardedMerkleTree&&st.merkleRoot===it){const ot=await ShardedMerkleTree.fromUri(at,rt);return(ot==null?void 0:ot.getAllEntries())||null}else{const ot=SnapshotSchema.parse(st);if(it===ot.merkleRoot)return ot.claims.map(lt=>({address:lt.address,maxClaimable:lt.maxClaimable,price:lt.price,currencyAddress:lt.currencyAddress}))}}return null}async function fetchSnapshotEntryForAddress(it,tt,rt,at,st,ot){if(!rt)return null;const lt=rt[tt];if(lt){const ut=await st.downloadJSON(lt);if(ut.isShardedMerkleTree&&ut.merkleRoot===tt)return await(await ShardedMerkleTree.fromShardedMerkleTreeInfo(ut,st)).getProof(it,at,ot);const ht=SnapshotSchema.parse(ut);if(tt===ht.merkleRoot)return ht.claims.find(mt=>mt.address.toLowerCase()===it.toLowerCase())||null}return null}async function updateExistingClaimConditions(it,tt,rt){if(it>=rt.length)throw Error(`Index out of bounds - got index: ${it} with ${rt.length} conditions`);const at=rt[it].currencyMetadata.decimals,st=rt[it].price,ot=formatUnits(st,at),lt=ClaimConditionInputSchema.parse({...rt[it],price:ot,...tt}),ut=ClaimConditionOutputSchema.parse({...lt,price:st});return rt.map((ht,mt)=>{let bt;mt===it?bt=ut:bt=ht;const vt=formatUnits(bt.price,at);return{...bt,price:vt}})}async function processSnapshotData(it,tt,rt,at,st){const ot=[];return{inputsWithSnapshots:await Promise.all(it.map(async ut=>{if(ut.snapshot&&ut.snapshot.length>0){const ht=await createSnapshot(ut.snapshot,tt,rt,at,st);ot.push(ht),ut.merkleRootHash=ht.merkleRoot}else ut.merkleRootHash=hexZeroPad([0],32);return ut})),snapshotInfos:ot}}function compare(it,tt){const rt=BigNumber.from(it),at=BigNumber.from(tt);return rt.eq(at)?0:rt.gt(at)?1:-1}async function processClaimConditionInputs(it,tt,rt,at,st){const{inputsWithSnapshots:ot,snapshotInfos:lt}=await processSnapshotData(it,tt,rt,at,st),ut=ClaimConditionInputArray.parse(ot),ht=(await Promise.all(ut.map(mt=>convertToContractModel(mt,tt,rt,at)))).sort((mt,bt)=>compare(mt.startTimestamp,bt.startTimestamp));return{snapshotInfos:lt,sortedConditions:ht}}async function convertToContractModel(it,tt,rt,at){const st=it.currencyAddress===AddressZero?NATIVE_TOKEN_ADDRESS:it.currencyAddress,ot=convertQuantityToBigNumber(it.maxClaimableSupply,tt),lt=convertQuantityToBigNumber(it.maxClaimablePerWallet,tt);let ut;return it.metadata&&(typeof it.metadata=="string"?ut=it.metadata:ut=await at.upload(it.metadata)),{startTimestamp:it.startTime,maxClaimableSupply:ot,supplyClaimed:0,maxClaimablePerWallet:lt,pricePerToken:await normalizePriceValue(rt,it.price,st),currency:st,merkleRoot:it.merkleRootHash.toString(),waitTimeInSecondsBetweenClaims:it.waitInSeconds||0,metadata:ut}}function abstractContractModelToLegacy(it){return{startTimestamp:it.startTimestamp,maxClaimableSupply:it.maxClaimableSupply,supplyClaimed:it.supplyClaimed,merkleRoot:it.merkleRoot,pricePerToken:it.pricePerToken,currency:it.currency,quantityLimitPerTransaction:it.maxClaimablePerWallet,waitTimeInSecondsBetweenClaims:it.waitTimeInSecondsBetweenClaims||0}}function abstractContractModelToNew(it){return{startTimestamp:it.startTimestamp,maxClaimableSupply:it.maxClaimableSupply,supplyClaimed:it.supplyClaimed,merkleRoot:it.merkleRoot,pricePerToken:it.pricePerToken,currency:it.currency,quantityLimitPerWallet:it.maxClaimablePerWallet,metadata:it.metadata||""}}function legacyContractModelToAbstract(it){return{startTimestamp:it.startTimestamp,maxClaimableSupply:it.maxClaimableSupply,supplyClaimed:it.supplyClaimed,merkleRoot:it.merkleRoot.toString(),pricePerToken:it.pricePerToken,currency:it.currency,maxClaimablePerWallet:it.quantityLimitPerTransaction,waitTimeInSecondsBetweenClaims:it.waitTimeInSecondsBetweenClaims}}function newContractModelToAbstract(it){return{startTimestamp:it.startTimestamp,maxClaimableSupply:it.maxClaimableSupply,supplyClaimed:it.supplyClaimed,merkleRoot:it.merkleRoot.toString(),pricePerToken:it.pricePerToken,currency:it.currency,maxClaimablePerWallet:it.quantityLimitPerWallet,waitTimeInSecondsBetweenClaims:0,metadata:it.metadata}}async function transformResultToClaimCondition(it,tt,rt,at,st,ot){var At;const lt=await fetchCurrencyValue(rt,it.currency,it.pricePerToken),ut=convertToReadableQuantity(it.maxClaimableSupply,tt),ht=convertToReadableQuantity(it.maxClaimablePerWallet,tt),mt=convertToReadableQuantity(BigNumber.from(it.maxClaimableSupply).sub(it.supplyClaimed),tt),bt=convertToReadableQuantity(it.supplyClaimed,tt);let vt;return it.metadata&&(vt=await st.downloadJSON(it.metadata)),ClaimConditionOutputSchema.parse({startTime:it.startTimestamp,maxClaimableSupply:ut,maxClaimablePerWallet:ht,currentMintSupply:bt,availableSupply:mt,waitInSeconds:(At=it.waitTimeInSecondsBetweenClaims)==null?void 0:At.toString(),price:BigNumber.from(it.pricePerToken),currency:it.currency,currencyAddress:it.currency,currencyMetadata:lt,merkleRootHash:it.merkleRoot,snapshot:ot?await fetchSnapshot(it.merkleRoot,at,st):void 0,metadata:vt})}function convertToReadableQuantity(it,tt){return it.toString()===MaxUint256$1.toString()?"unlimited":formatUnits(it,tt)}function convertQuantityToBigNumber(it,tt){return it==="unlimited"?MaxUint256$1:parseUnits(it,tt)}async function calculateClaimCost(it,tt,rt,at,st){let ot={};const lt=at||NATIVE_TOKEN_ADDRESS,ht=(await normalizePriceValue(it.getProvider(),tt,lt)).mul(rt);return ht.gt(0)&&(lt===NATIVE_TOKEN_ADDRESS?ot={value:ht}:lt!==NATIVE_TOKEN_ADDRESS&&st&&await approveErc20Allowance(it,lt,ht,rt,0)),ot}const SHARD_NYBBLES=2;let SnapshotFormatVersion;(function(it){it[it.V1=1]="V1",it[it.V2=2]="V2"})(SnapshotFormatVersion||(SnapshotFormatVersion={}));class ShardedMerkleTree{constructor(tt,rt,at,st,ot){_defineProperty$4(this,"shardNybbles",void 0),_defineProperty$4(this,"shards",void 0),_defineProperty$4(this,"trees",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"baseUri",void 0),_defineProperty$4(this,"originalEntriesUri",void 0),_defineProperty$4(this,"tokenDecimals",void 0),this.storage=tt,this.shardNybbles=st,this.baseUri=rt,this.originalEntriesUri=at,this.tokenDecimals=ot,this.shards={},this.trees={}}static async fromUri(tt,rt){try{const at=await rt.downloadJSON(tt);if(at.isShardedMerkleTree)return ShardedMerkleTree.fromShardedMerkleTreeInfo(at,rt)}catch{return}}static async fromShardedMerkleTreeInfo(tt,rt){return new ShardedMerkleTree(rt,tt.baseUri,tt.originalEntriesUri,tt.shardNybbles,tt.tokenDecimals)}static hashEntry(tt,rt,at,st){switch(st){case SnapshotFormatVersion.V1:return keccak256(["address","uint256"],[tt.address,convertQuantityToBigNumber(tt.maxClaimable,rt)]);case SnapshotFormatVersion.V2:return keccak256(["address","uint256","uint256","address"],[tt.address,convertQuantityToBigNumber(tt.maxClaimable,rt),convertQuantityToBigNumber(tt.price||"unlimited",at),tt.currencyAddress||AddressZero])}}static async fetchAndCacheDecimals(tt,rt,at){if(!at)return 18;let st=tt[at];return st===void 0&&(st=(await fetchCurrencyMetadata(rt,at)).decimals,tt[at]=st),st}static async buildAndUpload(tt,rt,at,st,ot){let lt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:SHARD_NYBBLES;const ut=SnapshotInputSchema.parse(tt),ht={};for(const St of ut){const Rt=St.address.slice(2,2+lt).toLowerCase();ht[Rt]===void 0&&(ht[Rt]=[]),ht[Rt].push(St)}const mt={},bt=await Promise.all(Object.entries(ht).map(async St=>{let[Rt,Dt]=St;return[Rt,new dist$4.MerkleTree(await Promise.all(Dt.map(async Wt=>{const qt=await ShardedMerkleTree.fetchAndCacheDecimals(mt,at,Wt.currencyAddress);return ShardedMerkleTree.hashEntry(Wt,rt,qt,ot)})),keccak256$1,{sort:!0}).getHexRoot()]})),vt=Object.fromEntries(bt),At=new dist$4.MerkleTree(Object.values(vt),keccak256$1,{sort:!0}),xt=[];for(const[St,Rt]of Object.entries(ht)){const Dt={proofs:At.getProof(vt[St]).map(Wt=>"0x"+Wt.data.toString("hex")),entries:Rt};xt.push({data:JSON.stringify(Dt),name:`${St}.json`})}const Et=await st.uploadBatch(xt),Tt=Et[0].slice(0,Et[0].lastIndexOf("/")),wt=await st.upload(ut),Ct={merkleRoot:At.getHexRoot(),baseUri:Tt,originalEntriesUri:wt,shardNybbles:lt,tokenDecimals:rt,isShardedMerkleTree:!0},It=await st.upload(Ct);return{shardedMerkleInfo:Ct,uri:It}}async getProof(tt,rt,at){const st=tt.slice(2,2+this.shardNybbles).toLowerCase();let ot=this.shards[st];const lt={};if(ot===void 0)try{ot=this.shards[st]=await this.storage.downloadJSON(`${this.baseUri}/${st}.json`);const vt=await Promise.all(ot.entries.map(async At=>{const xt=await ShardedMerkleTree.fetchAndCacheDecimals(lt,rt,At.currencyAddress);return ShardedMerkleTree.hashEntry(At,this.tokenDecimals,xt,at)}));this.trees[st]=new dist$4.MerkleTree(vt,keccak256$1,{sort:!0})}catch{return null}const ut=ot.entries.find(vt=>vt.address.toLowerCase()===tt.toLowerCase());if(!ut)return null;const ht=await ShardedMerkleTree.fetchAndCacheDecimals(lt,rt,ut.currencyAddress),mt=ShardedMerkleTree.hashEntry(ut,this.tokenDecimals,ht,at),bt=this.trees[st].getProof(mt).map(vt=>"0x"+vt.data.toString("hex"));return SnapshotEntryWithProofSchema.parse({...ut,proof:bt.concat(ot.proofs)})}async getAllEntries(){try{return await this.storage.downloadJSON(this.originalEntriesUri)}catch(tt){return console.warn("Could not fetch original snapshot entries",tt),[]}}}async function createSnapshot(it,tt,rt,at,st){const ot=SnapshotInputSchema.parse(it),lt=ot.map(mt=>mt.address);if(new Set(lt).size<lt.length)throw new DuplicateLeafsError;const ht=await ShardedMerkleTree.buildAndUpload(ot,tt,rt,at,st);return{merkleRoot:ht.shardedMerkleInfo.merkleRoot,snapshotUri:ht.uri}}const roleMap={admin:"",transfer:"TRANSFER_ROLE",minter:"MINTER_ROLE",pauser:"PAUSER_ROLE",lister:"LISTER_ROLE",asset:"ASSET_ROLE",unwrap:"UNWRAP_ROLE",factory:"FACTORY_ROLE"},ALL_ROLES=Object.keys(roleMap);function getRoleHash(it){return it==="admin"?hexZeroPad([0],32):id(roleMap[it])}class ContractEncoder{constructor(tt){_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt}encode(tt,rt){return this.contractWrapper.readContract.interface.encodeFunctionData(tt,rt)}decode(tt,rt){return this.contractWrapper.readContract.interface.decodeFunctionData(tt,rt)}}const getAllPluginsAbi=[{inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"}],getAllExtensionsAbi=[{inputs:[],name:"getAllExtensions",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IExtension.ExtensionMetadata",name:"metadata",type:"tuple"},{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"}],internalType:"struct IExtension.ExtensionFunction[]",name:"functions",type:"tuple[]"}],internalType:"struct IExtension.Extension[]",name:"allExtensions",type:"tuple[]"}],stateMutability:"view",type:"function"}],FEATURE_ROYALTY={name:"Royalty",namespace:"royalty",docLinks:{sdk:"sdk.contractroyalty",contracts:"Royalty"},abis:[IThirdwebRoyaltyAbi],features:{}},FEATURE_PRIMARY_SALE={name:"PrimarySale",namespace:"sales",docLinks:{sdk:"sdk.contractprimarysale",contracts:"PrimarySale"},abis:[IThirdwebPrimarySaleAbi],features:{}},FEATURE_PLATFORM_FEE={name:"PlatformFee",namespace:"platformFee",docLinks:{sdk:"sdk.platformfee",contracts:"PlatformFee"},abis:[IThirdwebPlatformFeeAbi],features:{}},FEATURE_PERMISSIONS_ENUMERABLE={name:"PermissionsEnumerable",namespace:"roles",docLinks:{sdk:"sdk.contractroles",contracts:"PermissionsEnumerable"},abis:[IPermissionsEnumerableAbi],features:{}},FEATURE_PERMISSIONS={name:"Permissions",namespace:"roles",docLinks:{sdk:"sdk.contractroles",contracts:"Permissions"},abis:[IPermissionsAbi],features:{[FEATURE_PERMISSIONS_ENUMERABLE.name]:FEATURE_PERMISSIONS_ENUMERABLE}},FEATURE_METADATA={name:"ContractMetadata",namespace:"metadata",docLinks:{sdk:"sdk.contractmetadata",contracts:"ContractMetadata"},abis:[IContractMetadataAbi],features:{}},FEATURE_APPURI={name:"AppURI",namespace:"appURI",docLinks:{sdk:"sdk.appURI",contracts:"AppURI"},abis:[IAppURI],features:{}},FEATURE_OWNER={name:"Ownable",namespace:"owner",docLinks:{sdk:"sdk.owner",contracts:"Ownable"},abis:[IOwnableAbi],features:{}},FEATURE_GASLESS={name:"Gasless",namespace:"gasless",docLinks:{sdk:"sdk.gaslesstransaction",contracts:""},abis:[IERC2771ContextAbi],features:{}},FEATURE_PACK_VRF={name:"PackVRF",namespace:"pack.vrf",docLinks:{sdk:"sdk.packvrf",contracts:"IPackVRFDirect"},abis:[IPackVRFAbi],features:{}},FEATURE_PLUGIN_ROUTER={name:"PluginRouter",namespace:"plugin.router",docLinks:{sdk:"sdk.pluginrouter",contracts:"IRouter"},abis:[getAllPluginsAbi],features:{}},FEATURE_EXTENSION_ROUTER={name:"ExtensionRouter",namespace:"extension.router",docLinks:{sdk:"",contracts:""},abis:[getAllExtensionsAbi],features:{}},FEATURE_DIRECT_LISTINGS={name:"DirectListings",namespace:"direct.listings",docLinks:{sdk:"",contracts:""},abis:[IDirectListingsAbi],features:{}},FEATURE_ENGLISH_AUCTIONS={name:"EnglishAuctions",namespace:"english.auctions",docLinks:{sdk:"",contracts:""},abis:[IEnglishAuctionsAbi],features:{}},FEATURE_OFFERS={name:"Offers",namespace:"offers",docLinks:{sdk:"",contracts:""},abis:[IOffersAbi],features:{}};class ContractMetadata{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_METADATA.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"schema",void 0),_defineProperty$4(this,"storage",void 0),this.contractWrapper=tt,this.schema=rt,this.storage=at}parseOutputMetadata(tt){return this.schema.output.parse(tt)}parseInputMetadata(tt){return this.schema.input.parse(tt)}async get(){let tt;if(this.supportsContractMetadata(this.contractWrapper)){const rt=await this.contractWrapper.readContract.contractURI();rt&&rt.includes("://")&&(tt=await this.storage.downloadJSON(rt))}if(!tt)try{let rt;try{hasFunction("name",this.contractWrapper)&&(rt=await this.contractWrapper.readContract.name())}catch{}let at;try{hasFunction("symbol",this.contractWrapper)&&(at=await this.contractWrapper.readContract.symbol())}catch{}let st;try{st=await fetchContractMetadataFromAddress(this.contractWrapper.readContract.address,this.contractWrapper.getProvider(),this.storage)}catch{}tt={name:rt||(st==null?void 0:st.name),symbol:at,description:st==null?void 0:st.info.title}}catch{throw new Error("Could not fetch contract metadata")}return this.parseOutputMetadata(tt)}async set(tt){const rt=await this._parseAndUploadMetadata(tt),at=this.contractWrapper;if(this.supportsContractMetadata(at))return{receipt:await at.sendTransaction("setContractURI",[rt]),data:this.get};throw new ExtensionNotImplementedError(FEATURE_METADATA)}async update(tt){return await this.set({...await this.get(),...tt})}async _parseAndUploadMetadata(tt){const rt=this.parseInputMetadata(tt);return this.storage.upload(rt)}supportsContractMetadata(tt){return detectContractFeature(tt,"ContractMetadata")}}class ContractRoles{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_PERMISSIONS.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"roles",void 0),this.contractWrapper=tt,this.roles=rt}async getAll(){invariant$1(this.roles.length,"this contract has no support for roles");const tt={};for(const rt of this.roles)tt[rt]=await this.get(rt);return tt}async get(tt){invariant$1(this.roles.includes(tt),`this contract does not support the "${tt}" role`);const rt=this.contractWrapper;if(hasFunction("getRoleMemberCount",rt)&&hasFunction("getRoleMember",rt)){const at=getRoleHash(tt),st=(await rt.readContract.getRoleMemberCount(at)).toNumber();return await Promise.all(Array.from(Array(st).keys()).map(ot=>rt.readContract.getRoleMember(at,ot)))}throw new Error("Contract does not support enumerating roles. Please implement IPermissionsEnumerable to unlock this functionality.")}async setAll(tt){const rt=Object.keys(tt);invariant$1(rt.length,"you must provide at least one role to set"),invariant$1(rt.every(lt=>this.roles.includes(lt)),"this contract does not support the given role");const at=await this.getAll(),st=[],ot=rt.sort(lt=>lt==="admin"?1:-1);for(let lt=0;lt<ot.length;lt++){const ut=ot[lt],ht=tt[ut]||[],mt=at[ut]||[],bt=ht.filter(At=>!mt.includes(At)),vt=mt.filter(At=>!ht.includes(At));if(bt.length&&bt.forEach(At=>{st.push(this.contractWrapper.readContract.interface.encodeFunctionData("grantRole",[getRoleHash(ut),At]))}),vt.length)for(let At=0;At<vt.length;At++){const xt=vt[At],Et=await this.getRevokeRoleFunctionName(xt);st.push(this.contractWrapper.readContract.interface.encodeFunctionData(Et,[getRoleHash(ut),xt]))}}return{receipt:await this.contractWrapper.multiCall(st)}}async verify(tt,rt){await Promise.all(tt.map(async at=>{if(!(await this.get(at)).map(ot=>ot.toLowerCase()).includes(rt.toLowerCase()))throw new MissingRoleError(rt,at)}))}async grant(tt,rt){return invariant$1(this.roles.includes(tt),`this contract does not support the "${tt}" role`),{receipt:await this.contractWrapper.sendTransaction("grantRole",[getRoleHash(tt),rt])}}async revoke(tt,rt){invariant$1(this.roles.includes(tt),`this contract does not support the "${tt}" role`);const at=await this.getRevokeRoleFunctionName(rt);return{receipt:await this.contractWrapper.sendTransaction(at,[getRoleHash(tt),rt])}}async getRevokeRoleFunctionName(tt){return(await this.contractWrapper.getSignerAddress()).toLowerCase()===tt.toLowerCase()?"renounceRole":"revokeRole"}}class ContractRoyalty{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_ROYALTY.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"metadata",void 0),this.contractWrapper=tt,this.metadata=rt}async getDefaultRoyaltyInfo(){const[tt,rt]=await this.contractWrapper.readContract.getDefaultRoyaltyInfo();return CommonRoyaltySchema.parse({fee_recipient:tt,seller_fee_basis_points:rt})}async getTokenRoyaltyInfo(tt){const[rt,at]=await this.contractWrapper.readContract.getRoyaltyInfoForToken(tt);return CommonRoyaltySchema.parse({fee_recipient:rt,seller_fee_basis_points:at})}async setDefaultRoyaltyInfo(tt){const rt=await this.metadata.get(),at=this.metadata.parseInputMetadata({...rt,...tt}),st=await this.metadata._parseAndUploadMetadata(at);if(hasFunction("setContractURI",this.contractWrapper)){const ot=[this.contractWrapper.readContract.interface.encodeFunctionData("setDefaultRoyaltyInfo",[at.fee_recipient,at.seller_fee_basis_points]),this.contractWrapper.readContract.interface.encodeFunctionData("setContractURI",[st])];return{receipt:await this.contractWrapper.multiCall(ot),data:()=>this.getDefaultRoyaltyInfo()}}else throw new Error("Updating royalties requires implementing ContractMetadata in your contract to support marketplaces like OpenSea.")}async setTokenRoyaltyInfo(tt,rt){return{receipt:await this.contractWrapper.sendTransaction("setRoyaltyInfoForToken",[tt,rt.fee_recipient,rt.seller_fee_basis_points]),data:()=>this.getDefaultRoyaltyInfo()}}}class ContractPrimarySale{constructor(tt){_defineProperty$4(this,"featureName",FEATURE_PRIMARY_SALE.name),_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt}async getRecipient(){return await this.contractWrapper.readContract.primarySaleRecipient()}async setRecipient(tt){return{receipt:await this.contractWrapper.sendTransaction("setPrimarySaleRecipient",[tt])}}}const FALLBACK_METADATA={name:"Failed to load NFT metadata"};async function fetchTokenMetadata(it,tt,rt){const at=tt.replace("{id}",hexZeroPad(BigNumber.from(it).toHexString(),32).slice(2));let st;try{st=await rt.downloadJSON(at)}catch{const lt=tt.replace("{id}",BigNumber.from(it).toString());try{st=await rt.downloadJSON(lt)}catch{console.warn(`failed to get token metadata: ${JSON.stringify({tokenId:it.toString(),tokenUri:tt})} -- falling back to default metadata`),st=FALLBACK_METADATA}}return CommonNFTOutput.parse({...st,id:BigNumber.from(it).toString(),uri:tt})}async function fetchTokenMetadataForContract(it,tt,rt,at){let st;const ot=new Contract(it,ERC165Abi,tt),lt=await ot.supportsInterface(InterfaceId_IERC721),ut=await ot.supportsInterface(InterfaceId_IERC1155);if(lt)st=await new Contract(it,ERC721MetadataAbi,tt).tokenURI(rt);else if(ut)st=await new Contract(it,ERC1155MetadataAbi,tt).uri(rt);else throw Error("Contract must implement ERC 1155 or ERC 721.");if(!st)throw new NotFoundError;return fetchTokenMetadata(rt,st,at)}async function uploadOrExtractURI(it,tt){return typeof it=="string"?it:await tt.upload(CommonNFTInput.parse(it))}async function uploadOrExtractURIs(it,tt,rt,at){if(isUriList(it))return it;if(isMetadataList(it))return await tt.uploadBatch(it.map(ot=>CommonNFTInput.parse(ot)),{rewriteFileNames:{fileStartNumber:rt||0},onProgress:at==null?void 0:at.onProgress});throw new Error("NFT metadatas must all be of the same type (all URI or all NFTMetadataInput)")}function getBaseUriFromBatch(it){const tt=it[0].substring(0,it[0].lastIndexOf("/"));for(let rt=0;rt<it.length;rt++){const at=it[rt].substring(0,it[rt].lastIndexOf("/"));if(tt!==at)throw new Error(`Can only create batches with the same base URI for every entry in the batch. Expected '${tt}' but got '${at}'`)}return tt.replace(/\/$/,"")+"/"}function isUriList(it){return it.find(tt=>typeof tt!="string")===void 0}function isMetadataList(it){return it.find(tt=>typeof tt!="object")===void 0}class DelayedReveal{constructor(tt,rt,at,st){_defineProperty$4(this,"featureName",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"nextTokenIdToMintFn",void 0),this.featureName=at,this.nextTokenIdToMintFn=st,this.contractWrapper=tt,this.storage=rt}async createDelayedRevealBatch(tt,rt,at,st){if(!at)throw new Error("Password is required");const ot=await this.storage.uploadBatch([CommonNFTInput.parse(tt)],{rewriteFileNames:{fileStartNumber:0}}),lt=getBaseUriFromBatch(ot),ut=await this.nextTokenIdToMintFn(),ht=await this.storage.uploadBatch(rt.map(Rt=>CommonNFTInput.parse(Rt)),{onProgress:st==null?void 0:st.onProgress,rewriteFileNames:{fileStartNumber:ut.toNumber()}}),mt=getBaseUriFromBatch(ht),bt=await this.contractWrapper.readContract.getBaseURICount(),vt=await this.hashDelayRevealPassword(bt,at),At=await this.contractWrapper.readContract.encryptDecrypt(toUtf8Bytes(mt),vt);let xt;if(await this.isLegacyContract())xt=At;else{const Rt=await this.contractWrapper.getChainID(),Dt=keccak256(["bytes","bytes","uint256"],[toUtf8Bytes(mt),vt,Rt]);xt=defaultAbiCoder.encode(["bytes","bytes32"],[At,Dt])}const Tt=await this.contractWrapper.sendTransaction("lazyMint",[ht.length,lt.endsWith("/")?lt:`${lt}/`,xt]),wt=this.contractWrapper.parseLogs("TokensLazyMinted",Tt==null?void 0:Tt.logs),Ct=wt[0].args.startTokenId,It=wt[0].args.endTokenId,St=[];for(let Rt=Ct;Rt.lte(It);Rt=Rt.add(1))St.push({id:Rt,receipt:Tt});return St}async reveal(tt,rt){if(!rt)throw new Error("Password is required");const at=await this.hashDelayRevealPassword(tt,rt);try{const st=await this.contractWrapper.callStatic().reveal(tt,at);if(!st.includes("://")||!st.endsWith("/"))throw new Error("invalid password")}catch{throw new Error("invalid password")}return{receipt:await this.contractWrapper.sendTransaction("reveal",[tt,at])}}async getBatchesToReveal(){const tt=await this.contractWrapper.readContract.getBaseURICount();if(tt.isZero())return[];const rt=Array.from(Array(tt.toNumber()).keys()),at=await Promise.all(rt.map(mt=>{if(hasFunction("getBatchIdAtIndex",this.contractWrapper))return this.contractWrapper.readContract.getBatchIdAtIndex(mt);if(hasFunction("baseURIIndices",this.contractWrapper))return this.contractWrapper.readContract.baseURIIndices(mt);throw new Error("Contract does not have getBatchIdAtIndex or baseURIIndices.")})),st=at.slice(0,at.length-1),ot=await Promise.all(Array.from([0,...st]).map(mt=>this.getNftMetadata(mt.toString()))),lt=await this.isLegacyContract(),ht=(await Promise.all(Array.from([...at]).map(mt=>lt?this.getLegacyEncryptedData(mt):this.contractWrapper.readContract.encryptedData(mt)))).map(mt=>hexDataLength(mt)>0?lt?mt:defaultAbiCoder.decode(["bytes","bytes32"],mt)[0]:mt);return ot.map((mt,bt)=>({batchId:BigNumber.from(bt),batchUri:mt.uri,placeholderMetadata:mt})).filter((mt,bt)=>hexDataLength(ht[bt])>0)}async hashDelayRevealPassword(tt,rt){const at=await this.contractWrapper.getChainID(),st=this.contractWrapper.readContract.address;return keccak256(["string","uint256","uint256","address"],[rt,at,tt,st])}async getNftMetadata(tt){return fetchTokenMetadataForContract(this.contractWrapper.readContract.address,this.contractWrapper.getProvider(),tt,this.storage)}async isLegacyContract(){if(hasFunction("contractVersion",this.contractWrapper))try{return await this.contractWrapper.readContract.contractVersion()<=2}catch{return!1}return!1}async getLegacyEncryptedData(tt){const at=await new Contract(this.contractWrapper.readContract.address,DeprecatedAbi,this.contractWrapper.getProvider()).functions.encryptedBaseURI(tt);return at.length>0?at[0]:"0x"}}const FEATURE_TOKEN_CLAIM_CONDITIONS_V1={name:"ERC20ClaimConditionsV1",namespace:"token.drop.claim",docLinks:{sdk:"sdk.erc20dclaimable",contracts:"DropSinglePhase_V1"},abis:[ERC20Abi$1,IDropSinglePhaseV1],features:{}},FEATURE_TOKEN_CLAIM_CONDITIONS_V2={name:"ERC20ClaimConditionsV2",namespace:"token.drop.claim",docLinks:{sdk:"sdk.erc20dclaimable",contracts:"DropSinglePhase"},abis:[ERC20Abi$1,IDropSinglePhase],features:{}},FEATURE_TOKEN_CLAIM_PHASES_V2={name:"ERC20ClaimPhasesV2",namespace:"token.drop.claim",docLinks:{sdk:"sdk.erc20dclaimable",contracts:"Drop"},abis:[ERC20Abi$1,IDrop],features:{}},FEATURE_TOKEN_CLAIM_PHASES_V1={name:"ERC20ClaimPhasesV1",namespace:"token.drop.claim",docLinks:{sdk:"sdk.erc20dclaimable",contracts:"Drop"},abis:[DropERC20_V2Abi],features:{}},FEATURE_TOKEN_BURNABLE={name:"ERC20Burnable",namespace:"token.burn",docLinks:{sdk:"sdk.erc20burnable",contracts:"IBurnableERC20"},abis:[ERC20Abi$1,IBurnableERC20Abi],features:{}},FEATURE_TOKEN_SIGNATURE_MINTABLE={name:"ERC20SignatureMintable",namespace:"token.signature",docLinks:{sdk:"sdk.erc20signaturemintable",contracts:"ISignatureMintERC20"},abis:[ERC20Abi$1,ISignatureMintERC20Abi],features:{}},FEATURE_TOKEN_BATCH_MINTABLE={name:"ERC20BatchMintable",namespace:"token.mint.batch",docLinks:{sdk:"sdk.erc20batchmintable",contracts:"IMulticall"},abis:[ERC20Abi$1,IMintableERC20Abi,MulticallAbi],features:{}},FEATURE_TOKEN_MINTABLE={name:"ERC20Mintable",namespace:"token.mint",docLinks:{sdk:"sdk.erc20mintable",contracts:"IMintableERC20"},abis:[ERC20Abi$1,IMintableERC20Abi],features:{[FEATURE_TOKEN_BATCH_MINTABLE.name]:FEATURE_TOKEN_BATCH_MINTABLE}},FEATURE_TOKEN_PERMIT={name:"ERC20Permit",namespace:"token.permit",docLinks:{sdk:"sdk.erc20permit",contracts:"IERC20Permit"},abis:[ERC20Abi$1,IERC20PermitAbi],features:{}},FEATURE_TOKEN={name:"ERC20",namespace:"token",docLinks:{sdk:"sdk.erc20",contracts:"IERC20"},abis:[ERC20Abi$1],features:{[FEATURE_TOKEN_BURNABLE.name]:FEATURE_TOKEN_BURNABLE,[FEATURE_TOKEN_MINTABLE.name]:FEATURE_TOKEN_MINTABLE,[FEATURE_TOKEN_CLAIM_CONDITIONS_V1.name]:FEATURE_TOKEN_CLAIM_CONDITIONS_V1,[FEATURE_TOKEN_CLAIM_CONDITIONS_V2.name]:FEATURE_TOKEN_CLAIM_CONDITIONS_V2,[FEATURE_TOKEN_CLAIM_PHASES_V1.name]:FEATURE_TOKEN_CLAIM_PHASES_V1,[FEATURE_TOKEN_CLAIM_PHASES_V2.name]:FEATURE_TOKEN_CLAIM_PHASES_V2,[FEATURE_TOKEN_SIGNATURE_MINTABLE.name]:FEATURE_TOKEN_SIGNATURE_MINTABLE,[FEATURE_TOKEN_PERMIT.name]:FEATURE_TOKEN_PERMIT}},FEATURE_NFT_BURNABLE={name:"ERC721Burnable",namespace:"nft.burn",docLinks:{sdk:"sdk.erc721burnable",contracts:"IBurnableERC721"},abis:[Erc721Abi,IBurnableERC721Abi],features:{}},FEATURE_NFT_REVEALABLE={name:"ERC721Revealable",namespace:"nft.drop.revealer",docLinks:{sdk:"sdk.delayedreveal",contracts:"DelayedReveal"},abis:[Erc721Abi,ILazyMintAbi,DelayedRevealAbi],features:{}},FEATURE_NFT_TIERED_DROP={name:"ERC721TieredDrop",namespace:"nft.tieredDrop",docLinks:{sdk:"sdk.erc721tiereddrop",contracts:"TieredDrop"},abis:[Erc721Abi,TieredDropAbi],features:{}},FEATURE_NFT_CLAIM_CONDITIONS_V1={name:"ERC721ClaimConditionsV1",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"DropSinglePhase_V1"},abis:[Erc721Abi,ILazyMintAbi,IDropSinglePhaseV1],features:{}},FEATURE_NFT_CLAIM_CONDITIONS_V2={name:"ERC721ClaimConditionsV2",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"DropSinglePhase"},abis:[Erc721Abi,ILazyMintAbi,IDropSinglePhase],features:{}},FEATURE_NFT_CLAIM_PHASES_V1={name:"ERC721ClaimPhasesV1",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"Drop"},abis:[DropERC721_V3Abi],features:{}},FEATURE_NFT_CLAIM_PHASES_V2={name:"ERC721ClaimPhasesV2",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"Drop"},abis:[Erc721Abi,ILazyMintAbi,IDrop],features:{}},FEATURE_NFT_CLAIM_CUSTOM={name:"ERC721ClaimCustom",namespace:"nft.drop.claim",docLinks:{sdk:"sdk.erc721claimable",contracts:"IClaimableERC721"},abis:[Erc721Abi,ILazyMintAbi,IClaimableERC721],features:{}},FEATURE_NFT_LAZY_MINTABLE={name:"ERC721LazyMintable",namespace:"nft.drop",docLinks:{sdk:"sdk.erc721lazymintable",contracts:"LazyMint"},abis:[Erc721Abi,ILazyMintAbi],features:{[FEATURE_NFT_REVEALABLE.name]:FEATURE_NFT_REVEALABLE,[FEATURE_NFT_CLAIM_CUSTOM.name]:FEATURE_NFT_CLAIM_CUSTOM,[FEATURE_NFT_CLAIM_CONDITIONS_V1.name]:FEATURE_NFT_CLAIM_CONDITIONS_V1,[FEATURE_NFT_CLAIM_CONDITIONS_V2.name]:FEATURE_NFT_CLAIM_CONDITIONS_V2,[FEATURE_NFT_CLAIM_PHASES_V1.name]:FEATURE_NFT_CLAIM_PHASES_V1,[FEATURE_NFT_CLAIM_PHASES_V2.name]:FEATURE_NFT_CLAIM_PHASES_V2}},FEATURE_NFT_BATCH_MINTABLE={name:"ERC721BatchMintable",namespace:"nft.mint.batch",docLinks:{sdk:"sdk.erc721batchmintable",contracts:"IMulticall"},abis:[Erc721Abi,IMintableERC721Abi,MulticallAbi],features:{}},FEATURE_NFT_MINTABLE={name:"ERC721Mintable",namespace:"nft.mint",docLinks:{sdk:"sdk.erc721mintable",contracts:"IMintableERC721"},abis:[Erc721Abi,IMintableERC721Abi],features:{[FEATURE_NFT_BATCH_MINTABLE.name]:FEATURE_NFT_BATCH_MINTABLE}},FEATURE_NFT_SIGNATURE_MINTABLE_V2={name:"ERC721SignatureMintV2",namespace:"nft.signature",docLinks:{sdk:"sdk.erc721signaturemint",contracts:"ISignatureMintERC721"},abis:[Erc721Abi,SignatureMintERC721Abi],features:{}},FEATURE_NFT_SIGNATURE_MINTABLE_V1={name:"ERC721SignatureMintV1",namespace:"nft.signature",docLinks:{sdk:"sdk.erc721signaturemint",contracts:"ISignatureMintERC721"},abis:[SignatureMintERC721_V1Abi],features:{}},FEATURE_NFT_ENUMERABLE={name:"ERC721Enumerable",namespace:"nft.query.owned",docLinks:{sdk:"sdk.erc721enumerable",contracts:"IERC721Enumerable"},abis:[Erc721Abi,Erc721EnumerableAbi],features:{}},FEATURE_NFT_SUPPLY={name:"ERC721Supply",namespace:"nft.query",docLinks:{sdk:"sdk.erc721supply",contracts:"IERC721Supply"},abis:[Erc721Abi,Erc721SupplyAbi],features:{[FEATURE_NFT_ENUMERABLE.name]:FEATURE_NFT_ENUMERABLE}},FEATURE_NFT={name:"ERC721",namespace:"nft",docLinks:{sdk:"sdk.erc721",contracts:"IERC721"},abis:[Erc721Abi],features:{[FEATURE_NFT_BURNABLE.name]:FEATURE_NFT_BURNABLE,[FEATURE_NFT_SUPPLY.name]:FEATURE_NFT_SUPPLY,[FEATURE_NFT_MINTABLE.name]:FEATURE_NFT_MINTABLE,[FEATURE_NFT_LAZY_MINTABLE.name]:FEATURE_NFT_LAZY_MINTABLE,[FEATURE_NFT_SIGNATURE_MINTABLE_V1.name]:FEATURE_NFT_SIGNATURE_MINTABLE_V1,[FEATURE_NFT_SIGNATURE_MINTABLE_V2.name]:FEATURE_NFT_SIGNATURE_MINTABLE_V2,[FEATURE_NFT_TIERED_DROP.name]:FEATURE_NFT_TIERED_DROP}},FEATURE_EDITION_BURNABLE={name:"ERC1155Burnable",namespace:"edition.burn",docLinks:{sdk:"sdk.erc1155burnable",contracts:"IBurnableERC1155"},abis:[Erc1155Abi,IBurnableERC1155Abi],features:{}},FEATURE_EDITION_CLAIM_CONDITIONS_V1={name:"ERC1155ClaimConditionsV1",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"DropSinglePhase1155"},abis:[Erc1155Abi,ILazyMintAbi,IDropSinglePhase1155_V1],features:{}},FEATURE_EDITION_CLAIM_CONDITIONS_V2={name:"ERC1155ClaimConditionsV2",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"DropSinglePhase1155"},abis:[Erc1155Abi,ILazyMintAbi,IDropSinglePhase1155],features:{}},FEATURE_EDITION_CLAIM_PHASES_V2={name:"ERC1155ClaimPhasesV2",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"Drop1155"},abis:[Erc1155Abi,ILazyMintAbi,IDropMultiPhase1155],features:{}},FEATURE_EDITION_CLAIM_PHASES_V1={name:"ERC1155ClaimPhasesV1",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"Drop1155"},abis:[DropERC1155_V2Abi],features:{}},FEATURE_EDITION_CLAIM_CUSTOM={name:"ERC1155ClaimCustom",namespace:"edition.drop.claim",docLinks:{sdk:"sdk.erc1155claimable",contracts:"IClaimableERC1155"},abis:[Erc1155Abi,ILazyMintAbi,IClaimableERC1155],features:{}},FEATURE_EDITION_REVEALABLE={name:"ERC1155Revealable",namespace:"edition.drop.revealer",docLinks:{sdk:"sdk.drop.delayedreveal",contracts:"DelayedReveal"},abis:[Erc1155Abi,ILazyMintAbi,DelayedRevealAbi],features:{}},FEATURE_EDITION_LAZY_MINTABLE_V2={name:"ERC1155LazyMintableV2",namespace:"edition.drop",docLinks:{sdk:"sdk.erc1155droppable",contracts:"LazyMint"},abis:[Erc1155Abi,ILazyMintAbi],features:{[FEATURE_EDITION_REVEALABLE.name]:FEATURE_EDITION_REVEALABLE,[FEATURE_EDITION_CLAIM_CUSTOM.name]:FEATURE_EDITION_CLAIM_CUSTOM,[FEATURE_EDITION_CLAIM_CONDITIONS_V1.name]:FEATURE_EDITION_CLAIM_CONDITIONS_V1,[FEATURE_EDITION_CLAIM_CONDITIONS_V2.name]:FEATURE_EDITION_CLAIM_CONDITIONS_V2,[FEATURE_EDITION_CLAIM_PHASES_V2.name]:FEATURE_EDITION_CLAIM_PHASES_V2}},FEATURE_EDITION_LAZY_MINTABLE_V1={name:"ERC1155LazyMintableV1",namespace:"edition.drop",docLinks:{sdk:"sdk.erc1155droppable",contracts:"LazyMint"},abis:[DropERC1155_V2Abi],features:{[FEATURE_EDITION_CLAIM_PHASES_V1.name]:FEATURE_EDITION_CLAIM_PHASES_V1}},FEATURE_EDITION_SIGNATURE_MINTABLE={name:"ERC1155SignatureMintable",namespace:"edition.signature",docLinks:{sdk:"sdk.erc1155signaturemintable",contracts:"ISignatureMintERC1155"},abis:[Erc1155Abi,ISignatureMintERC1155Abi],features:{}},FEATURE_EDITION_BATCH_MINTABLE={name:"ERC1155BatchMintable",namespace:"edition.mint.batch",docLinks:{sdk:"sdk.erc1155batchmintable",contracts:"IMulticall"},abis:[Erc1155Abi,IMintableERC1155Abi,MulticallAbi],features:{}},FEATURE_EDITION_MINTABLE={name:"ERC1155Mintable",namespace:"edition.mint",docLinks:{sdk:"sdk.erc1155mintable",contracts:"IMintableERC1155"},abis:[Erc1155Abi,IMintableERC1155Abi],features:{[FEATURE_EDITION_BATCH_MINTABLE.name]:FEATURE_EDITION_BATCH_MINTABLE}},FEATURE_EDITION_ENUMERABLE={name:"ERC1155Enumerable",namespace:"edition.query",docLinks:{sdk:"sdk.erc1155",contracts:"IERC1155"},abis:[Erc1155Abi,Erc1155EnumerableAbi],features:{}},FEATURE_EDITION={name:"ERC1155",namespace:"edition",docLinks:{sdk:"sdk.erc1155enumerable",contracts:"IERC1155Enumerable"},abis:[Erc1155Abi],features:{[FEATURE_EDITION_BURNABLE.name]:FEATURE_EDITION_BURNABLE,[FEATURE_EDITION_ENUMERABLE.name]:FEATURE_EDITION_ENUMERABLE,[FEATURE_EDITION_MINTABLE.name]:FEATURE_EDITION_MINTABLE,[FEATURE_EDITION_LAZY_MINTABLE_V1.name]:FEATURE_EDITION_LAZY_MINTABLE_V1,[FEATURE_EDITION_LAZY_MINTABLE_V2.name]:FEATURE_EDITION_LAZY_MINTABLE_V2,[FEATURE_EDITION_REVEALABLE.name]:FEATURE_EDITION_REVEALABLE,[FEATURE_EDITION_SIGNATURE_MINTABLE.name]:FEATURE_EDITION_SIGNATURE_MINTABLE}},SUPPORTED_FEATURES={[FEATURE_TOKEN.name]:FEATURE_TOKEN,[FEATURE_NFT.name]:FEATURE_NFT,[FEATURE_EDITION.name]:FEATURE_EDITION,[FEATURE_ROYALTY.name]:FEATURE_ROYALTY,[FEATURE_PLATFORM_FEE.name]:FEATURE_PLATFORM_FEE,[FEATURE_PRIMARY_SALE.name]:FEATURE_PRIMARY_SALE,[FEATURE_PERMISSIONS.name]:FEATURE_PERMISSIONS,[FEATURE_METADATA.name]:FEATURE_METADATA,[FEATURE_APPURI.name]:FEATURE_APPURI,[FEATURE_OWNER.name]:FEATURE_OWNER,[FEATURE_GASLESS.name]:FEATURE_GASLESS,[FEATURE_PACK_VRF.name]:FEATURE_PACK_VRF,[FEATURE_PLUGIN_ROUTER.name]:FEATURE_PLUGIN_ROUTER,[FEATURE_EXTENSION_ROUTER.name]:FEATURE_EXTENSION_ROUTER,[FEATURE_DIRECT_LISTINGS.name]:FEATURE_DIRECT_LISTINGS,[FEATURE_ENGLISH_AUCTIONS.name]:FEATURE_ENGLISH_AUCTIONS,[FEATURE_OFFERS.name]:FEATURE_OFFERS};let decoder;try{decoder=new TextDecoder}catch(it){}let src$1,srcEnd,position$1=0;const LEGACY_RECORD_INLINE_ID=105,RECORD_DEFINITIONS_ID=57342,RECORD_INLINE_ID=57343,BUNDLED_STRINGS_ID=57337,PACKED_REFERENCE_TAG_ID=6,STOP_CODE={};let currentDecoder={},currentStructures,srcString,srcStringStart=0,srcStringEnd=0,bundledStrings,referenceMap,currentExtensions=[],currentExtensionRanges=[],packedValues,dataView,restoreMapsAsObject,defaultOptions$2={useRecords:!1,mapsAsObjects:!0},sequentialMode=!1;class Decoder{constructor(tt){if(tt&&((tt.keyMap||tt._keyMap)&&!tt.useRecords&&(tt.useRecords=!1,tt.mapsAsObjects=!0),tt.useRecords===!1&&tt.mapsAsObjects===void 0&&(tt.mapsAsObjects=!0),tt.getStructures&&(tt.getShared=tt.getStructures),tt.getShared&&!tt.structures&&((tt.structures=[]).uninitialized=!0),tt.keyMap)){this.mapKey=new Map;for(let[rt,at]of Object.entries(tt.keyMap))this.mapKey.set(at,rt)}Object.assign(this,tt)}decodeKey(tt){return this.keyMap&&this.mapKey.get(tt)||tt}decode(tt,rt){if(src$1)return saveState(()=>(clearSource(),this?this.decode(tt,rt):Decoder.prototype.decode.call(defaultOptions$2,tt,rt)));srcEnd=rt>-1?rt:tt.length,position$1=0,srcStringEnd=0,srcString=null,bundledStrings=null,src$1=tt;try{dataView=tt.dataView||(tt.dataView=new DataView(tt.buffer,tt.byteOffset,tt.byteLength))}catch(at){throw src$1=null,tt instanceof Uint8Array?at:new Error("Source must be a Uint8Array or Buffer but was a "+(tt&&typeof tt=="object"?tt.constructor.name:typeof tt))}if(this instanceof Decoder){if(currentDecoder=this,packedValues=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return currentStructures=this.structures,checkedRead();(!currentStructures||currentStructures.length>0)&&(currentStructures=[])}else currentDecoder=defaultOptions$2,(!currentStructures||currentStructures.length>0)&&(currentStructures=[]),packedValues=null;return checkedRead()}}function checkedRead(){try{let it=read();if(bundledStrings){if(position$1>=bundledStrings.postBundlePosition){let tt=new Error("Unexpected bundle position");throw tt.incomplete=!0,tt}position$1=bundledStrings.postBundlePosition,bundledStrings=null}if(position$1==srcEnd)currentStructures=null,src$1=null,referenceMap&&(referenceMap=null);else if(position$1>srcEnd){let tt=new Error("Unexpected end of CBOR data");throw tt.incomplete=!0,tt}else if(!sequentialMode)throw new Error("Data read, but end of buffer not reached");return it}catch(it){throw clearSource(),(it instanceof RangeError||it.message.startsWith("Unexpected end of buffer"))&&(it.incomplete=!0),it}}function read(){let it=src$1[position$1++],tt=it>>5;if(it=it&31,it>23)switch(it){case 24:it=src$1[position$1++];break;case 25:if(tt==7)return getFloat16();it=dataView.getUint16(position$1),position$1+=2;break;case 26:if(tt==7){let rt=dataView.getFloat32(position$1);if(currentDecoder.useFloat32>2){let at=mult10[(src$1[position$1]&127)<<1|src$1[position$1+1]>>7];return position$1+=4,(at*rt+(rt>0?.5:-.5)>>0)/at}return position$1+=4,rt}it=dataView.getUint32(position$1),position$1+=4;break;case 27:if(tt==7){let rt=dataView.getFloat64(position$1);return position$1+=8,rt}if(tt>1){if(dataView.getUint32(position$1)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");it=dataView.getUint32(position$1+4)}else currentDecoder.int64AsNumber?(it=dataView.getUint32(position$1)*4294967296,it+=dataView.getUint32(position$1+4)):it=dataView.getBigUint64(position$1);position$1+=8;break;case 31:switch(tt){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let rt=[],at,st=0;for(;(at=read())!=STOP_CODE;)rt[st++]=at;return tt==4?rt:tt==3?rt.join(""):Buffer.concat(rt);case 5:let ot;if(currentDecoder.mapsAsObjects){let lt={};if(currentDecoder.keyMap)for(;(ot=read())!=STOP_CODE;)lt[safeKey(currentDecoder.decodeKey(ot))]=read();else for(;(ot=read())!=STOP_CODE;)lt[safeKey(ot)]=read();return lt}else{restoreMapsAsObject&&(currentDecoder.mapsAsObjects=!0,restoreMapsAsObject=!1);let lt=new Map;if(currentDecoder.keyMap)for(;(ot=read())!=STOP_CODE;)lt.set(currentDecoder.decodeKey(ot),read());else for(;(ot=read())!=STOP_CODE;)lt.set(ot,read());return lt}case 7:return STOP_CODE;default:throw new Error("Invalid major type for indefinite length "+tt)}default:throw new Error("Unknown token "+it)}switch(tt){case 0:return it;case 1:return~it;case 2:return readBin(it);case 3:if(srcStringEnd>=position$1)return srcString.slice(position$1-srcStringStart,(position$1+=it)-srcStringStart);if(srcStringEnd==0&&srcEnd<140&&it<32){let st=it<16?shortStringInJS(it):longStringInJS(it);if(st!=null)return st}return readFixedString(it);case 4:let rt=new Array(it);for(let st=0;st<it;st++)rt[st]=read();return rt;case 5:if(currentDecoder.mapsAsObjects){let st={};if(currentDecoder.keyMap)for(let ot=0;ot<it;ot++)st[safeKey(currentDecoder.decodeKey(read()))]=read();else for(let ot=0;ot<it;ot++)st[safeKey(read())]=read();return st}else{restoreMapsAsObject&&(currentDecoder.mapsAsObjects=!0,restoreMapsAsObject=!1);let st=new Map;if(currentDecoder.keyMap)for(let ot=0;ot<it;ot++)st.set(currentDecoder.decodeKey(read()),read());else for(let ot=0;ot<it;ot++)st.set(read(),read());return st}case 6:if(it>=BUNDLED_STRINGS_ID){let st=currentStructures[it&8191];if(st)return st.read||(st.read=createStructureReader(st)),st.read();if(it<65536){if(it==RECORD_INLINE_ID)return recordDefinition(read());if(it==RECORD_DEFINITIONS_ID){let ot=readJustLength(),lt=read();for(let ut=2;ut<ot;ut++)recordDefinition([lt++,read()]);return read()}else if(it==BUNDLED_STRINGS_ID)return readBundleExt();if(currentDecoder.getShared&&(loadShared(),st=currentStructures[it&8191],st))return st.read||(st.read=createStructureReader(st)),st.read()}}let at=currentExtensions[it];if(at)return at.handlesRead?at(read):at(read());{let st=read();for(let ot=0;ot<currentExtensionRanges.length;ot++){let lt=currentExtensionRanges[ot](it,st);if(lt!==void 0)return lt}return new Tag(st,it)}case 7:switch(it){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let st=(packedValues||getPackedValues())[it];if(st!==void 0)return st;throw new Error("Unknown token "+it)}default:if(isNaN(it)){let st=new Error("Unexpected end of CBOR data");throw st.incomplete=!0,st}throw new Error("Unknown CBOR token "+it)}}const validName=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function createStructureReader(it){function tt(){let rt=src$1[position$1++];if(rt=rt&31,rt>23)switch(rt){case 24:rt=src$1[position$1++];break;case 25:rt=dataView.getUint16(position$1),position$1+=2;break;case 26:rt=dataView.getUint32(position$1),position$1+=4;break;default:throw new Error("Expected array header, but got "+src$1[position$1-1])}let at=this.compiledReader;for(;at;){if(at.propertyCount===rt)return at(read);at=at.next}if(this.slowReads++>=3){let ot=this.length==rt?this:this.slice(0,rt);return at=currentDecoder.keyMap?new Function("r","return {"+ot.map(lt=>currentDecoder.decodeKey(lt)).map(lt=>validName.test(lt)?safeKey(lt)+":r()":"["+JSON.stringify(lt)+"]:r()").join(",")+"}"):new Function("r","return {"+ot.map(lt=>validName.test(lt)?safeKey(lt)+":r()":"["+JSON.stringify(lt)+"]:r()").join(",")+"}"),this.compiledReader&&(at.next=this.compiledReader),at.propertyCount=rt,this.compiledReader=at,at(read)}let st={};if(currentDecoder.keyMap)for(let ot=0;ot<rt;ot++)st[safeKey(currentDecoder.decodeKey(this[ot]))]=read();else for(let ot=0;ot<rt;ot++)st[safeKey(this[ot])]=read();return st}return it.slowReads=0,tt}function safeKey(it){return it==="__proto__"?"__proto_":it}let readFixedString=readStringJS;function readStringJS(it){let tt;if(it<16&&(tt=shortStringInJS(it)))return tt;if(it>64&&decoder)return decoder.decode(src$1.subarray(position$1,position$1+=it));const rt=position$1+it,at=[];for(tt="";position$1<rt;){const st=src$1[position$1++];if((st&128)===0)at.push(st);else if((st&224)===192){const ot=src$1[position$1++]&63;at.push((st&31)<<6|ot)}else if((st&240)===224){const ot=src$1[position$1++]&63,lt=src$1[position$1++]&63;at.push((st&31)<<12|ot<<6|lt)}else if((st&248)===240){const ot=src$1[position$1++]&63,lt=src$1[position$1++]&63,ut=src$1[position$1++]&63;let ht=(st&7)<<18|ot<<12|lt<<6|ut;ht>65535&&(ht-=65536,at.push(ht>>>10&1023|55296),ht=56320|ht&1023),at.push(ht)}else at.push(st);at.length>=4096&&(tt+=fromCharCode.apply(String,at),at.length=0)}return at.length>0&&(tt+=fromCharCode.apply(String,at)),tt}let fromCharCode=String.fromCharCode;function longStringInJS(it){let tt=position$1,rt=new Array(it);for(let at=0;at<it;at++){const st=src$1[position$1++];if((st&128)>0){position$1=tt;return}rt[at]=st}return fromCharCode.apply(String,rt)}function shortStringInJS(it){if(it<4)if(it<2){if(it===0)return"";{let tt=src$1[position$1++];if((tt&128)>1){position$1-=1;return}return fromCharCode(tt)}}else{let tt=src$1[position$1++],rt=src$1[position$1++];if((tt&128)>0||(rt&128)>0){position$1-=2;return}if(it<3)return fromCharCode(tt,rt);let at=src$1[position$1++];if((at&128)>0){position$1-=3;return}return fromCharCode(tt,rt,at)}else{let tt=src$1[position$1++],rt=src$1[position$1++],at=src$1[position$1++],st=src$1[position$1++];if((tt&128)>0||(rt&128)>0||(at&128)>0||(st&128)>0){position$1-=4;return}if(it<6){if(it===4)return fromCharCode(tt,rt,at,st);{let ot=src$1[position$1++];if((ot&128)>0){position$1-=5;return}return fromCharCode(tt,rt,at,st,ot)}}else if(it<8){let ot=src$1[position$1++],lt=src$1[position$1++];if((ot&128)>0||(lt&128)>0){position$1-=6;return}if(it<7)return fromCharCode(tt,rt,at,st,ot,lt);let ut=src$1[position$1++];if((ut&128)>0){position$1-=7;return}return fromCharCode(tt,rt,at,st,ot,lt,ut)}else{let ot=src$1[position$1++],lt=src$1[position$1++],ut=src$1[position$1++],ht=src$1[position$1++];if((ot&128)>0||(lt&128)>0||(ut&128)>0||(ht&128)>0){position$1-=8;return}if(it<10){if(it===8)return fromCharCode(tt,rt,at,st,ot,lt,ut,ht);{let mt=src$1[position$1++];if((mt&128)>0){position$1-=9;return}return fromCharCode(tt,rt,at,st,ot,lt,ut,ht,mt)}}else if(it<12){let mt=src$1[position$1++],bt=src$1[position$1++];if((mt&128)>0||(bt&128)>0){position$1-=10;return}if(it<11)return fromCharCode(tt,rt,at,st,ot,lt,ut,ht,mt,bt);let vt=src$1[position$1++];if((vt&128)>0){position$1-=11;return}return fromCharCode(tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt)}else{let mt=src$1[position$1++],bt=src$1[position$1++],vt=src$1[position$1++],At=src$1[position$1++];if((mt&128)>0||(bt&128)>0||(vt&128)>0||(At&128)>0){position$1-=12;return}if(it<14){if(it===12)return fromCharCode(tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At);{let xt=src$1[position$1++];if((xt&128)>0){position$1-=13;return}return fromCharCode(tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt)}}else{let xt=src$1[position$1++],Et=src$1[position$1++];if((xt&128)>0||(Et&128)>0){position$1-=14;return}if(it<15)return fromCharCode(tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt,Et);let Tt=src$1[position$1++];if((Tt&128)>0){position$1-=15;return}return fromCharCode(tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt,Et,Tt)}}}}}function readBin(it){return currentDecoder.copyBuffers?Uint8Array.prototype.slice.call(src$1,position$1,position$1+=it):src$1.subarray(position$1,position$1+=it)}let f32Array=new Float32Array(1),u8Array=new Uint8Array(f32Array.buffer,0,4);function getFloat16(){let it=src$1[position$1++],tt=src$1[position$1++],rt=(it&127)>>2;if(rt===31)return tt||it&3?NaN:it&128?-1/0:1/0;if(rt===0){let at=((it&3)<<8|tt)/16777216;return it&128?-at:at}return u8Array[3]=it&128|(rt>>1)+56,u8Array[2]=(it&7)<<5|tt>>3,u8Array[1]=tt<<5,u8Array[0]=0,f32Array[0]}class Tag{constructor(tt,rt){this.value=tt,this.tag=rt}}currentExtensions[0]=it=>new Date(it),currentExtensions[1]=it=>new Date(Math.round(it*1e3)),currentExtensions[2]=it=>{let tt=BigInt(0);for(let rt=0,at=it.byteLength;rt<at;rt++)tt=BigInt(it[rt])+tt<<BigInt(8);return tt},currentExtensions[3]=it=>BigInt(-1)-currentExtensions[2](it),currentExtensions[4]=it=>Number(it[1]+"e"+it[0]),currentExtensions[5]=it=>it[1]*Math.exp(it[0]*Math.log(2));const recordDefinition=it=>{let tt=it[0]-57344,rt=it[1],at=currentStructures[tt];at&&at.isShared&&((currentStructures.restoreStructures||(currentStructures.restoreStructures=[]))[tt]=at),currentStructures[tt]=rt,rt.read=createStructureReader(rt);let st={};if(currentDecoder.keyMap)for(let ot=2,lt=it.length;ot<lt;ot++){let ut=currentDecoder.decodeKey(rt[ot-2]);st[safeKey(ut)]=it[ot]}else for(let ot=2,lt=it.length;ot<lt;ot++){let ut=rt[ot-2];st[safeKey(ut)]=it[ot]}return st};currentExtensions[LEGACY_RECORD_INLINE_ID]=recordDefinition,currentExtensions[14]=it=>bundledStrings?bundledStrings[0].slice(bundledStrings.position0,bundledStrings.position0+=it):new Tag(it,14),currentExtensions[15]=it=>bundledStrings?bundledStrings[1].slice(bundledStrings.position1,bundledStrings.position1+=it):new Tag(it,15);let glbl={Error,RegExp};currentExtensions[27]=it=>(glbl[it[0]]||Error)(it[1],it[2]);const packedTable=it=>{if(src$1[position$1++]!=132)throw new Error("Packed values structure must be followed by a 4 element array");let tt=it();return packedValues=packedValues?tt.concat(packedValues.slice(tt.length)):tt,packedValues.prefixes=it(),packedValues.suffixes=it(),it()};packedTable.handlesRead=!0,currentExtensions[51]=packedTable,currentExtensions[PACKED_REFERENCE_TAG_ID]=it=>{if(!packedValues)if(currentDecoder.getShared)loadShared();else return new Tag(it,PACKED_REFERENCE_TAG_ID);if(typeof it=="number")return packedValues[16+(it>=0?2*it:-2*it-1)];throw new Error("No support for non-integer packed references yet")},currentExtensions[25]=it=>stringRefs[it],currentExtensions[256]=it=>{stringRefs=[];try{return it()}finally{stringRefs=null}},currentExtensions[256].handlesRead=!0,currentExtensions[28]=it=>{referenceMap||(referenceMap=new Map,referenceMap.id=0);let tt=referenceMap.id++,rt=src$1[position$1],at;rt>>5==4?at=[]:at={};let st={target:at};referenceMap.set(tt,st);let ot=it();return st.used?Object.assign(at,ot):(st.target=ot,ot)},currentExtensions[28].handlesRead=!0,currentExtensions[29]=it=>{let tt=referenceMap.get(it);return tt.used=!0,tt.target},currentExtensions[258]=it=>new Set(it),(currentExtensions[259]=it=>(currentDecoder.mapsAsObjects&&(currentDecoder.mapsAsObjects=!1,restoreMapsAsObject=!0),it())).handlesRead=!0;function combine$2(it,tt){return typeof it=="string"?it+tt:it instanceof Array?it.concat(tt):Object.assign({},it,tt)}function getPackedValues(){if(!packedValues)if(currentDecoder.getShared)loadShared();else throw new Error("No packed values available");return packedValues}const SHARED_DATA_TAG_ID=1399353956;currentExtensionRanges.push((it,tt)=>{if(it>=225&&it<=255)return combine$2(getPackedValues().prefixes[it-224],tt);if(it>=28704&&it<=32767)return combine$2(getPackedValues().prefixes[it-28672],tt);if(it>=1879052288&&it<=2147483647)return combine$2(getPackedValues().prefixes[it-1879048192],tt);if(it>=216&&it<=223)return combine$2(tt,getPackedValues().suffixes[it-216]);if(it>=27647&&it<=28671)return combine$2(tt,getPackedValues().suffixes[it-27639]);if(it>=1811940352&&it<=1879048191)return combine$2(tt,getPackedValues().suffixes[it-1811939328]);if(it==SHARED_DATA_TAG_ID)return{packedValues,structures:currentStructures.slice(0),version:tt};if(it==55799)return tt});const isLittleEndianMachine=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,typedArrays$2=[Uint8Array],typedArrayTags=[64];for(let it=0;it<typedArrays$2.length;it++)registerTypedArray(typedArrays$2[it],typedArrayTags[it]);function registerTypedArray(it,tt){let rt="get"+it.name.slice(0,-5);typeof it!="function"&&(it=null);let at=it.BYTES_PER_ELEMENT;for(let st=0;st<2;st++){if(!st&&at==1)continue;let ot=at==2?1:at==4?2:3;currentExtensions[st?tt:tt-4]=at==1||st==isLittleEndianMachine?lt=>{if(!it)throw new Error("Could not find typed array for code "+tt);return new it(Uint8Array.prototype.slice.call(lt,0).buffer)}:lt=>{if(!it)throw new Error("Could not find typed array for code "+tt);let ut=new DataView(lt.buffer,lt.byteOffset,lt.byteLength),ht=lt.length>>ot,mt=new it(ht),bt=ut[rt];for(let vt=0;vt<ht;vt++)mt[vt]=bt.call(ut,vt<<ot,st);return mt}}}function readBundleExt(){let it=readJustLength(),tt=position$1+read();for(let at=2;at<it;at++){let st=readJustLength();position$1+=st}let rt=position$1;return position$1=tt,bundledStrings=[readStringJS(readJustLength()),readStringJS(readJustLength())],bundledStrings.position0=0,bundledStrings.position1=0,bundledStrings.postBundlePosition=position$1,position$1=rt,read()}function readJustLength(){let it=src$1[position$1++]&31;if(it>23)switch(it){case 24:it=src$1[position$1++];break;case 25:it=dataView.getUint16(position$1),position$1+=2;break;case 26:it=dataView.getUint32(position$1),position$1+=4;break}return it}function loadShared(){if(currentDecoder.getShared){let it=saveState(()=>(src$1=null,currentDecoder.getShared()))||{},tt=it.structures||[];currentDecoder.sharedVersion=it.version,packedValues=currentDecoder.sharedValues=it.packedValues,currentStructures===!0?currentDecoder.structures=currentStructures=tt:currentStructures.splice.apply(currentStructures,[0,tt.length].concat(tt))}}function saveState(it){let tt=srcEnd,rt=position$1,at=srcStringStart,st=srcStringEnd,ot=srcString,lt=referenceMap,ut=bundledStrings,ht=new Uint8Array(src$1.slice(0,srcEnd)),mt=currentStructures,bt=currentDecoder,vt=sequentialMode,At=it();return srcEnd=tt,position$1=rt,srcStringStart=at,srcStringEnd=st,srcString=ot,referenceMap=lt,bundledStrings=ut,src$1=ht,sequentialMode=vt,currentStructures=mt,currentDecoder=bt,dataView=new DataView(src$1.buffer,src$1.byteOffset,src$1.byteLength),At}function clearSource(){src$1=null,referenceMap=null,currentStructures=null}const mult10=new Array(147);for(let it=0;it<256;it++)mult10[it]=Number("1e"+Math.floor(45.15-it*.30103));const defaultDecoder=new Decoder({useRecords:!1}),decode$2=defaultDecoder.decode;function matchesAbiInterface(it,tt){return hasMatchingAbi(it,tt.abis)}function hasMatchingAbi(it,tt){const rt=extractFunctionsFromAbi(it),at=tt.flatMap(ot=>extractFunctionsFromAbi(ot));return rt.filter(ot=>at.find(ut=>ut.name===ot.name&&ut.inputs.length===ot.inputs.length&&ut.inputs.every((ht,mt)=>{var bt;return ht.type==="tuple"||ht.type==="tuple[]"?ht.type===ot.inputs[mt].type&&((bt=ht.components)==null?void 0:bt.every((vt,At)=>{var xt,Et;return vt.type===((Et=(xt=ot.inputs[mt].components)==null?void 0:xt[At])==null?void 0:Et.type)})):ht.type===ot.inputs[mt].type}))!==void 0).length===at.length}async function extractConstructorParams(it,tt){const rt=await fetchPreDeployMetadata(it,tt);return extractConstructorParamsFromAbi(rt.abi)}async function extractFunctions(it,tt){const rt=await fetchPreDeployMetadata(it,tt);return extractFunctionsFromAbi(rt.abi,rt.metadata)}function extractCommentFromMetadata(it,tt,rt){var at,st,ot,lt,ut,ht,mt,bt,vt,At;return((ut=(lt=(st=(at=tt==null?void 0:tt.output)==null?void 0:at.userdoc)==null?void 0:st[rt])==null?void 0:lt[Object.keys(((ot=tt==null?void 0:tt.output)==null?void 0:ot.userdoc[rt])||{}).find(xt=>xt.includes(it||"unknown"))||""])==null?void 0:ut.notice)||((At=(vt=(mt=(ht=tt==null?void 0:tt.output)==null?void 0:ht.devdoc)==null?void 0:mt[rt])==null?void 0:vt[Object.keys(((bt=tt==null?void 0:tt.output)==null?void 0:bt.devdoc[rt])||{}).find(xt=>xt.includes(it||"unknown"))||""])==null?void 0:At.details)}function extractConstructorParamsFromAbi(it){for(const tt of it)if(tt.type==="constructor")return tt.inputs||[];return[]}function extractFunctionParamsFromAbi(it,tt){for(const rt of it)if(rt.type==="function"&&rt.name===tt)return rt.inputs||[];return[]}function extractFunctionsFromAbi(it,tt){var st,ot,lt,ut;const rt=(it||[]).filter(ht=>ht.type==="function"),at=[];for(const ht of rt){const mt=extractCommentFromMetadata(ht.name,tt,"methods"),bt=((ot=(st=ht.inputs)==null?void 0:st.map(Tt=>`${Tt.name||"key"}: ${toJSType(Tt)}`))==null?void 0:ot.join(", "))||"",vt=bt?`, ${bt}`:"",At=(ut=(lt=ht.outputs)==null?void 0:lt.map(Tt=>toJSType(Tt,!0)))==null?void 0:ut.join(", "),xt=At?`: Promise<${At}>`:": Promise<TransactionResult>",Et=`contract.call("${ht.name}"${vt})${xt}`;at.push({inputs:ht.inputs||[],outputs:ht.outputs||[],name:ht.name||"unknown",signature:Et,stateMutability:ht.stateMutability||"",comment:mt})}return at}function extractEventsFromAbi(it,tt){const rt=(it||[]).filter(st=>st.type==="event"),at=[];for(const st of rt){const ot=extractCommentFromMetadata(st.name,tt,"events");at.push({inputs:st.inputs||[],outputs:st.outputs||[],name:st.name||"unknown",comment:ot})}return at}function toJSType(it){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,at=it.type,st=!1;return at.endsWith("[]")&&(st=!0,at=at.slice(0,-2)),at.startsWith("bytes")&&(at="BytesLike"),(at.startsWith("uint")||at.startsWith("int"))&&(at=tt?"BigNumber":"BigNumberish"),at.startsWith("bool")&&(at="boolean"),at==="address"&&(at="string"),at==="tuple"&&it.components&&(at=`{ ${it.components.map(ot=>toJSType(ot,!1,!0)).join(", ")} }`),st&&(at+="[]"),rt&&(at=`${it.name}: ${at}`),at}function extractMinimalProxyImplementationAddress(it){if(it.startsWith("0x363d3d373d3d3d363d73"))return`0x${it.slice(22,62)}`;if(it.startsWith("0x36603057343d5230"))return`0x${it.slice(122,162)}`;if(it.startsWith("0x3d3d3d3d363d3d37363d73"))return`0x${it.slice(24,64)}`;if(it.startsWith("0x366000600037611000600036600073"))return`0x${it.slice(32,72)}`}async function resolveContractUriFromAddress(it,tt){const rt=await tt.getCode(it);if(rt==="0x"){const at=await tt.getNetwork();throw new Error(`Contract at ${it} does not exist on chain '${at.name}' (chainId: ${at.chainId})`)}try{const at=extractMinimalProxyImplementationAddress(rt);if(at)return await resolveContractUriFromAddress(at,tt)}catch{}try{const at=await tt.getStorageAt(it,BigNumber.from("0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc")),st=hexStripZeros(at);if(st!=="0x")return await resolveContractUriFromAddress(st,tt)}catch{}return await extractIPFSHashFromBytecode(rt)}function extractIPFSHashFromBytecode(it){const tt=hexToBytes(it),rt=tt[tt.length-2]*256+tt[tt.length-1],at=Uint8Array.from(tt.slice(tt.length-2-rt,-2)),st=decode$2(at);if("ipfs"in st&&st.ipfs)try{return`ipfs://${bs58.encode(st.ipfs)}`}catch(ot){console.warn("feature-detection ipfs cbor failed",ot)}}function hexToBytes(it){if(it=it.toString(16),it.startsWith("0x")||(it=`0x${it}`),!isHexStrict(it))throw new Error(`Given value "${it}" is not a valid hex string.`);it=it.replace(/^0x/i,"");const tt=[];for(let rt=0;rt<it.length;rt+=2)tt.push(parseInt(it.slice(rt,rt+2),16));return tt}function isHexStrict(it){return(typeof it=="string"||typeof it=="number")&&/^(-)?0x[0-9a-f]*$/i.test(it.toString())}async function fetchRawPredeployMetadata(it,tt){return PreDeployMetadata.parse(JSON.parse(await(await tt.download(it)).text()))}async function fetchPreDeployMetadata(it,tt){const rt=await fetchRawPredeployMetadata(it,tt),at=await(await tt.download(rt.bytecodeUri)).text(),st=await fetchContractMetadata(rt.metadataUri,tt);return PreDeployMetadataFetchedSchema.parse({...rt,...st,bytecode:at})}async function fetchExtendedReleaseMetadata(it,tt){const rt=await(await tt.download(it)).text();return FullPublishMetadataSchemaOutput.parse(JSON.parse(rt))}function detectFeatures(it){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:SUPPORTED_FEATURES;const rt={};for(const at in tt){const st=tt[at],ot=matchesAbiInterface(it,st),lt=detectFeatures(it,st.features);rt[at]={...st,features:lt,enabled:ot}}return rt}function extractFeatures(it,tt){if(!!it)for(const rt in it){const at=it[rt];at.enabled&&tt.push(at),extractFeatures(at.features,tt)}}function getAllDetectedFeatureNames(it){const tt=[];return extractFeatures(detectFeatures(it),tt),tt.map(rt=>rt.name)}function isFeatureEnabled(it,tt){const rt=detectFeatures(it);return _featureEnabled(rt,tt)}function assertEnabled(it,tt){if(!it)throw new ExtensionNotImplementedError(tt);return it}function detectContractFeature(it,tt){return isFeatureEnabled(AbiSchema.parse(it.abi),tt)}function _featureEnabled(it,tt){const rt=Object.keys(it);if(!rt.includes(tt)){let st=!1;for(const ot of rt){const lt=it[ot];if(st=_featureEnabled(lt.features,tt),st)break}return st}return it[tt].enabled}function hasFunction(it,tt){return it in tt.readContract.functions}function buildTransactionFunction(it){async function tt(){return(await it(...arguments)).execute()}return tt.prepare=it,tt}async function defaultGaslessSendFunction(it,tt,rt,at){return at&&"biconomy"in at?biconomySendFunction(it,tt,rt,at):defenderSendFunction(it,tt,rt,at)}async function biconomySendFunction(it,tt,rt,at){var vt;invariant$1(at&&"biconomy"in at,"calling biconomySendFunction without biconomy"),invariant$1(tt&&rt,"signer and provider must be set");const st=new Contract(getContractAddressByChainId(it.chainId,"biconomyForwarder"),BiconomyForwarderAbi,rt),ot=0,lt=await getAndIncrementNonce(st,"getNonce",[it.from,ot]),ut={from:it.from,to:it.to,token:AddressZero,txGas:it.gasLimit.toNumber(),tokenGasPrice:"0",batchId:ot,batchNonce:lt.toNumber(),deadline:Math.floor(Date.now()/1e3+(at&&"biconomy"in at&&((vt=at.biconomy)==null?void 0:vt.deadlineSeconds)||3600)),data:it.data},ht=arrayify(keccak256(["address","address","address","uint256","uint256","uint256","uint256","uint256","bytes32"],[ut.from,ut.to,ut.token,ut.txGas,ut.tokenGasPrice,ut.batchId,ut.batchNonce,ut.deadline,keccak256$1(ut.data)])),mt=await tt.signMessage(ht),bt=await fetch$1("https://api.biconomy.io/api/v2/meta-tx/native",{method:"POST",body:JSON.stringify({from:it.from,apiId:at.biconomy.apiId,params:[ut,mt],to:it.to,gasLimit:it.gasLimit.toHexString()}),headers:{"x-api-key":at.biconomy.apiKey,"Content-Type":"application/json;charset=utf-8"}});if(bt.ok){const At=await bt.json();if(!At.txHash)throw new Error(`relay transaction failed: ${At.log}`);return At.txHash}throw new Error(`relay transaction failed with status: ${bt.status} (${bt.statusText})`)}async function defenderSendFunction(it,tt,rt,at){invariant$1(at&&"openzeppelin"in at,"calling openzeppelin gasless transaction without openzeppelin config in the SDK options"),invariant$1(tt,"provider is not set"),invariant$1(rt,"provider is not set");const st=at.openzeppelin.relayerForwarderAddress||(at.openzeppelin.useEOAForwarder?CONTRACT_ADDRESSES[it.chainId].openzeppelinForwarderEOA:CONTRACT_ADDRESSES[it.chainId].openzeppelinForwarder),ot=new Contract(st,ForwarderABI,rt),lt=await getAndIncrementNonce(ot,"getNonce",[it.from]);let ut,ht,mt;at.experimentalChainlessSupport?(ut={name:"GSNv2 Forwarder",version:"0.0.1",verifyingContract:st},ht={ForwardRequest:ChainAwareForwardRequest},mt={from:it.from,to:it.to,value:BigNumber.from(0).toString(),gas:BigNumber.from(it.gasLimit).toString(),nonce:BigNumber.from(lt).toString(),data:it.data,chainid:BigNumber.from(it.chainId).toString()}):(ut={name:"GSNv2 Forwarder",version:"0.0.1",chainId:it.chainId,verifyingContract:st},ht={ForwardRequest},mt={from:it.from,to:it.to,value:BigNumber.from(0).toString(),gas:BigNumber.from(it.gasLimit).toString(),nonce:BigNumber.from(lt).toString(),data:it.data});let bt;if(it.functionName==="approve"&&it.functionArgs.length===2){const Et=it.functionArgs[0],Tt=it.functionArgs[1],{message:wt,signature:Ct}=await signEIP2612Permit(tt,it.to,it.from,Et,Tt),{r:It,s:St,v:Rt}=splitSignature(Ct);mt={to:it.to,owner:wt.owner,spender:wt.spender,value:BigNumber.from(wt.value).toString(),nonce:BigNumber.from(wt.nonce).toString(),deadline:BigNumber.from(wt.deadline).toString(),r:It,s:St,v:Rt},bt=Ct}else{const{signature:Et}=await signTypedDataInternal(tt,ut,ht,mt);bt=Et}let vt="forward";mt!=null&&mt.owner&&(vt="permit");const At=JSON.stringify({request:mt,signature:bt,forwarderAddress:st,type:vt}),xt=await fetch$1(at.openzeppelin.relayerUrl,{method:"POST",body:At});if(xt.ok){const Et=await xt.json();if(!Et.result)throw new Error(`Relay transaction failed: ${Et.message}`);return JSON.parse(Et.result).txHash}throw new Error(`relay transaction failed with status: ${xt.status} (${xt.statusText})`)}let ListingType;(function(it){it[it.Direct=0]="Direct",it[it.Auction=1]="Auction"})(ListingType||(ListingType={}));let Status;(function(it){it[it.UNSET=0]="UNSET",it[it.Created=1]="Created",it[it.Completed=2]="Completed",it[it.Cancelled=3]="Cancelled",it[it.Active=4]="Active",it[it.Expired=5]="Expired"})(Status||(Status={}));let ProposalState;(function(it){it[it.Pending=0]="Pending",it[it.Active=1]="Active",it[it.Canceled=2]="Canceled",it[it.Defeated=3]="Defeated",it[it.Succeeded=4]="Succeeded",it[it.Queued=5]="Queued",it[it.Expired=6]="Expired",it[it.Executed=7]="Executed"})(ProposalState||(ProposalState={}));let VoteType;(function(it){it[it.Against=0]="Against",it[it.For=1]="For",it[it.Abstain=2]="Abstain"})(VoteType||(VoteType={}));let ClaimEligibility;(function(it){it.NotEnoughSupply="There is not enough supply to claim.",it.AddressNotAllowed="This address is not on the allowlist.",it.WaitBeforeNextClaimTransaction="Not enough time since last claim transaction. Please wait.",it.AlreadyClaimed="You have already claimed the token.",it.NotEnoughTokens="There are not enough tokens in the wallet to pay for the claim.",it.NoActiveClaimPhase="There is no active claim phase at the moment. Please check back in later.",it.NoClaimConditionSet="There is no claim condition set.",it.NoWallet="No wallet connected.",it.Unknown="No claim conditions found."})(ClaimEligibility||(ClaimEligibility={}));class Transaction{static fromContractWrapper(tt){const rt=tt.contractWrapper.getSigner();if(!rt)throw new Error("Cannot create a transaction without a signer. Please ensure that you have a connected signer.");const at={...tt,contract:tt.contractWrapper.writeContract,provider:tt.contractWrapper.getProvider(),signer:rt,gasless:tt.contractWrapper.options.gasless};return new Transaction(at)}static async fromContractInfo(tt){const rt=tt.storage||new ThirdwebStorage;let at=tt.contractAbi;if(!at)try{at=(await fetchContractMetadataFromAddress(tt.contractAddress,tt.provider,rt)).abi}catch{throw new Error(`Could resolve contract metadata for address ${tt.contractAddress}. Please pass the contract ABI manually with the 'contractAbi' option.`)}const st=new Contract(tt.contractAddress,at,tt.provider),ot={...tt,storage:rt,contract:st};return new Transaction(ot)}constructor(tt){_defineProperty$4(this,"contract",void 0),_defineProperty$4(this,"method",void 0),_defineProperty$4(this,"args",void 0),_defineProperty$4(this,"overrides",void 0),_defineProperty$4(this,"provider",void 0),_defineProperty$4(this,"signer",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"gaslessOptions",void 0),_defineProperty$4(this,"parse",void 0),this.method=tt.method,this.args=tt.args,this.overrides=tt.overrides||{},this.provider=tt.provider,this.signer=tt.signer,this.gaslessOptions=tt.gasless,this.parse=tt.parse,this.signer.provider||(this.signer=this.signer.connect(this.provider)),this.contract=tt.contract.connect(this.signer),this.storage=tt.storage||new ThirdwebStorage}getMethod(){return this.method}getArgs(){return this.args}getOverrides(){return this.overrides}getValue(){return this.overrides.value||0}getGaslessOptions(){return this.gaslessOptions}setArgs(tt){return this.args=tt,this}setOverrides(tt){return this.overrides=tt,this}updateOverrides(tt){return this.overrides={...this.overrides,...tt},this}setValue(tt){return this.updateOverrides({value:tt}),this}setGasLimit(tt){return this.updateOverrides({gasLimit:tt}),this}setGasPrice(tt){return this.updateOverrides({gasPrice:tt}),this}setNonce(tt){return this.updateOverrides({nonce:tt}),this}setMaxFeePerGas(tt){return this.updateOverrides({maxFeePerGas:tt}),this}setMaxPriorityFeePerGas(tt){return this.updateOverrides({maxPriorityFeePerGas:tt}),this}setType(tt){return this.updateOverrides({type:tt}),this}setAccessList(tt){return this.updateOverrides({accessList:tt}),this}setCustomData(tt){return this.updateOverrides({customData:tt}),this}setCcipReadEnabled(tt){return this.updateOverrides({ccipReadEnabled:tt}),this}setGaslessOptions(tt){return this.gaslessOptions=tt,this}setParse(tt){return this.parse=tt,this}encode(){return this.contract.interface.encodeFunctionData(this.method,this.args)}async sign(){const rt={...await this.getGasOverrides(),...this.overrides};rt.gasLimit||(rt.gasLimit=await this.estimateGasLimit());const at=await this.contract.populateTransaction[this.method](...this.args,rt),st=await this.contract.signer.populateTransaction(at);return await this.contract.signer.signTransaction(st)}async simulate(){if(!this.contract.callStatic[this.method])throw this.functionError();try{return await this.contract.callStatic[this.method](...this.args,...this.overrides.value?[{value:this.overrides.value}]:[])}catch(tt){throw await this.transactionError(tt)}}async estimateGasLimit(){if(!this.contract.estimateGas[this.method])throw this.functionError();try{return await this.contract.estimateGas[this.method](...this.args,this.overrides)}catch(tt){throw await this.simulate(),this.transactionError(tt)}}async estimateGasCost(){const tt=await this.estimateGasLimit(),rt=await this.getGasPrice(),at=tt.mul(rt);return{ether:formatEther(at),wei:at}}async send(){if(!this.contract.functions[this.method])throw this.functionError();if(this.gaslessOptions&&("openzeppelin"in this.gaslessOptions||"biconomy"in this.gaslessOptions))return this.sendGasless();const rt={...await this.getGasOverrides(),...this.overrides};rt.gasLimit||(rt.gasLimit=await this.estimateGasLimit());try{return await this.contract.functions[this.method](...this.args,rt)}catch(at){const st=await(rt.from||this.getSignerAddress()),ot=await(rt.value?rt.value:0),lt=await this.provider.getBalance(st);throw lt.eq(0)||ot&&lt.lt(ot)?await this.transactionError(new Error("You have insufficient funds in your account to execute this transaction.")):await this.transactionError(at)}}async execute(){const tt=await this.send();let rt;try{rt=await tt.wait()}catch(at){throw await this.simulate(),await this.transactionError(at)}return this.parse?this.parse(rt):{receipt:rt}}async getSignerAddress(){return this.signer.getAddress()}async sendGasless(){var At;invariant$1(this.gaslessOptions&&("openzeppelin"in this.gaslessOptions||"biconomy"in this.gaslessOptions),"No gasless options set on this transaction!");const tt=[...this.args];if(this.method==="multicall"&&Array.isArray(this.args[0])&&tt[0].length>0){const xt=await this.getSignerAddress();tt[0]=tt[0].map(Et=>pack(["bytes","address"],[Et,xt]))}invariant$1(this.signer,"Cannot execute gasless transaction without valid signer");const rt=(await this.provider.getNetwork()).chainId,at=await(this.overrides.from||this.getSignerAddress()),st=this.contract.address,ot=((At=this.overrides)==null?void 0:At.value)||0;if(BigNumber.from(ot).gt(0))throw new Error("Cannot send native token value with gasless transaction");const lt=this.contract.interface.encodeFunctionData(this.method,tt);let ut=BigNumber.from(0);try{ut=(await this.contract.estimateGas[this.method](...tt)).mul(2)}catch{}ut.lt(1e5)&&(ut=BigNumber.from(5e5)),this.overrides.gasLimit&&BigNumber.from(this.overrides.gasLimit).gt(ut)&&(ut=BigNumber.from(this.overrides.gasLimit));const ht={from:at,to:st,data:lt,chainId:rt,gasLimit:ut,functionName:this.method,functionArgs:tt,callOverrides:this.overrides},mt=await defaultGaslessSendFunction(ht,this.signer,this.provider,this.gaslessOptions);let bt,vt=1;for(;!bt;)if(bt=await this.provider.getTransaction(mt),bt||(await new Promise(xt=>setTimeout(xt,Math.min(vt*1e3,1e4))),vt++),vt>20)throw new Error(`Unable to retrieve transaction with hash ${mt}`);return bt}async getGasOverrides(){if(isBrowser$3())return{};const tt=await this.provider.getFeeData();if(tt.maxFeePerGas&&tt.maxPriorityFeePerGas){const at=(await this.provider.getNetwork()).chainId,st=await this.provider.getBlock("latest"),ot=st&&st.baseFeePerGas?st.baseFeePerGas:parseUnits("1","gwei");let lt;at===ChainId$1.Mumbai||at===ChainId$1.Polygon?lt=await getPolygonGasPriorityFee(at):lt=BigNumber.from(tt.maxPriorityFeePerGas);const ut=this.getPreferredPriorityFee(lt);return{maxFeePerGas:ot.mul(2).add(ut),maxPriorityFeePerGas:ut}}else return{gasPrice:await this.getGasPrice()}}getPreferredPriorityFee(tt){const rt=tt.div(100).mul(10),at=tt.add(rt),st=parseUnits("300","gwei"),ot=parseUnits("2.5","gwei");return at.gt(st)?st:at.lt(ot)?ot:at}async getGasPrice(){const tt=await this.provider.getGasPrice(),rt=parseUnits("300","gwei"),at=tt.div(100).mul(10),st=tt.add(at);return st.gt(rt)?rt:st}functionError(){return new Error(`Contract "${this.contract.address}" does not have function "${this.method}"`)}async transactionError(tt){var Ct,It,St;const rt=this.provider,at=await rt.getNetwork(),st=await(this.overrides.from||this.getSignerAddress()),ot=this.contract.address,lt=this.encode(),ut=BigNumber.from(this.overrides.value||0),ht=(Ct=rt.connection)==null?void 0:Ct.url,mt=this.contract.interface.getFunction(this.method),bt=this.args.map(Rt=>JSON.stringify(Rt).length<=80?JSON.stringify(Rt):JSON.stringify(Rt,void 0,2)),vt=bt.join(", ").length<=80?bt.join(", "):`
`+bt.map(Rt=>"  "+Rt.split(`
`).join(`
  `)).join(`,
`)+`
`,At=`${mt.name}(${vt})`,xt=tt.transactionHash||((It=tt.transaction)==null?void 0:It.hash)||((St=tt.receipt)==null?void 0:St.transactionHash),Et=parseRevertReason(tt);let Tt,wt;try{const Rt=await fetchContractMetadataFromAddress(this.contract.address,this.provider,this.storage);Rt.name&&(wt=Rt.name),Rt.metadata.sources&&(Tt=await fetchSourceFilesFromMetadata(Rt,this.storage))}catch{}return new TransactionError({reason:Et,from:st,to:ot,method:At,data:lt,network:at,rpcUrl:ht,value:ut,hash:xt,contractName:wt,sources:Tt})}}class DropClaimConditions{constructor(tt,rt,at){var st=this;_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"set",buildTransactionFunction(async function(ot){let lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ut=ot;if(st.isLegacySinglePhaseDrop(st.contractWrapper)||st.isNewSinglePhaseDrop(st.contractWrapper)){if(lt=!0,ot.length===0)ut=[{startTime:new Date(0),currencyAddress:AddressZero,price:0,maxClaimableSupply:0,maxClaimablePerWallet:0,waitInSeconds:0,merkleRootHash:hexZeroPad([0],32),snapshot:[]}];else if(ot.length>1)throw new Error("Single phase drop contract cannot have multiple claim conditions, only one is allowed")}(st.isNewSinglePhaseDrop(st.contractWrapper)||st.isNewMultiphaseDrop(st.contractWrapper))&&ut.forEach(Et=>{var Tt;if(Et.snapshot&&Et.snapshot.length>0&&(Et.maxClaimablePerWallet===void 0||Et.maxClaimablePerWallet==="unlimited"))throw new Error(`maxClaimablePerWallet must be set to a specific value when an allowlist is set.
Example: Set it to 0 to only allow addresses in the allowlist to claim the amount specified in the allowlist.
contract.claimConditions.set([{ snapshot: [{ address: '0x...', maxClaimable: 1 }], maxClaimablePerWallet: 0 }])`);if(Et.snapshot&&Et.snapshot.length>0&&((Tt=Et.maxClaimablePerWallet)==null?void 0:Tt.toString())==="0"&&Et.snapshot.map(wt=>{var Ct;return typeof wt=="string"?0:Number(((Ct=wt.maxClaimable)==null?void 0:Ct.toString())||0)}).reduce((wt,Ct)=>wt+Ct,0)===0)throw new Error("maxClaimablePerWallet is set to 0, and all addresses in the allowlist have max claimable 0. This means that no one can claim.")});const{snapshotInfos:ht,sortedConditions:mt}=await processClaimConditionInputs(ut,await st.getTokenDecimals(),st.contractWrapper.getProvider(),st.storage,st.getSnapshotFormatVersion()),bt={};ht.forEach(Et=>{bt[Et.merkleRoot]=Et.snapshotUri});const vt=await st.metadata.get(),At=[];if(!fastDeepEqual(vt.merkle,bt)){const Et=st.metadata.parseInputMetadata({...vt,merkle:bt}),Tt=await st.metadata._parseAndUploadMetadata(Et);if(hasFunction("setContractURI",st.contractWrapper))At.push(st.contractWrapper.readContract.interface.encodeFunctionData("setContractURI",[Tt]));else throw new Error("Setting a merkle root requires implementing ContractMetadata in your contract to support storing a merkle root.")}const xt=st.contractWrapper;if(st.isLegacySinglePhaseDrop(xt))At.push(xt.readContract.interface.encodeFunctionData("setClaimConditions",[abstractContractModelToLegacy(mt[0]),lt]));else if(st.isLegacyMultiPhaseDrop(xt))At.push(xt.readContract.interface.encodeFunctionData("setClaimConditions",[mt.map(abstractContractModelToLegacy),lt]));else if(st.isNewSinglePhaseDrop(xt))At.push(xt.readContract.interface.encodeFunctionData("setClaimConditions",[abstractContractModelToNew(mt[0]),lt]));else if(st.isNewMultiphaseDrop(xt))At.push(xt.readContract.interface.encodeFunctionData("setClaimConditions",[mt.map(abstractContractModelToNew),lt]));else throw new Error("Contract does not support claim conditions");return Transaction.fromContractWrapper({contractWrapper:st.contractWrapper,method:"multicall",args:[At]})})),_defineProperty$4(this,"update",buildTransactionFunction(async(ot,lt)=>{const ut=await this.getAll(),ht=await updateExistingClaimConditions(ot,lt,ut);return await this.set.prepare(ht)})),this.storage=at,this.contractWrapper=tt,this.metadata=rt}async getActive(tt){const rt=await this.get(),at=await this.metadata.get();return await transformResultToClaimCondition(rt,await this.getTokenDecimals(),this.contractWrapper.getProvider(),at.merkle||{},this.storage,(tt==null?void 0:tt.withAllowList)||!1)}async get(tt){if(this.isLegacySinglePhaseDrop(this.contractWrapper)){const rt=await this.contractWrapper.readContract.claimCondition();return legacyContractModelToAbstract(rt)}else if(this.isLegacyMultiPhaseDrop(this.contractWrapper)){const rt=tt!==void 0?tt:await this.contractWrapper.readContract.getActiveClaimConditionId(),at=await this.contractWrapper.readContract.getClaimConditionById(rt);return legacyContractModelToAbstract(at)}else if(this.isNewSinglePhaseDrop(this.contractWrapper)){const rt=await this.contractWrapper.readContract.claimCondition();return newContractModelToAbstract(rt)}else if(this.isNewMultiphaseDrop(this.contractWrapper)){const rt=tt!==void 0?tt:await this.contractWrapper.readContract.getActiveClaimConditionId(),at=await this.contractWrapper.readContract.getClaimConditionById(rt);return newContractModelToAbstract(at)}else throw new Error("Contract does not support claim conditions")}async getAll(tt){if(this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper)){const rt=await this.contractWrapper.readContract.claimCondition(),at=rt.currentStartId.toNumber(),st=rt.count.toNumber(),ot=[];for(let ht=at;ht<at+st;ht++)ot.push(await this.get(ht));const lt=await this.metadata.get(),ut=await this.getTokenDecimals();return Promise.all(ot.map(ht=>transformResultToClaimCondition(ht,ut,this.contractWrapper.getProvider(),lt.merkle,this.storage,(tt==null?void 0:tt.withAllowList)||!1)))}else return[await this.getActive(tt)]}async canClaim(tt,rt){return(await this.getClaimIneligibilityReasons(tt,rt)).length===0}async getClaimIneligibilityReasons(tt,rt){const at=[];let st,ot;const lt=await this.getTokenDecimals(),ut=parseUnits(AmountSchema.parse(tt),lt);if(rt===void 0)try{rt=await this.contractWrapper.getSignerAddress()}catch(vt){console.warn("failed to get signer address",vt)}if(!rt)return[ClaimEligibility.NoWallet];try{ot=await this.getActive()}catch(vt){return includesErrorMessage(vt,"!CONDITION")||includesErrorMessage(vt,"no active mint condition")?(at.push(ClaimEligibility.NoClaimConditionSet),at):(console.warn("failed to get active claim condition",vt),at.push(ClaimEligibility.Unknown),at)}ot.availableSupply!=="unlimited"&&parseUnits(ot.availableSupply,lt).lt(ut)&&at.push(ClaimEligibility.NotEnoughSupply);const mt=stripZeros(ot.merkleRootHash).length>0;let bt=null;if(mt){if(bt=await this.getClaimerProofs(rt),!bt&&(this.isLegacySinglePhaseDrop(this.contractWrapper)||this.isLegacyMultiPhaseDrop(this.contractWrapper)))return at.push(ClaimEligibility.AddressNotAllowed),at;if(bt)try{const vt=await this.prepareClaim(tt,!1,lt,rt);let At;if(this.isLegacyMultiPhaseDrop(this.contractWrapper)){if(st=await this.contractWrapper.readContract.getActiveClaimConditionId(),[At]=await this.contractWrapper.readContract.verifyClaimMerkleProof(st,rt,tt,vt.proofs,vt.maxClaimable),!At)return at.push(ClaimEligibility.AddressNotAllowed),at}else if(this.isLegacySinglePhaseDrop(this.contractWrapper)){if([At]=await this.contractWrapper.readContract.verifyClaimMerkleProof(rt,tt,{proof:vt.proofs,maxQuantityInAllowlist:vt.maxClaimable}),!At)return at.push(ClaimEligibility.AddressNotAllowed),at}else if(this.isNewSinglePhaseDrop(this.contractWrapper)){if(await this.contractWrapper.readContract.verifyClaim(rt,tt,vt.currencyAddress,vt.price,{proof:vt.proofs,quantityLimitPerWallet:vt.maxClaimable,currency:vt.currencyAddressInProof,pricePerToken:vt.priceInProof}),convertQuantityToBigNumber(ot.maxClaimablePerWallet,lt).eq(0)&&vt.maxClaimable===MaxUint256$1||vt.maxClaimable===BigNumber.from(0))return at.push(ClaimEligibility.AddressNotAllowed),at}else if(this.isNewMultiphaseDrop(this.contractWrapper)&&(st=await this.contractWrapper.readContract.getActiveClaimConditionId(),await this.contractWrapper.readContract.verifyClaim(st,rt,tt,vt.currencyAddress,vt.price,{proof:vt.proofs,quantityLimitPerWallet:vt.maxClaimable,currency:vt.currencyAddressInProof,pricePerToken:vt.priceInProof}),convertQuantityToBigNumber(ot.maxClaimablePerWallet,lt).eq(0)&&vt.maxClaimable===MaxUint256$1||vt.maxClaimable===BigNumber.from(0)))return at.push(ClaimEligibility.AddressNotAllowed),at}catch(vt){return console.warn("Merkle proof verification failed:","reason"in vt?vt.reason:vt),at.push(ClaimEligibility.AddressNotAllowed),at}}if(this.isNewSinglePhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper)){const vt=await this.getClaimerProofs(rt);let At=BigNumber.from(0),xt=convertQuantityToBigNumber(ot.maxClaimablePerWallet,lt);if(this.isNewSinglePhaseDrop(this.contractWrapper)&&(At=await this.contractWrapper.readContract.getSupplyClaimedByWallet(rt)),this.isNewMultiphaseDrop(this.contractWrapper)){const Et=await this.contractWrapper.readContract.getActiveClaimConditionId();At=await this.contractWrapper.readContract.getSupplyClaimedByWallet(Et,rt)}if(vt&&(xt=convertQuantityToBigNumber(vt.maxClaimable,lt)),(!mt||mt&&!bt)&&(xt.lte(At)||xt.eq(0)))return at.push(ClaimEligibility.AddressNotAllowed),at}if(this.isLegacySinglePhaseDrop(this.contractWrapper)||this.isLegacyMultiPhaseDrop(this.contractWrapper)){let[vt,At]=[BigNumber.from(0),BigNumber.from(0)];this.isLegacyMultiPhaseDrop(this.contractWrapper)?(st=await this.contractWrapper.readContract.getActiveClaimConditionId(),[vt,At]=await this.contractWrapper.readContract.getClaimTimestamp(st,rt)):this.isLegacySinglePhaseDrop(this.contractWrapper)&&([vt,At]=await this.contractWrapper.readContract.getClaimTimestamp(rt));const xt=BigNumber.from(Date.now()).div(1e3);vt.gt(0)&&xt.lt(At)&&(At.eq(MaxUint256$1)?at.push(ClaimEligibility.AlreadyClaimed):at.push(ClaimEligibility.WaitBeforeNextClaimTransaction))}if(ot.price.gt(0)&&isNode$3()){const vt=ot.price.mul(BigNumber.from(tt)),At=this.contractWrapper.getProvider();isNativeToken(ot.currencyAddress)?(await At.getBalance(rt)).lt(vt)&&at.push(ClaimEligibility.NotEnoughTokens):(await new ContractWrapper(At,ot.currencyAddress,ERC20Abi$1,{}).readContract.balanceOf(rt)).lt(vt)&&at.push(ClaimEligibility.NotEnoughTokens)}return at}async getClaimerProofs(tt,rt){const st=(await this.get(rt)).merkleRoot;if(stripZeros(st).length>0){const lt=await this.metadata.get();return await fetchSnapshotEntryForAddress(tt,st.toString(),lt.merkle,this.contractWrapper.getProvider(),this.storage,this.getSnapshotFormatVersion())}else return null}async getTokenDecimals(){return detectContractFeature(this.contractWrapper,"ERC20")?this.contractWrapper.readContract.decimals():Promise.resolve(0)}async prepareClaim(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,st=arguments.length>3?arguments[3]:void 0;const ot=st||await this.contractWrapper.getSignerAddress();return prepareClaim(ot,tt,await this.getActive(),async()=>(await this.metadata.get()).merkle,at,this.contractWrapper,this.storage,rt,this.getSnapshotFormatVersion())}async getClaimArguments(tt,rt,at){return this.isLegacyMultiPhaseDrop(this.contractWrapper)?[tt,rt,at.currencyAddress,at.price,at.proofs,at.maxClaimable]:this.isLegacySinglePhaseDrop(this.contractWrapper)?[tt,rt,at.currencyAddress,at.price,{proof:at.proofs,maxQuantityInAllowlist:at.maxClaimable},toUtf8Bytes("")]:[tt,rt,at.currencyAddress,at.price,{proof:at.proofs,quantityLimitPerWallet:at.maxClaimable,pricePerToken:at.priceInProof,currency:at.currencyAddressInProof},toUtf8Bytes("")]}async getClaimTransaction(tt,rt,at){if(at!=null&&at.pricePerToken)throw new Error("Price per token is be set via claim conditions by calling `contract.erc721.claimConditions.set()`");const st=await this.prepareClaim(rt,(at==null?void 0:at.checkERC20Allowance)===void 0?!0:at.checkERC20Allowance,await this.getTokenDecimals());return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"claim",args:await this.getClaimArguments(tt,rt,st),overrides:st.overrides})}isNewSinglePhaseDrop(tt){return detectContractFeature(tt,"ERC721ClaimConditionsV2")||detectContractFeature(tt,"ERC20ClaimConditionsV2")}isNewMultiphaseDrop(tt){return detectContractFeature(tt,"ERC721ClaimPhasesV2")||detectContractFeature(tt,"ERC20ClaimPhasesV2")}isLegacySinglePhaseDrop(tt){return detectContractFeature(tt,"ERC721ClaimConditionsV1")||detectContractFeature(tt,"ERC20ClaimConditionsV1")}isLegacyMultiPhaseDrop(tt){return detectContractFeature(tt,"ERC721ClaimPhasesV1")||detectContractFeature(tt,"ERC20ClaimPhasesV1")}getSnapshotFormatVersion(){return this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isLegacySinglePhaseDrop(this.contractWrapper)?SnapshotFormatVersion.V1:SnapshotFormatVersion.V2}}class DropErc1155ClaimConditions{constructor(tt,rt,at){var st=this;_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"set",buildTransactionFunction(async function(ot,lt){let ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return st.setBatch.prepare([{tokenId:ot,claimConditions:lt}],ut)})),_defineProperty$4(this,"setBatch",buildTransactionFunction(async function(ot){let lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const ut={},ht=await Promise.all(ot.map(async vt=>{let{tokenId:At,claimConditions:xt}=vt,Et=xt;if(st.isLegacySinglePhaseDrop(st.contractWrapper)){if(lt=!0,xt.length===0)Et=[{startTime:new Date(0),currencyAddress:AddressZero,price:0,maxClaimableSupply:0,maxClaimablePerWallet:0,waitInSeconds:0,merkleRootHash:hexZeroPad([0],32),snapshot:[]}];else if(xt.length>1)throw new Error("Single phase drop contract cannot have multiple claim conditions, only one is allowed")}(st.isNewSinglePhaseDrop(st.contractWrapper)||st.isNewMultiphaseDrop(st.contractWrapper))&&Et.forEach(Ct=>{var It;if(Ct.snapshot&&Ct.snapshot.length>0&&(Ct.maxClaimablePerWallet===void 0||Ct.maxClaimablePerWallet==="unlimited"))throw new Error(`maxClaimablePerWallet must be set to a specific value when an allowlist is set.
Set it to 0 to only allow addresses in the allowlist to claim the amount specified in the allowlist.

ex:
contract.claimConditions.set(tokenId, [{ snapshot: [{ address: '0x...', maxClaimable: 1 }], maxClaimablePerWallet: 0 }])`);if(Ct.snapshot&&Ct.snapshot.length>0&&((It=Ct.maxClaimablePerWallet)==null?void 0:It.toString())==="0"&&Ct.snapshot.map(St=>{var Rt;return typeof St=="string"?0:Number(((Rt=St.maxClaimable)==null?void 0:Rt.toString())||0)}).reduce((St,Rt)=>St+Rt,0)===0)throw new Error("maxClaimablePerWallet is set to 0, and all addresses in the allowlist have max claimable 0. This means that no one can claim.")});const{snapshotInfos:Tt,sortedConditions:wt}=await processClaimConditionInputs(Et,0,st.contractWrapper.getProvider(),st.storage,st.getSnapshotFormatVersion());return Tt.forEach(Ct=>{ut[Ct.merkleRoot]=Ct.snapshotUri}),{tokenId:At,sortedConditions:wt}})),mt=await st.metadata.get(),bt=[];for(const vt of Object.keys(mt.merkle||{}))ut[vt]=mt.merkle[vt];if(!fastDeepEqual(mt.merkle,ut)){const vt=st.metadata.parseInputMetadata({...mt,merkle:ut}),At=await st.metadata._parseAndUploadMetadata(vt);if(hasFunction("setContractURI",st.contractWrapper))bt.push(st.contractWrapper.readContract.interface.encodeFunctionData("setContractURI",[At]));else throw new Error("Setting a merkle root requires implementing ContractMetadata in your contract to support storing a merkle root.")}return ht.forEach(vt=>{let{tokenId:At,sortedConditions:xt}=vt;if(st.isLegacySinglePhaseDrop(st.contractWrapper))bt.push(st.contractWrapper.readContract.interface.encodeFunctionData("setClaimConditions",[At,abstractContractModelToLegacy(xt[0]),lt]));else if(st.isLegacyMultiPhaseDrop(st.contractWrapper))bt.push(st.contractWrapper.readContract.interface.encodeFunctionData("setClaimConditions",[At,xt.map(abstractContractModelToLegacy),lt]));else if(st.isNewSinglePhaseDrop(st.contractWrapper))bt.push(st.contractWrapper.readContract.interface.encodeFunctionData("setClaimConditions",[At,abstractContractModelToNew(xt[0]),lt]));else if(st.isNewMultiphaseDrop(st.contractWrapper))bt.push(st.contractWrapper.readContract.interface.encodeFunctionData("setClaimConditions",[At,xt.map(abstractContractModelToNew),lt]));else throw new Error("Contract does not support claim conditions")}),Transaction.fromContractWrapper({contractWrapper:st.contractWrapper,method:"multicall",args:[bt]})})),_defineProperty$4(this,"update",buildTransactionFunction(async(ot,lt,ut)=>{const ht=await this.getAll(ot),mt=await updateExistingClaimConditions(lt,ut,ht);return await this.set.prepare(ot,mt)})),this.storage=at,this.contractWrapper=tt,this.metadata=rt}async getActive(tt,rt){const at=await this.get(tt),st=await this.metadata.get();return await transformResultToClaimCondition(at,0,this.contractWrapper.getProvider(),st.merkle,this.storage,(rt==null?void 0:rt.withAllowList)||!1)}async get(tt,rt){if(this.isLegacySinglePhaseDrop(this.contractWrapper)){const at=await this.contractWrapper.readContract.claimCondition(tt);return legacyContractModelToAbstract(at)}else if(this.isLegacyMultiPhaseDrop(this.contractWrapper)){const at=rt!==void 0?rt:await this.contractWrapper.readContract.getActiveClaimConditionId(tt),st=await this.contractWrapper.readContract.getClaimConditionById(tt,at);return legacyContractModelToAbstract(st)}else if(this.isNewSinglePhaseDrop(this.contractWrapper)){const at=await this.contractWrapper.readContract.claimCondition(tt);return newContractModelToAbstract(at)}else if(this.isNewMultiphaseDrop(this.contractWrapper)){const at=rt!==void 0?rt:await this.contractWrapper.readContract.getActiveClaimConditionId(tt),st=await this.contractWrapper.readContract.getClaimConditionById(tt,at);return newContractModelToAbstract(st)}else throw new Error("Contract does not support claim conditions")}async getAll(tt,rt){if(this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper)){const at=await this.contractWrapper.readContract.claimCondition(tt),st=at.currentStartId.toNumber(),ot=at.count.toNumber(),lt=[];for(let ht=st;ht<st+ot;ht++)lt.push(await this.get(tt,ht));const ut=await this.metadata.get();return Promise.all(lt.map(ht=>transformResultToClaimCondition(ht,0,this.contractWrapper.getProvider(),ut.merkle,this.storage,(rt==null?void 0:rt.withAllowList)||!1)))}else return[await this.getActive(tt,rt)]}async canClaim(tt,rt,at){return(await this.getClaimIneligibilityReasons(tt,rt,at)).length===0}async getClaimIneligibilityReasons(tt,rt,at){const st=[];let ot,lt;if(at===void 0)try{at=await this.contractWrapper.getSignerAddress()}catch(xt){console.warn("failed to get signer address",xt)}if(!at)return[ClaimEligibility.NoWallet];try{lt=await this.getActive(tt)}catch(xt){return includesErrorMessage(xt,"!CONDITION")||includesErrorMessage(xt,"no active mint condition")?(st.push(ClaimEligibility.NoClaimConditionSet),st):(st.push(ClaimEligibility.Unknown),st)}lt.availableSupply!=="unlimited"&&BigNumber.from(lt.availableSupply).lt(rt)&&st.push(ClaimEligibility.NotEnoughSupply);const ht=stripZeros(lt.merkleRootHash).length>0;let mt=null;if(ht){if(mt=await this.getClaimerProofs(tt,at),!mt&&(this.isLegacySinglePhaseDrop(this.contractWrapper)||this.isLegacyMultiPhaseDrop(this.contractWrapper)))return st.push(ClaimEligibility.AddressNotAllowed),st;if(mt)try{const xt=await this.prepareClaim(tt,rt,!1,at);let Et;if(this.isLegacyMultiPhaseDrop(this.contractWrapper)){if(ot=await this.contractWrapper.readContract.getActiveClaimConditionId(tt),[Et]=await this.contractWrapper.readContract.verifyClaimMerkleProof(ot,at,tt,rt,xt.proofs,xt.maxClaimable),!Et)return st.push(ClaimEligibility.AddressNotAllowed),st}else if(this.isLegacySinglePhaseDrop(this.contractWrapper)){if([Et]=await this.contractWrapper.readContract.verifyClaimMerkleProof(tt,at,rt,{proof:xt.proofs,maxQuantityInAllowlist:xt.maxClaimable}),!Et)return st.push(ClaimEligibility.AddressNotAllowed),st}else if(this.isNewSinglePhaseDrop(this.contractWrapper)){if(await this.contractWrapper.readContract.verifyClaim(tt,at,rt,xt.currencyAddress,xt.price,{proof:xt.proofs,quantityLimitPerWallet:xt.maxClaimable,currency:xt.currencyAddressInProof,pricePerToken:xt.priceInProof}),lt.maxClaimablePerWallet==="0"&&xt.maxClaimable===MaxUint256$1||xt.maxClaimable===BigNumber.from(0))return st.push(ClaimEligibility.AddressNotAllowed),st}else if(this.isNewMultiphaseDrop(this.contractWrapper)&&(ot=await this.contractWrapper.readContract.getActiveClaimConditionId(tt),await this.contractWrapper.readContract.verifyClaim(ot,at,tt,rt,xt.currencyAddress,xt.price,{proof:xt.proofs,quantityLimitPerWallet:xt.maxClaimable,currency:xt.currencyAddressInProof,pricePerToken:xt.priceInProof}),lt.maxClaimablePerWallet==="0"&&xt.maxClaimable===MaxUint256$1||xt.maxClaimable===BigNumber.from(0)))return st.push(ClaimEligibility.AddressNotAllowed),st}catch(xt){return console.warn("Merkle proof verification failed:","reason"in xt?xt.reason:xt),st.push(ClaimEligibility.AddressNotAllowed),st}}if((this.isNewSinglePhaseDrop(this.contractWrapper)||this.isNewMultiphaseDrop(this.contractWrapper))&&(!ht||ht&&!mt)&&lt.maxClaimablePerWallet==="0")return st.push(ClaimEligibility.AddressNotAllowed),st;let[bt,vt]=[BigNumber.from(0),BigNumber.from(0)];this.isLegacyMultiPhaseDrop(this.contractWrapper)?(ot=await this.contractWrapper.readContract.getActiveClaimConditionId(tt),[bt,vt]=await this.contractWrapper.readContract.getClaimTimestamp(tt,ot,at)):this.isLegacySinglePhaseDrop(this.contractWrapper)&&([bt,vt]=await this.contractWrapper.readContract.getClaimTimestamp(tt,at));const At=BigNumber.from(Date.now()).div(1e3);if(bt.gt(0)&&At.lt(vt)&&(vt.eq(MaxUint256$1)?st.push(ClaimEligibility.AlreadyClaimed):st.push(ClaimEligibility.WaitBeforeNextClaimTransaction)),lt.price.gt(0)&&isNode$3()){const xt=lt.price.mul(rt),Et=this.contractWrapper.getProvider();isNativeToken(lt.currencyAddress)?(await Et.getBalance(at)).lt(xt)&&st.push(ClaimEligibility.NotEnoughTokens):(await new ContractWrapper(Et,lt.currencyAddress,ERC20Abi$1,{}).readContract.balanceOf(at)).lt(xt)&&st.push(ClaimEligibility.NotEnoughTokens)}return st}async getClaimerProofs(tt,rt,at){const ot=(await this.get(tt,at)).merkleRoot;if(stripZeros(ot).length>0){const ut=await this.metadata.get();return await fetchSnapshotEntryForAddress(rt,ot.toString(),ut.merkle,this.contractWrapper.getProvider(),this.storage,this.getSnapshotFormatVersion())}else return null}async prepareClaim(tt,rt,at,st){const ot=st||await this.contractWrapper.getSignerAddress();return prepareClaim(ot,rt,await this.getActive(tt),async()=>(await this.metadata.get()).merkle,0,this.contractWrapper,this.storage,at,this.getSnapshotFormatVersion())}async getClaimArguments(tt,rt,at,st){return this.isLegacyMultiPhaseDrop(this.contractWrapper)?[rt,tt,at,st.currencyAddress,st.price,st.proofs,st.maxClaimable]:this.isLegacySinglePhaseDrop(this.contractWrapper)?[rt,tt,at,st.currencyAddress,st.price,{proof:st.proofs,maxQuantityInAllowlist:st.maxClaimable},toUtf8Bytes("")]:[rt,tt,at,st.currencyAddress,st.price,{proof:st.proofs,quantityLimitPerWallet:st.maxClaimable,pricePerToken:st.priceInProof,currency:st.currencyAddressInProof},toUtf8Bytes("")]}async getClaimTransaction(tt,rt,at,st){if(st!=null&&st.pricePerToken)throw new Error("Price per token should be set via claim conditions by calling `contract.erc1155.claimConditions.set()`");const ot=await this.prepareClaim(rt,at,(st==null?void 0:st.checkERC20Allowance)||!0);return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"claim",args:await this.getClaimArguments(rt,tt,at,ot),overrides:ot.overrides})}isNewSinglePhaseDrop(tt){return detectContractFeature(tt,"ERC1155ClaimConditionsV2")}isNewMultiphaseDrop(tt){return detectContractFeature(tt,"ERC1155ClaimPhasesV2")}isLegacySinglePhaseDrop(tt){return detectContractFeature(tt,"ERC1155ClaimConditionsV1")}isLegacyMultiPhaseDrop(tt){return detectContractFeature(tt,"ERC1155ClaimPhasesV1")}getSnapshotFormatVersion(){return this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isLegacySinglePhaseDrop(this.contractWrapper)?SnapshotFormatVersion.V1:SnapshotFormatVersion.V2}}class DropErc1155History{constructor(tt){_defineProperty$4(this,"events",void 0),this.events=tt}async getAllClaimerAddresses(tt){const rt=(await this.events.getEvents("TokensClaimed")).filter(at=>at.data&&BigNumber.isBigNumber(at.data.tokenId)?at.data.tokenId.eq(tt):!1);return Array.from(new Set(rt.filter(at=>{var st;return typeof((st=at.data)==null?void 0:st.claimer)=="string"}).map(at=>at.data.claimer)))}}class Erc20Burnable{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_TOKEN_BURNABLE.name),_defineProperty$4(this,"erc20",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"tokens",buildTransactionFunction(async at=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"burn",args:[await this.erc20.normalizeAmount(at)]}))),_defineProperty$4(this,"from",buildTransactionFunction(async(at,st)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"burnFrom",args:[at,await this.erc20.normalizeAmount(st)]}))),this.erc20=tt,this.contractWrapper=rt}}class Erc20ClaimableWithConditions{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_TOKEN_CLAIM_CONDITIONS_V2.name),_defineProperty$4(this,"conditions",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc20",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(ot,lt,ut)=>{const ht=await this.erc20.normalizeAmount(lt);return await this.conditions.getClaimTransaction(ot,ht,ut)})),this.erc20=tt,this.contractWrapper=rt,this.storage=at;const st=new ContractMetadata(this.contractWrapper,CustomContractSchema,this.storage);this.conditions=new DropClaimConditions(this.contractWrapper,st,this.storage)}}class Erc20Droppable{constructor(tt,rt,at){_defineProperty$4(this,"claim",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc20",void 0),_defineProperty$4(this,"storage",void 0),this.erc20=tt,this.contractWrapper=rt,this.storage=at,this.claim=new Erc20ClaimableWithConditions(this.erc20,this.contractWrapper,this.storage)}}class Erc20BatchMintable{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_TOKEN_BATCH_MINTABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc20",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async at=>{const st=[];for(const ot of at)st.push(this.contractWrapper.readContract.interface.encodeFunctionData("mintTo",[ot.toAddress,await this.erc20.normalizeAmount(ot.amount)]));return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[st]})})),this.erc20=tt,this.contractWrapper=rt}}class Erc20Mintable{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_TOKEN_MINTABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc20",void 0),_defineProperty$4(this,"batch",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(at,st)=>await this.getMintTransaction(at,st))),this.erc20=tt,this.contractWrapper=rt,this.batch=this.detectErc20BatchMintable()}async getMintTransaction(tt,rt){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintTo",args:[tt,await this.erc20.normalizeAmount(rt)]})}detectErc20BatchMintable(){if(detectContractFeature(this.contractWrapper,"ERC20BatchMintable"))return new Erc20BatchMintable(this.erc20,this.contractWrapper)}}class Erc20SignatureMintable{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_TOKEN_SIGNATURE_MINTABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"mint",buildTransactionFunction(async at=>{const st=at.payload,ot=at.signature,lt=await this.mapPayloadToContractStruct(st),ut=await this.contractWrapper.getCallOverrides();return await setErc20Allowance(this.contractWrapper,BigNumber.from(lt.price),st.currencyAddress,ut),Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintWithSignature",args:[lt,ot],overrides:ut})})),_defineProperty$4(this,"mintBatch",buildTransactionFunction(async at=>{const ot=(await Promise.all(at.map(async lt=>{const ut=await this.mapPayloadToContractStruct(lt.payload),ht=lt.signature,mt=lt.payload.price;if(BigNumber.from(mt).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:ut,signature:ht}}))).map(lt=>this.contractWrapper.readContract.interface.encodeFunctionData("mintWithSignature",[lt.message,lt.signature]));return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[ot]})})),this.contractWrapper=tt,this.roles=rt}async verify(tt){const rt=tt.payload,at=tt.signature,st=await this.mapPayloadToContractStruct(rt);return(await this.contractWrapper.readContract.verify(st,at))[0]}async generate(tt){return(await this.generateBatch([tt]))[0]}async generateBatch(tt){var lt;await((lt=this.roles)==null?void 0:lt.verify(["minter"],await this.contractWrapper.getSignerAddress()));const rt=tt.map(ut=>Signature20PayloadInput.parse(ut)),at=await this.contractWrapper.getChainID(),st=this.contractWrapper.getSigner();invariant$1(st,"No signer available");const ot=await this.contractWrapper.readContract.name();return await Promise.all(rt.map(async ut=>{const ht=Signature20PayloadOutput.parse(ut),mt=await this.contractWrapper.signTypedData(st,{name:ot,version:"1",chainId:at,verifyingContract:this.contractWrapper.readContract.address},{MintRequest:MintRequest20},await this.mapPayloadToContractStruct(ht));return{payload:ht,signature:mt.toString()}}))}async mapPayloadToContractStruct(tt){const rt=await normalizePriceValue(this.contractWrapper.getProvider(),tt.price,tt.currencyAddress),at=parseUnits(tt.quantity,await this.contractWrapper.readContract.decimals());return{to:tt.to,primarySaleRecipient:tt.primarySaleRecipient,quantity:at,price:rt,currency:tt.currencyAddress,validityEndTimestamp:tt.mintEndTime,validityStartTimestamp:tt.mintStartTime,uid:tt.uid}}}class Erc20{get chainId(){return this._chainId}constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_TOKEN.name),_defineProperty$4(this,"mintable",void 0),_defineProperty$4(this,"burnable",void 0),_defineProperty$4(this,"droppable",void 0),_defineProperty$4(this,"signatureMintable",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"_chainId",void 0),_defineProperty$4(this,"transfer",buildTransactionFunction(async(st,ot)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"transfer",args:[st,await this.normalizeAmount(ot)]}))),_defineProperty$4(this,"transferFrom",buildTransactionFunction(async(st,ot,lt)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"transferFrom",args:[st,ot,await this.normalizeAmount(lt)]}))),_defineProperty$4(this,"setAllowance",buildTransactionFunction(async(st,ot)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"approve",args:[st,await this.normalizeAmount(ot)]}))),_defineProperty$4(this,"transferBatch",buildTransactionFunction(async st=>{const ot=await Promise.all(st.map(async lt=>{const ut=await this.normalizeAmount(lt.amount);return this.contractWrapper.readContract.interface.encodeFunctionData("transfer",[lt.toAddress,ut])}));return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[ot]})})),_defineProperty$4(this,"mint",buildTransactionFunction(async st=>this.mintTo.prepare(await this.contractWrapper.getSignerAddress(),st))),_defineProperty$4(this,"mintTo",buildTransactionFunction(async(st,ot)=>assertEnabled(this.mintable,FEATURE_TOKEN_MINTABLE).to.prepare(st,ot))),_defineProperty$4(this,"mintBatchTo",buildTransactionFunction(async st=>{var ot;return assertEnabled((ot=this.mintable)==null?void 0:ot.batch,FEATURE_TOKEN_BATCH_MINTABLE).to.prepare(st)})),_defineProperty$4(this,"burn",buildTransactionFunction(async st=>assertEnabled(this.burnable,FEATURE_TOKEN_BURNABLE).tokens.prepare(st))),_defineProperty$4(this,"burnFrom",buildTransactionFunction(async(st,ot)=>assertEnabled(this.burnable,FEATURE_TOKEN_BURNABLE).from.prepare(st,ot))),_defineProperty$4(this,"claim",buildTransactionFunction(async(st,ot)=>this.claimTo.prepare(await this.contractWrapper.getSignerAddress(),st,ot))),_defineProperty$4(this,"claimTo",buildTransactionFunction(async(st,ot,lt)=>{var ut;return assertEnabled((ut=this.droppable)==null?void 0:ut.claim,FEATURE_TOKEN_CLAIM_CONDITIONS_V2).to.prepare(st,ot,lt)})),this.contractWrapper=tt,this.storage=rt,this.mintable=this.detectErc20Mintable(),this.burnable=this.detectErc20Burnable(),this.droppable=this.detectErc20Droppable(),this.signatureMintable=this.detectErc20SignatureMintable(),this._chainId=at}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async get(){return await fetchCurrencyMetadata(this.contractWrapper.getProvider(),this.getAddress())}async balance(){return await this.balanceOf(await this.contractWrapper.getSignerAddress())}async balanceOf(tt){return this.getValue(await this.contractWrapper.readContract.balanceOf(tt))}async totalSupply(){return await this.getValue(await this.contractWrapper.readContract.totalSupply())}async allowance(tt){return await this.allowanceOf(await this.contractWrapper.getSignerAddress(),tt)}async allowanceOf(tt,rt){return await this.getValue(await this.contractWrapper.readContract.allowance(tt,rt))}async getMintTransaction(tt,rt){return assertEnabled(this.mintable,FEATURE_TOKEN_MINTABLE).getMintTransaction(tt,rt)}get claimConditions(){var tt;return assertEnabled((tt=this.droppable)==null?void 0:tt.claim,FEATURE_TOKEN_CLAIM_CONDITIONS_V2).conditions}get signature(){return assertEnabled(this.signatureMintable,FEATURE_TOKEN_SIGNATURE_MINTABLE)}async normalizeAmount(tt){const rt=await this.contractWrapper.readContract.decimals();return parseUnits(AmountSchema.parse(tt),rt)}async getValue(tt){return await fetchCurrencyValue(this.contractWrapper.getProvider(),this.getAddress(),BigNumber.from(tt))}detectErc20Mintable(){if(detectContractFeature(this.contractWrapper,"ERC20"))return new Erc20Mintable(this,this.contractWrapper)}detectErc20Burnable(){if(detectContractFeature(this.contractWrapper,"ERC20Burnable"))return new Erc20Burnable(this,this.contractWrapper)}detectErc20Droppable(){if(detectContractFeature(this.contractWrapper,"ERC20ClaimConditionsV1")||detectContractFeature(this.contractWrapper,"ERC20ClaimConditionsV2")||detectContractFeature(this.contractWrapper,"ERC20ClaimPhasesV1")||detectContractFeature(this.contractWrapper,"ERC20ClaimPhasesV2"))return new Erc20Droppable(this,this.contractWrapper,this.storage)}detectErc20SignatureMintable(){if(detectContractFeature(this.contractWrapper,"ERC20SignatureMintable"))return new Erc20SignatureMintable(this.contractWrapper)}}class TokenERC20History{constructor(tt,rt){_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt,this.events=rt}async getAllHolderBalances(){const rt=(await this.events.getEvents("Transfer")).map(st=>st.data),at={};return rt.forEach(st=>{const ot=st==null?void 0:st.from,lt=st==null?void 0:st.to,ut=st==null?void 0:st.value;ot!==AddressZero&&(ot in at||(at[ot]=BigNumber.from(0)),at[ot]=at[ot].sub(ut)),lt!==AddressZero&&(lt in at||(at[lt]=BigNumber.from(0)),at[lt]=at[lt].add(ut))}),Promise.all(Object.keys(at).map(async st=>({holder:st,balance:await fetchCurrencyValue(this.contractWrapper.getProvider(),this.contractWrapper.readContract.address,at[st])})))}}class StandardErc20{get chainId(){return this._chainId}constructor(tt,rt,at){_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"erc20",void 0),_defineProperty$4(this,"_chainId",void 0),_defineProperty$4(this,"transfer",buildTransactionFunction(async(st,ot)=>this.erc20.transfer.prepare(st,ot))),_defineProperty$4(this,"transferFrom",buildTransactionFunction(async(st,ot,lt)=>this.erc20.transferFrom.prepare(st,ot,lt))),this.contractWrapper=tt,this.storage=rt,this.erc20=new Erc20(this.contractWrapper,this.storage,at),this._chainId=at}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async get(){return this.erc20.get()}async balance(){return await this.erc20.balance()}async balanceOf(tt){return this.erc20.balanceOf(tt)}async totalSupply(){return await this.erc20.totalSupply()}async allowance(tt){return await this.erc20.allowance(tt)}async allowanceOf(tt,rt){return await this.erc20.allowanceOf(tt,rt)}async setAllowance(tt,rt){return this.erc20.setAllowance(tt,rt)}async transferBatch(tt){return this.erc20.transferBatch(tt)}}class Erc721Burnable{constructor(tt){_defineProperty$4(this,"featureName",FEATURE_NFT_BURNABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"token",buildTransactionFunction(async rt=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"burn",args:[rt]}))),this.contractWrapper=tt}}class Erc721Claimable{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_NFT_CLAIM_CUSTOM.name),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(at,st,ot)=>{const lt=await this.getClaimTransaction(at,st,ot);return lt.setParse(ut=>{const mt=this.contractWrapper.parseLogs("TokensClaimed",ut==null?void 0:ut.logs)[0].args.startTokenId,bt=mt.add(st),vt=[];for(let At=mt;At.lt(bt);At=At.add(1))vt.push({id:At,receipt:ut,data:()=>this.erc721.get(At)});return vt}),lt})),this.erc721=tt,this.contractWrapper=rt}async getClaimTransaction(tt,rt,at){let st={};return at&&at.pricePerToken&&(st=await calculateClaimCost(this.contractWrapper,at.pricePerToken,rt,at.currencyAddress,at.checkERC20Allowance)),Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"claim",args:[tt,rt],overrides:st})}}class Erc721ClaimableWithConditions{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_NFT_CLAIM_CONDITIONS_V2.name),_defineProperty$4(this,"conditions",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(ot,lt,ut)=>{const ht=await this.conditions.getClaimTransaction(ot,lt,ut);return ht.setParse(mt=>{const vt=this.contractWrapper.parseLogs("TokensClaimed",mt==null?void 0:mt.logs)[0].args.startTokenId,At=vt.add(lt),xt=[];for(let Et=vt;Et.lt(At);Et=Et.add(1))xt.push({id:Et,receipt:mt,data:()=>this.erc721.get(Et)});return xt}),ht})),this.erc721=tt,this.contractWrapper=rt,this.storage=at;const st=new ContractMetadata(this.contractWrapper,CustomContractSchema,this.storage);this.conditions=new DropClaimConditions(this.contractWrapper,st,this.storage)}}class Erc721LazyMintable{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_NFT_LAZY_MINTABLE.name),_defineProperty$4(this,"revealer",void 0),_defineProperty$4(this,"claimWithConditions",void 0),_defineProperty$4(this,"claim",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"lazyMint",buildTransactionFunction(async(st,ot)=>{const lt=await this.erc721.nextTokenIdToMint(),ut=await uploadOrExtractURIs(st,this.storage,lt.toNumber(),ot),ht=getBaseUriFromBatch(ut);return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"lazyMint",args:[ut.length,ht.endsWith("/")?ht:`${ht}/`,toUtf8Bytes("")],parse:mt=>{const bt=this.contractWrapper.parseLogs("TokensLazyMinted",mt==null?void 0:mt.logs),vt=bt[0].args.startTokenId,At=bt[0].args.endTokenId,xt=[];for(let Et=vt;Et.lte(At);Et=Et.add(1))xt.push({id:Et,receipt:mt,data:()=>this.erc721.getTokenMetadata(Et)});return xt}})})),this.erc721=tt,this.contractWrapper=rt,this.storage=at,this.revealer=this.detectErc721Revealable(),this.claimWithConditions=this.detectErc721ClaimableWithConditions(),this.claim=this.detectErc721Claimable()}detectErc721Revealable(){if(detectContractFeature(this.contractWrapper,"ERC721Revealable"))return new DelayedReveal(this.contractWrapper,this.storage,FEATURE_NFT_REVEALABLE.name,()=>this.erc721.nextTokenIdToMint())}detectErc721ClaimableWithConditions(){if(detectContractFeature(this.contractWrapper,"ERC721ClaimConditionsV1")||detectContractFeature(this.contractWrapper,"ERC721ClaimConditionsV2")||detectContractFeature(this.contractWrapper,"ERC721ClaimPhasesV1")||detectContractFeature(this.contractWrapper,"ERC721ClaimPhasesV2"))return new Erc721ClaimableWithConditions(this.erc721,this.contractWrapper,this.storage)}detectErc721Claimable(){if(detectContractFeature(this.contractWrapper,"ERC721ClaimCustom"))return new Erc721Claimable(this.erc721,this.contractWrapper)}}class Erc721BatchMintable{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_NFT_BATCH_MINTABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(st,ot)=>{const ut=(await uploadOrExtractURIs(ot,this.storage)).map(ht=>this.contractWrapper.readContract.interface.encodeFunctionData("mintTo",[st,ht]));return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[ut],parse:ht=>{const mt=this.contractWrapper.parseLogs("TokensMinted",ht.logs);if(mt.length===0||mt.length<ot.length)throw new Error("TokenMinted event not found, minting failed");return mt.map(bt=>{const vt=bt.args.tokenIdMinted;return{id:vt,receipt:ht,data:()=>this.erc721.get(vt)}})}})})),this.erc721=tt,this.contractWrapper=rt,this.storage=at}}class Erc721Mintable{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_NFT_MINTABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"batch",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(st,ot)=>{const lt=await uploadOrExtractURI(ot,this.storage);return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintTo",args:[st,lt],parse:ut=>{const ht=this.contractWrapper.parseLogs("Transfer",ut==null?void 0:ut.logs);if(ht.length===0)throw new Error("TransferEvent event not found");const mt=ht[0].args.tokenId;return{id:mt,receipt:ut,data:()=>this.erc721.get(mt)}}})})),this.erc721=tt,this.contractWrapper=rt,this.storage=at,this.batch=this.detectErc721BatchMintable()}async getMintTransaction(tt,rt){return this.to.prepare(tt,rt)}detectErc721BatchMintable(){if(detectContractFeature(this.contractWrapper,"ERC721BatchMintable"))return new Erc721BatchMintable(this.erc721,this.contractWrapper,this.storage)}}class Erc721Enumerable{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_NFT_ENUMERABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc721",void 0),this.erc721=tt,this.contractWrapper=rt}async all(tt){const rt=await this.tokenIds(tt);return await Promise.all(rt.map(at=>this.erc721.get(at.toString())))}async tokenIds(tt){const rt=tt||await this.contractWrapper.getSignerAddress(),at=await this.contractWrapper.readContract.balanceOf(rt),st=Array.from(Array(at.toNumber()).keys());return await Promise.all(st.map(ot=>this.contractWrapper.readContract.tokenOfOwnerByIndex(rt,ot)))}}class Erc721Supply{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_NFT_SUPPLY.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"owned",void 0),this.erc721=tt,this.contractWrapper=rt,this.owned=this.detectErc721Owned()}async all(tt){const rt=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),at=BigNumber.from((tt==null?void 0:tt.count)||DEFAULT_QUERY_ALL_COUNT).toNumber(),st=await this.erc721.nextTokenIdToMint(),ot=Math.min(st.toNumber(),rt+at);return await Promise.all([...Array(ot-rt).keys()].map(lt=>this.erc721.get((rt+lt).toString())))}async allOwners(){return Promise.all([...new Array((await this.totalCount()).toNumber()).keys()].map(async tt=>({tokenId:tt,owner:await this.erc721.ownerOf(tt).catch(()=>AddressZero)})))}async totalCount(){return await this.erc721.nextTokenIdToMint()}async totalCirculatingSupply(){return await this.contractWrapper.readContract.totalSupply()}detectErc721Owned(){if(detectContractFeature(this.contractWrapper,"ERC721Enumerable"))return new Erc721Enumerable(this.erc721,this.contractWrapper)}}const TieredDropPayloadSchema=BaseSignaturePayloadInput.extend({tierPriority:z$6.array(z$6.string()),royaltyRecipient:z$6.string().default(AddressZero),royaltyBps:BasisPointsSchema.default(0),quantity:BigNumberSchema.default(1)});class Erc721TieredDrop{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_NFT_TIERED_DROP.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"storage",void 0),this.erc721=tt,this.contractWrapper=rt,this.storage=at}async getMetadataInTier(tt){const at=(await this.contractWrapper.readContract.getMetadataForAllTiers()).find(ot=>ot.tier===tt);if(!at)throw new Error("Tier not found in contract.");return await Promise.all(at.ranges.map((ot,lt)=>{const ut=[],ht=at.baseURIs[lt];for(let mt=ot.startIdInclusive.toNumber();mt<ot.endIdNonInclusive.toNumber();mt++){const bt=`${ht}/${mt}`,vt=this.storage.downloadJSON(bt);ut.push(vt)}return ut}).flat())}async getTokensInTier(tt){const rt=await this.contractWrapper.readContract.getTokensInTierLen();if(rt.eq(0))return[];const at=await this.contractWrapper.readContract.getTokensInTier(tt,0,rt);return await Promise.all(at.map(ot=>{const lt=[];for(let ut=ot.startIdInclusive.toNumber();ut<ot.endIdNonInclusive.toNumber();ut++)lt.push(this.erc721.get(ut));return lt}).flat())}async createBatchWithTier(tt,rt,at){const st=await this.erc721.nextTokenIdToMint(),ot=await uploadOrExtractURIs(tt,this.storage,st.toNumber(),at),lt=getBaseUriFromBatch(ot),ut=await this.contractWrapper.sendTransaction("lazyMint",[ot.length,lt.endsWith("/")?lt:`${lt}/`,rt,toUtf8Bytes("")]),ht=this.contractWrapper.parseLogs("TokensLazyMinted",ut==null?void 0:ut.logs),mt=ht[0].args[1],bt=ht[0].args[2],vt=[];for(let At=mt;At.lte(bt);At=At.add(1))vt.push({id:At,receipt:ut,data:()=>this.erc721.getTokenMetadata(At)});return vt}async createDelayedRevealBatchWithTier(tt,rt,at,st,ot){if(!at)throw new Error("Password is required");const lt=await this.storage.uploadBatch([CommonNFTInput.parse(tt)],{rewriteFileNames:{fileStartNumber:0}}),ut=getBaseUriFromBatch(lt),ht=await this.erc721.nextTokenIdToMint(),mt=await this.storage.uploadBatch(rt.map(Wt=>CommonNFTInput.parse(Wt)),{onProgress:ot==null?void 0:ot.onProgress,rewriteFileNames:{fileStartNumber:ht.toNumber()}}),bt=getBaseUriFromBatch(mt),vt=await this.contractWrapper.readContract.getBaseURICount(),At=await this.contractWrapper.getChainID(),xt=keccak256(["string","uint256","uint256","address"],[at,At,vt,this.contractWrapper.readContract.address]),Et=await this.contractWrapper.readContract.encryptDecrypt(toUtf8Bytes(bt),xt);let Tt;const wt=keccak256(["bytes","bytes","uint256"],[toUtf8Bytes(bt),xt,At]);Tt=defaultAbiCoder.encode(["bytes","bytes32"],[Et,wt]);const Ct=await this.contractWrapper.sendTransaction("lazyMint",[mt.length,ut.endsWith("/")?ut:`${ut}/`,st,Tt]),It=this.contractWrapper.parseLogs("TokensLazyMinted",Ct==null?void 0:Ct.logs),St=It[0].args[1],Rt=It[0].args[2],Dt=[];for(let Wt=St;Wt.lte(Rt);Wt=Wt.add(1))Dt.push({id:Wt,receipt:Ct,data:()=>this.erc721.getTokenMetadata(Wt)});return Dt}async reveal(tt,rt){if(!rt)throw new Error("Password is required");const at=await this.contractWrapper.getChainID(),st=keccak256(["string","uint256","uint256","address"],[rt,at,tt,this.contractWrapper.readContract.address]);try{const ot=await this.contractWrapper.callStatic().reveal(tt,st);if(!ot.includes("://")||!ot.endsWith("/"))throw new Error("invalid password")}catch{throw new Error("invalid password")}return{receipt:await this.contractWrapper.sendTransaction("reveal",[tt,st])}}async generate(tt){const[rt]=await this.generateBatch([tt]);return rt}async generateBatch(tt){const rt=tt.map(ot=>TieredDropPayloadSchema.parse(ot)),at=await this.contractWrapper.getChainID(),st=this.contractWrapper.getSigner();return invariant$1(st,"No signer available"),await Promise.all(rt.map(async ot=>{const lt=await this.contractWrapper.signTypedData(st,{name:"SignatureAction",version:"1",chainId:at,verifyingContract:this.contractWrapper.readContract.address},{GenericRequest},await this.mapPayloadToContractStruct(ot));return{payload:ot,signature:lt.toString()}}))}async verify(tt){const rt=await this.mapPayloadToContractStruct(tt.payload);return(await this.contractWrapper.readContract.verify(rt,tt.signature))[0]}async claimWithSignature(tt){const rt=await this.mapPayloadToContractStruct(tt.payload),at=await normalizePriceValue(this.contractWrapper.getProvider(),tt.payload.price,tt.payload.currencyAddress),st=await this.contractWrapper.getCallOverrides();await setErc20Allowance(this.contractWrapper,at,tt.payload.currencyAddress,st);const ot=await this.contractWrapper.sendTransaction("claimWithSignature",[rt,tt.signature],st),lt=this.contractWrapper.parseLogs("TokensClaimed",ot==null?void 0:ot.logs),ut=lt[0].args.startTokenId,ht=ut.add(lt[0].args.quantityClaimed),mt=[];for(let bt=ut;bt.lt(ht);bt=bt.add(1))mt.push({id:bt,receipt:ot,data:()=>this.erc721.get(bt)});return mt}async mapPayloadToContractStruct(tt){const rt=await normalizePriceValue(this.contractWrapper.getProvider(),tt.price,tt.currencyAddress),at=defaultAbiCoder.encode(["string[]","address","address","uint256","address","uint256","uint256","address"],[tt.tierPriority,tt.to,tt.royaltyRecipient,tt.royaltyBps,tt.primarySaleRecipient,tt.quantity,rt,tt.currencyAddress]);return{uid:tt.uid,validityStartTimestamp:tt.mintStartTime,validityEndTimestamp:tt.mintEndTime,data:at}}}class Erc721WithQuantitySignatureMintable{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_NFT_SIGNATURE_MINTABLE_V2.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"mint",buildTransactionFunction(async at=>{const st=at.payload,ot=at.signature,lt=await this.contractWrapper.getCallOverrides(),ut=ht=>{const mt=this.contractWrapper.parseLogs("TokensMintedWithSignature",ht.logs);if(mt.length===0)throw new Error("No MintWithSignature event found");return{id:mt[0].args.tokenIdMinted,receipt:ht}};if(await this.isLegacyNFTContract()){const ht=await this.mapLegacyPayloadToContractStruct(st),mt=ht.price;return await setErc20Allowance(this.contractWrapper,mt,st.currencyAddress,lt),Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintWithSignature",args:[ht,ot],overrides:lt,parse:ut})}else{const ht=await this.mapPayloadToContractStruct(st),mt=ht.pricePerToken.mul(ht.quantity);return await setErc20Allowance(this.contractWrapper,mt,st.currencyAddress,lt),Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintWithSignature",args:[ht,ot],overrides:lt,parse:ut})}})),_defineProperty$4(this,"mintBatch",buildTransactionFunction(async at=>{const st=await this.isLegacyNFTContract(),lt=(await Promise.all(at.map(async ut=>{let ht;st?ht=await this.mapLegacyPayloadToContractStruct(ut.payload):ht=await this.mapPayloadToContractStruct(ut.payload);const mt=ut.signature,bt=ut.payload.price;if(BigNumber.from(bt).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:ht,signature:mt}}))).map(ut=>st?this.contractWrapper.readContract.interface.encodeFunctionData("mintWithSignature",[ut.message,ut.signature]):this.contractWrapper.readContract.interface.encodeFunctionData("mintWithSignature",[ut.message,ut.signature]));if(hasFunction("multicall",this.contractWrapper))return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[lt],parse:ut=>{const ht=this.contractWrapper.parseLogs("TokensMintedWithSignature",ut.logs);if(ht.length===0)throw new Error("No MintWithSignature event found");return ht.map(mt=>({id:mt.args.tokenIdMinted,receipt:ut}))}});throw new Error("Multicall not available on this contract!")})),this.contractWrapper=tt,this.storage=rt}async verify(tt){const rt=await this.isLegacyNFTContract(),at=tt.payload,st=tt.signature;let ot,lt;if(rt){const ut=this.contractWrapper.readContract;ot=await this.mapLegacyPayloadToContractStruct(at),lt=await ut.verify(ot,st)}else{const ut=this.contractWrapper.readContract;ot=await this.mapPayloadToContractStruct(at),lt=await ut.verify(ot,st)}return lt[0]}async generate(tt){return(await this.generateBatch([tt]))[0]}async generateBatch(tt){const rt=await this.isLegacyNFTContract(),at=tt.map(ht=>Signature721WithQuantityInput.parse(ht)),st=at.map(ht=>ht.metadata),ot=await uploadOrExtractURIs(st,this.storage),lt=await this.contractWrapper.getChainID(),ut=this.contractWrapper.getSigner();return invariant$1(ut,"No signer available"),await Promise.all(at.map(async(ht,mt)=>{const bt=ot[mt],vt=Signature721WithQuantityOutput.parse({...ht,uri:bt});let At;return rt?At=await this.contractWrapper.signTypedData(ut,{name:"TokenERC721",version:"1",chainId:lt,verifyingContract:this.contractWrapper.readContract.address},{MintRequest:MintRequest721},await this.mapLegacyPayloadToContractStruct(vt)):At=await this.contractWrapper.signTypedData(ut,{name:"SignatureMintERC721",version:"1",chainId:lt,verifyingContract:await this.contractWrapper.readContract.address},{MintRequest:MintRequest721withQuantity},await this.mapPayloadToContractStruct(vt)),{payload:vt,signature:At.toString()}}))}async mapPayloadToContractStruct(tt){const rt=await normalizePriceValue(this.contractWrapper.getProvider(),tt.price,tt.currencyAddress);return{to:tt.to,royaltyRecipient:tt.royaltyRecipient,royaltyBps:tt.royaltyBps,primarySaleRecipient:tt.primarySaleRecipient,uri:tt.uri,quantity:tt.quantity,pricePerToken:rt,currency:tt.currencyAddress,validityStartTimestamp:tt.mintStartTime,validityEndTimestamp:tt.mintEndTime,uid:tt.uid}}async mapLegacyPayloadToContractStruct(tt){const rt=await normalizePriceValue(this.contractWrapper.getProvider(),tt.price,tt.currencyAddress);return{to:tt.to,price:rt,uri:tt.uri,currency:tt.currencyAddress,validityEndTimestamp:tt.mintEndTime,validityStartTimestamp:tt.mintStartTime,uid:tt.uid,royaltyRecipient:tt.royaltyRecipient,royaltyBps:tt.royaltyBps,primarySaleRecipient:tt.primarySaleRecipient}}async isLegacyNFTContract(){return detectContractFeature(this.contractWrapper,"ERC721SignatureMintV1")}}class Erc721{get chainId(){return this._chainId}constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_NFT.name),_defineProperty$4(this,"query",void 0),_defineProperty$4(this,"mintable",void 0),_defineProperty$4(this,"burnable",void 0),_defineProperty$4(this,"lazyMintable",void 0),_defineProperty$4(this,"tieredDropable",void 0),_defineProperty$4(this,"signatureMintable",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"_chainId",void 0),_defineProperty$4(this,"transfer",buildTransactionFunction(async(st,ot)=>{const lt=await this.contractWrapper.getSignerAddress();return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"transferFrom(address,address,uint256)",args:[lt,st,ot]})})),_defineProperty$4(this,"setApprovalForAll",buildTransactionFunction(async(st,ot)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setApprovalForAll",args:[st,ot]}))),_defineProperty$4(this,"setApprovalForToken",buildTransactionFunction(async(st,ot)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"approve",args:[st,ot]}))),_defineProperty$4(this,"mint",buildTransactionFunction(async st=>this.mintTo.prepare(await this.contractWrapper.getSignerAddress(),st))),_defineProperty$4(this,"mintTo",buildTransactionFunction(async(st,ot)=>assertEnabled(this.mintable,FEATURE_NFT_MINTABLE).to.prepare(st,ot))),_defineProperty$4(this,"mintBatch",buildTransactionFunction(async st=>this.mintBatchTo.prepare(await this.contractWrapper.getSignerAddress(),st))),_defineProperty$4(this,"mintBatchTo",buildTransactionFunction(async(st,ot)=>{var lt;return assertEnabled((lt=this.mintable)==null?void 0:lt.batch,FEATURE_NFT_BATCH_MINTABLE).to.prepare(st,ot)})),_defineProperty$4(this,"burn",buildTransactionFunction(async st=>assertEnabled(this.burnable,FEATURE_NFT_BURNABLE).token.prepare(st))),_defineProperty$4(this,"lazyMint",buildTransactionFunction(async(st,ot)=>assertEnabled(this.lazyMintable,FEATURE_NFT_LAZY_MINTABLE).lazyMint.prepare(st,ot))),_defineProperty$4(this,"claim",buildTransactionFunction(async(st,ot)=>this.claimTo.prepare(await this.contractWrapper.getSignerAddress(),st,ot))),_defineProperty$4(this,"claimTo",buildTransactionFunction(async(st,ot,lt)=>{var mt,bt;const ut=(mt=this.lazyMintable)==null?void 0:mt.claimWithConditions,ht=(bt=this.lazyMintable)==null?void 0:bt.claim;if(ut)return ut.to.prepare(st,ot,lt);if(ht)return ht.to.prepare(st,ot,lt);throw new ExtensionNotImplementedError(FEATURE_NFT_CLAIM_CUSTOM)})),this.contractWrapper=tt,this.storage=rt,this.query=this.detectErc721Enumerable(),this.mintable=this.detectErc721Mintable(),this.burnable=this.detectErc721Burnable(),this.lazyMintable=this.detectErc721LazyMintable(),this.tieredDropable=this.detectErc721TieredDrop(),this.signatureMintable=this.detectErc721SignatureMintable(),this._chainId=at}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async get(tt){const[rt,at]=await Promise.all([this.ownerOf(tt).catch(()=>AddressZero),this.getTokenMetadata(tt).catch(()=>({id:tt.toString(),uri:"",...FALLBACK_METADATA}))]);return{owner:rt,metadata:at,type:"ERC721",supply:"1"}}async ownerOf(tt){return await this.contractWrapper.readContract.ownerOf(tt)}async balanceOf(tt){return await this.contractWrapper.readContract.balanceOf(tt)}async balance(){return await this.balanceOf(await this.contractWrapper.getSignerAddress())}async isApproved(tt,rt){return await this.contractWrapper.readContract.isApprovedForAll(tt,rt)}async getAll(tt){return assertEnabled(this.query,FEATURE_NFT_SUPPLY).all(tt)}async getAllOwners(){return assertEnabled(this.query,FEATURE_NFT_SUPPLY).allOwners()}async totalCount(){return this.nextTokenIdToMint()}async totalCirculatingSupply(){return assertEnabled(this.query,FEATURE_NFT_SUPPLY).totalCirculatingSupply()}async getOwned(tt){var rt;if((rt=this.query)!=null&&rt.owned)return this.query.owned.all(tt);{const at=tt||await this.contractWrapper.getSignerAddress(),st=await this.getAllOwners();return Promise.all((st||[]).filter(ot=>{var lt;return(at==null?void 0:at.toLowerCase())===((lt=ot.owner)==null?void 0:lt.toLowerCase())}).map(async ot=>await this.get(ot.tokenId)))}}async getOwnedTokenIds(tt){var rt;if((rt=this.query)!=null&&rt.owned)return this.query.owned.tokenIds(tt);{const at=tt||await this.contractWrapper.getSignerAddress();return(await this.getAllOwners()||[]).filter(ot=>{var lt;return(at==null?void 0:at.toLowerCase())===((lt=ot.owner)==null?void 0:lt.toLowerCase())}).map(ot=>BigNumber.from(ot.tokenId))}}async getMintTransaction(tt,rt){return this.mintTo.prepare(tt,rt)}async getClaimTransaction(tt,rt,at){var lt,ut;const st=(lt=this.lazyMintable)==null?void 0:lt.claimWithConditions,ot=(ut=this.lazyMintable)==null?void 0:ut.claim;if(st)return st.conditions.getClaimTransaction(tt,rt,at);if(ot)return ot.getClaimTransaction(tt,rt,at);throw new ExtensionNotImplementedError(FEATURE_NFT_CLAIM_CUSTOM)}async totalClaimedSupply(){const tt=this.contractWrapper;if(hasFunction("nextTokenIdToClaim",tt))return tt.readContract.nextTokenIdToClaim();if(hasFunction("totalMinted",tt))return tt.readContract.totalMinted();throw new Error("No function found on contract to get total claimed supply")}async totalUnclaimedSupply(){return(await this.nextTokenIdToMint()).sub(await this.totalClaimedSupply())}get claimConditions(){var tt;return assertEnabled((tt=this.lazyMintable)==null?void 0:tt.claimWithConditions,FEATURE_NFT_CLAIM_CONDITIONS_V2).conditions}get tieredDrop(){return assertEnabled(this.tieredDropable,FEATURE_NFT_TIERED_DROP)}get signature(){return assertEnabled(this.signatureMintable,FEATURE_NFT_SIGNATURE_MINTABLE_V2)}get revealer(){var tt;return assertEnabled((tt=this.lazyMintable)==null?void 0:tt.revealer,FEATURE_NFT_REVEALABLE)}async getTokenMetadata(tt){const rt=await this.contractWrapper.readContract.tokenURI(tt);if(!rt)throw new NotFoundError;return fetchTokenMetadata(tt,rt,this.storage)}async nextTokenIdToMint(){if(hasFunction("nextTokenIdToMint",this.contractWrapper))return await this.contractWrapper.readContract.nextTokenIdToMint();if(hasFunction("totalSupply",this.contractWrapper))return await this.contractWrapper.readContract.totalSupply();throw new Error("Contract requires either `nextTokenIdToMint` or `totalSupply` function available to determine the next token ID to mint")}detectErc721Enumerable(){if(detectContractFeature(this.contractWrapper,"ERC721Supply")||hasFunction("nextTokenIdToMint",this.contractWrapper))return new Erc721Supply(this,this.contractWrapper)}detectErc721Mintable(){if(detectContractFeature(this.contractWrapper,"ERC721Mintable"))return new Erc721Mintable(this,this.contractWrapper,this.storage)}detectErc721Burnable(){if(detectContractFeature(this.contractWrapper,"ERC721Burnable"))return new Erc721Burnable(this.contractWrapper)}detectErc721LazyMintable(){if(detectContractFeature(this.contractWrapper,"ERC721LazyMintable"))return new Erc721LazyMintable(this,this.contractWrapper,this.storage)}detectErc721TieredDrop(){if(detectContractFeature(this.contractWrapper,"ERC721TieredDrop"))return new Erc721TieredDrop(this,this.contractWrapper,this.storage)}detectErc721SignatureMintable(){if(detectContractFeature(this.contractWrapper,"ERC721SignatureMintV1")||detectContractFeature(this.contractWrapper,"ERC721SignatureMintV2"))return new Erc721WithQuantitySignatureMintable(this.contractWrapper,this.storage)}}class StandardErc721{get chainId(){return this._chainId}constructor(tt,rt,at){_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"_chainId",void 0),_defineProperty$4(this,"transfer",buildTransactionFunction(async(st,ot)=>this.erc721.transfer.prepare(st,ot))),_defineProperty$4(this,"setApprovalForAll",buildTransactionFunction(async(st,ot)=>this.erc721.setApprovalForAll.prepare(st,ot))),_defineProperty$4(this,"setApprovalForToken",buildTransactionFunction(async(st,ot)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"approve",args:[st,ot]}))),this.contractWrapper=tt,this.storage=rt,this.erc721=new Erc721(this.contractWrapper,this.storage,at),this._chainId=at}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async getAll(tt){return this.erc721.getAll(tt)}async getOwned(tt){return this.erc721.getOwned(tt)}async getOwnedTokenIds(tt){return this.erc721.getOwnedTokenIds(tt)}async totalSupply(){return this.erc721.totalCirculatingSupply()}async get(tt){return this.erc721.get(tt)}async ownerOf(tt){return this.erc721.ownerOf(tt)}async balanceOf(tt){return this.erc721.balanceOf(tt)}async balance(){return this.erc721.balance()}async isApproved(tt,rt){return this.erc721.isApproved(tt,rt)}}const AirdropAddressInput=z$6.object({address:AddressSchema,quantity:AmountSchema.default(1)}),AirdropInputSchema=z$6.union([z$6.array(z$6.string()).transform(it=>it.map(tt=>AirdropAddressInput.parse({address:tt}))),z$6.array(AirdropAddressInput)]);class Erc1155Burnable{constructor(tt){_defineProperty$4(this,"featureName",FEATURE_EDITION_BURNABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"tokens",buildTransactionFunction(async(rt,at)=>{const st=await this.contractWrapper.getSignerAddress();return this.from.prepare(st,rt,at)})),_defineProperty$4(this,"from",buildTransactionFunction(async(rt,at,st)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"burn",args:[rt,at,st]}))),_defineProperty$4(this,"batch",buildTransactionFunction(async(rt,at)=>{const st=await this.contractWrapper.getSignerAddress();return this.batchFrom.prepare(st,rt,at)})),_defineProperty$4(this,"batchFrom",buildTransactionFunction(async(rt,at,st)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"burnBatch",args:[rt,at,st]}))),this.contractWrapper=tt}}class Erc1155Enumerable{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_EDITION_ENUMERABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc1155",void 0),this.erc1155=tt,this.contractWrapper=rt}async all(tt){const rt=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),at=BigNumber.from((tt==null?void 0:tt.count)||DEFAULT_QUERY_ALL_COUNT).toNumber(),st=Math.min((await this.totalCount()).toNumber(),rt+at);return await Promise.all([...Array(st-rt).keys()].map(ot=>this.erc1155.get((rt+ot).toString())))}async totalCount(){return await this.contractWrapper.readContract.nextTokenIdToMint()}async totalCirculatingSupply(tt){return await this.contractWrapper.readContract.totalSupply(tt)}async owned(tt){const rt=tt||await this.contractWrapper.getSignerAddress(),at=await this.contractWrapper.readContract.nextTokenIdToMint(),ot=(await this.contractWrapper.readContract.balanceOfBatch(Array(at.toNumber()).fill(rt),Array.from(Array(at.toNumber()).keys()))).map((lt,ut)=>({tokenId:ut,balance:lt})).filter(lt=>lt.balance.gt(0));return await Promise.all(ot.map(async lt=>({...await this.erc1155.get(lt.tokenId.toString()),owner:rt,quantityOwned:lt.balance.toString()})))}}async function getPrebuiltInfo(it,tt){try{const rt=new Contract(it,IThirdwebContractABI,tt),[at,st]=await Promise.all([toUtf8String(await rt.contractType()).replace(/\x00/g,""),await rt.contractVersion()]);return{type:at,version:st}}catch{return}}class ERC1155Claimable{constructor(tt){_defineProperty$4(this,"featureName",FEATURE_EDITION_CLAIM_CUSTOM.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(rt,at,st,ot)=>await this.getClaimTransaction(rt,at,st,ot))),this.contractWrapper=tt}async getClaimTransaction(tt,rt,at,st){let ot={};return st&&st.pricePerToken&&(ot=await calculateClaimCost(this.contractWrapper,st.pricePerToken,at,st.currencyAddress,st.checkERC20Allowance)),Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"claim",args:[tt,rt,at],overrides:ot})}}class Erc1155ClaimableWithConditions{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_EDITION_CLAIM_CONDITIONS_V2.name),_defineProperty$4(this,"conditions",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(st,ot,lt,ut)=>await this.conditions.getClaimTransaction(st,ot,lt,ut))),this.contractWrapper=tt,this.storage=rt;const at=new ContractMetadata(this.contractWrapper,CustomContractSchema,this.storage);this.conditions=new DropErc1155ClaimConditions(tt,at,this.storage)}}class Erc1155LazyMintable{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_EDITION_LAZY_MINTABLE_V2.name),_defineProperty$4(this,"revealer",void 0),_defineProperty$4(this,"claimWithConditions",void 0),_defineProperty$4(this,"claim",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc1155",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"lazyMint",buildTransactionFunction(async(st,ot)=>{const lt=await this.erc1155.nextTokenIdToMint(),ut=await uploadOrExtractURIs(st,this.storage,lt.toNumber(),ot),ht=ut[0].substring(0,ut[0].lastIndexOf("/"));for(let vt=0;vt<ut.length;vt++){const At=ut[vt].substring(0,ut[vt].lastIndexOf("/"));if(ht!==At)throw new Error(`Can only create batches with the same base URI for every entry in the batch. Expected '${ht}' but got '${At}'`)}const mt=vt=>{const At=this.contractWrapper.parseLogs("TokensLazyMinted",vt==null?void 0:vt.logs),xt=At[0].args.startTokenId,Et=At[0].args.endTokenId,Tt=[];for(let wt=xt;wt.lte(Et);wt=wt.add(1))Tt.push({id:wt,receipt:vt,data:()=>this.erc1155.getTokenMetadata(wt)});return Tt},bt=await getPrebuiltInfo(this.contractWrapper.readContract.address,this.contractWrapper.getProvider());return this.isLegacyEditionDropContract(this.contractWrapper,bt)?Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"lazyMint",args:[ut.length,`${ht.endsWith("/")?ht:`${ht}/`}`],parse:mt}):Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"lazyMint",args:[ut.length,`${ht.endsWith("/")?ht:`${ht}/`}`,toUtf8Bytes("")],parse:mt})})),this.erc1155=tt,this.contractWrapper=rt,this.storage=at,this.claim=this.detectErc1155Claimable(),this.claimWithConditions=this.detectErc1155ClaimableWithConditions(),this.revealer=this.detectErc1155Revealable()}detectErc1155Claimable(){if(detectContractFeature(this.contractWrapper,"ERC1155ClaimCustom"))return new ERC1155Claimable(this.contractWrapper)}detectErc1155ClaimableWithConditions(){if(detectContractFeature(this.contractWrapper,"ERC1155ClaimConditionsV1")||detectContractFeature(this.contractWrapper,"ERC1155ClaimConditionsV2")||detectContractFeature(this.contractWrapper,"ERC1155ClaimPhasesV1")||detectContractFeature(this.contractWrapper,"ERC1155ClaimPhasesV2"))return new Erc1155ClaimableWithConditions(this.contractWrapper,this.storage)}detectErc1155Revealable(){if(detectContractFeature(this.contractWrapper,"ERC1155Revealable"))return new DelayedReveal(this.contractWrapper,this.storage,FEATURE_EDITION_REVEALABLE.name,()=>this.erc1155.nextTokenIdToMint())}isLegacyEditionDropContract(tt,rt){return rt&&rt.type==="DropERC1155"&&rt.version<3||!1}}class Erc1155BatchMintable{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_EDITION_BATCH_MINTABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc1155",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(st,ot)=>{const lt=ot.map(bt=>bt.metadata),ut=ot.map(bt=>bt.supply),mt=(await uploadOrExtractURIs(lt,this.storage)).map((bt,vt)=>this.contractWrapper.readContract.interface.encodeFunctionData("mintTo",[st,MaxUint256$1,bt,ut[vt]]));return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[mt],parse:bt=>{const vt=this.contractWrapper.parseLogs("TokensMinted",bt.logs);if(vt.length===0||vt.length<lt.length)throw new Error("TokenMinted event not found, minting failed");return vt.map(At=>{const xt=At.args.tokenIdMinted;return{id:xt,receipt:bt,data:()=>this.erc1155.get(xt)}})}})})),this.erc1155=tt,this.contractWrapper=rt,this.storage=at}}class Erc1155Mintable{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_EDITION_MINTABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"erc1155",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"batch",void 0),_defineProperty$4(this,"to",buildTransactionFunction(async(st,ot)=>{const lt=await this.getMintTransaction(st,ot);return lt.setParse(ut=>{const ht=this.contractWrapper.parseLogs("TransferSingle",ut==null?void 0:ut.logs);if(ht.length===0)throw new Error("TransferSingleEvent event not found");const mt=ht[0].args.id;return{id:mt,receipt:ut,data:()=>this.erc1155.get(mt.toString())}}),lt})),_defineProperty$4(this,"additionalSupplyTo",buildTransactionFunction(async(st,ot,lt)=>{const ut=await this.erc1155.getTokenMetadata(ot);return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintTo",args:[st,ot,ut.uri,lt],parse:ht=>({id:BigNumber.from(ot),receipt:ht,data:()=>this.erc1155.get(ot)})})})),this.erc1155=tt,this.contractWrapper=rt,this.storage=at,this.batch=this.detectErc1155BatchMintable()}async getMintTransaction(tt,rt){const at=await uploadOrExtractURI(rt.metadata,this.storage);return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintTo",args:[tt,MaxUint256$1,at,rt.supply]})}detectErc1155BatchMintable(){if(detectContractFeature(this.contractWrapper,"ERC1155BatchMintable"))return new Erc1155BatchMintable(this.erc1155,this.contractWrapper,this.storage)}}class Erc1155SignatureMintable{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_EDITION_SIGNATURE_MINTABLE.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"mint",buildTransactionFunction(async st=>{const ot=st.payload,lt=st.signature,ut=await this.mapPayloadToContractStruct(ot),ht=await this.contractWrapper.getCallOverrides();return await setErc20Allowance(this.contractWrapper,ut.pricePerToken.mul(ut.quantity),ot.currencyAddress,ht),Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"mintWithSignature",args:[ut,lt],overrides:ht,parse:mt=>{const bt=this.contractWrapper.parseLogs("TokensMintedWithSignature",mt.logs);if(bt.length===0)throw new Error("No MintWithSignature event found");return{id:bt[0].args.tokenIdMinted,receipt:mt}}})})),_defineProperty$4(this,"mintBatch",buildTransactionFunction(async st=>{const lt=(await Promise.all(st.map(async ut=>{const ht=await this.mapPayloadToContractStruct(ut.payload),mt=ut.signature,bt=ut.payload.price;if(BigNumber.from(bt).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:ht,signature:mt}}))).map(ut=>this.contractWrapper.readContract.interface.encodeFunctionData("mintWithSignature",[ut.message,ut.signature]));if(hasFunction("multicall",this.contractWrapper))return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"multicall",args:[lt],parse:ut=>{const ht=this.contractWrapper.parseLogs("TokensMintedWithSignature",ut.logs);if(ht.length===0)throw new Error("No MintWithSignature event found");return ht.map(mt=>({id:mt.args.tokenIdMinted,receipt:ut}))}});throw new Error("Multicall not supported on this contract!")})),this.contractWrapper=tt,this.storage=rt,this.roles=at}async verify(tt){const rt=tt.payload,at=tt.signature,st=await this.mapPayloadToContractStruct(rt);return(await this.contractWrapper.readContract.verify(st,at))[0]}async generate(tt){const rt={...tt,tokenId:MaxUint256$1};return this.generateFromTokenId(rt)}async generateFromTokenId(tt){return(await this.generateBatchFromTokenIds([tt]))[0]}async generateBatch(tt){const rt=tt.map(at=>({...at,tokenId:MaxUint256$1}));return this.generateBatchFromTokenIds(rt)}async generateBatchFromTokenIds(tt){var mt;await((mt=this.roles)==null?void 0:mt.verify(["minter"],await this.contractWrapper.getSignerAddress()));const rt=tt.map(bt=>Signature1155PayloadInputWithTokenId.parse(bt)),at=rt.map(bt=>bt.metadata),st=await uploadOrExtractURIs(at,this.storage),ot=await this.contractWrapper.getChainID(),lt=this.contractWrapper.getSigner();invariant$1(lt,"No signer available");const ut=await getPrebuiltInfo(this.contractWrapper.readContract.address,this.contractWrapper.getProvider()),ht=(ut==null?void 0:ut.type)==="TokenERC1155";return await Promise.all(rt.map(async(bt,vt)=>{const At=st[vt],xt=Signature1155PayloadOutput.parse({...bt,uri:At}),Et=await this.contractWrapper.signTypedData(lt,{name:ht?"TokenERC1155":"SignatureMintERC1155",version:"1",chainId:ot,verifyingContract:this.contractWrapper.readContract.address},{MintRequest:MintRequest1155},await this.mapPayloadToContractStruct(xt));return{payload:xt,signature:Et.toString()}}))}async mapPayloadToContractStruct(tt){const rt=await normalizePriceValue(this.contractWrapper.getProvider(),tt.price,tt.currencyAddress);return{to:tt.to,tokenId:tt.tokenId,uri:tt.uri,quantity:tt.quantity,pricePerToken:rt,currency:tt.currencyAddress,validityStartTimestamp:tt.mintStartTime,validityEndTimestamp:tt.mintEndTime,uid:tt.uid,royaltyRecipient:tt.royaltyRecipient,royaltyBps:tt.royaltyBps,primarySaleRecipient:tt.primarySaleRecipient}}}class Erc1155{get chainId(){return this._chainId}constructor(tt,rt,at){var st=this;_defineProperty$4(this,"featureName",FEATURE_EDITION.name),_defineProperty$4(this,"query",void 0),_defineProperty$4(this,"mintable",void 0),_defineProperty$4(this,"burnable",void 0),_defineProperty$4(this,"lazyMintable",void 0),_defineProperty$4(this,"signatureMintable",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"_chainId",void 0),_defineProperty$4(this,"transfer",buildTransactionFunction(async function(ot,lt,ut){let ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0];const mt=await st.contractWrapper.getSignerAddress();return Transaction.fromContractWrapper({contractWrapper:st.contractWrapper,method:"safeTransferFrom",args:[mt,ot,lt,ut,ht]})})),_defineProperty$4(this,"setApprovalForAll",buildTransactionFunction(async(ot,lt)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setApprovalForAll",args:[ot,lt]}))),_defineProperty$4(this,"airdrop",buildTransactionFunction(async function(ot,lt){let ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0];const ht=await st.contractWrapper.getSignerAddress(),mt=await st.balanceOf(ht,ot),bt=AirdropInputSchema.parse(lt),vt=bt.reduce((xt,Et)=>xt+Number((Et==null?void 0:Et.quantity)||1),0);if(mt.toNumber()<vt)throw new Error(`The caller owns ${mt.toNumber()} NFTs, but wants to airdrop ${vt} NFTs.`);const At=bt.map(xt=>{let{address:Et,quantity:Tt}=xt;return st.contractWrapper.readContract.interface.encodeFunctionData("safeTransferFrom",[ht,Et,ot,Tt,ut])});return Transaction.fromContractWrapper({contractWrapper:st.contractWrapper,method:"multicall",args:[At]})})),_defineProperty$4(this,"mint",buildTransactionFunction(async ot=>this.mintTo.prepare(await this.contractWrapper.getSignerAddress(),ot))),_defineProperty$4(this,"mintTo",buildTransactionFunction(async(ot,lt)=>assertEnabled(this.mintable,FEATURE_EDITION_MINTABLE).to.prepare(ot,lt))),_defineProperty$4(this,"mintAdditionalSupply",buildTransactionFunction(async(ot,lt)=>assertEnabled(this.mintable,FEATURE_EDITION_MINTABLE).additionalSupplyTo.prepare(await this.contractWrapper.getSignerAddress(),ot,lt))),_defineProperty$4(this,"mintAdditionalSupplyTo",buildTransactionFunction(async(ot,lt,ut)=>assertEnabled(this.mintable,FEATURE_EDITION_MINTABLE).additionalSupplyTo.prepare(ot,lt,ut))),_defineProperty$4(this,"mintBatch",buildTransactionFunction(async ot=>this.mintBatchTo.prepare(await this.contractWrapper.getSignerAddress(),ot))),_defineProperty$4(this,"mintBatchTo",buildTransactionFunction(async(ot,lt)=>{var ut;return assertEnabled((ut=this.mintable)==null?void 0:ut.batch,FEATURE_EDITION_BATCH_MINTABLE).to.prepare(ot,lt)})),_defineProperty$4(this,"burn",buildTransactionFunction(async(ot,lt)=>assertEnabled(this.burnable,FEATURE_EDITION_BURNABLE).tokens.prepare(ot,lt))),_defineProperty$4(this,"burnFrom",buildTransactionFunction(async(ot,lt,ut)=>assertEnabled(this.burnable,FEATURE_EDITION_BURNABLE).from.prepare(ot,lt,ut))),_defineProperty$4(this,"burnBatch",buildTransactionFunction(async(ot,lt)=>assertEnabled(this.burnable,FEATURE_EDITION_BURNABLE).batch.prepare(ot,lt))),_defineProperty$4(this,"burnBatchFrom",buildTransactionFunction(async(ot,lt,ut)=>assertEnabled(this.burnable,FEATURE_EDITION_BURNABLE).batchFrom.prepare(ot,lt,ut))),_defineProperty$4(this,"lazyMint",buildTransactionFunction(async(ot,lt)=>assertEnabled(this.lazyMintable,FEATURE_EDITION_LAZY_MINTABLE_V2).lazyMint.prepare(ot,lt))),_defineProperty$4(this,"claim",buildTransactionFunction(async(ot,lt,ut)=>this.claimTo.prepare(await this.contractWrapper.getSignerAddress(),ot,lt,ut))),_defineProperty$4(this,"claimTo",buildTransactionFunction(async(ot,lt,ut,ht)=>{var vt,At;const mt=(vt=this.lazyMintable)==null?void 0:vt.claimWithConditions,bt=(At=this.lazyMintable)==null?void 0:At.claim;if(mt)return mt.to.prepare(ot,lt,ut,ht);if(bt)return bt.to.prepare(ot,lt,ut,ht);throw new ExtensionNotImplementedError(FEATURE_EDITION_CLAIM_CUSTOM)})),this.contractWrapper=tt,this.storage=rt,this.query=this.detectErc1155Enumerable(),this.mintable=this.detectErc1155Mintable(),this.burnable=this.detectErc1155Burnable(),this.lazyMintable=this.detectErc1155LazyMintable(),this.signatureMintable=this.detectErc1155SignatureMintable(),this._chainId=at}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async get(tt){const[rt,at]=await Promise.all([this.contractWrapper.readContract.totalSupply(tt).catch(()=>BigNumber.from(0)),this.getTokenMetadata(tt).catch(()=>({id:tt.toString(),uri:"",...FALLBACK_METADATA}))]);return{owner:AddressZero,metadata:at,type:"ERC1155",supply:rt.toString()}}async totalSupply(tt){return await this.contractWrapper.readContract.totalSupply(tt)}async balanceOf(tt,rt){return await this.contractWrapper.readContract.balanceOf(tt,rt)}async balance(tt){return await this.balanceOf(await this.contractWrapper.getSignerAddress(),tt)}async isApproved(tt,rt){return await this.contractWrapper.readContract.isApprovedForAll(tt,rt)}async nextTokenIdToMint(){if(hasFunction("nextTokenIdToMint",this.contractWrapper))return await this.contractWrapper.readContract.nextTokenIdToMint();throw new Error("Contract requires the `nextTokenIdToMint` function available to determine the next token ID to mint")}async getAll(tt){return assertEnabled(this.query,FEATURE_EDITION_ENUMERABLE).all(tt)}async totalCount(){return assertEnabled(this.query,FEATURE_EDITION_ENUMERABLE).totalCount()}async totalCirculatingSupply(tt){return assertEnabled(this.query,FEATURE_EDITION_ENUMERABLE).totalCirculatingSupply(tt)}async getOwned(tt){return assertEnabled(this.query,FEATURE_EDITION_ENUMERABLE).owned(tt)}async getMintTransaction(tt,rt){return assertEnabled(this.mintable,FEATURE_EDITION_MINTABLE).getMintTransaction(tt,rt)}async getClaimTransaction(tt,rt,at,st){var ut,ht;const ot=(ut=this.lazyMintable)==null?void 0:ut.claimWithConditions,lt=(ht=this.lazyMintable)==null?void 0:ht.claim;if(ot)return ot.conditions.getClaimTransaction(tt,rt,at,st);if(lt)return lt.getClaimTransaction(tt,rt,at,st);throw new ExtensionNotImplementedError(FEATURE_EDITION_CLAIM_CUSTOM)}get claimConditions(){var tt;return assertEnabled((tt=this.lazyMintable)==null?void 0:tt.claimWithConditions,FEATURE_EDITION_CLAIM_CONDITIONS_V2).conditions}get signature(){return assertEnabled(this.signatureMintable,FEATURE_EDITION_SIGNATURE_MINTABLE)}get revealer(){var tt;return assertEnabled((tt=this.lazyMintable)==null?void 0:tt.revealer,FEATURE_EDITION_REVEALABLE)}async getTokenMetadata(tt){const rt=await this.contractWrapper.readContract.uri(tt);if(!rt)throw new NotFoundError;return fetchTokenMetadata(tt,rt,this.storage)}detectErc1155Enumerable(){if(detectContractFeature(this.contractWrapper,"ERC1155Enumerable"))return new Erc1155Enumerable(this,this.contractWrapper)}detectErc1155Mintable(){if(detectContractFeature(this.contractWrapper,"ERC1155Mintable"))return new Erc1155Mintable(this,this.contractWrapper,this.storage)}detectErc1155Burnable(){if(detectContractFeature(this.contractWrapper,"ERC1155Burnable"))return new Erc1155Burnable(this.contractWrapper)}detectErc1155LazyMintable(){if(detectContractFeature(this.contractWrapper,"ERC1155LazyMintableV1")||detectContractFeature(this.contractWrapper,"ERC1155LazyMintableV2"))return new Erc1155LazyMintable(this,this.contractWrapper,this.storage)}detectErc1155SignatureMintable(){if(detectContractFeature(this.contractWrapper,"ERC1155SignatureMintable"))return new Erc1155SignatureMintable(this.contractWrapper,this.storage)}}class StandardErc1155{get chainId(){return this._chainId}constructor(tt,rt,at){var st=this;_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"erc1155",void 0),_defineProperty$4(this,"_chainId",void 0),_defineProperty$4(this,"transfer",buildTransactionFunction(async function(ot,lt,ut){let ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0];return st.erc1155.transfer.prepare(ot,lt,ut,ht)})),_defineProperty$4(this,"setApprovalForAll",buildTransactionFunction(async(ot,lt)=>this.erc1155.setApprovalForAll.prepare(ot,lt))),_defineProperty$4(this,"airdrop",buildTransactionFunction(async function(ot,lt){let ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0];return st.erc1155.airdrop.prepare(ot,lt,ut)})),this.contractWrapper=tt,this.storage=rt,this.erc1155=new Erc1155(this.contractWrapper,this.storage,at),this._chainId=at}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async get(tt){return this.erc1155.get(tt)}async totalSupply(tt){return this.erc1155.totalSupply(tt)}async balanceOf(tt,rt){return this.erc1155.balanceOf(tt,rt)}async balance(tt){return this.erc1155.balance(tt)}async isApproved(tt,rt){return this.erc1155.isApproved(tt,rt)}}async function isTokenApprovedForTransfer(it,tt,rt,at,st){try{const ot=new Contract(rt,ERC165Abi,it),lt=await ot.supportsInterface(InterfaceId_IERC721),ut=await ot.supportsInterface(InterfaceId_IERC1155);if(lt){const ht=new Contract(rt,Erc721Abi,it);return await ht.isApprovedForAll(st,tt)?!0:(await ht.getApproved(at)).toLowerCase()===tt.toLowerCase()}else return ut?await new Contract(rt,Erc1155Abi,it).isApprovedForAll(st,tt):(console.error("Contract does not implement ERC 1155 or ERC 721."),!1)}catch(ot){return console.error("Failed to check if token is approved",ot),!1}}async function handleTokenApproval(it,tt,rt,at,st){const ot=new ContractWrapper(it.getSignerOrProvider(),rt,ERC165Abi,it.options),lt=await ot.readContract.supportsInterface(InterfaceId_IERC721),ut=await ot.readContract.supportsInterface(InterfaceId_IERC1155);if(lt){const ht=new ContractWrapper(it.getSignerOrProvider(),rt,Erc721Abi,it.options);await ht.readContract.isApprovedForAll(st,tt)||(await ht.readContract.getApproved(at)).toLowerCase()===tt.toLowerCase()||await ht.sendTransaction("setApprovalForAll",[tt,!0])}else if(ut){const ht=new ContractWrapper(it.getSignerOrProvider(),rt,Erc1155Abi,it.options);await ht.readContract.isApprovedForAll(st,tt)||await ht.sendTransaction("setApprovalForAll",[tt,!0])}else throw Error("Contract must implement ERC 1155 or ERC 721.")}function validateNewListingParam(it){switch(invariant$1(it.assetContractAddress!==void 0&&it.assetContractAddress!==null,"Asset contract address is required"),invariant$1(it.buyoutPricePerToken!==void 0&&it.buyoutPricePerToken!==null,"Buyout price is required"),invariant$1(it.listingDurationInSeconds!==void 0&&it.listingDurationInSeconds!==null,"Listing duration is required"),invariant$1(it.startTimestamp!==void 0&&it.startTimestamp!==null,"Start time is required"),invariant$1(it.tokenId!==void 0&&it.tokenId!==null,"Token ID is required"),invariant$1(it.quantity!==void 0&&it.quantity!==null,"Quantity is required"),it.type){case"NewAuctionListing":invariant$1(it.reservePricePerToken!==void 0&&it.reservePricePerToken!==null,"Reserve price is required")}}async function mapOffer(it,tt,rt){return{quantity:rt.quantityDesired,pricePerToken:rt.pricePerToken,currencyContractAddress:rt.currency,buyerAddress:rt.offeror,quantityDesired:rt.quantityWanted,currencyValue:await fetchCurrencyValue(it,rt.currency,rt.quantityWanted.mul(rt.pricePerToken)),listingId:tt}}function isWinningBid(it,tt,rt){return rt=BigNumber.from(rt),it=BigNumber.from(it),tt=BigNumber.from(tt),it.eq(BigNumber.from(0))?!1:tt.sub(it).mul(MAX_BPS).div(it).gte(rt)}async function getAllInBatches(it,tt,rt){let at=[];for(;tt-it>DEFAULT_QUERY_ALL_COUNT;)at.push(rt(it,it+DEFAULT_QUERY_ALL_COUNT-1)),it+=DEFAULT_QUERY_ALL_COUNT;return at.push(rt(it,tt-1)),await Promise.all(at)}class MarketplaceDirect{constructor(tt,rt){_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),this.contractWrapper=tt,this.storage=rt}getAddress(){return this.contractWrapper.readContract.address}async getListing(tt){const rt=await this.contractWrapper.readContract.listings(tt);if(rt.assetContract===AddressZero)throw new ListingNotFoundError(this.getAddress(),tt.toString());if(rt.listingType!==ListingType.Direct)throw new WrongListingTypeError(this.getAddress(),tt.toString(),"Auction","Direct");return await this.mapListing(rt)}async getActiveOffer(tt,rt){await this.validateListing(BigNumber.from(tt)),invariant$1(isAddress(rt),"Address must be a valid address");const at=await this.contractWrapper.readContract.offers(tt,rt);if(at.offeror!==AddressZero)return await mapOffer(this.contractWrapper.getProvider(),BigNumber.from(tt),at)}async createListing(tt){validateNewListingParam(tt),await handleTokenApproval(this.contractWrapper,this.getAddress(),tt.assetContractAddress,tt.tokenId,await this.contractWrapper.getSignerAddress());const rt=await normalizePriceValue(this.contractWrapper.getProvider(),tt.buyoutPricePerToken,tt.currencyContractAddress);let at=Math.floor(tt.startTimestamp.getTime()/1e3);const ot=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;at<ot&&(at=ot);const lt=await this.contractWrapper.sendTransaction("createListing",[{assetContract:tt.assetContractAddress,tokenId:tt.tokenId,buyoutPricePerToken:rt,currencyToAccept:cleanCurrencyAddress(tt.currencyContractAddress),listingType:ListingType.Direct,quantityToList:tt.quantity,reservePricePerToken:rt,secondsUntilEndTime:tt.listingDurationInSeconds,startTime:BigNumber.from(at)}],{gasLimit:5e5});return{id:this.contractWrapper.parseLogs("ListingAdded",lt==null?void 0:lt.logs)[0].args.listingId,receipt:lt}}async makeOffer(tt,rt,at,st,ot){if(isNativeToken(at))throw new Error("You must use the wrapped native token address when making an offer with a native token");const lt=await normalizePriceValue(this.contractWrapper.getProvider(),st,at);try{await this.getListing(tt)}catch(vt){throw console.error("Failed to get listing, err =",vt),new Error(`Error getting the listing with id ${tt}`)}const ut=BigNumber.from(rt),ht=BigNumber.from(lt).mul(ut),mt=await this.contractWrapper.getCallOverrides()||{};await setErc20Allowance(this.contractWrapper,ht,at,mt);let bt=MaxUint256$1;return ot&&(bt=BigNumber.from(Math.floor(ot.getTime()/1e3))),{receipt:await this.contractWrapper.sendTransaction("offer",[tt,rt,at,lt,bt],mt)}}async acceptOffer(tt,rt){await this.validateListing(BigNumber.from(tt));const at=await this.contractWrapper.readContract.offers(tt,rt);return{receipt:await this.contractWrapper.sendTransaction("acceptOffer",[tt,rt,at.currency,at.pricePerToken])}}async buyoutListing(tt,rt,at){const st=await this.validateListing(BigNumber.from(tt)),{valid:ot,error:lt}=await this.isStillValidListing(st,rt);if(!ot)throw new Error(`Listing ${tt} is no longer valid. ${lt}`);const ut=at||await this.contractWrapper.getSignerAddress(),ht=BigNumber.from(rt),mt=BigNumber.from(st.buyoutPrice).mul(ht),bt=await this.contractWrapper.getCallOverrides()||{};return await setErc20Allowance(this.contractWrapper,mt,st.currencyContractAddress,bt),{receipt:await this.contractWrapper.sendTransaction("buy",[tt,ut,ht,st.currencyContractAddress,mt],bt)}}async updateListing(tt){return{receipt:await this.contractWrapper.sendTransaction("updateListing",[tt.id,tt.quantity,tt.buyoutPrice,tt.buyoutPrice,tt.currencyContractAddress,tt.startTimeInSeconds,tt.secondsUntilEnd])}}async cancelListing(tt){return{receipt:await this.contractWrapper.sendTransaction("cancelDirectListing",[tt])}}async validateListing(tt){try{return await this.getListing(tt)}catch(rt){throw console.error(`Error getting the listing with id ${tt}`),rt}}async mapListing(tt){return{assetContractAddress:tt.assetContract,buyoutPrice:BigNumber.from(tt.buyoutPricePerToken),currencyContractAddress:tt.currency,buyoutCurrencyValuePerToken:await fetchCurrencyValue(this.contractWrapper.getProvider(),tt.currency,tt.buyoutPricePerToken),id:tt.listingId.toString(),tokenId:tt.tokenId,quantity:tt.quantity,startTimeInSeconds:tt.startTime,asset:await fetchTokenMetadataForContract(tt.assetContract,this.contractWrapper.getProvider(),tt.tokenId,this.storage),secondsUntilEnd:tt.endTime,sellerAddress:tt.tokenOwner,type:ListingType.Direct}}async isStillValidListing(tt,rt){if(!await isTokenApprovedForTransfer(this.contractWrapper.getProvider(),this.getAddress(),tt.assetContractAddress,tt.tokenId,tt.sellerAddress))return{valid:!1,error:`Token '${tt.tokenId}' from contract '${tt.assetContractAddress}' is not approved for transfer`};const st=this.contractWrapper.getProvider(),ot=new Contract(tt.assetContractAddress,ERC165Abi,st),lt=await ot.supportsInterface(InterfaceId_IERC721),ut=await ot.supportsInterface(InterfaceId_IERC1155);if(lt){const mt=(await new Contract(tt.assetContractAddress,Erc721Abi,st).ownerOf(tt.tokenId)).toLowerCase()===tt.sellerAddress.toLowerCase();return{valid:mt,error:mt?void 0:`Seller is not the owner of Token '${tt.tokenId}' from contract '${tt.assetContractAddress} anymore'`}}else if(ut){const bt=(await new Contract(tt.assetContractAddress,Erc1155Abi,st).balanceOf(tt.sellerAddress,tt.tokenId)).gte(rt||tt.quantity);return{valid:bt,error:bt?void 0:`Seller does not have enough balance of Token '${tt.tokenId}' from contract '${tt.assetContractAddress} to fulfill the listing`}}else return{valid:!1,error:"Contract does not implement ERC 1155 or ERC 721."}}}class MarketplaceAuction{constructor(tt,rt){_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"encoder",void 0),this.contractWrapper=tt,this.storage=rt,this.encoder=new ContractEncoder(tt)}getAddress(){return this.contractWrapper.readContract.address}async getListing(tt){const rt=await this.contractWrapper.readContract.listings(tt);if(rt.listingId.toString()!==tt.toString())throw new ListingNotFoundError(this.getAddress(),tt.toString());if(rt.listingType!==ListingType.Auction)throw new WrongListingTypeError(this.getAddress(),tt.toString(),"Direct","Auction");return await this.mapListing(rt)}async getWinningBid(tt){await this.validateListing(BigNumber.from(tt));const rt=await this.contractWrapper.readContract.winningBid(tt);if(rt.offeror!==AddressZero)return await mapOffer(this.contractWrapper.getProvider(),BigNumber.from(tt),rt)}async getWinner(tt){const rt=await this.validateListing(BigNumber.from(tt)),at=await this.contractWrapper.readContract.winningBid(tt),st=BigNumber.from(Math.floor(Date.now()/1e3)),ot=BigNumber.from(rt.endTimeInEpochSeconds);if(st.gt(ot)&&at.offeror!==AddressZero)return at.offeror;const ut=(await this.contractWrapper.readContract.queryFilter(this.contractWrapper.readContract.filters.AuctionClosed())).find(ht=>ht.args.listingId.eq(BigNumber.from(tt)));if(!ut)throw new Error(`Could not find auction with listingId ${tt} in closed auctions`);return ut.args.winningBidder}async createListing(tt){validateNewListingParam(tt),await handleTokenApproval(this.contractWrapper,this.getAddress(),tt.assetContractAddress,tt.tokenId,await this.contractWrapper.getSignerAddress());const rt=await normalizePriceValue(this.contractWrapper.getProvider(),tt.buyoutPricePerToken,tt.currencyContractAddress),at=await normalizePriceValue(this.contractWrapper.getProvider(),tt.reservePricePerToken,tt.currencyContractAddress);let st=Math.floor(tt.startTimestamp.getTime()/1e3);const lt=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;st<lt&&(st=lt);const ut=await this.contractWrapper.sendTransaction("createListing",[{assetContract:tt.assetContractAddress,tokenId:tt.tokenId,buyoutPricePerToken:rt,currencyToAccept:cleanCurrencyAddress(tt.currencyContractAddress),listingType:ListingType.Auction,quantityToList:tt.quantity,reservePricePerToken:at,secondsUntilEndTime:tt.listingDurationInSeconds,startTime:BigNumber.from(st)}],{gasLimit:5e5});return{id:this.contractWrapper.parseLogs("ListingAdded",ut==null?void 0:ut.logs)[0].args.listingId,receipt:ut}}async buyoutListing(tt){const rt=await this.validateListing(BigNumber.from(tt)),at=await fetchCurrencyMetadata(this.contractWrapper.getProvider(),rt.currencyContractAddress);return this.makeBid(tt,formatUnits(rt.buyoutPrice,at.decimals))}async makeBid(tt,rt){const at=await this.validateListing(BigNumber.from(tt)),st=await normalizePriceValue(this.contractWrapper.getProvider(),rt,at.currencyContractAddress);if(st.eq(BigNumber.from(0)))throw new Error("Cannot make a bid with 0 value");const ot=await this.contractWrapper.readContract.bidBufferBps(),lt=await this.getWinningBid(tt);if(lt){const bt=isWinningBid(lt.pricePerToken,st,ot);invariant$1(bt,"Bid price is too low based on the current winning bid and the bid buffer")}else{const bt=st,vt=BigNumber.from(at.reservePrice);invariant$1(bt.gte(vt),"Bid price is too low based on reserve price")}const ut=BigNumber.from(at.quantity),ht=st.mul(ut),mt=await this.contractWrapper.getCallOverrides()||{};return await setErc20Allowance(this.contractWrapper,ht,at.currencyContractAddress,mt),{receipt:await this.contractWrapper.sendTransaction("offer",[tt,at.quantity,at.currencyContractAddress,st,MaxUint256$1],mt)}}async cancelListing(tt){const rt=await this.validateListing(BigNumber.from(tt)),at=BigNumber.from(Math.floor(Date.now()/1e3)),st=BigNumber.from(rt.startTimeInEpochSeconds),ot=await this.contractWrapper.readContract.winningBid(tt);if(at.gt(st)&&ot.offeror!==AddressZero)throw new AuctionAlreadyStartedError(tt.toString());return{receipt:await this.contractWrapper.sendTransaction("closeAuction",[BigNumber.from(tt),await this.contractWrapper.getSignerAddress()])}}async closeListing(tt,rt){rt||(rt=await this.contractWrapper.getSignerAddress());const at=await this.validateListing(BigNumber.from(tt));try{return{receipt:await this.contractWrapper.sendTransaction("closeAuction",[BigNumber.from(tt),rt])}}catch(st){throw st.message.includes("cannot close auction before it has ended")?new AuctionHasNotEndedError(tt.toString(),at.endTimeInEpochSeconds.toString()):st}}async executeSale(tt){const rt=await this.validateListing(BigNumber.from(tt));try{const at=await this.getWinningBid(tt);invariant$1(at,"No winning bid found");const st=this.encoder.encode("closeAuction",[tt,rt.sellerAddress]),ot=this.encoder.encode("closeAuction",[tt,at.buyerAddress]);return await this.contractWrapper.multiCall([st,ot])}catch(at){throw at.message.includes("cannot close auction before it has ended")?new AuctionHasNotEndedError(tt.toString(),rt.endTimeInEpochSeconds.toString()):at}}async updateListing(tt){return{receipt:await this.contractWrapper.sendTransaction("updateListing",[tt.id,tt.quantity,tt.reservePrice,tt.buyoutPrice,tt.currencyContractAddress,tt.startTimeInEpochSeconds,tt.endTimeInEpochSeconds])}}async getBidBufferBps(){return this.contractWrapper.readContract.bidBufferBps()}async getMinimumNextBid(tt){const[rt,at,st]=await Promise.all([this.getBidBufferBps(),this.getWinningBid(tt),await this.validateListing(BigNumber.from(tt))]),ot=at?at.currencyValue.value:st.reservePrice,lt=ot.add(ot.mul(rt).div(1e4));return fetchCurrencyValue(this.contractWrapper.getProvider(),st.currencyContractAddress,lt)}async validateListing(tt){try{return await this.getListing(tt)}catch(rt){throw console.error(`Error getting the listing with id ${tt}`),rt}}async mapListing(tt){return{assetContractAddress:tt.assetContract,buyoutPrice:BigNumber.from(tt.buyoutPricePerToken),currencyContractAddress:tt.currency,buyoutCurrencyValuePerToken:await fetchCurrencyValue(this.contractWrapper.getProvider(),tt.currency,tt.buyoutPricePerToken),id:tt.listingId.toString(),tokenId:tt.tokenId,quantity:tt.quantity,startTimeInEpochSeconds:tt.startTime,asset:await fetchTokenMetadataForContract(tt.assetContract,this.contractWrapper.getProvider(),tt.tokenId,this.storage),reservePriceCurrencyValuePerToken:await fetchCurrencyValue(this.contractWrapper.getProvider(),tt.currency,tt.reservePricePerToken),reservePrice:BigNumber.from(tt.reservePricePerToken),endTimeInEpochSeconds:tt.endTime,sellerAddress:tt.tokenOwner,type:ListingType.Auction}}}const DirectListingInputParamsSchema=z$6.object({assetContractAddress:AddressSchema,tokenId:BigNumberishSchema,quantity:BigNumberishSchema.default(1),currencyContractAddress:AddressSchema.default(NATIVE_TOKEN_ADDRESS),pricePerToken:AmountSchema,startTimestamp:RawDateSchema$1.default(new Date),endTimestamp:EndDateSchema,isReservedListing:z$6.boolean().default(!1)});class ContractEvents{constructor(tt){_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt}addTransactionListener(tt){this.contractWrapper.addListener(EventType.Transaction,tt)}removeTransactionListener(tt){this.contractWrapper.off(EventType.Transaction,tt)}addEventListener(tt,rt){const at=this.contractWrapper.readContract.interface.getEvent(tt),ot={address:this.contractWrapper.readContract.address,topics:[this.contractWrapper.readContract.interface.getEventTopic(at)]},lt=ut=>{const ht=this.contractWrapper.readContract.interface.parseLog(ut);rt(this.toContractEvent(ht.eventFragment,ht.args,ut))};return this.contractWrapper.getProvider().on(ot,lt),()=>{this.contractWrapper.getProvider().off(ot,lt)}}listenToAllEvents(tt){const at={address:this.contractWrapper.readContract.address},st=ot=>{try{const lt=this.contractWrapper.readContract.interface.parseLog(ot);tt(this.toContractEvent(lt.eventFragment,lt.args,ot))}catch(lt){console.error("Could not parse event:",ot,lt)}};return this.contractWrapper.getProvider().on(at,st),()=>{this.contractWrapper.getProvider().off(at,st)}}removeEventListener(tt,rt){const at=this.contractWrapper.readContract.interface.getEvent(tt);this.contractWrapper.readContract.off(at.name,rt)}removeAllListeners(){this.contractWrapper.readContract.removeAllListeners();const rt={address:this.contractWrapper.readContract.address};this.contractWrapper.getProvider().removeAllListeners(rt)}async getAllEvents(){let tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{fromBlock:0,toBlock:"latest",order:"desc"};const at=(await this.contractWrapper.readContract.queryFilter({},tt.fromBlock,tt.toBlock)).sort((st,ot)=>tt.order==="desc"?ot.blockNumber-st.blockNumber:st.blockNumber-ot.blockNumber);return this.parseEvents(at)}async getEvents(tt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fromBlock:0,toBlock:"latest",order:"desc"};const at=this.contractWrapper.readContract.interface.getEvent(tt),st=this.contractWrapper.readContract.interface.getEvent(tt),ot=rt.filters?st.inputs.map(mt=>rt.filters[mt.name]):[],lt=this.contractWrapper.readContract.filters[at.name](...ot),ht=(await this.contractWrapper.readContract.queryFilter(lt,rt.fromBlock,rt.toBlock)).sort((mt,bt)=>rt.order==="desc"?bt.blockNumber-mt.blockNumber:mt.blockNumber-bt.blockNumber);return this.parseEvents(ht)}parseEvents(tt){return tt.map(rt=>{const at=Object.fromEntries(Object.entries(rt).filter(st=>typeof st[1]!="function"&&st[0]!=="args"));if(rt.args){const st=Object.entries(rt.args),ot=st.slice(st.length/2,st.length),lt={};for(const[ut,ht]of ot)lt[ut]=ht;return{eventName:rt.event||"",data:lt,transaction:at}}return{eventName:rt.event||"",data:{},transaction:at}})}toContractEvent(tt,rt,at){const st=Object.fromEntries(Object.entries(at).filter(lt=>typeof lt[1]!="function"&&lt[0]!=="args")),ot={};return tt.inputs.forEach((lt,ut)=>{if(Array.isArray(rt[ut])){const ht=lt.components;if(ht){const mt=rt[ut];if(lt.type==="tuple[]"){const bt=[];for(let vt=0;vt<mt.length;vt++){const At=mt[vt],xt={};for(let Et=0;Et<ht.length;Et++){const Tt=ht[Et].name;xt[Tt]=At[Et]}bt.push(xt)}ot[lt.name]=bt}else{const bt={};for(let vt=0;vt<ht.length;vt++){const At=ht[vt].name;bt[At]=mt[vt]}ot[lt.name]=bt}}}else ot[lt.name]=rt[ut]}),{eventName:tt.name,data:ot,transaction:st}}}class ContractInterceptor{constructor(tt){_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt}overrideNextTransaction(tt){this.contractWrapper.withTransactionOverride(tt)}}class GasCostEstimator{constructor(tt){_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt}async gasCostOf(tt,rt){const at=await this.contractWrapper.getPreferredGasPrice(),st=await this.contractWrapper.estimateGas(tt,rt);return formatEther(st.mul(at))}async gasLimitOf(tt,rt){return this.contractWrapper.estimateGas(tt,rt)}async currentGasPriceInGwei(){const tt=await this.contractWrapper.getProvider().getGasPrice();return formatUnits(tt,"gwei")}}class MarketplaceV3DirectListings{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_DIRECT_LISTINGS.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),this.contractWrapper=tt,this.storage=rt,this.events=new ContractEvents(this.contractWrapper),this.encoder=new ContractEncoder(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper)}getAddress(){return this.contractWrapper.readContract.address}async getTotalCount(){return await this.contractWrapper.readContract.totalListings()}async getAll(tt){const rt=await this.getTotalCount();let at=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),st=rt.toNumber();if(st===0)throw new Error("No listings exist on the contract.");let ot=[];ot=(await getAllInBatches(at,st,this.contractWrapper.readContract.getAllListings)).flat();const ut=this.applyFilter(ot,tt);return await Promise.all(ut.map(ht=>this.mapListing(ht)))}async getAllValid(tt){const rt=await this.getTotalCount();let at=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),st=rt.toNumber();if(st===0)throw new Error("No listings exist on the contract.");let ot=[];ot=(await getAllInBatches(at,st,this.contractWrapper.readContract.getAllValidListings)).flat();const ut=this.applyFilter(ot,tt);return await Promise.all(ut.map(ht=>this.mapListing(ht)))}async getListing(tt){const rt=await this.contractWrapper.readContract.getListing(tt);return await this.mapListing(rt)}async isBuyerApprovedForListing(tt,rt){if(!(await this.validateListing(BigNumber.from(tt))).isReservedListing)throw new Error(`Listing ${tt} is not a reserved listing.`);return await this.contractWrapper.readContract.isBuyerApprovedForListing(tt,rt)}async isCurrencyApprovedForListing(tt,rt){return await this.validateListing(BigNumber.from(tt)),await this.contractWrapper.readContract.isCurrencyApprovedForListing(tt,rt)}async currencyPriceForListing(tt,rt){const at=await this.validateListing(BigNumber.from(tt));if(rt===at.currencyContractAddress)return at.pricePerToken;if(!await this.isCurrencyApprovedForListing(tt,rt))throw new Error(`Currency ${rt} is not approved for Listing ${tt}.`);return await this.contractWrapper.readContract.currencyPriceForListing(tt,rt)}async createListing(tt){const rt=DirectListingInputParamsSchema.parse(tt);await handleTokenApproval(this.contractWrapper,this.getAddress(),rt.assetContractAddress,rt.tokenId,await this.contractWrapper.getSignerAddress());const at=await normalizePriceValue(this.contractWrapper.getProvider(),rt.pricePerToken,rt.currencyContractAddress),ot=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;rt.startTimestamp.lt(ot)&&(rt.startTimestamp=BigNumber.from(ot));const lt=await this.contractWrapper.sendTransaction("createListing",[{assetContract:rt.assetContractAddress,tokenId:rt.tokenId,quantity:rt.quantity,currency:cleanCurrencyAddress(rt.currencyContractAddress),pricePerToken:at,startTimestamp:rt.startTimestamp,endTimestamp:rt.endTimestamp,reserved:rt.isReservedListing}],{gasLimit:5e5});return{id:this.contractWrapper.parseLogs("NewListing",lt==null?void 0:lt.logs)[0].args.listingId,receipt:lt}}async updateListing(tt,rt){const at=DirectListingInputParamsSchema.parse(rt);await handleTokenApproval(this.contractWrapper,this.getAddress(),at.assetContractAddress,at.tokenId,await this.contractWrapper.getSignerAddress());const st=await normalizePriceValue(this.contractWrapper.getProvider(),at.pricePerToken,at.currencyContractAddress),ot=await this.contractWrapper.sendTransaction("updateListing",[tt,{assetContract:at.assetContractAddress,tokenId:at.tokenId,quantity:at.quantity,currency:cleanCurrencyAddress(at.currencyContractAddress),pricePerToken:st,startTimestamp:at.startTimestamp,endTimestamp:at.endTimestamp,reserved:at.isReservedListing}],{gasLimit:5e5});return{id:this.contractWrapper.parseLogs("UpdatedListing",ot==null?void 0:ot.logs)[0].args.listingId,receipt:ot}}async cancelListing(tt){return{receipt:await this.contractWrapper.sendTransaction("cancelListing",[tt])}}async buyFromListing(tt,rt,at){const st=await this.validateListing(BigNumber.from(tt)),{valid:ot,error:lt}=await this.isStillValidListing(st,rt);if(!ot)throw new Error(`Listing ${tt} is no longer valid. ${lt}`);const ut=at||await this.contractWrapper.getSignerAddress(),ht=BigNumber.from(rt),mt=BigNumber.from(st.pricePerToken).mul(ht),bt=await this.contractWrapper.getCallOverrides()||{};return await setErc20Allowance(this.contractWrapper,mt,st.currencyContractAddress,bt),{receipt:await this.contractWrapper.sendTransaction("buyFromListing",[tt,ut,ht,st.currencyContractAddress,mt],bt)}}async approveBuyerForReservedListing(tt,rt){if(await this.isBuyerApprovedForListing(tt,rt))throw new Error(`Buyer ${rt} already approved for listing ${tt}.`);return{receipt:await this.contractWrapper.sendTransaction("approveBuyerForListing",[tt,rt,!0])}}async revokeBuyerApprovalForReservedListing(tt,rt){if(await this.isBuyerApprovedForListing(tt,rt))return{receipt:await this.contractWrapper.sendTransaction("approveBuyerForListing",[tt,rt,!1])};throw new Error(`Buyer ${rt} not approved for listing ${tt}.`)}async approveCurrencyForListing(tt,rt,at){const st=await this.validateListing(BigNumber.from(tt));rt===st.currencyContractAddress&&invariant$1(at===st.pricePerToken,"Approving listing currency with a different price.");const ot=await this.contractWrapper.readContract.currencyPriceForListing(tt,rt);return invariant$1(at===ot,"Currency already approved with this price."),{receipt:await this.contractWrapper.sendTransaction("approveCurrencyForListing",[tt,rt,at])}}async revokeCurrencyApprovalForListing(tt,rt){const at=await this.validateListing(BigNumber.from(tt));if(rt===at.currencyContractAddress)throw new Error("Can't revoke approval for main listing currency.");const st=await this.contractWrapper.readContract.currencyPriceForListing(tt,rt);return invariant$1(!st.isZero(),"Currency not approved."),{receipt:await this.contractWrapper.sendTransaction("approveCurrencyForListing",[tt,rt,BigNumber.from(0)])}}async validateListing(tt){try{return await this.getListing(tt)}catch(rt){throw console.error(`Error getting the listing with id ${tt}`),rt}}async mapListing(tt){let rt=Status.UNSET;const st=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;switch(tt.status){case 1:rt=BigNumber.from(tt.startTimestamp).gt(st)?Status.Created:BigNumber.from(tt.endTimestamp).lt(st)?Status.Expired:Status.Active;break;case 2:rt=Status.Completed;break;case 3:rt=Status.Cancelled;break}return{assetContractAddress:tt.assetContract,currencyContractAddress:tt.currency,pricePerToken:tt.pricePerToken.toString(),currencyValuePerToken:await fetchCurrencyValue(this.contractWrapper.getProvider(),tt.currency,tt.pricePerToken),id:tt.listingId.toString(),tokenId:tt.tokenId.toString(),quantity:tt.quantity.toString(),startTimeInSeconds:BigNumber.from(tt.startTimestamp).toNumber(),asset:await fetchTokenMetadataForContract(tt.assetContract,this.contractWrapper.getProvider(),tt.tokenId,this.storage),endTimeInSeconds:BigNumber.from(tt.endTimestamp).toNumber(),creatorAddress:tt.listingCreator,isReservedListing:tt.reserved,status:rt}}async isStillValidListing(tt,rt){if(!await isTokenApprovedForTransfer(this.contractWrapper.getProvider(),this.getAddress(),tt.assetContractAddress,tt.tokenId,tt.creatorAddress))return{valid:!1,error:`Token '${tt.tokenId}' from contract '${tt.assetContractAddress}' is not approved for transfer`};const st=this.contractWrapper.getProvider(),ot=new Contract(tt.assetContractAddress,ERC165Abi,st),lt=await ot.supportsInterface(InterfaceId_IERC721),ut=await ot.supportsInterface(InterfaceId_IERC1155);if(lt){const mt=(await new Contract(tt.assetContractAddress,Erc721Abi,st).ownerOf(tt.tokenId)).toLowerCase()===tt.creatorAddress.toLowerCase();return{valid:mt,error:mt?void 0:`Seller is not the owner of Token '${tt.tokenId}' from contract '${tt.assetContractAddress} anymore'`}}else if(ut){const bt=(await new Contract(tt.assetContractAddress,Erc1155Abi,st).balanceOf(tt.creatorAddress,tt.tokenId)).gte(rt||tt.quantity);return{valid:bt,error:bt?void 0:`Seller does not have enough balance of Token '${tt.tokenId}' from contract '${tt.assetContractAddress} to fulfill the listing`}}else return{valid:!1,error:"Contract does not implement ERC 1155 or ERC 721."}}applyFilter(tt,rt){let at=[...tt];return rt&&(rt.seller&&(at=at.filter(st=>{var ot;return st.listingCreator.toString().toLowerCase()===((ot=rt==null?void 0:rt.seller)==null?void 0:ot.toString().toLowerCase())})),rt.tokenContract&&(at=at.filter(st=>{var ot;return st.assetContract.toString().toLowerCase()===((ot=rt==null?void 0:rt.tokenContract)==null?void 0:ot.toString().toLowerCase())})),rt.tokenId!==void 0&&(at=at.filter(st=>{var ot;return st.tokenId.toString()===((ot=rt==null?void 0:rt.tokenId)==null?void 0:ot.toString())}))),(rt==null?void 0:rt.count)&&rt.count<at.length?at.slice(0,rt.count):at}}const EnglishAuctionInputParamsSchema=z$6.object({assetContractAddress:AddressSchema,tokenId:BigNumberishSchema,quantity:BigNumberishSchema.default(1),currencyContractAddress:AddressSchema.default(NATIVE_TOKEN_ADDRESS),minimumBidAmount:AmountSchema,buyoutBidAmount:AmountSchema,timeBufferInSeconds:BigNumberishSchema.default(900),bidBufferBps:BigNumberishSchema.default(500),startTimestamp:RawDateSchema$1.default(new Date),endTimestamp:EndDateSchema});class MarketplaceV3EnglishAuctions{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_ENGLISH_AUCTIONS.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),this.contractWrapper=tt,this.storage=rt,this.events=new ContractEvents(this.contractWrapper),this.encoder=new ContractEncoder(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper)}getAddress(){return this.contractWrapper.readContract.address}async getTotalCount(){return await this.contractWrapper.readContract.totalAuctions()}async getAll(tt){const rt=await this.getTotalCount();let at=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),st=rt.toNumber();if(st===0)throw new Error("No auctions exist on the contract.");let ot=[];ot=(await getAllInBatches(at,st,this.contractWrapper.readContract.getAllAuctions)).flat();const ut=this.applyFilter(ot,tt);return await Promise.all(ut.map(ht=>this.mapAuction(ht)))}async getAllValid(tt){const rt=await this.getTotalCount();let at=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),st=rt.toNumber();if(st===0)throw new Error("No auctions exist on the contract.");let ot=[];ot=(await getAllInBatches(at,st,this.contractWrapper.readContract.getAllValidAuctions)).flat();const ut=this.applyFilter(ot,tt);return await Promise.all(ut.map(ht=>this.mapAuction(ht)))}async getAuction(tt){const rt=await this.contractWrapper.readContract.getAuction(tt);return await this.mapAuction(rt)}async getWinningBid(tt){await this.validateAuction(BigNumber.from(tt));const rt=await this.contractWrapper.readContract.getWinningBid(tt);if(rt._bidder!==AddressZero)return await this.mapBid(tt.toString(),rt._bidder,rt._currency,rt._bidAmount.toString())}async isWinningBid(tt,rt){return await this.contractWrapper.readContract.isNewWinningBid(tt,rt)}async getWinner(tt){const rt=await this.validateAuction(BigNumber.from(tt)),at=await this.contractWrapper.readContract.getWinningBid(tt),st=BigNumber.from(Math.floor(Date.now()/1e3)),ot=BigNumber.from(rt.endTimeInSeconds);if(st.gt(ot)&&at._bidder!==AddressZero)return at._bidder;const ut=(await this.contractWrapper.readContract.queryFilter(this.contractWrapper.readContract.filters.AuctionClosed())).find(ht=>ht.args.auctionId.eq(BigNumber.from(tt)));if(!ut)throw new Error(`Could not find auction with ID ${tt} in closed auctions`);return ut.args.winningBidder}async createAuction(tt){const rt=EnglishAuctionInputParamsSchema.parse(tt);await handleTokenApproval(this.contractWrapper,this.getAddress(),rt.assetContractAddress,rt.tokenId,await this.contractWrapper.getSignerAddress());const at=await normalizePriceValue(this.contractWrapper.getProvider(),rt.buyoutBidAmount,rt.currencyContractAddress),st=await normalizePriceValue(this.contractWrapper.getProvider(),rt.minimumBidAmount,rt.currencyContractAddress),lt=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;rt.startTimestamp.lt(lt)&&(rt.startTimestamp=BigNumber.from(lt));const ut=await this.contractWrapper.sendTransaction("createAuction",[{assetContract:rt.assetContractAddress,tokenId:rt.tokenId,quantity:rt.quantity,currency:cleanCurrencyAddress(rt.currencyContractAddress),minimumBidAmount:st,buyoutBidAmount:at,timeBufferInSeconds:rt.timeBufferInSeconds,bidBufferBps:rt.bidBufferBps,startTimestamp:rt.startTimestamp,endTimestamp:rt.endTimestamp}],{gasLimit:5e5});return{id:this.contractWrapper.parseLogs("NewAuction",ut==null?void 0:ut.logs)[0].args.auctionId,receipt:ut}}async buyoutAuction(tt){const rt=await this.validateAuction(BigNumber.from(tt)),at=await fetchCurrencyMetadata(this.contractWrapper.getProvider(),rt.currencyContractAddress);return this.makeBid(tt,formatUnits(rt.buyoutBidAmount,at.decimals))}async makeBid(tt,rt){const at=await this.validateAuction(BigNumber.from(tt)),st=await normalizePriceValue(this.contractWrapper.getProvider(),rt,at.currencyContractAddress);if(st.eq(BigNumber.from(0)))throw new Error("Cannot make a bid with 0 value");if(BigNumber.from(at.buyoutBidAmount).gt(0)&&st.gt(at.buyoutBidAmount))throw new Error("Bid amount must be less than or equal to buyoutBidAmount");if(await this.getWinningBid(tt)){const ut=await this.isWinningBid(tt,st);invariant$1(ut,"Bid price is too low based on the current winning bid and the bid buffer")}else{const ut=st,ht=BigNumber.from(at.minimumBidAmount);invariant$1(ut.gte(ht),"Bid price is too low based on minimum bid amount")}const lt=await this.contractWrapper.getCallOverrides()||{};return await setErc20Allowance(this.contractWrapper,st,at.currencyContractAddress,lt),{receipt:await this.contractWrapper.sendTransaction("bidInAuction",[tt,st],lt)}}async cancelAuction(tt){if(await this.getWinningBid(tt))throw new Error("Bids already made.");return{receipt:await this.contractWrapper.sendTransaction("cancelAuction",[tt])}}async closeAuctionForBidder(tt,rt){rt||(rt=await this.contractWrapper.getSignerAddress());const at=await this.validateAuction(BigNumber.from(tt));try{return{receipt:await this.contractWrapper.sendTransaction("collectAuctionTokens",[BigNumber.from(tt)])}}catch(st){throw st.message.includes("Marketplace: auction still active.")?new AuctionHasNotEndedError(tt.toString(),at.endTimeInSeconds.toString()):st}}async closeAuctionForSeller(tt){const rt=await this.validateAuction(BigNumber.from(tt));try{return{receipt:await this.contractWrapper.sendTransaction("collectAuctionPayout",[BigNumber.from(tt)])}}catch(at){throw at.message.includes("Marketplace: auction still active.")?new AuctionHasNotEndedError(tt.toString(),rt.endTimeInSeconds.toString()):at}}async executeSale(tt){const rt=await this.validateAuction(BigNumber.from(tt));try{const at=await this.getWinningBid(tt);invariant$1(at,"No winning bid found");const st=this.encoder.encode("collectAuctionPayout",[tt]),ot=this.encoder.encode("collectAuctionTokens",[tt]);return await this.contractWrapper.multiCall([st,ot])}catch(at){throw at.message.includes("Marketplace: auction still active.")?new AuctionHasNotEndedError(tt.toString(),rt.endTimeInSeconds.toString()):at}}async getBidBufferBps(tt){return(await this.getAuction(tt)).bidBufferBps}async getMinimumNextBid(tt){const[rt,at,st]=await Promise.all([this.getBidBufferBps(tt),this.getWinningBid(tt),await this.validateAuction(BigNumber.from(tt))]),ot=at?BigNumber.from(at.bidAmount):BigNumber.from(st.minimumBidAmount),lt=ot.add(ot.mul(rt).div(1e4));return fetchCurrencyValue(this.contractWrapper.getProvider(),st.currencyContractAddress,lt)}async validateAuction(tt){try{return await this.getAuction(tt)}catch(rt){throw console.error(`Error getting the auction with id ${tt}`),rt}}async mapAuction(tt){let rt=Status.UNSET;const st=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;switch(tt.status){case 1:rt=BigNumber.from(tt.startTimestamp).gt(st)?Status.Created:BigNumber.from(tt.endTimestamp).lt(st)?Status.Expired:Status.Active;break;case 2:rt=Status.Completed;break;case 3:rt=Status.Cancelled;break}return{id:tt.auctionId.toString(),creatorAddress:tt.auctionCreator,assetContractAddress:tt.assetContract,tokenId:tt.tokenId.toString(),quantity:tt.quantity.toString(),currencyContractAddress:tt.currency,minimumBidAmount:tt.minimumBidAmount.toString(),minimumBidCurrencyValue:await fetchCurrencyValue(this.contractWrapper.getProvider(),tt.currency,tt.minimumBidAmount),buyoutBidAmount:tt.buyoutBidAmount.toString(),buyoutCurrencyValue:await fetchCurrencyValue(this.contractWrapper.getProvider(),tt.currency,tt.buyoutBidAmount),timeBufferInSeconds:BigNumber.from(tt.timeBufferInSeconds).toNumber(),bidBufferBps:BigNumber.from(tt.bidBufferBps).toNumber(),startTimeInSeconds:BigNumber.from(tt.startTimestamp).toNumber(),endTimeInSeconds:BigNumber.from(tt.endTimestamp).toNumber(),asset:await fetchTokenMetadataForContract(tt.assetContract,this.contractWrapper.getProvider(),tt.tokenId,this.storage),status:rt}}async mapBid(tt,rt,at,st){return{auctionId:tt,bidderAddress:rt,currencyContractAddress:at,bidAmount:st,bidAmountCurrencyValue:await fetchCurrencyValue(this.contractWrapper.getProvider(),at,st)}}applyFilter(tt,rt){let at=[...tt];return rt&&(rt.seller&&(at=at.filter(st=>{var ot;return st.auctionCreator.toString().toLowerCase()===((ot=rt==null?void 0:rt.seller)==null?void 0:ot.toString().toLowerCase())})),rt.tokenContract&&(at=at.filter(st=>{var ot;return st.assetContract.toString().toLowerCase()===((ot=rt==null?void 0:rt.tokenContract)==null?void 0:ot.toString().toLowerCase())})),rt.tokenId!==void 0&&(at=at.filter(st=>{var ot;return st.tokenId.toString()===((ot=rt==null?void 0:rt.tokenId)==null?void 0:ot.toString())}))),(rt==null?void 0:rt.count)&&rt.count<at.length?at.slice(0,rt.count):at}}const OfferInputParamsSchema=z$6.object({assetContractAddress:AddressSchema,tokenId:BigNumberishSchema,quantity:BigNumberishSchema.default(1),currencyContractAddress:AddressSchema.default(NATIVE_TOKEN_ADDRESS),totalPrice:AmountSchema,endTimestamp:EndDateSchema});class MarketplaceV3Offers{constructor(tt,rt){_defineProperty$4(this,"featureName",FEATURE_OFFERS.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),this.contractWrapper=tt,this.storage=rt,this.events=new ContractEvents(this.contractWrapper),this.encoder=new ContractEncoder(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper)}getAddress(){return this.contractWrapper.readContract.address}async getTotalCount(){return await this.contractWrapper.readContract.totalOffers()}async getAll(tt){const rt=await this.getTotalCount();let at=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),st=rt.toNumber();if(st===0)throw new Error("No offers exist on the contract.");let ot=[];ot=(await getAllInBatches(at,st,this.contractWrapper.readContract.getAllOffers)).flat();const ut=this.applyFilter(ot,tt);return await Promise.all(ut.map(ht=>this.mapOffer(ht)))}async getAllValid(tt){const rt=await this.getTotalCount();let at=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),st=rt.toNumber();if(st===0)throw new Error("No offers exist on the contract.");let ot=[];ot=(await getAllInBatches(at,st,this.contractWrapper.readContract.getAllValidOffers)).flat();const ut=this.applyFilter(ot,tt);return await Promise.all(ut.map(ht=>this.mapOffer(ht)))}async getOffer(tt){const rt=await this.contractWrapper.readContract.getOffer(tt);return await this.mapOffer(rt)}async makeOffer(tt){const rt=OfferInputParamsSchema.parse(tt),at=await this.contractWrapper.getChainID(),st=isNativeToken(rt.currencyContractAddress)?NATIVE_TOKENS[at].wrapped.address:rt.currencyContractAddress,ot=await normalizePriceValue(this.contractWrapper.getProvider(),rt.totalPrice,st),lt=await this.contractWrapper.getCallOverrides();await setErc20Allowance(this.contractWrapper,ot,st,lt);const ut=await this.contractWrapper.sendTransaction("makeOffer",[{assetContract:rt.assetContractAddress,tokenId:rt.tokenId,quantity:rt.quantity,currency:st,totalPrice:ot,expirationTimestamp:rt.endTimestamp}],{gasLimit:5e5});return{id:this.contractWrapper.parseLogs("NewOffer",ut==null?void 0:ut.logs)[0].args.offerId,receipt:ut}}async cancelOffer(tt){return{receipt:await this.contractWrapper.sendTransaction("cancelOffer",[tt])}}async acceptOffer(tt){const rt=await this.validateOffer(BigNumber.from(tt)),{valid:at,error:st}=await this.isStillValidOffer(rt);if(!at)throw new Error(`Offer ${tt} is no longer valid. ${st}`);const ot=await this.contractWrapper.getCallOverrides()||{};return await handleTokenApproval(this.contractWrapper,this.getAddress(),rt.assetContractAddress,rt.tokenId,await this.contractWrapper.getSignerAddress()),{receipt:await this.contractWrapper.sendTransaction("acceptOffer",[tt],ot)}}async validateOffer(tt){try{return await this.getOffer(tt)}catch(rt){throw console.error(`Error getting the offer with id ${tt}`),rt}}async mapOffer(tt){let rt=Status.UNSET;const st=(await this.contractWrapper.getProvider().getBlock("latest")).timestamp;switch(tt.status){case 1:rt=BigNumber.from(tt.expirationTimestamp).lt(st)?Status.Expired:Status.Active;break;case 2:rt=Status.Completed;break;case 3:rt=Status.Cancelled;break}return{id:tt.offerId.toString(),offerorAddress:tt.offeror,assetContractAddress:tt.assetContract,currencyContractAddress:tt.currency,tokenId:tt.tokenId.toString(),quantity:tt.quantity.toString(),totalPrice:tt.totalPrice.toString(),currencyValue:await fetchCurrencyValue(this.contractWrapper.getProvider(),tt.currency,tt.totalPrice),asset:await fetchTokenMetadataForContract(tt.assetContract,this.contractWrapper.getProvider(),tt.tokenId,this.storage),endTimeInSeconds:BigNumber.from(tt.expirationTimestamp).toNumber(),status:rt}}async isStillValidOffer(tt){if(BigNumber.from(Math.floor(Date.now()/1e3)).gt(tt.endTimeInSeconds))return{valid:!1,error:`Offer with ID ${tt.id} has expired`};const at=await this.contractWrapper.getChainID(),st=isNativeToken(tt.currencyContractAddress)?NATIVE_TOKENS[at].wrapped.address:tt.currencyContractAddress,ot=this.contractWrapper.getProvider(),lt=new ContractWrapper(ot,st,ERC20Abi$1,{});return(await lt.readContract.balanceOf(tt.offerorAddress)).lt(tt.totalPrice)?{valid:!1,error:`Offeror ${tt.offerorAddress} doesn't have enough balance of token ${st}`}:(await lt.readContract.allowance(tt.offerorAddress,this.getAddress())).lt(tt.totalPrice)?{valid:!1,error:`Offeror ${tt.offerorAddress} hasn't approved enough amount of token ${st}`}:{valid:!0,error:""}}applyFilter(tt,rt){let at=[...tt];return rt&&(rt.offeror&&(at=at.filter(st=>{var ot;return st.offeror.toString().toLowerCase()===((ot=rt==null?void 0:rt.offeror)==null?void 0:ot.toString().toLowerCase())})),rt.tokenContract&&(at=at.filter(st=>{var ot;return st.assetContract.toString().toLowerCase()===((ot=rt==null?void 0:rt.tokenContract)==null?void 0:ot.toString().toLowerCase())})),rt.tokenId!==void 0&&(at=at.filter(st=>{var ot;return st.tokenId.toString()===((ot=rt==null?void 0:rt.tokenId)==null?void 0:ot.toString())}))),(rt==null?void 0:rt.count)&&rt.count<at.length?at.slice(0,rt.count):at}}async function getCompositePluginABI(it,tt,rt,at,st){let ot=[];try{const lt=isFeatureEnabled(AbiSchema.parse(tt),"PluginRouter");if(isFeatureEnabled(AbiSchema.parse(tt),"ExtensionRouter")){const bt=(await new ContractWrapper(rt,it,getAllExtensionsAbi,at).call("getAllExtensions")).map(vt=>vt.metadata.implementation);ot=await getPluginABI(bt,rt,st)}else if(lt){const bt=(await new ContractWrapper(rt,it,getAllPluginsAbi,at).call("getAllPlugins")).map(At=>At.pluginAddress),vt=Array.from(new Set(bt));ot=await getPluginABI(vt,rt,st)}}catch{}return ot.length>0?joinABIs([tt,...ot]):tt}async function getPluginABI(it,tt,rt){return(await Promise.all(it.map(at=>fetchContractMetadataFromAddress(at,tt,rt).catch(st=>(console.error(`Failed to fetch plug-in for ${at}`,st),{abi:[]}))))).map(at=>at.abi)}function joinABIs(it){const tt=it.map(st=>AbiSchema.parse(st)).flat(),at=unique(tt,(st,ot)=>st.name===ot.name&&st.type===ot.type&&st.inputs.length===ot.inputs.length).filter(st=>st.type!=="constructor");return AbiSchema.parse(at)}const DropErc20ContractInput=CommonContractSchema.merge(MerkleSchema).merge(CommonSymbolSchema),DropErc20ContractOutput=CommonContractOutputSchema.merge(MerkleSchema).merge(CommonSymbolSchema),DropErc20ContractDeploy=DropErc20ContractInput.merge(CommonPlatformFeeSchema).merge(CommonPrimarySaleSchema).merge(CommonTrustedForwarderSchema),DropErc20ContractSchema={deploy:DropErc20ContractDeploy,output:DropErc20ContractOutput,input:DropErc20ContractInput},MultiwrapContractInput=CommonContractSchema.merge(CommonRoyaltySchema).merge(CommonSymbolSchema),MultiwrapContractOutput=CommonContractOutputSchema.merge(CommonRoyaltySchema).merge(CommonSymbolSchema),MultiwrapContractDeploy=MultiwrapContractInput.merge(CommonTrustedForwarderSchema),MultiwrapContractSchema={deploy:MultiwrapContractDeploy,output:MultiwrapContractOutput,input:MultiwrapContractInput},EditionDropInitializer={name:"DropERC1155",contractType:"edition-drop",schema:DropErc1155ContractSchema,roles:["admin","minter","transfer"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([await EditionDropInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>editionDropA4b39999_esm),void 0),ut.getNetwork()]);return new mt.EditionDrop(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);if(at)return at;const st=await getContractInfo(it,tt);return!st||st.version>2?(await __vitePreload(()=>Promise.resolve().then(()=>DropERC1155$1),void 0)).default:(await __vitePreload(()=>Promise.resolve().then(()=>DropERC1155_V2$1),void 0)).default}},EditionInitializer={name:"TokenERC1155",contractType:"edition",schema:TokenErc1155ContractSchema,roles:["admin","minter","transfer"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([EditionInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>editionD3c2c908_esm),void 0),ut.getNetwork()]);return new mt.Edition(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);return at||(await __vitePreload(()=>Promise.resolve().then(()=>TokenERC1155$1),void 0)).default}},MarketplaceInitializer={name:"Marketplace",contractType:"marketplace",schema:MarketplaceContractSchema,roles:["admin","lister","asset"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([MarketplaceInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>marketplaceD4dfb5b7_esm),void 0),ut.getNetwork()]);return new mt.Marketplace(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);return at||(await __vitePreload(()=>Promise.resolve().then(()=>Marketplace$1),void 0)).default}},MarketplaceV3Initializer={name:"MarketplaceRouter",contractType:"marketplace-v3",schema:MarketplaceContractSchema,roles:["admin","lister","asset"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([MarketplaceV3Initializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>marketplacev3D3217f02_esm),void 0),ut.getNetwork()]);return new mt.MarketplaceV3(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);if(at)return await getCompositePluginABI(it,at,tt,{},rt);const st=(await __vitePreload(()=>Promise.resolve().then(()=>MarketplaceV3$1),void 0)).default;return await getCompositePluginABI(it,st,tt,{},rt)}},MultiwrapInitializer={name:"Multiwrap",contractType:"multiwrap",schema:MultiwrapContractSchema,roles:["admin","transfer","minter","unwrap","asset"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([MultiwrapInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>multiwrap8bba1486_esm),void 0),ut.getNetwork()]);return new mt.Multiwrap(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);return at||(await __vitePreload(()=>Promise.resolve().then(()=>Multiwrap$1),void 0)).default}},NFTCollectionInitializer={name:"TokenERC721",contractType:"nft-collection",schema:TokenErc721ContractSchema,roles:["admin","minter","transfer"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([NFTCollectionInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>nftCollection9c884935_esm),void 0),ut.getNetwork()]);return new mt.NFTCollection(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);return at||(await __vitePreload(()=>Promise.resolve().then(()=>TokenERC721$1),void 0)).default}},NFTDropInitializer={name:"DropERC721",contractType:"nft-drop",schema:DropErc721ContractSchema,roles:["admin","minter","transfer"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([NFTDropInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>nftDrop8e38ae16_esm),void 0),ut.getNetwork()]);return new mt.NFTDrop(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);if(at)return at;const st=await getContractInfo(it,tt);return!st||st.version>3?(await __vitePreload(()=>Promise.resolve().then(()=>DropERC721$1),void 0)).default:(await __vitePreload(()=>Promise.resolve().then(()=>DropERC721_V3$1),void 0)).default}},PackInitializer={name:"Pack",contractType:"pack",schema:PackContractSchema,roles:["admin","minter","asset","transfer"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([PackInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>pack0bcaca69_esm),void 0),ut.getNetwork()]);return new mt.Pack(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);return at||(await __vitePreload(()=>Promise.resolve().then(()=>Pack$1),void 0)).default}},SignatureDropInitializer={name:"SignatureDrop",contractType:"signature-drop",schema:DropErc721ContractSchema,roles:["admin","minter","transfer"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([SignatureDropInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>signatureDropE5f1829e_esm),void 0),ut.getNetwork()]);return new mt.SignatureDrop(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);if(at)return at;const st=await getContractInfo(it,tt);return!st||st.version>4?(await __vitePreload(()=>Promise.resolve().then(()=>SignatureDrop$1),void 0)).default:(await __vitePreload(()=>Promise.resolve().then(()=>SignatureDrop_V4$1),void 0)).default}},SplitInitializer={name:"Split",contractType:"split",schema:SplitsContractSchema,roles:["admin"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([SplitInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>splitCc64330a_esm),void 0),ut.getNetwork()]);return new mt.Split(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);return at||(await __vitePreload(()=>Promise.resolve().then(()=>Split$1),void 0)).default}},TokenDropInitializer={name:"DropERC20",contractType:"token-drop",schema:DropErc20ContractSchema,roles:["admin","transfer"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([TokenDropInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>tokenDrop92db4df4_esm),void 0),ut.getNetwork()]);return new mt.TokenDrop(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);if(at)return at;const st=await getContractInfo(it,tt);return!st||st.version>2?(await __vitePreload(()=>Promise.resolve().then(()=>DropERC20$1),void 0)).default:(await __vitePreload(()=>Promise.resolve().then(()=>DropERC20_V2$1),void 0)).default}},TokenInitializer={name:"TokenERC20",contractType:"token",schema:TokenErc20ContractSchema,roles:["admin","minter","transfer"],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([TokenInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>token97d07107_esm),void 0),ut.getNetwork()]);return new mt.Token(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);return at||(await __vitePreload(()=>Promise.resolve().then(()=>TokenERC20$1),void 0)).default}},VoteInitializer={name:"VoteERC20",contractType:"vote",schema:VoteContractSchema,roles:[],initialize:async function(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];let[at,st,ot,lt]=tt;const[,ut]=getSignerAndProvider(at,lt),[ht,mt,bt]=await Promise.all([VoteInitializer.getAbi(st,ut,ot),__vitePreload(()=>Promise.resolve().then(()=>voteCc8908d9_esm),void 0),ut.getNetwork()]);return new mt.Vote(at,st,ot,lt,ht,bt.chainId)},getAbi:async(it,tt,rt)=>{const at=await fetchAbiFromAddress(it,tt,rt);return at||(await __vitePreload(()=>Promise.resolve().then(()=>VoteERC20$1),void 0)).default}};async function getContractInfo(it,tt){try{return await getPrebuiltInfo(it,tt)}catch{return}}const PREBUILT_CONTRACTS_MAP={[EditionDropInitializer.contractType]:EditionDropInitializer,[EditionInitializer.contractType]:EditionInitializer,[MarketplaceInitializer.contractType]:MarketplaceInitializer,[MarketplaceV3Initializer.contractType]:MarketplaceV3Initializer,[MultiwrapInitializer.contractType]:MultiwrapInitializer,[NFTCollectionInitializer.contractType]:NFTCollectionInitializer,[NFTDropInitializer.contractType]:NFTDropInitializer,[PackInitializer.contractType]:PackInitializer,[SignatureDropInitializer.contractType]:SignatureDropInitializer,[SplitInitializer.contractType]:SplitInitializer,[TokenDropInitializer.contractType]:TokenDropInitializer,[TokenInitializer.contractType]:TokenInitializer,[VoteInitializer.contractType]:VoteInitializer},PREBUILT_CONTRACTS_APPURI_MAP={[EditionDropInitializer.contractType]:"ipfs://QmNm3wRzpKYWo1SRtJfgfxtvudp5p2nXD6EttcsQJHwTmk",[EditionInitializer.contractType]:"",[MarketplaceInitializer.contractType]:"ipfs://QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace.html",[MarketplaceV3Initializer.contractType]:"ipfs://QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/marketplace-v3.html",[MultiwrapInitializer.contractType]:"",[NFTCollectionInitializer.contractType]:"",[NFTDropInitializer.contractType]:"ipfs://QmZptmVipc6SGFbKAyXcxGgohzTwYRXZ9LauRX5ite1xDK",[PackInitializer.contractType]:"",[SignatureDropInitializer.contractType]:"ipfs://QmZptmVipc6SGFbKAyXcxGgohzTwYRXZ9LauRX5ite1xDK",[SplitInitializer.contractType]:"",[TokenDropInitializer.contractType]:"ipfs://QmbAgC8YwY36n8H2kuvSWsRisxDZ15QZw3xGZyk9aDvcv7/erc20.html",[TokenInitializer.contractType]:"",[VoteInitializer.contractType]:""},SmartContract$1={name:"SmartContract",contractType:"custom",schema:{},roles:ALL_ROLES},CONTRACTS_MAP={...PREBUILT_CONTRACTS_MAP,[SmartContract$1.contractType]:SmartContract$1};function getContractTypeForRemoteName(it){var tt;return((tt=Object.values(CONTRACTS_MAP).find(rt=>rt.name===it))==null?void 0:tt.contractType)||"custom"}function getContractName(it){var tt;return(tt=Object.values(CONTRACTS_MAP).find(rt=>rt.contractType===it))==null?void 0:tt.name}async function getDeployArguments(it,tt,rt,at){const st=await at.getChainId(),ot=await at.getAddress();let lt=it===PackInitializer.contractType?[]:getDefaultTrustedForwarders(st);switch(tt.trusted_forwarders&&tt.trusted_forwarders.length>0&&(lt=tt.trusted_forwarders),it){case NFTDropInitializer.contractType:case NFTCollectionInitializer.contractType:const ut=NFTDropInitializer.schema.deploy.parse(tt);return[ot,ut.name,ut.symbol,rt,lt,ut.primary_sale_recipient,ut.fee_recipient,ut.seller_fee_basis_points,ut.platform_fee_basis_points,ut.platform_fee_recipient];case SignatureDropInitializer.contractType:const ht=SignatureDropInitializer.schema.deploy.parse(tt);return[ot,ht.name,ht.symbol,rt,lt,ht.primary_sale_recipient,ht.fee_recipient,ht.seller_fee_basis_points,ht.platform_fee_basis_points,ht.platform_fee_recipient];case MultiwrapInitializer.contractType:const mt=MultiwrapInitializer.schema.deploy.parse(tt);return[ot,mt.name,mt.symbol,rt,lt,mt.fee_recipient,mt.seller_fee_basis_points];case EditionDropInitializer.contractType:case EditionInitializer.contractType:const bt=EditionDropInitializer.schema.deploy.parse(tt);return[ot,bt.name,bt.symbol,rt,lt,bt.primary_sale_recipient,bt.fee_recipient,bt.seller_fee_basis_points,bt.platform_fee_basis_points,bt.platform_fee_recipient];case TokenDropInitializer.contractType:case TokenInitializer.contractType:const vt=TokenInitializer.schema.deploy.parse(tt);return[ot,vt.name,vt.symbol,rt,lt,vt.primary_sale_recipient,vt.platform_fee_recipient,vt.platform_fee_basis_points];case VoteInitializer.contractType:const At=VoteInitializer.schema.deploy.parse(tt);return[At.name,rt,lt,At.voting_token_address,At.voting_delay_in_blocks,At.voting_period_in_blocks,BigNumber.from(At.proposal_token_threshold),At.voting_quorum_fraction];case SplitInitializer.contractType:const xt=SplitInitializer.schema.deploy.parse(tt);return[ot,rt,lt,xt.recipients.map(wt=>wt.address),xt.recipients.map(wt=>BigNumber.from(wt.sharesBps))];case MarketplaceInitializer.contractType:case MarketplaceV3Initializer.contractType:const Et=MarketplaceInitializer.schema.deploy.parse(tt);return[ot,rt,lt,Et.platform_fee_recipient,Et.platform_fee_basis_points];case PackInitializer.contractType:const Tt=PackInitializer.schema.deploy.parse(tt);return[ot,Tt.name,Tt.symbol,rt,lt,Tt.fee_recipient,Tt.seller_fee_basis_points];default:return[]}}function createStorage(it,tt){return it||(tt!=null&&tt.gatewayUrls?new ThirdwebStorage({gatewayUrls:tt.gatewayUrls}):new ThirdwebStorage)}class ContractAppURI{constructor(tt,rt,at){_defineProperty$4(this,"featureName",FEATURE_APPURI.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"storage",void 0),this.contractWrapper=tt,this.metadata=rt,this.storage=at}async get(){return detectContractFeature(this.contractWrapper,"AppURI")?await this.contractWrapper.readContract.appURI():replaceGatewayUrlWithScheme((await this.metadata.get()).app_uri||"",this.storage.gatewayUrls)}async set(tt){return detectContractFeature(this.contractWrapper,"AppURI")?{receipt:await this.contractWrapper.sendTransaction("setAppURI",[tt])}:await this.metadata.update({app_uri:tt})}}class ContractPlatformFee{constructor(tt){_defineProperty$4(this,"featureName",FEATURE_PLATFORM_FEE.name),_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt}async get(){const[tt,rt]=await this.contractWrapper.readContract.getPlatformFeeInfo();return CommonPlatformFeeSchema.parse({platform_fee_recipient:tt,platform_fee_basis_points:rt})}async set(tt){const rt=CommonPlatformFeeSchema.parse(tt);return{receipt:await this.contractWrapper.sendTransaction("setPlatformFeeInfo",[rt.platform_fee_recipient,rt.platform_fee_basis_points])}}}class ContractPublishedMetadata{constructor(tt,rt){_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"_cachedMetadata",void 0),this.contractWrapper=tt,this.storage=rt}async get(){return this._cachedMetadata?this._cachedMetadata:(this._cachedMetadata=await fetchContractMetadataFromAddress(this.contractWrapper.readContract.address,this.contractWrapper.getProvider(),this.storage),this._cachedMetadata)}async extractFunctions(){let tt;try{tt=await this.get()}catch{}return extractFunctionsFromAbi(AbiSchema.parse(this.contractWrapper.abi),tt==null?void 0:tt.metadata)}async extractEvents(){let tt;try{tt=await this.get()}catch{}return extractEventsFromAbi(AbiSchema.parse(this.contractWrapper.abi),tt==null?void 0:tt.metadata)}}class SmartContract{get royalties(){return assertEnabled(this.detectRoyalties(),FEATURE_ROYALTY)}get roles(){return assertEnabled(this.detectRoles(),FEATURE_PERMISSIONS)}get sales(){return assertEnabled(this.detectPrimarySales(),FEATURE_PRIMARY_SALE)}get platformFees(){return assertEnabled(this.detectPlatformFees(),FEATURE_PLATFORM_FEE)}get owner(){return assertEnabled(this.detectOwnable(),FEATURE_OWNER)}get erc20(){return assertEnabled(this.detectErc20(),FEATURE_TOKEN)}get erc721(){return assertEnabled(this.detectErc721(),FEATURE_NFT)}get erc1155(){return assertEnabled(this.detectErc1155(),FEATURE_EDITION)}get app(){return assertEnabled(this.detectApp(),FEATURE_APPURI)}get chainId(){return this._chainId}constructor(tt,rt,at,st){let ot=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,at,ot);_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"publishedMetadata",void 0),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"_chainId",void 0),this._chainId=lt,this.storage=st,this.contractWrapper=ut,this.abi=at,this.events=new ContractEvents(this.contractWrapper),this.encoder=new ContractEncoder(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.publishedMetadata=new ContractPublishedMetadata(this.contractWrapper,this.storage),this.metadata=new ContractMetadata(this.contractWrapper,CustomContractSchema,this.storage)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}detectRoyalties(){if(detectContractFeature(this.contractWrapper,"Royalty")){const tt=new ContractMetadata(this.contractWrapper,CustomContractSchema,this.storage);return new ContractRoyalty(this.contractWrapper,tt)}}detectRoles(){if(detectContractFeature(this.contractWrapper,"Permissions"))return new ContractRoles(this.contractWrapper,ALL_ROLES)}detectPrimarySales(){if(detectContractFeature(this.contractWrapper,"PrimarySale"))return new ContractPrimarySale(this.contractWrapper)}detectPlatformFees(){if(detectContractFeature(this.contractWrapper,"PlatformFee"))return new ContractPlatformFee(this.contractWrapper)}detectErc20(){if(detectContractFeature(this.contractWrapper,"ERC20"))return new Erc20(this.contractWrapper,this.storage,this.chainId)}detectErc721(){if(detectContractFeature(this.contractWrapper,"ERC721"))return new Erc721(this.contractWrapper,this.storage,this.chainId)}detectErc1155(){if(detectContractFeature(this.contractWrapper,"ERC1155"))return new Erc1155(this.contractWrapper,this.storage,this.chainId)}detectOwnable(){if(detectContractFeature(this.contractWrapper,"Ownable"))return new ContractOwner(this.contractWrapper)}detectApp(){const tt=new ContractMetadata(this.contractWrapper,CustomContractSchema,this.storage);if(detectContractFeature(this.contractWrapper,"AppURI"))return new ContractAppURI(this.contractWrapper,tt,this.storage);if(detectContractFeature(this.contractWrapper,"ContractMetadata"))return new ContractAppURI(this.contractWrapper,tt,this.storage)}}class ContractPublisher extends RPCConnectionHandler{constructor(tt,rt,at){super(tt,rt),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"publisher",void 0),_defineProperty$4(this,"updatePublisherProfile",buildTransactionFunction(async st=>{const ot=this.getSigner();invariant$1(ot,"A signer is required");const lt=await ot.getAddress(),ut=await this.storage.upload(st);return Transaction.fromContractWrapper({contractWrapper:this.publisher,method:"setPublisherProfileUri",args:[lt,ut]})})),_defineProperty$4(this,"publish",buildTransactionFunction(async(st,ot)=>{const lt=this.getSigner();invariant$1(lt,"A signer is required");const ut=await lt.getAddress(),ht=await fetchRawPredeployMetadata(st,this.storage),mt=await this.getLatest(ut,ht.name);if(mt&&mt.metadataUri){const Ct=(await this.fetchPublishedContractInfo(mt)).publishedMetadata.version;if(!isIncrementalVersion(Ct,ot.version))throw Error(`Version ${ot.version} is not greater than ${Ct}`)}const bt=await(await this.storage.download(ht.bytecodeUri)).text(),vt=bt.startsWith("0x")?bt:`0x${bt}`,At=keccak256(["bytes"],[vt]),xt=ht.name,Et=FullPublishMetadataSchemaInput.parse({...ot,metadataUri:ht.metadataUri,bytecodeUri:ht.bytecodeUri,name:ht.name,analytics:ht.analytics,publisher:ut}),Tt=await this.storage.upload(Et);return Transaction.fromContractWrapper({contractWrapper:this.publisher,method:"publishContract",args:[ut,xt,Tt,ht.metadataUri,At,AddressZero],parse:wt=>{const Ct=this.publisher.parseLogs("ContractPublished",wt.logs);if(Ct.length<1)throw new Error("No ContractPublished event found");const It=Ct[0].args.publishedContract;return{receipt:wt,data:async()=>this.toPublishedContract(It)}}})})),_defineProperty$4(this,"unpublish",buildTransactionFunction(async(st,ot)=>Transaction.fromContractWrapper({contractWrapper:this.publisher,method:"unpublishContract",args:[st,ot]}))),this.storage=at,this.publisher=new ContractWrapper(tt,getContractPublisherAddress(),ContractPublisherAbi,rt)}updateSignerOrProvider(tt){super.updateSignerOrProvider(tt),this.publisher.updateSignerOrProvider(tt)}async extractConstructorParams(tt){return extractConstructorParams(tt,this.storage)}async extractFunctions(tt){return extractFunctions(tt,this.storage)}async fetchCompilerMetadataFromPredeployURI(tt){return fetchPreDeployMetadata(tt,this.storage)}async fetchPrePublishMetadata(tt,rt){const at=await fetchPreDeployMetadata(tt,this.storage),st=rt?await this.getLatest(rt,at.name):void 0,ot=st?await this.fetchPublishedContractInfo(st):void 0;return{preDeployMetadata:at,latestPublishedContractMetadata:ot}}async fetchCompilerMetadataFromAddress(tt){return fetchContractMetadataFromAddress(tt,this.getProvider(),this.storage)}async fetchPublishedContractInfo(tt){return{name:tt.id,publishedTimestamp:tt.timestamp,publishedMetadata:await this.fetchFullPublishMetadata(tt.metadataUri)}}async fetchFullPublishMetadata(tt){return fetchExtendedReleaseMetadata(tt,this.storage)}async resolvePublishMetadataFromCompilerMetadata(tt){const rt=await this.publisher.readContract.getPublishedUriFromCompilerUri(tt);if(rt.length===0)throw Error(`Could not resolve published metadata URI from ${tt}`);return await Promise.all(rt.filter(at=>at.length>0).map(at=>this.fetchFullPublishMetadata(at)))}async resolveContractUriFromAddress(tt){const rt=await resolveContractUriFromAddress(tt,this.getProvider());return invariant$1(rt,"Could not resolve contract URI from address"),rt}async fetchContractSourcesFromAddress(tt){const rt=await this.fetchCompilerMetadataFromAddress(tt);return await fetchSourceFilesFromMetadata(rt,this.storage)}async getPublisherProfile(tt){const rt=await this.publisher.readContract.getPublisherProfileUri(tt);return!rt||rt.length===0?{}:ProfileSchemaOutput.parse(await this.storage.downloadJSON(rt))}async getAll(tt){const at=(await this.publisher.readContract.getAllPublishedContracts(tt)).reduce((st,ot)=>(st[ot.contractId]=ot,st),{});return Object.entries(at).map(st=>{let[,ot]=st;return this.toPublishedContract(ot)})}async getAllVersions(tt,rt){const at=await this.publisher.readContract.getPublishedContractVersions(tt,rt);if(at.length===0)throw Error("Not found");return at.map(st=>this.toPublishedContract(st))}async getVersion(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"latest";if(at==="latest")return this.getLatest(tt,rt);const st=await this.getAllVersions(tt,rt),lt=(await Promise.all(st.map(ut=>this.fetchPublishedContractInfo(ut)))).find(ut=>ut.publishedMetadata.version===at);return invariant$1(lt,"Contract version not found"),st.find(ut=>ut.timestamp===lt.publishedTimestamp)}async getLatest(tt,rt){const at=await this.publisher.readContract.getPublishedContract(tt,rt);if(at&&at.publishMetadataUri)return this.toPublishedContract(at)}toPublishedContract(tt){return PublishedContractSchema.parse({id:tt.contractId,timestamp:tt.publishTimestamp,metadataUri:tt.publishMetadataUri})}}class MultichainRegistry{constructor(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_defineProperty$4(this,"registryLogic",void 0),_defineProperty$4(this,"registryRouter",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"addContract",buildTransactionFunction(async st=>await this.addContracts.prepare([st]))),_defineProperty$4(this,"addContracts",buildTransactionFunction(async st=>{const ot=await this.registryRouter.getSignerAddress(),lt=[];return st.forEach(ut=>{lt.push(this.registryLogic.readContract.interface.encodeFunctionData("add",[ot,ut.address,ut.chainId,ut.metadataURI||""]))}),Transaction.fromContractWrapper({contractWrapper:this.registryRouter,method:"multicall",args:[lt]})})),_defineProperty$4(this,"removeContract",buildTransactionFunction(async st=>await this.removeContracts.prepare([st]))),_defineProperty$4(this,"removeContracts",buildTransactionFunction(async st=>{const ot=await this.registryRouter.getSignerAddress(),lt=[];return st.forEach(ut=>{lt.push(this.registryLogic.readContract.interface.encodeFunctionData("remove",[ot,ut.address,ut.chainId]))}),Transaction.fromContractWrapper({contractWrapper:this.registryRouter,method:"multicall",args:[lt]})})),this.storage=rt,this.registryLogic=new ContractWrapper(tt,getMultichainRegistryAddress(),TWRegistryABI,at),this.registryRouter=new ContractWrapper(tt,getMultichainRegistryAddress(),TWRegistryRouterABI,at)}async updateSigner(tt){this.registryLogic.updateSignerOrProvider(tt),this.registryRouter.updateSignerOrProvider(tt)}async getContractMetadataURI(tt,rt){return await this.registryLogic.readContract.getMetadataUri(tt,rt)}async getContractMetadata(tt,rt){const at=await this.getContractMetadataURI(tt,rt);if(!at)throw new Error(`No metadata URI found for contract ${rt} on chain ${tt}`);return await this.storage.downloadJSON(at)}async getContractAddresses(tt){return(await this.registryLogic.readContract.getAll(tt)).filter(rt=>isAddress(rt.deploymentAddress)&&rt.deploymentAddress.toLowerCase()!==AddressZero).map(rt=>({address:rt.deploymentAddress,chainId:rt.chainId.toNumber()}))}}class UserWallet{constructor(tt,rt){_defineProperty$4(this,"connection",void 0),_defineProperty$4(this,"options",void 0),_defineProperty$4(this,"events",new EventEmitter$1$1),this.connection=new RPCConnectionHandler(tt,rt),this.options=rt,this.events=new EventEmitter$1$1}connect(tt){this.connection.updateSignerOrProvider(tt),this.events.emit("signerChanged",this.connection.getSigner())}async transfer(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NATIVE_TOKEN_ADDRESS;const st=this.requireWallet(),ot=await normalizePriceValue(this.connection.getProvider(),rt,at);if(isNativeToken(at)){const lt=await st.getAddress();return{receipt:await(await st.sendTransaction({from:lt,to:tt,value:ot})).wait()}}else return{receipt:await this.createErc20(at).sendTransaction("transfer",[tt,ot])}}async balance(){let tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NATIVE_TOKEN_ADDRESS;this.requireWallet();const rt=this.connection.getProvider();let at;return isNativeToken(tt)?at=await rt.getBalance(await this.getAddress()):at=await this.createErc20(tt).readContract.balanceOf(await this.getAddress()),await fetchCurrencyValue(rt,tt,at)}async getAddress(){return await this.requireWallet().getAddress()}async getChainId(){return await this.requireWallet().getChainId()}isConnected(){try{return this.requireWallet(),!0}catch{return!1}}async sign(tt){return await this.requireWallet().signMessage(tt)}async signTypedData(tt,rt,at){return await signTypedDataInternal(this.requireWallet(),tt,rt,at)}recoverAddress(tt,rt){const at=hashMessage(tt),st=arrayify(at);return recoverAddress(st,rt)}async sendRawTransaction(tt){return{receipt:await(await this.requireWallet().sendTransaction(tt)).wait()}}async requestFunds(tt){const rt=await this.getChainId();if(rt===ChainId$1.Localhost||rt===ChainId$1.Hardhat)return new UserWallet(new Wallet(LOCAL_NODE_PKEY,getChainProvider(rt,this.options)),this.options).transfer(await this.getAddress(),tt);throw new Error(`Requesting funds is not supported on chain: '${rt}'.`)}requireWallet(){const tt=this.connection.getSigner();return invariant$1(tt,"This action requires a connected wallet. Please pass a valid signer to the SDK."),tt}createErc20(tt){return new ContractWrapper(this.connection.getSignerOrProvider(),tt,ERC20Abi$1,this.options)}}class ThirdwebSDK extends RPCConnectionHandler{static async fromWallet(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},st=arguments.length>3?arguments[3]:void 0;const ot=await tt.getSigner();return ThirdwebSDK.fromSigner(ot,rt,at,st)}static fromSigner(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},st=arguments.length>3?arguments[3]:void 0,ot=tt;if(rt&&!tt.provider){const ut=getChainProvider(rt,at);ot=tt.connect(ut)}const lt=new ThirdwebSDK(rt||ot,at,st);return lt.updateSignerOrProvider(ot),lt}static fromPrivateKey(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},st=arguments.length>3?arguments[3]:void 0;const ot=getChainProvider(rt,at),lt=new Wallet(tt,ot);return new ThirdwebSDK(lt,at,st)}constructor(tt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},at=arguments.length>2?arguments[2]:void 0;isChainConfig(tt)&&(rt={...rt,supportedChains:[tt,...rt.supportedChains||[]]}),super(tt,rt),_defineProperty$4(this,"contractCache",new Map),_defineProperty$4(this,"_publisher",void 0),_defineProperty$4(this,"storageHandler",void 0),_defineProperty$4(this,"deployer",void 0),_defineProperty$4(this,"multiChainRegistry",void 0),_defineProperty$4(this,"wallet",void 0),_defineProperty$4(this,"storage",void 0),setSupportedChains(rt==null?void 0:rt.supportedChains);const st=createStorage(at,rt);this.storage=st,this.storageHandler=st,this.wallet=new UserWallet(tt,rt),this.deployer=new ContractDeployer(tt,rt,st),this.multiChainRegistry=new MultichainRegistry(tt,this.storageHandler,this.options),this._publisher=new ContractPublisher(tt,this.options,this.storageHandler)}get auth(){throw new Error(`The sdk.auth namespace has been moved to the @thirdweb-dev/auth package and is no longer available after @thirdweb-dev/sdk >= 3.7.0. 
      Please visit https://portal.thirdweb.com/auth for instructions on how to switch to using the new auth package (@thirdweb-dev/auth@3.0.0).
      
      If you still want to use the old @thirdweb-dev/auth@2.0.0 package, you can downgrade the SDK to version 3.6.0.`)}async getNFTDrop(tt){return await this.getContract(tt,"nft-drop")}async getSignatureDrop(tt){return await this.getContract(tt,"signature-drop")}async getNFTCollection(tt){return await this.getContract(tt,"nft-collection")}async getEditionDrop(tt){return await this.getContract(tt,"edition-drop")}async getEdition(tt){return await this.getContract(tt,"edition")}async getTokenDrop(tt){return await this.getContract(tt,"token-drop")}async getToken(tt){return await this.getContract(tt,"token")}async getVote(tt){return await this.getContract(tt,"vote")}async getSplit(tt){return await this.getContract(tt,"split")}async getMarketplace(tt){return await this.getContract(tt,"marketplace")}async getMarketplaceV3(tt){return await this.getContract(tt,"marketplace-v3")}async getPack(tt){return await this.getContract(tt,"pack")}async getMultiwrap(tt){return await this.getContract(tt,"multiwrap")}async getContract(tt,rt){if(this.contractCache.has(tt))return this.contractCache.get(tt);let at;if(!rt||rt==="custom")try{const st=await this.getPublisher().fetchCompilerMetadataFromAddress(tt);at=await this.getContractFromAbi(tt,st.abi)}catch{const ot=await this.resolveContractType(tt);if(ot&&ot!=="custom"){const lt=await PREBUILT_CONTRACTS_MAP[ot].getAbi(tt,this.getProvider(),this.storage);at=await this.getContractFromAbi(tt,lt)}else{const lt=(await this.getProvider().getNetwork()).chainId;throw new Error(`No ABI found for this contract. Try importing it by visiting: https://thirdweb.com/${lt}/${tt}`)}}else typeof rt=="string"&&rt in PREBUILT_CONTRACTS_MAP?at=await PREBUILT_CONTRACTS_MAP[rt].initialize(this.getSignerOrProvider(),tt,this.storage,this.options):at=await this.getContractFromAbi(tt,rt);return this.contractCache.set(tt,at),at}async getBuiltInContract(tt,rt){return await this.getContract(tt,rt)}async resolveContractType(tt){try{const rt=new Contract(tt,IThirdwebContractABI,this.getProvider()),at=toUtf8String(await rt.contractType()).replace(/\x00/g,"");return getContractTypeForRemoteName(at)}catch{return"custom"}}async getContractList(tt){var st;const rt=await((st=await this.deployer.getRegistry())==null?void 0:st.getContractAddresses(tt))||[],at=(await this.getProvider().getNetwork()).chainId;return await Promise.all(rt.map(async ot=>({address:ot,chainId:at,contractType:()=>this.resolveContractType(ot),metadata:async()=>(await this.getContract(ot)).metadata.get(),extensions:async()=>getAllDetectedFeatureNames((await this.getContract(ot)).abi)})))}async getMultichainContractList(tt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:defaultChains$1;const at=await this.multiChainRegistry.getContractAddresses(tt),st=rt.reduce((lt,ut)=>(lt[ut.chainId]=ut,lt),{}),ot={};return at.map(lt=>{let{address:ut,chainId:ht}=lt;if(!st[ht])return{address:ut,chainId:ht,contractType:async()=>"custom",metadata:async()=>({}),extensions:async()=>[]};try{let mt=ot[ht];return mt||(mt=new ThirdwebSDK(ht,{...this.options,readonlySettings:void 0,supportedChains:rt}),ot[ht]=mt),{address:ut,chainId:ht,contractType:()=>mt.resolveContractType(ut),metadata:async()=>(await mt.getContract(ut)).metadata.get(),extensions:async()=>getAllDetectedFeatureNames((await mt.getContract(ut)).abi)}}catch{return{address:ut,chainId:ht,contractType:async()=>"custom",metadata:async()=>({}),extensions:async()=>[]}}})}updateSignerOrProvider(tt){super.updateSignerOrProvider(tt),this.updateContractSignerOrProvider()}updateContractSignerOrProvider(){this.wallet.connect(this.getSignerOrProvider()),this.deployer.updateSignerOrProvider(this.getSignerOrProvider()),this._publisher.updateSignerOrProvider(this.getSignerOrProvider()),this.multiChainRegistry.updateSigner(this.getSignerOrProvider());for(const[,tt]of this.contractCache)tt.onNetworkUpdated(this.getSignerOrProvider())}async getContractFromAbi(tt,rt){if(this.contractCache.has(tt))return this.contractCache.get(tt);const[,at]=getSignerAndProvider(this.getSignerOrProvider(),this.options),st=typeof rt=="string"?JSON.parse(rt):rt,ot=new SmartContract(this.getSignerOrProvider(),tt,await getCompositePluginABI(tt,AbiSchema.parse(st),at,this.options,this.storage),this.storageHandler,this.options,(await at.getNetwork()).chainId);return this.contractCache.set(tt,ot),ot}async getBalance(tt){return fetchCurrencyValue(this.getProvider(),NATIVE_TOKEN_ADDRESS,await this.getProvider().getBalance(tt))}getPublisher(){return this._publisher}}class ContractFactory extends ContractWrapper{constructor(tt,rt,at,st){super(rt,tt,TWFactoryAbi,st),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"DEFAULT_VERSION_MAP",{[NFTDropInitializer.contractType]:3,[NFTCollectionInitializer.contractType]:1,[SignatureDropInitializer.contractType]:4,[MultiwrapInitializer.contractType]:1,[EditionDropInitializer.contractType]:2,[EditionInitializer.contractType]:1,[TokenDropInitializer.contractType]:2,[TokenInitializer.contractType]:1,[VoteInitializer.contractType]:1,[SplitInitializer.contractType]:1,[MarketplaceInitializer.contractType]:2,[MarketplaceV3Initializer.contractType]:1,[PackInitializer.contractType]:2}),this.storage=at}async deploy(tt,rt,at,st){const ot=PREBUILT_CONTRACTS_MAP[tt],lt=ot.schema.deploy.parse(rt),ut=await this.storage.upload(lt),ht=await this.getImplementation(ot,st);if(!ht||ht===AddressZero)throw new Error(`No implementation found for ${tt}`);const mt=await ot.getAbi(ht,this.getProvider(),this.storage),bt=this.getSigner();invariant$1(bt,"A signer is required to deploy contracts");const vt=await getDeployArguments(tt,lt,ut,bt),At=Contract.getInterface(mt).encodeFunctionData("initialize",vt),xt=await this.getProvider().getBlockNumber(),Et=formatBytes32String(xt.toString()),Tt=await this.sendTransaction("deployProxyByImplementation",[ht,At,Et]),wt=this.parseLogs("ProxyDeployed",Tt.logs);if(wt.length<1)throw new Error("No ProxyDeployed event found");const Ct=wt[0].args.proxy;return at.emit("contractDeployed",{status:"completed",contractAddress:Ct,transactionHash:Tt.transactionHash}),Ct}async deployProxyByImplementation(tt,rt,at,st,ot){const lt=Contract.getInterface(rt).encodeFunctionData(at,st),ut=await this.getProvider().getBlockNumber(),ht=await this.sendTransaction("deployProxyByImplementation",[tt,lt,formatBytes32String(ut.toString())]),mt=this.parseLogs("ProxyDeployed",ht.logs);if(mt.length<1)throw new Error("No ProxyDeployed event found");const bt=mt[0].args.proxy;return ot.emit("contractDeployed",{status:"completed",contractAddress:bt,transactionHash:ht.transactionHash}),bt}async getDeployArguments(tt,rt,at){let st=tt===PackInitializer.contractType?[]:await this.getDefaultTrustedForwarders();switch(rt.trusted_forwarders&&rt.trusted_forwarders.length>0&&(st=rt.trusted_forwarders),tt){case NFTDropInitializer.contractType:case NFTCollectionInitializer.contractType:const ot=NFTDropInitializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),ot.name,ot.symbol,at,st,ot.primary_sale_recipient,ot.fee_recipient,ot.seller_fee_basis_points,ot.platform_fee_basis_points,ot.platform_fee_recipient];case SignatureDropInitializer.contractType:const lt=SignatureDropInitializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),lt.name,lt.symbol,at,st,lt.primary_sale_recipient,lt.fee_recipient,lt.seller_fee_basis_points,lt.platform_fee_basis_points,lt.platform_fee_recipient];case MultiwrapInitializer.contractType:const ut=MultiwrapInitializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),ut.name,ut.symbol,at,st,ut.fee_recipient,ut.seller_fee_basis_points];case EditionDropInitializer.contractType:case EditionInitializer.contractType:const ht=EditionDropInitializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),ht.name,ht.symbol,at,st,ht.primary_sale_recipient,ht.fee_recipient,ht.seller_fee_basis_points,ht.platform_fee_basis_points,ht.platform_fee_recipient];case TokenDropInitializer.contractType:case TokenInitializer.contractType:const mt=TokenInitializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),mt.name,mt.symbol,at,st,mt.primary_sale_recipient,mt.platform_fee_recipient,mt.platform_fee_basis_points];case VoteInitializer.contractType:const bt=VoteInitializer.schema.deploy.parse(rt);return[bt.name,at,st,bt.voting_token_address,bt.voting_delay_in_blocks,bt.voting_period_in_blocks,BigNumber.from(bt.proposal_token_threshold),bt.voting_quorum_fraction];case SplitInitializer.contractType:const vt=SplitInitializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),at,st,vt.recipients.map(Tt=>Tt.address),vt.recipients.map(Tt=>BigNumber.from(Tt.sharesBps))];case MarketplaceInitializer.contractType:const At=MarketplaceInitializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),at,st,At.platform_fee_recipient,At.platform_fee_basis_points];case MarketplaceV3Initializer.contractType:const xt=MarketplaceV3Initializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),at,st,xt.platform_fee_recipient,xt.platform_fee_basis_points];case PackInitializer.contractType:const Et=PackInitializer.schema.deploy.parse(rt);return[await this.getSignerAddress(),Et.name,Et.symbol,at,st,Et.fee_recipient,Et.seller_fee_basis_points];default:return[]}}async getDefaultTrustedForwarders(){const tt=await this.getChainID();return getDefaultTrustedForwarders(tt)}async getImplementation(tt,rt){const at=formatBytes32String(tt.name),st=await this.getChainID(),ot=getApprovedImplementation(st,tt.contractType);return ot&&ot.length>0&&rt===void 0?ot:this.readContract.getImplementation(at,rt!==void 0?rt:this.DEFAULT_VERSION_MAP[tt.contractType])}async getLatestVersion(tt){const rt=getContractName(tt);if(!rt)throw new Error(`Invalid contract type ${tt}`);const at=formatBytes32String(rt);return this.readContract.currentVersion(at)}}class ContractRegistry extends ContractWrapper{constructor(tt,rt,at){super(rt,tt,TWRegistryABI$1,at),_defineProperty$4(this,"addContract",buildTransactionFunction(async st=>await this.addContracts.prepare([st]))),_defineProperty$4(this,"addContracts",buildTransactionFunction(async st=>{const ot=await this.getSignerAddress(),lt=[];return st.forEach(ut=>{lt.push(this.readContract.interface.encodeFunctionData("add",[ot,ut]))}),Transaction.fromContractWrapper({contractWrapper:this,method:"multicall",args:[lt]})})),_defineProperty$4(this,"removeContract",buildTransactionFunction(async st=>await this.removeContracts.prepare([st]))),_defineProperty$4(this,"removeContracts",buildTransactionFunction(async st=>{const ot=await this.getSignerAddress(),lt=[];return st.forEach(ut=>{lt.push(this.readContract.interface.encodeFunctionData("remove",[ot,ut]))}),Transaction.fromContractWrapper({contractWrapper:this,method:"multicall",args:[lt]})}))}async getContractAddresses(tt){return(await this.readContract.getAll(tt)).filter(rt=>isAddress(rt)&&rt.toLowerCase()!==AddressZero)}}const THIRDWEB_DEPLOYER="0xdd99b75f095d0c4d5112aCe938e4e6ed962fb024";class ContractDeployer extends RPCConnectionHandler{constructor(tt,rt,at){super(tt,rt),_defineProperty$4(this,"_factory",void 0),_defineProperty$4(this,"_registry",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"deployMetadataCache",{}),_defineProperty$4(this,"transactionListener",st=>{st.status==="submitted"&&this.events.emit("contractDeployed",{status:"submitted",transactionHash:st.transactionHash})}),this.storage=at,this.events=new EventEmitter$1$1,this.getFactory(),this.getRegistry()}async deployNFTCollection(tt){return await this.deployBuiltInContract(NFTCollectionInitializer.contractType,tt)}async deployNFTDrop(tt){return await this.deployBuiltInContract(NFTDropInitializer.contractType,tt)}async deploySignatureDrop(tt){return await this.deployBuiltInContract(SignatureDropInitializer.contractType,tt)}async deployMultiwrap(tt){return await this.deployBuiltInContract(MultiwrapInitializer.contractType,tt)}async deployEdition(tt){return await this.deployBuiltInContract(EditionInitializer.contractType,tt)}async deployEditionDrop(tt){return await this.deployBuiltInContract(EditionDropInitializer.contractType,tt)}async deployToken(tt){return await this.deployBuiltInContract(TokenInitializer.contractType,tt)}async deployTokenDrop(tt){return await this.deployBuiltInContract(TokenDropInitializer.contractType,tt)}async deployMarketplace(tt){return await this.deployBuiltInContract(MarketplaceInitializer.contractType,tt)}async deployMarketplaceV3(tt){return await this.deployBuiltInContract(MarketplaceV3Initializer.contractType,tt)}async deployPack(tt){return await this.deployBuiltInContract(PackInitializer.contractType,tt)}async deploySplit(tt){return await this.deployBuiltInContract(SplitInitializer.contractType,tt)}async deployVote(tt){return await this.deployBuiltInContract(VoteInitializer.contractType,tt)}async deployBuiltInContract(tt,rt){var xt,Et,Tt;let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"latest";const st=this.getSigner();invariant$1(st,"A signer is required to deploy contracts");const ot={app_uri:PREBUILT_CONTRACTS_APPURI_MAP[tt],...PREBUILT_CONTRACTS_MAP[tt].schema.deploy.parse(rt)};if(this.hasLocalFactory()){let wt;try{wt=parseInt(at),isNaN(wt)&&(wt=void 0)}catch{wt=void 0}const Ct=await this.getFactory();if(!Ct)throw new Error("Factory not found");Ct.on(EventType.Transaction,this.transactionListener);const It=await Ct.deploy(tt,ot,this.events,wt);return Ct.off(EventType.Transaction,this.transactionListener),It}const lt=getContractName(tt);invariant$1(lt,"Contract name not found");const ut=await this.storage.upload(ot),ht=await getDeployArguments(tt,ot,ut,st),mt=(await this.getProvider().getNetwork()).chainId,bt=await this.fetchPublishedContractFromPolygon(THIRDWEB_DEPLOYER,lt,at),vt=await this.fetchAndCacheDeployMetadata(bt.metadataUri);let At=(Tt=(Et=(xt=vt.extendedMetadata)==null?void 0:xt.factoryDeploymentData)==null?void 0:Et.implementationAddresses)==null?void 0:Tt[mt];return At?this.deployContractFromUri(bt.metadataUri,ht):(At=await this.deployContractFromUri(bt.metadataUri,this.getConstructorParamsForImplementation(tt,mt),{forceDirectDeploy:!0}),this.deployProxy(At,vt.compilerMetadata.abi,"initialize",ht))}async getLatestBuiltInContractVersion(tt){const rt=await this.getFactory();if(!rt)throw new Error("Factory not found");return await rt.getLatestVersion(tt)}async deployReleasedContract(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"latest",ot=arguments.length>4?arguments[4]:void 0;const lt=await this.fetchPublishedContractFromPolygon(tt,rt,st);return await this.deployContractFromUri(lt.metadataUri,at,ot)}async deployViaFactory(tt,rt,at,st,ot){const lt=this.getSigner();invariant$1(lt,"signer is required");const ut=new ContractFactory(tt,this.getSignerOrProvider(),this.storage,this.options);ut.on(EventType.Transaction,this.transactionListener);const ht=await ut.deployProxyByImplementation(rt,at,st,ot,this.events);return ut.off(EventType.Transaction,this.transactionListener),ht}async deployProxy(tt,rt,at,st){const ot=Contract.getInterface(rt).encodeFunctionData(at,st),{TWProxy__factory:lt}=await __vitePreload(()=>Promise.resolve().then(()=>thirdwebDevContractsJsFactoriesTWProxy__factory_esm),void 0);return this.deployContractWithAbi(lt.abi,lt.bytecode,[tt,ot])}async getRegistry(){return this._registry?this._registry:this._registry=this.getProvider().getNetwork().then(async tt=>{let{chainId:rt}=tt;const at=getContractAddressByChainId(rt,"twRegistry");if(!!at)return new ContractRegistry(at,this.getSignerOrProvider(),this.options)})}async getFactory(){return this._factory?this._factory:this._factory=this.getProvider().getNetwork().then(async tt=>{let{chainId:rt}=tt;const at=getContractAddressByChainId(rt,"twFactory");return at?new ContractFactory(at,this.getSignerOrProvider(),this.storage,this.options):void 0})}updateSignerOrProvider(tt){super.updateSignerOrProvider(tt),this.updateContractSignerOrProvider()}updateContractSignerOrProvider(){var tt,rt;(tt=this._factory)==null||tt.then(at=>{at==null||at.updateSignerOrProvider(this.getSignerOrProvider())}).catch(()=>{}),(rt=this._registry)==null||rt.then(at=>{at==null||at.updateSignerOrProvider(this.getSignerOrProvider())}).catch(()=>{})}async deployContractFromUri(tt,rt,at){const st=this.getSigner();invariant$1(st,"A signer is required");const{compilerMetadata:ot,extendedMetadata:lt}=await this.fetchAndCacheDeployMetadata(tt),ut=(at==null?void 0:at.forceDirectDeploy)||!1;if(lt&&lt.factoryDeploymentData&&(lt.isDeployableViaProxy||lt.isDeployableViaFactory)&&!ut){const vt=(await this.getProvider().getNetwork()).chainId;invariant$1(lt.factoryDeploymentData.implementationAddresses,"implementationAddresses is required");const At=lt.factoryDeploymentData.implementationAddresses[vt];invariant$1(At,`implementationAddress not found for chainId '${vt}'`),invariant$1(lt.factoryDeploymentData.implementationInitializerFunction,"implementationInitializerFunction not set'");const xt=extractFunctionParamsFromAbi(ot.abi,lt.factoryDeploymentData.implementationInitializerFunction).map(Tt=>Tt.type),Et=this.convertParamValues(xt,rt);if(lt.isDeployableViaFactory){invariant$1(lt.factoryDeploymentData.factoryAddresses,"isDeployableViaFactory is true so factoryAddresses is required");const Tt=lt.factoryDeploymentData.factoryAddresses[vt];return invariant$1(Tt,`isDeployableViaFactory is true and factoryAddress not found for chainId '${vt}'`),await this.deployViaFactory(Tt,At,ot.abi,lt.factoryDeploymentData.implementationInitializerFunction,Et)}else if(lt.isDeployableViaProxy)return await this.deployProxy(At,ot.abi,lt.factoryDeploymentData.implementationInitializerFunction,Et)}const ht=ot.bytecode.startsWith("0x")?ot.bytecode:`0x${ot.bytecode}`;if(!isHexString$4(ht))throw new Error(`Contract bytecode is invalid.

${ht}`);const mt=extractConstructorParamsFromAbi(ot.abi).map(vt=>vt.type),bt=this.convertParamValues(mt,rt);return this.deployContractWithAbi(ot.abi,ht,bt)}async deployContractWithAbi(tt,rt,at){const st=this.getSigner();invariant$1(st,"Signer is required to deploy contracts");const ot=await new ContractFactory$1(tt,rt).connect(st).deploy(...at);this.events.emit("contractDeployed",{status:"submitted",transactionHash:ot.deployTransaction.hash});const lt=await ot.deployed();return this.events.emit("contractDeployed",{status:"completed",contractAddress:lt.address,transactionHash:lt.deployTransaction.hash}),lt.address}addDeployListener(tt){this.events.on("contractDeployed",tt)}removeDeployListener(tt){this.events.off("contractDeployed",tt)}removeAllDeployListeners(){this.events.removeAllListeners("contractDeployed")}async fetchAndCacheDeployMetadata(tt){if(this.deployMetadataCache[tt])return this.deployMetadataCache[tt];const rt=await fetchPreDeployMetadata(tt,this.storage);let at;try{at=await fetchExtendedReleaseMetadata(tt,this.storage)}catch{}const st={compilerMetadata:rt,extendedMetadata:at};return this.deployMetadataCache[tt]=st,st}async fetchPublishedContractFromPolygon(tt,rt,at){const st=await new ThirdwebSDK("polygon").getPublisher().getVersion(tt,rt,at);if(!st)throw new Error(`No published contract found for '${rt}' at version '${at}' by '${tt}'`);return st}getConstructorParamsForImplementation(tt,rt){switch(tt){case MarketplaceInitializer.contractType:case MultiwrapInitializer.contractType:return[getNativeTokenByChainId(ChainId$1.Hardhat).wrapped.address];case PackInitializer.contractType:return[getNativeTokenByChainId(rt).wrapped.address,AddressZero];default:return[]}}hasLocalFactory(){return{}.factoryAddress!==void 0}convertParamValues(tt,rt){if(tt.length!==rt.length)throw Error(`Passed the wrong number of constructor arguments: ${rt.length}, expected ${tt.length}`);return tt.map((at,st)=>at==="tuple"||at.endsWith("[]")?typeof rt[st]=="string"?JSON.parse(rt[st]):rt[st]:at==="bytes32"?(invariant$1(isHexString$4(rt[st]),`Could not parse bytes32 value. Expected valid hex string but got "${rt[st]}".`),hexZeroPad(rt[st],32)):at.startsWith("bytes")?(invariant$1(isHexString$4(rt[st]),`Could not parse bytes value. Expected valid hex string but got "${rt[st]}".`),rt[st]):at.startsWith("uint")||at.startsWith("int")?BigNumber.from(rt[st].toString()):rt[st])}}class ContractOwner{constructor(tt){_defineProperty$4(this,"featureName",FEATURE_OWNER.name),_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt}async get(){return this.contractWrapper.readContract.owner()}async set(tt){return{receipt:await this.contractWrapper.sendTransaction("setOwner",[tt])}}}const metadataCache={},polygonSDK=new ThirdwebSDK("polygon");function getCacheKey(it,tt){return`${it}-${tt}`}function putInCache(it,tt,rt){metadataCache[getCacheKey(it,tt)]=rt}function getFromCache(it,tt){return metadataCache[getCacheKey(it,tt)]}async function fetchContractMetadataFromAddress(it,tt,rt){const at=(await tt.getNetwork()).chainId,st=getFromCache(it,at);if(st)return st;let ot;try{const lt=await resolveContractUriFromAddress(it,tt);if(!lt)throw new Error(`Could not resolve metadata for contract at ${it}`);ot=await fetchContractMetadata(lt,rt)}catch{try{const ut=await polygonSDK.multiChainRegistry.getContractMetadataURI(at,it);if(!ut)throw new Error(`Could not resolve metadata for contract at ${it}`);ot=await fetchContractMetadata(ut,rt)}catch{throw new Error(`Could not resolve metadata for contract at ${it}`)}}if(!ot)throw new Error(`Could not resolve metadata for contract at ${it}`);return putInCache(it,at,ot),ot}async function fetchAbiFromAddress(it,tt,rt){try{const at=await fetchContractMetadataFromAddress(it,tt,rt);if(at&&at.abi)return at.abi}catch{}}async function fetchContractMetadata(it,tt){const rt=await tt.downloadJSON(it);if(!rt||!rt.output)throw new Error(`Could not resolve metadata for contract at ${it}`);const at=AbiSchema.parse(rt.output.abi),st=rt.settings.compilationTarget,ot=Object.keys(st),lt=st[ot[0]],ut=ContractInfoSchema.parse({title:rt.output.devdoc.title,author:rt.output.devdoc.author,details:rt.output.devdoc.detail,notice:rt.output.userdoc.notice}),ht=[...new Set(Object.entries(rt.sources).map(mt=>{let[,bt]=mt;return bt.license}))];return{name:lt,abi:at,metadata:rt,info:ut,licenses:ht}}async function fetchSourceFilesFromMetadata(it,tt){return await Promise.all(Object.entries(it.metadata.sources).map(async rt=>{let[at,st]=rt;const ot=st.urls,lt=ot?ot.find(ut=>ut.includes("ipfs")):void 0;if(lt){const ut=lt.split("ipfs/")[1],ht=new Promise((bt,vt)=>setTimeout(()=>vt("timeout"),3e3)),mt=await Promise.race([(await tt.download(`ipfs://${ut}`)).text(),ht]);return{filename:at,source:mt}}else return{filename:at,source:st.content||"Could not find source for this contract"}}))}const MAX_LENGTH=256,NUMERIC_IDENTIFIER="0|[1-9]\\d*",MAIN_VERSION_IDENTIFIER=`(${NUMERIC_IDENTIFIER})\\.(${NUMERIC_IDENTIFIER})\\.(${NUMERIC_IDENTIFIER})`,REGEX_MAIN_VERSION=new RegExp(MAIN_VERSION_IDENTIFIER);function toSemver(it){if(it.length>MAX_LENGTH)throw new Error(`version is longer than ${MAX_LENGTH} characters`);const tt=it.trim().match(REGEX_MAIN_VERSION);if(!tt||(tt==null?void 0:tt.length)!==4)throw new Error(`${it} is not a valid semantic version. Should be in the format of major.minor.patch. Ex: 0.4.1`);const rt=Number(tt[1]),at=Number(tt[2]),st=Number(tt[3]),ot=[rt,at,st].join(".");return{major:rt,minor:at,patch:st,versionString:ot}}function isIncrementalVersion(it,tt){const rt=toSemver(it),at=toSemver(tt);if(at.major>rt.major)return!0;const st=at.major===rt.major;if(st&&at.minor>rt.minor)return!0;const ot=at.minor===rt.minor;return st&&ot&&at.patch>rt.patch}const BYOCContractMetadataSchema=CommonContractSchema.catchall(z$6.union([BigNumberTransformSchema,z$6.unknown()])),CustomContractInput=BYOCContractMetadataSchema.merge(CommonRoyaltySchema.merge(MerkleSchema).merge(CommonSymbolSchema).partial()),CustomContractOutput=CommonContractOutputSchema.merge(CommonRoyaltySchema.merge(MerkleSchema).merge(CommonSymbolSchema).partial()),CustomContractDeploy=CustomContractInput.merge(CommonPlatformFeeSchema.merge(CommonPrimarySaleSchema).merge(CommonTrustedForwarderSchema).partial()),CustomContractSchema={deploy:CustomContractDeploy,output:CustomContractOutput,input:CustomContractInput},AbiTypeBaseSchema=z$6.object({type:z$6.string(),name:z$6.string()}).catchall(z$6.any()),AbiTypeSchema=AbiTypeBaseSchema.extend({stateMutability:z$6.string().optional(),components:z$6.array(AbiTypeBaseSchema).optional()}).catchall(z$6.any()),AbiObjectSchema=z$6.object({type:z$6.string(),name:z$6.string().default(""),inputs:z$6.array(AbiTypeSchema).default([]),outputs:z$6.array(AbiTypeSchema).default([])}).catchall(z$6.any()),AbiSchema=z$6.array(AbiObjectSchema),PreDeployMetadata=z$6.object({name:z$6.string(),metadataUri:z$6.string(),bytecodeUri:z$6.string(),analytics:z$6.any().optional()}).catchall(z$6.any()),ChainIdToAddressSchema=z$6.record(z$6.string(),z$6.string()),FactoryDeploymentSchema=z$6.object({implementationAddresses:ChainIdToAddressSchema,implementationInitializerFunction:z$6.string().default("initialize"),factoryAddresses:ChainIdToAddressSchema.optional()}),ExtraPublishMetadataSchemaInput=z$6.object({version:z$6.string().refine(it=>{try{return toSemver(it),!0}catch{return!1}},it=>({message:`'${it}' is not a valid semantic version. Should be in the format of major.minor.patch. Ex: 0.4.1`})),displayName:z$6.string().optional(),description:z$6.string().optional(),readme:z$6.string().optional(),license:z$6.string().optional(),changelog:z$6.string().optional(),tags:z$6.array(z$6.string()).optional(),audit:FileOrBufferOrStringSchema.nullable().optional(),logo:FileOrBufferOrStringSchema.nullable().optional(),isDeployableViaFactory:z$6.boolean().optional(),isDeployableViaProxy:z$6.boolean().optional(),factoryDeploymentData:FactoryDeploymentSchema.optional(),constructorParams:z$6.record(z$6.string(),z$6.object({displayName:z$6.string().optional(),description:z$6.string().optional(),defaultValue:z$6.string().optional()}).catchall(z$6.any())).optional()}).catchall(z$6.any()),ExtraPublishMetadataSchemaOutput=ExtraPublishMetadataSchemaInput.extend({audit:z$6.string().nullable().optional(),logo:z$6.string().nullable().optional()}),FullPublishMetadataSchemaInput=PreDeployMetadata.merge(ExtraPublishMetadataSchemaInput).extend({publisher:AddressSchema.optional()}),FullPublishMetadataSchemaOutput=PreDeployMetadata.merge(ExtraPublishMetadataSchemaOutput).extend({publisher:AddressSchema.optional()}),ProfileSchemaInput=z$6.object({name:z$6.string().optional(),bio:z$6.string().optional(),avatar:FileOrBufferOrStringSchema.nullable().optional(),website:z$6.string().optional(),twitter:z$6.string().optional(),telegram:z$6.string().optional(),facebook:z$6.string().optional(),github:z$6.string().optional(),medium:z$6.string().optional(),linkedin:z$6.string().optional(),reddit:z$6.string().optional(),discord:z$6.string().optional()}),ProfileSchemaOutput=ProfileSchemaInput.extend({avatar:z$6.string().nullable().optional()}),PublishedContractSchema=z$6.object({id:z$6.string(),timestamp:BigNumberishSchema,metadataUri:z$6.string()}),ContractInfoSchema=z$6.object({title:z$6.string().optional(),author:z$6.string().optional(),details:z$6.string().optional(),notice:z$6.string().optional()}),CompilerMetadataFetchedSchema=z$6.object({name:z$6.string(),abi:AbiSchema,metadata:z$6.record(z$6.string(),z$6.any()),info:ContractInfoSchema,licenses:z$6.array(z$6.string().optional()).default([]).transform(it=>it.filter(tt=>tt!==void 0))}),PreDeployMetadataFetchedSchema=PreDeployMetadata.merge(CompilerMetadataFetchedSchema).extend({bytecode:z$6.string()}),PAPER_API_BASE="https://paper.xyz/api",PAPER_API_VERSION="2022-08-12",PAPER_API_URL=`${PAPER_API_BASE}/${PAPER_API_VERSION}/platform/thirdweb`,PAPER_CHAIN_ID_MAP={[ChainId$1.Mainnet]:"Ethereum",[ChainId$1.Goerli]:"Goerli",[ChainId$1.Polygon]:"Polygon",[ChainId$1.Mumbai]:"Mumbai",[ChainId$1.Avalanche]:"Avalanche"};function parseChainIdToPaperChain(it){return invariant$1(it in PAPER_CHAIN_ID_MAP,`chainId not supported by paper: ${it}`),PAPER_CHAIN_ID_MAP[it]}async function fetchRegisteredCheckoutId(it,tt){const rt=parseChainIdToPaperChain(tt),st=await(await fetch(`${PAPER_API_URL}/register-contract?contractAddress=${it}&chain=${rt}`)).json();return invariant$1(st.result.id,"Contract is not registered with paper"),st.result.id}const DEFAULT_PARAMS={expiresInMinutes:15,feeBearer:"BUYER",sendEmailOnSuccess:!0,redirectAfterPayment:!1};async function createCheckoutLinkIntent(it,tt){const at=await(await fetch(`${PAPER_API_URL}/checkout-link-intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contractId:it,...DEFAULT_PARAMS,...tt,metadata:{...tt.metadata,via_platform:"thirdweb"},hideNativeMint:!0,hidePaperWallet:!!tt.walletAddress,hideExternalWallet:!0,hidePayWithCrypto:!0,usePaperKey:!1})})).json();return invariant$1(at.checkoutLinkIntentUrl,"Failed to create checkout link intent"),at.checkoutLinkIntentUrl}class PaperCheckout{constructor(tt){_defineProperty$4(this,"contractWrapper",void 0),this.contractWrapper=tt}async getCheckoutId(){return fetchRegisteredCheckoutId(this.contractWrapper.readContract.address,await this.contractWrapper.getChainID())}async isEnabled(){try{return!!await this.getCheckoutId()}catch{return!1}}async createLinkIntent(tt){return await createCheckoutLinkIntent(await this.getCheckoutId(),tt)}}new ThirdwebStorage;function _toPrimitive$1(it,tt){if(typeof it!="object"||it===null)return it;var rt=it[Symbol.toPrimitive];if(rt!==void 0){var at=rt.call(it,tt||"default");if(typeof at!="object")return at;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(it)}function _toPropertyKey$1(it){var tt=_toPrimitive$1(it,"string");return typeof tt=="symbol"?tt:String(tt)}function _defineProperty$2(it,tt,rt){return tt=_toPropertyKey$1(tt),tt in it?Object.defineProperty(it,tt,{value:rt,enumerable:!0,configurable:!0,writable:!0}):it[tt]=rt,it}z$6.string().refine(it=>isAddress(it),it=>({message:`${it} is not a valid address`}));const RawDateSchema=z$6.date().transform(it=>BigNumber.from(Math.floor(it.getTime()/1e3))),AccountTypeSchema=z$6.union([z$6.literal("evm"),z$6.literal("solana")]),literalSchema=z$6.union([z$6.string(),z$6.number(),z$6.boolean(),z$6.null()]),JsonSchema=z$6.lazy(()=>z$6.union([literalSchema,z$6.array(JsonSchema),z$6.record(JsonSchema)]),{invalid_type_error:"Provided value was not valid JSON"}),LoginOptionsSchema=z$6.object({domain:z$6.string().optional(),statement:z$6.string().optional(),uri:z$6.string().optional(),version:z$6.string().optional(),chainId:z$6.string().optional(),nonce:z$6.string().optional(),expirationTime:z$6.date().optional(),invalidBefore:z$6.date().optional(),resources:z$6.array(z$6.string()).optional()}).optional(),LoginPayloadDataSchema=z$6.object({type:AccountTypeSchema,domain:z$6.string(),address:z$6.string(),statement:z$6.string().default("Please ensure that the domain above matches the URL of the current website."),uri:z$6.string().optional(),version:z$6.string().default("1"),chain_id:z$6.string().optional(),nonce:z$6.string().default(v4()),issued_at:z$6.date().default(new Date).transform(it=>it.toISOString()),expiration_time:z$6.date().transform(it=>it.toISOString()),invalid_before:z$6.date().default(new Date).transform(it=>it.toISOString()),resources:z$6.array(z$6.string()).optional()}),LoginPayloadSchema=z$6.object({payload:LoginPayloadDataSchema,signature:z$6.string()}),VerifyOptionsSchemaRequired=z$6.object({domain:z$6.string().optional(),statement:z$6.string().optional(),uri:z$6.string().optional(),version:z$6.string().optional(),chainId:z$6.string().optional(),validateNonce:z$6.function().args(z$6.string()).optional(),resources:z$6.array(z$6.string()).optional()}),VerifyOptionsSchema=VerifyOptionsSchemaRequired.optional(),GenerateOptionsSchema=z$6.object({domain:z$6.string().optional(),tokenId:z$6.string().optional(),expirationTime:z$6.date().optional(),invalidBefore:z$6.date().optional(),session:z$6.union([JsonSchema,z$6.function().args(z$6.string())]).optional(),verifyOptions:VerifyOptionsSchemaRequired.omit({domain:!0}).optional()}).optional(),AuthenticationPayloadDataSchema=z$6.object({iss:z$6.string(),sub:z$6.string(),aud:z$6.string(),exp:RawDateSchema.transform(it=>it.toNumber()),nbf:RawDateSchema.transform(it=>it.toNumber()),iat:RawDateSchema.transform(it=>it.toNumber()),jti:z$6.string().default(v4()),ctx:JsonSchema.optional()});z$6.object({payload:AuthenticationPayloadDataSchema,signature:z$6.string()});const AuthenticateOptionsSchema=z$6.object({domain:z$6.string().optional(),validateTokenId:z$6.function().args(z$6.string()).optional()}).optional();LoginPayloadSchema.extend({payload:LoginPayloadDataSchema.extend({issued_at:z$6.string(),expiration_time:z$6.string(),invalid_before:z$6.string()})});const isBrowser$2=()=>typeof window<"u";class ThirdwebAuth{constructor(tt,rt){_defineProperty$2(this,"domain",void 0),_defineProperty$2(this,"wallet",void 0),this.wallet=tt,this.domain=rt}updateWallet(tt){this.wallet=tt}async login(tt){const rt=LoginOptionsSchema.parse(tt);let at=rt==null?void 0:rt.chainId;if(!at&&this.wallet.getChainId)try{at=(await this.wallet.getChainId()).toString()}catch{}const st=LoginPayloadDataSchema.parse({type:this.wallet.type,domain:(rt==null?void 0:rt.domain)||this.domain,address:await this.wallet.getAddress(),statement:rt==null?void 0:rt.statement,version:rt==null?void 0:rt.version,uri:(rt==null?void 0:rt.uri)||(isBrowser$2()?window.location.origin:void 0),chain_id:at,nonce:rt==null?void 0:rt.nonce,expiration_time:(rt==null?void 0:rt.expirationTime)||new Date(Date.now()+1e3*60*5),invalid_before:rt==null?void 0:rt.invalidBefore,resources:rt==null?void 0:rt.resources}),ot=this.generateMessage(st),lt=await this.wallet.signMessage(ot);return{payload:st,signature:lt}}async verify(tt,rt){const at=VerifyOptionsSchema.parse(rt);if(tt.payload.type!==this.wallet.type)throw new Error(`Expected chain type '${this.wallet.type}' does not match chain type on payload '${tt.payload.type}'`);const st=(at==null?void 0:at.domain)||this.domain;if(tt.payload.domain!==st)throw new Error(`Expected domain '${st}' does not match domain on payload '${tt.payload.domain}'`);if(at!=null&&at.statement&&tt.payload.statement!==at.statement)throw new Error(`Expected statement '${at.statement}' does not match statement on payload '${tt.payload.statement}'`);if(at!=null&&at.uri&&tt.payload.uri!==at.uri)throw new Error(`Expected URI '${at.uri}' does not match URI on payload '${tt.payload.uri}'`);if(at!=null&&at.version&&tt.payload.version!==at.version)throw new Error(`Expected version '${at.version}' does not match version on payload '${tt.payload.version}'`);if(at!=null&&at.chainId&&tt.payload.chain_id!==at.chainId)throw new Error(`Expected chain ID '${at.chainId}' does not match chain ID on payload '${tt.payload.chain_id}'`);if((at==null?void 0:at.validateNonce)!==void 0)try{await at.validateNonce(tt.payload.nonce)}catch{throw new Error("Login request nonce is invalid")}const ot=new Date;if(ot<new Date(tt.payload.invalid_before))throw new Error("Login request is not yet valid");if(ot>new Date(tt.payload.expiration_time))throw new Error("Login request has expired");if(at!=null&&at.resources){const mt=at.resources.filter(bt=>{var vt;return!((vt=tt.payload.resources)!=null&&vt.includes(bt))});if(mt.length>0)throw new Error(`Login request is missing required resources: ${mt.join(", ")}`)}const lt=this.generateMessage(tt.payload),ut=this.wallet.type==="evm"&&tt.payload.chain_id?parseInt(tt.payload.chain_id):void 0;if(!await this.verifySignature(lt,tt.signature,tt.payload.address,ut))throw new Error(`Signer address does not match payload address '${tt.payload.address.toLowerCase()}'`);return tt.payload.address}async generate(tt,rt){if(isBrowser$2())throw new Error("Authentication tokens should not be generated in the browser, as they must be signed by a server-side admin wallet.");const at=GenerateOptionsSchema.parse(rt),st=(at==null?void 0:at.domain)||this.domain,ot=await this.verify(tt,{domain:st,...at==null?void 0:at.verifyOptions});let lt;if(typeof(at==null?void 0:at.session)=="function"){const wt=await at.session(ot);wt&&(lt=wt)}else lt=at==null?void 0:at.session;const ut=await this.wallet.getAddress(),ht=AuthenticationPayloadDataSchema.parse({iss:ut,sub:ot,aud:st,nbf:(at==null?void 0:at.invalidBefore)||new Date,exp:(at==null?void 0:at.expirationTime)||new Date(Date.now()+1e3*60*60*5),iat:new Date,jti:at==null?void 0:at.tokenId,ctx:lt}),mt=JSON.stringify(ht),bt=await this.wallet.signMessage(mt),vt={alg:"ES256",typ:"JWT"},At=Buffer.from(JSON.stringify(vt)).toString("base64"),xt=Buffer.from(JSON.stringify(ht)).toString("base64").replace(/=/g,""),Et=Buffer.from(bt).toString("base64");return`${At}.${xt}.${Et}`}async authenticate(tt,rt){if(isBrowser$2())throw new Error("Should not authenticate tokens in the browser, as they must be verified by the server-side admin wallet.");const at=AuthenticateOptionsSchema.parse(rt),st=(at==null?void 0:at.domain)||this.domain,ot=tt.split(".")[1],lt=tt.split(".")[2],ut=JSON.parse(Buffer.from(ot,"base64").toString()),ht=Buffer.from(lt,"base64").toString();if((at==null?void 0:at.validateTokenId)!==void 0)try{await at.validateTokenId(ut.jti)}catch{throw new Error("Token ID is invalid")}if(ut.aud!==st)throw new Error(`Expected token to be for the domain '${st}', but found token with domain '${ut.aud}'`);const mt=Math.floor(new Date().getTime()/1e3);if(mt<ut.nbf)throw new Error(`This token is invalid before epoch time '${ut.nbf}', current epoch time is '${mt}'`);if(mt>ut.exp)throw new Error(`This token expired at epoch time '${ut.exp}', current epoch time is '${mt}'`);const bt=await this.wallet.getAddress();if(bt.toLowerCase()!==ut.iss.toLowerCase())throw new Error(`Expected the connected wallet address '${bt}' to match the token issuer address '${ut.iss}'`);let vt;if(this.wallet.getChainId)try{vt=await this.wallet.getChainId()}catch{}if(!await this.verifySignature(JSON.stringify(ut),ht,bt,vt))throw new Error(`The connected wallet address '${bt}' did not sign the token`);return{address:ut.sub,session:ut.ctx}}async verifySignature(tt,rt,at,st){return this.wallet.verifySignature(tt,rt,at,st)}generateMessage(tt){const rt=tt.type==="evm"?"Ethereum":"Solana";let st=[`${tt.domain} wants you to sign in with your ${rt} account:`,tt.address].join(`
`);st=[st,tt.statement].join(`

`),tt.statement&&(st+=`
`);const ot=[];if(tt.uri){const vt=`URI: ${tt.uri}`;ot.push(vt)}const lt=`Version: ${tt.version}`;if(ot.push(lt),tt.chain_id){const vt="Chain ID: "+tt.chain_id||"1";ot.push(vt)}const ut=`Nonce: ${tt.nonce}`;ot.push(ut);const ht=`Issued At: ${tt.issued_at}`;ot.push(ht);const mt=`Expiration Time: ${tt.expiration_time}`;if(ot.push(mt),tt.invalid_before){const vt=`Not Before: ${tt.invalid_before}`;ot.push(vt)}tt.resources&&ot.push(["Resources:",...tt.resources.map(vt=>`- ${vt}`)].join(`
`));const bt=ot.join(`
`);return[st,bt].join(`
`)}}function _checkPrivateRedeclaration$1(it,tt){if(tt.has(it))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldInitSpec$1(it,tt,rt){_checkPrivateRedeclaration$1(it,tt),tt.set(it,rt)}function _classApplyDescriptorGet$1(it,tt){return tt.get?tt.get.call(it):tt.value}function _classExtractFieldDescriptor$1(it,tt,rt){if(!tt.has(it))throw new TypeError("attempted to "+rt+" private field on non-instance");return tt.get(it)}function _classPrivateFieldGet$1(it,tt){var rt=_classExtractFieldDescriptor$1(it,tt,"get");return _classApplyDescriptorGet$1(it,rt)}function _classApplyDescriptorSet$1(it,tt,rt){if(tt.set)tt.set.call(it,rt);else{if(!tt.writable)throw new TypeError("attempted to set read only private field");tt.value=rt}}function _classPrivateFieldSet$1(it,tt,rt){var at=_classExtractFieldDescriptor$1(it,tt,"set");return _classApplyDescriptorSet$1(it,at,rt),rt}const arbitrum={id:42161,name:"Arbitrum One",network:"arbitrum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://arb-mainnet.g.alchemy.com/v2"],webSocket:["wss://arb-mainnet.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-mainnet.infura.io/v3"],webSocket:["wss://arbitrum-mainnet.infura.io/ws/v3"]},default:{http:["https://arb1.arbitrum.io/rpc"]},public:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://arbiscan.io"},default:{name:"Arbiscan",url:"https://arbiscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}},arbitrumGoerli={id:421613,name:"Arbitrum Goerli",network:"arbitrum-goerli",nativeCurrency:{name:"Arbitrum Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://arb-goerli.g.alchemy.com/v2"],webSocket:["wss://arb-goerli.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-goerli.infura.io/v3"],webSocket:["wss://arbitrum-goerli.infura.io/ws/v3"]},default:{http:["https://goerli-rollup.arbitrum.io/rpc"]},public:{http:["https://goerli-rollup.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://goerli.arbiscan.io/"},default:{name:"Arbiscan",url:"https://goerli.arbiscan.io/"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:88114}},testnet:!0},avalanche={id:43114,name:"Avalanche",network:"avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]},public:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://snowtrace.io"},default:{name:"SnowTrace",url:"https://snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}},avalancheFuji={id:43113,name:"Avalanche Fuji",network:"avalanche-fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]},public:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://testnet.snowtrace.io"},default:{name:"SnowTrace",url:"https://testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959}},testnet:!0},bsc={id:56,name:"BNB Smart Chain",network:"bsc",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://rpc.ankr.com/bsc"]},public:{http:["https://rpc.ankr.com/bsc"]}},blockExplorers:{etherscan:{name:"BscScan",url:"https://bscscan.com"},default:{name:"BscScan",url:"https://bscscan.com"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}},bscTestnet={id:97,name:"Binance Smart Chain Testnet",network:"bsc-testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://bsc-testnet.public.blastapi.io"]},public:{http:["https://bsc-testnet.public.blastapi.io"]}},blockExplorers:{etherscan:{name:"BscScan",url:"https://testnet.bscscan.com"},default:{name:"BscScan",url:"https://testnet.bscscan.com"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0},fantom={id:250,name:"Fantom",network:"fantom",nativeCurrency:{decimals:18,name:"Fantom",symbol:"FTM"},rpcUrls:{default:{http:["https://rpc.ankr.com/fantom"]},public:{http:["https://rpc.ankr.com/fantom"]}},blockExplorers:{etherscan:{name:"FTMScan",url:"https://ftmscan.com"},default:{name:"FTMScan",url:"https://ftmscan.com"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:33001987}}},fantomTestnet={id:4002,name:"Fantom Testnet",network:"fantom-testnet",nativeCurrency:{decimals:18,name:"Fantom",symbol:"FTM"},rpcUrls:{default:{http:["https://rpc.testnet.fantom.network"]},public:{http:["https://rpc.testnet.fantom.network"]}},blockExplorers:{etherscan:{name:"FTMScan",url:"https://testnet.ftmscan.com"},default:{name:"FTMScan",url:"https://testnet.ftmscan.com"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:8328688}}},goerli={id:5,network:"goerli",name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-goerli.g.alchemy.com/v2"],webSocket:["wss://eth-goerli.g.alchemy.com/v2"]},infura:{http:["https://goerli.infura.io/v3"],webSocket:["wss://goerli.infura.io/ws/v3"]},default:{http:["https://rpc.ankr.com/eth_goerli"]},public:{http:["https://rpc.ankr.com/eth_goerli"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://goerli.etherscan.io"},default:{name:"Etherscan",url:"https://goerli.etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:6507670}},testnet:!0},mainnet={id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}},optimism={id:10,name:"Optimism",network:"optimism",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://opt-mainnet.g.alchemy.com/v2"],webSocket:["wss://opt-mainnet.g.alchemy.com/v2"]},infura:{http:["https://optimism-mainnet.infura.io/v3"],webSocket:["wss://optimism-mainnet.infura.io/ws/v3"]},default:{http:["https://mainnet.optimism.io"]},public:{http:["https://mainnet.optimism.io"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://optimistic.etherscan.io"},default:{name:"Etherscan",url:"https://optimistic.etherscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263}}},optimismGoerli={id:420,name:"Optimism Goerli",network:"optimism-goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://opt-goerli.g.alchemy.com/v2"],webSocket:["wss://opt-goerli.g.alchemy.com/v2"]},infura:{http:["https://optimism-goerli.infura.io/v3"],webSocket:["wss://optimism-goerli.infura.io/ws/v3"]},default:{http:["https://goerli.optimism.io"]},public:{http:["https://goerli.optimism.io"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://goerli-optimism.etherscan.io"},default:{name:"Etherscan",url:"https://goerli-optimism.etherscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:49461}},testnet:!0},polygon={id:137,name:"Polygon",network:"matic",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:{alchemy:{http:["https://polygon-mainnet.g.alchemy.com/v2"],webSocket:["wss://polygon-mainnet.g.alchemy.com/v2"]},infura:{http:["https://polygon-mainnet.infura.io/v3"],webSocket:["wss://polygon-mainnet.infura.io/ws/v3"]},default:{http:["https://polygon-rpc.com"]},public:{http:["https://polygon-rpc.com"]}},blockExplorers:{etherscan:{name:"PolygonScan",url:"https://polygonscan.com"},default:{name:"PolygonScan",url:"https://polygonscan.com"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}},polygonMumbai={id:80001,name:"Polygon Mumbai",network:"maticmum",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:{alchemy:{http:["https://polygon-mumbai.g.alchemy.com/v2"],webSocket:["wss://polygon-mumbai.g.alchemy.com/v2"]},infura:{http:["https://polygon-mumbai.infura.io/v3"],webSocket:["wss://polygon-mumbai.infura.io/ws/v3"]},default:{http:["https://matic-mumbai.chainstacklabs.com"]},public:{http:["https://matic-mumbai.chainstacklabs.com"]}},blockExplorers:{etherscan:{name:"PolygonScan",url:"https://mumbai.polygonscan.com"},default:{name:"PolygonScan",url:"https://mumbai.polygonscan.com"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}},testnet:!0};let ChainId;(function(it){it[it.Mainnet=1]="Mainnet",it[it.Goerli=5]="Goerli",it[it.Polygon=137]="Polygon",it[it.Mumbai=80001]="Mumbai",it[it.Fantom=250]="Fantom",it[it.FantomTestnet=4002]="FantomTestnet",it[it.Avalanche=43114]="Avalanche",it[it.AvalancheFujiTestnet=43113]="AvalancheFujiTestnet",it[it.Optimism=10]="Optimism",it[it.OptimismGoerli=420]="OptimismGoerli",it[it.Arbitrum=42161]="Arbitrum",it[it.ArbitrumGoerli=421613]="ArbitrumGoerli",it[it.BinanceSmartChainMainnet=56]="BinanceSmartChainMainnet",it[it.BinanceSmartChainTestnet=97]="BinanceSmartChainTestnet"})(ChainId||(ChainId={})),ChainId.Mainnet,ChainId.Goerli,ChainId.Polygon,ChainId.Mumbai,ChainId.Fantom,ChainId.FantomTestnet,ChainId.Avalanche,ChainId.AvalancheFujiTestnet,ChainId.Optimism,ChainId.OptimismGoerli,ChainId.Arbitrum,ChainId.ArbitrumGoerli,ChainId.BinanceSmartChainMainnet,ChainId.BinanceSmartChainTestnet;const DEFAULT_API_KEY$2="c6634ad2d97b74baf15ff556016830c251050e6c36b9da508ce3ec80095d3dc1";function getRpcUrl$1(it){return`https://${it}.rpc.thirdweb.com/${DEFAULT_API_KEY$2}`}function enhanceChain(it){var rt;const tt=getRpcUrl$1(it.id);return{...it,rpcUrls:{...it.rpcUrls,default:{...it.rpcUrls.default,http:[tt,...it.rpcUrls.default.http]},public:{...it.rpcUrls.public,http:[tt,...((rt=it.rpcUrls.public)==null?void 0:rt.http)||[]]}}}}const supportedChains={[ChainId.Mainnet]:enhanceChain(mainnet),[ChainId.Goerli]:enhanceChain(goerli),[ChainId.Polygon]:enhanceChain(polygon),[ChainId.Mumbai]:enhanceChain(polygonMumbai),[ChainId.Avalanche]:enhanceChain(avalanche),[ChainId.AvalancheFujiTestnet]:enhanceChain(avalancheFuji),[ChainId.Fantom]:enhanceChain(fantom),[ChainId.FantomTestnet]:enhanceChain(fantomTestnet),[ChainId.Arbitrum]:enhanceChain(arbitrum),[ChainId.ArbitrumGoerli]:enhanceChain(arbitrumGoerli),[ChainId.Optimism]:enhanceChain(optimism),[ChainId.OptimismGoerli]:enhanceChain(optimismGoerli),[ChainId.BinanceSmartChainMainnet]:enhanceChain(bsc),[ChainId.BinanceSmartChainTestnet]:enhanceChain(bscTestnet)};Object.values(supportedChains);const EIP1271_ABI=["function isValidSignature(bytes32 _message, bytes _signature) public view returns (bytes4)"],EIP1271_MAGICVALUE="0x1626ba7e",checkContractWalletSignature=async(it,tt,rt,at)=>{var ht;const st=(ht=supportedChains[at])==null?void 0:ht.rpcUrls.default.http[0];if(!st)return!1;const ot=new JsonRpcProvider$1(st),lt=new Contract(rt,EIP1271_ABI,ot),ut=hashMessage(it);try{return await lt.isValidSignature(ut,tt)===EIP1271_MAGICVALUE}catch{return!1}};var _signer=new WeakMap;class SignerWallet{constructor(tt){_defineProperty$2(this,"type","evm"),_classPrivateFieldInitSpec$1(this,_signer,{writable:!0,value:void 0}),_classPrivateFieldSet$1(this,_signer,tt)}async getAddress(){return _classPrivateFieldGet$1(this,_signer).getAddress()}async getChainId(){return _classPrivateFieldGet$1(this,_signer).getChainId()}async signMessage(tt){return await _classPrivateFieldGet$1(this,_signer).signMessage(tt)}async verifySignature(tt,rt,at,st){const ot=hashMessage(tt),lt=arrayify(ot);if(recoverAddress(lt,rt)===at)return!0;if(st!==void 0)try{return await checkContractWalletSignature(tt,rt,at,st||1)}catch{}return!1}}new SignerWallet(Wallet.createRandom()),globalThis.global=globalThis;const DEFAULT_API_KEY$1="fb52f0ca630bdd02f0d5210d9e8e3568272ac765dd0709272918eefb29d3ac9e",ThirdwebConfigContext=react.exports.createContext({chains:defaultChains$1}),ThirdwebConfigProvider=it=>{let{value:tt,children:rt}=it;return jsx(ThirdwebConfigContext.Provider,{value:tt,children:rt})};function useThirdwebConfigContext(){return react.exports.useContext(ThirdwebConfigContext)}const INITIAL_CONTEXT_VALUE={wallet:void 0,address:void 0,chainId:void 0,signer:void 0},ThirdwebConnectedWalletContext=react.exports.createContext(INITIAL_CONTEXT_VALUE),ThirdwebConnectedWalletProvider=it=>{let{signer:tt,children:rt}=it;const{chains:at,thirdwebApiKey:st,alchemyApiKey:ot,infuraApiKey:lt}=useThirdwebConfigContext(),[ut,ht]=react.exports.useState({...INITIAL_CONTEXT_VALUE,signer:tt||void 0});return react.exports.useEffect(()=>{ht(mt=>({...mt,signer:tt||void 0}))},[tt]),react.exports.useEffect(()=>{let mt=tt;return tt?Promise.all([tt.getAddress(),tt.getChainId()]).then(bt=>{let[vt,At]=bt;const xt=at.find(Tt=>Tt.chainId===At);let Et;if(xt)try{Et=getChainRPC(xt,{thirdwebApiKey:st,alchemyApiKey:ot,infuraApiKey:lt})}catch{}if(tt===mt){const Tt=new UserWallet(tt,{readonlySettings:Et?{rpcUrl:Et,chainId:At}:void 0});ht({wallet:Tt,address:vt,chainId:At,signer:tt})}}).catch(bt=>{}):ht(INITIAL_CONTEXT_VALUE),()=>{mt=void 0}},[tt,st,ot,lt]),jsx(ThirdwebConnectedWalletContext.Provider,{value:ut,children:rt})};function useThirdwebConnectedWalletContext(){return react.exports.useContext(ThirdwebConnectedWalletContext)}function useSigner$1(){return useThirdwebConnectedWalletContext().signer}const ThirdwebAuthContext=react.exports.createContext(void 0),ThirdwebAuthProvider=it=>{let{value:tt,children:rt}=it;const at=useSigner$1(),st=react.exports.useMemo(()=>{var lt;if(!tt)return;const ot={...tt,authUrl:(lt=tt.authUrl)==null?void 0:lt.replace(/\/$/,""),auth:void 0};return at&&(ot.auth=new ThirdwebAuth(new SignerWallet(at),tt.domain)),ot},[tt,at]);return jsx(ThirdwebAuthContext.Provider,{value:st,children:rt})};function useThirdwebAuthContext(){return react.exports.useContext(ThirdwebAuthContext)}const ThirdwebSDKContext=react.exports.createContext({}),WrappedThirdwebSDKProvider=it=>{let{sdkOptions:tt={},storageInterface:rt,supportedChains:at=defaultChains$1,activeChain:st,signer:ot,children:lt,thirdwebApiKey:ut,infuraApiKey:ht,alchemyApiKey:mt}=it;const bt=react.exports.useMemo(()=>{var xt,Et;return st?typeof st=="number"?st:typeof st=="string"?(Et=at.find(Tt=>Tt.slug===st))==null?void 0:Et.chainId:st.chainId:(xt=at[0])==null?void 0:xt.chainId},[st,at]),vt=react.exports.useMemo(()=>{if(typeof window>"u")return;let xt=bt;const Et=at.find(It=>It.chainId===xt);!Et&&xt!==void 0&&(console.warn(`The chainId ${xt} is not in the configured chains, please add it to the ThirdwebProvider`),xt=void 0);let Tt;if(Et&&Et.rpc.length>0)try{const It=getChainRPC(Et,{thirdwebApiKey:ut,infuraApiKey:ht,alchemyApiKey:mt});Tt={chainId:Et.chainId,rpcUrl:It}}catch{}const wt={readonlySettings:Tt,...tt,supportedChains:at};let Ct;if(xt&&(Ct=new ThirdwebSDK(xt,{...wt,infuraApiKey:ht,alchemyApiKey:mt,thirdwebApiKey:ut},rt)),!Ct)if(at.length>0)xt=at[0].chainId,Ct=new ThirdwebSDK(xt,wt,rt);else{console.error("No chains configured, please pass a chain or chains to the ThirdwebProvider");return}return Ct._chainId=xt,Ct},[bt,mt,ht,at,tt,rt,ut]);react.exports.useEffect(()=>{vt&&vt._chainId===bt&&(ot?vt.updateSignerOrProvider(ot):bt&&vt.updateSignerOrProvider(bt))},[vt,vt==null?void 0:vt._chainId,ot,bt]);const At=react.exports.useMemo(()=>({sdk:vt&&vt._chainId===bt?vt:void 0,_inProvider:!0}),[bt,vt]);return jsx(ThirdwebSDKContext.Provider,{value:At,children:lt})},ThirdwebSDKProvider=it=>{let{signer:tt,children:rt,queryClient:at,authConfig:st,supportedChains:ot=defaultChains$1,activeChain:lt,thirdwebApiKey:ut=DEFAULT_API_KEY$1,alchemyApiKey:ht,infuraApiKey:mt,...bt}=it;const vt=react.exports.useMemo(()=>!lt||typeof lt=="string"||typeof lt=="number"?ot:[...ot,lt].filter((xt,Et,Tt)=>Et===Tt.findIndex(wt=>wt.chainId===xt.chainId)),[ot,lt]);return jsx(ThirdwebConfigProvider,{value:{chains:vt,thirdwebApiKey:ut,alchemyApiKey:ht,infuraApiKey:mt},children:jsx(ThirdwebConnectedWalletProvider,{signer:tt,children:jsx(QueryClientProviderWithDefault,{queryClient:at,children:jsx(ThirdwebAuthProvider,{value:st,children:jsx(WrappedThirdwebSDKProvider,{signer:tt,supportedChains:vt,thirdwebApiKey:ut,alchemyApiKey:ht,infuraApiKey:mt,activeChain:lt,...bt,children:rt})})})})})};function useSDKContext(){const it=react.exports.useContext(ThirdwebSDKContext);return invariant$1(it._inProvider,"useSDK must be called from within a ThirdwebProvider, did you forget to wrap your app in a <ThirdwebProvider />?"),it}function useSDK(){const{sdk:it}=useSDKContext();return it}function useSDKChainId(){const it=useSDK();return it==null?void 0:it._chainId}const TW_CACHE_KEY_PREFIX="tw-cache";function enforceCachePrefix(it){return[TW_CACHE_KEY_PREFIX,...it.filter(tt=>typeof tt!="string"||tt!==TW_CACHE_KEY_PREFIX)]}function createContractCacheKey(){let it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:AddressZero,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return enforceCachePrefix(["contract",it,...tt])}function createCacheKeyWithNetwork(it,tt){return enforceCachePrefix(cacheKeys.network.active(tt).concat(it))}const cacheKeys={auth:{user:()=>enforceCachePrefix(["user"])},network:{active:it=>enforceCachePrefix(["chainId",it])},wallet:{balance:(it,tt,rt)=>enforceCachePrefix(createCacheKeyWithNetwork(enforceCachePrefix(["balance",{walletAddress:tt,tokenAddress:rt}]),it))},contract:{read:(it,tt)=>createContractCacheKey(it,["read",tt]),type:it=>createContractCacheKey(it,["contract-type"]),compilerMetadata:it=>createContractCacheKey(it,["publish-metadata"]),typeAndCompilerMetadata:it=>createContractCacheKey(it,["contract-type-and-metadata"]),metadata:it=>createContractCacheKey(it,["metadata"]),extractFunctions:it=>createContractCacheKey(it,["extractFunctions"]),call:(it,tt,rt)=>createContractCacheKey(it,["call",tt,rt]),app:{get:it=>createContractCacheKey(it,["appURI"])},events:{getEvents:(it,tt)=>createContractCacheKey(it,["events","getEvents",{eventName:tt}]),getAllEvents:it=>createContractCacheKey(it,["events","getAllEvents"])},nft:{get:(it,tt)=>createContractCacheKey(it,["get",{tokenId:tt}]),balanceOf:(it,tt,rt)=>createContractCacheKey(it,["balanceOf",{owner:tt,tokenId:rt}]),query:{all:(it,tt)=>createContractCacheKey(it,tt?["query","all",tt]:["query","all"]),totalCirculatingSupply:it=>createContractCacheKey(it,["query","totalCirculatingSupply"]),totalCount:it=>createContractCacheKey(it,["query","totalCount"]),owned:{all:(it,tt)=>createContractCacheKey(it,["query","owned","all",tt])}},drop:{getAllUnclaimed:(it,tt)=>createContractCacheKey(it,tt?["getAllUnclaimed",tt]:["getAllUnclaimed"]),getAllClaimed:(it,tt)=>createContractCacheKey(it,tt?["getAllClaimed",tt]:["getAllClaimed"]),totalUnclaimedSupply:it=>createContractCacheKey(it,["totalUnclaimedSupply"]),totalClaimedSupply:it=>createContractCacheKey(it,["totalClaimedSupply"]),revealer:{getBatchesToReveal:(it,tt)=>createContractCacheKey(it,tt?["getBatchesToReveal",tt]:["getBatchesToReveal"])}}},token:{totalSupply:it=>createContractCacheKey(it,["totalSupply"]),decimals:it=>createContractCacheKey(it,["decimals"]),balanceOf:(it,tt)=>createContractCacheKey(it,["balanceOf",{walletAddress:tt}])},marketplace:{getListing:(it,tt)=>createContractCacheKey(it,["getListing",{listingId:tt}]),getAllListings:(it,tt)=>createContractCacheKey(it,tt?["getAllListings",tt]:["getAllListings"]),getTotalCount:it=>createContractCacheKey(it,["getTotalCount"]),getActiveListings:(it,tt)=>createContractCacheKey(it,tt?["getActiveListings",tt]:["getActiveListings"]),getBidBufferBps:it=>createContractCacheKey(it,["getBidBufferBps"]),auction:{getWinningBid:(it,tt)=>createContractCacheKey(it,["auction","getWinningBid",{listingId:tt}]),getWinner:(it,tt)=>createContractCacheKey(it,["auction","getWinner",{listingId:tt}])},directListings:{getAll:(it,tt)=>createContractCacheKey(it,tt?["getAllDirectListings",tt]:["getAllDirectListings"]),getAllValid:(it,tt)=>createContractCacheKey(it,tt?["getAllValidDirectListings",tt]:["getAllValidDirectListings"]),getListing:(it,tt)=>createContractCacheKey(it,["getListing",{listingId:tt}]),getTotalCount:it=>createContractCacheKey(it,["getTotalDirectListingsCount"])},englishAuctions:{getAll:(it,tt)=>createContractCacheKey(it,tt?["getAllEnglishAuctions",tt]:["getAllEnglishAuctions"]),getAllValid:(it,tt)=>createContractCacheKey(it,tt?["getAllEValidEnglishAuctions",tt]:["getAllEValidEnglishAuctions"]),getAuction:(it,tt)=>createContractCacheKey(it,["getAuction",{auctionId:tt}]),getWinningBid:(it,tt)=>createContractCacheKey(it,["getWinningBid",{auctionId:tt}]),getTotalCount:it=>createContractCacheKey(it,["getTotalEnglishAuctionsCount"])}}},extensions:{claimConditions:{getActive:(it,tt,rt)=>createContractCacheKey(it,tt?["claimConditions","getActive",{tokenId:tt},rt]:["claimConditions","getActive",rt]),getAll:(it,tt,rt)=>createContractCacheKey(it,tt?["claimConditions","getAll",{tokenId:tt},rt]:["claimConditions","getAll",rt]),getClaimerProofs:(it,tt)=>createContractCacheKey(it,tt?["claimConditions","getClaimerProofs",{tokenId:tt}]:["claimConditions","getClaimerProofs"]),getClaimIneligibilityReasons:(it,tt,rt)=>createContractCacheKey(it,rt?["claimConditions","getIneligibilityReasons",{tokenId:rt},tt]:["claimConditions","getIneligibilityReasons",tt]),useActiveClaimConditionForWallet:(it,tt,rt)=>createContractCacheKey(it,rt?["claimConditions","useActiveClaimConditionForWallet",{tokenId:rt,walletAddress:tt},,]:["claimConditions","getIneligibilityReasons",{walletAddress:tt}])},sales:{getRecipient:it=>createContractCacheKey(it,["sales"])},royalties:{getDefaultRoyaltyInfo:it=>createContractCacheKey(it,["royalties"])},platformFees:{get:it=>createContractCacheKey(it,["platformFees"])},metadata:{get:it=>createContractCacheKey(it,["metadata"])},roles:{getAll:it=>createContractCacheKey(it,["roles"]),get:(it,tt)=>createContractCacheKey(it,["roles",{role:tt}])}}};function useQueryWithNetwork(it,tt,rt){const at=useSDKChainId(),st={...rt,enabled:!!(at&&(rt==null?void 0:rt.enabled))};return useQuery(createCacheKeyWithNetwork(it,at),tt,st)}function useBalance(it){const tt=useAddress(),{wallet:rt,address:at,chainId:st}=useThirdwebConnectedWalletContext(),ot=react.exports.useMemo(()=>cacheKeys.wallet.balance(st||-1,at,it),[st,it,at]);return useQuery(ot,()=>rt==null?void 0:rt.balance(it),{enabled:!!rt&&!!tt&&!!st,retry:!0,keepPreviousData:!1})}function useAddress(){return useThirdwebConnectedWalletContext().address}function useChainId(){return useThirdwebConnectedWalletContext().chainId}async function fetchContractType(it,tt){if(!it||!tt)return null;try{return await tt.resolveContractType(it)}catch(rt){return console.error("failed to resolve contract type",rt),"custom"}}function useContractType(it){const tt=useSDK();return useQueryWithNetwork(cacheKeys.contract.type(it),()=>fetchContractType(it,tt),{cacheTime:1/0,staleTime:1/0,enabled:!!it&&!!tt})}const contractType={cacheKey:(it,tt)=>createCacheKeyWithNetwork(cacheKeys.contract.type(it),tt),useQuery:useContractType,fetchQuery:fetchContractType};function fetchCompilerMetadata(it,tt){if(!it||!tt)return null;try{return tt.getPublisher().fetchCompilerMetadataFromAddress(it)}catch{return null}}function useCompilerMetadata(it){const tt=useSDK();return useQueryWithNetwork(cacheKeys.contract.compilerMetadata(it),()=>fetchCompilerMetadata(it,tt),{cacheTime:1/0,staleTime:1/0,enabled:!!it&&!!tt})}const compilerMetadata={cacheKey:(it,tt)=>createCacheKeyWithNetwork(cacheKeys.contract.compilerMetadata(it),tt),useQuery:useCompilerMetadata,fetchQuery:fetchCompilerMetadata};function useContract(it,tt){const rt=useSDK(),at=useQueryClient(),st=useSDKChainId(),ot=useAddress(),lt=useChainId(),ut=rt==null?void 0:rt._constructedAt,ht=useQueryWithNetwork(neverPersist(["contract-instance",it,{wallet:ot,walletChainId:lt,sdkTimestamp:ut}]),async()=>{var mt;if(requiredParamInvariant(it,"contract address is required"),invariant$1(rt,"SDK not initialized"),invariant$1(st,"active chain id is required"),!tt||tt==="custom"){const bt=await at.fetchQuery(contractType.cacheKey(it,st),()=>contractType.fetchQuery(it,rt),{cacheTime:1/0,staleTime:1/0});let vt;return bt==="custom"&&(vt=(mt=await at.fetchQuery(compilerMetadata.cacheKey(it,st),()=>compilerMetadata.fetchQuery(it,rt),{cacheTime:1/0,staleTime:1/0,retry:0}))==null?void 0:mt.abi),invariant$1(bt,"failed to resolve contract type"),rt.getContract(it,vt||bt)}return rt.getContract(it,tt)},{keepPreviousData:!0,cacheTime:1/0,staleTime:1/0,enabled:!!it&&!!rt&&!!st,retry:0});return{...ht,data:ht.data,contract:ht.data}}function useLogin(){const it=useQueryClient(),tt=useThirdwebAuthContext(),rt=useMutation({mutationFn:async at=>{invariant$1(tt,"Please specify an authConfig in the ThirdwebProvider"),invariant$1(tt.auth,"You need a connected wallet to login."),invariant$1(tt.authUrl,"Please specify an authUrl in the authConfig.");const st=await tt.auth.login(at),ot=await fetch(`${tt.authUrl}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:st}),credentials:"include"});if(!ot.ok){const lt=await ot.json();throw lt.error?new Error(lt.error):new Error(`Login request failed with status code ${ot.status}`)}it.invalidateQueries(cacheKeys.auth.user())}});return{login:at=>rt.mutateAsync(at),isLoading:rt.isLoading}}function useLogout(){const it=useQueryClient(),tt=useThirdwebAuthContext(),rt=useMutation({mutationFn:async()=>{invariant$1(tt,"Please specify an authConfig in the ThirdwebProvider"),invariant$1(tt.authUrl,"Please specify an authUrl in the authConfig."),await fetch(`${tt.authUrl}/logout`,{method:"POST"}),it.invalidateQueries(cacheKeys.auth.user())}});return{logout:rt.mutateAsync,isLoading:rt.isLoading}}function useUser(){const it=useThirdwebAuthContext(),{data:tt,isLoading:rt}=useQuery(cacheKeys.auth.user(),async()=>(invariant$1(it,"Please specify an authConfig in the ThirdwebProvider"),invariant$1(it.authUrl,"Please specify an authUrl in the authConfig."),await(await fetch(`${it.authUrl}/user`,{credentials:"include"})).json()),{enabled:!!it});return{user:tt,isLoggedIn:!!tt,isLoading:rt}}var eventemitter3$2={exports:{}};(function(it){var tt=Object.prototype.hasOwnProperty,rt="~";function at(){}Object.create&&(at.prototype=Object.create(null),new at().__proto__||(rt=!1));function st(ht,mt,bt){this.fn=ht,this.context=mt,this.once=bt||!1}function ot(ht,mt,bt,vt,At){if(typeof bt!="function")throw new TypeError("The listener must be a function");var xt=new st(bt,vt||ht,At),Et=rt?rt+mt:mt;return ht._events[Et]?ht._events[Et].fn?ht._events[Et]=[ht._events[Et],xt]:ht._events[Et].push(xt):(ht._events[Et]=xt,ht._eventsCount++),ht}function lt(ht,mt){--ht._eventsCount===0?ht._events=new at:delete ht._events[mt]}function ut(){this._events=new at,this._eventsCount=0}ut.prototype.eventNames=function(){var mt=[],bt,vt;if(this._eventsCount===0)return mt;for(vt in bt=this._events)tt.call(bt,vt)&&mt.push(rt?vt.slice(1):vt);return Object.getOwnPropertySymbols?mt.concat(Object.getOwnPropertySymbols(bt)):mt},ut.prototype.listeners=function(mt){var bt=rt?rt+mt:mt,vt=this._events[bt];if(!vt)return[];if(vt.fn)return[vt.fn];for(var At=0,xt=vt.length,Et=new Array(xt);At<xt;At++)Et[At]=vt[At].fn;return Et},ut.prototype.listenerCount=function(mt){var bt=rt?rt+mt:mt,vt=this._events[bt];return vt?vt.fn?1:vt.length:0},ut.prototype.emit=function(mt,bt,vt,At,xt,Et){var Tt=rt?rt+mt:mt;if(!this._events[Tt])return!1;var wt=this._events[Tt],Ct=arguments.length,It,St;if(wt.fn){switch(wt.once&&this.removeListener(mt,wt.fn,void 0,!0),Ct){case 1:return wt.fn.call(wt.context),!0;case 2:return wt.fn.call(wt.context,bt),!0;case 3:return wt.fn.call(wt.context,bt,vt),!0;case 4:return wt.fn.call(wt.context,bt,vt,At),!0;case 5:return wt.fn.call(wt.context,bt,vt,At,xt),!0;case 6:return wt.fn.call(wt.context,bt,vt,At,xt,Et),!0}for(St=1,It=new Array(Ct-1);St<Ct;St++)It[St-1]=arguments[St];wt.fn.apply(wt.context,It)}else{var Rt=wt.length,Dt;for(St=0;St<Rt;St++)switch(wt[St].once&&this.removeListener(mt,wt[St].fn,void 0,!0),Ct){case 1:wt[St].fn.call(wt[St].context);break;case 2:wt[St].fn.call(wt[St].context,bt);break;case 3:wt[St].fn.call(wt[St].context,bt,vt);break;case 4:wt[St].fn.call(wt[St].context,bt,vt,At);break;default:if(!It)for(Dt=1,It=new Array(Ct-1);Dt<Ct;Dt++)It[Dt-1]=arguments[Dt];wt[St].fn.apply(wt[St].context,It)}}return!0},ut.prototype.on=function(mt,bt,vt){return ot(this,mt,bt,vt,!1)},ut.prototype.once=function(mt,bt,vt){return ot(this,mt,bt,vt,!0)},ut.prototype.removeListener=function(mt,bt,vt,At){var xt=rt?rt+mt:mt;if(!this._events[xt])return this;if(!bt)return lt(this,xt),this;var Et=this._events[xt];if(Et.fn)Et.fn===bt&&(!At||Et.once)&&(!vt||Et.context===vt)&&lt(this,xt);else{for(var Tt=0,wt=[],Ct=Et.length;Tt<Ct;Tt++)(Et[Tt].fn!==bt||At&&!Et[Tt].once||vt&&Et[Tt].context!==vt)&&wt.push(Et[Tt]);wt.length?this._events[xt]=wt.length===1?wt[0]:wt:lt(this,xt)}return this},ut.prototype.removeAllListeners=function(mt){var bt;return mt?(bt=rt?rt+mt:mt,this._events[bt]&&lt(this,bt)):(this._events=new at,this._eventsCount=0),this},ut.prototype.off=ut.prototype.removeListener,ut.prototype.addListener=ut.prototype.on,ut.prefixed=rt,ut.EventEmitter=ut,it.exports=ut})(eventemitter3$2);const EventEmitter$4=eventemitter3$2.exports;function _checkPrivateRedeclaration(it,tt){if(tt.has(it))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldInitSpec(it,tt,rt){_checkPrivateRedeclaration(it,tt),tt.set(it,rt)}function _defineProperty$1(it,tt,rt){return tt in it?Object.defineProperty(it,tt,{value:rt,enumerable:!0,configurable:!0,writable:!0}):it[tt]=rt,it}function _classApplyDescriptorGet(it,tt){return tt.get?tt.get.call(it):tt.value}function _classExtractFieldDescriptor(it,tt,rt){if(!tt.has(it))throw new TypeError("attempted to "+rt+" private field on non-instance");return tt.get(it)}function _classPrivateFieldGet(it,tt){var rt=_classExtractFieldDescriptor(it,tt,"get");return _classApplyDescriptorGet(it,rt)}function _classApplyDescriptorSet(it,tt,rt){if(tt.set)tt.set.call(it,rt);else{if(!tt.writable)throw new TypeError("attempted to set read only private field");tt.value=rt}}function _classPrivateFieldSet(it,tt,rt){var at=_classExtractFieldDescriptor(it,tt,"set");return _classApplyDescriptorSet(it,at,rt),rt}const chain={mainnet:{id:1,name:"Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://etherscan.io"}]},ropsten:{id:3,name:"Ropsten",nativeCurrency:{name:"Ropsten Ether",symbol:"ropETH",decimals:18},rpcUrls:["https://ropsten.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://ropsten.etherscan.io"}],testnet:!0},rinkeby:{id:4,name:"Rinkeby",nativeCurrency:{name:"Rinkeby Ether",symbol:"rETH",decimals:18},rpcUrls:["https://rinkeby.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://rinkeby.etherscan.io"}],testnet:!0},gnosis:{id:100,name:"Gnosis Chain",nativeCurrency:{name:"xDai",symbol:"xDAI",decimals:18},rpcUrls:["https://rpc.gnosischain.com"],blockExplorers:[{name:"Blockscout",url:"https://blockscout.com"}]},goerli:{id:5,name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"gETH",decimals:18},rpcUrls:["https://goerli.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://goerli.etherscan.io"}],testnet:!0},kovan:{id:42,name:"Kovan",nativeCurrency:{name:"Kovan Ether",symbol:"kETH",decimals:18},rpcUrls:["https://kovan.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://kovan.etherscan.io"}],testnet:!0},optimism:{id:10,name:"Optimism",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.optimism.io"],blockExplorers:[{name:"Etherscan",url:"https://optimistic.etherscan.io"}]},optimismKovan:{id:69,name:"Optimism Kovan",nativeCurrency:{name:"Kovan Ether",symbol:"KOR",decimals:18},rpcUrls:["https://kovan.optimism.io"],blockExplorers:[{name:"Etherscan",url:"https://kovan-optimistic.etherscan.io"}],testnet:!0},polygonMainnet:{id:137,name:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com","https://rpc-mainnet.matic.network","https://matic-mainnet.chainstacklabs.com","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet-full-rpc.bwarelabs.com"],blockExplorers:[{name:"Polygonscan",url:"https://polygonscan.com"}]},polygonTestnetMumbai:{id:80001,name:"Mumbai",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://matic-mumbai.chainstacklabs.com","https://rpc-mumbai.maticvigil.com","https://matic-testnet-archive-rpc.bwarelabs.com"],blockExplorers:[{name:"Polygonscan",url:"https://mumbai.polygonscan.com"}],testnet:!0},arbitrumOne:{id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"AETH",decimals:18},rpcUrls:["https://arb1.arbitrum.io/rpc"],blockExplorers:[{name:"Arbiscan",url:"https://arbiscan.io"},{name:"Arbitrum Explorer",url:"https://explorer.arbitrum.io"}]},arbitrumRinkeby:{id:421611,name:"Arbitrum Rinkeby",nativeCurrency:{name:"Arbitrum Rinkeby Ether",symbol:"ARETH",decimals:18},rpcUrls:["https://rinkeby.arbitrum.io/rpc"],blockExplorers:[{name:"Arbitrum Explorer",url:"https://rinkeby-explorer.arbitrum.io"}],testnet:!0},avalanche:{id:43114,name:"Avalanche Mainnet",nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},rpcUrls:["https://api.avax.network/ext/bc/C/rpc"],blockExplorers:[{name:"SnowTrace",url:"https://snowtrace.io"}],testnet:!1},avalancheFuji:{id:43113,name:"Avalanche Fuji Testnet",nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},rpcUrls:["https://api.avax-test.network/ext/bc/C/rpc"],blockExplorers:[{name:"SnowTrace",url:"https://testnet.snowtrace.io"}],testnet:!0},localhost:{id:1337,name:"Localhost",rpcUrls:["https://127.0.0.1:8545"]},hardhat:{id:31337,name:"Hardhat",rpcUrls:["http://127.0.0.1:8545"]}},allChains=Object.values(chain),defaultChains=[chain.mainnet,chain.ropsten,chain.rinkeby,chain.goerli,chain.kovan];chain.gnosis,chain.optimism,chain.optimismKovan,chain.polygonMainnet,chain.polygonTestnetMumbai,chain.arbitrumOne,chain.arbitrumRinkeby,chain.localhost,chain.hardhat;const normalizeChainId=it=>typeof it=="string"?Number.parseInt(it,it.trim().substring(0,2)==="0x"?16:10):it;class AddChainError extends Error{constructor(){super(...arguments),_defineProperty$1(this,"name","AddChainError"),_defineProperty$1(this,"message","Error adding chain")}}class ChainNotConfiguredError extends Error{constructor(){super(...arguments),_defineProperty$1(this,"name","ChainNotConfigured"),_defineProperty$1(this,"message","Chain not configured")}}class ConnectorAlreadyConnectedError extends Error{constructor(){super(...arguments),_defineProperty$1(this,"name","ConnectorAlreadyConnectedError"),_defineProperty$1(this,"message","Connector already connected")}}class ConnectorNotFoundError extends Error{constructor(){super(...arguments),_defineProperty$1(this,"name","ConnectorNotFoundError"),_defineProperty$1(this,"message","Connector not found")}}class SwitchChainError extends Error{constructor(){super(...arguments),_defineProperty$1(this,"name","SwitchChainError"),_defineProperty$1(this,"message","Error switching chain")}}class UserRejectedRequestError extends Error{constructor(){super(...arguments),_defineProperty$1(this,"name","UserRejectedRequestError"),_defineProperty$1(this,"message","User rejected request")}}class Connector$1 extends EventEmitter$4{constructor(tt){let{chains:rt=defaultChains,options:at}=tt;super(),_defineProperty$1(this,"id",void 0),_defineProperty$1(this,"name",void 0),_defineProperty$1(this,"chains",void 0),_defineProperty$1(this,"options",void 0),_defineProperty$1(this,"ready",void 0),this.chains=rt,this.options=at}isChainUnsupported(tt){return!this.chains.some(rt=>rt.id===tt)}}var utils$7={};const require$$0$3=getAugmentedNamespace(lib_esm$b),require$$1$1=getAugmentedNamespace(lib_esm$f),require$$2$2=getAugmentedNamespace(lib_esm$d),require$$3$2=getAugmentedNamespace(lib_esm$8),require$$4=getAugmentedNamespace(lib_esm$j),require$$5=getAugmentedNamespace(lib_esm$c),require$$6=getAugmentedNamespace(lib_esm$6),require$$7$1=getAugmentedNamespace(lib_esm$4),require$$8=getAugmentedNamespace(lib_esm$h),require$$9=getAugmentedNamespace(lib_esm$k),require$$10=getAugmentedNamespace(lib_esm$7),require$$11=getAugmentedNamespace(lib_esm$1),require$$12=getAugmentedNamespace(lib_esm$5),require$$13=getAugmentedNamespace(lib_esm$i),require$$14=getAugmentedNamespace(lib_esm$g),require$$15=getAugmentedNamespace(lib_esm$a),require$$16=getAugmentedNamespace(lib_esm$e),require$$17=getAugmentedNamespace(lib_esm$9),require$$18=getAugmentedNamespace(lib_esm),require$$19=getAugmentedNamespace(lib_esm$3),require$$20=getAugmentedNamespace(lib_esm$2);(function(it){var tt=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(kt,zt,Nt,Mt){Mt===void 0&&(Mt=Nt),Object.defineProperty(kt,Mt,{enumerable:!0,get:function(){return zt[Nt]}})}:function(kt,zt,Nt,Mt){Mt===void 0&&(Mt=Nt),kt[Mt]=zt[Nt]}),rt=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(kt,zt){Object.defineProperty(kt,"default",{enumerable:!0,value:zt})}:function(kt,zt){kt.default=zt}),at=commonjsGlobal&&commonjsGlobal.__importStar||function(kt){if(kt&&kt.__esModule)return kt;var zt={};if(kt!=null)for(var Nt in kt)Nt!=="default"&&Object.prototype.hasOwnProperty.call(kt,Nt)&&tt(zt,kt,Nt);return rt(zt,kt),zt};Object.defineProperty(it,"__esModule",{value:!0}),it.formatBytes32String=it.Utf8ErrorFuncs=it.toUtf8String=it.toUtf8CodePoints=it.toUtf8Bytes=it._toEscapedUtf8String=it.nameprep=it.hexDataSlice=it.hexDataLength=it.hexZeroPad=it.hexValue=it.hexStripZeros=it.hexConcat=it.isHexString=it.hexlify=it.base64=it.base58=it.TransactionDescription=it.LogDescription=it.Interface=it.SigningKey=it.HDNode=it.defaultPath=it.isBytesLike=it.isBytes=it.zeroPad=it.stripZeros=it.concat=it.arrayify=it.shallowCopy=it.resolveProperties=it.getStatic=it.defineReadOnly=it.deepCopy=it.checkProperties=it.poll=it.fetchJson=it._fetchData=it.RLP=it.Logger=it.checkResultErrors=it.FormatTypes=it.ParamType=it.FunctionFragment=it.EventFragment=it.ErrorFragment=it.ConstructorFragment=it.Fragment=it.defaultAbiCoder=it.AbiCoder=void 0,it.Indexed=it.Utf8ErrorReason=it.UnicodeNormalizationForm=it.SupportedAlgorithm=it.mnemonicToSeed=it.isValidMnemonic=it.entropyToMnemonic=it.mnemonicToEntropy=it.getAccountPath=it.verifyTypedData=it.verifyMessage=it.recoverPublicKey=it.computePublicKey=it.recoverAddress=it.computeAddress=it.getJsonWalletAddress=it.TransactionTypes=it.serializeTransaction=it.parseTransaction=it.accessListify=it.joinSignature=it.splitSignature=it.soliditySha256=it.solidityKeccak256=it.solidityPack=it.shuffled=it.randomBytes=it.sha512=it.sha256=it.ripemd160=it.keccak256=it.computeHmac=it.commify=it.parseUnits=it.formatUnits=it.parseEther=it.formatEther=it.isAddress=it.getCreate2Address=it.getContractAddress=it.getIcapAddress=it.getAddress=it._TypedDataEncoder=it.id=it.isValidName=it.namehash=it.hashMessage=it.dnsEncode=it.parseBytes32String=void 0;var st=require$$0$3;Object.defineProperty(it,"AbiCoder",{enumerable:!0,get:function(){return st.AbiCoder}}),Object.defineProperty(it,"checkResultErrors",{enumerable:!0,get:function(){return st.checkResultErrors}}),Object.defineProperty(it,"ConstructorFragment",{enumerable:!0,get:function(){return st.ConstructorFragment}}),Object.defineProperty(it,"defaultAbiCoder",{enumerable:!0,get:function(){return st.defaultAbiCoder}}),Object.defineProperty(it,"ErrorFragment",{enumerable:!0,get:function(){return st.ErrorFragment}}),Object.defineProperty(it,"EventFragment",{enumerable:!0,get:function(){return st.EventFragment}}),Object.defineProperty(it,"FormatTypes",{enumerable:!0,get:function(){return st.FormatTypes}}),Object.defineProperty(it,"Fragment",{enumerable:!0,get:function(){return st.Fragment}}),Object.defineProperty(it,"FunctionFragment",{enumerable:!0,get:function(){return st.FunctionFragment}}),Object.defineProperty(it,"Indexed",{enumerable:!0,get:function(){return st.Indexed}}),Object.defineProperty(it,"Interface",{enumerable:!0,get:function(){return st.Interface}}),Object.defineProperty(it,"LogDescription",{enumerable:!0,get:function(){return st.LogDescription}}),Object.defineProperty(it,"ParamType",{enumerable:!0,get:function(){return st.ParamType}}),Object.defineProperty(it,"TransactionDescription",{enumerable:!0,get:function(){return st.TransactionDescription}});var ot=require$$1$1;Object.defineProperty(it,"getAddress",{enumerable:!0,get:function(){return ot.getAddress}}),Object.defineProperty(it,"getCreate2Address",{enumerable:!0,get:function(){return ot.getCreate2Address}}),Object.defineProperty(it,"getContractAddress",{enumerable:!0,get:function(){return ot.getContractAddress}}),Object.defineProperty(it,"getIcapAddress",{enumerable:!0,get:function(){return ot.getIcapAddress}}),Object.defineProperty(it,"isAddress",{enumerable:!0,get:function(){return ot.isAddress}});var lt=at(require$$2$2);it.base64=lt;var ut=require$$3$2;Object.defineProperty(it,"base58",{enumerable:!0,get:function(){return ut.Base58}});var ht=require$$4;Object.defineProperty(it,"arrayify",{enumerable:!0,get:function(){return ht.arrayify}}),Object.defineProperty(it,"concat",{enumerable:!0,get:function(){return ht.concat}}),Object.defineProperty(it,"hexConcat",{enumerable:!0,get:function(){return ht.hexConcat}}),Object.defineProperty(it,"hexDataSlice",{enumerable:!0,get:function(){return ht.hexDataSlice}}),Object.defineProperty(it,"hexDataLength",{enumerable:!0,get:function(){return ht.hexDataLength}}),Object.defineProperty(it,"hexlify",{enumerable:!0,get:function(){return ht.hexlify}}),Object.defineProperty(it,"hexStripZeros",{enumerable:!0,get:function(){return ht.hexStripZeros}}),Object.defineProperty(it,"hexValue",{enumerable:!0,get:function(){return ht.hexValue}}),Object.defineProperty(it,"hexZeroPad",{enumerable:!0,get:function(){return ht.hexZeroPad}}),Object.defineProperty(it,"isBytes",{enumerable:!0,get:function(){return ht.isBytes}}),Object.defineProperty(it,"isBytesLike",{enumerable:!0,get:function(){return ht.isBytesLike}}),Object.defineProperty(it,"isHexString",{enumerable:!0,get:function(){return ht.isHexString}}),Object.defineProperty(it,"joinSignature",{enumerable:!0,get:function(){return ht.joinSignature}}),Object.defineProperty(it,"zeroPad",{enumerable:!0,get:function(){return ht.zeroPad}}),Object.defineProperty(it,"splitSignature",{enumerable:!0,get:function(){return ht.splitSignature}}),Object.defineProperty(it,"stripZeros",{enumerable:!0,get:function(){return ht.stripZeros}});var mt=require$$5;Object.defineProperty(it,"_TypedDataEncoder",{enumerable:!0,get:function(){return mt._TypedDataEncoder}}),Object.defineProperty(it,"dnsEncode",{enumerable:!0,get:function(){return mt.dnsEncode}}),Object.defineProperty(it,"hashMessage",{enumerable:!0,get:function(){return mt.hashMessage}}),Object.defineProperty(it,"id",{enumerable:!0,get:function(){return mt.id}}),Object.defineProperty(it,"isValidName",{enumerable:!0,get:function(){return mt.isValidName}}),Object.defineProperty(it,"namehash",{enumerable:!0,get:function(){return mt.namehash}});var bt=require$$6;Object.defineProperty(it,"defaultPath",{enumerable:!0,get:function(){return bt.defaultPath}}),Object.defineProperty(it,"entropyToMnemonic",{enumerable:!0,get:function(){return bt.entropyToMnemonic}}),Object.defineProperty(it,"getAccountPath",{enumerable:!0,get:function(){return bt.getAccountPath}}),Object.defineProperty(it,"HDNode",{enumerable:!0,get:function(){return bt.HDNode}}),Object.defineProperty(it,"isValidMnemonic",{enumerable:!0,get:function(){return bt.isValidMnemonic}}),Object.defineProperty(it,"mnemonicToEntropy",{enumerable:!0,get:function(){return bt.mnemonicToEntropy}}),Object.defineProperty(it,"mnemonicToSeed",{enumerable:!0,get:function(){return bt.mnemonicToSeed}});var vt=require$$7$1;Object.defineProperty(it,"getJsonWalletAddress",{enumerable:!0,get:function(){return vt.getJsonWalletAddress}});var At=require$$8;Object.defineProperty(it,"keccak256",{enumerable:!0,get:function(){return At.keccak256}});var xt=require$$9;Object.defineProperty(it,"Logger",{enumerable:!0,get:function(){return xt.Logger}});var Et=require$$10;Object.defineProperty(it,"computeHmac",{enumerable:!0,get:function(){return Et.computeHmac}}),Object.defineProperty(it,"ripemd160",{enumerable:!0,get:function(){return Et.ripemd160}}),Object.defineProperty(it,"sha256",{enumerable:!0,get:function(){return Et.sha256}}),Object.defineProperty(it,"sha512",{enumerable:!0,get:function(){return Et.sha512}});var Tt=require$$11;Object.defineProperty(it,"solidityKeccak256",{enumerable:!0,get:function(){return Tt.keccak256}}),Object.defineProperty(it,"solidityPack",{enumerable:!0,get:function(){return Tt.pack}}),Object.defineProperty(it,"soliditySha256",{enumerable:!0,get:function(){return Tt.sha256}});var wt=require$$12;Object.defineProperty(it,"randomBytes",{enumerable:!0,get:function(){return wt.randomBytes}}),Object.defineProperty(it,"shuffled",{enumerable:!0,get:function(){return wt.shuffled}});var Ct=require$$13;Object.defineProperty(it,"checkProperties",{enumerable:!0,get:function(){return Ct.checkProperties}}),Object.defineProperty(it,"deepCopy",{enumerable:!0,get:function(){return Ct.deepCopy}}),Object.defineProperty(it,"defineReadOnly",{enumerable:!0,get:function(){return Ct.defineReadOnly}}),Object.defineProperty(it,"getStatic",{enumerable:!0,get:function(){return Ct.getStatic}}),Object.defineProperty(it,"resolveProperties",{enumerable:!0,get:function(){return Ct.resolveProperties}}),Object.defineProperty(it,"shallowCopy",{enumerable:!0,get:function(){return Ct.shallowCopy}});var It=at(require$$14);it.RLP=It;var St=require$$15;Object.defineProperty(it,"computePublicKey",{enumerable:!0,get:function(){return St.computePublicKey}}),Object.defineProperty(it,"recoverPublicKey",{enumerable:!0,get:function(){return St.recoverPublicKey}}),Object.defineProperty(it,"SigningKey",{enumerable:!0,get:function(){return St.SigningKey}});var Rt=require$$16;Object.defineProperty(it,"formatBytes32String",{enumerable:!0,get:function(){return Rt.formatBytes32String}}),Object.defineProperty(it,"nameprep",{enumerable:!0,get:function(){return Rt.nameprep}}),Object.defineProperty(it,"parseBytes32String",{enumerable:!0,get:function(){return Rt.parseBytes32String}}),Object.defineProperty(it,"_toEscapedUtf8String",{enumerable:!0,get:function(){return Rt._toEscapedUtf8String}}),Object.defineProperty(it,"toUtf8Bytes",{enumerable:!0,get:function(){return Rt.toUtf8Bytes}}),Object.defineProperty(it,"toUtf8CodePoints",{enumerable:!0,get:function(){return Rt.toUtf8CodePoints}}),Object.defineProperty(it,"toUtf8String",{enumerable:!0,get:function(){return Rt.toUtf8String}}),Object.defineProperty(it,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return Rt.Utf8ErrorFuncs}});var Dt=require$$17;Object.defineProperty(it,"accessListify",{enumerable:!0,get:function(){return Dt.accessListify}}),Object.defineProperty(it,"computeAddress",{enumerable:!0,get:function(){return Dt.computeAddress}}),Object.defineProperty(it,"parseTransaction",{enumerable:!0,get:function(){return Dt.parse}}),Object.defineProperty(it,"recoverAddress",{enumerable:!0,get:function(){return Dt.recoverAddress}}),Object.defineProperty(it,"serializeTransaction",{enumerable:!0,get:function(){return Dt.serialize}}),Object.defineProperty(it,"TransactionTypes",{enumerable:!0,get:function(){return Dt.TransactionTypes}});var Wt=require$$18;Object.defineProperty(it,"commify",{enumerable:!0,get:function(){return Wt.commify}}),Object.defineProperty(it,"formatEther",{enumerable:!0,get:function(){return Wt.formatEther}}),Object.defineProperty(it,"parseEther",{enumerable:!0,get:function(){return Wt.parseEther}}),Object.defineProperty(it,"formatUnits",{enumerable:!0,get:function(){return Wt.formatUnits}}),Object.defineProperty(it,"parseUnits",{enumerable:!0,get:function(){return Wt.parseUnits}});var qt=require$$19;Object.defineProperty(it,"verifyMessage",{enumerable:!0,get:function(){return qt.verifyMessage}}),Object.defineProperty(it,"verifyTypedData",{enumerable:!0,get:function(){return qt.verifyTypedData}});var Vt=require$$20;Object.defineProperty(it,"_fetchData",{enumerable:!0,get:function(){return Vt._fetchData}}),Object.defineProperty(it,"fetchJson",{enumerable:!0,get:function(){return Vt.fetchJson}}),Object.defineProperty(it,"poll",{enumerable:!0,get:function(){return Vt.poll}});var Yt=require$$10;Object.defineProperty(it,"SupportedAlgorithm",{enumerable:!0,get:function(){return Yt.SupportedAlgorithm}});var jt=require$$16;Object.defineProperty(it,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return jt.UnicodeNormalizationForm}}),Object.defineProperty(it,"Utf8ErrorReason",{enumerable:!0,get:function(){return jt.Utf8ErrorReason}})})(utils$7);const getInjectedName=it=>it?it.isBraveWallet?"Brave Wallet":it.isMetaMask?"MetaMask":it.isCoinbaseWallet?"Coinbase Wallet":it.isFrame?"Frame":it.isTally?"Tally":"Injected":"Injected",shimKey="wagmi.shimDisconnect";var _provider$2=new WeakMap;class InjectedConnector extends Connector$1{constructor(tt){super({...tt,options:tt==null?void 0:tt.options}),_defineProperty$1(this,"id","injected"),_defineProperty$1(this,"name",void 0),_defineProperty$1(this,"ready",typeof window<"u"&&!!window.ethereum),_classPrivateFieldInitSpec(this,_provider$2,{writable:!0,value:void 0}),_defineProperty$1(this,"onAccountsChanged",at=>{at.length===0?this.emit("disconnect"):this.emit("change",{account:utils$7.getAddress(at[0])})}),_defineProperty$1(this,"onChainChanged",at=>{const st=normalizeChainId(at),ot=this.isChainUnsupported(st);this.emit("change",{chain:{id:st,unsupported:ot}})}),_defineProperty$1(this,"onDisconnect",()=>{var at;this.emit("disconnect"),(at=this.options)!==null&&at!==void 0&&at.shimDisconnect&&typeof localStorage<"u"&&localStorage.removeItem(shimKey)});let rt="Injected";typeof window<"u"&&(rt=getInjectedName(window.ethereum)),this.name=rt}async connect(){try{var tt;const at=this.getProvider();if(!at)throw new ConnectorNotFoundError;if(at.on){var rt;at.on("accountsChanged",this.onAccountsChanged),at.on("chainChanged",this.onChainChanged),(rt=this.options)!==null&&rt!==void 0&&rt.shimChainChangedDisconnect||at.on("disconnect",this.onDisconnect)}const st=await this.getAccount(),ot=await this.getChainId(),lt=this.isChainUnsupported(ot);return(tt=this.options)!==null&&tt!==void 0&&tt.shimDisconnect&&typeof localStorage<"u"&&localStorage.setItem(shimKey,"true"),{account:st,chain:{id:ot,unsupported:lt},provider:at}}catch(at){throw at.code===4001?new UserRejectedRequestError:at}}async disconnect(){var tt;const rt=this.getProvider();!(rt!=null&&rt.removeListener)||(rt.removeListener("accountsChanged",this.onAccountsChanged),rt.removeListener("chainChanged",this.onChainChanged),rt.removeListener("disconnect",this.onDisconnect),(tt=this.options)!==null&&tt!==void 0&&tt.shimDisconnect&&typeof localStorage<"u"&&localStorage.removeItem(shimKey))}async getAccount(){const tt=this.getProvider();if(!tt)throw new ConnectorNotFoundError;const rt=await tt.request({method:"eth_requestAccounts"});return utils$7.getAddress(rt[0])}async getChainId(){const tt=this.getProvider();if(!tt)throw new ConnectorNotFoundError;return await tt.request({method:"eth_chainId"}).then(normalizeChainId)}getProvider(){return typeof window<"u"&&!!window.ethereum&&_classPrivateFieldSet(this,_provider$2,window.ethereum),_classPrivateFieldGet(this,_provider$2)}async getSigner(){const tt=this.getProvider(),rt=await this.getAccount();return new Web3Provider(tt).getSigner(rt)}async isAuthorized(){try{var tt;if((tt=this.options)!==null&&tt!==void 0&&tt.shimDisconnect&&typeof localStorage<"u"&&!localStorage.getItem(shimKey))return!1;const rt=this.getProvider();if(!rt)throw new ConnectorNotFoundError;return!!(await rt.request({method:"eth_accounts"}))[0]}catch{return!1}}async switchChain(tt){const rt=this.getProvider();if(!rt)throw new ConnectorNotFoundError;const at=utils$7.hexValue(tt);try{return await rt.request({method:"wallet_switchEthereumChain",params:[{chainId:at}]}),[...this.chains,...allChains].find(lt=>lt.id===tt)}catch(ot){if(ot.code===4902)try{var st;const lt=this.chains.find(ut=>ut.id===tt);if(!lt)throw new ChainNotConfiguredError;return await rt.request({method:"wallet_addEthereumChain",params:[{chainId:at,chainName:lt.name,nativeCurrency:lt.nativeCurrency,rpcUrls:lt.rpcUrls,blockExplorerUrls:(st=lt.blockExplorers)===null||st===void 0?void 0:st.map(ut=>ut.url)}]}),lt}catch{throw new AddChainError}else throw ot.code===4001?new UserRejectedRequestError:new SwitchChainError}}async watchAsset(tt){let{address:rt,decimals:at=18,image:st,symbol:ot}=tt;const lt=this.getProvider();if(!lt)throw new ConnectorNotFoundError;await lt.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:rt,decimals:at,image:st,symbol:ot}}})}}const useProvider=()=>{const{state:it}=useContext();return it.provider},useCacheBuster=()=>useContext().state.cacheBuster,useCancel=()=>{const it=react.exports.useRef(null);return react.exports.useEffect(()=>()=>{var rt;return(rt=it.current)===null||rt===void 0?void 0:rt.call(it)},[]),react.exports.useCallback(rt=>{var at;(at=it.current)===null||at===void 0||at.call(it),rt&&(it.current=rt)},[])},useLocalStorage=function(it){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const[rt,at]=react.exports.useState(()=>{if(typeof localStorage>"u")return tt;const ot=localStorage.getItem(it);try{return ot?JSON.parse(ot):tt}catch(lt){return console.warn(lt),tt}}),st=react.exports.useCallback(ot=>{if(ot!==rt)if(at(ot),ot===null?localStorage.removeItem(it):localStorage.setItem(it,JSON.stringify(ot)),ot===null)localStorage.removeItem(it);else try{localStorage.setItem(it,JSON.stringify(ot))}catch(lt){console.error(lt)}},[rt,at,it]);return[rt,st]},initialState$g={loading:!1},useEnsAvatar=function(){let{addressOrName:it,skip:tt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const rt=useCacheBuster(),at=useProvider(),[st,ot]=react.exports.useState(initialState$g),lt=useCancel(),ut=react.exports.useCallback(async ht=>{let mt=!1;lt(()=>{mt=!0});try{const bt=ht!=null?ht:{addressOrName:it};if(!bt.addressOrName)throw new Error("addressOrName is required");ot(At=>({...At,error:void 0,loading:!0}));const vt=await at.getAvatar(bt.addressOrName);return mt||ot(At=>({...At,avatar:vt,loading:!1})),vt}catch(bt){const vt=bt;return mt||ot(At=>({...At,error:vt,loading:!1})),vt}},[it,lt,at]);return react.exports.useEffect(()=>{if(!(tt||!it))return ut({addressOrName:it}),lt},[it,rt,lt,tt]),[{data:st.avatar,loading:st.loading,error:st.error},ut]},initialState$f={loading:!1},useEnsLookup=function(){let{address:it,skip:tt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const rt=useCacheBuster(),at=useProvider(),[st,ot]=react.exports.useState(initialState$f),lt=useCancel(),ut=react.exports.useCallback(async ht=>{let mt=!1;lt(()=>{mt=!0});try{const bt=ht!=null?ht:{address:it};if(!bt.address)throw new Error("address is required");ot(At=>({...At,error:void 0,loading:!0}));const vt=await at.lookupAddress(bt.address);return mt||ot(At=>({...At,ens:vt,loading:!1})),{data:vt,error:void 0}}catch(bt){const vt=bt;return mt||ot(At=>({...At,error:vt,loading:!1})),{data:void 0,error:vt}}},[it,lt,at]);return react.exports.useEffect(()=>{if(!(tt||!it))return ut({address:it}),lt},[it,rt,lt,tt]),[{data:st.ens,loading:st.loading,error:st.error},ut]},useAccount=function(){var it;let{fetchEns:tt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{state:rt,setState:at}=useContext(),st=(it=rt.data)===null||it===void 0?void 0:it.account,[{data:ot,error:lt,loading:ut}]=useEnsLookup({address:st,skip:!tt}),[{data:ht,error:mt,loading:bt}]=useEnsAvatar({addressOrName:ot,skip:!tt||!ot}),vt=react.exports.useCallback(()=>{at(Et=>{var Tt;return(Tt=Et.connector)===null||Tt===void 0||Tt.disconnect(),{cacheBuster:Et.cacheBuster+1}})},[at]),At=lt||mt,xt=ut||bt;return[{data:st?{address:st,connector:rt.connector,ens:ot?{avatar:ht,name:ot}:void 0}:void 0,error:At,loading:xt},vt]},initialState$9={loading:!1},useConnect$1=()=>{var it;const{state:tt,setState:rt,setLastUsedConnector:at}=useContext(),[st,ot]=react.exports.useState(initialState$9),lt=useCancel(),ut=react.exports.useCallback(async ht=>{let mt=!1;lt(()=>{mt=!0});try{const bt=tt==null?void 0:tt.connector;if(ht===bt)throw new ConnectorAlreadyConnectedError;ot(At=>({...At,loading:!0,connector:ht,error:void 0}));const vt=await ht.connect();return mt||(rt(At=>({...At,connector:ht,data:vt})),at(ht.name),ot(At=>({...At,loading:!1}))),{data:vt,error:void 0}}catch(bt){const vt=bt;return mt||ot(At=>({...At,connector:void 0,error:vt,loading:!1})),{data:void 0,error:vt}}},[lt,tt.connector,rt,at]);return react.exports.useEffect(()=>(ot(ht=>({...ht,connector:tt.connector,error:void 0})),lt),[lt,tt.connector]),[{data:{connected:!!((it=tt.data)!==null&&it!==void 0&&it.account),connector:st.connector,connectors:tt.connectors},error:st.error,loading:st.loading||tt.connecting},ut]},initialState$8={loading:!1},useNetwork$1=()=>{var it,tt,rt;const{state:{connector:at,data:st}}=useContext(),[ot,lt]=react.exports.useState(initialState$8),ut=st==null||(it=st.chain)===null||it===void 0?void 0:it.id,ht=st==null||(tt=st.chain)===null||tt===void 0?void 0:tt.unsupported,mt=(rt=at==null?void 0:at.chains)!==null&&rt!==void 0?rt:[],bt=[...mt,...allChains].find(xt=>xt.id===ut),vt=useCancel(),At=react.exports.useCallback(async xt=>{let Et=!1;if(vt(()=>{Et=!0}),!(at!=null&&at.switchChain))return{data:void 0,error:new SwitchChainError};try{lt(wt=>({...wt,error:void 0,loading:!0}));const Tt=await at.switchChain(xt);return Et||lt(wt=>({...wt,loading:!1})),{data:Tt,error:void 0}}catch(Tt){const wt=Tt;return Et||lt(Ct=>({...Ct,error:wt,loading:!1})),{data:void 0,error:wt}}},[vt,at]);return[{data:{chain:ut?{...bt,id:ut,unsupported:ht}:void 0,chains:mt},error:ot.error,loading:ot.loading},at!=null&&at.switchChain?At:void 0]},initialState$7={data:void 0,error:void 0,loading:!1},useSigner=function(){let{skip:it}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const tt=useCacheBuster(),{state:{connector:rt}}=useContext(),[at,st]=react.exports.useState(initialState$7),ot=useCancel(),lt=react.exports.useCallback(async()=>{let ut=!1;ot(()=>{ut=!0});try{st(mt=>({...mt,error:void 0,loading:!0}));const ht=await(rt==null?void 0:rt.getSigner());return ut||st(mt=>({...mt,data:ht,loading:!1})),ht}catch(ht){const mt=ht;ut||st(bt=>({...bt,data:void 0,error:mt,loading:!1}))}},[ot,rt]);return react.exports.useEffect(()=>{if(!it)return lt(),ot},[tt,rt,ot,it]),[at,lt]},Context$1=react.exports.createContext(null),Provider=it=>{var tt,rt,at,st,ot,lt;let{autoConnect:ut=!1,children:ht,connectors:mt=[new InjectedConnector],connectorStorageKey:bt="wagmi.wallet",provider:vt=getDefaultProvider(),webSocketProvider:At}=it;const[xt,Et]=useLocalStorage(bt),[Tt,wt]=react.exports.useState({cacheBuster:1,connecting:ut}),Ct=react.exports.useMemo(()=>{var Dt,Wt;return typeof mt!="function"?mt:mt({chainId:(Dt=Tt.data)===null||Dt===void 0||(Wt=Dt.chain)===null||Wt===void 0?void 0:Wt.id})},[mt,(tt=Tt.data)===null||tt===void 0||(rt=tt.chain)===null||rt===void 0?void 0:rt.id]),It=react.exports.useMemo(()=>{var Dt,Wt;return typeof vt!="function"?vt:vt({chainId:(Dt=Tt.data)===null||Dt===void 0||(Wt=Dt.chain)===null||Wt===void 0?void 0:Wt.id,connector:Tt.connector})},[vt,(at=Tt.data)===null||at===void 0||(st=at.chain)===null||st===void 0?void 0:st.id,Tt.connector]),St=react.exports.useMemo(()=>{var Dt,Wt;if(!!At)return typeof At!="function"?At:At({chainId:(Dt=Tt.data)===null||Dt===void 0||(Wt=Dt.chain)===null||Wt===void 0?void 0:Wt.id,connector:Tt.connector})},[At,(ot=Tt.data)===null||ot===void 0||(lt=ot.chain)===null||lt===void 0?void 0:lt.id,Tt.connector]);react.exports.useEffect(()=>{!ut||(async()=>{wt(Wt=>({...Wt,connecting:!0}));const Dt=xt?[...Ct].sort(Wt=>Wt.name===xt?-1:1):Ct;for(const Wt of Dt){if(!Wt.ready||!Wt.isAuthorized||!await Wt.isAuthorized())continue;const Vt=await Wt.connect();wt(Yt=>({...Yt,connector:Wt,data:Vt}));break}wt(Wt=>({...Wt,connecting:!1}))})()},[]),react.exports.useEffect(()=>()=>{!Tt.connector||Tt.connector.disconnect()},[Tt.connector]),react.exports.useEffect(()=>{if(!Tt.connector)return;const Dt=Vt=>wt(Yt=>({...Yt,cacheBuster:Yt.cacheBuster+1,data:{...Yt.data,...Vt}})),Wt=()=>wt({cacheBuster:1}),qt=Vt=>wt(Yt=>({...Yt,error:Vt}));return Tt.connector.on("change",Dt),Tt.connector.on("disconnect",Wt),Tt.connector.on("error",qt),()=>{!Tt.connector||(Tt.connector.off("change",Dt),Tt.connector.off("disconnect",Wt),Tt.connector.off("error",qt))}},[Tt.connector]);const Rt={state:{cacheBuster:Tt.cacheBuster,connecting:Tt.connecting,connectors:Ct,connector:Tt.connector,data:Tt.data,provider:It,webSocketProvider:St},setState:wt,setLastUsedConnector:Et};return react.exports.createElement(Context$1.Provider,{value:Rt},ht)},useContext=()=>{const it=react.exports.useContext(Context$1);if(!it)throw Error("Must be used within Provider");return it};var dist$3={},CoinbaseWalletSDK$1={},walletLogo$1={};Object.defineProperty(walletLogo$1,"__esModule",{value:!0}),walletLogo$1.walletLogo=void 0;const walletLogo=(it,tt)=>{let rt;switch(it){case"standard":return rt=tt,`data:image/svg+xml,%3Csvg width='${tt}' height='${rt}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return rt=tt,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${tt}' height='${rt}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return rt=(.1*tt).toFixed(2),`data:image/svg+xml,%3Csvg width='${tt}' height='${rt}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return rt=(.25*tt).toFixed(2),`data:image/svg+xml,%3Csvg width='${tt}' height='${rt}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return rt=(.1*tt).toFixed(2),`data:image/svg+xml,%3Csvg width='${tt}' height='${rt}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return rt=(.25*tt).toFixed(2),`data:image/svg+xml,%3Csvg width='${tt}' height='${rt}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return rt=tt,`data:image/svg+xml,%3Csvg width='${tt}' height='${rt}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};walletLogo$1.walletLogo=walletLogo;var ScopedLocalStorage$1={};Object.defineProperty(ScopedLocalStorage$1,"__esModule",{value:!0}),ScopedLocalStorage$1.ScopedLocalStorage=void 0;class ScopedLocalStorage{constructor(tt){this.scope=tt}setItem(tt,rt){localStorage.setItem(this.scopedKey(tt),rt)}getItem(tt){return localStorage.getItem(this.scopedKey(tt))}removeItem(tt){localStorage.removeItem(this.scopedKey(tt))}clear(){const tt=this.scopedKey(""),rt=[];for(let at=0;at<localStorage.length;at++){const st=localStorage.key(at);typeof st=="string"&&st.startsWith(tt)&&rt.push(st)}rt.forEach(at=>localStorage.removeItem(at))}scopedKey(tt){return`${this.scope}:${tt}`}}ScopedLocalStorage$1.ScopedLocalStorage=ScopedLocalStorage;var CoinbaseWalletProvider$1={},safeEventEmitter$1={},events={exports:{}},R$3=typeof Reflect=="object"?Reflect:null,ReflectApply$1=R$3&&typeof R$3.apply=="function"?R$3.apply:function it(tt,rt,at){return Function.prototype.apply.call(tt,rt,at)},ReflectOwnKeys;R$3&&typeof R$3.ownKeys=="function"?ReflectOwnKeys=R$3.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(tt){return Object.getOwnPropertyNames(tt).concat(Object.getOwnPropertySymbols(tt))}:ReflectOwnKeys=function(tt){return Object.getOwnPropertyNames(tt)};function ProcessEmitWarning(it){console&&console.warn&&console.warn(it)}var NumberIsNaN=Number.isNaN||function it(tt){return tt!==tt};function EventEmitter$3(){EventEmitter$3.init.call(this)}events.exports=EventEmitter$3,events.exports.once=once$2,EventEmitter$3.EventEmitter=EventEmitter$3,EventEmitter$3.prototype._events=void 0,EventEmitter$3.prototype._eventsCount=0,EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(it){if(typeof it!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof it)}Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(it){if(typeof it!="number"||it<0||NumberIsNaN(it))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+it+".");defaultMaxListeners=it}}),EventEmitter$3.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter$3.prototype.setMaxListeners=function it(tt){if(typeof tt!="number"||tt<0||NumberIsNaN(tt))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+tt+".");return this._maxListeners=tt,this};function _getMaxListeners(it){return it._maxListeners===void 0?EventEmitter$3.defaultMaxListeners:it._maxListeners}EventEmitter$3.prototype.getMaxListeners=function it(){return _getMaxListeners(this)},EventEmitter$3.prototype.emit=function it(tt){for(var rt=[],at=1;at<arguments.length;at++)rt.push(arguments[at]);var st=tt==="error",ot=this._events;if(ot!==void 0)st=st&&ot.error===void 0;else if(!st)return!1;if(st){var lt;if(rt.length>0&&(lt=rt[0]),lt instanceof Error)throw lt;var ut=new Error("Unhandled error."+(lt?" ("+lt.message+")":""));throw ut.context=lt,ut}var ht=ot[tt];if(ht===void 0)return!1;if(typeof ht=="function")ReflectApply$1(ht,this,rt);else for(var mt=ht.length,bt=arrayClone$2(ht,mt),at=0;at<mt;++at)ReflectApply$1(bt[at],this,rt);return!0};function _addListener(it,tt,rt,at){var st,ot,lt;if(checkListener(rt),ot=it._events,ot===void 0?(ot=it._events=Object.create(null),it._eventsCount=0):(ot.newListener!==void 0&&(it.emit("newListener",tt,rt.listener?rt.listener:rt),ot=it._events),lt=ot[tt]),lt===void 0)lt=ot[tt]=rt,++it._eventsCount;else if(typeof lt=="function"?lt=ot[tt]=at?[rt,lt]:[lt,rt]:at?lt.unshift(rt):lt.push(rt),st=_getMaxListeners(it),st>0&&lt.length>st&&!lt.warned){lt.warned=!0;var ut=new Error("Possible EventEmitter memory leak detected. "+lt.length+" "+String(tt)+" listeners added. Use emitter.setMaxListeners() to increase limit");ut.name="MaxListenersExceededWarning",ut.emitter=it,ut.type=tt,ut.count=lt.length,ProcessEmitWarning(ut)}return it}EventEmitter$3.prototype.addListener=function it(tt,rt){return _addListener(this,tt,rt,!1)},EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener,EventEmitter$3.prototype.prependListener=function it(tt,rt){return _addListener(this,tt,rt,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(it,tt,rt){var at={fired:!1,wrapFn:void 0,target:it,type:tt,listener:rt},st=onceWrapper.bind(at);return st.listener=rt,at.wrapFn=st,st}EventEmitter$3.prototype.once=function it(tt,rt){return checkListener(rt),this.on(tt,_onceWrap(this,tt,rt)),this},EventEmitter$3.prototype.prependOnceListener=function it(tt,rt){return checkListener(rt),this.prependListener(tt,_onceWrap(this,tt,rt)),this},EventEmitter$3.prototype.removeListener=function it(tt,rt){var at,st,ot,lt,ut;if(checkListener(rt),st=this._events,st===void 0)return this;if(at=st[tt],at===void 0)return this;if(at===rt||at.listener===rt)--this._eventsCount===0?this._events=Object.create(null):(delete st[tt],st.removeListener&&this.emit("removeListener",tt,at.listener||rt));else if(typeof at!="function"){for(ot=-1,lt=at.length-1;lt>=0;lt--)if(at[lt]===rt||at[lt].listener===rt){ut=at[lt].listener,ot=lt;break}if(ot<0)return this;ot===0?at.shift():spliceOne(at,ot),at.length===1&&(st[tt]=at[0]),st.removeListener!==void 0&&this.emit("removeListener",tt,ut||rt)}return this},EventEmitter$3.prototype.off=EventEmitter$3.prototype.removeListener,EventEmitter$3.prototype.removeAllListeners=function it(tt){var rt,at,st;if(at=this._events,at===void 0)return this;if(at.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):at[tt]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete at[tt]),this;if(arguments.length===0){var ot=Object.keys(at),lt;for(st=0;st<ot.length;++st)lt=ot[st],lt!=="removeListener"&&this.removeAllListeners(lt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(rt=at[tt],typeof rt=="function")this.removeListener(tt,rt);else if(rt!==void 0)for(st=rt.length-1;st>=0;st--)this.removeListener(tt,rt[st]);return this};function _listeners(it,tt,rt){var at=it._events;if(at===void 0)return[];var st=at[tt];return st===void 0?[]:typeof st=="function"?rt?[st.listener||st]:[st]:rt?unwrapListeners(st):arrayClone$2(st,st.length)}EventEmitter$3.prototype.listeners=function it(tt){return _listeners(this,tt,!0)},EventEmitter$3.prototype.rawListeners=function it(tt){return _listeners(this,tt,!1)},EventEmitter$3.listenerCount=function(it,tt){return typeof it.listenerCount=="function"?it.listenerCount(tt):listenerCount.call(it,tt)},EventEmitter$3.prototype.listenerCount=listenerCount;function listenerCount(it){var tt=this._events;if(tt!==void 0){var rt=tt[it];if(typeof rt=="function")return 1;if(rt!==void 0)return rt.length}return 0}EventEmitter$3.prototype.eventNames=function it(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone$2(it,tt){for(var rt=new Array(tt),at=0;at<tt;++at)rt[at]=it[at];return rt}function spliceOne(it,tt){for(;tt+1<it.length;tt++)it[tt]=it[tt+1];it.pop()}function unwrapListeners(it){for(var tt=new Array(it.length),rt=0;rt<tt.length;++rt)tt[rt]=it[rt].listener||it[rt];return tt}function once$2(it,tt){return new Promise(function(rt,at){function st(lt){it.removeListener(tt,ot),at(lt)}function ot(){typeof it.removeListener=="function"&&it.removeListener("error",st),rt([].slice.call(arguments))}eventTargetAgnosticAddListener(it,tt,ot,{once:!0}),tt!=="error"&&addErrorHandlerIfEventEmitter(it,st,{once:!0})})}function addErrorHandlerIfEventEmitter(it,tt,rt){typeof it.on=="function"&&eventTargetAgnosticAddListener(it,"error",tt,rt)}function eventTargetAgnosticAddListener(it,tt,rt,at){if(typeof it.on=="function")at.once?it.once(tt,rt):it.on(tt,rt);else if(typeof it.addEventListener=="function")it.addEventListener(tt,function st(ot){at.once&&it.removeEventListener(tt,st),rt(ot)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof it)}Object.defineProperty(safeEventEmitter$1,"__esModule",{value:!0});const events_1=events.exports;function safeApply$1(it,tt,rt){try{Reflect.apply(it,tt,rt)}catch(at){setTimeout(()=>{throw at})}}function arrayClone$1(it){const tt=it.length,rt=new Array(tt);for(let at=0;at<tt;at+=1)rt[at]=it[at];return rt}class SafeEventEmitter$4 extends events_1.EventEmitter{emit(tt,...rt){let at=tt==="error";const st=this._events;if(st!==void 0)at=at&&st.error===void 0;else if(!at)return!1;if(at){let lt;if(rt.length>0&&([lt]=rt),lt instanceof Error)throw lt;const ut=new Error(`Unhandled error.${lt?` (${lt.message})`:""}`);throw ut.context=lt,ut}const ot=st[tt];if(ot===void 0)return!1;if(typeof ot=="function")safeApply$1(ot,this,rt);else{const lt=ot.length,ut=arrayClone$1(ot);for(let ht=0;ht<lt;ht+=1)safeApply$1(ut[ht],this,rt)}return!0}}safeEventEmitter$1.default=SafeEventEmitter$4;var dist$2={},classes$1={},fastSafeStringify=stringify$3;stringify$3.default=stringify$3,stringify$3.stable=deterministicStringify,stringify$3.stableStringify=deterministicStringify;var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE="[Circular]",arr=[],replacerStack=[];function defaultOptions$1(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function stringify$3(it,tt,rt,at){typeof at>"u"&&(at=defaultOptions$1()),decirc(it,"",0,[],void 0,0,at);var st;try{replacerStack.length===0?st=JSON.stringify(it,tt,rt):st=JSON.stringify(it,replaceGetterValues(tt),rt)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var ot=arr.pop();ot.length===4?Object.defineProperty(ot[0],ot[1],ot[3]):ot[0][ot[1]]=ot[2]}}return st}function setReplace(it,tt,rt,at){var st=Object.getOwnPropertyDescriptor(at,rt);st.get!==void 0?st.configurable?(Object.defineProperty(at,rt,{value:it}),arr.push([at,rt,tt,st])):replacerStack.push([tt,rt,it]):(at[rt]=it,arr.push([at,rt,tt]))}function decirc(it,tt,rt,at,st,ot,lt){ot+=1;var ut;if(typeof it=="object"&&it!==null){for(ut=0;ut<at.length;ut++)if(at[ut]===it){setReplace(CIRCULAR_REPLACE_NODE,it,tt,st);return}if(typeof lt.depthLimit<"u"&&ot>lt.depthLimit){setReplace(LIMIT_REPLACE_NODE,it,tt,st);return}if(typeof lt.edgesLimit<"u"&&rt+1>lt.edgesLimit){setReplace(LIMIT_REPLACE_NODE,it,tt,st);return}if(at.push(it),Array.isArray(it))for(ut=0;ut<it.length;ut++)decirc(it[ut],ut,ut,at,it,ot,lt);else{var ht=Object.keys(it);for(ut=0;ut<ht.length;ut++){var mt=ht[ut];decirc(it[mt],mt,ut,at,it,ot,lt)}}at.pop()}}function compareFunction(it,tt){return it<tt?-1:it>tt?1:0}function deterministicStringify(it,tt,rt,at){typeof at>"u"&&(at=defaultOptions$1());var st=deterministicDecirc(it,"",0,[],void 0,0,at)||it,ot;try{replacerStack.length===0?ot=JSON.stringify(st,tt,rt):ot=JSON.stringify(st,replaceGetterValues(tt),rt)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var lt=arr.pop();lt.length===4?Object.defineProperty(lt[0],lt[1],lt[3]):lt[0][lt[1]]=lt[2]}}return ot}function deterministicDecirc(it,tt,rt,at,st,ot,lt){ot+=1;var ut;if(typeof it=="object"&&it!==null){for(ut=0;ut<at.length;ut++)if(at[ut]===it){setReplace(CIRCULAR_REPLACE_NODE,it,tt,st);return}try{if(typeof it.toJSON=="function")return}catch{return}if(typeof lt.depthLimit<"u"&&ot>lt.depthLimit){setReplace(LIMIT_REPLACE_NODE,it,tt,st);return}if(typeof lt.edgesLimit<"u"&&rt+1>lt.edgesLimit){setReplace(LIMIT_REPLACE_NODE,it,tt,st);return}if(at.push(it),Array.isArray(it))for(ut=0;ut<it.length;ut++)deterministicDecirc(it[ut],ut,ut,at,it,ot,lt);else{var ht={},mt=Object.keys(it).sort(compareFunction);for(ut=0;ut<mt.length;ut++){var bt=mt[ut];deterministicDecirc(it[bt],bt,ut,at,it,ot,lt),ht[bt]=it[bt]}if(typeof st<"u")arr.push([st,tt,it]),st[tt]=ht;else return ht}at.pop()}}function replaceGetterValues(it){return it=typeof it<"u"?it:function(tt,rt){return rt},function(tt,rt){if(replacerStack.length>0)for(var at=0;at<replacerStack.length;at++){var st=replacerStack[at];if(st[1]===tt&&st[0]===rt){rt=st[2],replacerStack.splice(at,1);break}}return it.call(this,tt,rt)}}Object.defineProperty(classes$1,"__esModule",{value:!0}),classes$1.EthereumProviderError=classes$1.EthereumRpcError=void 0;const fast_safe_stringify_1$1=fastSafeStringify;class EthereumRpcError$1 extends Error{constructor(tt,rt,at){if(!Number.isInteger(tt))throw new Error('"code" must be an integer.');if(!rt||typeof rt!="string")throw new Error('"message" must be a nonempty string.');super(rt),this.code=tt,at!==void 0&&(this.data=at)}serialize(){const tt={code:this.code,message:this.message};return this.data!==void 0&&(tt.data=this.data),this.stack&&(tt.stack=this.stack),tt}toString(){return fast_safe_stringify_1$1.default(this.serialize(),stringifyReplacer$1,2)}}classes$1.EthereumRpcError=EthereumRpcError$1;class EthereumProviderError$1 extends EthereumRpcError$1{constructor(tt,rt,at){if(!isValidEthProviderCode$1(tt))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(tt,rt,at)}}classes$1.EthereumProviderError=EthereumProviderError$1;function isValidEthProviderCode$1(it){return Number.isInteger(it)&&it>=1e3&&it<=4999}function stringifyReplacer$1(it,tt){if(tt!=="[Circular]")return tt}var utils$6={},errorConstants$1={};Object.defineProperty(errorConstants$1,"__esModule",{value:!0}),errorConstants$1.errorValues=errorConstants$1.errorCodes=void 0,errorConstants$1.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},errorConstants$1.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.serializeError=it.isValidCode=it.getMessageFromCode=it.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const tt=errorConstants$1,rt=classes$1,at=tt.errorCodes.rpc.internal,st="Unspecified error message. This is a bug, please report it.",ot={code:at,message:lt(at)};it.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function lt(At,xt=st){if(Number.isInteger(At)){const Et=At.toString();if(vt(tt.errorValues,Et))return tt.errorValues[Et].message;if(mt(At))return it.JSON_RPC_SERVER_ERROR_MESSAGE}return xt}it.getMessageFromCode=lt;function ut(At){if(!Number.isInteger(At))return!1;const xt=At.toString();return!!(tt.errorValues[xt]||mt(At))}it.isValidCode=ut;function ht(At,{fallbackError:xt=ot,shouldIncludeStack:Et=!1}={}){var Tt,wt;if(!xt||!Number.isInteger(xt.code)||typeof xt.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(At instanceof rt.EthereumRpcError)return At.serialize();const Ct={};if(At&&typeof At=="object"&&!Array.isArray(At)&&vt(At,"code")&&ut(At.code)){const St=At;Ct.code=St.code,St.message&&typeof St.message=="string"?(Ct.message=St.message,vt(St,"data")&&(Ct.data=St.data)):(Ct.message=lt(Ct.code),Ct.data={originalError:bt(At)})}else{Ct.code=xt.code;const St=(Tt=At)===null||Tt===void 0?void 0:Tt.message;Ct.message=St&&typeof St=="string"?St:xt.message,Ct.data={originalError:bt(At)}}const It=(wt=At)===null||wt===void 0?void 0:wt.stack;return Et&&At&&It&&typeof It=="string"&&(Ct.stack=It),Ct}it.serializeError=ht;function mt(At){return At>=-32099&&At<=-32e3}function bt(At){return At&&typeof At=="object"&&!Array.isArray(At)?Object.assign({},At):At}function vt(At,xt){return Object.prototype.hasOwnProperty.call(At,xt)}}(utils$6);var errors$1={};Object.defineProperty(errors$1,"__esModule",{value:!0}),errors$1.ethErrors=void 0;const classes_1$1=classes$1,utils_1$1=utils$6,error_constants_1$1=errorConstants$1;errors$1.ethErrors={rpc:{parse:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.parse,it),invalidRequest:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.invalidRequest,it),invalidParams:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.invalidParams,it),methodNotFound:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.methodNotFound,it),internal:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.internal,it),server:it=>{if(!it||typeof it!="object"||Array.isArray(it))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:tt}=it;if(!Number.isInteger(tt)||tt>-32005||tt<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getEthJsonRpcError$1(tt,it)},invalidInput:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.invalidInput,it),resourceNotFound:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.resourceNotFound,it),resourceUnavailable:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.resourceUnavailable,it),transactionRejected:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.transactionRejected,it),methodNotSupported:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.methodNotSupported,it),limitExceeded:it=>getEthJsonRpcError$1(error_constants_1$1.errorCodes.rpc.limitExceeded,it)},provider:{userRejectedRequest:it=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.userRejectedRequest,it),unauthorized:it=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.unauthorized,it),unsupportedMethod:it=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.unsupportedMethod,it),disconnected:it=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.disconnected,it),chainDisconnected:it=>getEthProviderError$1(error_constants_1$1.errorCodes.provider.chainDisconnected,it),custom:it=>{if(!it||typeof it!="object"||Array.isArray(it))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:tt,message:rt,data:at}=it;if(!rt||typeof rt!="string")throw new Error('"message" must be a nonempty string');return new classes_1$1.EthereumProviderError(tt,rt,at)}}};function getEthJsonRpcError$1(it,tt){const[rt,at]=parseOpts$1(tt);return new classes_1$1.EthereumRpcError(it,rt||utils_1$1.getMessageFromCode(it),at)}function getEthProviderError$1(it,tt){const[rt,at]=parseOpts$1(tt);return new classes_1$1.EthereumProviderError(it,rt||utils_1$1.getMessageFromCode(it),at)}function parseOpts$1(it){if(it){if(typeof it=="string")return[it];if(typeof it=="object"&&!Array.isArray(it)){const{message:tt,data:rt}=it;if(tt&&typeof tt!="string")throw new Error("Must specify string message.");return[tt||void 0,rt]}}return[]}(function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.getMessageFromCode=it.serializeError=it.EthereumProviderError=it.EthereumRpcError=it.ethErrors=it.errorCodes=void 0;const tt=classes$1;Object.defineProperty(it,"EthereumRpcError",{enumerable:!0,get:function(){return tt.EthereumRpcError}}),Object.defineProperty(it,"EthereumProviderError",{enumerable:!0,get:function(){return tt.EthereumProviderError}});const rt=utils$6;Object.defineProperty(it,"serializeError",{enumerable:!0,get:function(){return rt.serializeError}}),Object.defineProperty(it,"getMessageFromCode",{enumerable:!0,get:function(){return rt.getMessageFromCode}});const at=errors$1;Object.defineProperty(it,"ethErrors",{enumerable:!0,get:function(){return at.ethErrors}});const st=errorConstants$1;Object.defineProperty(it,"errorCodes",{enumerable:!0,get:function(){return st.errorCodes}})})(dist$2);var DiagnosticLogger={};Object.defineProperty(DiagnosticLogger,"__esModule",{value:!0}),DiagnosticLogger.EVENTS=void 0,DiagnosticLogger.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var Session$1={},sha_js={exports:{}},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(it,tt){var rt=buffer$2,at=rt.Buffer;function st(lt,ut){for(var ht in lt)ut[ht]=lt[ht]}at.from&&at.alloc&&at.allocUnsafe&&at.allocUnsafeSlow?it.exports=rt:(st(rt,tt),tt.Buffer=ot);function ot(lt,ut,ht){return at(lt,ut,ht)}ot.prototype=Object.create(at.prototype),st(at,ot),ot.from=function(lt,ut,ht){if(typeof lt=="number")throw new TypeError("Argument must not be a number");return at(lt,ut,ht)},ot.alloc=function(lt,ut,ht){if(typeof lt!="number")throw new TypeError("Argument must be a number");var mt=at(lt);return ut!==void 0?typeof ht=="string"?mt.fill(ut,ht):mt.fill(ut):mt.fill(0),mt},ot.allocUnsafe=function(lt){if(typeof lt!="number")throw new TypeError("Argument must be a number");return at(lt)},ot.allocUnsafeSlow=function(lt){if(typeof lt!="number")throw new TypeError("Argument must be a number");return rt.SlowBuffer(lt)}})(safeBuffer,safeBuffer.exports);var Buffer$9=safeBuffer.exports.Buffer;function Hash$6(it,tt){this._block=Buffer$9.alloc(it),this._finalSize=tt,this._blockSize=it,this._len=0}Hash$6.prototype.update=function(it,tt){typeof it=="string"&&(tt=tt||"utf8",it=Buffer$9.from(it,tt));for(var rt=this._block,at=this._blockSize,st=it.length,ot=this._len,lt=0;lt<st;){for(var ut=ot%at,ht=Math.min(st-lt,at-ut),mt=0;mt<ht;mt++)rt[ut+mt]=it[lt+mt];ot+=ht,lt+=ht,ot%at===0&&this._update(rt)}return this._len+=st,this},Hash$6.prototype.digest=function(it){var tt=this._len%this._blockSize;this._block[tt]=128,this._block.fill(0,tt+1),tt>=this._finalSize&&(this._update(this._block),this._block.fill(0));var rt=this._len*8;if(rt<=4294967295)this._block.writeUInt32BE(rt,this._blockSize-4);else{var at=(rt&4294967295)>>>0,st=(rt-at)/4294967296;this._block.writeUInt32BE(st,this._blockSize-8),this._block.writeUInt32BE(at,this._blockSize-4)}this._update(this._block);var ot=this._hash();return it?ot.toString(it):ot},Hash$6.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash$1=Hash$6,inherits$5=inherits_browser$1.exports,Hash$5=hash$1,Buffer$8=safeBuffer.exports.Buffer,K$4=[1518500249,1859775393,-1894007588,-899497514],W$6=new Array(80);function Sha(){this.init(),this._w=W$6,Hash$5.call(this,64,56)}inherits$5(Sha,Hash$5),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(it){return it<<5|it>>>27}function rotl30$1(it){return it<<30|it>>>2}function ft$1(it,tt,rt,at){return it===0?tt&rt|~tt&at:it===2?tt&rt|tt&at|rt&at:tt^rt^at}Sha.prototype._update=function(it){for(var tt=this._w,rt=this._a|0,at=this._b|0,st=this._c|0,ot=this._d|0,lt=this._e|0,ut=0;ut<16;++ut)tt[ut]=it.readInt32BE(ut*4);for(;ut<80;++ut)tt[ut]=tt[ut-3]^tt[ut-8]^tt[ut-14]^tt[ut-16];for(var ht=0;ht<80;++ht){var mt=~~(ht/20),bt=rotl5$1(rt)+ft$1(mt,at,st,ot)+lt+tt[ht]+K$4[mt]|0;lt=ot,ot=st,st=rotl30$1(at),at=rt,rt=bt}this._a=rt+this._a|0,this._b=at+this._b|0,this._c=st+this._c|0,this._d=ot+this._d|0,this._e=lt+this._e|0},Sha.prototype._hash=function(){var it=Buffer$8.allocUnsafe(20);return it.writeInt32BE(this._a|0,0),it.writeInt32BE(this._b|0,4),it.writeInt32BE(this._c|0,8),it.writeInt32BE(this._d|0,12),it.writeInt32BE(this._e|0,16),it};var sha=Sha,inherits$4=inherits_browser$1.exports,Hash$4=hash$1,Buffer$7=safeBuffer.exports.Buffer,K$3=[1518500249,1859775393,-1894007588,-899497514],W$5=new Array(80);function Sha1(){this.init(),this._w=W$5,Hash$4.call(this,64,56)}inherits$4(Sha1,Hash$4),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(it){return it<<1|it>>>31}function rotl5(it){return it<<5|it>>>27}function rotl30(it){return it<<30|it>>>2}function ft(it,tt,rt,at){return it===0?tt&rt|~tt&at:it===2?tt&rt|tt&at|rt&at:tt^rt^at}Sha1.prototype._update=function(it){for(var tt=this._w,rt=this._a|0,at=this._b|0,st=this._c|0,ot=this._d|0,lt=this._e|0,ut=0;ut<16;++ut)tt[ut]=it.readInt32BE(ut*4);for(;ut<80;++ut)tt[ut]=rotl1(tt[ut-3]^tt[ut-8]^tt[ut-14]^tt[ut-16]);for(var ht=0;ht<80;++ht){var mt=~~(ht/20),bt=rotl5(rt)+ft(mt,at,st,ot)+lt+tt[ht]+K$3[mt]|0;lt=ot,ot=st,st=rotl30(at),at=rt,rt=bt}this._a=rt+this._a|0,this._b=at+this._b|0,this._c=st+this._c|0,this._d=ot+this._d|0,this._e=lt+this._e|0},Sha1.prototype._hash=function(){var it=Buffer$7.allocUnsafe(20);return it.writeInt32BE(this._a|0,0),it.writeInt32BE(this._b|0,4),it.writeInt32BE(this._c|0,8),it.writeInt32BE(this._d|0,12),it.writeInt32BE(this._e|0,16),it};var sha1=Sha1,inherits$3=inherits_browser$1.exports,Hash$3=hash$1,Buffer$6=safeBuffer.exports.Buffer,K$2=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$4=new Array(64);function Sha256$1(){this.init(),this._w=W$4,Hash$3.call(this,64,56)}inherits$3(Sha256$1,Hash$3),Sha256$1.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(it,tt,rt){return rt^it&(tt^rt)}function maj$1(it,tt,rt){return it&tt|rt&(it|tt)}function sigma0$1(it){return(it>>>2|it<<30)^(it>>>13|it<<19)^(it>>>22|it<<10)}function sigma1$1(it){return(it>>>6|it<<26)^(it>>>11|it<<21)^(it>>>25|it<<7)}function gamma0(it){return(it>>>7|it<<25)^(it>>>18|it<<14)^it>>>3}function gamma1(it){return(it>>>17|it<<15)^(it>>>19|it<<13)^it>>>10}Sha256$1.prototype._update=function(it){for(var tt=this._w,rt=this._a|0,at=this._b|0,st=this._c|0,ot=this._d|0,lt=this._e|0,ut=this._f|0,ht=this._g|0,mt=this._h|0,bt=0;bt<16;++bt)tt[bt]=it.readInt32BE(bt*4);for(;bt<64;++bt)tt[bt]=gamma1(tt[bt-2])+tt[bt-7]+gamma0(tt[bt-15])+tt[bt-16]|0;for(var vt=0;vt<64;++vt){var At=mt+sigma1$1(lt)+ch(lt,ut,ht)+K$2[vt]+tt[vt]|0,xt=sigma0$1(rt)+maj$1(rt,at,st)|0;mt=ht,ht=ut,ut=lt,lt=ot+At|0,ot=st,st=at,at=rt,rt=At+xt|0}this._a=rt+this._a|0,this._b=at+this._b|0,this._c=st+this._c|0,this._d=ot+this._d|0,this._e=lt+this._e|0,this._f=ut+this._f|0,this._g=ht+this._g|0,this._h=mt+this._h|0},Sha256$1.prototype._hash=function(){var it=Buffer$6.allocUnsafe(32);return it.writeInt32BE(this._a,0),it.writeInt32BE(this._b,4),it.writeInt32BE(this._c,8),it.writeInt32BE(this._d,12),it.writeInt32BE(this._e,16),it.writeInt32BE(this._f,20),it.writeInt32BE(this._g,24),it.writeInt32BE(this._h,28),it};var sha256=Sha256$1,inherits$2=inherits_browser$1.exports,Sha256=sha256,Hash$2=hash$1,Buffer$5=safeBuffer.exports.Buffer,W$3=new Array(64);function Sha224(){this.init(),this._w=W$3,Hash$2.call(this,64,56)}inherits$2(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var it=Buffer$5.allocUnsafe(28);return it.writeInt32BE(this._a,0),it.writeInt32BE(this._b,4),it.writeInt32BE(this._c,8),it.writeInt32BE(this._d,12),it.writeInt32BE(this._e,16),it.writeInt32BE(this._f,20),it.writeInt32BE(this._g,24),it};var sha224=Sha224,inherits$1=inherits_browser$1.exports,Hash$1=hash$1,Buffer$4=safeBuffer.exports.Buffer,K$1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$2=new Array(160);function Sha512(){this.init(),this._w=W$2,Hash$1.call(this,128,112)}inherits$1(Sha512,Hash$1),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(it,tt,rt){return rt^it&(tt^rt)}function maj(it,tt,rt){return it&tt|rt&(it|tt)}function sigma0(it,tt){return(it>>>28|tt<<4)^(tt>>>2|it<<30)^(tt>>>7|it<<25)}function sigma1(it,tt){return(it>>>14|tt<<18)^(it>>>18|tt<<14)^(tt>>>9|it<<23)}function Gamma0(it,tt){return(it>>>1|tt<<31)^(it>>>8|tt<<24)^it>>>7}function Gamma0l(it,tt){return(it>>>1|tt<<31)^(it>>>8|tt<<24)^(it>>>7|tt<<25)}function Gamma1(it,tt){return(it>>>19|tt<<13)^(tt>>>29|it<<3)^it>>>6}function Gamma1l(it,tt){return(it>>>19|tt<<13)^(tt>>>29|it<<3)^(it>>>6|tt<<26)}function getCarry(it,tt){return it>>>0<tt>>>0?1:0}Sha512.prototype._update=function(it){for(var tt=this._w,rt=this._ah|0,at=this._bh|0,st=this._ch|0,ot=this._dh|0,lt=this._eh|0,ut=this._fh|0,ht=this._gh|0,mt=this._hh|0,bt=this._al|0,vt=this._bl|0,At=this._cl|0,xt=this._dl|0,Et=this._el|0,Tt=this._fl|0,wt=this._gl|0,Ct=this._hl|0,It=0;It<32;It+=2)tt[It]=it.readInt32BE(It*4),tt[It+1]=it.readInt32BE(It*4+4);for(;It<160;It+=2){var St=tt[It-30],Rt=tt[It-15*2+1],Dt=Gamma0(St,Rt),Wt=Gamma0l(Rt,St);St=tt[It-2*2],Rt=tt[It-2*2+1];var qt=Gamma1(St,Rt),Vt=Gamma1l(Rt,St),Yt=tt[It-7*2],jt=tt[It-7*2+1],kt=tt[It-16*2],zt=tt[It-16*2+1],Nt=Wt+jt|0,Mt=Dt+Yt+getCarry(Nt,Wt)|0;Nt=Nt+Vt|0,Mt=Mt+qt+getCarry(Nt,Vt)|0,Nt=Nt+zt|0,Mt=Mt+kt+getCarry(Nt,zt)|0,tt[It]=Mt,tt[It+1]=Nt}for(var Lt=0;Lt<160;Lt+=2){Mt=tt[Lt],Nt=tt[Lt+1];var Ht=maj(rt,at,st),Qt=maj(bt,vt,At),Ut=sigma0(rt,bt),Bt=sigma0(bt,rt),Kt=sigma1(lt,Et),Gt=sigma1(Et,lt),Pt=K$1[Lt],Zt=K$1[Lt+1],an=Ch(lt,ut,ht),Jt=Ch(Et,Tt,wt),rn=Ct+Gt|0,fn=mt+Kt+getCarry(rn,Ct)|0;rn=rn+Jt|0,fn=fn+an+getCarry(rn,Jt)|0,rn=rn+Zt|0,fn=fn+Pt+getCarry(rn,Zt)|0,rn=rn+Nt|0,fn=fn+Mt+getCarry(rn,Nt)|0;var pn=Bt+Qt|0,vn=Ut+Ht+getCarry(pn,Bt)|0;mt=ht,Ct=wt,ht=ut,wt=Tt,ut=lt,Tt=Et,Et=xt+rn|0,lt=ot+fn+getCarry(Et,xt)|0,ot=st,xt=At,st=at,At=vt,at=rt,vt=bt,bt=rn+pn|0,rt=fn+vn+getCarry(bt,rn)|0}this._al=this._al+bt|0,this._bl=this._bl+vt|0,this._cl=this._cl+At|0,this._dl=this._dl+xt|0,this._el=this._el+Et|0,this._fl=this._fl+Tt|0,this._gl=this._gl+wt|0,this._hl=this._hl+Ct|0,this._ah=this._ah+rt+getCarry(this._al,bt)|0,this._bh=this._bh+at+getCarry(this._bl,vt)|0,this._ch=this._ch+st+getCarry(this._cl,At)|0,this._dh=this._dh+ot+getCarry(this._dl,xt)|0,this._eh=this._eh+lt+getCarry(this._el,Et)|0,this._fh=this._fh+ut+getCarry(this._fl,Tt)|0,this._gh=this._gh+ht+getCarry(this._gl,wt)|0,this._hh=this._hh+mt+getCarry(this._hl,Ct)|0},Sha512.prototype._hash=function(){var it=Buffer$4.allocUnsafe(64);function tt(rt,at,st){it.writeInt32BE(rt,st),it.writeInt32BE(at,st+4)}return tt(this._ah,this._al,0),tt(this._bh,this._bl,8),tt(this._ch,this._cl,16),tt(this._dh,this._dl,24),tt(this._eh,this._el,32),tt(this._fh,this._fl,40),tt(this._gh,this._gl,48),tt(this._hh,this._hl,56),it};var sha512=Sha512,inherits=inherits_browser$1.exports,SHA512=sha512,Hash=hash$1,Buffer$3=safeBuffer.exports.Buffer,W$1=new Array(160);function Sha384(){this.init(),this._w=W$1,Hash.call(this,128,112)}inherits(Sha384,SHA512),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){var it=Buffer$3.allocUnsafe(48);function tt(rt,at,st){it.writeInt32BE(rt,st),it.writeInt32BE(at,st+4)}return tt(this._ah,this._al,0),tt(this._bh,this._bl,8),tt(this._ch,this._cl,16),tt(this._dh,this._dl,24),tt(this._eh,this._el,32),tt(this._fh,this._fl,40),it};var sha384=Sha384,exports$1=sha_js.exports=function it(tt){tt=tt.toLowerCase();var rt=exports$1[tt];if(!rt)throw new Error(tt+" is not supported (we accept pull requests)");return new rt};exports$1.sha=sha,exports$1.sha1=sha1,exports$1.sha224=sha224,exports$1.sha256=sha256,exports$1.sha384=sha384,exports$1.sha512=sha512;var util$5={},shams$1=function it(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var tt={},rt=Symbol("test"),at=Object(rt);if(typeof rt=="string"||Object.prototype.toString.call(rt)!=="[object Symbol]"||Object.prototype.toString.call(at)!=="[object Symbol]")return!1;var st=42;tt[rt]=st;for(rt in tt)return!1;if(typeof Object.keys=="function"&&Object.keys(tt).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(tt).length!==0)return!1;var ot=Object.getOwnPropertySymbols(tt);if(ot.length!==1||ot[0]!==rt||!Object.prototype.propertyIsEnumerable.call(tt,rt))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var lt=Object.getOwnPropertyDescriptor(tt,rt);if(lt.value!==st||lt.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$2=function it(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice$2=Array.prototype.slice,toStr$4=Object.prototype.toString,funcType="[object Function]",implementation$1=function it(tt){var rt=this;if(typeof rt!="function"||toStr$4.call(rt)!==funcType)throw new TypeError(ERROR_MESSAGE+rt);for(var at=slice$2.call(arguments,1),st,ot=function(){if(this instanceof st){var bt=rt.apply(this,at.concat(slice$2.call(arguments)));return Object(bt)===bt?bt:this}else return rt.apply(tt,at.concat(slice$2.call(arguments)))},lt=Math.max(0,rt.length-at.length),ut=[],ht=0;ht<lt;ht++)ut.push("$"+ht);if(st=Function("binder","return function ("+ut.join(",")+"){ return binder.apply(this,arguments); }")(ot),rt.prototype){var mt=function(){};mt.prototype=rt.prototype,st.prototype=new mt,mt.prototype=null}return st},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,bind$2=functionBind,src=bind$2.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError$1=TypeError,getEvalledConstructor=function(it){try{return $Function('"use strict"; return ('+it+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$1},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$1=hasSymbols$2(),getProto$1=Object.getPrototypeOf||function(it){return it.__proto__},needsEval={},TypedArray=typeof Uint8Array>"u"?undefined$1:getProto$1(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$1?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$1,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};try{null.error}catch(it){var errorProto=getProto$1(getProto$1(it));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function it(tt){var rt;if(tt==="%AsyncFunction%")rt=getEvalledConstructor("async function () {}");else if(tt==="%GeneratorFunction%")rt=getEvalledConstructor("function* () {}");else if(tt==="%AsyncGeneratorFunction%")rt=getEvalledConstructor("async function* () {}");else if(tt==="%AsyncGenerator%"){var at=it("%AsyncGeneratorFunction%");at&&(rt=at.prototype)}else if(tt==="%AsyncIteratorPrototype%"){var st=it("%AsyncGenerator%");st&&(rt=getProto$1(st.prototype))}return INTRINSICS[tt]=rt,rt},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$1=functionBind,hasOwn$1=src,$concat$1=bind$1.call(Function.call,Array.prototype.concat),$spliceApply=bind$1.call(Function.apply,Array.prototype.splice),$replace$1=bind$1.call(Function.call,String.prototype.replace),$strSlice=bind$1.call(Function.call,String.prototype.slice),$exec=bind$1.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function it(tt){var rt=$strSlice(tt,0,1),at=$strSlice(tt,-1);if(rt==="%"&&at!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(at==="%"&&rt!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var st=[];return $replace$1(tt,rePropName,function(ot,lt,ut,ht){st[st.length]=ut?$replace$1(ht,reEscapeChar,"$1"):lt||ot}),st},getBaseIntrinsic=function it(tt,rt){var at=tt,st;if(hasOwn$1(LEGACY_ALIASES,at)&&(st=LEGACY_ALIASES[at],at="%"+st[0]+"%"),hasOwn$1(INTRINSICS,at)){var ot=INTRINSICS[at];if(ot===needsEval&&(ot=doEval(at)),typeof ot>"u"&&!rt)throw new $TypeError$1("intrinsic "+tt+" exists, but is not available. Please file an issue!");return{alias:st,name:at,value:ot}}throw new $SyntaxError("intrinsic "+tt+" does not exist!")},getIntrinsic=function it(tt,rt){if(typeof tt!="string"||tt.length===0)throw new $TypeError$1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof rt!="boolean")throw new $TypeError$1('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,tt)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var at=stringToPath(tt),st=at.length>0?at[0]:"",ot=getBaseIntrinsic("%"+st+"%",rt),lt=ot.name,ut=ot.value,ht=!1,mt=ot.alias;mt&&(st=mt[0],$spliceApply(at,$concat$1([0,1],mt)));for(var bt=1,vt=!0;bt<at.length;bt+=1){var At=at[bt],xt=$strSlice(At,0,1),Et=$strSlice(At,-1);if((xt==='"'||xt==="'"||xt==="`"||Et==='"'||Et==="'"||Et==="`")&&xt!==Et)throw new $SyntaxError("property names with quotes must have matching quotes");if((At==="constructor"||!vt)&&(ht=!0),st+="."+At,lt="%"+st+"%",hasOwn$1(INTRINSICS,lt))ut=INTRINSICS[lt];else if(ut!=null){if(!(At in ut)){if(!rt)throw new $TypeError$1("base intrinsic for "+tt+" exists, but the property is not available.");return}if($gOPD$1&&bt+1>=at.length){var Tt=$gOPD$1(ut,At);vt=!!Tt,vt&&"get"in Tt&&!("originalValue"in Tt.get)?ut=Tt.get:ut=ut[At]}else vt=hasOwn$1(ut,At),ut=ut[At];vt&&!ht&&(INTRINSICS[lt]=ut)}}return ut},callBind$1={exports:{}};(function(it){var tt=functionBind,rt=getIntrinsic,at=rt("%Function.prototype.apply%"),st=rt("%Function.prototype.call%"),ot=rt("%Reflect.apply%",!0)||tt.call(st,at),lt=rt("%Object.getOwnPropertyDescriptor%",!0),ut=rt("%Object.defineProperty%",!0),ht=rt("%Math.max%");if(ut)try{ut({},"a",{value:1})}catch{ut=null}it.exports=function(vt){var At=ot(tt,st,arguments);if(lt&&ut){var xt=lt(At,"length");xt.configurable&&ut(At,"length",{value:1+ht(0,vt.length-(arguments.length-1))})}return At};var mt=function(){return ot(tt,at,arguments)};ut?ut(it.exports,"apply",{value:mt}):it.exports.apply=mt})(callBind$1);var GetIntrinsic$2=getIntrinsic,callBind=callBind$1.exports,$indexOf$1=callBind(GetIntrinsic$2("String.prototype.indexOf")),callBound$4=function it(tt,rt){var at=GetIntrinsic$2(tt,!!rt);return typeof at=="function"&&$indexOf$1(tt,".prototype.")>-1?callBind(at):at},hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice$2=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols?"object":"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(it){return it.__proto__}:null);function addNumericSeparator(it,tt){if(it===1/0||it===-1/0||it!==it||it&&it>-1e3&&it<1e3||$test.call(/e/,tt))return tt;var rt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof it=="number"){var at=it<0?-$floor(-it):$floor(it);if(at!==it){var st=String(at),ot=$slice$2.call(tt,st.length+1);return $replace.call(st,rt,"$&_")+"."+$replace.call($replace.call(ot,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(tt,rt,"$&_")}var utilInspect=require$$0$5,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function it(tt,rt,at,st){var ot=rt||{};if(has$3(ot,"quoteStyle")&&ot.quoteStyle!=="single"&&ot.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(ot,"maxStringLength")&&(typeof ot.maxStringLength=="number"?ot.maxStringLength<0&&ot.maxStringLength!==1/0:ot.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var lt=has$3(ot,"customInspect")?ot.customInspect:!0;if(typeof lt!="boolean"&&lt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(ot,"indent")&&ot.indent!==null&&ot.indent!=="	"&&!(parseInt(ot.indent,10)===ot.indent&&ot.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(ot,"numericSeparator")&&typeof ot.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ut=ot.numericSeparator;if(typeof tt>"u")return"undefined";if(tt===null)return"null";if(typeof tt=="boolean")return tt?"true":"false";if(typeof tt=="string")return inspectString(tt,ot);if(typeof tt=="number"){if(tt===0)return 1/0/tt>0?"0":"-0";var ht=String(tt);return ut?addNumericSeparator(tt,ht):ht}if(typeof tt=="bigint"){var mt=String(tt)+"n";return ut?addNumericSeparator(tt,mt):mt}var bt=typeof ot.depth>"u"?5:ot.depth;if(typeof at>"u"&&(at=0),at>=bt&&bt>0&&typeof tt=="object")return isArray$9(tt)?"[Array]":"[Object]";var vt=getIndent(ot,at);if(typeof st>"u")st=[];else if(indexOf(st,tt)>=0)return"[Circular]";function At(Nt,Mt,Lt){if(Mt&&(st=$arrSlice.call(st),st.push(Mt)),Lt){var Ht={depth:ot.depth};return has$3(ot,"quoteStyle")&&(Ht.quoteStyle=ot.quoteStyle),it(Nt,Ht,at+1,st)}return it(Nt,ot,at+1,st)}if(typeof tt=="function"&&!isRegExp$1(tt)){var xt=nameOf(tt),Et=arrObjKeys(tt,At);return"[Function"+(xt?": "+xt:" (anonymous)")+"]"+(Et.length>0?" { "+$join.call(Et,", ")+" }":"")}if(isSymbol(tt)){var Tt=hasShammedSymbols?$replace.call(String(tt),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(tt);return typeof tt=="object"&&!hasShammedSymbols?markBoxed(Tt):Tt}if(isElement$1(tt)){for(var wt="<"+$toLowerCase.call(String(tt.nodeName)),Ct=tt.attributes||[],It=0;It<Ct.length;It++)wt+=" "+Ct[It].name+"="+wrapQuotes(quote(Ct[It].value),"double",ot);return wt+=">",tt.childNodes&&tt.childNodes.length&&(wt+="..."),wt+="</"+$toLowerCase.call(String(tt.nodeName))+">",wt}if(isArray$9(tt)){if(tt.length===0)return"[]";var St=arrObjKeys(tt,At);return vt&&!singleLineValues(St)?"["+indentedJoin(St,vt)+"]":"[ "+$join.call(St,", ")+" ]"}if(isError(tt)){var Rt=arrObjKeys(tt,At);return!("cause"in Error.prototype)&&"cause"in tt&&!isEnumerable.call(tt,"cause")?"{ ["+String(tt)+"] "+$join.call($concat.call("[cause]: "+At(tt.cause),Rt),", ")+" }":Rt.length===0?"["+String(tt)+"]":"{ ["+String(tt)+"] "+$join.call(Rt,", ")+" }"}if(typeof tt=="object"&&lt){if(inspectSymbol&&typeof tt[inspectSymbol]=="function"&&utilInspect)return utilInspect(tt,{depth:bt-at});if(lt!=="symbol"&&typeof tt.inspect=="function")return tt.inspect()}if(isMap(tt)){var Dt=[];return mapForEach&&mapForEach.call(tt,function(Nt,Mt){Dt.push(At(Mt,tt,!0)+" => "+At(Nt,tt))}),collectionOf("Map",mapSize.call(tt),Dt,vt)}if(isSet(tt)){var Wt=[];return setForEach&&setForEach.call(tt,function(Nt){Wt.push(At(Nt,tt))}),collectionOf("Set",setSize.call(tt),Wt,vt)}if(isWeakMap(tt))return weakCollectionOf("WeakMap");if(isWeakSet(tt))return weakCollectionOf("WeakSet");if(isWeakRef(tt))return weakCollectionOf("WeakRef");if(isNumber$1(tt))return markBoxed(At(Number(tt)));if(isBigInt(tt))return markBoxed(At(bigIntValueOf.call(tt)));if(isBoolean$1(tt))return markBoxed(booleanValueOf.call(tt));if(isString$1(tt))return markBoxed(At(String(tt)));if(!isDate$1(tt)&&!isRegExp$1(tt)){var qt=arrObjKeys(tt,At),Vt=gPO?gPO(tt)===Object.prototype:tt instanceof Object||tt.constructor===Object,Yt=tt instanceof Object?"":"null prototype",jt=!Vt&&toStringTag&&Object(tt)===tt&&toStringTag in tt?$slice$2.call(toStr$3(tt),8,-1):Yt?"Object":"",kt=Vt||typeof tt.constructor!="function"?"":tt.constructor.name?tt.constructor.name+" ":"",zt=kt+(jt||Yt?"["+$join.call($concat.call([],jt||[],Yt||[]),": ")+"] ":"");return qt.length===0?zt+"{}":vt?zt+"{"+indentedJoin(qt,vt)+"}":zt+"{ "+$join.call(qt,", ")+" }"}return String(tt)};function wrapQuotes(it,tt,rt){var at=(rt.quoteStyle||tt)==="double"?'"':"'";return at+it+at}function quote(it){return $replace.call(String(it),/"/g,"&quot;")}function isArray$9(it){return toStr$3(it)==="[object Array]"&&(!toStringTag||!(typeof it=="object"&&toStringTag in it))}function isDate$1(it){return toStr$3(it)==="[object Date]"&&(!toStringTag||!(typeof it=="object"&&toStringTag in it))}function isRegExp$1(it){return toStr$3(it)==="[object RegExp]"&&(!toStringTag||!(typeof it=="object"&&toStringTag in it))}function isError(it){return toStr$3(it)==="[object Error]"&&(!toStringTag||!(typeof it=="object"&&toStringTag in it))}function isString$1(it){return toStr$3(it)==="[object String]"&&(!toStringTag||!(typeof it=="object"&&toStringTag in it))}function isNumber$1(it){return toStr$3(it)==="[object Number]"&&(!toStringTag||!(typeof it=="object"&&toStringTag in it))}function isBoolean$1(it){return toStr$3(it)==="[object Boolean]"&&(!toStringTag||!(typeof it=="object"&&toStringTag in it))}function isSymbol(it){if(hasShammedSymbols)return it&&typeof it=="object"&&it instanceof Symbol;if(typeof it=="symbol")return!0;if(!it||typeof it!="object"||!symToString)return!1;try{return symToString.call(it),!0}catch{}return!1}function isBigInt(it){if(!it||typeof it!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(it),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(it){return it in this};function has$3(it,tt){return hasOwn.call(it,tt)}function toStr$3(it){return objectToString.call(it)}function nameOf(it){if(it.name)return it.name;var tt=$match.call(functionToString.call(it),/^function\s*([\w$]+)/);return tt?tt[1]:null}function indexOf(it,tt){if(it.indexOf)return it.indexOf(tt);for(var rt=0,at=it.length;rt<at;rt++)if(it[rt]===tt)return rt;return-1}function isMap(it){if(!mapSize||!it||typeof it!="object")return!1;try{mapSize.call(it);try{setSize.call(it)}catch{return!0}return it instanceof Map}catch{}return!1}function isWeakMap(it){if(!weakMapHas||!it||typeof it!="object")return!1;try{weakMapHas.call(it,weakMapHas);try{weakSetHas.call(it,weakSetHas)}catch{return!0}return it instanceof WeakMap}catch{}return!1}function isWeakRef(it){if(!weakRefDeref||!it||typeof it!="object")return!1;try{return weakRefDeref.call(it),!0}catch{}return!1}function isSet(it){if(!setSize||!it||typeof it!="object")return!1;try{setSize.call(it);try{mapSize.call(it)}catch{return!0}return it instanceof Set}catch{}return!1}function isWeakSet(it){if(!weakSetHas||!it||typeof it!="object")return!1;try{weakSetHas.call(it,weakSetHas);try{weakMapHas.call(it,weakMapHas)}catch{return!0}return it instanceof WeakSet}catch{}return!1}function isElement$1(it){return!it||typeof it!="object"?!1:typeof HTMLElement<"u"&&it instanceof HTMLElement?!0:typeof it.nodeName=="string"&&typeof it.getAttribute=="function"}function inspectString(it,tt){if(it.length>tt.maxStringLength){var rt=it.length-tt.maxStringLength,at="... "+rt+" more character"+(rt>1?"s":"");return inspectString($slice$2.call(it,0,tt.maxStringLength),tt)+at}var st=$replace.call($replace.call(it,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(st,"single",tt)}function lowbyte(it){var tt=it.charCodeAt(0),rt={8:"b",9:"t",10:"n",12:"f",13:"r"}[tt];return rt?"\\"+rt:"\\x"+(tt<16?"0":"")+$toUpperCase.call(tt.toString(16))}function markBoxed(it){return"Object("+it+")"}function weakCollectionOf(it){return it+" { ? }"}function collectionOf(it,tt,rt,at){var st=at?indentedJoin(rt,at):$join.call(rt,", ");return it+" ("+tt+") {"+st+"}"}function singleLineValues(it){for(var tt=0;tt<it.length;tt++)if(indexOf(it[tt],`
`)>=0)return!1;return!0}function getIndent(it,tt){var rt;if(it.indent==="	")rt="	";else if(typeof it.indent=="number"&&it.indent>0)rt=$join.call(Array(it.indent+1)," ");else return null;return{base:rt,prev:$join.call(Array(tt+1),rt)}}function indentedJoin(it,tt){if(it.length===0)return"";var rt=`
`+tt.prev+tt.base;return rt+$join.call(it,","+rt)+`
`+tt.prev}function arrObjKeys(it,tt){var rt=isArray$9(it),at=[];if(rt){at.length=it.length;for(var st=0;st<it.length;st++)at[st]=has$3(it,st)?tt(it[st],it):""}var ot=typeof gOPS=="function"?gOPS(it):[],lt;if(hasShammedSymbols){lt={};for(var ut=0;ut<ot.length;ut++)lt["$"+ot[ut]]=ot[ut]}for(var ht in it)!has$3(it,ht)||rt&&String(Number(ht))===ht&&ht<it.length||hasShammedSymbols&&lt["$"+ht]instanceof Symbol||($test.call(/[^\w$]/,ht)?at.push(tt(ht,it)+": "+tt(it[ht],it)):at.push(ht+": "+tt(it[ht],it)));if(typeof gOPS=="function")for(var mt=0;mt<ot.length;mt++)isEnumerable.call(it,ot[mt])&&at.push("["+tt(ot[mt])+"]: "+tt(it[ot[mt]],it));return at}var GetIntrinsic$1=getIntrinsic,callBound$3=callBound$4,inspect=objectInspect,$TypeError=GetIntrinsic$1("%TypeError%"),$WeakMap=GetIntrinsic$1("%WeakMap%",!0),$Map=GetIntrinsic$1("%Map%",!0),$weakMapGet=callBound$3("WeakMap.prototype.get",!0),$weakMapSet=callBound$3("WeakMap.prototype.set",!0),$weakMapHas=callBound$3("WeakMap.prototype.has",!0),$mapGet=callBound$3("Map.prototype.get",!0),$mapSet=callBound$3("Map.prototype.set",!0),$mapHas=callBound$3("Map.prototype.has",!0),listGetNode=function(it,tt){for(var rt=it,at;(at=rt.next)!==null;rt=at)if(at.key===tt)return rt.next=at.next,at.next=it.next,it.next=at,at},listGet=function(it,tt){var rt=listGetNode(it,tt);return rt&&rt.value},listSet=function(it,tt,rt){var at=listGetNode(it,tt);at?at.value=rt:it.next={key:tt,next:it.next,value:rt}},listHas=function(it,tt){return!!listGetNode(it,tt)},sideChannel=function it(){var tt,rt,at,st={assert:function(ot){if(!st.has(ot))throw new $TypeError("Side channel does not contain "+inspect(ot))},get:function(ot){if($WeakMap&&ot&&(typeof ot=="object"||typeof ot=="function")){if(tt)return $weakMapGet(tt,ot)}else if($Map){if(rt)return $mapGet(rt,ot)}else if(at)return listGet(at,ot)},has:function(ot){if($WeakMap&&ot&&(typeof ot=="object"||typeof ot=="function")){if(tt)return $weakMapHas(tt,ot)}else if($Map){if(rt)return $mapHas(rt,ot)}else if(at)return listHas(at,ot);return!1},set:function(ot,lt){$WeakMap&&ot&&(typeof ot=="object"||typeof ot=="function")?(tt||(tt=new $WeakMap),$weakMapSet(tt,ot,lt)):$Map?(rt||(rt=new $Map),$mapSet(rt,ot,lt)):(at||(at={key:{},next:null}),listSet(at,ot,lt))}};return st},replace$1=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(it){return replace$1.call(it,percentTwenties,"+")},RFC3986:function(it){return String(it)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$2=Object.prototype.hasOwnProperty,isArray$8=Array.isArray,hexTable=function(){for(var it=[],tt=0;tt<256;++tt)it.push("%"+((tt<16?"0":"")+tt.toString(16)).toUpperCase());return it}(),compactQueue=function it(tt){for(;tt.length>1;){var rt=tt.pop(),at=rt.obj[rt.prop];if(isArray$8(at)){for(var st=[],ot=0;ot<at.length;++ot)typeof at[ot]<"u"&&st.push(at[ot]);rt.obj[rt.prop]=st}}},arrayToObject=function it(tt,rt){for(var at=rt&&rt.plainObjects?Object.create(null):{},st=0;st<tt.length;++st)typeof tt[st]<"u"&&(at[st]=tt[st]);return at},merge$3=function it(tt,rt,at){if(!rt)return tt;if(typeof rt!="object"){if(isArray$8(tt))tt.push(rt);else if(tt&&typeof tt=="object")(at&&(at.plainObjects||at.allowPrototypes)||!has$2.call(Object.prototype,rt))&&(tt[rt]=!0);else return[tt,rt];return tt}if(!tt||typeof tt!="object")return[tt].concat(rt);var st=tt;return isArray$8(tt)&&!isArray$8(rt)&&(st=arrayToObject(tt,at)),isArray$8(tt)&&isArray$8(rt)?(rt.forEach(function(ot,lt){if(has$2.call(tt,lt)){var ut=tt[lt];ut&&typeof ut=="object"&&ot&&typeof ot=="object"?tt[lt]=it(ut,ot,at):tt.push(ot)}else tt[lt]=ot}),tt):Object.keys(rt).reduce(function(ot,lt){var ut=rt[lt];return has$2.call(ot,lt)?ot[lt]=it(ot[lt],ut,at):ot[lt]=ut,ot},st)},assign$1=function it(tt,rt){return Object.keys(rt).reduce(function(at,st){return at[st]=rt[st],at},tt)},decode$1=function(it,tt,rt){var at=it.replace(/\+/g," ");if(rt==="iso-8859-1")return at.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(at)}catch{return at}},encode=function it(tt,rt,at,st,ot){if(tt.length===0)return tt;var lt=tt;if(typeof tt=="symbol"?lt=Symbol.prototype.toString.call(tt):typeof tt!="string"&&(lt=String(tt)),at==="iso-8859-1")return escape(lt).replace(/%u[0-9a-f]{4}/gi,function(bt){return"%26%23"+parseInt(bt.slice(2),16)+"%3B"});for(var ut="",ht=0;ht<lt.length;++ht){var mt=lt.charCodeAt(ht);if(mt===45||mt===46||mt===95||mt===126||mt>=48&&mt<=57||mt>=65&&mt<=90||mt>=97&&mt<=122||ot===formats$2.RFC1738&&(mt===40||mt===41)){ut+=lt.charAt(ht);continue}if(mt<128){ut=ut+hexTable[mt];continue}if(mt<2048){ut=ut+(hexTable[192|mt>>6]+hexTable[128|mt&63]);continue}if(mt<55296||mt>=57344){ut=ut+(hexTable[224|mt>>12]+hexTable[128|mt>>6&63]+hexTable[128|mt&63]);continue}ht+=1,mt=65536+((mt&1023)<<10|lt.charCodeAt(ht)&1023),ut+=hexTable[240|mt>>18]+hexTable[128|mt>>12&63]+hexTable[128|mt>>6&63]+hexTable[128|mt&63]}return ut},compact$2=function it(tt){for(var rt=[{obj:{o:tt},prop:"o"}],at=[],st=0;st<rt.length;++st)for(var ot=rt[st],lt=ot.obj[ot.prop],ut=Object.keys(lt),ht=0;ht<ut.length;++ht){var mt=ut[ht],bt=lt[mt];typeof bt=="object"&&bt!==null&&at.indexOf(bt)===-1&&(rt.push({obj:lt,prop:mt}),at.push(bt))}return compactQueue(rt),tt},isRegExp=function it(tt){return Object.prototype.toString.call(tt)==="[object RegExp]"},isBuffer=function it(tt){return!tt||typeof tt!="object"?!1:!!(tt.constructor&&tt.constructor.isBuffer&&tt.constructor.isBuffer(tt))},combine$1=function it(tt,rt){return[].concat(tt,rt)},maybeMap=function it(tt,rt){if(isArray$8(tt)){for(var at=[],st=0;st<tt.length;st+=1)at.push(rt(tt[st]));return at}return rt(tt)},utils$5={arrayToObject,assign:assign$1,combine:combine$1,compact:compact$2,decode:decode$1,encode,isBuffer,isRegExp,maybeMap,merge:merge$3},getSideChannel=sideChannel,utils$4=utils$5,formats$1=formats$3,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function it(tt){return tt+"[]"},comma:"comma",indices:function it(tt,rt){return tt+"["+rt+"]"},repeat:function it(tt){return tt}},isArray$7=Array.isArray,push=Array.prototype.push,pushToArray=function(it,tt){push.apply(it,isArray$7(tt)?tt:[tt])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$1={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$4.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function it(tt){return toISO.call(tt)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function it(tt){return typeof tt=="string"||typeof tt=="number"||typeof tt=="boolean"||typeof tt=="symbol"||typeof tt=="bigint"},sentinel={},stringify$2=function it(tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt,Et,Tt,wt){for(var Ct=tt,It=wt,St=0,Rt=!1;(It=It.get(sentinel))!==void 0&&!Rt;){var Dt=It.get(tt);if(St+=1,typeof Dt<"u"){if(Dt===St)throw new RangeError("Cyclic object value");Rt=!0}typeof It.get(sentinel)>"u"&&(St=0)}if(typeof ht=="function"?Ct=ht(rt,Ct):Ct instanceof Date?Ct=vt(Ct):at==="comma"&&isArray$7(Ct)&&(Ct=utils$4.maybeMap(Ct,function(Ht){return Ht instanceof Date?vt(Ht):Ht})),Ct===null){if(ot)return ut&&!Et?ut(rt,defaults$1.encoder,Tt,"key",At):rt;Ct=""}if(isNonNullishPrimitive(Ct)||utils$4.isBuffer(Ct)){if(ut){var Wt=Et?rt:ut(rt,defaults$1.encoder,Tt,"key",At);return[xt(Wt)+"="+xt(ut(Ct,defaults$1.encoder,Tt,"value",At))]}return[xt(rt)+"="+xt(String(Ct))]}var qt=[];if(typeof Ct>"u")return qt;var Vt;if(at==="comma"&&isArray$7(Ct))Et&&ut&&(Ct=utils$4.maybeMap(Ct,ut)),Vt=[{value:Ct.length>0?Ct.join(",")||null:void 0}];else if(isArray$7(ht))Vt=ht;else{var Yt=Object.keys(Ct);Vt=mt?Yt.sort(mt):Yt}for(var jt=st&&isArray$7(Ct)&&Ct.length===1?rt+"[]":rt,kt=0;kt<Vt.length;++kt){var zt=Vt[kt],Nt=typeof zt=="object"&&typeof zt.value<"u"?zt.value:Ct[zt];if(!(lt&&Nt===null)){var Mt=isArray$7(Ct)?typeof at=="function"?at(jt,zt):jt:jt+(bt?"."+zt:"["+zt+"]");wt.set(tt,St);var Lt=getSideChannel();Lt.set(sentinel,wt),pushToArray(qt,it(Nt,Mt,at,st,ot,lt,at==="comma"&&Et&&isArray$7(Ct)?null:ut,ht,mt,bt,vt,At,xt,Et,Tt,Lt))}}return qt},normalizeStringifyOptions=function it(tt){if(!tt)return defaults$1;if(tt.encoder!==null&&typeof tt.encoder<"u"&&typeof tt.encoder!="function")throw new TypeError("Encoder has to be a function.");var rt=tt.charset||defaults$1.charset;if(typeof tt.charset<"u"&&tt.charset!=="utf-8"&&tt.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var at=formats$1.default;if(typeof tt.format<"u"){if(!has$1.call(formats$1.formatters,tt.format))throw new TypeError("Unknown format option provided.");at=tt.format}var st=formats$1.formatters[at],ot=defaults$1.filter;return(typeof tt.filter=="function"||isArray$7(tt.filter))&&(ot=tt.filter),{addQueryPrefix:typeof tt.addQueryPrefix=="boolean"?tt.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:typeof tt.allowDots>"u"?defaults$1.allowDots:!!tt.allowDots,charset:rt,charsetSentinel:typeof tt.charsetSentinel=="boolean"?tt.charsetSentinel:defaults$1.charsetSentinel,delimiter:typeof tt.delimiter>"u"?defaults$1.delimiter:tt.delimiter,encode:typeof tt.encode=="boolean"?tt.encode:defaults$1.encode,encoder:typeof tt.encoder=="function"?tt.encoder:defaults$1.encoder,encodeValuesOnly:typeof tt.encodeValuesOnly=="boolean"?tt.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:ot,format:at,formatter:st,serializeDate:typeof tt.serializeDate=="function"?tt.serializeDate:defaults$1.serializeDate,skipNulls:typeof tt.skipNulls=="boolean"?tt.skipNulls:defaults$1.skipNulls,sort:typeof tt.sort=="function"?tt.sort:null,strictNullHandling:typeof tt.strictNullHandling=="boolean"?tt.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(it,tt){var rt=it,at=normalizeStringifyOptions(tt),st,ot;typeof at.filter=="function"?(ot=at.filter,rt=ot("",rt)):isArray$7(at.filter)&&(ot=at.filter,st=ot);var lt=[];if(typeof rt!="object"||rt===null)return"";var ut;tt&&tt.arrayFormat in arrayPrefixGenerators?ut=tt.arrayFormat:tt&&"indices"in tt?ut=tt.indices?"indices":"repeat":ut="indices";var ht=arrayPrefixGenerators[ut];if(tt&&"commaRoundTrip"in tt&&typeof tt.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var mt=ht==="comma"&&tt&&tt.commaRoundTrip;st||(st=Object.keys(rt)),at.sort&&st.sort(at.sort);for(var bt=getSideChannel(),vt=0;vt<st.length;++vt){var At=st[vt];at.skipNulls&&rt[At]===null||pushToArray(lt,stringify$2(rt[At],At,ht,mt,at.strictNullHandling,at.skipNulls,at.encode?at.encoder:null,at.filter,at.sort,at.allowDots,at.serializeDate,at.format,at.formatter,at.encodeValuesOnly,at.charset,bt))}var xt=lt.join(at.delimiter),Et=at.addQueryPrefix===!0?"?":"";return at.charsetSentinel&&(at.charset==="iso-8859-1"?Et+="utf8=%26%2310003%3B&":Et+="utf8=%E2%9C%93&"),xt.length>0?Et+xt:""},utils$3=utils$5,has=Object.prototype.hasOwnProperty,isArray$6=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils$3.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(it){return it.replace(/&#(\d+);/g,function(tt,rt){return String.fromCharCode(parseInt(rt,10))})},parseArrayValue=function(it,tt){return it&&typeof it=="string"&&tt.comma&&it.indexOf(",")>-1?it.split(","):it},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function it(tt,rt){var at={},st=rt.ignoreQueryPrefix?tt.replace(/^\?/,""):tt,ot=rt.parameterLimit===1/0?void 0:rt.parameterLimit,lt=st.split(rt.delimiter,ot),ut=-1,ht,mt=rt.charset;if(rt.charsetSentinel)for(ht=0;ht<lt.length;++ht)lt[ht].indexOf("utf8=")===0&&(lt[ht]===charsetSentinel?mt="utf-8":lt[ht]===isoSentinel&&(mt="iso-8859-1"),ut=ht,ht=lt.length);for(ht=0;ht<lt.length;++ht)if(ht!==ut){var bt=lt[ht],vt=bt.indexOf("]="),At=vt===-1?bt.indexOf("="):vt+1,xt,Et;At===-1?(xt=rt.decoder(bt,defaults.decoder,mt,"key"),Et=rt.strictNullHandling?null:""):(xt=rt.decoder(bt.slice(0,At),defaults.decoder,mt,"key"),Et=utils$3.maybeMap(parseArrayValue(bt.slice(At+1),rt),function(Tt){return rt.decoder(Tt,defaults.decoder,mt,"value")})),Et&&rt.interpretNumericEntities&&mt==="iso-8859-1"&&(Et=interpretNumericEntities(Et)),bt.indexOf("[]=")>-1&&(Et=isArray$6(Et)?[Et]:Et),has.call(at,xt)?at[xt]=utils$3.combine(at[xt],Et):at[xt]=Et}return at},parseObject=function(it,tt,rt,at){for(var st=at?tt:parseArrayValue(tt,rt),ot=it.length-1;ot>=0;--ot){var lt,ut=it[ot];if(ut==="[]"&&rt.parseArrays)lt=[].concat(st);else{lt=rt.plainObjects?Object.create(null):{};var ht=ut.charAt(0)==="["&&ut.charAt(ut.length-1)==="]"?ut.slice(1,-1):ut,mt=parseInt(ht,10);!rt.parseArrays&&ht===""?lt={0:st}:!isNaN(mt)&&ut!==ht&&String(mt)===ht&&mt>=0&&rt.parseArrays&&mt<=rt.arrayLimit?(lt=[],lt[mt]=st):ht!=="__proto__"&&(lt[ht]=st)}st=lt}return st},parseKeys=function it(tt,rt,at,st){if(!!tt){var ot=at.allowDots?tt.replace(/\.([^.[]+)/g,"[$1]"):tt,lt=/(\[[^[\]]*])/,ut=/(\[[^[\]]*])/g,ht=at.depth>0&&lt.exec(ot),mt=ht?ot.slice(0,ht.index):ot,bt=[];if(mt){if(!at.plainObjects&&has.call(Object.prototype,mt)&&!at.allowPrototypes)return;bt.push(mt)}for(var vt=0;at.depth>0&&(ht=ut.exec(ot))!==null&&vt<at.depth;){if(vt+=1,!at.plainObjects&&has.call(Object.prototype,ht[1].slice(1,-1))&&!at.allowPrototypes)return;bt.push(ht[1])}return ht&&bt.push("["+ot.slice(ht.index)+"]"),parseObject(bt,rt,at,st)}},normalizeParseOptions=function it(tt){if(!tt)return defaults;if(tt.decoder!==null&&tt.decoder!==void 0&&typeof tt.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof tt.charset<"u"&&tt.charset!=="utf-8"&&tt.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var rt=typeof tt.charset>"u"?defaults.charset:tt.charset;return{allowDots:typeof tt.allowDots>"u"?defaults.allowDots:!!tt.allowDots,allowPrototypes:typeof tt.allowPrototypes=="boolean"?tt.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof tt.allowSparse=="boolean"?tt.allowSparse:defaults.allowSparse,arrayLimit:typeof tt.arrayLimit=="number"?tt.arrayLimit:defaults.arrayLimit,charset:rt,charsetSentinel:typeof tt.charsetSentinel=="boolean"?tt.charsetSentinel:defaults.charsetSentinel,comma:typeof tt.comma=="boolean"?tt.comma:defaults.comma,decoder:typeof tt.decoder=="function"?tt.decoder:defaults.decoder,delimiter:typeof tt.delimiter=="string"||utils$3.isRegExp(tt.delimiter)?tt.delimiter:defaults.delimiter,depth:typeof tt.depth=="number"||tt.depth===!1?+tt.depth:defaults.depth,ignoreQueryPrefix:tt.ignoreQueryPrefix===!0,interpretNumericEntities:typeof tt.interpretNumericEntities=="boolean"?tt.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof tt.parameterLimit=="number"?tt.parameterLimit:defaults.parameterLimit,parseArrays:tt.parseArrays!==!1,plainObjects:typeof tt.plainObjects=="boolean"?tt.plainObjects:defaults.plainObjects,strictNullHandling:typeof tt.strictNullHandling=="boolean"?tt.strictNullHandling:defaults.strictNullHandling}},parse$2=function(it,tt){var rt=normalizeParseOptions(tt);if(it===""||it===null||typeof it>"u")return rt.plainObjects?Object.create(null):{};for(var at=typeof it=="string"?parseValues(it,rt):it,st=rt.plainObjects?Object.create(null):{},ot=Object.keys(at),lt=0;lt<ot.length;++lt){var ut=ot[lt],ht=parseKeys(ut,at[ut],rt,typeof it=="string");st=utils$3.merge(st,ht,rt)}return rt.allowSparse===!0?st:utils$3.compact(st)},stringify$1=stringify_1,parse$1=parse$2,formats=formats$3,lib$1={formats,parse:parse$1,stringify:stringify$1},types$2={};(function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.ProviderType=it.RegExpString=it.IntNumber=it.BigIntString=it.AddressString=it.HexString=it.OpaqueType=void 0;function tt(){return at=>at}it.OpaqueType=tt,it.HexString=tt(),it.AddressString=tt(),it.BigIntString=tt();function rt(at){return Math.floor(at)}it.IntNumber=rt,it.RegExpString=tt(),function(at){at.CoinbaseWallet="CoinbaseWallet",at.MetaMask="MetaMask",at.Unselected=""}(it.ProviderType||(it.ProviderType={}))})(types$2);var __importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(util$5,"__esModule",{value:!0}),util$5.isInIFrame=util$5.createQrUrl=util$5.getFavicon=util$5.range=util$5.isBigNumber=util$5.ensureParsedJSONObject=util$5.ensureBN=util$5.ensureRegExpString=util$5.ensureIntNumber=util$5.ensureBuffer=util$5.ensureAddressString=util$5.ensureEvenLengthHexString=util$5.ensureHexString=util$5.isHexString=util$5.prepend0x=util$5.strip0x=util$5.has0xPrefix=util$5.hexStringFromIntNumber=util$5.intNumberFromHexString=util$5.bigIntStringFromBN=util$5.hexStringFromBuffer=util$5.hexStringToUint8Array=util$5.uint8ArrayToHex=util$5.randomBytesHex=void 0;const bn_js_1$1=__importDefault$9(bn$1.exports),qs_1=lib$1,types_1$3=types$2,INT_STRING_REGEX=/^[0-9]*$/,HEXADECIMAL_STRING_REGEX=/^[a-f0-9]*$/;function randomBytesHex(it){return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(it)))}util$5.randomBytesHex=randomBytesHex;function uint8ArrayToHex(it){return[...it].map(tt=>tt.toString(16).padStart(2,"0")).join("")}util$5.uint8ArrayToHex=uint8ArrayToHex;function hexStringToUint8Array(it){return new Uint8Array(it.match(/.{1,2}/g).map(tt=>parseInt(tt,16)))}util$5.hexStringToUint8Array=hexStringToUint8Array;function hexStringFromBuffer(it,tt=!1){const rt=it.toString("hex");return(0,types_1$3.HexString)(tt?"0x"+rt:rt)}util$5.hexStringFromBuffer=hexStringFromBuffer;function bigIntStringFromBN(it){return(0,types_1$3.BigIntString)(it.toString(10))}util$5.bigIntStringFromBN=bigIntStringFromBN;function intNumberFromHexString(it){return(0,types_1$3.IntNumber)(new bn_js_1$1.default(ensureEvenLengthHexString(it,!1),16).toNumber())}util$5.intNumberFromHexString=intNumberFromHexString;function hexStringFromIntNumber(it){return(0,types_1$3.HexString)("0x"+new bn_js_1$1.default(it).toString(16))}util$5.hexStringFromIntNumber=hexStringFromIntNumber;function has0xPrefix(it){return it.startsWith("0x")||it.startsWith("0X")}util$5.has0xPrefix=has0xPrefix;function strip0x(it){return has0xPrefix(it)?it.slice(2):it}util$5.strip0x=strip0x;function prepend0x(it){return has0xPrefix(it)?"0x"+it.slice(2):"0x"+it}util$5.prepend0x=prepend0x;function isHexString$3(it){if(typeof it!="string")return!1;const tt=strip0x(it).toLowerCase();return HEXADECIMAL_STRING_REGEX.test(tt)}util$5.isHexString=isHexString$3;function ensureHexString(it,tt=!1){if(typeof it=="string"){const rt=strip0x(it).toLowerCase();if(HEXADECIMAL_STRING_REGEX.test(rt))return(0,types_1$3.HexString)(tt?"0x"+rt:rt)}throw new Error(`"${String(it)}" is not a hexadecimal string`)}util$5.ensureHexString=ensureHexString;function ensureEvenLengthHexString(it,tt=!1){let rt=ensureHexString(it,!1);return rt.length%2===1&&(rt=(0,types_1$3.HexString)("0"+rt)),tt?(0,types_1$3.HexString)("0x"+rt):rt}util$5.ensureEvenLengthHexString=ensureEvenLengthHexString;function ensureAddressString(it){if(typeof it=="string"){const tt=strip0x(it).toLowerCase();if(isHexString$3(tt)&&tt.length===40)return(0,types_1$3.AddressString)(prepend0x(tt))}throw new Error(`Invalid Ethereum address: ${String(it)}`)}util$5.ensureAddressString=ensureAddressString;function ensureBuffer(it){if(Buffer.isBuffer(it))return it;if(typeof it=="string")if(isHexString$3(it)){const tt=ensureEvenLengthHexString(it,!1);return Buffer.from(tt,"hex")}else return Buffer.from(it,"utf8");throw new Error(`Not binary data: ${String(it)}`)}util$5.ensureBuffer=ensureBuffer;function ensureIntNumber(it){if(typeof it=="number"&&Number.isInteger(it))return(0,types_1$3.IntNumber)(it);if(typeof it=="string"){if(INT_STRING_REGEX.test(it))return(0,types_1$3.IntNumber)(Number(it));if(isHexString$3(it))return(0,types_1$3.IntNumber)(new bn_js_1$1.default(ensureEvenLengthHexString(it,!1),16).toNumber())}throw new Error(`Not an integer: ${String(it)}`)}util$5.ensureIntNumber=ensureIntNumber;function ensureRegExpString(it){if(it instanceof RegExp)return(0,types_1$3.RegExpString)(it.toString());throw new Error(`Not a RegExp: ${String(it)}`)}util$5.ensureRegExpString=ensureRegExpString;function ensureBN(it){if(it!==null&&(bn_js_1$1.default.isBN(it)||isBigNumber(it)))return new bn_js_1$1.default(it.toString(10),10);if(typeof it=="number")return new bn_js_1$1.default(ensureIntNumber(it));if(typeof it=="string"){if(INT_STRING_REGEX.test(it))return new bn_js_1$1.default(it,10);if(isHexString$3(it))return new bn_js_1$1.default(ensureEvenLengthHexString(it,!1),16)}throw new Error(`Not an integer: ${String(it)}`)}util$5.ensureBN=ensureBN;function ensureParsedJSONObject(it){if(typeof it=="string")return JSON.parse(it);if(typeof it=="object")return it;throw new Error(`Not a JSON string or an object: ${String(it)}`)}util$5.ensureParsedJSONObject=ensureParsedJSONObject;function isBigNumber(it){if(it==null||typeof it.constructor!="function")return!1;const{constructor:tt}=it;return typeof tt.config=="function"&&typeof tt.EUCLID=="number"}util$5.isBigNumber=isBigNumber;function range$1(it,tt){return Array.from({length:tt-it},(rt,at)=>it+at)}util$5.range=range$1;function getFavicon(){const it=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:tt,host:rt}=document.location,at=it?it.getAttribute("href"):null;return!at||at.startsWith("javascript:")?null:at.startsWith("http://")||at.startsWith("https://")||at.startsWith("data:")?at:at.startsWith("//")?tt+at:`${tt}//${rt}${at}`}util$5.getFavicon=getFavicon;function createQrUrl(it,tt,rt,at,st,ot){const lt=at?"parent-id":"id",ut=(0,qs_1.stringify)({[lt]:it,secret:tt,server:rt,v:st,chainId:ot});return`${rt}/#/link?${ut}`}util$5.createQrUrl=createQrUrl;function isInIFrame(){try{return window.frameElement!==null}catch{return!1}}util$5.isInIFrame=isInIFrame,Object.defineProperty(Session$1,"__esModule",{value:!0}),Session$1.Session=void 0;const sha_js_1=sha_js.exports,util_1$7=util$5,STORAGE_KEY_SESSION_ID="session:id",STORAGE_KEY_SESSION_SECRET="session:secret",STORAGE_KEY_SESSION_LINKED="session:linked";class Session{constructor(tt,rt,at,st){this._storage=tt,this._id=rt||(0,util_1$7.randomBytesHex)(16),this._secret=at||(0,util_1$7.randomBytesHex)(32),this._key=new sha_js_1.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!st}static load(tt){const rt=tt.getItem(STORAGE_KEY_SESSION_ID),at=tt.getItem(STORAGE_KEY_SESSION_LINKED),st=tt.getItem(STORAGE_KEY_SESSION_SECRET);return rt&&st?new Session(tt,rt,st,at==="1"):null}static hash(tt){return new sha_js_1.sha256().update(tt).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(tt){this._linked=tt,this.persistLinked()}save(){return this._storage.setItem(STORAGE_KEY_SESSION_ID,this._id),this._storage.setItem(STORAGE_KEY_SESSION_SECRET,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(STORAGE_KEY_SESSION_LINKED,this._linked?"1":"0")}}Session$1.Session=Session;var WalletSDKRelayAbstract$1={};Object.defineProperty(WalletSDKRelayAbstract$1,"__esModule",{value:!0}),WalletSDKRelayAbstract$1.WalletSDKRelayAbstract=WalletSDKRelayAbstract$1.APP_VERSION_KEY=WalletSDKRelayAbstract$1.LOCAL_STORAGE_ADDRESSES_KEY=WalletSDKRelayAbstract$1.WALLET_USER_NAME_KEY=void 0;const eth_rpc_errors_1$3=dist$2;WalletSDKRelayAbstract$1.WALLET_USER_NAME_KEY="walletUsername",WalletSDKRelayAbstract$1.LOCAL_STORAGE_ADDRESSES_KEY="Addresses",WalletSDKRelayAbstract$1.APP_VERSION_KEY="AppVersion";class WalletSDKRelayAbstract{async makeEthereumJSONRPCRequest(tt,rt){if(!rt)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(rt,{method:"POST",body:JSON.stringify(tt),mode:"cors",headers:{"Content-Type":"application/json"}}).then(at=>at.json()).then(at=>{if(!at)throw eth_rpc_errors_1$3.ethErrors.rpc.parse({});const st=at,{error:ot}=st;if(ot)throw(0,eth_rpc_errors_1$3.serializeError)(ot);return st})}}WalletSDKRelayAbstract$1.WalletSDKRelayAbstract=WalletSDKRelayAbstract;var readableBrowser={exports:{}},streamBrowser=events.exports.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function it(Et,Tt){var wt=Object.keys(Et);if(Object.getOwnPropertySymbols){var Ct=Object.getOwnPropertySymbols(Et);Tt&&(Ct=Ct.filter(function(It){return Object.getOwnPropertyDescriptor(Et,It).enumerable})),wt.push.apply(wt,Ct)}return wt}function tt(Et){for(var Tt=1;Tt<arguments.length;Tt++){var wt=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?it(Object(wt),!0).forEach(function(Ct){rt(Et,Ct,wt[Ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Et,Object.getOwnPropertyDescriptors(wt)):it(Object(wt)).forEach(function(Ct){Object.defineProperty(Et,Ct,Object.getOwnPropertyDescriptor(wt,Ct))})}return Et}function rt(Et,Tt,wt){return Tt=lt(Tt),Tt in Et?Object.defineProperty(Et,Tt,{value:wt,enumerable:!0,configurable:!0,writable:!0}):Et[Tt]=wt,Et}function at(Et,Tt){if(!(Et instanceof Tt))throw new TypeError("Cannot call a class as a function")}function st(Et,Tt){for(var wt=0;wt<Tt.length;wt++){var Ct=Tt[wt];Ct.enumerable=Ct.enumerable||!1,Ct.configurable=!0,"value"in Ct&&(Ct.writable=!0),Object.defineProperty(Et,lt(Ct.key),Ct)}}function ot(Et,Tt,wt){return Tt&&st(Et.prototype,Tt),wt&&st(Et,wt),Object.defineProperty(Et,"prototype",{writable:!1}),Et}function lt(Et){var Tt=ut(Et,"string");return typeof Tt=="symbol"?Tt:String(Tt)}function ut(Et,Tt){if(typeof Et!="object"||Et===null)return Et;var wt=Et[Symbol.toPrimitive];if(wt!==void 0){var Ct=wt.call(Et,Tt||"default");if(typeof Ct!="object")return Ct;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Tt==="string"?String:Number)(Et)}var ht=buffer$2,mt=ht.Buffer,bt=require$$0$5,vt=bt.inspect,At=vt&&vt.custom||"inspect";function xt(Et,Tt,wt){mt.prototype.copy.call(Et,Tt,wt)}return buffer_list=function(){function Et(){at(this,Et),this.head=null,this.tail=null,this.length=0}return ot(Et,[{key:"push",value:function(wt){var Ct={data:wt,next:null};this.length>0?this.tail.next=Ct:this.head=Ct,this.tail=Ct,++this.length}},{key:"unshift",value:function(wt){var Ct={data:wt,next:this.head};this.length===0&&(this.tail=Ct),this.head=Ct,++this.length}},{key:"shift",value:function(){if(this.length!==0){var wt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,wt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(wt){if(this.length===0)return"";for(var Ct=this.head,It=""+Ct.data;Ct=Ct.next;)It+=wt+Ct.data;return It}},{key:"concat",value:function(wt){if(this.length===0)return mt.alloc(0);for(var Ct=mt.allocUnsafe(wt>>>0),It=this.head,St=0;It;)xt(It.data,Ct,St),St+=It.data.length,It=It.next;return Ct}},{key:"consume",value:function(wt,Ct){var It;return wt<this.head.data.length?(It=this.head.data.slice(0,wt),this.head.data=this.head.data.slice(wt)):wt===this.head.data.length?It=this.shift():It=Ct?this._getString(wt):this._getBuffer(wt),It}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(wt){var Ct=this.head,It=1,St=Ct.data;for(wt-=St.length;Ct=Ct.next;){var Rt=Ct.data,Dt=wt>Rt.length?Rt.length:wt;if(Dt===Rt.length?St+=Rt:St+=Rt.slice(0,wt),wt-=Dt,wt===0){Dt===Rt.length?(++It,Ct.next?this.head=Ct.next:this.head=this.tail=null):(this.head=Ct,Ct.data=Rt.slice(Dt));break}++It}return this.length-=It,St}},{key:"_getBuffer",value:function(wt){var Ct=mt.allocUnsafe(wt),It=this.head,St=1;for(It.data.copy(Ct),wt-=It.data.length;It=It.next;){var Rt=It.data,Dt=wt>Rt.length?Rt.length:wt;if(Rt.copy(Ct,Ct.length-wt,0,Dt),wt-=Dt,wt===0){Dt===Rt.length?(++St,It.next?this.head=It.next:this.head=this.tail=null):(this.head=It,It.data=Rt.slice(Dt));break}++St}return this.length-=St,Ct}},{key:At,value:function(wt,Ct){return vt(this,tt(tt({},Ct),{},{depth:0,customInspect:!1}))}}]),Et}(),buffer_list}function destroy(it,tt){var rt=this,at=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return at||st?(tt?tt(it):it&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,it)):process.nextTick(emitErrorNT,this,it)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(it||null,function(ot){!tt&&ot?rt._writableState?rt._writableState.errorEmitted?process.nextTick(emitCloseNT,rt):(rt._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,rt,ot)):process.nextTick(emitErrorAndCloseNT,rt,ot):tt?(process.nextTick(emitCloseNT,rt),tt(ot)):process.nextTick(emitCloseNT,rt)}),this)}function emitErrorAndCloseNT(it,tt){emitErrorNT(it,tt),emitCloseNT(it)}function emitCloseNT(it){it._writableState&&!it._writableState.emitClose||it._readableState&&!it._readableState.emitClose||it.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(it,tt){it.emit("error",tt)}function errorOrDestroy(it,tt){var rt=it._readableState,at=it._writableState;rt&&rt.autoDestroy||at&&at.autoDestroy?it.destroy(tt):it.emit("error",tt)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose$1(it,tt){it.prototype=Object.create(tt.prototype),it.prototype.constructor=it,it.__proto__=tt}var codes={};function createErrorType(it,tt,rt){rt||(rt=Error);function at(ot,lt,ut){return typeof tt=="string"?tt:tt(ot,lt,ut)}var st=function(ot){_inheritsLoose$1(lt,ot);function lt(ut,ht,mt){return ot.call(this,at(ut,ht,mt))||this}return lt}(rt);st.prototype.name=rt.name,st.prototype.code=it,codes[it]=st}function oneOf(it,tt){if(Array.isArray(it)){var rt=it.length;return it=it.map(function(at){return String(at)}),rt>2?"one of ".concat(tt," ").concat(it.slice(0,rt-1).join(", "),", or ")+it[rt-1]:rt===2?"one of ".concat(tt," ").concat(it[0]," or ").concat(it[1]):"of ".concat(tt," ").concat(it[0])}else return"of ".concat(tt," ").concat(String(it))}function startsWith(it,tt,rt){return it.substr(!rt||rt<0?0:+rt,tt.length)===tt}function endsWith(it,tt,rt){return(rt===void 0||rt>it.length)&&(rt=it.length),it.substring(rt-tt.length,rt)===tt}function includes(it,tt,rt){return typeof rt!="number"&&(rt=0),rt+tt.length>it.length?!1:it.indexOf(tt,rt)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(it,tt){return'The value "'+tt+'" is invalid for option "'+it+'"'},TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(it,tt,rt){var at;typeof tt=="string"&&startsWith(tt,"not ")?(at="must not be",tt=tt.replace(/^not /,"")):at="must be";var st;if(endsWith(it," argument"))st="The ".concat(it," ").concat(at," ").concat(oneOf(tt,"type"));else{var ot=includes(it,".")?"property":"argument";st='The "'.concat(it,'" ').concat(ot," ").concat(at," ").concat(oneOf(tt,"type"))}return st+=". Received type ".concat(typeof rt),st},TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(it){return"The "+it+" method is not implemented"}),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",function(it){return"Cannot call "+it+" after a stream was destroyed"}),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",function(it){return"Unknown encoding: "+it},TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(it,tt,rt){return it.highWaterMark!=null?it.highWaterMark:tt?it[rt]:null}function getHighWaterMark(it,tt,rt,at){var st=highWaterMarkFrom(tt,at,rt);if(st!=null){if(!(isFinite(st)&&Math.floor(st)===st)||st<0){var ot=at?rt:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(ot,st)}return Math.floor(st)}return it.objectMode?16:16*1024}var state={getHighWaterMark},browser$1=deprecate;function deprecate(it,tt){if(config$2("noDeprecation"))return it;var rt=!1;function at(){if(!rt){if(config$2("throwDeprecation"))throw new Error(tt);config$2("traceDeprecation")?console.trace(tt):console.warn(tt),rt=!0}return it.apply(this,arguments)}return at}function config$2(it){try{if(!globalThis.localStorage)return!1}catch{return!1}var tt=globalThis.localStorage[it];return tt==null?!1:String(tt).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=Vt;function it(rn){var fn=this;this.next=null,this.entry=null,this.finish=function(){Jt(fn,rn)}}var tt;Vt.WritableState=Wt;var rt={deprecate:browser$1},at=streamBrowser,st=buffer$2.Buffer,ot=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function lt(rn){return st.from(rn)}function ut(rn){return st.isBuffer(rn)||rn instanceof ot}var ht=destroy_1,mt=state,bt=mt.getHighWaterMark,vt=errorsBrowser.codes,At=vt.ERR_INVALID_ARG_TYPE,xt=vt.ERR_METHOD_NOT_IMPLEMENTED,Et=vt.ERR_MULTIPLE_CALLBACK,Tt=vt.ERR_STREAM_CANNOT_PIPE,wt=vt.ERR_STREAM_DESTROYED,Ct=vt.ERR_STREAM_NULL_VALUES,It=vt.ERR_STREAM_WRITE_AFTER_END,St=vt.ERR_UNKNOWN_ENCODING,Rt=ht.errorOrDestroy;inherits_browser$1.exports(Vt,at);function Dt(){}function Wt(rn,fn,pn){tt=tt||require_stream_duplex(),rn=rn||{},typeof pn!="boolean"&&(pn=fn instanceof tt),this.objectMode=!!rn.objectMode,pn&&(this.objectMode=this.objectMode||!!rn.writableObjectMode),this.highWaterMark=bt(this,rn,"writableHighWaterMark",pn),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var vn=rn.decodeStrings===!1;this.decodeStrings=!vn,this.defaultEncoding=rn.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(En){Ht(fn,En)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=rn.emitClose!==!1,this.autoDestroy=!!rn.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new it(this)}Wt.prototype.getBuffer=function(){for(var fn=this.bufferedRequest,pn=[];fn;)pn.push(fn),fn=fn.next;return pn},function(){try{Object.defineProperty(Wt.prototype,"buffer",{get:rt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var qt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(qt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Vt,Symbol.hasInstance,{value:function(fn){return qt.call(this,fn)?!0:this!==Vt?!1:fn&&fn._writableState instanceof Wt}})):qt=function(fn){return fn instanceof this};function Vt(rn){tt=tt||require_stream_duplex();var fn=this instanceof tt;if(!fn&&!qt.call(Vt,this))return new Vt(rn);this._writableState=new Wt(rn,this,fn),this.writable=!0,rn&&(typeof rn.write=="function"&&(this._write=rn.write),typeof rn.writev=="function"&&(this._writev=rn.writev),typeof rn.destroy=="function"&&(this._destroy=rn.destroy),typeof rn.final=="function"&&(this._final=rn.final)),at.call(this)}Vt.prototype.pipe=function(){Rt(this,new Tt)};function Yt(rn,fn){var pn=new It;Rt(rn,pn),process.nextTick(fn,pn)}function jt(rn,fn,pn,vn){var En;return pn===null?En=new Ct:typeof pn!="string"&&!fn.objectMode&&(En=new At("chunk",["string","Buffer"],pn)),En?(Rt(rn,En),process.nextTick(vn,En),!1):!0}Vt.prototype.write=function(rn,fn,pn){var vn=this._writableState,En=!1,dn=!vn.objectMode&&ut(rn);return dn&&!st.isBuffer(rn)&&(rn=lt(rn)),typeof fn=="function"&&(pn=fn,fn=null),dn?fn="buffer":fn||(fn=vn.defaultEncoding),typeof pn!="function"&&(pn=Dt),vn.ending?Yt(this,pn):(dn||jt(this,vn,rn,pn))&&(vn.pendingcb++,En=zt(this,vn,dn,rn,fn,pn)),En},Vt.prototype.cork=function(){this._writableState.corked++},Vt.prototype.uncork=function(){var rn=this._writableState;rn.corked&&(rn.corked--,!rn.writing&&!rn.corked&&!rn.bufferProcessing&&rn.bufferedRequest&&Bt(this,rn))},Vt.prototype.setDefaultEncoding=function(fn){if(typeof fn=="string"&&(fn=fn.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((fn+"").toLowerCase())>-1))throw new St(fn);return this._writableState.defaultEncoding=fn,this},Object.defineProperty(Vt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function kt(rn,fn,pn){return!rn.objectMode&&rn.decodeStrings!==!1&&typeof fn=="string"&&(fn=st.from(fn,pn)),fn}Object.defineProperty(Vt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function zt(rn,fn,pn,vn,En,dn){if(!pn){var cn=kt(fn,vn,En);vn!==cn&&(pn=!0,En="buffer",vn=cn)}var _n=fn.objectMode?1:vn.length;fn.length+=_n;var wn=fn.length<fn.highWaterMark;if(wn||(fn.needDrain=!0),fn.writing||fn.corked){var Ln=fn.lastBufferedRequest;fn.lastBufferedRequest={chunk:vn,encoding:En,isBuf:pn,callback:dn,next:null},Ln?Ln.next=fn.lastBufferedRequest:fn.bufferedRequest=fn.lastBufferedRequest,fn.bufferedRequestCount+=1}else Nt(rn,fn,!1,_n,vn,En,dn);return wn}function Nt(rn,fn,pn,vn,En,dn,cn){fn.writelen=vn,fn.writecb=cn,fn.writing=!0,fn.sync=!0,fn.destroyed?fn.onwrite(new wt("write")):pn?rn._writev(En,fn.onwrite):rn._write(En,dn,fn.onwrite),fn.sync=!1}function Mt(rn,fn,pn,vn,En){--fn.pendingcb,pn?(process.nextTick(En,vn),process.nextTick(Zt,rn,fn),rn._writableState.errorEmitted=!0,Rt(rn,vn)):(En(vn),rn._writableState.errorEmitted=!0,Rt(rn,vn),Zt(rn,fn))}function Lt(rn){rn.writing=!1,rn.writecb=null,rn.length-=rn.writelen,rn.writelen=0}function Ht(rn,fn){var pn=rn._writableState,vn=pn.sync,En=pn.writecb;if(typeof En!="function")throw new Et;if(Lt(pn),fn)Mt(rn,pn,vn,fn,En);else{var dn=Kt(pn)||rn.destroyed;!dn&&!pn.corked&&!pn.bufferProcessing&&pn.bufferedRequest&&Bt(rn,pn),vn?process.nextTick(Qt,rn,pn,dn,En):Qt(rn,pn,dn,En)}}function Qt(rn,fn,pn,vn){pn||Ut(rn,fn),fn.pendingcb--,vn(),Zt(rn,fn)}function Ut(rn,fn){fn.length===0&&fn.needDrain&&(fn.needDrain=!1,rn.emit("drain"))}function Bt(rn,fn){fn.bufferProcessing=!0;var pn=fn.bufferedRequest;if(rn._writev&&pn&&pn.next){var vn=fn.bufferedRequestCount,En=new Array(vn),dn=fn.corkedRequestsFree;dn.entry=pn;for(var cn=0,_n=!0;pn;)En[cn]=pn,pn.isBuf||(_n=!1),pn=pn.next,cn+=1;En.allBuffers=_n,Nt(rn,fn,!0,fn.length,En,"",dn.finish),fn.pendingcb++,fn.lastBufferedRequest=null,dn.next?(fn.corkedRequestsFree=dn.next,dn.next=null):fn.corkedRequestsFree=new it(fn),fn.bufferedRequestCount=0}else{for(;pn;){var wn=pn.chunk,Ln=pn.encoding,yn=pn.callback,nn=fn.objectMode?1:wn.length;if(Nt(rn,fn,!1,nn,wn,Ln,yn),pn=pn.next,fn.bufferedRequestCount--,fn.writing)break}pn===null&&(fn.lastBufferedRequest=null)}fn.bufferedRequest=pn,fn.bufferProcessing=!1}Vt.prototype._write=function(rn,fn,pn){pn(new xt("_write()"))},Vt.prototype._writev=null,Vt.prototype.end=function(rn,fn,pn){var vn=this._writableState;return typeof rn=="function"?(pn=rn,rn=null,fn=null):typeof fn=="function"&&(pn=fn,fn=null),rn!=null&&this.write(rn,fn),vn.corked&&(vn.corked=1,this.uncork()),vn.ending||an(this,vn,pn),this},Object.defineProperty(Vt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Kt(rn){return rn.ending&&rn.length===0&&rn.bufferedRequest===null&&!rn.finished&&!rn.writing}function Gt(rn,fn){rn._final(function(pn){fn.pendingcb--,pn&&Rt(rn,pn),fn.prefinished=!0,rn.emit("prefinish"),Zt(rn,fn)})}function Pt(rn,fn){!fn.prefinished&&!fn.finalCalled&&(typeof rn._final=="function"&&!fn.destroyed?(fn.pendingcb++,fn.finalCalled=!0,process.nextTick(Gt,rn,fn)):(fn.prefinished=!0,rn.emit("prefinish")))}function Zt(rn,fn){var pn=Kt(fn);if(pn&&(Pt(rn,fn),fn.pendingcb===0&&(fn.finished=!0,rn.emit("finish"),fn.autoDestroy))){var vn=rn._readableState;(!vn||vn.autoDestroy&&vn.endEmitted)&&rn.destroy()}return pn}function an(rn,fn,pn){fn.ending=!0,Zt(rn,fn),pn&&(fn.finished?process.nextTick(pn):rn.once("finish",pn)),fn.ended=!0,rn.writable=!1}function Jt(rn,fn,pn){var vn=rn.entry;for(rn.entry=null;vn;){var En=vn.callback;fn.pendingcb--,En(pn),vn=vn.next}fn.corkedRequestsFree.next=rn}return Object.defineProperty(Vt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(fn){!this._writableState||(this._writableState.destroyed=fn)}}),Vt.prototype.destroy=ht.destroy,Vt.prototype._undestroy=ht.undestroy,Vt.prototype._destroy=function(rn,fn){fn(rn)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var it=Object.keys||function(mt){var bt=[];for(var vt in mt)bt.push(vt);return bt};_stream_duplex=lt;var tt=require_stream_readable(),rt=require_stream_writable();inherits_browser$1.exports(lt,tt);for(var at=it(rt.prototype),st=0;st<at.length;st++){var ot=at[st];lt.prototype[ot]||(lt.prototype[ot]=rt.prototype[ot])}function lt(mt){if(!(this instanceof lt))return new lt(mt);tt.call(this,mt),rt.call(this,mt),this.allowHalfOpen=!0,mt&&(mt.readable===!1&&(this.readable=!1),mt.writable===!1&&(this.writable=!1),mt.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ut)))}Object.defineProperty(lt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(lt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(lt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ut(){this._writableState.ended||process.nextTick(ht,this)}function ht(mt){mt.end()}return Object.defineProperty(lt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(bt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=bt,this._writableState.destroyed=bt)}}),_stream_duplex}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var it=safeBuffer.exports.Buffer,tt=it.isEncoding||function(Ct){switch(Ct=""+Ct,Ct&&Ct.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function rt(Ct){if(!Ct)return"utf8";for(var It;;)switch(Ct){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Ct;default:if(It)return;Ct=(""+Ct).toLowerCase(),It=!0}}function at(Ct){var It=rt(Ct);if(typeof It!="string"&&(it.isEncoding===tt||!tt(Ct)))throw new Error("Unknown encoding: "+Ct);return It||Ct}string_decoder.StringDecoder=st;function st(Ct){this.encoding=at(Ct);var It;switch(this.encoding){case"utf16le":this.text=vt,this.end=At,It=4;break;case"utf8":this.fillLast=ht,It=4;break;case"base64":this.text=xt,this.end=Et,It=3;break;default:this.write=Tt,this.end=wt;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=it.allocUnsafe(It)}st.prototype.write=function(Ct){if(Ct.length===0)return"";var It,St;if(this.lastNeed){if(It=this.fillLast(Ct),It===void 0)return"";St=this.lastNeed,this.lastNeed=0}else St=0;return St<Ct.length?It?It+this.text(Ct,St):this.text(Ct,St):It||""},st.prototype.end=bt,st.prototype.text=mt,st.prototype.fillLast=function(Ct){if(this.lastNeed<=Ct.length)return Ct.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Ct.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Ct.length),this.lastNeed-=Ct.length};function ot(Ct){return Ct<=127?0:Ct>>5===6?2:Ct>>4===14?3:Ct>>3===30?4:Ct>>6===2?-1:-2}function lt(Ct,It,St){var Rt=It.length-1;if(Rt<St)return 0;var Dt=ot(It[Rt]);return Dt>=0?(Dt>0&&(Ct.lastNeed=Dt-1),Dt):--Rt<St||Dt===-2?0:(Dt=ot(It[Rt]),Dt>=0?(Dt>0&&(Ct.lastNeed=Dt-2),Dt):--Rt<St||Dt===-2?0:(Dt=ot(It[Rt]),Dt>=0?(Dt>0&&(Dt===2?Dt=0:Ct.lastNeed=Dt-3),Dt):0))}function ut(Ct,It,St){if((It[0]&192)!==128)return Ct.lastNeed=0,"\uFFFD";if(Ct.lastNeed>1&&It.length>1){if((It[1]&192)!==128)return Ct.lastNeed=1,"\uFFFD";if(Ct.lastNeed>2&&It.length>2&&(It[2]&192)!==128)return Ct.lastNeed=2,"\uFFFD"}}function ht(Ct){var It=this.lastTotal-this.lastNeed,St=ut(this,Ct);if(St!==void 0)return St;if(this.lastNeed<=Ct.length)return Ct.copy(this.lastChar,It,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Ct.copy(this.lastChar,It,0,Ct.length),this.lastNeed-=Ct.length}function mt(Ct,It){var St=lt(this,Ct,It);if(!this.lastNeed)return Ct.toString("utf8",It);this.lastTotal=St;var Rt=Ct.length-(St-this.lastNeed);return Ct.copy(this.lastChar,0,Rt),Ct.toString("utf8",It,Rt)}function bt(Ct){var It=Ct&&Ct.length?this.write(Ct):"";return this.lastNeed?It+"\uFFFD":It}function vt(Ct,It){if((Ct.length-It)%2===0){var St=Ct.toString("utf16le",It);if(St){var Rt=St.charCodeAt(St.length-1);if(Rt>=55296&&Rt<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Ct[Ct.length-2],this.lastChar[1]=Ct[Ct.length-1],St.slice(0,-1)}return St}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Ct[Ct.length-1],Ct.toString("utf16le",It,Ct.length-1)}function At(Ct){var It=Ct&&Ct.length?this.write(Ct):"";if(this.lastNeed){var St=this.lastTotal-this.lastNeed;return It+this.lastChar.toString("utf16le",0,St)}return It}function xt(Ct,It){var St=(Ct.length-It)%3;return St===0?Ct.toString("base64",It):(this.lastNeed=3-St,this.lastTotal=3,St===1?this.lastChar[0]=Ct[Ct.length-1]:(this.lastChar[0]=Ct[Ct.length-2],this.lastChar[1]=Ct[Ct.length-1]),Ct.toString("base64",It,Ct.length-St))}function Et(Ct){var It=Ct&&Ct.length?this.write(Ct):"";return this.lastNeed?It+this.lastChar.toString("base64",0,3-this.lastNeed):It}function Tt(Ct){return Ct.toString(this.encoding)}function wt(Ct){return Ct&&Ct.length?this.write(Ct):""}return string_decoder}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(it){var tt=!1;return function(){if(!tt){tt=!0;for(var rt=arguments.length,at=new Array(rt),st=0;st<rt;st++)at[st]=arguments[st];it.apply(this,at)}}}function noop$5(){}function isRequest$1(it){return it.setHeader&&typeof it.abort=="function"}function eos$1(it,tt,rt){if(typeof tt=="function")return eos$1(it,null,tt);tt||(tt={}),rt=once$1(rt||noop$5);var at=tt.readable||tt.readable!==!1&&it.readable,st=tt.writable||tt.writable!==!1&&it.writable,ot=function(){it.writable||ut()},lt=it._writableState&&it._writableState.finished,ut=function(){st=!1,lt=!0,at||rt.call(it)},ht=it._readableState&&it._readableState.endEmitted,mt=function(){at=!1,ht=!0,st||rt.call(it)},bt=function(Et){rt.call(it,Et)},vt=function(){var Et;if(at&&!ht)return(!it._readableState||!it._readableState.ended)&&(Et=new ERR_STREAM_PREMATURE_CLOSE),rt.call(it,Et);if(st&&!lt)return(!it._writableState||!it._writableState.ended)&&(Et=new ERR_STREAM_PREMATURE_CLOSE),rt.call(it,Et)},At=function(){it.req.on("finish",ut)};return isRequest$1(it)?(it.on("complete",ut),it.on("abort",vt),it.req?At():it.on("request",At)):st&&!it._writableState&&(it.on("end",ot),it.on("close",ot)),it.on("end",mt),it.on("finish",ut),tt.error!==!1&&it.on("error",bt),it.on("close",vt),function(){it.removeListener("complete",ut),it.removeListener("abort",vt),it.removeListener("request",At),it.req&&it.req.removeListener("finish",ut),it.removeListener("end",ot),it.removeListener("close",ot),it.removeListener("finish",ut),it.removeListener("end",mt),it.removeListener("error",bt),it.removeListener("close",vt)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var it;function tt(St,Rt,Dt){return Rt=rt(Rt),Rt in St?Object.defineProperty(St,Rt,{value:Dt,enumerable:!0,configurable:!0,writable:!0}):St[Rt]=Dt,St}function rt(St){var Rt=at(St,"string");return typeof Rt=="symbol"?Rt:String(Rt)}function at(St,Rt){if(typeof St!="object"||St===null)return St;var Dt=St[Symbol.toPrimitive];if(Dt!==void 0){var Wt=Dt.call(St,Rt||"default");if(typeof Wt!="object")return Wt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Rt==="string"?String:Number)(St)}var st=endOfStream,ot=Symbol("lastResolve"),lt=Symbol("lastReject"),ut=Symbol("error"),ht=Symbol("ended"),mt=Symbol("lastPromise"),bt=Symbol("handlePromise"),vt=Symbol("stream");function At(St,Rt){return{value:St,done:Rt}}function xt(St){var Rt=St[ot];if(Rt!==null){var Dt=St[vt].read();Dt!==null&&(St[mt]=null,St[ot]=null,St[lt]=null,Rt(At(Dt,!1)))}}function Et(St){process.nextTick(xt,St)}function Tt(St,Rt){return function(Dt,Wt){St.then(function(){if(Rt[ht]){Dt(At(void 0,!0));return}Rt[bt](Dt,Wt)},Wt)}}var wt=Object.getPrototypeOf(function(){}),Ct=Object.setPrototypeOf((it={get stream(){return this[vt]},next:function(){var Rt=this,Dt=this[ut];if(Dt!==null)return Promise.reject(Dt);if(this[ht])return Promise.resolve(At(void 0,!0));if(this[vt].destroyed)return new Promise(function(Yt,jt){process.nextTick(function(){Rt[ut]?jt(Rt[ut]):Yt(At(void 0,!0))})});var Wt=this[mt],qt;if(Wt)qt=new Promise(Tt(Wt,this));else{var Vt=this[vt].read();if(Vt!==null)return Promise.resolve(At(Vt,!1));qt=new Promise(this[bt])}return this[mt]=qt,qt}},tt(it,Symbol.asyncIterator,function(){return this}),tt(it,"return",function(){var Rt=this;return new Promise(function(Dt,Wt){Rt[vt].destroy(null,function(qt){if(qt){Wt(qt);return}Dt(At(void 0,!0))})})}),it),wt),It=function(Rt){var Dt,Wt=Object.create(Ct,(Dt={},tt(Dt,vt,{value:Rt,writable:!0}),tt(Dt,ot,{value:null,writable:!0}),tt(Dt,lt,{value:null,writable:!0}),tt(Dt,ut,{value:null,writable:!0}),tt(Dt,ht,{value:Rt._readableState.endEmitted,writable:!0}),tt(Dt,bt,{value:function(Vt,Yt){var jt=Wt[vt].read();jt?(Wt[mt]=null,Wt[ot]=null,Wt[lt]=null,Vt(At(jt,!1))):(Wt[ot]=Vt,Wt[lt]=Yt)},writable:!0}),Dt));return Wt[mt]=null,st(Rt,function(qt){if(qt&&qt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Vt=Wt[lt];Vt!==null&&(Wt[mt]=null,Wt[ot]=null,Wt[lt]=null,Vt(qt)),Wt[ut]=qt;return}var Yt=Wt[ot];Yt!==null&&(Wt[mt]=null,Wt[ot]=null,Wt[lt]=null,Yt(At(void 0,!0))),Wt[ht]=!0}),Rt.on("readable",Et.bind(null,Wt)),Wt};return async_iterator=It,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=Yt;var it;Yt.ReadableState=Vt,events.exports.EventEmitter;var tt=function(cn,_n){return cn.listeners(_n).length},rt=streamBrowser,at=buffer$2.Buffer,st=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function ot(dn){return at.from(dn)}function lt(dn){return at.isBuffer(dn)||dn instanceof st}var ut=require$$0$5,ht;ut&&ut.debuglog?ht=ut.debuglog("stream"):ht=function(){};var mt=requireBuffer_list(),bt=destroy_1,vt=state,At=vt.getHighWaterMark,xt=errorsBrowser.codes,Et=xt.ERR_INVALID_ARG_TYPE,Tt=xt.ERR_STREAM_PUSH_AFTER_EOF,wt=xt.ERR_METHOD_NOT_IMPLEMENTED,Ct=xt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,It,St,Rt;inherits_browser$1.exports(Yt,rt);var Dt=bt.errorOrDestroy,Wt=["error","close","destroy","pause","resume"];function qt(dn,cn,_n){if(typeof dn.prependListener=="function")return dn.prependListener(cn,_n);!dn._events||!dn._events[cn]?dn.on(cn,_n):Array.isArray(dn._events[cn])?dn._events[cn].unshift(_n):dn._events[cn]=[_n,dn._events[cn]]}function Vt(dn,cn,_n){it=it||require_stream_duplex(),dn=dn||{},typeof _n!="boolean"&&(_n=cn instanceof it),this.objectMode=!!dn.objectMode,_n&&(this.objectMode=this.objectMode||!!dn.readableObjectMode),this.highWaterMark=At(this,dn,"readableHighWaterMark",_n),this.buffer=new mt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=dn.emitClose!==!1,this.autoDestroy=!!dn.autoDestroy,this.destroyed=!1,this.defaultEncoding=dn.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,dn.encoding&&(It||(It=requireString_decoder().StringDecoder),this.decoder=new It(dn.encoding),this.encoding=dn.encoding)}function Yt(dn){if(it=it||require_stream_duplex(),!(this instanceof Yt))return new Yt(dn);var cn=this instanceof it;this._readableState=new Vt(dn,this,cn),this.readable=!0,dn&&(typeof dn.read=="function"&&(this._read=dn.read),typeof dn.destroy=="function"&&(this._destroy=dn.destroy)),rt.call(this)}Object.defineProperty(Yt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(cn){!this._readableState||(this._readableState.destroyed=cn)}}),Yt.prototype.destroy=bt.destroy,Yt.prototype._undestroy=bt.undestroy,Yt.prototype._destroy=function(dn,cn){cn(dn)},Yt.prototype.push=function(dn,cn){var _n=this._readableState,wn;return _n.objectMode?wn=!0:typeof dn=="string"&&(cn=cn||_n.defaultEncoding,cn!==_n.encoding&&(dn=at.from(dn,cn),cn=""),wn=!0),jt(this,dn,cn,!1,wn)},Yt.prototype.unshift=function(dn){return jt(this,dn,null,!0,!1)};function jt(dn,cn,_n,wn,Ln){ht("readableAddChunk",cn);var yn=dn._readableState;if(cn===null)yn.reading=!1,Ht(dn,yn);else{var nn;if(Ln||(nn=zt(yn,cn)),nn)Dt(dn,nn);else if(yn.objectMode||cn&&cn.length>0)if(typeof cn!="string"&&!yn.objectMode&&Object.getPrototypeOf(cn)!==at.prototype&&(cn=ot(cn)),wn)yn.endEmitted?Dt(dn,new Ct):kt(dn,yn,cn,!0);else if(yn.ended)Dt(dn,new Tt);else{if(yn.destroyed)return!1;yn.reading=!1,yn.decoder&&!_n?(cn=yn.decoder.write(cn),yn.objectMode||cn.length!==0?kt(dn,yn,cn,!1):Bt(dn,yn)):kt(dn,yn,cn,!1)}else wn||(yn.reading=!1,Bt(dn,yn))}return!yn.ended&&(yn.length<yn.highWaterMark||yn.length===0)}function kt(dn,cn,_n,wn){cn.flowing&&cn.length===0&&!cn.sync?(cn.awaitDrain=0,dn.emit("data",_n)):(cn.length+=cn.objectMode?1:_n.length,wn?cn.buffer.unshift(_n):cn.buffer.push(_n),cn.needReadable&&Qt(dn)),Bt(dn,cn)}function zt(dn,cn){var _n;return!lt(cn)&&typeof cn!="string"&&cn!==void 0&&!dn.objectMode&&(_n=new Et("chunk",["string","Buffer","Uint8Array"],cn)),_n}Yt.prototype.isPaused=function(){return this._readableState.flowing===!1},Yt.prototype.setEncoding=function(dn){It||(It=requireString_decoder().StringDecoder);var cn=new It(dn);this._readableState.decoder=cn,this._readableState.encoding=this._readableState.decoder.encoding;for(var _n=this._readableState.buffer.head,wn="";_n!==null;)wn+=cn.write(_n.data),_n=_n.next;return this._readableState.buffer.clear(),wn!==""&&this._readableState.buffer.push(wn),this._readableState.length=wn.length,this};var Nt=1073741824;function Mt(dn){return dn>=Nt?dn=Nt:(dn--,dn|=dn>>>1,dn|=dn>>>2,dn|=dn>>>4,dn|=dn>>>8,dn|=dn>>>16,dn++),dn}function Lt(dn,cn){return dn<=0||cn.length===0&&cn.ended?0:cn.objectMode?1:dn!==dn?cn.flowing&&cn.length?cn.buffer.head.data.length:cn.length:(dn>cn.highWaterMark&&(cn.highWaterMark=Mt(dn)),dn<=cn.length?dn:cn.ended?cn.length:(cn.needReadable=!0,0))}Yt.prototype.read=function(dn){ht("read",dn),dn=parseInt(dn,10);var cn=this._readableState,_n=dn;if(dn!==0&&(cn.emittedReadable=!1),dn===0&&cn.needReadable&&((cn.highWaterMark!==0?cn.length>=cn.highWaterMark:cn.length>0)||cn.ended))return ht("read: emitReadable",cn.length,cn.ended),cn.length===0&&cn.ended?pn(this):Qt(this),null;if(dn=Lt(dn,cn),dn===0&&cn.ended)return cn.length===0&&pn(this),null;var wn=cn.needReadable;ht("need readable",wn),(cn.length===0||cn.length-dn<cn.highWaterMark)&&(wn=!0,ht("length less than watermark",wn)),cn.ended||cn.reading?(wn=!1,ht("reading or ended",wn)):wn&&(ht("do read"),cn.reading=!0,cn.sync=!0,cn.length===0&&(cn.needReadable=!0),this._read(cn.highWaterMark),cn.sync=!1,cn.reading||(dn=Lt(_n,cn)));var Ln;return dn>0?Ln=fn(dn,cn):Ln=null,Ln===null?(cn.needReadable=cn.length<=cn.highWaterMark,dn=0):(cn.length-=dn,cn.awaitDrain=0),cn.length===0&&(cn.ended||(cn.needReadable=!0),_n!==dn&&cn.ended&&pn(this)),Ln!==null&&this.emit("data",Ln),Ln};function Ht(dn,cn){if(ht("onEofChunk"),!cn.ended){if(cn.decoder){var _n=cn.decoder.end();_n&&_n.length&&(cn.buffer.push(_n),cn.length+=cn.objectMode?1:_n.length)}cn.ended=!0,cn.sync?Qt(dn):(cn.needReadable=!1,cn.emittedReadable||(cn.emittedReadable=!0,Ut(dn)))}}function Qt(dn){var cn=dn._readableState;ht("emitReadable",cn.needReadable,cn.emittedReadable),cn.needReadable=!1,cn.emittedReadable||(ht("emitReadable",cn.flowing),cn.emittedReadable=!0,process.nextTick(Ut,dn))}function Ut(dn){var cn=dn._readableState;ht("emitReadable_",cn.destroyed,cn.length,cn.ended),!cn.destroyed&&(cn.length||cn.ended)&&(dn.emit("readable"),cn.emittedReadable=!1),cn.needReadable=!cn.flowing&&!cn.ended&&cn.length<=cn.highWaterMark,rn(dn)}function Bt(dn,cn){cn.readingMore||(cn.readingMore=!0,process.nextTick(Kt,dn,cn))}function Kt(dn,cn){for(;!cn.reading&&!cn.ended&&(cn.length<cn.highWaterMark||cn.flowing&&cn.length===0);){var _n=cn.length;if(ht("maybeReadMore read 0"),dn.read(0),_n===cn.length)break}cn.readingMore=!1}Yt.prototype._read=function(dn){Dt(this,new wt("_read()"))},Yt.prototype.pipe=function(dn,cn){var _n=this,wn=this._readableState;switch(wn.pipesCount){case 0:wn.pipes=dn;break;case 1:wn.pipes=[wn.pipes,dn];break;default:wn.pipes.push(dn);break}wn.pipesCount+=1,ht("pipe count=%d opts=%j",wn.pipesCount,cn);var Ln=(!cn||cn.end!==!1)&&dn!==process.stdout&&dn!==process.stderr,yn=Ln?sn:Dn;wn.endEmitted?process.nextTick(yn):_n.once("end",yn),dn.on("unpipe",nn);function nn(on,Xt){ht("onunpipe"),on===_n&&Xt&&Xt.hasUnpiped===!1&&(Xt.hasUnpiped=!0,$n())}function sn(){ht("onend"),dn.end()}var hn=Gt(_n);dn.on("drain",hn);var Cn=!1;function $n(){ht("cleanup"),dn.removeListener("close",Mn),dn.removeListener("finish",On),dn.removeListener("drain",hn),dn.removeListener("error",mn),dn.removeListener("unpipe",nn),_n.removeListener("end",sn),_n.removeListener("end",Dn),_n.removeListener("data",gn),Cn=!0,wn.awaitDrain&&(!dn._writableState||dn._writableState.needDrain)&&hn()}_n.on("data",gn);function gn(on){ht("ondata");var Xt=dn.write(on);ht("dest.write",Xt),Xt===!1&&((wn.pipesCount===1&&wn.pipes===dn||wn.pipesCount>1&&En(wn.pipes,dn)!==-1)&&!Cn&&(ht("false write response, pause",wn.awaitDrain),wn.awaitDrain++),_n.pause())}function mn(on){ht("onerror",on),Dn(),dn.removeListener("error",mn),tt(dn,"error")===0&&Dt(dn,on)}qt(dn,"error",mn);function Mn(){dn.removeListener("finish",On),Dn()}dn.once("close",Mn);function On(){ht("onfinish"),dn.removeListener("close",Mn),Dn()}dn.once("finish",On);function Dn(){ht("unpipe"),_n.unpipe(dn)}return dn.emit("pipe",_n),wn.flowing||(ht("pipe resume"),_n.resume()),dn};function Gt(dn){return function(){var _n=dn._readableState;ht("pipeOnDrain",_n.awaitDrain),_n.awaitDrain&&_n.awaitDrain--,_n.awaitDrain===0&&tt(dn,"data")&&(_n.flowing=!0,rn(dn))}}Yt.prototype.unpipe=function(dn){var cn=this._readableState,_n={hasUnpiped:!1};if(cn.pipesCount===0)return this;if(cn.pipesCount===1)return dn&&dn!==cn.pipes?this:(dn||(dn=cn.pipes),cn.pipes=null,cn.pipesCount=0,cn.flowing=!1,dn&&dn.emit("unpipe",this,_n),this);if(!dn){var wn=cn.pipes,Ln=cn.pipesCount;cn.pipes=null,cn.pipesCount=0,cn.flowing=!1;for(var yn=0;yn<Ln;yn++)wn[yn].emit("unpipe",this,{hasUnpiped:!1});return this}var nn=En(cn.pipes,dn);return nn===-1?this:(cn.pipes.splice(nn,1),cn.pipesCount-=1,cn.pipesCount===1&&(cn.pipes=cn.pipes[0]),dn.emit("unpipe",this,_n),this)},Yt.prototype.on=function(dn,cn){var _n=rt.prototype.on.call(this,dn,cn),wn=this._readableState;return dn==="data"?(wn.readableListening=this.listenerCount("readable")>0,wn.flowing!==!1&&this.resume()):dn==="readable"&&!wn.endEmitted&&!wn.readableListening&&(wn.readableListening=wn.needReadable=!0,wn.flowing=!1,wn.emittedReadable=!1,ht("on readable",wn.length,wn.reading),wn.length?Qt(this):wn.reading||process.nextTick(Zt,this)),_n},Yt.prototype.addListener=Yt.prototype.on,Yt.prototype.removeListener=function(dn,cn){var _n=rt.prototype.removeListener.call(this,dn,cn);return dn==="readable"&&process.nextTick(Pt,this),_n},Yt.prototype.removeAllListeners=function(dn){var cn=rt.prototype.removeAllListeners.apply(this,arguments);return(dn==="readable"||dn===void 0)&&process.nextTick(Pt,this),cn};function Pt(dn){var cn=dn._readableState;cn.readableListening=dn.listenerCount("readable")>0,cn.resumeScheduled&&!cn.paused?cn.flowing=!0:dn.listenerCount("data")>0&&dn.resume()}function Zt(dn){ht("readable nexttick read 0"),dn.read(0)}Yt.prototype.resume=function(){var dn=this._readableState;return dn.flowing||(ht("resume"),dn.flowing=!dn.readableListening,an(this,dn)),dn.paused=!1,this};function an(dn,cn){cn.resumeScheduled||(cn.resumeScheduled=!0,process.nextTick(Jt,dn,cn))}function Jt(dn,cn){ht("resume",cn.reading),cn.reading||dn.read(0),cn.resumeScheduled=!1,dn.emit("resume"),rn(dn),cn.flowing&&!cn.reading&&dn.read(0)}Yt.prototype.pause=function(){return ht("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ht("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function rn(dn){var cn=dn._readableState;for(ht("flow",cn.flowing);cn.flowing&&dn.read()!==null;);}Yt.prototype.wrap=function(dn){var cn=this,_n=this._readableState,wn=!1;dn.on("end",function(){if(ht("wrapped end"),_n.decoder&&!_n.ended){var nn=_n.decoder.end();nn&&nn.length&&cn.push(nn)}cn.push(null)}),dn.on("data",function(nn){if(ht("wrapped data"),_n.decoder&&(nn=_n.decoder.write(nn)),!(_n.objectMode&&nn==null)&&!(!_n.objectMode&&(!nn||!nn.length))){var sn=cn.push(nn);sn||(wn=!0,dn.pause())}});for(var Ln in dn)this[Ln]===void 0&&typeof dn[Ln]=="function"&&(this[Ln]=function(sn){return function(){return dn[sn].apply(dn,arguments)}}(Ln));for(var yn=0;yn<Wt.length;yn++)dn.on(Wt[yn],this.emit.bind(this,Wt[yn]));return this._read=function(nn){ht("wrapped _read",nn),wn&&(wn=!1,dn.resume())},this},typeof Symbol=="function"&&(Yt.prototype[Symbol.asyncIterator]=function(){return St===void 0&&(St=requireAsync_iterator()),St(this)}),Object.defineProperty(Yt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Yt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Yt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(cn){this._readableState&&(this._readableState.flowing=cn)}}),Yt._fromList=fn,Object.defineProperty(Yt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function fn(dn,cn){if(cn.length===0)return null;var _n;return cn.objectMode?_n=cn.buffer.shift():!dn||dn>=cn.length?(cn.decoder?_n=cn.buffer.join(""):cn.buffer.length===1?_n=cn.buffer.first():_n=cn.buffer.concat(cn.length),cn.buffer.clear()):_n=cn.buffer.consume(dn,cn.decoder),_n}function pn(dn){var cn=dn._readableState;ht("endReadable",cn.endEmitted),cn.endEmitted||(cn.ended=!0,process.nextTick(vn,cn,dn))}function vn(dn,cn){if(ht("endReadableNT",dn.endEmitted,dn.length),!dn.endEmitted&&dn.length===0&&(dn.endEmitted=!0,cn.readable=!1,cn.emit("end"),dn.autoDestroy)){var _n=cn._writableState;(!_n||_n.autoDestroy&&_n.finished)&&cn.destroy()}}typeof Symbol=="function"&&(Yt.from=function(dn,cn){return Rt===void 0&&(Rt=requireFromBrowser()),Rt(Yt,dn,cn)});function En(dn,cn){for(var _n=0,wn=dn.length;_n<wn;_n++)if(dn[_n]===cn)return _n;return-1}return _stream_readable}var _stream_transform=Transform$3,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browser$1.exports(Transform$3,Duplex);function afterTransform(it,tt){var rt=this._transformState;rt.transforming=!1;var at=rt.writecb;if(at===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);rt.writechunk=null,rt.writecb=null,tt!=null&&this.push(tt),at(it);var st=this._readableState;st.reading=!1,(st.needReadable||st.length<st.highWaterMark)&&this._read(st.highWaterMark)}function Transform$3(it){if(!(this instanceof Transform$3))return new Transform$3(it);Duplex.call(this,it),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,it&&(typeof it.transform=="function"&&(this._transform=it.transform),typeof it.flush=="function"&&(this._flush=it.flush)),this.on("prefinish",prefinish)}function prefinish(){var it=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(tt,rt){done(it,tt,rt)}):done(this,null,null)}Transform$3.prototype.push=function(it,tt){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,it,tt)},Transform$3.prototype._transform=function(it,tt,rt){rt(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform$3.prototype._write=function(it,tt,rt){var at=this._transformState;if(at.writecb=rt,at.writechunk=it,at.writeencoding=tt,!at.transforming){var st=this._readableState;(at.needTransform||st.needReadable||st.length<st.highWaterMark)&&this._read(st.highWaterMark)}},Transform$3.prototype._read=function(it){var tt=this._transformState;tt.writechunk!==null&&!tt.transforming?(tt.transforming=!0,this._transform(tt.writechunk,tt.writeencoding,tt.afterTransform)):tt.needTransform=!0},Transform$3.prototype._destroy=function(it,tt){Duplex.prototype._destroy.call(this,it,function(rt){tt(rt)})};function done(it,tt,rt){if(tt)return it.emit("error",tt);if(rt!=null&&it.push(rt),it._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(it._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return it.push(null)}var _stream_passthrough=PassThrough,Transform$2=_stream_transform;inherits_browser$1.exports(PassThrough,Transform$2);function PassThrough(it){if(!(this instanceof PassThrough))return new PassThrough(it);Transform$2.call(this,it)}PassThrough.prototype._transform=function(it,tt,rt){rt(null,it)};var eos;function once(it){var tt=!1;return function(){tt||(tt=!0,it.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop$4(it){if(it)throw it}function isRequest(it){return it.setHeader&&typeof it.abort=="function"}function destroyer(it,tt,rt,at){at=once(at);var st=!1;it.on("close",function(){st=!0}),eos===void 0&&(eos=endOfStream),eos(it,{readable:tt,writable:rt},function(lt){if(lt)return at(lt);st=!0,at()});var ot=!1;return function(lt){if(!st&&!ot){if(ot=!0,isRequest(it))return it.abort();if(typeof it.destroy=="function")return it.destroy();at(lt||new ERR_STREAM_DESTROYED("pipe"))}}}function call(it){it()}function pipe$1(it,tt){return it.pipe(tt)}function popCallback(it){return!it.length||typeof it[it.length-1]!="function"?noop$4:it.pop()}function pipeline(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];var at=popCallback(tt);if(Array.isArray(tt[0])&&(tt=tt[0]),tt.length<2)throw new ERR_MISSING_ARGS("streams");var st,ot=tt.map(function(lt,ut){var ht=ut<tt.length-1,mt=ut>0;return destroyer(lt,ht,mt,function(bt){st||(st=bt),bt&&ot.forEach(call),!ht&&(ot.forEach(call),at(st))})});return tt.reduce(pipe$1)}var pipeline_1=pipeline;(function(it,tt){tt=it.exports=require_stream_readable(),tt.Stream=tt,tt.Readable=tt,tt.Writable=require_stream_writable(),tt.Duplex=require_stream_duplex(),tt.Transform=_stream_transform,tt.PassThrough=_stream_passthrough,tt.finished=endOfStream,tt.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);const{Transform:Transform$1}=readableBrowser.exports;var keccak$2=it=>class Lr extends Transform$1{constructor(rt,at,st,ot,lt){super(lt),this._rate=rt,this._capacity=at,this._delimitedSuffix=st,this._hashBitLength=ot,this._options=lt,this._state=new it,this._state.initialize(rt,at),this._finalized=!1}_transform(rt,at,st){let ot=null;try{this.update(rt,at)}catch(lt){ot=lt}st(ot)}_flush(rt){let at=null;try{this.push(this.digest())}catch(st){at=st}rt(at)}update(rt,at){if(!Buffer.isBuffer(rt)&&typeof rt!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(rt)||(rt=Buffer.from(rt,at)),this._state.absorb(rt),this}digest(rt){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let at=this._state.squeeze(this._hashBitLength/8);return rt!==void 0&&(at=at.toString(rt)),this._resetState(),at}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const rt=new Lr(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(rt._state),rt._finalized=this._finalized,rt}};const{Transform}=readableBrowser.exports;var shake=it=>class Nr extends Transform{constructor(rt,at,st,ot){super(ot),this._rate=rt,this._capacity=at,this._delimitedSuffix=st,this._options=ot,this._state=new it,this._state.initialize(rt,at),this._finalized=!1}_transform(rt,at,st){let ot=null;try{this.update(rt,at)}catch(lt){ot=lt}st(ot)}_flush(){}_read(rt){this.push(this.squeeze(rt))}update(rt,at){if(!Buffer.isBuffer(rt)&&typeof rt!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(rt)||(rt=Buffer.from(rt,at)),this._state.absorb(rt),this}squeeze(rt,at){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let st=this._state.squeeze(rt);return at!==void 0&&(st=st.toString(at)),st}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const rt=new Nr(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(rt._state),rt._finalized=this._finalized,rt}};const createKeccak=keccak$2,createShake=shake;var api=function(it){const tt=createKeccak(it),rt=createShake(it);return function(at,st){switch(typeof at=="string"?at.toLowerCase():at){case"keccak224":return new tt(1152,448,null,224,st);case"keccak256":return new tt(1088,512,null,256,st);case"keccak384":return new tt(832,768,null,384,st);case"keccak512":return new tt(576,1024,null,512,st);case"sha3-224":return new tt(1152,448,6,224,st);case"sha3-256":return new tt(1088,512,6,256,st);case"sha3-384":return new tt(832,768,6,384,st);case"sha3-512":return new tt(576,1024,6,512,st);case"shake128":return new rt(1344,256,31,st);case"shake256":return new rt(1088,512,31,st);default:throw new Error("Invald algorithm: "+at)}}},keccakStateUnroll={};const P1600_ROUND_CONSTANTS=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];keccakStateUnroll.p1600=function(it){for(let tt=0;tt<24;++tt){const rt=it[0]^it[10]^it[20]^it[30]^it[40],at=it[1]^it[11]^it[21]^it[31]^it[41],st=it[2]^it[12]^it[22]^it[32]^it[42],ot=it[3]^it[13]^it[23]^it[33]^it[43],lt=it[4]^it[14]^it[24]^it[34]^it[44],ut=it[5]^it[15]^it[25]^it[35]^it[45],ht=it[6]^it[16]^it[26]^it[36]^it[46],mt=it[7]^it[17]^it[27]^it[37]^it[47],bt=it[8]^it[18]^it[28]^it[38]^it[48],vt=it[9]^it[19]^it[29]^it[39]^it[49];let At=bt^(st<<1|ot>>>31),xt=vt^(ot<<1|st>>>31);const Et=it[0]^At,Tt=it[1]^xt,wt=it[10]^At,Ct=it[11]^xt,It=it[20]^At,St=it[21]^xt,Rt=it[30]^At,Dt=it[31]^xt,Wt=it[40]^At,qt=it[41]^xt;At=rt^(lt<<1|ut>>>31),xt=at^(ut<<1|lt>>>31);const Vt=it[2]^At,Yt=it[3]^xt,jt=it[12]^At,kt=it[13]^xt,zt=it[22]^At,Nt=it[23]^xt,Mt=it[32]^At,Lt=it[33]^xt,Ht=it[42]^At,Qt=it[43]^xt;At=st^(ht<<1|mt>>>31),xt=ot^(mt<<1|ht>>>31);const Ut=it[4]^At,Bt=it[5]^xt,Kt=it[14]^At,Gt=it[15]^xt,Pt=it[24]^At,Zt=it[25]^xt,an=it[34]^At,Jt=it[35]^xt,rn=it[44]^At,fn=it[45]^xt;At=lt^(bt<<1|vt>>>31),xt=ut^(vt<<1|bt>>>31);const pn=it[6]^At,vn=it[7]^xt,En=it[16]^At,dn=it[17]^xt,cn=it[26]^At,_n=it[27]^xt,wn=it[36]^At,Ln=it[37]^xt,yn=it[46]^At,nn=it[47]^xt;At=ht^(rt<<1|at>>>31),xt=mt^(at<<1|rt>>>31);const sn=it[8]^At,hn=it[9]^xt,Cn=it[18]^At,$n=it[19]^xt,gn=it[28]^At,mn=it[29]^xt,Mn=it[38]^At,On=it[39]^xt,Dn=it[48]^At,on=it[49]^xt,Xt=Et,tn=Tt,un=Ct<<4|wt>>>28,xn=wt<<4|Ct>>>28,Tn=It<<3|St>>>29,In=St<<3|It>>>29,jn=Dt<<9|Rt>>>23,Un=Rt<<9|Dt>>>23,zn=Wt<<18|qt>>>14,Xn=qt<<18|Wt>>>14,Gn=Vt<<1|Yt>>>31,Sn=Yt<<1|Vt>>>31,Fn=kt<<12|jt>>>20,Nn=jt<<12|kt>>>20,Wn=zt<<10|Nt>>>22,Kn=Nt<<10|zt>>>22,Hn=Lt<<13|Mt>>>19,Yn=Mt<<13|Lt>>>19,dr=Ht<<2|Qt>>>30,tr=Qt<<2|Ht>>>30,Qn=Bt<<30|Ut>>>2,mr=Ut<<30|Bt>>>2,Jn=Kt<<6|Gt>>>26,rr=Gt<<6|Kt>>>26,hr=Zt<<11|Pt>>>21,er=Pt<<11|Zt>>>21,ir=an<<15|Jt>>>17,An=Jt<<15|an>>>17,Rn=fn<<29|rn>>>3,Pn=rn<<29|fn>>>3,kn=pn<<28|vn>>>4,Bn=vn<<28|pn>>>4,Vn=dn<<23|En>>>9,nr=En<<23|dn>>>9,Zn=cn<<25|_n>>>7,qn=_n<<25|cn>>>7,cr=wn<<21|Ln>>>11,ar=Ln<<21|wn>>>11,sr=nn<<24|yn>>>8,ur=yn<<24|nn>>>8,yr=sn<<27|hn>>>5,_r=hn<<27|sn>>>5,xr=Cn<<20|$n>>>12,vr=$n<<20|Cn>>>12,lr=mn<<7|gn>>>25,wr=gn<<7|mn>>>25,pr=Mn<<8|On>>>24,gr=On<<8|Mn>>>24,Ar=Dn<<14|on>>>18,Tr=on<<14|Dn>>>18;it[0]=Xt^~Fn&hr,it[1]=tn^~Nn&er,it[10]=kn^~xr&Tn,it[11]=Bn^~vr&In,it[20]=Gn^~Jn&Zn,it[21]=Sn^~rr&qn,it[30]=yr^~un&Wn,it[31]=_r^~xn&Kn,it[40]=Qn^~Vn&lr,it[41]=mr^~nr&wr,it[2]=Fn^~hr&cr,it[3]=Nn^~er&ar,it[12]=xr^~Tn&Hn,it[13]=vr^~In&Yn,it[22]=Jn^~Zn&pr,it[23]=rr^~qn&gr,it[32]=un^~Wn&ir,it[33]=xn^~Kn&An,it[42]=Vn^~lr&jn,it[43]=nr^~wr&Un,it[4]=hr^~cr&Ar,it[5]=er^~ar&Tr,it[14]=Tn^~Hn&Rn,it[15]=In^~Yn&Pn,it[24]=Zn^~pr&zn,it[25]=qn^~gr&Xn,it[34]=Wn^~ir&sr,it[35]=Kn^~An&ur,it[44]=lr^~jn&dr,it[45]=wr^~Un&tr,it[6]=cr^~Ar&Xt,it[7]=ar^~Tr&tn,it[16]=Hn^~Rn&kn,it[17]=Yn^~Pn&Bn,it[26]=pr^~zn&Gn,it[27]=gr^~Xn&Sn,it[36]=ir^~sr&yr,it[37]=An^~ur&_r,it[46]=jn^~dr&Qn,it[47]=Un^~tr&mr,it[8]=Ar^~Xt&Fn,it[9]=Tr^~tn&Nn,it[18]=Rn^~kn&xr,it[19]=Pn^~Bn&vr,it[28]=zn^~Gn&Jn,it[29]=Xn^~Sn&rr,it[38]=sr^~yr&un,it[39]=ur^~_r&xn,it[48]=dr^~Qn&Vn,it[49]=tr^~mr&nr,it[0]^=P1600_ROUND_CONSTANTS[tt*2],it[1]^=P1600_ROUND_CONSTANTS[tt*2+1]}};const keccakState=keccakStateUnroll;function Keccak(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Keccak.prototype.initialize=function(it,tt){for(let rt=0;rt<50;++rt)this.state[rt]=0;this.blockSize=it/8,this.count=0,this.squeezing=!1},Keccak.prototype.absorb=function(it){for(let tt=0;tt<it.length;++tt)this.state[~~(this.count/4)]^=it[tt]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(keccakState.p1600(this.state),this.count=0)},Keccak.prototype.absorbLastFewBits=function(it){this.state[~~(this.count/4)]^=it<<8*(this.count%4),(it&128)!==0&&this.count===this.blockSize-1&&keccakState.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),keccakState.p1600(this.state),this.count=0,this.squeezing=!0},Keccak.prototype.squeeze=function(it){this.squeezing||this.absorbLastFewBits(1);const tt=Buffer.alloc(it);for(let rt=0;rt<it;++rt)tt[rt]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(keccakState.p1600(this.state),this.count=0);return tt},Keccak.prototype.copy=function(it){for(let tt=0;tt<50;++tt)it.state[tt]=this.state[tt];it.blockSize=this.blockSize,it.count=this.count,it.squeezing=this.squeezing};var keccak$1=Keccak,js=api(keccak$1);const createKeccakHash=js,BN$2=bn$1.exports;function zeros(it){return Buffer.allocUnsafe(it).fill(0)}function setLength(it,tt,rt){const at=zeros(tt);return it=toBuffer(it),rt?it.length<tt?(it.copy(at),at):it.slice(0,tt):it.length<tt?(it.copy(at,tt-it.length),at):it.slice(-tt)}function setLengthRight(it,tt){return setLength(it,tt,!0)}function toBuffer(it){if(!Buffer.isBuffer(it))if(Array.isArray(it))it=Buffer.from(it);else if(typeof it=="string")isHexString$2(it)?it=Buffer.from(padToEven(stripHexPrefix(it)),"hex"):it=Buffer.from(it);else if(typeof it=="number")it=intToBuffer(it);else if(it==null)it=Buffer.allocUnsafe(0);else if(BN$2.isBN(it))it=it.toArrayLike(Buffer);else if(it.toArray)it=Buffer.from(it.toArray());else throw new Error("invalid type");return it}function bufferToHex$1(it){return it=toBuffer(it),"0x"+it.toString("hex")}function keccak(it,tt){return it=toBuffer(it),tt||(tt=256),createKeccakHash("keccak"+tt).update(it).digest()}function padToEven(it){return it.length%2?"0"+it:it}function isHexString$2(it){return typeof it=="string"&&it.match(/^0x[0-9A-Fa-f]*$/)}function stripHexPrefix(it){return typeof it=="string"&&it.startsWith("0x")?it.slice(2):it}var util$4={zeros,setLength,setLengthRight,isHexString:isHexString$2,stripHexPrefix,toBuffer,bufferToHex:bufferToHex$1,keccak};const util$3=util$4,BN$1=bn$1.exports;function elementaryName(it){return it.startsWith("int[")?"int256"+it.slice(3):it==="int"?"int256":it.startsWith("uint[")?"uint256"+it.slice(4):it==="uint"?"uint256":it.startsWith("fixed[")?"fixed128x128"+it.slice(5):it==="fixed"?"fixed128x128":it.startsWith("ufixed[")?"ufixed128x128"+it.slice(6):it==="ufixed"?"ufixed128x128":it}function parseTypeN(it){return parseInt(/^\D+(\d+)$/.exec(it)[1],10)}function parseTypeNxM(it){var tt=/^\D+(\d+)x(\d+)$/.exec(it);return[parseInt(tt[1],10),parseInt(tt[2],10)]}function parseTypeArray(it){var tt=it.match(/(.*)\[(.*?)\]$/);return tt?tt[2]===""?"dynamic":parseInt(tt[2],10):null}function parseNumber$1(it){var tt=typeof it;if(tt==="string")return util$3.isHexString(it)?new BN$1(util$3.stripHexPrefix(it),16):new BN$1(it,10);if(tt==="number")return new BN$1(it);if(it.toArray)return it;throw new Error("Argument is not a number")}function encodeSingle(it,tt){var rt,at,st,ot;if(it==="address")return encodeSingle("uint160",parseNumber$1(tt));if(it==="bool")return encodeSingle("uint8",tt?1:0);if(it==="string")return encodeSingle("bytes",new Buffer(tt,"utf8"));if(isArray$5(it)){if(typeof tt.length>"u")throw new Error("Not an array?");if(rt=parseTypeArray(it),rt!=="dynamic"&&rt!==0&&tt.length>rt)throw new Error("Elements exceed array size: "+rt);st=[],it=it.slice(0,it.lastIndexOf("[")),typeof tt=="string"&&(tt=JSON.parse(tt));for(ot in tt)st.push(encodeSingle(it,tt[ot]));if(rt==="dynamic"){var lt=encodeSingle("uint256",tt.length);st.unshift(lt)}return Buffer.concat(st)}else{if(it==="bytes")return tt=new Buffer(tt),st=Buffer.concat([encodeSingle("uint256",tt.length),tt]),tt.length%32!==0&&(st=Buffer.concat([st,util$3.zeros(32-tt.length%32)])),st;if(it.startsWith("bytes")){if(rt=parseTypeN(it),rt<1||rt>32)throw new Error("Invalid bytes<N> width: "+rt);return util$3.setLengthRight(tt,32)}else if(it.startsWith("uint")){if(rt=parseTypeN(it),rt%8||rt<8||rt>256)throw new Error("Invalid uint<N> width: "+rt);if(at=parseNumber$1(tt),at.bitLength()>rt)throw new Error("Supplied uint exceeds width: "+rt+" vs "+at.bitLength());if(at<0)throw new Error("Supplied uint is negative");return at.toArrayLike(Buffer,"be",32)}else if(it.startsWith("int")){if(rt=parseTypeN(it),rt%8||rt<8||rt>256)throw new Error("Invalid int<N> width: "+rt);if(at=parseNumber$1(tt),at.bitLength()>rt)throw new Error("Supplied int exceeds width: "+rt+" vs "+at.bitLength());return at.toTwos(256).toArrayLike(Buffer,"be",32)}else if(it.startsWith("ufixed")){if(rt=parseTypeNxM(it),at=parseNumber$1(tt),at<0)throw new Error("Supplied ufixed is negative");return encodeSingle("uint256",at.mul(new BN$1(2).pow(new BN$1(rt[1]))))}else if(it.startsWith("fixed"))return rt=parseTypeNxM(it),encodeSingle("int256",parseNumber$1(tt).mul(new BN$1(2).pow(new BN$1(rt[1]))))}throw new Error("Unsupported or invalid type: "+it)}function isDynamic(it){return it==="string"||it==="bytes"||parseTypeArray(it)==="dynamic"}function isArray$5(it){return it.lastIndexOf("]")===it.length-1}function rawEncode(it,tt){var rt=[],at=[],st=32*it.length;for(var ot in it){var lt=elementaryName(it[ot]),ut=tt[ot],ht=encodeSingle(lt,ut);isDynamic(lt)?(rt.push(encodeSingle("uint256",st)),at.push(ht),st+=ht.length):rt.push(ht)}return Buffer.concat(rt.concat(at))}function solidityPack(it,tt){if(it.length!==tt.length)throw new Error("Number of types are not matching the values");for(var rt,at,st=[],ot=0;ot<it.length;ot++){var lt=elementaryName(it[ot]),ut=tt[ot];if(lt==="bytes")st.push(ut);else if(lt==="string")st.push(new Buffer(ut,"utf8"));else if(lt==="bool")st.push(new Buffer(ut?"01":"00","hex"));else if(lt==="address")st.push(util$3.setLength(ut,20));else if(lt.startsWith("bytes")){if(rt=parseTypeN(lt),rt<1||rt>32)throw new Error("Invalid bytes<N> width: "+rt);st.push(util$3.setLengthRight(ut,rt))}else if(lt.startsWith("uint")){if(rt=parseTypeN(lt),rt%8||rt<8||rt>256)throw new Error("Invalid uint<N> width: "+rt);if(at=parseNumber$1(ut),at.bitLength()>rt)throw new Error("Supplied uint exceeds width: "+rt+" vs "+at.bitLength());st.push(at.toArrayLike(Buffer,"be",rt/8))}else if(lt.startsWith("int")){if(rt=parseTypeN(lt),rt%8||rt<8||rt>256)throw new Error("Invalid int<N> width: "+rt);if(at=parseNumber$1(ut),at.bitLength()>rt)throw new Error("Supplied int exceeds width: "+rt+" vs "+at.bitLength());st.push(at.toTwos(rt).toArrayLike(Buffer,"be",rt/8))}else throw new Error("Unsupported or invalid type: "+lt)}return Buffer.concat(st)}function soliditySHA3(it,tt){return util$3.keccak(solidityPack(it,tt))}var abi$1={rawEncode,solidityPack,soliditySHA3};const util$2=util$4,abi=abi$1,TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},TypedDataUtils={encodeData(it,tt,rt,at=!0){const st=["bytes32"],ot=[this.hashType(it,rt)];if(at){const lt=(ut,ht,mt)=>{if(rt[ht]!==void 0)return["bytes32",mt==null?"0x0000000000000000000000000000000000000000000000000000000000000000":util$2.keccak(this.encodeData(ht,mt,rt,at))];if(mt===void 0)throw new Error(`missing value for field ${ut} of type ${ht}`);if(ht==="bytes")return["bytes32",util$2.keccak(mt)];if(ht==="string")return typeof mt=="string"&&(mt=Buffer.from(mt,"utf8")),["bytes32",util$2.keccak(mt)];if(ht.lastIndexOf("]")===ht.length-1){const bt=ht.slice(0,ht.lastIndexOf("[")),vt=mt.map(At=>lt(ut,bt,At));return["bytes32",util$2.keccak(abi.rawEncode(vt.map(([At])=>At),vt.map(([,At])=>At)))]}return[ht,mt]};for(const ut of rt[it]){const[ht,mt]=lt(ut.name,ut.type,tt[ut.name]);st.push(ht),ot.push(mt)}}else for(const lt of rt[it]){let ut=tt[lt.name];if(ut!==void 0)if(lt.type==="bytes")st.push("bytes32"),ut=util$2.keccak(ut),ot.push(ut);else if(lt.type==="string")st.push("bytes32"),typeof ut=="string"&&(ut=Buffer.from(ut,"utf8")),ut=util$2.keccak(ut),ot.push(ut);else if(rt[lt.type]!==void 0)st.push("bytes32"),ut=util$2.keccak(this.encodeData(lt.type,ut,rt,at)),ot.push(ut);else{if(lt.type.lastIndexOf("]")===lt.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");st.push(lt.type),ot.push(ut)}}return abi.rawEncode(st,ot)},encodeType(it,tt){let rt="",at=this.findTypeDependencies(it,tt).filter(st=>st!==it);at=[it].concat(at.sort());for(const st of at){if(!tt[st])throw new Error("No type definition specified: "+st);rt+=st+"("+tt[st].map(({name:lt,type:ut})=>ut+" "+lt).join(",")+")"}return rt},findTypeDependencies(it,tt,rt=[]){if(it=it.match(/^\w*/)[0],rt.includes(it)||tt[it]===void 0)return rt;rt.push(it);for(const at of tt[it])for(const st of this.findTypeDependencies(at.type,tt,rt))!rt.includes(st)&&rt.push(st);return rt},hashStruct(it,tt,rt,at=!0){return util$2.keccak(this.encodeData(it,tt,rt,at))},hashType(it,tt){return util$2.keccak(this.encodeType(it,tt))},sanitizeData(it){const tt={};for(const rt in TYPED_MESSAGE_SCHEMA.properties)it[rt]&&(tt[rt]=it[rt]);return tt.types&&(tt.types=Object.assign({EIP712Domain:[]},tt.types)),tt},hash(it,tt=!0){const rt=this.sanitizeData(it),at=[Buffer.from("1901","hex")];return at.push(this.hashStruct("EIP712Domain",rt.domain,rt.types,tt)),rt.primaryType!=="EIP712Domain"&&at.push(this.hashStruct(rt.primaryType,rt.message,rt.types,tt)),util$2.keccak(Buffer.concat(at))}};var ethEip712Util={TYPED_MESSAGE_SCHEMA,TypedDataUtils,hashForSignTypedDataLegacy:function(it){return typedSignatureHashLegacy(it.data)},hashForSignTypedData_v3:function(it){return TypedDataUtils.hash(it.data,!1)},hashForSignTypedData_v4:function(it){return TypedDataUtils.hash(it.data)}};function typedSignatureHashLegacy(it){const tt=new Error("Expect argument to be non-empty array");if(typeof it!="object"||!it.length)throw tt;const rt=it.map(function(ot){return ot.type==="bytes"?util$2.toBuffer(ot.value):ot.value}),at=it.map(function(ot){return ot.type}),st=it.map(function(ot){if(!ot.name)throw tt;return ot.type+" "+ot.name});return abi.soliditySHA3(["bytes32","bytes32"],[abi.soliditySHA3(new Array(it.length).fill("string"),st),abi.soliditySHA3(at,rt)])}var FilterPolyfill$1={};Object.defineProperty(FilterPolyfill$1,"__esModule",{value:!0}),FilterPolyfill$1.filterFromParam=FilterPolyfill$1.FilterPolyfill=void 0;const types_1$2=types$2,util_1$6=util$5,TIMEOUT=5*60*1e3,JSONRPC_TEMPLATE={jsonrpc:"2.0",id:0};class FilterPolyfill{constructor(tt){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,types_1$2.IntNumber)(1),this.provider=tt}async newFilter(tt){const rt=filterFromParam(tt),at=this.makeFilterId(),st=await this.setInitialCursorPosition(at,rt.fromBlock);return console.log(`Installing new log filter(${at}):`,rt,"initial cursor position:",st),this.logFilters.set(at,rt),this.setFilterTimeout(at),(0,util_1$6.hexStringFromIntNumber)(at)}async newBlockFilter(){const tt=this.makeFilterId(),rt=await this.setInitialCursorPosition(tt,"latest");return console.log(`Installing new block filter (${tt}) with initial cursor position:`,rt),this.blockFilters.add(tt),this.setFilterTimeout(tt),(0,util_1$6.hexStringFromIntNumber)(tt)}async newPendingTransactionFilter(){const tt=this.makeFilterId(),rt=await this.setInitialCursorPosition(tt,"latest");return console.log(`Installing new block filter (${tt}) with initial cursor position:`,rt),this.pendingTransactionFilters.add(tt),this.setFilterTimeout(tt),(0,util_1$6.hexStringFromIntNumber)(tt)}uninstallFilter(tt){const rt=(0,util_1$6.intNumberFromHexString)(tt);return console.log(`Uninstalling filter (${rt})`),this.deleteFilter(rt),!0}getFilterChanges(tt){const rt=(0,util_1$6.intNumberFromHexString)(tt);return this.timeouts.has(rt)&&this.setFilterTimeout(rt),this.logFilters.has(rt)?this.getLogFilterChanges(rt):this.blockFilters.has(rt)?this.getBlockFilterChanges(rt):this.pendingTransactionFilters.has(rt)?this.getPendingTransactionFilterChanges(rt):Promise.resolve(filterNotFoundError())}async getFilterLogs(tt){const rt=(0,util_1$6.intNumberFromHexString)(tt),at=this.logFilters.get(rt);return at?this.sendAsyncPromise(Object.assign(Object.assign({},JSONRPC_TEMPLATE),{method:"eth_getLogs",params:[paramFromFilter(at)]})):filterNotFoundError()}makeFilterId(){return(0,types_1$2.IntNumber)(++this.nextFilterId)}sendAsyncPromise(tt){return new Promise((rt,at)=>{this.provider.sendAsync(tt,(st,ot)=>{if(st)return at(st);if(Array.isArray(ot)||ot==null)return at(new Error(`unexpected response received: ${JSON.stringify(ot)}`));rt(ot)})})}deleteFilter(tt){console.log(`Deleting filter (${tt})`),this.logFilters.delete(tt),this.blockFilters.delete(tt),this.pendingTransactionFilters.delete(tt),this.cursors.delete(tt),this.timeouts.delete(tt)}async getLogFilterChanges(tt){const rt=this.logFilters.get(tt),at=this.cursors.get(tt);if(!at||!rt)return filterNotFoundError();const st=await this.getCurrentBlockHeight(),ot=rt.toBlock==="latest"?st:rt.toBlock;if(at>st||at>rt.toBlock)return emptyResult();console.log(`Fetching logs from ${at} to ${ot} for filter ${tt}`);const lt=await this.sendAsyncPromise(Object.assign(Object.assign({},JSONRPC_TEMPLATE),{method:"eth_getLogs",params:[paramFromFilter(Object.assign(Object.assign({},rt),{fromBlock:at,toBlock:ot}))]}));if(Array.isArray(lt.result)){const ut=lt.result.map(mt=>(0,util_1$6.intNumberFromHexString)(mt.blockNumber||"0x0")),ht=Math.max(...ut);if(ht&&ht>at){const mt=(0,types_1$2.IntNumber)(ht+1);console.log(`Moving cursor position for filter (${tt}) from ${at} to ${mt}`),this.cursors.set(tt,mt)}}return lt}async getBlockFilterChanges(tt){const rt=this.cursors.get(tt);if(!rt)return filterNotFoundError();const at=await this.getCurrentBlockHeight();if(rt>at)return emptyResult();console.log(`Fetching blocks from ${rt} to ${at} for filter (${tt})`);const st=(await Promise.all((0,util_1$6.range)(rt,at+1).map(lt=>this.getBlockHashByNumber((0,types_1$2.IntNumber)(lt))))).filter(lt=>!!lt),ot=(0,types_1$2.IntNumber)(rt+st.length);return console.log(`Moving cursor position for filter (${tt}) from ${rt} to ${ot}`),this.cursors.set(tt,ot),Object.assign(Object.assign({},JSONRPC_TEMPLATE),{result:st})}async getPendingTransactionFilterChanges(tt){return Promise.resolve(emptyResult())}async setInitialCursorPosition(tt,rt){const at=await this.getCurrentBlockHeight(),st=typeof rt=="number"&&rt>at?rt:at;return this.cursors.set(tt,st),st}setFilterTimeout(tt){const rt=this.timeouts.get(tt);rt&&window.clearTimeout(rt);const at=window.setTimeout(()=>{console.log(`Filter (${tt}) timed out`),this.deleteFilter(tt)},TIMEOUT);this.timeouts.set(tt,at)}async getCurrentBlockHeight(){const{result:tt}=await this.sendAsyncPromise(Object.assign(Object.assign({},JSONRPC_TEMPLATE),{method:"eth_blockNumber",params:[]}));return(0,util_1$6.intNumberFromHexString)((0,util_1$6.ensureHexString)(tt))}async getBlockHashByNumber(tt){const rt=await this.sendAsyncPromise(Object.assign(Object.assign({},JSONRPC_TEMPLATE),{method:"eth_getBlockByNumber",params:[(0,util_1$6.hexStringFromIntNumber)(tt),!1]}));return rt.result&&typeof rt.result.hash=="string"?(0,util_1$6.ensureHexString)(rt.result.hash):null}}FilterPolyfill$1.FilterPolyfill=FilterPolyfill;function filterFromParam(it){return{fromBlock:intBlockHeightFromHexBlockHeight(it.fromBlock),toBlock:intBlockHeightFromHexBlockHeight(it.toBlock),addresses:it.address===void 0?null:Array.isArray(it.address)?it.address:[it.address],topics:it.topics||[]}}FilterPolyfill$1.filterFromParam=filterFromParam;function paramFromFilter(it){const tt={fromBlock:hexBlockHeightFromIntBlockHeight(it.fromBlock),toBlock:hexBlockHeightFromIntBlockHeight(it.toBlock),topics:it.topics};return it.addresses!==null&&(tt.address=it.addresses),tt}function intBlockHeightFromHexBlockHeight(it){if(it===void 0||it==="latest"||it==="pending")return"latest";if(it==="earliest")return(0,types_1$2.IntNumber)(0);if((0,util_1$6.isHexString)(it))return(0,util_1$6.intNumberFromHexString)(it);throw new Error(`Invalid block option: ${String(it)}`)}function hexBlockHeightFromIntBlockHeight(it){return it==="latest"?it:(0,util_1$6.hexStringFromIntNumber)(it)}function filterNotFoundError(){return Object.assign(Object.assign({},JSONRPC_TEMPLATE),{error:{code:-32e3,message:"filter not found"}})}function emptyResult(){return Object.assign(Object.assign({},JSONRPC_TEMPLATE),{result:[]})}var JSONRPC={};(function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.JSONRPCMethod=void 0,function(tt){tt.eth_accounts="eth_accounts",tt.eth_coinbase="eth_coinbase",tt.net_version="net_version",tt.eth_chainId="eth_chainId",tt.eth_uninstallFilter="eth_uninstallFilter",tt.eth_requestAccounts="eth_requestAccounts",tt.eth_sign="eth_sign",tt.eth_ecRecover="eth_ecRecover",tt.personal_sign="personal_sign",tt.personal_ecRecover="personal_ecRecover",tt.eth_signTransaction="eth_signTransaction",tt.eth_sendRawTransaction="eth_sendRawTransaction",tt.eth_sendTransaction="eth_sendTransaction",tt.eth_signTypedData_v1="eth_signTypedData_v1",tt.eth_signTypedData_v2="eth_signTypedData_v2",tt.eth_signTypedData_v3="eth_signTypedData_v3",tt.eth_signTypedData_v4="eth_signTypedData_v4",tt.eth_signTypedData="eth_signTypedData",tt.cbWallet_arbitrary="walletlink_arbitrary",tt.wallet_addEthereumChain="wallet_addEthereumChain",tt.wallet_switchEthereumChain="wallet_switchEthereumChain",tt.wallet_watchAsset="wallet_watchAsset",tt.eth_subscribe="eth_subscribe",tt.eth_unsubscribe="eth_unsubscribe",tt.eth_newFilter="eth_newFilter",tt.eth_newBlockFilter="eth_newBlockFilter",tt.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",tt.eth_getFilterChanges="eth_getFilterChanges",tt.eth_getFilterLogs="eth_getFilterLogs"}(it.JSONRPCMethod||(it.JSONRPCMethod={}))})(JSONRPC);var SubscriptionManager$1={};const processFn$1=(it,tt)=>function(){const rt=tt.promiseModule,at=new Array(arguments.length);for(let st=0;st<arguments.length;st++)at[st]=arguments[st];return new rt((st,ot)=>{tt.errorFirst?at.push(function(lt,ut){if(tt.multiArgs){const ht=new Array(arguments.length-1);for(let mt=1;mt<arguments.length;mt++)ht[mt-1]=arguments[mt];lt?(ht.unshift(lt),ot(ht)):st(ht)}else lt?ot(lt):st(ut)}):at.push(function(lt){if(tt.multiArgs){const ut=new Array(arguments.length-1);for(let ht=0;ht<arguments.length;ht++)ut[ht]=arguments[ht];st(ut)}else st(lt)}),it.apply(this,at)})};var pify$3=(it,tt)=>{tt=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},tt);const rt=st=>{const ot=lt=>typeof lt=="string"?st===lt:lt.test(st);return tt.include?tt.include.some(ot):!tt.exclude.some(ot)};let at;typeof it=="function"?at=function(){return tt.excludeMain?it.apply(this,arguments):processFn$1(it,tt).apply(this,arguments)}:at=Object.create(Object.getPrototypeOf(it));for(const st in it){const ot=it[st];at[st]=typeof ot=="function"&&rt(st)?processFn$1(ot,tt):ot}return at},immutable=extend$1,hasOwnProperty$2=Object.prototype.hasOwnProperty;function extend$1(){for(var it={},tt=0;tt<arguments.length;tt++){var rt=arguments[tt];for(var at in rt)hasOwnProperty$2.call(rt,at)&&(it[at]=rt[at])}return it}var jsonRpcRandomId=IdIterator;function IdIterator(it){it=it||{};var tt=it.max||Number.MAX_SAFE_INTEGER,rt=typeof it.start<"u"?it.start:Math.floor(Math.random()*tt);return function(){return rt=rt%tt,rt++}}const extend=immutable,createRandomId=jsonRpcRandomId();var ethQuery=EthQuery$1;function EthQuery$1(it){const tt=this;tt.currentProvider=it}EthQuery$1.prototype.getBalance=generateFnWithDefaultBlockFor(2,"eth_getBalance"),EthQuery$1.prototype.getCode=generateFnWithDefaultBlockFor(2,"eth_getCode"),EthQuery$1.prototype.getTransactionCount=generateFnWithDefaultBlockFor(2,"eth_getTransactionCount"),EthQuery$1.prototype.getStorageAt=generateFnWithDefaultBlockFor(3,"eth_getStorageAt"),EthQuery$1.prototype.call=generateFnWithDefaultBlockFor(2,"eth_call"),EthQuery$1.prototype.protocolVersion=generateFnFor("eth_protocolVersion"),EthQuery$1.prototype.syncing=generateFnFor("eth_syncing"),EthQuery$1.prototype.coinbase=generateFnFor("eth_coinbase"),EthQuery$1.prototype.mining=generateFnFor("eth_mining"),EthQuery$1.prototype.hashrate=generateFnFor("eth_hashrate"),EthQuery$1.prototype.gasPrice=generateFnFor("eth_gasPrice"),EthQuery$1.prototype.accounts=generateFnFor("eth_accounts"),EthQuery$1.prototype.blockNumber=generateFnFor("eth_blockNumber"),EthQuery$1.prototype.getBlockTransactionCountByHash=generateFnFor("eth_getBlockTransactionCountByHash"),EthQuery$1.prototype.getBlockTransactionCountByNumber=generateFnFor("eth_getBlockTransactionCountByNumber"),EthQuery$1.prototype.getUncleCountByBlockHash=generateFnFor("eth_getUncleCountByBlockHash"),EthQuery$1.prototype.getUncleCountByBlockNumber=generateFnFor("eth_getUncleCountByBlockNumber"),EthQuery$1.prototype.sign=generateFnFor("eth_sign"),EthQuery$1.prototype.sendTransaction=generateFnFor("eth_sendTransaction"),EthQuery$1.prototype.sendRawTransaction=generateFnFor("eth_sendRawTransaction"),EthQuery$1.prototype.estimateGas=generateFnFor("eth_estimateGas"),EthQuery$1.prototype.getBlockByHash=generateFnFor("eth_getBlockByHash"),EthQuery$1.prototype.getBlockByNumber=generateFnFor("eth_getBlockByNumber"),EthQuery$1.prototype.getTransactionByHash=generateFnFor("eth_getTransactionByHash"),EthQuery$1.prototype.getTransactionByBlockHashAndIndex=generateFnFor("eth_getTransactionByBlockHashAndIndex"),EthQuery$1.prototype.getTransactionByBlockNumberAndIndex=generateFnFor("eth_getTransactionByBlockNumberAndIndex"),EthQuery$1.prototype.getTransactionReceipt=generateFnFor("eth_getTransactionReceipt"),EthQuery$1.prototype.getUncleByBlockHashAndIndex=generateFnFor("eth_getUncleByBlockHashAndIndex"),EthQuery$1.prototype.getUncleByBlockNumberAndIndex=generateFnFor("eth_getUncleByBlockNumberAndIndex"),EthQuery$1.prototype.getCompilers=generateFnFor("eth_getCompilers"),EthQuery$1.prototype.compileLLL=generateFnFor("eth_compileLLL"),EthQuery$1.prototype.compileSolidity=generateFnFor("eth_compileSolidity"),EthQuery$1.prototype.compileSerpent=generateFnFor("eth_compileSerpent"),EthQuery$1.prototype.newFilter=generateFnFor("eth_newFilter"),EthQuery$1.prototype.newBlockFilter=generateFnFor("eth_newBlockFilter"),EthQuery$1.prototype.newPendingTransactionFilter=generateFnFor("eth_newPendingTransactionFilter"),EthQuery$1.prototype.uninstallFilter=generateFnFor("eth_uninstallFilter"),EthQuery$1.prototype.getFilterChanges=generateFnFor("eth_getFilterChanges"),EthQuery$1.prototype.getFilterLogs=generateFnFor("eth_getFilterLogs"),EthQuery$1.prototype.getLogs=generateFnFor("eth_getLogs"),EthQuery$1.prototype.getWork=generateFnFor("eth_getWork"),EthQuery$1.prototype.submitWork=generateFnFor("eth_submitWork"),EthQuery$1.prototype.submitHashrate=generateFnFor("eth_submitHashrate"),EthQuery$1.prototype.sendAsync=function(it,tt){this.currentProvider.sendAsync(createPayload(it),function(at,st){if(!at&&st.error&&(at=new Error("EthQuery - RPC Error - "+st.error.message)),at)return tt(at);tt(null,st.result)})};function generateFnFor(it){return function(){const tt=this;var rt=[].slice.call(arguments),at=rt.pop();tt.sendAsync({method:it,params:rt},at)}}function generateFnWithDefaultBlockFor(it,tt){return function(){const rt=this;var at=[].slice.call(arguments),st=at.pop();at.length<it&&at.push("latest"),rt.sendAsync({method:tt,params:at},st)}}function createPayload(it){return extend({id:createRandomId(),jsonrpc:"2.0",params:[]},it)}var util$1={},types$1={},hasSymbols=shams$1,shams=function it(){return hasSymbols()&&!!Symbol.toStringTag},hasToStringTag$4=shams(),callBound$2=callBound$4,$toString$2=callBound$2("Object.prototype.toString"),isStandardArguments=function it(tt){return hasToStringTag$4&&tt&&typeof tt=="object"&&Symbol.toStringTag in tt?!1:$toString$2(tt)==="[object Arguments]"},isLegacyArguments=function it(tt){return isStandardArguments(tt)?!0:tt!==null&&typeof tt=="object"&&typeof tt.length=="number"&&tt.length>=0&&$toString$2(tt)!=="[object Array]"&&$toString$2(tt.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$3=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$3)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function it(tt){if(typeof tt!="function")return!1;if(isFnRegex.test(fnToStr$1.call(tt)))return!0;if(!hasToStringTag$3){var rt=toStr$2.call(tt);return rt==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var at=getGeneratorFunc();GeneratorFunction=at?getProto(at):!1}return getProto(tt)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(it){it!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function it(tt){try{var rt=fnToStr.call(tt);return constructorRegex.test(rt)}catch{return!1}},tryFunctionObject=function it(tt){try{return isES6ClassFn(tt)?!1:(fnToStr.call(tt),!0)}catch{return!1}},toStr$1=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$2=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function it(){return!1};if(typeof document=="object"){var all=document.all;toStr$1.call(all)===toStr$1.call(document.all)&&(isDDA=function(tt){if((isIE68||!tt)&&(typeof tt>"u"||typeof tt=="object"))try{var rt=toStr$1.call(tt);return(rt===ddaClass||rt===ddaClass2||rt===ddaClass3||rt===objectClass)&&tt("")==null}catch{}return!1})}var isCallable$1=reflectApply?function it(tt){if(isDDA(tt))return!0;if(!tt||typeof tt!="function"&&typeof tt!="object")return!1;try{reflectApply(tt,null,badArrayLike)}catch(rt){if(rt!==isCallableMarker)return!1}return!isES6ClassFn(tt)&&tryFunctionObject(tt)}:function it(tt){if(isDDA(tt))return!0;if(!tt||typeof tt!="function"&&typeof tt!="object")return!1;if(hasToStringTag$2)return tryFunctionObject(tt);if(isES6ClassFn(tt))return!1;var rt=toStr$1.call(tt);return rt!==fnClass&&rt!==genClass&&!/^\[object HTML/.test(rt)?!1:tryFunctionObject(tt)},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty$1=Object.prototype.hasOwnProperty,forEachArray=function it(tt,rt,at){for(var st=0,ot=tt.length;st<ot;st++)hasOwnProperty$1.call(tt,st)&&(at==null?rt(tt[st],st,tt):rt.call(at,tt[st],st,tt))},forEachString=function it(tt,rt,at){for(var st=0,ot=tt.length;st<ot;st++)at==null?rt(tt.charAt(st),st,tt):rt.call(at,tt.charAt(st),st,tt)},forEachObject=function it(tt,rt,at){for(var st in tt)hasOwnProperty$1.call(tt,st)&&(at==null?rt(tt[st],st,tt):rt.call(at,tt[st],st,tt))},forEach$2=function it(tt,rt,at){if(!isCallable(rt))throw new TypeError("iterator must be a function");var st;arguments.length>=3&&(st=at),toStr.call(tt)==="[object Array]"?forEachArray(tt,rt,st):typeof tt=="string"?forEachString(tt,rt,st):forEachObject(tt,rt,st)},forEach_1=forEach$2,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$a=globalThis,availableTypedArrays$2=function it(){for(var tt=[],rt=0;rt<possibleNames.length;rt++)typeof g$a[possibleNames[rt]]=="function"&&(tt[tt.length]=possibleNames[rt]);return tt},GetIntrinsic=getIntrinsic,$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd=$gOPD,forEach$1=forEach_1,availableTypedArrays$1=availableTypedArrays$2,callBound$1=callBound$4,$toString$1=callBound$1("Object.prototype.toString"),hasToStringTag$1=shams(),gOPD$1=gopd,g$9=globalThis,typedArrays$1=availableTypedArrays$1(),$indexOf=callBound$1("Array.prototype.indexOf",!0)||function it(tt,rt){for(var at=0;at<tt.length;at+=1)if(tt[at]===rt)return at;return-1},$slice$1=callBound$1("String.prototype.slice"),toStrTags$1={},getPrototypeOf$1=Object.getPrototypeOf;hasToStringTag$1&&gOPD$1&&getPrototypeOf$1&&forEach$1(typedArrays$1,function(it){var tt=new g$9[it];if(Symbol.toStringTag in tt){var rt=getPrototypeOf$1(tt),at=gOPD$1(rt,Symbol.toStringTag);if(!at){var st=getPrototypeOf$1(rt);at=gOPD$1(st,Symbol.toStringTag)}toStrTags$1[it]=at.get}});var tryTypedArrays$1=function it(tt){var rt=!1;return forEach$1(toStrTags$1,function(at,st){if(!rt)try{rt=at.call(tt)===st}catch{}}),rt},isTypedArray$4=function it(tt){if(!tt||typeof tt!="object")return!1;if(!hasToStringTag$1||!(Symbol.toStringTag in tt)){var rt=$slice$1($toString$1(tt),8,-1);return $indexOf(typedArrays$1,rt)>-1}return gOPD$1?tryTypedArrays$1(tt):!1},forEach=forEach_1,availableTypedArrays=availableTypedArrays$2,callBound=callBound$4,gOPD=gopd,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g$8=globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),toStrTags={},getPrototypeOf=Object.getPrototypeOf;hasToStringTag&&gOPD&&getPrototypeOf&&forEach(typedArrays,function(it){if(typeof g$8[it]=="function"){var tt=new g$8[it];if(Symbol.toStringTag in tt){var rt=getPrototypeOf(tt),at=gOPD(rt,Symbol.toStringTag);if(!at){var st=getPrototypeOf(rt);at=gOPD(st,Symbol.toStringTag)}toStrTags[it]=at.get}}});var tryTypedArrays=function it(tt){var rt=!1;return forEach(toStrTags,function(at,st){if(!rt)try{var ot=at.call(tt);ot===st&&(rt=ot)}catch{}}),rt},isTypedArray$3=isTypedArray$4,whichTypedArray=function it(tt){return isTypedArray$3(tt)?!hasToStringTag||!(Symbol.toStringTag in tt)?$slice($toString(tt),8,-1):tryTypedArrays(tt):!1};(function(it){var tt=isArguments,rt=isGeneratorFunction,at=whichTypedArray,st=isTypedArray$4;function ot(hn){return hn.call.bind(hn)}var lt=typeof BigInt<"u",ut=typeof Symbol<"u",ht=ot(Object.prototype.toString),mt=ot(Number.prototype.valueOf),bt=ot(String.prototype.valueOf),vt=ot(Boolean.prototype.valueOf);if(lt)var At=ot(BigInt.prototype.valueOf);if(ut)var xt=ot(Symbol.prototype.valueOf);function Et(hn,Cn){if(typeof hn!="object")return!1;try{return Cn(hn),!0}catch{return!1}}it.isArgumentsObject=tt,it.isGeneratorFunction=rt,it.isTypedArray=st;function Tt(hn){return typeof Promise<"u"&&hn instanceof Promise||hn!==null&&typeof hn=="object"&&typeof hn.then=="function"&&typeof hn.catch=="function"}it.isPromise=Tt;function wt(hn){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(hn):st(hn)||Zt(hn)}it.isArrayBufferView=wt;function Ct(hn){return at(hn)==="Uint8Array"}it.isUint8Array=Ct;function It(hn){return at(hn)==="Uint8ClampedArray"}it.isUint8ClampedArray=It;function St(hn){return at(hn)==="Uint16Array"}it.isUint16Array=St;function Rt(hn){return at(hn)==="Uint32Array"}it.isUint32Array=Rt;function Dt(hn){return at(hn)==="Int8Array"}it.isInt8Array=Dt;function Wt(hn){return at(hn)==="Int16Array"}it.isInt16Array=Wt;function qt(hn){return at(hn)==="Int32Array"}it.isInt32Array=qt;function Vt(hn){return at(hn)==="Float32Array"}it.isFloat32Array=Vt;function Yt(hn){return at(hn)==="Float64Array"}it.isFloat64Array=Yt;function jt(hn){return at(hn)==="BigInt64Array"}it.isBigInt64Array=jt;function kt(hn){return at(hn)==="BigUint64Array"}it.isBigUint64Array=kt;function zt(hn){return ht(hn)==="[object Map]"}zt.working=typeof Map<"u"&&zt(new Map);function Nt(hn){return typeof Map>"u"?!1:zt.working?zt(hn):hn instanceof Map}it.isMap=Nt;function Mt(hn){return ht(hn)==="[object Set]"}Mt.working=typeof Set<"u"&&Mt(new Set);function Lt(hn){return typeof Set>"u"?!1:Mt.working?Mt(hn):hn instanceof Set}it.isSet=Lt;function Ht(hn){return ht(hn)==="[object WeakMap]"}Ht.working=typeof WeakMap<"u"&&Ht(new WeakMap);function Qt(hn){return typeof WeakMap>"u"?!1:Ht.working?Ht(hn):hn instanceof WeakMap}it.isWeakMap=Qt;function Ut(hn){return ht(hn)==="[object WeakSet]"}Ut.working=typeof WeakSet<"u"&&Ut(new WeakSet);function Bt(hn){return Ut(hn)}it.isWeakSet=Bt;function Kt(hn){return ht(hn)==="[object ArrayBuffer]"}Kt.working=typeof ArrayBuffer<"u"&&Kt(new ArrayBuffer);function Gt(hn){return typeof ArrayBuffer>"u"?!1:Kt.working?Kt(hn):hn instanceof ArrayBuffer}it.isArrayBuffer=Gt;function Pt(hn){return ht(hn)==="[object DataView]"}Pt.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Pt(new DataView(new ArrayBuffer(1),0,1));function Zt(hn){return typeof DataView>"u"?!1:Pt.working?Pt(hn):hn instanceof DataView}it.isDataView=Zt;var an=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Jt(hn){return ht(hn)==="[object SharedArrayBuffer]"}function rn(hn){return typeof an>"u"?!1:(typeof Jt.working>"u"&&(Jt.working=Jt(new an)),Jt.working?Jt(hn):hn instanceof an)}it.isSharedArrayBuffer=rn;function fn(hn){return ht(hn)==="[object AsyncFunction]"}it.isAsyncFunction=fn;function pn(hn){return ht(hn)==="[object Map Iterator]"}it.isMapIterator=pn;function vn(hn){return ht(hn)==="[object Set Iterator]"}it.isSetIterator=vn;function En(hn){return ht(hn)==="[object Generator]"}it.isGeneratorObject=En;function dn(hn){return ht(hn)==="[object WebAssembly.Module]"}it.isWebAssemblyCompiledModule=dn;function cn(hn){return Et(hn,mt)}it.isNumberObject=cn;function _n(hn){return Et(hn,bt)}it.isStringObject=_n;function wn(hn){return Et(hn,vt)}it.isBooleanObject=wn;function Ln(hn){return lt&&Et(hn,At)}it.isBigIntObject=Ln;function yn(hn){return ut&&Et(hn,xt)}it.isSymbolObject=yn;function nn(hn){return cn(hn)||_n(hn)||wn(hn)||Ln(hn)||yn(hn)}it.isBoxedPrimitive=nn;function sn(hn){return typeof Uint8Array<"u"&&(Gt(hn)||rn(hn))}it.isAnyArrayBuffer=sn,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(hn){Object.defineProperty(it,hn,{enumerable:!1,value:function(){throw new Error(hn+" is not supported in userland")}})})})(types$1);var isBufferBrowser=function it(tt){return tt&&typeof tt=="object"&&typeof tt.copy=="function"&&typeof tt.fill=="function"&&typeof tt.readUInt8=="function"};(function(it){var tt=Object.getOwnPropertyDescriptors||function(Zt){for(var an=Object.keys(Zt),Jt={},rn=0;rn<an.length;rn++)Jt[an[rn]]=Object.getOwnPropertyDescriptor(Zt,an[rn]);return Jt},rt=/%[sdj%]/g;it.format=function(Pt){if(!Dt(Pt)){for(var Zt=[],an=0;an<arguments.length;an++)Zt.push(lt(arguments[an]));return Zt.join(" ")}for(var an=1,Jt=arguments,rn=Jt.length,fn=String(Pt).replace(rt,function(vn){if(vn==="%%")return"%";if(an>=rn)return vn;switch(vn){case"%s":return String(Jt[an++]);case"%d":return Number(Jt[an++]);case"%j":try{return JSON.stringify(Jt[an++])}catch{return"[Circular]"}default:return vn}}),pn=Jt[an];an<rn;pn=Jt[++an])It(pn)||!Yt(pn)?fn+=" "+pn:fn+=" "+lt(pn);return fn},it.deprecate=function(Pt,Zt){if(typeof process<"u"&&process.noDeprecation===!0)return Pt;if(typeof process>"u")return function(){return it.deprecate(Pt,Zt).apply(this,arguments)};var an=!1;function Jt(){if(!an){if(process.throwDeprecation)throw new Error(Zt);process.traceDeprecation?console.trace(Zt):console.error(Zt),an=!0}return Pt.apply(this,arguments)}return Jt};var at={},st=/^$/;if({}.NODE_DEBUG){var ot={}.NODE_DEBUG;ot=ot.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),st=new RegExp("^"+ot+"$","i")}it.debuglog=function(Pt){if(Pt=Pt.toUpperCase(),!at[Pt])if(st.test(Pt)){var Zt=process.pid;at[Pt]=function(){var an=it.format.apply(it,arguments);console.error("%s %d: %s",Pt,Zt,an)}}else at[Pt]=function(){};return at[Pt]};function lt(Pt,Zt){var an={seen:[],stylize:ht};return arguments.length>=3&&(an.depth=arguments[2]),arguments.length>=4&&(an.colors=arguments[3]),Ct(Zt)?an.showHidden=Zt:Zt&&it._extend(an,Zt),qt(an.showHidden)&&(an.showHidden=!1),qt(an.depth)&&(an.depth=2),qt(an.colors)&&(an.colors=!1),qt(an.customInspect)&&(an.customInspect=!0),an.colors&&(an.stylize=ut),bt(an,Pt,an.depth)}it.inspect=lt,lt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},lt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ut(Pt,Zt){var an=lt.styles[Zt];return an?"\x1B["+lt.colors[an][0]+"m"+Pt+"\x1B["+lt.colors[an][1]+"m":Pt}function ht(Pt,Zt){return Pt}function mt(Pt){var Zt={};return Pt.forEach(function(an,Jt){Zt[an]=!0}),Zt}function bt(Pt,Zt,an){if(Pt.customInspect&&Zt&&zt(Zt.inspect)&&Zt.inspect!==it.inspect&&!(Zt.constructor&&Zt.constructor.prototype===Zt)){var Jt=Zt.inspect(an,Pt);return Dt(Jt)||(Jt=bt(Pt,Jt,an)),Jt}var rn=vt(Pt,Zt);if(rn)return rn;var fn=Object.keys(Zt),pn=mt(fn);if(Pt.showHidden&&(fn=Object.getOwnPropertyNames(Zt)),kt(Zt)&&(fn.indexOf("message")>=0||fn.indexOf("description")>=0))return At(Zt);if(fn.length===0){if(zt(Zt)){var vn=Zt.name?": "+Zt.name:"";return Pt.stylize("[Function"+vn+"]","special")}if(Vt(Zt))return Pt.stylize(RegExp.prototype.toString.call(Zt),"regexp");if(jt(Zt))return Pt.stylize(Date.prototype.toString.call(Zt),"date");if(kt(Zt))return At(Zt)}var En="",dn=!1,cn=["{","}"];if(wt(Zt)&&(dn=!0,cn=["[","]"]),zt(Zt)){var _n=Zt.name?": "+Zt.name:"";En=" [Function"+_n+"]"}if(Vt(Zt)&&(En=" "+RegExp.prototype.toString.call(Zt)),jt(Zt)&&(En=" "+Date.prototype.toUTCString.call(Zt)),kt(Zt)&&(En=" "+At(Zt)),fn.length===0&&(!dn||Zt.length==0))return cn[0]+En+cn[1];if(an<0)return Vt(Zt)?Pt.stylize(RegExp.prototype.toString.call(Zt),"regexp"):Pt.stylize("[Object]","special");Pt.seen.push(Zt);var wn;return dn?wn=xt(Pt,Zt,an,pn,fn):wn=fn.map(function(Ln){return Et(Pt,Zt,an,pn,Ln,dn)}),Pt.seen.pop(),Tt(wn,En,cn)}function vt(Pt,Zt){if(qt(Zt))return Pt.stylize("undefined","undefined");if(Dt(Zt)){var an="'"+JSON.stringify(Zt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Pt.stylize(an,"string")}if(Rt(Zt))return Pt.stylize(""+Zt,"number");if(Ct(Zt))return Pt.stylize(""+Zt,"boolean");if(It(Zt))return Pt.stylize("null","null")}function At(Pt){return"["+Error.prototype.toString.call(Pt)+"]"}function xt(Pt,Zt,an,Jt,rn){for(var fn=[],pn=0,vn=Zt.length;pn<vn;++pn)Ut(Zt,String(pn))?fn.push(Et(Pt,Zt,an,Jt,String(pn),!0)):fn.push("");return rn.forEach(function(En){En.match(/^\d+$/)||fn.push(Et(Pt,Zt,an,Jt,En,!0))}),fn}function Et(Pt,Zt,an,Jt,rn,fn){var pn,vn,En;if(En=Object.getOwnPropertyDescriptor(Zt,rn)||{value:Zt[rn]},En.get?En.set?vn=Pt.stylize("[Getter/Setter]","special"):vn=Pt.stylize("[Getter]","special"):En.set&&(vn=Pt.stylize("[Setter]","special")),Ut(Jt,rn)||(pn="["+rn+"]"),vn||(Pt.seen.indexOf(En.value)<0?(It(an)?vn=bt(Pt,En.value,null):vn=bt(Pt,En.value,an-1),vn.indexOf(`
`)>-1&&(fn?vn=vn.split(`
`).map(function(dn){return"  "+dn}).join(`
`).slice(2):vn=`
`+vn.split(`
`).map(function(dn){return"   "+dn}).join(`
`))):vn=Pt.stylize("[Circular]","special")),qt(pn)){if(fn&&rn.match(/^\d+$/))return vn;pn=JSON.stringify(""+rn),pn.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(pn=pn.slice(1,-1),pn=Pt.stylize(pn,"name")):(pn=pn.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),pn=Pt.stylize(pn,"string"))}return pn+": "+vn}function Tt(Pt,Zt,an){var Jt=Pt.reduce(function(rn,fn){return fn.indexOf(`
`)>=0,rn+fn.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Jt>60?an[0]+(Zt===""?"":Zt+`
 `)+" "+Pt.join(`,
  `)+" "+an[1]:an[0]+Zt+" "+Pt.join(", ")+" "+an[1]}it.types=types$1;function wt(Pt){return Array.isArray(Pt)}it.isArray=wt;function Ct(Pt){return typeof Pt=="boolean"}it.isBoolean=Ct;function It(Pt){return Pt===null}it.isNull=It;function St(Pt){return Pt==null}it.isNullOrUndefined=St;function Rt(Pt){return typeof Pt=="number"}it.isNumber=Rt;function Dt(Pt){return typeof Pt=="string"}it.isString=Dt;function Wt(Pt){return typeof Pt=="symbol"}it.isSymbol=Wt;function qt(Pt){return Pt===void 0}it.isUndefined=qt;function Vt(Pt){return Yt(Pt)&&Mt(Pt)==="[object RegExp]"}it.isRegExp=Vt,it.types.isRegExp=Vt;function Yt(Pt){return typeof Pt=="object"&&Pt!==null}it.isObject=Yt;function jt(Pt){return Yt(Pt)&&Mt(Pt)==="[object Date]"}it.isDate=jt,it.types.isDate=jt;function kt(Pt){return Yt(Pt)&&(Mt(Pt)==="[object Error]"||Pt instanceof Error)}it.isError=kt,it.types.isNativeError=kt;function zt(Pt){return typeof Pt=="function"}it.isFunction=zt;function Nt(Pt){return Pt===null||typeof Pt=="boolean"||typeof Pt=="number"||typeof Pt=="string"||typeof Pt=="symbol"||typeof Pt>"u"}it.isPrimitive=Nt,it.isBuffer=isBufferBrowser;function Mt(Pt){return Object.prototype.toString.call(Pt)}function Lt(Pt){return Pt<10?"0"+Pt.toString(10):Pt.toString(10)}var Ht=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Qt(){var Pt=new Date,Zt=[Lt(Pt.getHours()),Lt(Pt.getMinutes()),Lt(Pt.getSeconds())].join(":");return[Pt.getDate(),Ht[Pt.getMonth()],Zt].join(" ")}it.log=function(){console.log("%s - %s",Qt(),it.format.apply(it,arguments))},it.inherits=inherits_browser$1.exports,it._extend=function(Pt,Zt){if(!Zt||!Yt(Zt))return Pt;for(var an=Object.keys(Zt),Jt=an.length;Jt--;)Pt[an[Jt]]=Zt[an[Jt]];return Pt};function Ut(Pt,Zt){return Object.prototype.hasOwnProperty.call(Pt,Zt)}var Bt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;it.promisify=function(Zt){if(typeof Zt!="function")throw new TypeError('The "original" argument must be of type Function');if(Bt&&Zt[Bt]){var an=Zt[Bt];if(typeof an!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(an,Bt,{value:an,enumerable:!1,writable:!1,configurable:!0}),an}function an(){for(var Jt,rn,fn=new Promise(function(En,dn){Jt=En,rn=dn}),pn=[],vn=0;vn<arguments.length;vn++)pn.push(arguments[vn]);pn.push(function(En,dn){En?rn(En):Jt(dn)});try{Zt.apply(this,pn)}catch(En){rn(En)}return fn}return Object.setPrototypeOf(an,Object.getPrototypeOf(Zt)),Bt&&Object.defineProperty(an,Bt,{value:an,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(an,tt(Zt))},it.promisify.custom=Bt;function Kt(Pt,Zt){if(!Pt){var an=new Error("Promise was rejected with a falsy value");an.reason=Pt,Pt=an}return Zt(Pt)}function Gt(Pt){if(typeof Pt!="function")throw new TypeError('The "original" argument must be of type Function');function Zt(){for(var an=[],Jt=0;Jt<arguments.length;Jt++)an.push(arguments[Jt]);var rn=an.pop();if(typeof rn!="function")throw new TypeError("The last argument must be of type Function");var fn=this,pn=function(){return rn.apply(fn,arguments)};Pt.apply(this,an).then(function(vn){process.nextTick(pn.bind(null,null,vn))},function(vn){process.nextTick(Kt.bind(null,vn,pn))})}return Object.setPrototypeOf(Zt,Object.getPrototypeOf(Pt)),Object.defineProperties(Zt,tt(Pt)),Zt}it.callbackify=Gt})(util$1);const util=util$1,EventEmitter$2=events.exports;var R$2=typeof Reflect=="object"?Reflect:null,ReflectApply=R$2&&typeof R$2.apply=="function"?R$2.apply:function it(tt,rt,at){return Function.prototype.apply.call(tt,rt,at)},safeEventEmitter=SafeEventEmitter$3;function SafeEventEmitter$3(){EventEmitter$2.call(this)}util.inherits(SafeEventEmitter$3,EventEmitter$2),SafeEventEmitter$3.prototype.emit=function(it){for(var tt=[],rt=1;rt<arguments.length;rt++)tt.push(arguments[rt]);var at=it==="error",st=this._events;if(st!==void 0)at=at&&st.error===void 0;else if(!at)return!1;if(at){var ot;if(tt.length>0&&(ot=tt[0]),ot instanceof Error)throw ot;var lt=new Error("Unhandled error."+(ot?" ("+ot.message+")":""));throw lt.context=ot,lt}var ut=st[it];if(ut===void 0)return!1;if(typeof ut=="function")safeApply(ut,this,tt);else for(var ht=ut.length,mt=arrayClone(ut,ht),rt=0;rt<ht;++rt)safeApply(mt[rt],this,tt);return!0};function safeApply(it,tt,rt){try{ReflectApply(it,tt,rt)}catch(at){setTimeout(()=>{throw at})}}function arrayClone(it,tt){for(var rt=new Array(tt),at=0;at<tt;++at)rt[at]=it[at];return rt}const SafeEventEmitter$2=safeEventEmitter,sec$1=1e3,calculateSum=(it,tt)=>it+tt,blockTrackerEvents=["sync","latest"];class BaseBlockTracker$1 extends SafeEventEmitter$2{constructor(tt={}){super(),this._blockResetDuration=tt.blockResetDuration||20*sec$1,this._blockResetTimeout,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(rt=>this.once("latest",rt))}removeAllListeners(tt){tt?super.removeAllListeners(tt):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener()}_start(){}_end(){}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(tt,rt){!blockTrackerEvents.includes(tt)||this._maybeStart()}_onRemoveListener(tt,rt){this._getBlockTrackerEventCount()>0||this._maybeEnd()}_maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),this._start())}_maybeEnd(){!this._isRunning||(this._isRunning=!1,this._setupBlockResetTimeout(),this._end())}_getBlockTrackerEventCount(){return blockTrackerEvents.map(tt=>this.listenerCount(tt)).reduce(calculateSum)}_newPotentialLatest(tt){const rt=this._currentBlock;rt&&hexToInt$4(tt)<=hexToInt$4(rt)||this._setCurrentBlock(tt)}_setCurrentBlock(tt){const rt=this._currentBlock;this._currentBlock=tt,this.emit("latest",tt),this.emit("sync",{oldBlock:rt,newBlock:tt})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}var base=BaseBlockTracker$1;function hexToInt$4(it){return Number.parseInt(it,16)}const pify$2=pify$3,BaseBlockTracker=base,sec=1e3;class PollingBlockTracker$1 extends BaseBlockTracker{constructor(tt={}){if(!tt.provider)throw new Error("PollingBlockTracker - no provider specified.");const rt=tt.pollingInterval||20*sec,at=tt.retryTimeout||rt/10,st=tt.keepEventLoopActive!==void 0?tt.keepEventLoopActive:!0,ot=tt.setSkipCacheFlag||!1;super(Object.assign({blockResetDuration:rt},tt)),this._provider=tt.provider,this._pollingInterval=rt,this._retryTimeout=at,this._keepEventLoopActive=st,this._setSkipCacheFlag=ot}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}_start(){this._performSync().catch(tt=>this.emit("error",tt))}async _performSync(){for(;this._isRunning;)try{await this._updateLatestBlock(),await timeout$1(this._pollingInterval,!this._keepEventLoopActive)}catch(tt){const rt=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${tt.stack}`);try{this.emit("error",rt)}catch{console.error(rt)}await timeout$1(this._retryTimeout,!this._keepEventLoopActive)}}async _updateLatestBlock(){const tt=await this._fetchLatestBlock();this._newPotentialLatest(tt)}async _fetchLatestBlock(){const tt={jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(tt.skipCache=!0);const rt=await pify$2(at=>this._provider.sendAsync(tt,at))();if(rt.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${rt.error}`);return rt.result}}var polling=PollingBlockTracker$1;function timeout$1(it,tt){return new Promise(rt=>{const at=setTimeout(rt,it);at.unref&&tt&&at.unref()})}var dist$1={},idRemapMiddleware={},getUniqueId$1={};Object.defineProperty(getUniqueId$1,"__esModule",{value:!0}),getUniqueId$1.getUniqueId=void 0;const MAX=4294967295;let idCounter=Math.floor(Math.random()*MAX);function getUniqueId(){return idCounter=(idCounter+1)%MAX,idCounter}getUniqueId$1.getUniqueId=getUniqueId,Object.defineProperty(idRemapMiddleware,"__esModule",{value:!0}),idRemapMiddleware.createIdRemapMiddleware=void 0;const getUniqueId_1=getUniqueId$1;function createIdRemapMiddleware(){return(it,tt,rt,at)=>{const st=it.id,ot=getUniqueId_1.getUniqueId();it.id=ot,tt.id=ot,rt(lt=>{it.id=st,tt.id=st,lt()})}}idRemapMiddleware.createIdRemapMiddleware=createIdRemapMiddleware;var createAsyncMiddleware$3={};Object.defineProperty(createAsyncMiddleware$3,"__esModule",{value:!0}),createAsyncMiddleware$3.createAsyncMiddleware=void 0;function createAsyncMiddleware$2(it){return async(tt,rt,at,st)=>{let ot;const lt=new Promise(bt=>{ot=bt});let ut=null,ht=!1;const mt=async()=>{ht=!0,at(bt=>{ut=bt,ot()}),await lt};try{await it(tt,rt,mt),ht?(await lt,ut(null)):st(null)}catch(bt){ut?ut(bt):st(bt)}}}createAsyncMiddleware$3.createAsyncMiddleware=createAsyncMiddleware$2;var createScaffoldMiddleware$3={};Object.defineProperty(createScaffoldMiddleware$3,"__esModule",{value:!0}),createScaffoldMiddleware$3.createScaffoldMiddleware=void 0;function createScaffoldMiddleware$2(it){return(tt,rt,at,st)=>{const ot=it[tt.method];return ot===void 0?at():typeof ot=="function"?ot(tt,rt,at,st):(rt.result=ot,st())}}createScaffoldMiddleware$3.createScaffoldMiddleware=createScaffoldMiddleware$2;var JsonRpcEngine$1={},dist={},classes={};Object.defineProperty(classes,"__esModule",{value:!0}),classes.EthereumProviderError=classes.EthereumRpcError=void 0;const fast_safe_stringify_1=fastSafeStringify;class EthereumRpcError extends Error{constructor(tt,rt,at){if(!Number.isInteger(tt))throw new Error('"code" must be an integer.');if(!rt||typeof rt!="string")throw new Error('"message" must be a nonempty string.');super(rt),this.code=tt,at!==void 0&&(this.data=at)}serialize(){const tt={code:this.code,message:this.message};return this.data!==void 0&&(tt.data=this.data),this.stack&&(tt.stack=this.stack),tt}toString(){return fast_safe_stringify_1.default(this.serialize(),stringifyReplacer,2)}}classes.EthereumRpcError=EthereumRpcError;class EthereumProviderError extends EthereumRpcError{constructor(tt,rt,at){if(!isValidEthProviderCode(tt))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(tt,rt,at)}}classes.EthereumProviderError=EthereumProviderError;function isValidEthProviderCode(it){return Number.isInteger(it)&&it>=1e3&&it<=4999}function stringifyReplacer(it,tt){if(tt!=="[Circular]")return tt}var utils$2={},errorConstants={};Object.defineProperty(errorConstants,"__esModule",{value:!0}),errorConstants.errorValues=errorConstants.errorCodes=void 0,errorConstants.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},errorConstants.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.serializeError=it.isValidCode=it.getMessageFromCode=it.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const tt=errorConstants,rt=classes,at=tt.errorCodes.rpc.internal,st="Unspecified error message. This is a bug, please report it.",ot={code:at,message:lt(at)};it.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function lt(At,xt=st){if(Number.isInteger(At)){const Et=At.toString();if(vt(tt.errorValues,Et))return tt.errorValues[Et].message;if(mt(At))return it.JSON_RPC_SERVER_ERROR_MESSAGE}return xt}it.getMessageFromCode=lt;function ut(At){if(!Number.isInteger(At))return!1;const xt=At.toString();return!!(tt.errorValues[xt]||mt(At))}it.isValidCode=ut;function ht(At,{fallbackError:xt=ot,shouldIncludeStack:Et=!1}={}){var Tt,wt;if(!xt||!Number.isInteger(xt.code)||typeof xt.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(At instanceof rt.EthereumRpcError)return At.serialize();const Ct={};if(At&&typeof At=="object"&&!Array.isArray(At)&&vt(At,"code")&&ut(At.code)){const St=At;Ct.code=St.code,St.message&&typeof St.message=="string"?(Ct.message=St.message,vt(St,"data")&&(Ct.data=St.data)):(Ct.message=lt(Ct.code),Ct.data={originalError:bt(At)})}else{Ct.code=xt.code;const St=(Tt=At)===null||Tt===void 0?void 0:Tt.message;Ct.message=St&&typeof St=="string"?St:xt.message,Ct.data={originalError:bt(At)}}const It=(wt=At)===null||wt===void 0?void 0:wt.stack;return Et&&At&&It&&typeof It=="string"&&(Ct.stack=It),Ct}it.serializeError=ht;function mt(At){return At>=-32099&&At<=-32e3}function bt(At){return At&&typeof At=="object"&&!Array.isArray(At)?Object.assign({},At):At}function vt(At,xt){return Object.prototype.hasOwnProperty.call(At,xt)}}(utils$2);var errors={};Object.defineProperty(errors,"__esModule",{value:!0}),errors.ethErrors=void 0;const classes_1=classes,utils_1=utils$2,error_constants_1=errorConstants;errors.ethErrors={rpc:{parse:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.parse,it),invalidRequest:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidRequest,it),invalidParams:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidParams,it),methodNotFound:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotFound,it),internal:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.internal,it),server:it=>{if(!it||typeof it!="object"||Array.isArray(it))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:tt}=it;if(!Number.isInteger(tt)||tt>-32005||tt<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getEthJsonRpcError(tt,it)},invalidInput:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidInput,it),resourceNotFound:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceNotFound,it),resourceUnavailable:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceUnavailable,it),transactionRejected:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.transactionRejected,it),methodNotSupported:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotSupported,it),limitExceeded:it=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.limitExceeded,it)},provider:{userRejectedRequest:it=>getEthProviderError(error_constants_1.errorCodes.provider.userRejectedRequest,it),unauthorized:it=>getEthProviderError(error_constants_1.errorCodes.provider.unauthorized,it),unsupportedMethod:it=>getEthProviderError(error_constants_1.errorCodes.provider.unsupportedMethod,it),disconnected:it=>getEthProviderError(error_constants_1.errorCodes.provider.disconnected,it),chainDisconnected:it=>getEthProviderError(error_constants_1.errorCodes.provider.chainDisconnected,it),custom:it=>{if(!it||typeof it!="object"||Array.isArray(it))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:tt,message:rt,data:at}=it;if(!rt||typeof rt!="string")throw new Error('"message" must be a nonempty string');return new classes_1.EthereumProviderError(tt,rt,at)}}};function getEthJsonRpcError(it,tt){const[rt,at]=parseOpts(tt);return new classes_1.EthereumRpcError(it,rt||utils_1.getMessageFromCode(it),at)}function getEthProviderError(it,tt){const[rt,at]=parseOpts(tt);return new classes_1.EthereumProviderError(it,rt||utils_1.getMessageFromCode(it),at)}function parseOpts(it){if(it){if(typeof it=="string")return[it];if(typeof it=="object"&&!Array.isArray(it)){const{message:tt,data:rt}=it;if(tt&&typeof tt!="string")throw new Error("Must specify string message.");return[tt||void 0,rt]}}return[]}(function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.getMessageFromCode=it.serializeError=it.EthereumProviderError=it.EthereumRpcError=it.ethErrors=it.errorCodes=void 0;const tt=classes;Object.defineProperty(it,"EthereumRpcError",{enumerable:!0,get:function(){return tt.EthereumRpcError}}),Object.defineProperty(it,"EthereumProviderError",{enumerable:!0,get:function(){return tt.EthereumProviderError}});const rt=utils$2;Object.defineProperty(it,"serializeError",{enumerable:!0,get:function(){return rt.serializeError}}),Object.defineProperty(it,"getMessageFromCode",{enumerable:!0,get:function(){return rt.getMessageFromCode}});const at=errors;Object.defineProperty(it,"ethErrors",{enumerable:!0,get:function(){return at.ethErrors}});const st=errorConstants;Object.defineProperty(it,"errorCodes",{enumerable:!0,get:function(){return st.errorCodes}})})(dist);var __importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(JsonRpcEngine$1,"__esModule",{value:!0}),JsonRpcEngine$1.JsonRpcEngine=void 0;const safe_event_emitter_1$1=__importDefault$8(safeEventEmitter$1),eth_rpc_errors_1$2=dist;class JsonRpcEngine extends safe_event_emitter_1$1.default{constructor(){super(),this._middleware=[]}push(tt){this._middleware.push(tt)}handle(tt,rt){if(rt&&typeof rt!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(tt)?rt?this._handleBatch(tt,rt):this._handleBatch(tt):rt?this._handle(tt,rt):this._promiseHandle(tt)}asMiddleware(){return async(tt,rt,at,st)=>{try{const[ot,lt,ut]=await JsonRpcEngine._runAllMiddleware(tt,rt,this._middleware);return lt?(await JsonRpcEngine._runReturnHandlers(ut),st(ot)):at(async ht=>{try{await JsonRpcEngine._runReturnHandlers(ut)}catch(mt){return ht(mt)}return ht()})}catch(ot){return st(ot)}}}async _handleBatch(tt,rt){try{const at=await Promise.all(tt.map(this._promiseHandle.bind(this)));return rt?rt(null,at):at}catch(at){if(rt)return rt(at);throw at}}_promiseHandle(tt){return new Promise(rt=>{this._handle(tt,(at,st)=>{rt(st)})})}async _handle(tt,rt){if(!tt||Array.isArray(tt)||typeof tt!="object"){const lt=new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof tt}`,{request:tt});return rt(lt,{id:void 0,jsonrpc:"2.0",error:lt})}if(typeof tt.method!="string"){const lt=new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof tt.method}`,{request:tt});return rt(lt,{id:tt.id,jsonrpc:"2.0",error:lt})}const at=Object.assign({},tt),st={id:at.id,jsonrpc:at.jsonrpc};let ot=null;try{await this._processRequest(at,st)}catch(lt){ot=lt}return ot&&(delete st.result,st.error||(st.error=eth_rpc_errors_1$2.serializeError(ot))),rt(ot,st)}async _processRequest(tt,rt){const[at,st,ot]=await JsonRpcEngine._runAllMiddleware(tt,rt,this._middleware);if(JsonRpcEngine._checkForCompletion(tt,rt,st),await JsonRpcEngine._runReturnHandlers(ot),at)throw at}static async _runAllMiddleware(tt,rt,at){const st=[];let ot=null,lt=!1;for(const ut of at)if([ot,lt]=await JsonRpcEngine._runMiddleware(tt,rt,ut,st),lt)break;return[ot,lt,st.reverse()]}static _runMiddleware(tt,rt,at,st){return new Promise(ot=>{const lt=ht=>{const mt=ht||rt.error;mt&&(rt.error=eth_rpc_errors_1$2.serializeError(mt)),ot([mt,!0])},ut=ht=>{rt.error?lt(rt.error):(ht&&(typeof ht!="function"&&lt(new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof ht}" for request:
${jsonify(tt)}`,{request:tt})),st.push(ht)),ot([null,!1]))};try{at(tt,rt,ut,lt)}catch(ht){lt(ht)}})}static async _runReturnHandlers(tt){for(const rt of tt)await new Promise((at,st)=>{rt(ot=>ot?st(ot):at())})}static _checkForCompletion(tt,rt,at){if(!("result"in rt)&&!("error"in rt))throw new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${jsonify(tt)}`,{request:tt});if(!at)throw new eth_rpc_errors_1$2.EthereumRpcError(eth_rpc_errors_1$2.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${jsonify(tt)}`,{request:tt})}}JsonRpcEngine$1.JsonRpcEngine=JsonRpcEngine;function jsonify(it){return JSON.stringify(it,null,2)}var mergeMiddleware$1={};Object.defineProperty(mergeMiddleware$1,"__esModule",{value:!0}),mergeMiddleware$1.mergeMiddleware=void 0;const JsonRpcEngine_1=JsonRpcEngine$1;function mergeMiddleware(it){const tt=new JsonRpcEngine_1.JsonRpcEngine;return it.forEach(rt=>tt.push(rt)),tt.asMiddleware()}mergeMiddleware$1.mergeMiddleware=mergeMiddleware,function(it){var tt=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(at,st,ot,lt){lt===void 0&&(lt=ot),Object.defineProperty(at,lt,{enumerable:!0,get:function(){return st[ot]}})}:function(at,st,ot,lt){lt===void 0&&(lt=ot),at[lt]=st[ot]}),rt=commonjsGlobal&&commonjsGlobal.__exportStar||function(at,st){for(var ot in at)ot!=="default"&&!Object.prototype.hasOwnProperty.call(st,ot)&&tt(st,at,ot)};Object.defineProperty(it,"__esModule",{value:!0}),rt(idRemapMiddleware,it),rt(createAsyncMiddleware$3,it),rt(createScaffoldMiddleware$3,it),rt(getUniqueId$1,it),rt(JsonRpcEngine$1,it),rt(mergeMiddleware$1,it)}(dist$1);var lib={},Mutex$2={},tslib$1={exports:{}};(function(it){var tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt,Et,Tt,wt,Ct,It,St,Rt,Dt,Wt,qt,Vt,Yt,jt,kt,zt,Nt;(function(Mt){var Lt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};Mt(Ht(Lt,Ht(it.exports)));function Ht(Qt,Ut){return Qt!==Lt&&(typeof Object.create=="function"?Object.defineProperty(Qt,"__esModule",{value:!0}):Qt.__esModule=!0),function(Bt,Kt){return Qt[Bt]=Ut?Ut(Bt,Kt):Kt}}})(function(Mt){var Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Qt,Ut){Qt.__proto__=Ut}||function(Qt,Ut){for(var Bt in Ut)Object.prototype.hasOwnProperty.call(Ut,Bt)&&(Qt[Bt]=Ut[Bt])};tt=function(Qt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Class extends value "+String(Ut)+" is not a constructor or null");Lt(Qt,Ut);function Bt(){this.constructor=Qt}Qt.prototype=Ut===null?Object.create(Ut):(Bt.prototype=Ut.prototype,new Bt)},rt=Object.assign||function(Qt){for(var Ut,Bt=1,Kt=arguments.length;Bt<Kt;Bt++){Ut=arguments[Bt];for(var Gt in Ut)Object.prototype.hasOwnProperty.call(Ut,Gt)&&(Qt[Gt]=Ut[Gt])}return Qt},at=function(Qt,Ut){var Bt={};for(var Kt in Qt)Object.prototype.hasOwnProperty.call(Qt,Kt)&&Ut.indexOf(Kt)<0&&(Bt[Kt]=Qt[Kt]);if(Qt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Gt=0,Kt=Object.getOwnPropertySymbols(Qt);Gt<Kt.length;Gt++)Ut.indexOf(Kt[Gt])<0&&Object.prototype.propertyIsEnumerable.call(Qt,Kt[Gt])&&(Bt[Kt[Gt]]=Qt[Kt[Gt]]);return Bt},st=function(Qt,Ut,Bt,Kt){var Gt=arguments.length,Pt=Gt<3?Ut:Kt===null?Kt=Object.getOwnPropertyDescriptor(Ut,Bt):Kt,Zt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Pt=Reflect.decorate(Qt,Ut,Bt,Kt);else for(var an=Qt.length-1;an>=0;an--)(Zt=Qt[an])&&(Pt=(Gt<3?Zt(Pt):Gt>3?Zt(Ut,Bt,Pt):Zt(Ut,Bt))||Pt);return Gt>3&&Pt&&Object.defineProperty(Ut,Bt,Pt),Pt},ot=function(Qt,Ut){return function(Bt,Kt){Ut(Bt,Kt,Qt)}},lt=function(Qt,Ut,Bt,Kt,Gt,Pt){function Zt(wn){if(wn!==void 0&&typeof wn!="function")throw new TypeError("Function expected");return wn}for(var an=Kt.kind,Jt=an==="getter"?"get":an==="setter"?"set":"value",rn=!Ut&&Qt?Kt.static?Qt:Qt.prototype:null,fn=Ut||(rn?Object.getOwnPropertyDescriptor(rn,Kt.name):{}),pn,vn=!1,En=Bt.length-1;En>=0;En--){var dn={};for(var cn in Kt)dn[cn]=cn==="access"?{}:Kt[cn];for(var cn in Kt.access)dn.access[cn]=Kt.access[cn];dn.addInitializer=function(wn){if(vn)throw new TypeError("Cannot add initializers after decoration has completed");Pt.push(Zt(wn||null))};var _n=(0,Bt[En])(an==="accessor"?{get:fn.get,set:fn.set}:fn[Jt],dn);if(an==="accessor"){if(_n===void 0)continue;if(_n===null||typeof _n!="object")throw new TypeError("Object expected");(pn=Zt(_n.get))&&(fn.get=pn),(pn=Zt(_n.set))&&(fn.set=pn),(pn=Zt(_n.init))&&Gt.push(pn)}else(pn=Zt(_n))&&(an==="field"?Gt.push(pn):fn[Jt]=pn)}rn&&Object.defineProperty(rn,Kt.name,fn),vn=!0},ut=function(Qt,Ut,Bt){for(var Kt=arguments.length>2,Gt=0;Gt<Ut.length;Gt++)Bt=Kt?Ut[Gt].call(Qt,Bt):Ut[Gt].call(Qt);return Kt?Bt:void 0},ht=function(Qt){return typeof Qt=="symbol"?Qt:"".concat(Qt)},mt=function(Qt,Ut,Bt){return typeof Ut=="symbol"&&(Ut=Ut.description?"[".concat(Ut.description,"]"):""),Object.defineProperty(Qt,"name",{configurable:!0,value:Bt?"".concat(Bt," ",Ut):Ut})},bt=function(Qt,Ut){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Qt,Ut)},vt=function(Qt,Ut,Bt,Kt){function Gt(Pt){return Pt instanceof Bt?Pt:new Bt(function(Zt){Zt(Pt)})}return new(Bt||(Bt=Promise))(function(Pt,Zt){function an(fn){try{rn(Kt.next(fn))}catch(pn){Zt(pn)}}function Jt(fn){try{rn(Kt.throw(fn))}catch(pn){Zt(pn)}}function rn(fn){fn.done?Pt(fn.value):Gt(fn.value).then(an,Jt)}rn((Kt=Kt.apply(Qt,Ut||[])).next())})},At=function(Qt,Ut){var Bt={label:0,sent:function(){if(Pt[0]&1)throw Pt[1];return Pt[1]},trys:[],ops:[]},Kt,Gt,Pt,Zt;return Zt={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(Zt[Symbol.iterator]=function(){return this}),Zt;function an(rn){return function(fn){return Jt([rn,fn])}}function Jt(rn){if(Kt)throw new TypeError("Generator is already executing.");for(;Zt&&(Zt=0,rn[0]&&(Bt=0)),Bt;)try{if(Kt=1,Gt&&(Pt=rn[0]&2?Gt.return:rn[0]?Gt.throw||((Pt=Gt.return)&&Pt.call(Gt),0):Gt.next)&&!(Pt=Pt.call(Gt,rn[1])).done)return Pt;switch(Gt=0,Pt&&(rn=[rn[0]&2,Pt.value]),rn[0]){case 0:case 1:Pt=rn;break;case 4:return Bt.label++,{value:rn[1],done:!1};case 5:Bt.label++,Gt=rn[1],rn=[0];continue;case 7:rn=Bt.ops.pop(),Bt.trys.pop();continue;default:if(Pt=Bt.trys,!(Pt=Pt.length>0&&Pt[Pt.length-1])&&(rn[0]===6||rn[0]===2)){Bt=0;continue}if(rn[0]===3&&(!Pt||rn[1]>Pt[0]&&rn[1]<Pt[3])){Bt.label=rn[1];break}if(rn[0]===6&&Bt.label<Pt[1]){Bt.label=Pt[1],Pt=rn;break}if(Pt&&Bt.label<Pt[2]){Bt.label=Pt[2],Bt.ops.push(rn);break}Pt[2]&&Bt.ops.pop(),Bt.trys.pop();continue}rn=Ut.call(Qt,Bt)}catch(fn){rn=[6,fn],Gt=0}finally{Kt=Pt=0}if(rn[0]&5)throw rn[1];return{value:rn[0]?rn[1]:void 0,done:!0}}},xt=function(Qt,Ut){for(var Bt in Qt)Bt!=="default"&&!Object.prototype.hasOwnProperty.call(Ut,Bt)&&Nt(Ut,Qt,Bt)},Nt=Object.create?function(Qt,Ut,Bt,Kt){Kt===void 0&&(Kt=Bt);var Gt=Object.getOwnPropertyDescriptor(Ut,Bt);(!Gt||("get"in Gt?!Ut.__esModule:Gt.writable||Gt.configurable))&&(Gt={enumerable:!0,get:function(){return Ut[Bt]}}),Object.defineProperty(Qt,Kt,Gt)}:function(Qt,Ut,Bt,Kt){Kt===void 0&&(Kt=Bt),Qt[Kt]=Ut[Bt]},Et=function(Qt){var Ut=typeof Symbol=="function"&&Symbol.iterator,Bt=Ut&&Qt[Ut],Kt=0;if(Bt)return Bt.call(Qt);if(Qt&&typeof Qt.length=="number")return{next:function(){return Qt&&Kt>=Qt.length&&(Qt=void 0),{value:Qt&&Qt[Kt++],done:!Qt}}};throw new TypeError(Ut?"Object is not iterable.":"Symbol.iterator is not defined.")},Tt=function(Qt,Ut){var Bt=typeof Symbol=="function"&&Qt[Symbol.iterator];if(!Bt)return Qt;var Kt=Bt.call(Qt),Gt,Pt=[],Zt;try{for(;(Ut===void 0||Ut-- >0)&&!(Gt=Kt.next()).done;)Pt.push(Gt.value)}catch(an){Zt={error:an}}finally{try{Gt&&!Gt.done&&(Bt=Kt.return)&&Bt.call(Kt)}finally{if(Zt)throw Zt.error}}return Pt},wt=function(){for(var Qt=[],Ut=0;Ut<arguments.length;Ut++)Qt=Qt.concat(Tt(arguments[Ut]));return Qt},Ct=function(){for(var Qt=0,Ut=0,Bt=arguments.length;Ut<Bt;Ut++)Qt+=arguments[Ut].length;for(var Kt=Array(Qt),Gt=0,Ut=0;Ut<Bt;Ut++)for(var Pt=arguments[Ut],Zt=0,an=Pt.length;Zt<an;Zt++,Gt++)Kt[Gt]=Pt[Zt];return Kt},It=function(Qt,Ut,Bt){if(Bt||arguments.length===2)for(var Kt=0,Gt=Ut.length,Pt;Kt<Gt;Kt++)(Pt||!(Kt in Ut))&&(Pt||(Pt=Array.prototype.slice.call(Ut,0,Kt)),Pt[Kt]=Ut[Kt]);return Qt.concat(Pt||Array.prototype.slice.call(Ut))},St=function(Qt){return this instanceof St?(this.v=Qt,this):new St(Qt)},Rt=function(Qt,Ut,Bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Kt=Bt.apply(Qt,Ut||[]),Gt,Pt=[];return Gt={},Zt("next"),Zt("throw"),Zt("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt;function Zt(vn){Kt[vn]&&(Gt[vn]=function(En){return new Promise(function(dn,cn){Pt.push([vn,En,dn,cn])>1||an(vn,En)})})}function an(vn,En){try{Jt(Kt[vn](En))}catch(dn){pn(Pt[0][3],dn)}}function Jt(vn){vn.value instanceof St?Promise.resolve(vn.value.v).then(rn,fn):pn(Pt[0][2],vn)}function rn(vn){an("next",vn)}function fn(vn){an("throw",vn)}function pn(vn,En){vn(En),Pt.shift(),Pt.length&&an(Pt[0][0],Pt[0][1])}},Dt=function(Qt){var Ut,Bt;return Ut={},Kt("next"),Kt("throw",function(Gt){throw Gt}),Kt("return"),Ut[Symbol.iterator]=function(){return this},Ut;function Kt(Gt,Pt){Ut[Gt]=Qt[Gt]?function(Zt){return(Bt=!Bt)?{value:St(Qt[Gt](Zt)),done:!1}:Pt?Pt(Zt):Zt}:Pt}},Wt=function(Qt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ut=Qt[Symbol.asyncIterator],Bt;return Ut?Ut.call(Qt):(Qt=typeof Et=="function"?Et(Qt):Qt[Symbol.iterator](),Bt={},Kt("next"),Kt("throw"),Kt("return"),Bt[Symbol.asyncIterator]=function(){return this},Bt);function Kt(Pt){Bt[Pt]=Qt[Pt]&&function(Zt){return new Promise(function(an,Jt){Zt=Qt[Pt](Zt),Gt(an,Jt,Zt.done,Zt.value)})}}function Gt(Pt,Zt,an,Jt){Promise.resolve(Jt).then(function(rn){Pt({value:rn,done:an})},Zt)}},qt=function(Qt,Ut){return Object.defineProperty?Object.defineProperty(Qt,"raw",{value:Ut}):Qt.raw=Ut,Qt};var Ht=Object.create?function(Qt,Ut){Object.defineProperty(Qt,"default",{enumerable:!0,value:Ut})}:function(Qt,Ut){Qt.default=Ut};Vt=function(Qt){if(Qt&&Qt.__esModule)return Qt;var Ut={};if(Qt!=null)for(var Bt in Qt)Bt!=="default"&&Object.prototype.hasOwnProperty.call(Qt,Bt)&&Nt(Ut,Qt,Bt);return Ht(Ut,Qt),Ut},Yt=function(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}},jt=function(Qt,Ut,Bt,Kt){if(Bt==="a"&&!Kt)throw new TypeError("Private accessor was defined without a getter");if(typeof Ut=="function"?Qt!==Ut||!Kt:!Ut.has(Qt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Bt==="m"?Kt:Bt==="a"?Kt.call(Qt):Kt?Kt.value:Ut.get(Qt)},kt=function(Qt,Ut,Bt,Kt,Gt){if(Kt==="m")throw new TypeError("Private method is not writable");if(Kt==="a"&&!Gt)throw new TypeError("Private accessor was defined without a setter");if(typeof Ut=="function"?Qt!==Ut||!Gt:!Ut.has(Qt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Kt==="a"?Gt.call(Qt,Bt):Gt?Gt.value=Bt:Ut.set(Qt,Bt),Bt},zt=function(Qt,Ut){if(Ut===null||typeof Ut!="object"&&typeof Ut!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Qt=="function"?Ut===Qt:Qt.has(Ut)},Mt("__extends",tt),Mt("__assign",rt),Mt("__rest",at),Mt("__decorate",st),Mt("__param",ot),Mt("__esDecorate",lt),Mt("__runInitializers",ut),Mt("__propKey",ht),Mt("__setFunctionName",mt),Mt("__metadata",bt),Mt("__awaiter",vt),Mt("__generator",At),Mt("__exportStar",xt),Mt("__createBinding",Nt),Mt("__values",Et),Mt("__read",Tt),Mt("__spread",wt),Mt("__spreadArrays",Ct),Mt("__spreadArray",It),Mt("__await",St),Mt("__asyncGenerator",Rt),Mt("__asyncDelegator",Dt),Mt("__asyncValues",Wt),Mt("__makeTemplateObject",qt),Mt("__importStar",Vt),Mt("__importDefault",Yt),Mt("__classPrivateFieldGet",jt),Mt("__classPrivateFieldSet",kt),Mt("__classPrivateFieldIn",zt)})})(tslib$1);var Semaphore$1={};Object.defineProperty(Semaphore$1,"__esModule",{value:!0});var tslib_1$2=tslib$1.exports,Semaphore=function(){function it(tt){if(this._maxConcurrency=tt,this._queue=[],tt<=0)throw new Error("semaphore must be initialized to a positive value");this._value=tt}return it.prototype.acquire=function(){var tt=this,rt=this.isLocked(),at=new Promise(function(st){return tt._queue.push(st)});return rt||this._dispatch(),at},it.prototype.runExclusive=function(tt){return tslib_1$2.__awaiter(this,void 0,void 0,function(){var rt,at,st;return tslib_1$2.__generator(this,function(ot){switch(ot.label){case 0:return[4,this.acquire()];case 1:rt=ot.sent(),at=rt[0],st=rt[1],ot.label=2;case 2:return ot.trys.push([2,,4,5]),[4,tt(at)];case 3:return[2,ot.sent()];case 4:return st(),[7];case 5:return[2]}})})},it.prototype.isLocked=function(){return this._value<=0},it.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var tt=this._currentReleaser;this._currentReleaser=void 0,tt()}},it.prototype._dispatch=function(){var tt=this,rt=this._queue.shift();if(!!rt){var at=!1;this._currentReleaser=function(){at||(at=!0,tt._value++,tt._dispatch())},rt([this._value--,this._currentReleaser])}},it}();Semaphore$1.default=Semaphore,Object.defineProperty(Mutex$2,"__esModule",{value:!0});var tslib_1$1=tslib$1.exports,Semaphore_1=Semaphore$1,Mutex$1=function(){function it(){this._semaphore=new Semaphore_1.default(1)}return it.prototype.acquire=function(){return tslib_1$1.__awaiter(this,void 0,void 0,function(){var tt,rt;return tslib_1$1.__generator(this,function(at){switch(at.label){case 0:return[4,this._semaphore.acquire()];case 1:return tt=at.sent(),rt=tt[1],[2,rt]}})})},it.prototype.runExclusive=function(tt){return this._semaphore.runExclusive(function(){return tt()})},it.prototype.isLocked=function(){return this._semaphore.isLocked()},it.prototype.release=function(){this._semaphore.release()},it}();Mutex$2.default=Mutex$1;var withTimeout$1={};Object.defineProperty(withTimeout$1,"__esModule",{value:!0}),withTimeout$1.withTimeout=void 0;var tslib_1=tslib$1.exports;function withTimeout(it,tt,rt){var at=this;return rt===void 0&&(rt=new Error("timeout")),{acquire:function(){return new Promise(function(st,ot){return tslib_1.__awaiter(at,void 0,void 0,function(){var lt,ut,ht;return tslib_1.__generator(this,function(mt){switch(mt.label){case 0:return lt=!1,setTimeout(function(){lt=!0,ot(rt)},tt),[4,it.acquire()];case 1:return ut=mt.sent(),lt?(ht=Array.isArray(ut)?ut[1]:ut,ht()):st(ut),[2]}})})})},runExclusive:function(st){return tslib_1.__awaiter(this,void 0,void 0,function(){var ot,lt;return tslib_1.__generator(this,function(ut){switch(ut.label){case 0:ot=function(){},ut.label=1;case 1:return ut.trys.push([1,,7,8]),[4,this.acquire()];case 2:return lt=ut.sent(),Array.isArray(lt)?(ot=lt[1],[4,st(lt[0])]):[3,4];case 3:return[2,ut.sent()];case 4:return ot=lt,[4,st()];case 5:return[2,ut.sent()];case 6:return[3,8];case 7:return ot(),[7];case 8:return[2]}})})},release:function(){it.release()},isLocked:function(){return it.isLocked()}}}withTimeout$1.withTimeout=withTimeout,function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.withTimeout=it.Semaphore=it.Mutex=void 0;var tt=Mutex$2;Object.defineProperty(it,"Mutex",{enumerable:!0,get:function(){return tt.default}});var rt=Semaphore$1;Object.defineProperty(it,"Semaphore",{enumerable:!0,get:function(){return rt.default}});var at=withTimeout$1;Object.defineProperty(it,"withTimeout",{enumerable:!0,get:function(){return at.withTimeout}})}(lib);const processFn=(it,tt,rt,at)=>function(...st){const ot=tt.promiseModule;return new ot((lt,ut)=>{tt.multiArgs?st.push((...mt)=>{tt.errorFirst?mt[0]?ut(mt):(mt.shift(),lt(mt)):lt(mt)}):tt.errorFirst?st.push((mt,bt)=>{mt?ut(mt):lt(bt)}):st.push(lt),Reflect.apply(it,this===rt?at:this,st)})},filterCache=new WeakMap;var pify$1=(it,tt)=>{tt={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...tt};const rt=typeof it;if(!(it!==null&&(rt==="object"||rt==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${it===null?"null":rt}\``);const at=(lt,ut)=>{let ht=filterCache.get(lt);if(ht||(ht={},filterCache.set(lt,ht)),ut in ht)return ht[ut];const mt=Et=>typeof Et=="string"||typeof ut=="symbol"?ut===Et:Et.test(ut),bt=Reflect.getOwnPropertyDescriptor(lt,ut),vt=bt===void 0||bt.writable||bt.configurable,xt=(tt.include?tt.include.some(mt):!tt.exclude.some(mt))&&vt;return ht[ut]=xt,xt},st=new WeakMap,ot=new Proxy(it,{apply(lt,ut,ht){const mt=st.get(lt);if(mt)return Reflect.apply(mt,ut,ht);const bt=tt.excludeMain?lt:processFn(lt,tt,ot,lt);return st.set(lt,bt),Reflect.apply(bt,ut,ht)},get(lt,ut){const ht=lt[ut];if(!at(lt,ut)||ht===Function.prototype[ut])return ht;const mt=st.get(ht);if(mt)return mt;if(typeof ht=="function"){const bt=processFn(ht,tt,ot,lt);return st.set(ht,bt),bt}return ht}});return ot};const SafeEventEmitter$1=safeEventEmitter$1.default;class BaseFilter$3 extends SafeEventEmitter$1{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(tt){this.updates=this.updates.concat(tt),tt.forEach(rt=>this.emit("update",rt))}addInitialResults(tt){}getChangesAndClear(){const tt=this.updates;return this.updates=[],tt}}var baseFilter=BaseFilter$3;const BaseFilter$2=baseFilter;class BaseFilterWithHistory$1 extends BaseFilter$2{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(tt){this.allResults=this.allResults.concat(tt),super.addResults(tt)}addInitialResults(tt){this.allResults=this.allResults.concat(tt),super.addInitialResults(tt)}getAllResults(){return this.allResults}}var baseFilterHistory=BaseFilterWithHistory$1,hexUtils={minBlockRef:minBlockRef$1,maxBlockRef,sortBlockRefs,bnToHex:bnToHex$1,blockRefIsNumber:blockRefIsNumber$1,hexToInt:hexToInt$3,incrementHexInt:incrementHexInt$4,intToHex:intToHex$2,unsafeRandomBytes:unsafeRandomBytes$1};function minBlockRef$1(...it){return sortBlockRefs(it)[0]}function maxBlockRef(...it){const tt=sortBlockRefs(it);return tt[tt.length-1]}function sortBlockRefs(it){return it.sort((tt,rt)=>tt==="latest"||rt==="earliest"?1:rt==="latest"||tt==="earliest"?-1:hexToInt$3(tt)-hexToInt$3(rt))}function bnToHex$1(it){return"0x"+it.toString(16)}function blockRefIsNumber$1(it){return it&&!["earliest","latest","pending"].includes(it)}function hexToInt$3(it){return it==null?it:Number.parseInt(it,16)}function incrementHexInt$4(it){if(it==null)return it;const tt=hexToInt$3(it);return intToHex$2(tt+1)}function intToHex$2(it){if(it==null)return it;let tt=it.toString(16);return tt.length%2&&(tt="0"+tt),"0x"+tt}function unsafeRandomBytes$1(it){let tt="0x";for(let rt=0;rt<it;rt++)tt+=unsafeRandomNibble(),tt+=unsafeRandomNibble();return tt}function unsafeRandomNibble(){return Math.floor(Math.random()*16).toString(16)}const EthQuery=ethQuery,pify=pify$1,BaseFilterWithHistory=baseFilterHistory,{bnToHex,hexToInt:hexToInt$2,incrementHexInt:incrementHexInt$3,minBlockRef,blockRefIsNumber}=hexUtils;class LogFilter$1 extends BaseFilterWithHistory{constructor({provider:tt,params:rt}){super(),this.type="log",this.ethQuery=new EthQuery(tt),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},rt),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(at=>at.toLowerCase()))}async initialize({currentBlock:tt}){let rt=this.params.fromBlock;["latest","pending"].includes(rt)&&(rt=tt),rt==="earliest"&&(rt="0x0"),this.params.fromBlock=rt;const at=minBlockRef(this.params.toBlock,tt),st=Object.assign({},this.params,{toBlock:at}),ot=await this._fetchLogs(st);this.addInitialResults(ot)}async update({oldBlock:tt,newBlock:rt}){const at=rt;let st;tt?st=incrementHexInt$3(tt):st=rt;const ot=Object.assign({},this.params,{fromBlock:st,toBlock:at}),ut=(await this._fetchLogs(ot)).filter(ht=>this.matchLog(ht));this.addResults(ut)}async _fetchLogs(tt){return await pify(at=>this.ethQuery.getLogs(tt,at))()}matchLog(tt){if(hexToInt$2(this.params.fromBlock)>=hexToInt$2(tt.blockNumber)||blockRefIsNumber(this.params.toBlock)&&hexToInt$2(this.params.toBlock)<=hexToInt$2(tt.blockNumber))return!1;const rt=tt.address&&tt.address.toLowerCase();return this.params.address&&rt&&!this.params.address.includes(rt)?!1:this.params.topics.every((st,ot)=>{let lt=tt.topics[ot];if(!lt)return!1;lt=lt.toLowerCase();let ut=Array.isArray(st)?st:[st];return ut.includes(null)?!0:(ut=ut.map(bt=>bt.toLowerCase()),ut.includes(lt))})}}var logFilter=LogFilter$1,getBlocksForRange_1=getBlocksForRange$3;async function getBlocksForRange$3({provider:it,fromBlock:tt,toBlock:rt}){tt||(tt=rt);const at=hexToInt$1(tt),ot=hexToInt$1(rt)-at+1,lt=Array(ot).fill().map((ht,mt)=>at+mt).map(intToHex$1);return await Promise.all(lt.map(ht=>query(it,"eth_getBlockByNumber",[ht,!1])))}function hexToInt$1(it){return it==null?it:Number.parseInt(it,16)}function intToHex$1(it){return it==null?it:"0x"+it.toString(16)}function sendAsync(it,tt){return new Promise((rt,at)=>{it.sendAsync(tt,(st,ot)=>{st?at(st):ot.error?at(ot.error):ot.result?rt(ot.result):at(new Error("Result was empty"))})})}async function query(it,tt,rt){for(let at=0;at<3;at++)try{return await sendAsync(it,{id:1,jsonrpc:"2.0",method:tt,params:rt})}catch(st){console.error(`provider.sendAsync failed: ${st.stack||st.message||st}`)}throw new Error(`Block not found for params: ${JSON.stringify(rt)}`)}const BaseFilter$1=baseFilter,getBlocksForRange$2=getBlocksForRange_1,{incrementHexInt:incrementHexInt$2}=hexUtils;class BlockFilter$1 extends BaseFilter$1{constructor({provider:tt,params:rt}){super(),this.type="block",this.provider=tt}async update({oldBlock:tt,newBlock:rt}){const at=rt,st=incrementHexInt$2(tt),lt=(await getBlocksForRange$2({provider:this.provider,fromBlock:st,toBlock:at})).map(ut=>ut.hash);this.addResults(lt)}}var blockFilter=BlockFilter$1;const BaseFilter=baseFilter,getBlocksForRange$1=getBlocksForRange_1,{incrementHexInt:incrementHexInt$1}=hexUtils;class TxFilter$1 extends BaseFilter{constructor({provider:tt}){super(),this.type="tx",this.provider=tt}async update({oldBlock:tt}){const rt=tt,at=incrementHexInt$1(tt),st=await getBlocksForRange$1({provider:this.provider,fromBlock:at,toBlock:rt}),ot=[];for(const lt of st)ot.push(...lt.transactions);this.addResults(ot)}}var txFilter=TxFilter$1;const Mutex=lib.Mutex,{createAsyncMiddleware:createAsyncMiddleware$1,createScaffoldMiddleware:createScaffoldMiddleware$1}=dist$1,LogFilter=logFilter,BlockFilter=blockFilter,TxFilter=txFilter,{intToHex,hexToInt}=hexUtils;var ethJsonRpcFilters=createEthFilterMiddleware;function createEthFilterMiddleware({blockTracker:it,provider:tt}){let rt=0,at={};const st=new Mutex,ot=mutexMiddlewareWrapper({mutex:st}),lt=createScaffoldMiddleware$1({eth_newFilter:ot(toFilterCreationMiddleware(ht)),eth_newBlockFilter:ot(toFilterCreationMiddleware(mt)),eth_newPendingTransactionFilter:ot(toFilterCreationMiddleware(bt)),eth_uninstallFilter:ot(toAsyncRpcMiddleware(xt)),eth_getFilterChanges:ot(toAsyncRpcMiddleware(vt)),eth_getFilterLogs:ot(toAsyncRpcMiddleware(At))}),ut=async({oldBlock:It,newBlock:St})=>{if(at.length===0)return;const Rt=await st.acquire();try{await Promise.all(objValues(at).map(async Dt=>{try{await Dt.update({oldBlock:It,newBlock:St})}catch(Wt){console.error(Wt)}}))}catch(Dt){console.error(Dt)}Rt()};return lt.newLogFilter=ht,lt.newBlockFilter=mt,lt.newPendingTransactionFilter=bt,lt.uninstallFilter=xt,lt.getFilterChanges=vt,lt.getFilterLogs=At,lt.destroy=()=>{wt()},lt;async function ht(It){const St=new LogFilter({provider:tt,params:It});return await Et(St),St}async function mt(){const It=new BlockFilter({provider:tt});return await Et(It),It}async function bt(){const It=new TxFilter({provider:tt});return await Et(It),It}async function vt(It){const St=hexToInt(It),Rt=at[St];if(!Rt)throw new Error(`No filter for index "${St}"`);return Rt.getChangesAndClear()}async function At(It){const St=hexToInt(It),Rt=at[St];if(!Rt)throw new Error(`No filter for index "${St}"`);let Dt=[];return Rt.type==="log"&&(Dt=Rt.getAllResults()),Dt}async function xt(It){const St=hexToInt(It),Rt=at[St],Dt=Boolean(Rt);return Dt&&await Tt(St),Dt}async function Et(It){const St=objValues(at).length,Rt=await it.getLatestBlock();await It.initialize({currentBlock:Rt}),rt++,at[rt]=It,It.id=rt,It.idHex=intToHex(rt);const Dt=objValues(at).length;return Ct({prevFilterCount:St,newFilterCount:Dt}),rt}async function Tt(It){const St=objValues(at).length;delete at[It];const Rt=objValues(at).length;Ct({prevFilterCount:St,newFilterCount:Rt})}async function wt(){const It=objValues(at).length;at={},Ct({prevFilterCount:It,newFilterCount:0})}function Ct({prevFilterCount:It,newFilterCount:St}){if(It===0&&St>0){it.on("sync",ut);return}if(It>0&&St===0){it.removeListener("sync",ut);return}}}function toFilterCreationMiddleware(it){return toAsyncRpcMiddleware(async(...tt)=>{const rt=await it(...tt);return intToHex(rt.id)})}function toAsyncRpcMiddleware(it){return createAsyncMiddleware$1(async(tt,rt)=>{const at=await it.apply(null,tt.params);rt.result=at})}function mutexMiddlewareWrapper({mutex:it}){return tt=>async(rt,at,st,ot)=>{(await it.acquire())(),tt(rt,at,st,ot)}}function objValues(it,tt){const rt=[];for(let at in it)rt.push(it[at]);return rt}const SafeEventEmitter=safeEventEmitter$1.default,{createAsyncMiddleware,createScaffoldMiddleware}=dist$1,createFilterMiddleware=ethJsonRpcFilters,{unsafeRandomBytes,incrementHexInt}=hexUtils,getBlocksForRange=getBlocksForRange_1;var subscriptionManager=createSubscriptionMiddleware;function createSubscriptionMiddleware({blockTracker:it,provider:tt}){const rt={},at=createFilterMiddleware({blockTracker:it,provider:tt});let st=!1;const ot=new SafeEventEmitter,lt=createScaffoldMiddleware({eth_subscribe:createAsyncMiddleware(ut),eth_unsubscribe:createAsyncMiddleware(ht)});return lt.destroy=bt,{events:ot,middleware:lt};async function ut(vt,At){if(st)throw new Error("SubscriptionManager - attempting to use after destroying");const xt=vt.params[0],Et=unsafeRandomBytes(16);let Tt;switch(xt){case"newHeads":Tt=wt({subId:Et});break;case"logs":const It=vt.params[1],St=await at.newLogFilter(It);Tt=Ct({subId:Et,filter:St});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${xt}"`)}rt[Et]=Tt,At.result=Et;return;function wt({subId:It}){const St={type:xt,destroy:async()=>{it.removeListener("sync",St.update)},update:async({oldBlock:Rt,newBlock:Dt})=>{const Wt=Dt,qt=incrementHexInt(Rt);(await getBlocksForRange({provider:tt,fromBlock:qt,toBlock:Wt})).map(normalizeBlock).filter(jt=>jt!==null).forEach(jt=>{mt(It,jt)})}};return it.on("sync",St.update),St}function Ct({subId:It,filter:St}){return St.on("update",Dt=>mt(It,Dt)),{type:xt,destroy:async()=>await at.uninstallFilter(St.idHex)}}}async function ht(vt,At){if(st)throw new Error("SubscriptionManager - attempting to use after destroying");const xt=vt.params[0],Et=rt[xt];if(!Et){At.result=!1;return}delete rt[xt],await Et.destroy(),At.result=!0}function mt(vt,At){ot.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:vt,result:At}})}function bt(){ot.removeAllListeners();for(const vt in rt)rt[vt].destroy(),delete rt[vt];st=!0}}function normalizeBlock(it){return it==null?null:{hash:it.hash,parentHash:it.parentHash,sha3Uncles:it.sha3Uncles,miner:it.miner,stateRoot:it.stateRoot,transactionsRoot:it.transactionsRoot,receiptsRoot:it.receiptsRoot,logsBloom:it.logsBloom,difficulty:it.difficulty,number:it.number,gasLimit:it.gasLimit,gasUsed:it.gasUsed,nonce:it.nonce,mixHash:it.mixHash,timestamp:it.timestamp,extraData:it.extraData}}Object.defineProperty(SubscriptionManager$1,"__esModule",{value:!0}),SubscriptionManager$1.SubscriptionManager=void 0;const PollingBlockTracker=polling,createSubscriptionManager=subscriptionManager,noop$3=()=>{};class SubscriptionManager{constructor(tt){const rt=new PollingBlockTracker({provider:tt,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:at,middleware:st}=createSubscriptionManager({blockTracker:rt,provider:tt});this.events=at,this.subscriptionMiddleware=st}async handleRequest(tt){const rt={};return await this.subscriptionMiddleware(tt,rt,noop$3,noop$3),rt}destroy(){this.subscriptionMiddleware.destroy()}}SubscriptionManager$1.SubscriptionManager=SubscriptionManager;var __importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(CoinbaseWalletProvider$1,"__esModule",{value:!0}),CoinbaseWalletProvider$1.CoinbaseWalletProvider=void 0;const safe_event_emitter_1=__importDefault$7(safeEventEmitter$1),bn_js_1=__importDefault$7(bn$1.exports),eth_rpc_errors_1$1=dist$2,DiagnosticLogger_1$2=DiagnosticLogger,Session_1$2=Session$1,WalletSDKRelayAbstract_1$1=WalletSDKRelayAbstract$1,util_1$5=util$5,eth_eip712_util_1=__importDefault$7(ethEip712Util),FilterPolyfill_1=FilterPolyfill$1,JSONRPC_1=JSONRPC,SubscriptionManager_1=SubscriptionManager$1,DEFAULT_CHAIN_ID_KEY="DefaultChainId",DEFAULT_JSON_RPC_URL="DefaultJsonRpcUrl";class CoinbaseWalletProvider extends safe_event_emitter_1.default{constructor(tt){var rt,at;super(),this._filterPolyfill=new FilterPolyfill_1.FilterPolyfill(this),this._subscriptionManager=new SubscriptionManager_1.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this._send=this.send.bind(this),this._sendAsync=this.sendAsync.bind(this),this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=tt.chainId,this._jsonRpcUrlFromOpts=tt.jsonRpcUrl,this._overrideIsMetaMask=tt.overrideIsMetaMask,this._relayProvider=tt.relayProvider,this._storage=tt.storage,this._relayEventManager=tt.relayEventManager,this.diagnostic=tt.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(rt=tt.overrideIsCoinbaseWallet)!==null&&rt!==void 0?rt:!0,this.isCoinbaseBrowser=(at=tt.overrideIsCoinbaseBrowser)!==null&&at!==void 0?at:!1,this.qrUrl=tt.qrUrl,this.supportsAddressSwitching=tt.supportsAddressSwitching,this.isLedger=tt.isLedger;const st=this.getChainId(),ot=(0,util_1$5.prepend0x)(st.toString(16));this.emit("connect",{chainIdStr:ot});const lt=this._storage.getItem(WalletSDKRelayAbstract_1$1.LOCAL_STORAGE_ADDRESSES_KEY);if(lt){const ut=lt.split(" ");ut[0]!==""&&(this._addresses=ut.map(ht=>(0,util_1$5.ensureAddressString)(ht)),this.emit("accountsChanged",ut))}this._subscriptionManager.events.on("notification",ut=>{this.emit("message",{type:ut.method,data:ut.params})}),this._addresses.length>0&&this.initializeRelay(),window.addEventListener("message",ut=>{var ht;if(!(ut.origin!==location.origin||ut.source!==window)&&ut.data.type==="walletLinkMessage"){if(ut.data.data.action==="defaultChainChanged"||ut.data.data.action==="dappChainSwitched"){const mt=ut.data.data.chainId,bt=(ht=ut.data.data.jsonRpcUrl)!==null&&ht!==void 0?ht:this.jsonRpcUrl;this.updateProviderInfo(bt,Number(mt))}ut.data.data.action==="addressChanged"&&this._setAddresses([ut.data.data.address])}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,util_1$5.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var tt;return(tt=this._storage.getItem(DEFAULT_JSON_RPC_URL))!==null&&tt!==void 0?tt:this._jsonRpcUrlFromOpts}set jsonRpcUrl(tt){this._storage.setItem(DEFAULT_JSON_RPC_URL,tt)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(tt,rt){this.isLedger||this.isCoinbaseBrowser||(this._chainIdFromOpts=rt,this._jsonRpcUrlFromOpts=tt),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(tt,rt){this.jsonRpcUrl=tt;const at=this.getChainId();this._storage.setItem(DEFAULT_CHAIN_ID_KEY,rt.toString(10)),((0,util_1$5.ensureIntNumber)(rt)!==at||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(tt,rt,at,st,ot,lt){return!!(await(await this.initializeRelay()).watchAsset(tt,rt,at,st,ot,lt==null?void 0:lt.toString()).promise).result}async addEthereumChain(tt,rt,at,st,ot,lt){var ut,ht;if((0,util_1$5.ensureIntNumber)(tt)===this.getChainId())return!1;const mt=await this.initializeRelay(),bt=mt.inlineAddEthereumChain(tt.toString());!this._isAuthorized()&&!bt&&await mt.requestEthereumAccounts().promise;const vt=await mt.addEthereumChain(tt.toString(),rt,ot,at,st,lt).promise;return((ut=vt.result)===null||ut===void 0?void 0:ut.isApproved)===!0&&this.updateProviderInfo(rt[0],tt),((ht=vt.result)===null||ht===void 0?void 0:ht.isApproved)===!0}async switchEthereumChain(tt){const at=await(await this.initializeRelay()).switchEthereumChain(tt.toString(10),this.selectedAddress||void 0).promise;if(at.errorCode)throw eth_rpc_errors_1$1.ethErrors.provider.custom({code:at.errorCode});const st=at.result;st.isApproved&&st.rpcUrl.length>0&&this.updateProviderInfo(st.rpcUrl,tt)}setAppInfo(tt,rt){this.initializeRelay().then(at=>at.setAppInfo(tt,rt))}async enable(){var tt;return(tt=this.diagnostic)===null||tt===void 0||tt.log(DiagnosticLogger_1$2.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?Session_1$2.Session.hash(this._relay.session.id):void 0}),this._addresses.length>0?[...this._addresses]:await this._send(JSONRPC_1.JSONRPCMethod.eth_requestAccounts)}async close(){(await this.initializeRelay()).resetAndReload()}send(tt,rt){if(typeof tt=="string"){const st=tt,ot=Array.isArray(rt)?rt:rt!==void 0?[rt]:[],lt={jsonrpc:"2.0",id:0,method:st,params:ot};return this._sendRequestAsync(lt).then(ut=>ut.result)}if(typeof rt=="function"){const st=tt,ot=rt;return this._sendAsync(st,ot)}if(Array.isArray(tt))return tt.map(ot=>this._sendRequest(ot));const at=tt;return this._sendRequest(at)}async sendAsync(tt,rt){if(typeof rt!="function")throw new Error("callback is required");if(Array.isArray(tt)){const st=rt;this._sendMultipleRequestsAsync(tt).then(ot=>st(null,ot)).catch(ot=>st(ot,null));return}const at=rt;return this._sendRequestAsync(tt).then(st=>at(null,st)).catch(st=>at(st,null))}async request(tt){if(!tt||typeof tt!="object"||Array.isArray(tt))throw eth_rpc_errors_1$1.ethErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:tt});const{method:rt,params:at}=tt;if(typeof rt!="string"||rt.length===0)throw eth_rpc_errors_1$1.ethErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:tt});if(at!==void 0&&!Array.isArray(at)&&(typeof at!="object"||at===null))throw eth_rpc_errors_1$1.ethErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:tt});const st=at===void 0?[]:at,ot=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:rt,params:st,jsonrpc:"2.0",id:ot})).result}async scanQRCode(tt){const at=await(await this.initializeRelay()).scanQRCode((0,util_1$5.ensureRegExpString)(tt)).promise;if(typeof at.result!="string")throw new Error("result was not a string");return at.result}async genericRequest(tt,rt){const st=await(await this.initializeRelay()).genericRequest(tt,rt).promise;if(typeof st.result!="string")throw new Error("result was not a string");return st.result}async selectProvider(tt){const at=await(await this.initializeRelay()).selectProvider(tt).promise;if(typeof at.result!="string")throw new Error("result was not a string");return at.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(tt){const rt={jsonrpc:"2.0",id:tt.id},{method:at}=tt;if(rt.result=this._handleSynchronousMethods(tt),rt.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${at} synchronously without a callback. Please provide a callback parameter to call ${at} asynchronously.`);return rt}_setAddresses(tt,rt){if(!Array.isArray(tt))throw new Error("addresses is not an array");const at=tt.map(st=>(0,util_1$5.ensureAddressString)(st));JSON.stringify(at)!==JSON.stringify(this._addresses)&&(this._addresses.length>0&&this.supportsAddressSwitching===!1&&!rt||(this._addresses=at,this.emit("accountsChanged",this._addresses),this._storage.setItem(WalletSDKRelayAbstract_1$1.LOCAL_STORAGE_ADDRESSES_KEY,at.join(" "))))}_sendRequestAsync(tt){return new Promise((rt,at)=>{try{const st=this._handleSynchronousMethods(tt);if(st!==void 0)return rt({jsonrpc:"2.0",id:tt.id,result:st});const ot=this._handleAsynchronousFilterMethods(tt);if(ot!==void 0){ot.then(ut=>rt(Object.assign(Object.assign({},ut),{id:tt.id}))).catch(ut=>at(ut));return}const lt=this._handleSubscriptionMethods(tt);if(lt!==void 0){lt.then(ut=>rt({jsonrpc:"2.0",id:tt.id,result:ut.result})).catch(ut=>at(ut));return}}catch(st){return at(st)}this._handleAsynchronousMethods(tt).then(st=>st&&rt(Object.assign(Object.assign({},st),{id:tt.id}))).catch(st=>at(st))})}_sendMultipleRequestsAsync(tt){return Promise.all(tt.map(rt=>this._sendRequestAsync(rt)))}_handleSynchronousMethods(tt){const{method:rt}=tt,at=tt.params||[];switch(rt){case JSONRPC_1.JSONRPCMethod.eth_accounts:return this._eth_accounts();case JSONRPC_1.JSONRPCMethod.eth_coinbase:return this._eth_coinbase();case JSONRPC_1.JSONRPCMethod.eth_uninstallFilter:return this._eth_uninstallFilter(at);case JSONRPC_1.JSONRPCMethod.net_version:return this._net_version();case JSONRPC_1.JSONRPCMethod.eth_chainId:return this._eth_chainId();default:return}}async _handleAsynchronousMethods(tt){const{method:rt}=tt,at=tt.params||[];switch(rt){case JSONRPC_1.JSONRPCMethod.eth_requestAccounts:return this._eth_requestAccounts();case JSONRPC_1.JSONRPCMethod.eth_sign:return this._eth_sign(at);case JSONRPC_1.JSONRPCMethod.eth_ecRecover:return this._eth_ecRecover(at);case JSONRPC_1.JSONRPCMethod.personal_sign:return this._personal_sign(at);case JSONRPC_1.JSONRPCMethod.personal_ecRecover:return this._personal_ecRecover(at);case JSONRPC_1.JSONRPCMethod.eth_signTransaction:return this._eth_signTransaction(at);case JSONRPC_1.JSONRPCMethod.eth_sendRawTransaction:return this._eth_sendRawTransaction(at);case JSONRPC_1.JSONRPCMethod.eth_sendTransaction:return this._eth_sendTransaction(at);case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v1:return this._eth_signTypedData_v1(at);case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v2:return this._throwUnsupportedMethodError();case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v3:return this._eth_signTypedData_v3(at);case JSONRPC_1.JSONRPCMethod.eth_signTypedData_v4:case JSONRPC_1.JSONRPCMethod.eth_signTypedData:return this._eth_signTypedData_v4(at);case JSONRPC_1.JSONRPCMethod.cbWallet_arbitrary:return this._cbwallet_arbitrary(at);case JSONRPC_1.JSONRPCMethod.wallet_addEthereumChain:return this._wallet_addEthereumChain(at);case JSONRPC_1.JSONRPCMethod.wallet_switchEthereumChain:return this._wallet_switchEthereumChain(at);case JSONRPC_1.JSONRPCMethod.wallet_watchAsset:return this._wallet_watchAsset(at)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(tt,this.jsonRpcUrl)}_handleAsynchronousFilterMethods(tt){const{method:rt}=tt,at=tt.params||[];switch(rt){case JSONRPC_1.JSONRPCMethod.eth_newFilter:return this._eth_newFilter(at);case JSONRPC_1.JSONRPCMethod.eth_newBlockFilter:return this._eth_newBlockFilter();case JSONRPC_1.JSONRPCMethod.eth_newPendingTransactionFilter:return this._eth_newPendingTransactionFilter();case JSONRPC_1.JSONRPCMethod.eth_getFilterChanges:return this._eth_getFilterChanges(at);case JSONRPC_1.JSONRPCMethod.eth_getFilterLogs:return this._eth_getFilterLogs(at)}}_handleSubscriptionMethods(tt){switch(tt.method){case JSONRPC_1.JSONRPCMethod.eth_subscribe:case JSONRPC_1.JSONRPCMethod.eth_unsubscribe:return this._subscriptionManager.handleRequest(tt)}}_isKnownAddress(tt){try{const rt=(0,util_1$5.ensureAddressString)(tt);return this._addresses.map(st=>(0,util_1$5.ensureAddressString)(st)).includes(rt)}catch{}return!1}_ensureKnownAddress(tt){var rt;if(!this._isKnownAddress(tt))throw(rt=this.diagnostic)===null||rt===void 0||rt.log(DiagnosticLogger_1$2.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(tt){const rt=tt.from?(0,util_1$5.ensureAddressString)(tt.from):this.selectedAddress;if(!rt)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(rt);const at=tt.to?(0,util_1$5.ensureAddressString)(tt.to):null,st=tt.value!=null?(0,util_1$5.ensureBN)(tt.value):new bn_js_1.default(0),ot=tt.data?(0,util_1$5.ensureBuffer)(tt.data):Buffer.alloc(0),lt=tt.nonce!=null?(0,util_1$5.ensureIntNumber)(tt.nonce):null,ut=tt.gasPrice!=null?(0,util_1$5.ensureBN)(tt.gasPrice):null,ht=tt.maxFeePerGas!=null?(0,util_1$5.ensureBN)(tt.maxFeePerGas):null,mt=tt.maxPriorityFeePerGas!=null?(0,util_1$5.ensureBN)(tt.maxPriorityFeePerGas):null,bt=tt.gas!=null?(0,util_1$5.ensureBN)(tt.gas):null,vt=this.getChainId();return{fromAddress:rt,toAddress:at,weiValue:st,data:ot,nonce:lt,gasPriceInWei:ut,maxFeePerGas:ht,maxPriorityFeePerGas:mt,gasLimit:bt,chainId:vt}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw eth_rpc_errors_1$1.ethErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw eth_rpc_errors_1$1.ethErrors.provider.unsupportedMethod({})}async _signEthereumMessage(tt,rt,at,st){this._ensureKnownAddress(rt);try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumMessage(tt,rt,at,st).promise).result}}catch(ot){throw typeof ot.message=="string"&&ot.message.match(/(denied|rejected)/i)?eth_rpc_errors_1$1.ethErrors.provider.userRejectedRequest("User denied message signature"):ot}}async _ethereumAddressFromSignedMessage(tt,rt,at){return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).ethereumAddressFromSignedMessage(tt,rt,at).promise).result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,util_1$5.hexStringFromIntNumber)(this.getChainId())}getChainId(){const tt=this._storage.getItem(DEFAULT_CHAIN_ID_KEY);if(!tt)return(0,util_1$5.ensureIntNumber)(this._chainIdFromOpts);const rt=parseInt(tt,10);return(0,util_1$5.ensureIntNumber)(rt)}async _eth_requestAccounts(){var tt;if((tt=this.diagnostic)===null||tt===void 0||tt.log(DiagnosticLogger_1$2.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?Session_1$2.Session.hash(this._relay.session.id):void 0}),this._addresses.length>0)return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let rt;try{rt=await(await this.initializeRelay()).requestEthereumAccounts().promise}catch(at){throw typeof at.message=="string"&&at.message.match(/(denied|rejected)/i)?eth_rpc_errors_1$1.ethErrors.provider.userRejectedRequest("User denied account authorization"):at}if(!rt.result)throw new Error("accounts received is empty");return this._setAddresses(rt.result),this.isLedger||this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(tt){this._requireAuthorization();const rt=(0,util_1$5.ensureAddressString)(tt[0]),at=(0,util_1$5.ensureBuffer)(tt[1]);return this._signEthereumMessage(at,rt,!1)}_eth_ecRecover(tt){const rt=(0,util_1$5.ensureBuffer)(tt[0]),at=(0,util_1$5.ensureBuffer)(tt[1]);return this._ethereumAddressFromSignedMessage(rt,at,!1)}_personal_sign(tt){this._requireAuthorization();const rt=(0,util_1$5.ensureBuffer)(tt[0]),at=(0,util_1$5.ensureAddressString)(tt[1]);return this._signEthereumMessage(rt,at,!0)}_personal_ecRecover(tt){const rt=(0,util_1$5.ensureBuffer)(tt[0]),at=(0,util_1$5.ensureBuffer)(tt[1]);return this._ethereumAddressFromSignedMessage(rt,at,!0)}async _eth_signTransaction(tt){this._requireAuthorization();const rt=this._prepareTransactionParams(tt[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumTransaction(rt).promise).result}}catch(at){throw typeof at.message=="string"&&at.message.match(/(denied|rejected)/i)?eth_rpc_errors_1$1.ethErrors.provider.userRejectedRequest("User denied transaction signature"):at}}async _eth_sendRawTransaction(tt){const rt=(0,util_1$5.ensureBuffer)(tt[0]);return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).submitEthereumTransaction(rt,this.getChainId()).promise).result}}async _eth_sendTransaction(tt){this._requireAuthorization();const rt=this._prepareTransactionParams(tt[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signAndSubmitEthereumTransaction(rt).promise).result}}catch(at){throw typeof at.message=="string"&&at.message.match(/(denied|rejected)/i)?eth_rpc_errors_1$1.ethErrors.provider.userRejectedRequest("User denied transaction signature"):at}}async _eth_signTypedData_v1(tt){this._requireAuthorization();const rt=(0,util_1$5.ensureParsedJSONObject)(tt[0]),at=(0,util_1$5.ensureAddressString)(tt[1]);this._ensureKnownAddress(at);const st=eth_eip712_util_1.default.hashForSignTypedDataLegacy({data:rt}),ot=JSON.stringify(rt,null,2);return this._signEthereumMessage(st,at,!1,ot)}async _eth_signTypedData_v3(tt){this._requireAuthorization();const rt=(0,util_1$5.ensureAddressString)(tt[0]),at=(0,util_1$5.ensureParsedJSONObject)(tt[1]);this._ensureKnownAddress(rt);const st=eth_eip712_util_1.default.hashForSignTypedData_v3({data:at}),ot=JSON.stringify(at,null,2);return this._signEthereumMessage(st,rt,!1,ot)}async _eth_signTypedData_v4(tt){this._requireAuthorization();const rt=(0,util_1$5.ensureAddressString)(tt[0]),at=(0,util_1$5.ensureParsedJSONObject)(tt[1]);this._ensureKnownAddress(rt);const st=eth_eip712_util_1.default.hashForSignTypedData_v4({data:at}),ot=JSON.stringify(at,null,2);return this._signEthereumMessage(st,rt,!1,ot)}async _cbwallet_arbitrary(tt){const rt=tt[0],at=tt[1];if(typeof at!="string")throw new Error("parameter must be a string");if(typeof rt!="object"||rt===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(rt,at)}}async _wallet_addEthereumChain(tt){var rt,at,st,ot;const lt=tt[0];if(((rt=lt.rpcUrls)===null||rt===void 0?void 0:rt.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!lt.chainName||lt.chainName.trim()==="")throw eth_rpc_errors_1$1.ethErrors.provider.custom({code:0,message:"chainName is a required field"});if(!lt.nativeCurrency)throw eth_rpc_errors_1$1.ethErrors.provider.custom({code:0,message:"nativeCurrency is a required field"});const ut=parseInt(lt.chainId,16);return await this.addEthereumChain(ut,(at=lt.rpcUrls)!==null&&at!==void 0?at:[],(st=lt.blockExplorerUrls)!==null&&st!==void 0?st:[],lt.chainName,(ot=lt.iconUrls)!==null&&ot!==void 0?ot:[],lt.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(tt){const rt=tt[0];return await this.switchEthereumChain(parseInt(rt.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(tt){const rt=Array.isArray(tt)?tt[0]:tt;if(!rt.type)throw eth_rpc_errors_1$1.ethErrors.rpc.invalidParams({message:"Type is required"});if((rt==null?void 0:rt.type)!=="ERC20")throw eth_rpc_errors_1$1.ethErrors.rpc.invalidParams({message:`Asset of type '${rt.type}' is not supported`});if(!(rt!=null&&rt.options))throw eth_rpc_errors_1$1.ethErrors.rpc.invalidParams({message:"Options are required"});if(!(rt!=null&&rt.options.address))throw eth_rpc_errors_1$1.ethErrors.rpc.invalidParams({message:"Address is required"});const at=this.getChainId(),{address:st,symbol:ot,image:lt,decimals:ut}=rt.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(rt.type,st,ot,ut,lt,at)}}_eth_uninstallFilter(tt){const rt=(0,util_1$5.ensureHexString)(tt[0]);return this._filterPolyfill.uninstallFilter(rt)}async _eth_newFilter(tt){const rt=tt[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(rt)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(tt){const rt=(0,util_1$5.ensureHexString)(tt[0]);return this._filterPolyfill.getFilterChanges(rt)}_eth_getFilterLogs(tt){const rt=(0,util_1$5.ensureHexString)(tt[0]);return this._filterPolyfill.getFilterLogs(rt)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(tt=>(tt.setAccountsCallback((rt,at)=>this._setAddresses(rt,at)),tt.setChainCallback((rt,at)=>{this.updateProviderInfo(at,parseInt(rt,10))}),tt.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=tt,tt))}}CoinbaseWalletProvider$1.CoinbaseWalletProvider=CoinbaseWalletProvider;var WalletSDKUI$1={},LinkFlow$1={},n$9,l$7,u$5,i$8,t$8,r$9,o$8,f$6,e$9,c$7={},s$8=[],a$6=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function h$7(it,tt){for(var rt in tt)it[rt]=tt[rt];return it}function v$5(it){var tt=it.parentNode;tt&&tt.removeChild(it)}function y$5(it,tt,rt){var at,st,ot,lt={};for(ot in tt)ot=="key"?at=tt[ot]:ot=="ref"?st=tt[ot]:lt[ot]=tt[ot];if(arguments.length>2&&(lt.children=arguments.length>3?n$9.call(arguments,2):rt),typeof it=="function"&&it.defaultProps!=null)for(ot in it.defaultProps)lt[ot]===void 0&&(lt[ot]=it.defaultProps[ot]);return p$7(it,lt,at,st,null)}function p$7(it,tt,rt,at,st){var ot={type:it,props:tt,key:rt,ref:at,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:st==null?++u$5:st};return st==null&&l$7.vnode!=null&&l$7.vnode(ot),ot}function d$6(){return{current:null}}function _$6(it){return it.children}function k$5(it,tt){this.props=it,this.context=tt}function b$3(it,tt){if(tt==null)return it.__?b$3(it.__,it.__.__k.indexOf(it)+1):null;for(var rt;tt<it.__k.length;tt++)if((rt=it.__k[tt])!=null&&rt.__e!=null)return rt.__e;return typeof it.type=="function"?b$3(it):null}function g$7(it){var tt,rt;if((it=it.__)!=null&&it.__c!=null){for(it.__e=it.__c.base=null,tt=0;tt<it.__k.length;tt++)if((rt=it.__k[tt])!=null&&rt.__e!=null){it.__e=it.__c.base=rt.__e;break}return g$7(it)}}function m$5(it){(!it.__d&&(it.__d=!0)&&t$8.push(it)&&!w$6.__r++||r$9!==l$7.debounceRendering)&&((r$9=l$7.debounceRendering)||o$8)(w$6)}function w$6(){var it,tt,rt,at,st,ot,lt,ut;for(t$8.sort(f$6);it=t$8.shift();)it.__d&&(tt=t$8.length,at=void 0,st=void 0,lt=(ot=(rt=it).__v).__e,(ut=rt.__P)&&(at=[],(st=h$7({},ot)).__v=ot.__v+1,L$3(ut,ot,st,rt.__n,ut.ownerSVGElement!==void 0,ot.__h!=null?[lt]:null,at,lt==null?b$3(ot):lt,ot.__h),M$3(at,ot),ot.__e!=lt&&g$7(ot)),t$8.length>tt&&t$8.sort(f$6));w$6.__r=0}function x$7(it,tt,rt,at,st,ot,lt,ut,ht,mt){var bt,vt,At,xt,Et,Tt,wt,Ct=at&&at.__k||s$8,It=Ct.length;for(rt.__k=[],bt=0;bt<tt.length;bt++)if((xt=rt.__k[bt]=(xt=tt[bt])==null||typeof xt=="boolean"||typeof xt=="function"?null:typeof xt=="string"||typeof xt=="number"||typeof xt=="bigint"?p$7(null,xt,null,null,xt):Array.isArray(xt)?p$7(_$6,{children:xt},null,null,null):xt.__b>0?p$7(xt.type,xt.props,xt.key,xt.ref?xt.ref:null,xt.__v):xt)!=null){if(xt.__=rt,xt.__b=rt.__b+1,(At=Ct[bt])===null||At&&xt.key==At.key&&xt.type===At.type)Ct[bt]=void 0;else for(vt=0;vt<It;vt++){if((At=Ct[vt])&&xt.key==At.key&&xt.type===At.type){Ct[vt]=void 0;break}At=null}L$3(it,xt,At=At||c$7,st,ot,lt,ut,ht,mt),Et=xt.__e,(vt=xt.ref)&&At.ref!=vt&&(wt||(wt=[]),At.ref&&wt.push(At.ref,null,xt),wt.push(vt,xt.__c||Et,xt)),Et!=null?(Tt==null&&(Tt=Et),typeof xt.type=="function"&&xt.__k===At.__k?xt.__d=ht=A$7(xt,ht,it):ht=C$4(it,xt,At,Ct,Et,ht),typeof rt.type=="function"&&(rt.__d=ht)):ht&&At.__e==ht&&ht.parentNode!=it&&(ht=b$3(At))}for(rt.__e=Tt,bt=It;bt--;)Ct[bt]!=null&&(typeof rt.type=="function"&&Ct[bt].__e!=null&&Ct[bt].__e==rt.__d&&(rt.__d=$$3(at).nextSibling),S$3(Ct[bt],Ct[bt]));if(wt)for(bt=0;bt<wt.length;bt++)O$1(wt[bt],wt[++bt],wt[++bt])}function A$7(it,tt,rt){for(var at,st=it.__k,ot=0;st&&ot<st.length;ot++)(at=st[ot])&&(at.__=it,tt=typeof at.type=="function"?A$7(at,tt,rt):C$4(rt,at,at,st,at.__e,tt));return tt}function P$4(it,tt){return tt=tt||[],it==null||typeof it=="boolean"||(Array.isArray(it)?it.some(function(rt){P$4(rt,tt)}):tt.push(it)),tt}function C$4(it,tt,rt,at,st,ot){var lt,ut,ht;if(tt.__d!==void 0)lt=tt.__d,tt.__d=void 0;else if(rt==null||st!=ot||st.parentNode==null)e:if(ot==null||ot.parentNode!==it)it.appendChild(st),lt=null;else{for(ut=ot,ht=0;(ut=ut.nextSibling)&&ht<at.length;ht+=1)if(ut==st)break e;it.insertBefore(st,ot),lt=ot}return lt!==void 0?lt:st.nextSibling}function $$3(it){var tt,rt,at;if(it.type==null||typeof it.type=="string")return it.__e;if(it.__k){for(tt=it.__k.length-1;tt>=0;tt--)if((rt=it.__k[tt])&&(at=$$3(rt)))return at}return null}function H$3(it,tt,rt,at,st){var ot;for(ot in rt)ot==="children"||ot==="key"||ot in tt||T$5(it,ot,null,rt[ot],at);for(ot in tt)st&&typeof tt[ot]!="function"||ot==="children"||ot==="key"||ot==="value"||ot==="checked"||rt[ot]===tt[ot]||T$5(it,ot,tt[ot],rt[ot],at)}function I$4(it,tt,rt){tt[0]==="-"?it.setProperty(tt,rt==null?"":rt):it[tt]=rt==null?"":typeof rt!="number"||a$6.test(tt)?rt:rt+"px"}function T$5(it,tt,rt,at,st){var ot;e:if(tt==="style")if(typeof rt=="string")it.style.cssText=rt;else{if(typeof at=="string"&&(it.style.cssText=at=""),at)for(tt in at)rt&&tt in rt||I$4(it.style,tt,"");if(rt)for(tt in rt)at&&rt[tt]===at[tt]||I$4(it.style,tt,rt[tt])}else if(tt[0]==="o"&&tt[1]==="n")ot=tt!==(tt=tt.replace(/Capture$/,"")),tt=tt.toLowerCase()in it?tt.toLowerCase().slice(2):tt.slice(2),it.l||(it.l={}),it.l[tt+ot]=rt,rt?at||it.addEventListener(tt,ot?z$5:j$4,ot):it.removeEventListener(tt,ot?z$5:j$4,ot);else if(tt!=="dangerouslySetInnerHTML"){if(st)tt=tt.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(tt!=="width"&&tt!=="height"&&tt!=="href"&&tt!=="list"&&tt!=="form"&&tt!=="tabIndex"&&tt!=="download"&&tt in it)try{it[tt]=rt==null?"":rt;break e}catch{}typeof rt=="function"||(rt==null||rt===!1&&tt.indexOf("-")==-1?it.removeAttribute(tt):it.setAttribute(tt,rt))}}function j$4(it){return this.l[it.type+!1](l$7.event?l$7.event(it):it)}function z$5(it){return this.l[it.type+!0](l$7.event?l$7.event(it):it)}function L$3(it,tt,rt,at,st,ot,lt,ut,ht){var mt,bt,vt,At,xt,Et,Tt,wt,Ct,It,St,Rt,Dt,Wt,qt,Vt=tt.type;if(tt.constructor!==void 0)return null;rt.__h!=null&&(ht=rt.__h,ut=tt.__e=rt.__e,tt.__h=null,ot=[ut]),(mt=l$7.__b)&&mt(tt);try{e:if(typeof Vt=="function"){if(wt=tt.props,Ct=(mt=Vt.contextType)&&at[mt.__c],It=mt?Ct?Ct.props.value:mt.__:at,rt.__c?Tt=(bt=tt.__c=rt.__c).__=bt.__E:("prototype"in Vt&&Vt.prototype.render?tt.__c=bt=new Vt(wt,It):(tt.__c=bt=new k$5(wt,It),bt.constructor=Vt,bt.render=q$4),Ct&&Ct.sub(bt),bt.props=wt,bt.state||(bt.state={}),bt.context=It,bt.__n=at,vt=bt.__d=!0,bt.__h=[],bt._sb=[]),bt.__s==null&&(bt.__s=bt.state),Vt.getDerivedStateFromProps!=null&&(bt.__s==bt.state&&(bt.__s=h$7({},bt.__s)),h$7(bt.__s,Vt.getDerivedStateFromProps(wt,bt.__s))),At=bt.props,xt=bt.state,bt.__v=tt,vt)Vt.getDerivedStateFromProps==null&&bt.componentWillMount!=null&&bt.componentWillMount(),bt.componentDidMount!=null&&bt.__h.push(bt.componentDidMount);else{if(Vt.getDerivedStateFromProps==null&&wt!==At&&bt.componentWillReceiveProps!=null&&bt.componentWillReceiveProps(wt,It),!bt.__e&&bt.shouldComponentUpdate!=null&&bt.shouldComponentUpdate(wt,bt.__s,It)===!1||tt.__v===rt.__v){for(tt.__v!==rt.__v&&(bt.props=wt,bt.state=bt.__s,bt.__d=!1),bt.__e=!1,tt.__e=rt.__e,tt.__k=rt.__k,tt.__k.forEach(function(Yt){Yt&&(Yt.__=tt)}),St=0;St<bt._sb.length;St++)bt.__h.push(bt._sb[St]);bt._sb=[],bt.__h.length&&lt.push(bt);break e}bt.componentWillUpdate!=null&&bt.componentWillUpdate(wt,bt.__s,It),bt.componentDidUpdate!=null&&bt.__h.push(function(){bt.componentDidUpdate(At,xt,Et)})}if(bt.context=It,bt.props=wt,bt.__P=it,Rt=l$7.__r,Dt=0,"prototype"in Vt&&Vt.prototype.render){for(bt.state=bt.__s,bt.__d=!1,Rt&&Rt(tt),mt=bt.render(bt.props,bt.state,bt.context),Wt=0;Wt<bt._sb.length;Wt++)bt.__h.push(bt._sb[Wt]);bt._sb=[]}else do bt.__d=!1,Rt&&Rt(tt),mt=bt.render(bt.props,bt.state,bt.context),bt.state=bt.__s;while(bt.__d&&++Dt<25);bt.state=bt.__s,bt.getChildContext!=null&&(at=h$7(h$7({},at),bt.getChildContext())),vt||bt.getSnapshotBeforeUpdate==null||(Et=bt.getSnapshotBeforeUpdate(At,xt)),qt=mt!=null&&mt.type===_$6&&mt.key==null?mt.props.children:mt,x$7(it,Array.isArray(qt)?qt:[qt],tt,rt,at,st,ot,lt,ut,ht),bt.base=tt.__e,tt.__h=null,bt.__h.length&&lt.push(bt),Tt&&(bt.__E=bt.__=null),bt.__e=!1}else ot==null&&tt.__v===rt.__v?(tt.__k=rt.__k,tt.__e=rt.__e):tt.__e=N$3(rt.__e,tt,rt,at,st,ot,lt,ht);(mt=l$7.diffed)&&mt(tt)}catch(Yt){tt.__v=null,(ht||ot!=null)&&(tt.__e=ut,tt.__h=!!ht,ot[ot.indexOf(ut)]=null),l$7.__e(Yt,tt,rt)}}function M$3(it,tt){l$7.__c&&l$7.__c(tt,it),it.some(function(rt){try{it=rt.__h,rt.__h=[],it.some(function(at){at.call(rt)})}catch(at){l$7.__e(at,rt.__v)}})}function N$3(it,tt,rt,at,st,ot,lt,ut){var ht,mt,bt,vt=rt.props,At=tt.props,xt=tt.type,Et=0;if(xt==="svg"&&(st=!0),ot!=null){for(;Et<ot.length;Et++)if((ht=ot[Et])&&"setAttribute"in ht==!!xt&&(xt?ht.localName===xt:ht.nodeType===3)){it=ht,ot[Et]=null;break}}if(it==null){if(xt===null)return document.createTextNode(At);it=st?document.createElementNS("http://www.w3.org/2000/svg",xt):document.createElement(xt,At.is&&At),ot=null,ut=!1}if(xt===null)vt===At||ut&&it.data===At||(it.data=At);else{if(ot=ot&&n$9.call(it.childNodes),mt=(vt=rt.props||c$7).dangerouslySetInnerHTML,bt=At.dangerouslySetInnerHTML,!ut){if(ot!=null)for(vt={},Et=0;Et<it.attributes.length;Et++)vt[it.attributes[Et].name]=it.attributes[Et].value;(bt||mt)&&(bt&&(mt&&bt.__html==mt.__html||bt.__html===it.innerHTML)||(it.innerHTML=bt&&bt.__html||""))}if(H$3(it,At,vt,st,ut),bt)tt.__k=[];else if(Et=tt.props.children,x$7(it,Array.isArray(Et)?Et:[Et],tt,rt,at,st&&xt!=="foreignObject",ot,lt,ot?ot[0]:rt.__k&&b$3(rt,0),ut),ot!=null)for(Et=ot.length;Et--;)ot[Et]!=null&&v$5(ot[Et]);ut||("value"in At&&(Et=At.value)!==void 0&&(Et!==it.value||xt==="progress"&&!Et||xt==="option"&&Et!==vt.value)&&T$5(it,"value",Et,vt.value,!1),"checked"in At&&(Et=At.checked)!==void 0&&Et!==it.checked&&T$5(it,"checked",Et,vt.checked,!1))}return it}function O$1(it,tt,rt){try{typeof it=="function"?it(tt):it.current=tt}catch(at){l$7.__e(at,rt)}}function S$3(it,tt,rt){var at,st;if(l$7.unmount&&l$7.unmount(it),(at=it.ref)&&(at.current&&at.current!==it.__e||O$1(at,null,tt)),(at=it.__c)!=null){if(at.componentWillUnmount)try{at.componentWillUnmount()}catch(ot){l$7.__e(ot,tt)}at.base=at.__P=null,it.__c=void 0}if(at=it.__k)for(st=0;st<at.length;st++)at[st]&&S$3(at[st],tt,rt||typeof it.type!="function");rt||it.__e==null||v$5(it.__e),it.__=it.__e=it.__d=void 0}function q$4(it,tt,rt){return this.constructor(it,rt)}function B$4(it,tt,rt){var at,st,ot;l$7.__&&l$7.__(it,tt),st=(at=typeof rt=="function")?null:rt&&rt.__k||tt.__k,ot=[],L$3(tt,it=(!at&&rt||tt).__k=y$5(_$6,null,[it]),st||c$7,c$7,tt.ownerSVGElement!==void 0,!at&&rt?[rt]:st?null:tt.firstChild?n$9.call(tt.childNodes):null,ot,!at&&rt?rt:st?st.__e:tt.firstChild,at),M$3(ot,it)}function D$2(it,tt){B$4(it,tt,D$2)}function E$4(it,tt,rt){var at,st,ot,lt=h$7({},it.props);for(ot in tt)ot=="key"?at=tt[ot]:ot=="ref"?st=tt[ot]:lt[ot]=tt[ot];return arguments.length>2&&(lt.children=arguments.length>3?n$9.call(arguments,2):rt),p$7(it.type,lt,at||it.key,st||it.ref,null)}function F$3(it,tt){var rt={__c:tt="__cC"+e$9++,__:it,Consumer:function(at,st){return at.children(st)},Provider:function(at){var st,ot;return this.getChildContext||(st=[],(ot={})[tt]=this,this.getChildContext=function(){return ot},this.shouldComponentUpdate=function(lt){this.props.value!==lt.value&&st.some(function(ut){ut.__e=!0,m$5(ut)})},this.sub=function(lt){st.push(lt);var ut=lt.componentWillUnmount;lt.componentWillUnmount=function(){st.splice(st.indexOf(lt),1),ut&&ut.call(lt)}}),at.children}};return rt.Provider.__=rt.Consumer.contextType=rt}n$9=s$8.slice,l$7={__e:function(it,tt,rt,at){for(var st,ot,lt;tt=tt.__;)if((st=tt.__c)&&!st.__)try{if((ot=st.constructor)&&ot.getDerivedStateFromError!=null&&(st.setState(ot.getDerivedStateFromError(it)),lt=st.__d),st.componentDidCatch!=null&&(st.componentDidCatch(it,at||{}),lt=st.__d),lt)return st.__E=st}catch(ut){it=ut}throw it}},u$5=0,i$8=function(it){return it!=null&&it.constructor===void 0},k$5.prototype.setState=function(it,tt){var rt;rt=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=h$7({},this.state),typeof it=="function"&&(it=it(h$7({},rt),this.props)),it&&h$7(rt,it),it!=null&&this.__v&&(tt&&this._sb.push(tt),m$5(this))},k$5.prototype.forceUpdate=function(it){this.__v&&(this.__e=!0,it&&this.__h.push(it),m$5(this))},k$5.prototype.render=_$6,t$8=[],o$8=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f$6=function(it,tt){return it.__v.__b-tt.__v.__b},w$6.__r=0,e$9=0;const preact_module=Object.freeze(Object.defineProperty({__proto__:null,Component:k$5,Fragment:_$6,cloneElement:E$4,createContext:F$3,createElement:y$5,createRef:d$6,h:y$5,hydrate:D$2,get isValidElement(){return i$8},get options(){return l$7},render:B$4,toChildArray:P$4},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(preact_module);var tslib={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(it){var tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt,Et,Tt,wt,Ct,It,St,Rt,Dt,Wt,qt;(function(Vt){var Yt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};Vt(jt(Yt,jt(it.exports)));function jt(kt,zt){return kt!==Yt&&(typeof Object.create=="function"?Object.defineProperty(kt,"__esModule",{value:!0}):kt.__esModule=!0),function(Nt,Mt){return kt[Nt]=zt?zt(Nt,Mt):Mt}}})(function(Vt){var Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,kt){jt.__proto__=kt}||function(jt,kt){for(var zt in kt)kt.hasOwnProperty(zt)&&(jt[zt]=kt[zt])};tt=function(jt,kt){Yt(jt,kt);function zt(){this.constructor=jt}jt.prototype=kt===null?Object.create(kt):(zt.prototype=kt.prototype,new zt)},rt=Object.assign||function(jt){for(var kt,zt=1,Nt=arguments.length;zt<Nt;zt++){kt=arguments[zt];for(var Mt in kt)Object.prototype.hasOwnProperty.call(kt,Mt)&&(jt[Mt]=kt[Mt])}return jt},at=function(jt,kt){var zt={};for(var Nt in jt)Object.prototype.hasOwnProperty.call(jt,Nt)&&kt.indexOf(Nt)<0&&(zt[Nt]=jt[Nt]);if(jt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Mt=0,Nt=Object.getOwnPropertySymbols(jt);Mt<Nt.length;Mt++)kt.indexOf(Nt[Mt])<0&&Object.prototype.propertyIsEnumerable.call(jt,Nt[Mt])&&(zt[Nt[Mt]]=jt[Nt[Mt]]);return zt},st=function(jt,kt,zt,Nt){var Mt=arguments.length,Lt=Mt<3?kt:Nt===null?Nt=Object.getOwnPropertyDescriptor(kt,zt):Nt,Ht;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Lt=Reflect.decorate(jt,kt,zt,Nt);else for(var Qt=jt.length-1;Qt>=0;Qt--)(Ht=jt[Qt])&&(Lt=(Mt<3?Ht(Lt):Mt>3?Ht(kt,zt,Lt):Ht(kt,zt))||Lt);return Mt>3&&Lt&&Object.defineProperty(kt,zt,Lt),Lt},ot=function(jt,kt){return function(zt,Nt){kt(zt,Nt,jt)}},lt=function(jt,kt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(jt,kt)},ut=function(jt,kt,zt,Nt){function Mt(Lt){return Lt instanceof zt?Lt:new zt(function(Ht){Ht(Lt)})}return new(zt||(zt=Promise))(function(Lt,Ht){function Qt(Kt){try{Bt(Nt.next(Kt))}catch(Gt){Ht(Gt)}}function Ut(Kt){try{Bt(Nt.throw(Kt))}catch(Gt){Ht(Gt)}}function Bt(Kt){Kt.done?Lt(Kt.value):Mt(Kt.value).then(Qt,Ut)}Bt((Nt=Nt.apply(jt,kt||[])).next())})},ht=function(jt,kt){var zt={label:0,sent:function(){if(Lt[0]&1)throw Lt[1];return Lt[1]},trys:[],ops:[]},Nt,Mt,Lt,Ht;return Ht={next:Qt(0),throw:Qt(1),return:Qt(2)},typeof Symbol=="function"&&(Ht[Symbol.iterator]=function(){return this}),Ht;function Qt(Bt){return function(Kt){return Ut([Bt,Kt])}}function Ut(Bt){if(Nt)throw new TypeError("Generator is already executing.");for(;zt;)try{if(Nt=1,Mt&&(Lt=Bt[0]&2?Mt.return:Bt[0]?Mt.throw||((Lt=Mt.return)&&Lt.call(Mt),0):Mt.next)&&!(Lt=Lt.call(Mt,Bt[1])).done)return Lt;switch(Mt=0,Lt&&(Bt=[Bt[0]&2,Lt.value]),Bt[0]){case 0:case 1:Lt=Bt;break;case 4:return zt.label++,{value:Bt[1],done:!1};case 5:zt.label++,Mt=Bt[1],Bt=[0];continue;case 7:Bt=zt.ops.pop(),zt.trys.pop();continue;default:if(Lt=zt.trys,!(Lt=Lt.length>0&&Lt[Lt.length-1])&&(Bt[0]===6||Bt[0]===2)){zt=0;continue}if(Bt[0]===3&&(!Lt||Bt[1]>Lt[0]&&Bt[1]<Lt[3])){zt.label=Bt[1];break}if(Bt[0]===6&&zt.label<Lt[1]){zt.label=Lt[1],Lt=Bt;break}if(Lt&&zt.label<Lt[2]){zt.label=Lt[2],zt.ops.push(Bt);break}Lt[2]&&zt.ops.pop(),zt.trys.pop();continue}Bt=kt.call(jt,zt)}catch(Kt){Bt=[6,Kt],Mt=0}finally{Nt=Lt=0}if(Bt[0]&5)throw Bt[1];return{value:Bt[0]?Bt[1]:void 0,done:!0}}},qt=function(jt,kt,zt,Nt){Nt===void 0&&(Nt=zt),jt[Nt]=kt[zt]},mt=function(jt,kt){for(var zt in jt)zt!=="default"&&!kt.hasOwnProperty(zt)&&(kt[zt]=jt[zt])},bt=function(jt){var kt=typeof Symbol=="function"&&Symbol.iterator,zt=kt&&jt[kt],Nt=0;if(zt)return zt.call(jt);if(jt&&typeof jt.length=="number")return{next:function(){return jt&&Nt>=jt.length&&(jt=void 0),{value:jt&&jt[Nt++],done:!jt}}};throw new TypeError(kt?"Object is not iterable.":"Symbol.iterator is not defined.")},vt=function(jt,kt){var zt=typeof Symbol=="function"&&jt[Symbol.iterator];if(!zt)return jt;var Nt=zt.call(jt),Mt,Lt=[],Ht;try{for(;(kt===void 0||kt-- >0)&&!(Mt=Nt.next()).done;)Lt.push(Mt.value)}catch(Qt){Ht={error:Qt}}finally{try{Mt&&!Mt.done&&(zt=Nt.return)&&zt.call(Nt)}finally{if(Ht)throw Ht.error}}return Lt},At=function(){for(var jt=[],kt=0;kt<arguments.length;kt++)jt=jt.concat(vt(arguments[kt]));return jt},xt=function(){for(var jt=0,kt=0,zt=arguments.length;kt<zt;kt++)jt+=arguments[kt].length;for(var Nt=Array(jt),Mt=0,kt=0;kt<zt;kt++)for(var Lt=arguments[kt],Ht=0,Qt=Lt.length;Ht<Qt;Ht++,Mt++)Nt[Mt]=Lt[Ht];return Nt},Et=function(jt){return this instanceof Et?(this.v=jt,this):new Et(jt)},Tt=function(jt,kt,zt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Nt=zt.apply(jt,kt||[]),Mt,Lt=[];return Mt={},Ht("next"),Ht("throw"),Ht("return"),Mt[Symbol.asyncIterator]=function(){return this},Mt;function Ht(Pt){Nt[Pt]&&(Mt[Pt]=function(Zt){return new Promise(function(an,Jt){Lt.push([Pt,Zt,an,Jt])>1||Qt(Pt,Zt)})})}function Qt(Pt,Zt){try{Ut(Nt[Pt](Zt))}catch(an){Gt(Lt[0][3],an)}}function Ut(Pt){Pt.value instanceof Et?Promise.resolve(Pt.value.v).then(Bt,Kt):Gt(Lt[0][2],Pt)}function Bt(Pt){Qt("next",Pt)}function Kt(Pt){Qt("throw",Pt)}function Gt(Pt,Zt){Pt(Zt),Lt.shift(),Lt.length&&Qt(Lt[0][0],Lt[0][1])}},wt=function(jt){var kt,zt;return kt={},Nt("next"),Nt("throw",function(Mt){throw Mt}),Nt("return"),kt[Symbol.iterator]=function(){return this},kt;function Nt(Mt,Lt){kt[Mt]=jt[Mt]?function(Ht){return(zt=!zt)?{value:Et(jt[Mt](Ht)),done:Mt==="return"}:Lt?Lt(Ht):Ht}:Lt}},Ct=function(jt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var kt=jt[Symbol.asyncIterator],zt;return kt?kt.call(jt):(jt=typeof bt=="function"?bt(jt):jt[Symbol.iterator](),zt={},Nt("next"),Nt("throw"),Nt("return"),zt[Symbol.asyncIterator]=function(){return this},zt);function Nt(Lt){zt[Lt]=jt[Lt]&&function(Ht){return new Promise(function(Qt,Ut){Ht=jt[Lt](Ht),Mt(Qt,Ut,Ht.done,Ht.value)})}}function Mt(Lt,Ht,Qt,Ut){Promise.resolve(Ut).then(function(Bt){Lt({value:Bt,done:Qt})},Ht)}},It=function(jt,kt){return Object.defineProperty?Object.defineProperty(jt,"raw",{value:kt}):jt.raw=kt,jt},St=function(jt){if(jt&&jt.__esModule)return jt;var kt={};if(jt!=null)for(var zt in jt)Object.hasOwnProperty.call(jt,zt)&&(kt[zt]=jt[zt]);return kt.default=jt,kt},Rt=function(jt){return jt&&jt.__esModule?jt:{default:jt}},Dt=function(jt,kt){if(!kt.has(jt))throw new TypeError("attempted to get private field on non-instance");return kt.get(jt)},Wt=function(jt,kt,zt){if(!kt.has(jt))throw new TypeError("attempted to set private field on non-instance");return kt.set(jt,zt),zt},Vt("__extends",tt),Vt("__assign",rt),Vt("__rest",at),Vt("__decorate",st),Vt("__param",ot),Vt("__metadata",lt),Vt("__awaiter",ut),Vt("__generator",ht),Vt("__exportStar",mt),Vt("__createBinding",qt),Vt("__values",bt),Vt("__read",vt),Vt("__spread",At),Vt("__spreadArrays",xt),Vt("__await",Et),Vt("__asyncGenerator",Tt),Vt("__asyncDelegator",wt),Vt("__asyncValues",Ct),Vt("__makeTemplateObject",It),Vt("__importStar",St),Vt("__importDefault",Rt),Vt("__classPrivateFieldGet",Dt),Vt("__classPrivateFieldSet",Wt)})})(tslib);function isFunction$1(it){return typeof it=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$1={Promise:void 0,set useDeprecatedSynchronousErrorHandling(it){if(it){var tt=new Error;""+tt.stack}_enable_super_gross_mode_that_will_cause_bad_things=it},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(it){setTimeout(function(){throw it},0)}var empty$1={closed:!0,next:function(it){},error:function(it){if(config$1.useDeprecatedSynchronousErrorHandling)throw it;hostReportError(it)},complete:function(){}},isArray$4=function(){return Array.isArray||function(it){return it&&typeof it.length=="number"}}();function isObject$3(it){return it!==null&&typeof it=="object"}var UnsubscriptionErrorImpl=function(){function it(tt){return Error.call(this),this.message=tt?tt.length+` errors occurred during unsubscription:
`+tt.map(function(rt,at){return at+1+") "+rt.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=tt,this}return it.prototype=Object.create(Error.prototype),it}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function it(tt){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,tt&&(this._ctorUnsubscribe=!0,this._unsubscribe=tt)}return it.prototype.unsubscribe=function(){var tt;if(!this.closed){var rt=this,at=rt._parentOrParents,st=rt._ctorUnsubscribe,ot=rt._unsubscribe,lt=rt._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,at instanceof it)at.remove(this);else if(at!==null)for(var ut=0;ut<at.length;++ut){var ht=at[ut];ht.remove(this)}if(isFunction$1(ot)){st&&(this._unsubscribe=void 0);try{ot.call(this)}catch(vt){tt=vt instanceof UnsubscriptionError?flattenUnsubscriptionErrors(vt.errors):[vt]}}if(isArray$4(lt))for(var ut=-1,mt=lt.length;++ut<mt;){var bt=lt[ut];if(isObject$3(bt))try{bt.unsubscribe()}catch(At){tt=tt||[],At instanceof UnsubscriptionError?tt=tt.concat(flattenUnsubscriptionErrors(At.errors)):tt.push(At)}}if(tt)throw new UnsubscriptionError(tt)}},it.prototype.add=function(tt){var rt=tt;if(!tt)return it.EMPTY;switch(typeof tt){case"function":rt=new it(tt);case"object":if(rt===this||rt.closed||typeof rt.unsubscribe!="function")return rt;if(this.closed)return rt.unsubscribe(),rt;if(!(rt instanceof it)){var at=rt;rt=new it,rt._subscriptions=[at]}break;default:throw new Error("unrecognized teardown "+tt+" added to Subscription.")}var st=rt._parentOrParents;if(st===null)rt._parentOrParents=this;else if(st instanceof it){if(st===this)return rt;rt._parentOrParents=[st,this]}else if(st.indexOf(this)===-1)st.push(this);else return rt;var ot=this._subscriptions;return ot===null?this._subscriptions=[rt]:ot.push(rt),rt},it.prototype.remove=function(tt){var rt=this._subscriptions;if(rt){var at=rt.indexOf(tt);at!==-1&&rt.splice(at,1)}},it.EMPTY=function(tt){return tt.closed=!0,tt}(new it),it}();function flattenUnsubscriptionErrors(it){return it.reduce(function(tt,rt){return tt.concat(rt instanceof UnsubscriptionError?rt.errors:rt)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this)||this;switch(ot.syncErrorValue=null,ot.syncErrorThrown=!1,ot.syncErrorThrowable=!1,ot.isStopped=!1,arguments.length){case 0:ot.destination=empty$1;break;case 1:if(!rt){ot.destination=empty$1;break}if(typeof rt=="object"){rt instanceof tt?(ot.syncErrorThrowable=rt.syncErrorThrowable,ot.destination=rt,rt.add(ot)):(ot.syncErrorThrowable=!0,ot.destination=new SafeSubscriber(ot,rt));break}default:ot.syncErrorThrowable=!0,ot.destination=new SafeSubscriber(ot,rt,at,st);break}return ot}return tt.prototype[rxSubscriber]=function(){return this},tt.create=function(rt,at,st){var ot=new tt(rt,at,st);return ot.syncErrorThrowable=!1,ot},tt.prototype.next=function(rt){this.isStopped||this._next(rt)},tt.prototype.error=function(rt){this.isStopped||(this.isStopped=!0,this._error(rt))},tt.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},tt.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,it.prototype.unsubscribe.call(this))},tt.prototype._next=function(rt){this.destination.next(rt)},tt.prototype._error=function(rt){this.destination.error(rt),this.unsubscribe()},tt.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},tt.prototype._unsubscribeAndRecycle=function(){var rt=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=rt,this},tt}(Subscription),SafeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot){var lt=it.call(this)||this;lt._parentSubscriber=rt;var ut,ht=lt;return isFunction$1(at)?ut=at:at&&(ut=at.next,st=at.error,ot=at.complete,at!==empty$1&&(ht=Object.create(at),isFunction$1(ht.unsubscribe)&&lt.add(ht.unsubscribe.bind(ht)),ht.unsubscribe=lt.unsubscribe.bind(lt))),lt._context=ht,lt._next=ut,lt._error=st,lt._complete=ot,lt}return tt.prototype.next=function(rt){if(!this.isStopped&&this._next){var at=this._parentSubscriber;!config$1.useDeprecatedSynchronousErrorHandling||!at.syncErrorThrowable?this.__tryOrUnsub(this._next,rt):this.__tryOrSetError(at,this._next,rt)&&this.unsubscribe()}},tt.prototype.error=function(rt){if(!this.isStopped){var at=this._parentSubscriber,st=config$1.useDeprecatedSynchronousErrorHandling;if(this._error)!st||!at.syncErrorThrowable?(this.__tryOrUnsub(this._error,rt),this.unsubscribe()):(this.__tryOrSetError(at,this._error,rt),this.unsubscribe());else if(at.syncErrorThrowable)st?(at.syncErrorValue=rt,at.syncErrorThrown=!0):hostReportError(rt),this.unsubscribe();else{if(this.unsubscribe(),st)throw rt;hostReportError(rt)}}},tt.prototype.complete=function(){var rt=this;if(!this.isStopped){var at=this._parentSubscriber;if(this._complete){var st=function(){return rt._complete.call(rt._context)};!config$1.useDeprecatedSynchronousErrorHandling||!at.syncErrorThrowable?(this.__tryOrUnsub(st),this.unsubscribe()):(this.__tryOrSetError(at,st),this.unsubscribe())}else this.unsubscribe()}},tt.prototype.__tryOrUnsub=function(rt,at){try{rt.call(this._context,at)}catch(st){if(this.unsubscribe(),config$1.useDeprecatedSynchronousErrorHandling)throw st;hostReportError(st)}},tt.prototype.__tryOrSetError=function(rt,at,st){if(!config$1.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{at.call(this._context,st)}catch(ot){return config$1.useDeprecatedSynchronousErrorHandling?(rt.syncErrorValue=ot,rt.syncErrorThrown=!0,!0):(hostReportError(ot),!0)}return!1},tt.prototype._unsubscribe=function(){var rt=this._parentSubscriber;this._context=null,this._parentSubscriber=null,rt.unsubscribe()},tt}(Subscriber);function canReportError(it){for(;it;){var tt=it,rt=tt.closed,at=tt.destination,st=tt.isStopped;if(rt||st)return!1;at&&at instanceof Subscriber?it=at:it=null}return!0}function toSubscriber(it,tt,rt){if(it){if(it instanceof Subscriber)return it;if(it[rxSubscriber])return it[rxSubscriber]()}return!it&&!tt&&!rt?new Subscriber(empty$1):new Subscriber(it,tt,rt)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(it){return it}function pipe(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return pipeFromArray(it)}function pipeFromArray(it){return it.length===0?identity:it.length===1?it[0]:function(rt){return it.reduce(function(at,st){return st(at)},rt)}}var Observable=function(){function it(tt){this._isScalar=!1,tt&&(this._subscribe=tt)}return it.prototype.lift=function(tt){var rt=new it;return rt.source=this,rt.operator=tt,rt},it.prototype.subscribe=function(tt,rt,at){var st=this.operator,ot=toSubscriber(tt,rt,at);if(st?ot.add(st.call(ot,this.source)):ot.add(this.source||config$1.useDeprecatedSynchronousErrorHandling&&!ot.syncErrorThrowable?this._subscribe(ot):this._trySubscribe(ot)),config$1.useDeprecatedSynchronousErrorHandling&&ot.syncErrorThrowable&&(ot.syncErrorThrowable=!1,ot.syncErrorThrown))throw ot.syncErrorValue;return ot},it.prototype._trySubscribe=function(tt){try{return this._subscribe(tt)}catch(rt){config$1.useDeprecatedSynchronousErrorHandling&&(tt.syncErrorThrown=!0,tt.syncErrorValue=rt),canReportError(tt)?tt.error(rt):console.warn(rt)}},it.prototype.forEach=function(tt,rt){var at=this;return rt=getPromiseCtor(rt),new rt(function(st,ot){var lt;lt=at.subscribe(function(ut){try{tt(ut)}catch(ht){ot(ht),lt&&lt.unsubscribe()}},ot,st)})},it.prototype._subscribe=function(tt){var rt=this.source;return rt&&rt.subscribe(tt)},it.prototype[observable]=function(){return this},it.prototype.pipe=function(){for(var tt=[],rt=0;rt<arguments.length;rt++)tt[rt]=arguments[rt];return tt.length===0?this:pipeFromArray(tt)(this)},it.prototype.toPromise=function(tt){var rt=this;return tt=getPromiseCtor(tt),new tt(function(at,st){var ot;rt.subscribe(function(lt){return ot=lt},function(lt){return st(lt)},function(){return at(ot)})})},it.create=function(tt){return new it(tt)},it}();function getPromiseCtor(it){if(it||(it=config$1.Promise||Promise),!it)throw new Error("no Promise impl found");return it}var ObjectUnsubscribedErrorImpl=function(){function it(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return it.prototype=Object.create(Error.prototype),it}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this)||this;return st.subject=rt,st.subscriber=at,st.closed=!1,st}return tt.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var rt=this.subject,at=rt.observers;if(this.subject=null,!(!at||at.length===0||rt.isStopped||rt.closed)){var st=at.indexOf(this.subscriber);st!==-1&&at.splice(st,1)}}},tt}(Subscription),SubjectSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this,rt)||this;return at.destination=rt,at}return tt}(Subscriber),Subject=function(it){tslib.exports.__extends(tt,it);function tt(){var rt=it.call(this)||this;return rt.observers=[],rt.closed=!1,rt.isStopped=!1,rt.hasError=!1,rt.thrownError=null,rt}return tt.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},tt.prototype.lift=function(rt){var at=new AnonymousSubject(this,this);return at.operator=rt,at},tt.prototype.next=function(rt){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var at=this.observers,st=at.length,ot=at.slice(),lt=0;lt<st;lt++)ot[lt].next(rt)},tt.prototype.error=function(rt){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=rt,this.isStopped=!0;for(var at=this.observers,st=at.length,ot=at.slice(),lt=0;lt<st;lt++)ot[lt].error(rt);this.observers.length=0},tt.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var rt=this.observers,at=rt.length,st=rt.slice(),ot=0;ot<at;ot++)st[ot].complete();this.observers.length=0},tt.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},tt.prototype._trySubscribe=function(rt){if(this.closed)throw new ObjectUnsubscribedError;return it.prototype._trySubscribe.call(this,rt)},tt.prototype._subscribe=function(rt){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(rt.error(this.thrownError),Subscription.EMPTY):this.isStopped?(rt.complete(),Subscription.EMPTY):(this.observers.push(rt),new SubjectSubscription(this,rt))},tt.prototype.asObservable=function(){var rt=new Observable;return rt.source=this,rt},tt.create=function(rt,at){return new AnonymousSubject(rt,at)},tt}(Observable),AnonymousSubject=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this)||this;return st.destination=rt,st.source=at,st}return tt.prototype.next=function(rt){var at=this.destination;at&&at.next&&at.next(rt)},tt.prototype.error=function(rt){var at=this.destination;at&&at.error&&this.destination.error(rt)},tt.prototype.complete=function(){var rt=this.destination;rt&&rt.complete&&this.destination.complete()},tt.prototype._subscribe=function(rt){var at=this.source;return at?this.source.subscribe(rt):Subscription.EMPTY},tt}(Subject);function refCount(){return function(tt){return tt.lift(new RefCountOperator(tt))}}var RefCountOperator=function(){function it(tt){this.connectable=tt}return it.prototype.call=function(tt,rt){var at=this.connectable;at._refCount++;var st=new RefCountSubscriber(tt,at),ot=rt.subscribe(st);return st.closed||(st.connection=at.connect()),ot},it}(),RefCountSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.connectable=at,st}return tt.prototype._unsubscribe=function(){var rt=this.connectable;if(!rt){this.connection=null;return}this.connectable=null;var at=rt._refCount;if(at<=0){this.connection=null;return}if(rt._refCount=at-1,at>1){this.connection=null;return}var st=this.connection,ot=rt._connection;this.connection=null,ot&&(!st||ot===st)&&ot.unsubscribe()},tt}(Subscriber),ConnectableObservable=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this)||this;return st.source=rt,st.subjectFactory=at,st._refCount=0,st._isComplete=!1,st}return tt.prototype._subscribe=function(rt){return this.getSubject().subscribe(rt)},tt.prototype.getSubject=function(){var rt=this._subject;return(!rt||rt.isStopped)&&(this._subject=this.subjectFactory()),this._subject},tt.prototype.connect=function(){var rt=this._connection;return rt||(this._isComplete=!1,rt=this._connection=new Subscription,rt.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),rt.closed&&(this._connection=null,rt=Subscription.EMPTY)),rt},tt.prototype.refCount=function(){return refCount()(this)},tt}(Observable),connectableObservableDescriptor=function(){var it=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:it._subscribe},_isComplete:{value:it._isComplete,writable:!0},getSubject:{value:it.getSubject},connect:{value:it.connect},refCount:{value:it.refCount}}}(),ConnectableSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.connectable=at,st}return tt.prototype._error=function(rt){this._unsubscribe(),it.prototype._error.call(this,rt)},tt.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),it.prototype._complete.call(this)},tt.prototype._unsubscribe=function(){var rt=this.connectable;if(rt){this.connectable=null;var at=rt._connection;rt._refCount=0,rt._subject=null,rt._connection=null,at&&at.unsubscribe()}},tt}(SubjectSubscriber);function groupBy(it,tt,rt,at){return function(st){return st.lift(new GroupByOperator(it,tt,rt,at))}}var GroupByOperator=function(){function it(tt,rt,at,st){this.keySelector=tt,this.elementSelector=rt,this.durationSelector=at,this.subjectSelector=st}return it.prototype.call=function(tt,rt){return rt.subscribe(new GroupBySubscriber(tt,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},it}(),GroupBySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot,lt){var ut=it.call(this,rt)||this;return ut.keySelector=at,ut.elementSelector=st,ut.durationSelector=ot,ut.subjectSelector=lt,ut.groups=null,ut.attemptedToUnsubscribe=!1,ut.count=0,ut}return tt.prototype._next=function(rt){var at;try{at=this.keySelector(rt)}catch(st){this.error(st);return}this._group(rt,at)},tt.prototype._group=function(rt,at){var st=this.groups;st||(st=this.groups=new Map);var ot=st.get(at),lt;if(this.elementSelector)try{lt=this.elementSelector(rt)}catch(mt){this.error(mt)}else lt=rt;if(!ot){ot=this.subjectSelector?this.subjectSelector():new Subject,st.set(at,ot);var ut=new GroupedObservable(at,ot,this);if(this.destination.next(ut),this.durationSelector){var ht=void 0;try{ht=this.durationSelector(new GroupedObservable(at,ot))}catch(mt){this.error(mt);return}this.add(ht.subscribe(new GroupDurationSubscriber(at,ot,this)))}}ot.closed||ot.next(lt)},tt.prototype._error=function(rt){var at=this.groups;at&&(at.forEach(function(st,ot){st.error(rt)}),at.clear()),this.destination.error(rt)},tt.prototype._complete=function(){var rt=this.groups;rt&&(rt.forEach(function(at,st){at.complete()}),rt.clear()),this.destination.complete()},tt.prototype.removeGroup=function(rt){this.groups.delete(rt)},tt.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&it.prototype.unsubscribe.call(this))},tt}(Subscriber),GroupDurationSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,at)||this;return ot.key=rt,ot.group=at,ot.parent=st,ot}return tt.prototype._next=function(rt){this.complete()},tt.prototype._unsubscribe=function(){var rt=this,at=rt.parent,st=rt.key;this.key=this.parent=null,at&&at.removeGroup(st)},tt}(Subscriber),GroupedObservable=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this)||this;return ot.key=rt,ot.groupSubject=at,ot.refCountSubscription=st,ot}return tt.prototype._subscribe=function(rt){var at=new Subscription,st=this,ot=st.refCountSubscription,lt=st.groupSubject;return ot&&!ot.closed&&at.add(new InnerRefCountSubscription(ot)),at.add(lt.subscribe(rt)),at},tt}(Observable),InnerRefCountSubscription=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this)||this;return at.parent=rt,rt.count++,at}return tt.prototype.unsubscribe=function(){var rt=this.parent;!rt.closed&&!this.closed&&(it.prototype.unsubscribe.call(this),rt.count-=1,rt.count===0&&rt.attemptedToUnsubscribe&&rt.unsubscribe())},tt}(Subscription),BehaviorSubject=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this)||this;return at._value=rt,at}return Object.defineProperty(tt.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),tt.prototype._subscribe=function(rt){var at=it.prototype._subscribe.call(this,rt);return at&&!at.closed&&rt.next(this._value),at},tt.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},tt.prototype.next=function(rt){it.prototype.next.call(this,this._value=rt)},tt}(Subject),Action=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){return it.call(this)||this}return tt.prototype.schedule=function(rt,at){return this},tt}(Subscription),AsyncAction=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt,at)||this;return st.scheduler=rt,st.work=at,st.pending=!1,st}return tt.prototype.schedule=function(rt,at){if(at===void 0&&(at=0),this.closed)return this;this.state=rt;var st=this.id,ot=this.scheduler;return st!=null&&(this.id=this.recycleAsyncId(ot,st,at)),this.pending=!0,this.delay=at,this.id=this.id||this.requestAsyncId(ot,this.id,at),this},tt.prototype.requestAsyncId=function(rt,at,st){return st===void 0&&(st=0),setInterval(rt.flush.bind(rt,this),st)},tt.prototype.recycleAsyncId=function(rt,at,st){if(st===void 0&&(st=0),st!==null&&this.delay===st&&this.pending===!1)return at;clearInterval(at)},tt.prototype.execute=function(rt,at){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var st=this._execute(rt,at);if(st)return st;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},tt.prototype._execute=function(rt,at){var st=!1,ot=void 0;try{this.work(rt)}catch(lt){st=!0,ot=!!lt&&lt||new Error(lt)}if(st)return this.unsubscribe(),ot},tt.prototype._unsubscribe=function(){var rt=this.id,at=this.scheduler,st=at.actions,ot=st.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,ot!==-1&&st.splice(ot,1),rt!=null&&(this.id=this.recycleAsyncId(at,rt,null)),this.delay=null},tt}(Action),QueueAction=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt,at)||this;return st.scheduler=rt,st.work=at,st}return tt.prototype.schedule=function(rt,at){return at===void 0&&(at=0),at>0?it.prototype.schedule.call(this,rt,at):(this.delay=at,this.state=rt,this.scheduler.flush(this),this)},tt.prototype.execute=function(rt,at){return at>0||this.closed?it.prototype.execute.call(this,rt,at):this._execute(rt,at)},tt.prototype.requestAsyncId=function(rt,at,st){return st===void 0&&(st=0),st!==null&&st>0||st===null&&this.delay>0?it.prototype.requestAsyncId.call(this,rt,at,st):rt.flush(this)},tt}(AsyncAction),Scheduler=function(){function it(tt,rt){rt===void 0&&(rt=it.now),this.SchedulerAction=tt,this.now=rt}return it.prototype.schedule=function(tt,rt,at){return rt===void 0&&(rt=0),new this.SchedulerAction(this,tt).schedule(at,rt)},it.now=function(){return Date.now()},it}(),AsyncScheduler=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){at===void 0&&(at=Scheduler.now);var st=it.call(this,rt,function(){return tt.delegate&&tt.delegate!==st?tt.delegate.now():at()})||this;return st.actions=[],st.active=!1,st.scheduled=void 0,st}return tt.prototype.schedule=function(rt,at,st){return at===void 0&&(at=0),tt.delegate&&tt.delegate!==this?tt.delegate.schedule(rt,at,st):it.prototype.schedule.call(this,rt,at,st)},tt.prototype.flush=function(rt){var at=this.actions;if(this.active){at.push(rt);return}var st;this.active=!0;do if(st=rt.execute(rt.state,rt.delay))break;while(rt=at.shift());if(this.active=!1,st){for(;rt=at.shift();)rt.unsubscribe();throw st}},tt}(Scheduler),QueueScheduler=function(it){tslib.exports.__extends(tt,it);function tt(){return it!==null&&it.apply(this,arguments)||this}return tt}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,EMPTY=new Observable(function(it){return it.complete()});function empty(it){return it?emptyScheduled(it):EMPTY}function emptyScheduled(it){return new Observable(function(tt){return it.schedule(function(){return tt.complete()})})}function isScheduler(it){return it&&typeof it.schedule=="function"}var subscribeToArray=function(it){return function(tt){for(var rt=0,at=it.length;rt<at&&!tt.closed;rt++)tt.next(it[rt]);tt.complete()}};function scheduleArray(it,tt){return new Observable(function(rt){var at=new Subscription,st=0;return at.add(tt.schedule(function(){if(st===it.length){rt.complete();return}rt.next(it[st++]),rt.closed||at.add(this.schedule())})),at})}function fromArray(it,tt){return tt?scheduleArray(it,tt):new Observable(subscribeToArray(it))}function of(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];var rt=it[it.length-1];return isScheduler(rt)?(it.pop(),scheduleArray(it,rt)):fromArray(it)}function throwError(it,tt){return tt?new Observable(function(rt){return tt.schedule(dispatch$7,0,{error:it,subscriber:rt})}):new Observable(function(rt){return rt.error(it)})}function dispatch$7(it){var tt=it.error,rt=it.subscriber;rt.error(tt)}var NotificationKind;NotificationKind||(NotificationKind={});var Notification$1=function(){function it(tt,rt,at){this.kind=tt,this.value=rt,this.error=at,this.hasValue=tt==="N"}return it.prototype.observe=function(tt){switch(this.kind){case"N":return tt.next&&tt.next(this.value);case"E":return tt.error&&tt.error(this.error);case"C":return tt.complete&&tt.complete()}},it.prototype.do=function(tt,rt,at){var st=this.kind;switch(st){case"N":return tt&&tt(this.value);case"E":return rt&&rt(this.error);case"C":return at&&at()}},it.prototype.accept=function(tt,rt,at){return tt&&typeof tt.next=="function"?this.observe(tt):this.do(tt,rt,at)},it.prototype.toObservable=function(){var tt=this.kind;switch(tt){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty()}throw new Error("unexpected notification kind value")},it.createNext=function(tt){return typeof tt<"u"?new it("N",tt):it.undefinedValueNotification},it.createError=function(tt){return new it("E",void 0,tt)},it.createComplete=function(){return it.completeNotification},it.completeNotification=new it("C"),it.undefinedValueNotification=new it("N",void 0),it}();function observeOn(it,tt){return tt===void 0&&(tt=0),function(at){return at.lift(new ObserveOnOperator(it,tt))}}var ObserveOnOperator=function(){function it(tt,rt){rt===void 0&&(rt=0),this.scheduler=tt,this.delay=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new ObserveOnSubscriber(tt,this.scheduler,this.delay))},it}(),ObserveOnSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){st===void 0&&(st=0);var ot=it.call(this,rt)||this;return ot.scheduler=at,ot.delay=st,ot}return tt.dispatch=function(rt){var at=rt.notification,st=rt.destination;at.observe(st),this.unsubscribe()},tt.prototype.scheduleMessage=function(rt){var at=this.destination;at.add(this.scheduler.schedule(tt.dispatch,this.delay,new ObserveOnMessage(rt,this.destination)))},tt.prototype._next=function(rt){this.scheduleMessage(Notification$1.createNext(rt))},tt.prototype._error=function(rt){this.scheduleMessage(Notification$1.createError(rt)),this.unsubscribe()},tt.prototype._complete=function(){this.scheduleMessage(Notification$1.createComplete()),this.unsubscribe()},tt}(Subscriber),ObserveOnMessage=function(){function it(tt,rt){this.notification=tt,this.destination=rt}return it}(),ReplaySubject=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){rt===void 0&&(rt=Number.POSITIVE_INFINITY),at===void 0&&(at=Number.POSITIVE_INFINITY);var ot=it.call(this)||this;return ot.scheduler=st,ot._events=[],ot._infiniteTimeWindow=!1,ot._bufferSize=rt<1?1:rt,ot._windowTime=at<1?1:at,at===Number.POSITIVE_INFINITY?(ot._infiniteTimeWindow=!0,ot.next=ot.nextInfiniteTimeWindow):ot.next=ot.nextTimeWindow,ot}return tt.prototype.nextInfiniteTimeWindow=function(rt){if(!this.isStopped){var at=this._events;at.push(rt),at.length>this._bufferSize&&at.shift()}it.prototype.next.call(this,rt)},tt.prototype.nextTimeWindow=function(rt){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),rt)),this._trimBufferThenGetEvents()),it.prototype.next.call(this,rt)},tt.prototype._subscribe=function(rt){var at=this._infiniteTimeWindow,st=at?this._events:this._trimBufferThenGetEvents(),ot=this.scheduler,lt=st.length,ut;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?ut=Subscription.EMPTY:(this.observers.push(rt),ut=new SubjectSubscription(this,rt)),ot&&rt.add(rt=new ObserveOnSubscriber(rt,ot)),at)for(var ht=0;ht<lt&&!rt.closed;ht++)rt.next(st[ht]);else for(var ht=0;ht<lt&&!rt.closed;ht++)rt.next(st[ht].value);return this.hasError?rt.error(this.thrownError):this.isStopped&&rt.complete(),ut},tt.prototype._getNow=function(){return(this.scheduler||queue).now()},tt.prototype._trimBufferThenGetEvents=function(){for(var rt=this._getNow(),at=this._bufferSize,st=this._windowTime,ot=this._events,lt=ot.length,ut=0;ut<lt&&!(rt-ot[ut].time<st);)ut++;return lt>at&&(ut=Math.max(ut,lt-at)),ut>0&&ot.splice(0,ut),ot},tt}(Subject),ReplayEvent=function(){function it(tt,rt){this.time=tt,this.value=rt}return it}(),AsyncSubject=function(it){tslib.exports.__extends(tt,it);function tt(){var rt=it!==null&&it.apply(this,arguments)||this;return rt.value=null,rt.hasNext=!1,rt.hasCompleted=!1,rt}return tt.prototype._subscribe=function(rt){return this.hasError?(rt.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(rt.next(this.value),rt.complete(),Subscription.EMPTY):it.prototype._subscribe.call(this,rt)},tt.prototype.next=function(rt){this.hasCompleted||(this.value=rt,this.hasNext=!0)},tt.prototype.error=function(rt){this.hasCompleted||it.prototype.error.call(this,rt)},tt.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&it.prototype.next.call(this,this.value),it.prototype.complete.call(this)},tt}(Subject),nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(it){return it in activeHandles?(delete activeHandles[it],!0):!1}var Immediate={setImmediate:function(it){var tt=nextHandle++;return activeHandles[tt]=!0,RESOLVED.then(function(){return findAndClearHandle(tt)&&it()}),tt},clearImmediate:function(it){findAndClearHandle(it)}},AsapAction=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt,at)||this;return st.scheduler=rt,st.work=at,st}return tt.prototype.requestAsyncId=function(rt,at,st){return st===void 0&&(st=0),st!==null&&st>0?it.prototype.requestAsyncId.call(this,rt,at,st):(rt.actions.push(this),rt.scheduled||(rt.scheduled=Immediate.setImmediate(rt.flush.bind(rt,null))))},tt.prototype.recycleAsyncId=function(rt,at,st){if(st===void 0&&(st=0),st!==null&&st>0||st===null&&this.delay>0)return it.prototype.recycleAsyncId.call(this,rt,at,st);rt.actions.length===0&&(Immediate.clearImmediate(at),rt.scheduled=void 0)},tt}(AsyncAction),AsapScheduler=function(it){tslib.exports.__extends(tt,it);function tt(){return it!==null&&it.apply(this,arguments)||this}return tt.prototype.flush=function(rt){this.active=!0,this.scheduled=void 0;var at=this.actions,st,ot=-1,lt=at.length;rt=rt||at.shift();do if(st=rt.execute(rt.state,rt.delay))break;while(++ot<lt&&(rt=at.shift()));if(this.active=!1,st){for(;++ot<lt&&(rt=at.shift());)rt.unsubscribe();throw st}},tt}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler,AnimationFrameAction=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt,at)||this;return st.scheduler=rt,st.work=at,st}return tt.prototype.requestAsyncId=function(rt,at,st){return st===void 0&&(st=0),st!==null&&st>0?it.prototype.requestAsyncId.call(this,rt,at,st):(rt.actions.push(this),rt.scheduled||(rt.scheduled=requestAnimationFrame(function(){return rt.flush(null)})))},tt.prototype.recycleAsyncId=function(rt,at,st){if(st===void 0&&(st=0),st!==null&&st>0||st===null&&this.delay>0)return it.prototype.recycleAsyncId.call(this,rt,at,st);rt.actions.length===0&&(cancelAnimationFrame(at),rt.scheduled=void 0)},tt}(AsyncAction),AnimationFrameScheduler=function(it){tslib.exports.__extends(tt,it);function tt(){return it!==null&&it.apply(this,arguments)||this}return tt.prototype.flush=function(rt){this.active=!0,this.scheduled=void 0;var at=this.actions,st,ot=-1,lt=at.length;rt=rt||at.shift();do if(st=rt.execute(rt.state,rt.delay))break;while(++ot<lt&&(rt=at.shift()));if(this.active=!1,st){for(;++ot<lt&&(rt=at.shift());)rt.unsubscribe();throw st}},tt}(AsyncScheduler),animationFrameScheduler=new AnimationFrameScheduler(AnimationFrameAction),animationFrame=animationFrameScheduler,VirtualTimeScheduler=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){rt===void 0&&(rt=VirtualAction),at===void 0&&(at=Number.POSITIVE_INFINITY);var st=it.call(this,rt,function(){return st.frame})||this;return st.maxFrames=at,st.frame=0,st.index=-1,st}return tt.prototype.flush=function(){for(var rt=this,at=rt.actions,st=rt.maxFrames,ot,lt;(lt=at[0])&&lt.delay<=st&&(at.shift(),this.frame=lt.delay,!(ot=lt.execute(lt.state,lt.delay))););if(ot){for(;lt=at.shift();)lt.unsubscribe();throw ot}},tt.frameTimeFactor=10,tt}(AsyncScheduler),VirtualAction=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){st===void 0&&(st=rt.index+=1);var ot=it.call(this,rt,at)||this;return ot.scheduler=rt,ot.work=at,ot.index=st,ot.active=!0,ot.index=rt.index=st,ot}return tt.prototype.schedule=function(rt,at){if(at===void 0&&(at=0),!this.id)return it.prototype.schedule.call(this,rt,at);this.active=!1;var st=new tt(this.scheduler,this.work);return this.add(st),st.schedule(rt,at)},tt.prototype.requestAsyncId=function(rt,at,st){st===void 0&&(st=0),this.delay=rt.frame+st;var ot=rt.actions;return ot.push(this),ot.sort(tt.sortActions),!0},tt.prototype.recycleAsyncId=function(rt,at,st){},tt.prototype._execute=function(rt,at){if(this.active===!0)return it.prototype._execute.call(this,rt,at)},tt.sortActions=function(rt,at){return rt.delay===at.delay?rt.index===at.index?0:rt.index>at.index?1:-1:rt.delay>at.delay?1:-1},tt}(AsyncAction);function noop$2(){}function isObservable(it){return!!it&&(it instanceof Observable||typeof it.lift=="function"&&typeof it.subscribe=="function")}var ArgumentOutOfRangeErrorImpl=function(){function it(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return it.prototype=Object.create(Error.prototype),it}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl,EmptyErrorImpl=function(){function it(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return it.prototype=Object.create(Error.prototype),it}(),EmptyError=EmptyErrorImpl,TimeoutErrorImpl=function(){function it(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return it.prototype=Object.create(Error.prototype),it}(),TimeoutError=TimeoutErrorImpl;function map(it,tt){return function(at){if(typeof it!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return at.lift(new MapOperator(it,tt))}}var MapOperator=function(){function it(tt,rt){this.project=tt,this.thisArg=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new MapSubscriber(tt,this.project,this.thisArg))},it}(),MapSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.project=at,ot.count=0,ot.thisArg=st||ot,ot}return tt.prototype._next=function(rt){var at;try{at=this.project.call(this.thisArg,rt,this.count++)}catch(st){this.destination.error(st);return}this.destination.next(at)},tt}(Subscriber);function bindCallback(it,tt,rt){if(tt)if(isScheduler(tt))rt=tt;else return function(){for(var at=[],st=0;st<arguments.length;st++)at[st]=arguments[st];return bindCallback(it,rt).apply(void 0,at).pipe(map(function(ot){return isArray$4(ot)?tt.apply(void 0,ot):tt(ot)}))};return function(){for(var at=[],st=0;st<arguments.length;st++)at[st]=arguments[st];var ot=this,lt,ut={context:ot,subject:lt,callbackFunc:it,scheduler:rt};return new Observable(function(ht){if(rt){var bt={args:at,subscriber:ht,params:ut};return rt.schedule(dispatch$6,0,bt)}else{if(!lt){lt=new AsyncSubject;var mt=function(){for(var vt=[],At=0;At<arguments.length;At++)vt[At]=arguments[At];lt.next(vt.length<=1?vt[0]:vt),lt.complete()};try{it.apply(ot,at.concat([mt]))}catch(vt){canReportError(lt)?lt.error(vt):console.warn(vt)}}return lt.subscribe(ht)}})}}function dispatch$6(it){var tt=this,rt=it.args,at=it.subscriber,st=it.params,ot=st.callbackFunc,lt=st.context,ut=st.scheduler,ht=st.subject;if(!ht){ht=st.subject=new AsyncSubject;var mt=function(){for(var bt=[],vt=0;vt<arguments.length;vt++)bt[vt]=arguments[vt];var At=bt.length<=1?bt[0]:bt;tt.add(ut.schedule(dispatchNext$3,0,{value:At,subject:ht}))};try{ot.apply(lt,rt.concat([mt]))}catch(bt){ht.error(bt)}}this.add(ht.subscribe(at))}function dispatchNext$3(it){var tt=it.value,rt=it.subject;rt.next(tt),rt.complete()}function bindNodeCallback(it,tt,rt){if(tt)if(isScheduler(tt))rt=tt;else return function(){for(var at=[],st=0;st<arguments.length;st++)at[st]=arguments[st];return bindNodeCallback(it,rt).apply(void 0,at).pipe(map(function(ot){return isArray$4(ot)?tt.apply(void 0,ot):tt(ot)}))};return function(){for(var at=[],st=0;st<arguments.length;st++)at[st]=arguments[st];var ot={subject:void 0,args:at,callbackFunc:it,scheduler:rt,context:this};return new Observable(function(lt){var ut=ot.context,ht=ot.subject;if(rt)return rt.schedule(dispatch$5,0,{params:ot,subscriber:lt,context:ut});if(!ht){ht=ot.subject=new AsyncSubject;var mt=function(){for(var bt=[],vt=0;vt<arguments.length;vt++)bt[vt]=arguments[vt];var At=bt.shift();if(At){ht.error(At);return}ht.next(bt.length<=1?bt[0]:bt),ht.complete()};try{it.apply(ut,at.concat([mt]))}catch(bt){canReportError(ht)?ht.error(bt):console.warn(bt)}}return ht.subscribe(lt)})}}function dispatch$5(it){var tt=this,rt=it.params,at=it.subscriber,st=it.context,ot=rt.callbackFunc,lt=rt.args,ut=rt.scheduler,ht=rt.subject;if(!ht){ht=rt.subject=new AsyncSubject;var mt=function(){for(var bt=[],vt=0;vt<arguments.length;vt++)bt[vt]=arguments[vt];var At=bt.shift();if(At)tt.add(ut.schedule(dispatchError,0,{err:At,subject:ht}));else{var xt=bt.length<=1?bt[0]:bt;tt.add(ut.schedule(dispatchNext$2,0,{value:xt,subject:ht}))}};try{ot.apply(st,lt.concat([mt]))}catch(bt){this.add(ut.schedule(dispatchError,0,{err:bt,subject:ht}))}}this.add(ht.subscribe(at))}function dispatchNext$2(it){var tt=it.value,rt=it.subject;rt.next(tt),rt.complete()}function dispatchError(it){var tt=it.err,rt=it.subject;rt.error(tt)}var OuterSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(){return it!==null&&it.apply(this,arguments)||this}return tt.prototype.notifyNext=function(rt,at,st,ot,lt){this.destination.next(at)},tt.prototype.notifyError=function(rt,at){this.destination.error(rt)},tt.prototype.notifyComplete=function(rt){this.destination.complete()},tt}(Subscriber),InnerSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this)||this;return ot.parent=rt,ot.outerValue=at,ot.outerIndex=st,ot.index=0,ot}return tt.prototype._next=function(rt){this.parent.notifyNext(this.outerValue,rt,this.outerIndex,this.index++,this)},tt.prototype._error=function(rt){this.parent.notifyError(rt,this),this.unsubscribe()},tt.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},tt}(Subscriber),subscribeToPromise=function(it){return function(tt){return it.then(function(rt){tt.closed||(tt.next(rt),tt.complete())},function(rt){return tt.error(rt)}).then(null,hostReportError),tt}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(it){return function(tt){var rt=it[iterator]();do{var at=void 0;try{at=rt.next()}catch(st){return tt.error(st),tt}if(at.done){tt.complete();break}if(tt.next(at.value),tt.closed)break}while(!0);return typeof rt.return=="function"&&tt.add(function(){rt.return&&rt.return()}),tt}},subscribeToObservable=function(it){return function(tt){var rt=it[observable]();if(typeof rt.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return rt.subscribe(tt)}},isArrayLike=function(it){return it&&typeof it.length=="number"&&typeof it!="function"};function isPromise(it){return!!it&&typeof it.subscribe!="function"&&typeof it.then=="function"}var subscribeTo=function(it){if(!!it&&typeof it[observable]=="function")return subscribeToObservable(it);if(isArrayLike(it))return subscribeToArray(it);if(isPromise(it))return subscribeToPromise(it);if(!!it&&typeof it[iterator]=="function")return subscribeToIterable(it);var tt=isObject$3(it)?"an invalid object":"'"+it+"'",rt="You provided "+tt+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(rt)};function subscribeToResult(it,tt,rt,at,st){if(st===void 0&&(st=new InnerSubscriber(it,rt,at)),!st.closed)return tt instanceof Observable?tt.subscribe(st):subscribeTo(tt)(st)}var NONE={};function combineLatest$1(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];var rt=void 0,at=void 0;return isScheduler(it[it.length-1])&&(at=it.pop()),typeof it[it.length-1]=="function"&&(rt=it.pop()),it.length===1&&isArray$4(it[0])&&(it=it[0]),fromArray(it,at).lift(new CombineLatestOperator(rt))}var CombineLatestOperator=function(){function it(tt){this.resultSelector=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new CombineLatestSubscriber(tt,this.resultSelector))},it}(),CombineLatestSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.resultSelector=at,st.active=0,st.values=[],st.observables=[],st}return tt.prototype._next=function(rt){this.values.push(NONE),this.observables.push(rt)},tt.prototype._complete=function(){var rt=this.observables,at=rt.length;if(at===0)this.destination.complete();else{this.active=at,this.toRespond=at;for(var st=0;st<at;st++){var ot=rt[st];this.add(subscribeToResult(this,ot,void 0,st))}}},tt.prototype.notifyComplete=function(rt){(this.active-=1)===0&&this.destination.complete()},tt.prototype.notifyNext=function(rt,at,st){var ot=this.values,lt=ot[st],ut=this.toRespond?lt===NONE?--this.toRespond:this.toRespond:0;ot[st]=at,ut===0&&(this.resultSelector?this._tryResultSelector(ot):this.destination.next(ot.slice()))},tt.prototype._tryResultSelector=function(rt){var at;try{at=this.resultSelector.apply(this,rt)}catch(st){this.destination.error(st);return}this.destination.next(at)},tt}(OuterSubscriber);function scheduleObservable(it,tt){return new Observable(function(rt){var at=new Subscription;return at.add(tt.schedule(function(){var st=it[observable]();at.add(st.subscribe({next:function(ot){at.add(tt.schedule(function(){return rt.next(ot)}))},error:function(ot){at.add(tt.schedule(function(){return rt.error(ot)}))},complete:function(){at.add(tt.schedule(function(){return rt.complete()}))}}))})),at})}function schedulePromise(it,tt){return new Observable(function(rt){var at=new Subscription;return at.add(tt.schedule(function(){return it.then(function(st){at.add(tt.schedule(function(){rt.next(st),at.add(tt.schedule(function(){return rt.complete()}))}))},function(st){at.add(tt.schedule(function(){return rt.error(st)}))})})),at})}function scheduleIterable(it,tt){if(!it)throw new Error("Iterable cannot be null");return new Observable(function(rt){var at=new Subscription,st;return at.add(function(){st&&typeof st.return=="function"&&st.return()}),at.add(tt.schedule(function(){st=it[iterator](),at.add(tt.schedule(function(){if(!rt.closed){var ot,lt;try{var ut=st.next();ot=ut.value,lt=ut.done}catch(ht){rt.error(ht);return}lt?rt.complete():(rt.next(ot),this.schedule())}}))})),at})}function isInteropObservable(it){return it&&typeof it[observable]=="function"}function isIterable(it){return it&&typeof it[iterator]=="function"}function scheduled(it,tt){if(it!=null){if(isInteropObservable(it))return scheduleObservable(it,tt);if(isPromise(it))return schedulePromise(it,tt);if(isArrayLike(it))return scheduleArray(it,tt);if(isIterable(it)||typeof it=="string")return scheduleIterable(it,tt)}throw new TypeError((it!==null&&typeof it||it)+" is not observable")}function from$2(it,tt){return tt?scheduled(it,tt):it instanceof Observable?it:new Observable(subscribeTo(it))}var SimpleInnerSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this)||this;return at.parent=rt,at}return tt.prototype._next=function(rt){this.parent.notifyNext(rt)},tt.prototype._error=function(rt){this.parent.notifyError(rt),this.unsubscribe()},tt.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},tt}(Subscriber),SimpleOuterSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(){return it!==null&&it.apply(this,arguments)||this}return tt.prototype.notifyNext=function(rt){this.destination.next(rt)},tt.prototype.notifyError=function(rt){this.destination.error(rt)},tt.prototype.notifyComplete=function(){this.destination.complete()},tt}(Subscriber);function innerSubscribe(it,tt){if(!tt.closed){if(it instanceof Observable)return it.subscribe(tt);var rt;try{rt=subscribeTo(it)(tt)}catch(at){tt.error(at)}return rt}}function mergeMap(it,tt,rt){return rt===void 0&&(rt=Number.POSITIVE_INFINITY),typeof tt=="function"?function(at){return at.pipe(mergeMap(function(st,ot){return from$2(it(st,ot)).pipe(map(function(lt,ut){return tt(st,lt,ot,ut)}))},rt))}:(typeof tt=="number"&&(rt=tt),function(at){return at.lift(new MergeMapOperator(it,rt))})}var MergeMapOperator=function(){function it(tt,rt){rt===void 0&&(rt=Number.POSITIVE_INFINITY),this.project=tt,this.concurrent=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new MergeMapSubscriber(tt,this.project,this.concurrent))},it}(),MergeMapSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){st===void 0&&(st=Number.POSITIVE_INFINITY);var ot=it.call(this,rt)||this;return ot.project=at,ot.concurrent=st,ot.hasCompleted=!1,ot.buffer=[],ot.active=0,ot.index=0,ot}return tt.prototype._next=function(rt){this.active<this.concurrent?this._tryNext(rt):this.buffer.push(rt)},tt.prototype._tryNext=function(rt){var at,st=this.index++;try{at=this.project(rt,st)}catch(ot){this.destination.error(ot);return}this.active++,this._innerSub(at)},tt.prototype._innerSub=function(rt){var at=new SimpleInnerSubscriber(this),st=this.destination;st.add(at);var ot=innerSubscribe(rt,at);ot!==at&&st.add(ot)},tt.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},tt.prototype.notifyNext=function(rt){this.destination.next(rt)},tt.prototype.notifyComplete=function(){var rt=this.buffer;this.active--,rt.length>0?this._next(rt.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},tt}(SimpleOuterSubscriber),flatMap=mergeMap;function mergeAll(it){return it===void 0&&(it=Number.POSITIVE_INFINITY),mergeMap(identity,it)}function concatAll(){return mergeAll(1)}function concat$2(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return concatAll()(of.apply(void 0,it))}function defer(it){return new Observable(function(tt){var rt;try{rt=it()}catch(st){tt.error(st);return}var at=rt?from$2(rt):empty();return at.subscribe(tt)})}function forkJoin(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];if(it.length===1){var rt=it[0];if(isArray$4(rt))return forkJoinInternal(rt,null);if(isObject$3(rt)&&Object.getPrototypeOf(rt)===Object.prototype){var at=Object.keys(rt);return forkJoinInternal(at.map(function(ot){return rt[ot]}),at)}}if(typeof it[it.length-1]=="function"){var st=it.pop();return it=it.length===1&&isArray$4(it[0])?it[0]:it,forkJoinInternal(it,null).pipe(map(function(ot){return st.apply(void 0,ot)}))}return forkJoinInternal(it,null)}function forkJoinInternal(it,tt){return new Observable(function(rt){var at=it.length;if(at===0){rt.complete();return}for(var st=new Array(at),ot=0,lt=0,ut=function(mt){var bt=from$2(it[mt]),vt=!1;rt.add(bt.subscribe({next:function(At){vt||(vt=!0,lt++),st[mt]=At},error:function(At){return rt.error(At)},complete:function(){ot++,(ot===at||!vt)&&(lt===at&&rt.next(tt?tt.reduce(function(At,xt,Et){return At[xt]=st[Et],At},{}):st),rt.complete())}}))},ht=0;ht<at;ht++)ut(ht)})}function fromEvent(it,tt,rt,at){return isFunction$1(rt)&&(at=rt,rt=void 0),at?fromEvent(it,tt,rt).pipe(map(function(st){return isArray$4(st)?at.apply(void 0,st):at(st)})):new Observable(function(st){function ot(lt){arguments.length>1?st.next(Array.prototype.slice.call(arguments)):st.next(lt)}setupSubscription(it,tt,ot,st,rt)})}function setupSubscription(it,tt,rt,at,st){var ot;if(isEventTarget(it)){var lt=it;it.addEventListener(tt,rt,st),ot=function(){return lt.removeEventListener(tt,rt,st)}}else if(isJQueryStyleEventEmitter(it)){var ut=it;it.on(tt,rt),ot=function(){return ut.off(tt,rt)}}else if(isNodeStyleEventEmitter(it)){var ht=it;it.addListener(tt,rt),ot=function(){return ht.removeListener(tt,rt)}}else if(it&&it.length)for(var mt=0,bt=it.length;mt<bt;mt++)setupSubscription(it[mt],tt,rt,at,st);else throw new TypeError("Invalid event target");at.add(ot)}function isNodeStyleEventEmitter(it){return it&&typeof it.addListener=="function"&&typeof it.removeListener=="function"}function isJQueryStyleEventEmitter(it){return it&&typeof it.on=="function"&&typeof it.off=="function"}function isEventTarget(it){return it&&typeof it.addEventListener=="function"&&typeof it.removeEventListener=="function"}function fromEventPattern(it,tt,rt){return rt?fromEventPattern(it,tt).pipe(map(function(at){return isArray$4(at)?rt.apply(void 0,at):rt(at)})):new Observable(function(at){var st=function(){for(var lt=[],ut=0;ut<arguments.length;ut++)lt[ut]=arguments[ut];return at.next(lt.length===1?lt[0]:lt)},ot;try{ot=it(st)}catch(lt){at.error(lt);return}if(!!isFunction$1(tt))return function(){return tt(st,ot)}})}function generate(it,tt,rt,at,st){var ot,lt;if(arguments.length==1){var ut=it;lt=ut.initialState,tt=ut.condition,rt=ut.iterate,ot=ut.resultSelector||identity,st=ut.scheduler}else at===void 0||isScheduler(at)?(lt=it,ot=identity,st=at):(lt=it,ot=at);return new Observable(function(ht){var mt=lt;if(st)return st.schedule(dispatch$4,0,{subscriber:ht,iterate:rt,condition:tt,resultSelector:ot,state:mt});do{if(tt){var bt=void 0;try{bt=tt(mt)}catch(At){ht.error(At);return}if(!bt){ht.complete();break}}var vt=void 0;try{vt=ot(mt)}catch(At){ht.error(At);return}if(ht.next(vt),ht.closed)break;try{mt=rt(mt)}catch(At){ht.error(At);return}}while(!0)})}function dispatch$4(it){var tt=it.subscriber,rt=it.condition;if(!tt.closed){if(it.needIterate)try{it.state=it.iterate(it.state)}catch(ot){tt.error(ot);return}else it.needIterate=!0;if(rt){var at=void 0;try{at=rt(it.state)}catch(ot){tt.error(ot);return}if(!at){tt.complete();return}if(tt.closed)return}var st;try{st=it.resultSelector(it.state)}catch(ot){tt.error(ot);return}if(!tt.closed&&(tt.next(st),!tt.closed))return this.schedule(it)}}function iif(it,tt,rt){return tt===void 0&&(tt=EMPTY),rt===void 0&&(rt=EMPTY),defer(function(){return it()?tt:rt})}function isNumeric(it){return!isArray$4(it)&&it-parseFloat(it)+1>=0}function interval(it,tt){return it===void 0&&(it=0),tt===void 0&&(tt=async),(!isNumeric(it)||it<0)&&(it=0),(!tt||typeof tt.schedule!="function")&&(tt=async),new Observable(function(rt){return rt.add(tt.schedule(dispatch$3,it,{subscriber:rt,counter:0,period:it})),rt})}function dispatch$3(it){var tt=it.subscriber,rt=it.counter,at=it.period;tt.next(rt),this.schedule({subscriber:tt,counter:rt+1,period:at},at)}function merge$2(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];var rt=Number.POSITIVE_INFINITY,at=null,st=it[it.length-1];return isScheduler(st)?(at=it.pop(),it.length>1&&typeof it[it.length-1]=="number"&&(rt=it.pop())):typeof st=="number"&&(rt=it.pop()),at===null&&it.length===1&&it[0]instanceof Observable?it[0]:mergeAll(rt)(fromArray(it,at))}var NEVER=new Observable(noop$2);function never(){return NEVER}function onErrorResumeNext$1(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];if(it.length===0)return EMPTY;var rt=it[0],at=it.slice(1);return it.length===1&&isArray$4(rt)?onErrorResumeNext$1.apply(void 0,rt):new Observable(function(st){var ot=function(){return st.add(onErrorResumeNext$1.apply(void 0,at).subscribe(st))};return from$2(rt).subscribe({next:function(lt){st.next(lt)},error:ot,complete:ot})})}function pairs(it,tt){return tt?new Observable(function(rt){var at=Object.keys(it),st=new Subscription;return st.add(tt.schedule(dispatch$2,0,{keys:at,index:0,subscriber:rt,subscription:st,obj:it})),st}):new Observable(function(rt){for(var at=Object.keys(it),st=0;st<at.length&&!rt.closed;st++){var ot=at[st];it.hasOwnProperty(ot)&&rt.next([ot,it[ot]])}rt.complete()})}function dispatch$2(it){var tt=it.keys,rt=it.index,at=it.subscriber,st=it.subscription,ot=it.obj;if(!at.closed)if(rt<tt.length){var lt=tt[rt];at.next([lt,ot[lt]]),st.add(this.schedule({keys:tt,index:rt+1,subscriber:at,subscription:st,obj:ot}))}else at.complete()}function not$2(it,tt){function rt(){return!rt.pred.apply(rt.thisArg,arguments)}return rt.pred=it,rt.thisArg=tt,rt}function filter(it,tt){return function(at){return at.lift(new FilterOperator(it,tt))}}var FilterOperator=function(){function it(tt,rt){this.predicate=tt,this.thisArg=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new FilterSubscriber(tt,this.predicate,this.thisArg))},it}(),FilterSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.predicate=at,ot.thisArg=st,ot.count=0,ot}return tt.prototype._next=function(rt){var at;try{at=this.predicate.call(this.thisArg,rt,this.count++)}catch(st){this.destination.error(st);return}at&&this.destination.next(rt)},tt}(Subscriber);function partition$1(it,tt,rt){return[filter(tt,rt)(new Observable(subscribeTo(it))),filter(not$2(tt,rt))(new Observable(subscribeTo(it)))]}function race$1(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];if(it.length===1)if(isArray$4(it[0]))it=it[0];else return it[0];return fromArray(it,void 0).lift(new RaceOperator)}var RaceOperator=function(){function it(){}return it.prototype.call=function(tt,rt){return rt.subscribe(new RaceSubscriber(tt))},it}(),RaceSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this,rt)||this;return at.hasFirst=!1,at.observables=[],at.subscriptions=[],at}return tt.prototype._next=function(rt){this.observables.push(rt)},tt.prototype._complete=function(){var rt=this.observables,at=rt.length;if(at===0)this.destination.complete();else{for(var st=0;st<at&&!this.hasFirst;st++){var ot=rt[st],lt=subscribeToResult(this,ot,void 0,st);this.subscriptions&&this.subscriptions.push(lt),this.add(lt)}this.observables=null}},tt.prototype.notifyNext=function(rt,at,st){if(!this.hasFirst){this.hasFirst=!0;for(var ot=0;ot<this.subscriptions.length;ot++)if(ot!==st){var lt=this.subscriptions[ot];lt.unsubscribe(),this.remove(lt)}this.subscriptions=null}this.destination.next(at)},tt}(OuterSubscriber);function range(it,tt,rt){return it===void 0&&(it=0),new Observable(function(at){tt===void 0&&(tt=it,it=0);var st=0,ot=it;if(rt)return rt.schedule(dispatch$1,0,{index:st,count:tt,start:it,subscriber:at});do{if(st++>=tt){at.complete();break}if(at.next(ot++),at.closed)break}while(!0)})}function dispatch$1(it){var tt=it.start,rt=it.index,at=it.count,st=it.subscriber;if(rt>=at){st.complete();return}st.next(tt),!st.closed&&(it.index=rt+1,it.start=tt+1,this.schedule(it))}function timer(it,tt,rt){it===void 0&&(it=0);var at=-1;return isNumeric(tt)?at=Number(tt)<1&&1||Number(tt):isScheduler(tt)&&(rt=tt),isScheduler(rt)||(rt=async),new Observable(function(st){var ot=isNumeric(it)?it:+it-rt.now();return rt.schedule(dispatch,ot,{index:0,period:at,subscriber:st})})}function dispatch(it){var tt=it.index,rt=it.period,at=it.subscriber;if(at.next(tt),!at.closed){if(rt===-1)return at.complete();it.index=tt+1,this.schedule(it,rt)}}function using(it,tt){return new Observable(function(rt){var at;try{at=it()}catch(ut){rt.error(ut);return}var st;try{st=tt(at)}catch(ut){rt.error(ut);return}var ot=st?from$2(st):EMPTY,lt=ot.subscribe(rt);return function(){lt.unsubscribe(),at&&at.unsubscribe()}})}function zip$1(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];var rt=it[it.length-1];return typeof rt=="function"&&it.pop(),fromArray(it,void 0).lift(new ZipOperator(rt))}var ZipOperator=function(){function it(tt){this.resultSelector=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new ZipSubscriber(tt,this.resultSelector))},it}(),ZipSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.resultSelector=at,ot.iterators=[],ot.active=0,ot.resultSelector=typeof at=="function"?at:void 0,ot}return tt.prototype._next=function(rt){var at=this.iterators;isArray$4(rt)?at.push(new StaticArrayIterator(rt)):typeof rt[iterator]=="function"?at.push(new StaticIterator(rt[iterator]())):at.push(new ZipBufferIterator(this.destination,this,rt))},tt.prototype._complete=function(){var rt=this.iterators,at=rt.length;if(this.unsubscribe(),at===0){this.destination.complete();return}this.active=at;for(var st=0;st<at;st++){var ot=rt[st];if(ot.stillUnsubscribed){var lt=this.destination;lt.add(ot.subscribe())}else this.active--}},tt.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},tt.prototype.checkIterators=function(){for(var rt=this.iterators,at=rt.length,st=this.destination,ot=0;ot<at;ot++){var lt=rt[ot];if(typeof lt.hasValue=="function"&&!lt.hasValue())return}for(var ut=!1,ht=[],ot=0;ot<at;ot++){var lt=rt[ot],mt=lt.next();if(lt.hasCompleted()&&(ut=!0),mt.done){st.complete();return}ht.push(mt.value)}this.resultSelector?this._tryresultSelector(ht):st.next(ht),ut&&st.complete()},tt.prototype._tryresultSelector=function(rt){var at;try{at=this.resultSelector.apply(this,rt)}catch(st){this.destination.error(st);return}this.destination.next(at)},tt}(Subscriber),StaticIterator=function(){function it(tt){this.iterator=tt,this.nextResult=tt.next()}return it.prototype.hasValue=function(){return!0},it.prototype.next=function(){var tt=this.nextResult;return this.nextResult=this.iterator.next(),tt},it.prototype.hasCompleted=function(){var tt=this.nextResult;return Boolean(tt&&tt.done)},it}(),StaticArrayIterator=function(){function it(tt){this.array=tt,this.index=0,this.length=0,this.length=tt.length}return it.prototype[iterator]=function(){return this},it.prototype.next=function(tt){var rt=this.index++,at=this.array;return rt<this.length?{value:at[rt],done:!1}:{value:null,done:!0}},it.prototype.hasValue=function(){return this.array.length>this.index},it.prototype.hasCompleted=function(){return this.array.length===this.index},it}(),ZipBufferIterator=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.parent=at,ot.observable=st,ot.stillUnsubscribed=!0,ot.buffer=[],ot.isComplete=!1,ot}return tt.prototype[iterator]=function(){return this},tt.prototype.next=function(){var rt=this.buffer;return rt.length===0&&this.isComplete?{value:null,done:!0}:{value:rt.shift(),done:!1}},tt.prototype.hasValue=function(){return this.buffer.length>0},tt.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},tt.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},tt.prototype.notifyNext=function(rt){this.buffer.push(rt),this.parent.checkIterators()},tt.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},tt}(SimpleOuterSubscriber);const _esm5=Object.freeze(Object.defineProperty({__proto__:null,Observable,ConnectableObservable,GroupedObservable,observable,Subject,BehaviorSubject,ReplaySubject,AsyncSubject,asap,asapScheduler,async,asyncScheduler,queue,queueScheduler,animationFrame,animationFrameScheduler,VirtualTimeScheduler,VirtualAction,Scheduler,Subscription,Subscriber,Notification:Notification$1,get NotificationKind(){return NotificationKind},pipe,noop:noop$2,identity,isObservable,ArgumentOutOfRangeError,EmptyError,ObjectUnsubscribedError,UnsubscriptionError,TimeoutError,bindCallback,bindNodeCallback,combineLatest:combineLatest$1,concat:concat$2,defer,empty,forkJoin,from:from$2,fromEvent,fromEventPattern,generate,iif,interval,merge:merge$2,never,of,onErrorResumeNext:onErrorResumeNext$1,pairs,partition:partition$1,race:race$1,range,throwError,timer,using,zip:zip$1,scheduled,EMPTY,NEVER,config:config$1},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(_esm5);var ConnectDialog$1={};function r$8(it){var tt,rt,at="";if(typeof it=="string"||typeof it=="number")at+=it;else if(typeof it=="object")if(Array.isArray(it))for(tt=0;tt<it.length;tt++)it[tt]&&(rt=r$8(it[tt]))&&(at&&(at+=" "),at+=rt);else for(tt in it)it[tt]&&(at&&(at+=" "),at+=tt);return at}function clsx$1(){for(var it,tt,rt=0,at="";rt<arguments.length;)(it=arguments[rt++])&&(tt=r$8(it))&&(at&&(at+=" "),at+=tt);return at}const clsx_m=Object.freeze(Object.defineProperty({__proto__:null,clsx:clsx$1,default:clsx$1},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(clsx_m);var t$7,r$7,u$4,i$7,o$7=0,f$5=[],c$6=[],e$8=l$7.__b,a$5=l$7.__r,v$4=l$7.diffed,l$6=l$7.__c,m$4=l$7.unmount;function d$5(it,tt){l$7.__h&&l$7.__h(r$7,it,o$7||tt),o$7=0;var rt=r$7.__H||(r$7.__H={__:[],__h:[]});return it>=rt.__.length&&rt.__.push({__V:c$6}),rt.__[it]}function h$6(it){return o$7=1,s$7(B$3,it)}function s$7(it,tt,rt){var at=d$5(t$7++,2);if(at.t=it,!at.__c&&(at.__=[rt?rt(tt):B$3(void 0,tt),function(ut){var ht=at.__N?at.__N[0]:at.__[0],mt=at.t(ht,ut);ht!==mt&&(at.__N=[mt,at.__[1]],at.__c.setState({}))}],at.__c=r$7,!r$7.u)){var st=function(ut,ht,mt){if(!at.__c.__H)return!0;var bt=at.__c.__H.__.filter(function(At){return At.__c});if(bt.every(function(At){return!At.__N}))return!ot||ot.call(this,ut,ht,mt);var vt=!1;return bt.forEach(function(At){if(At.__N){var xt=At.__[0];At.__=At.__N,At.__N=void 0,xt!==At.__[0]&&(vt=!0)}}),!(!vt&&at.__c.props===ut)&&(!ot||ot.call(this,ut,ht,mt))};r$7.u=!0;var ot=r$7.shouldComponentUpdate,lt=r$7.componentWillUpdate;r$7.componentWillUpdate=function(ut,ht,mt){if(this.__e){var bt=ot;ot=void 0,st(ut,ht,mt),ot=bt}lt&&lt.call(this,ut,ht,mt)},r$7.shouldComponentUpdate=st}return at.__N||at.__}function p$6(it,tt){var rt=d$5(t$7++,3);!l$7.__s&&z$4(rt.__H,tt)&&(rt.__=it,rt.i=tt,r$7.__H.__h.push(rt))}function y$4(it,tt){var rt=d$5(t$7++,4);!l$7.__s&&z$4(rt.__H,tt)&&(rt.__=it,rt.i=tt,r$7.__h.push(rt))}function _$5(it){return o$7=5,F$2(function(){return{current:it}},[])}function A$6(it,tt,rt){o$7=6,y$4(function(){return typeof it=="function"?(it(tt()),function(){return it(null)}):it?(it.current=tt(),function(){return it.current=null}):void 0},rt==null?rt:rt.concat(it))}function F$2(it,tt){var rt=d$5(t$7++,7);return z$4(rt.__H,tt)?(rt.__V=it(),rt.i=tt,rt.__h=it,rt.__V):rt.__}function T$4(it,tt){return o$7=8,F$2(function(){return it},tt)}function q$3(it){var tt=r$7.context[it.__c],rt=d$5(t$7++,9);return rt.c=it,tt?(rt.__==null&&(rt.__=!0,tt.sub(r$7)),tt.props.value):it.__}function x$6(it,tt){l$7.useDebugValue&&l$7.useDebugValue(tt?tt(it):it)}function P$3(it){var tt=d$5(t$7++,10),rt=h$6();return tt.__=it,r$7.componentDidCatch||(r$7.componentDidCatch=function(at,st){tt.__&&tt.__(at,st),rt[1](at)}),[rt[0],function(){rt[1](void 0)}]}function V$2(){var it=d$5(t$7++,11);if(!it.__){for(var tt=r$7.__v;tt!==null&&!tt.__m&&tt.__!==null;)tt=tt.__;var rt=tt.__m||(tt.__m=[0,0]);it.__="P"+rt[0]+"-"+rt[1]++}return it.__}function b$2(){for(var it;it=f$5.shift();)if(it.__P&&it.__H)try{it.__H.__h.forEach(k$4),it.__H.__h.forEach(w$5),it.__H.__h=[]}catch(tt){it.__H.__h=[],l$7.__e(tt,it.__v)}}l$7.__b=function(it){r$7=null,e$8&&e$8(it)},l$7.__r=function(it){a$5&&a$5(it),t$7=0;var tt=(r$7=it.__c).__H;tt&&(u$4===r$7?(tt.__h=[],r$7.__h=[],tt.__.forEach(function(rt){rt.__N&&(rt.__=rt.__N),rt.__V=c$6,rt.__N=rt.i=void 0})):(tt.__h.forEach(k$4),tt.__h.forEach(w$5),tt.__h=[])),u$4=r$7},l$7.diffed=function(it){v$4&&v$4(it);var tt=it.__c;tt&&tt.__H&&(tt.__H.__h.length&&(f$5.push(tt)!==1&&i$7===l$7.requestAnimationFrame||((i$7=l$7.requestAnimationFrame)||j$3)(b$2)),tt.__H.__.forEach(function(rt){rt.i&&(rt.__H=rt.i),rt.__V!==c$6&&(rt.__=rt.__V),rt.i=void 0,rt.__V=c$6})),u$4=r$7=null},l$7.__c=function(it,tt){tt.some(function(rt){try{rt.__h.forEach(k$4),rt.__h=rt.__h.filter(function(at){return!at.__||w$5(at)})}catch(at){tt.some(function(st){st.__h&&(st.__h=[])}),tt=[],l$7.__e(at,rt.__v)}}),l$6&&l$6(it,tt)},l$7.unmount=function(it){m$4&&m$4(it);var tt,rt=it.__c;rt&&rt.__H&&(rt.__H.__.forEach(function(at){try{k$4(at)}catch(st){tt=st}}),rt.__H=void 0,tt&&l$7.__e(tt,rt.__v))};var g$6=typeof requestAnimationFrame=="function";function j$3(it){var tt,rt=function(){clearTimeout(at),g$6&&cancelAnimationFrame(tt),setTimeout(it)},at=setTimeout(rt,100);g$6&&(tt=requestAnimationFrame(rt))}function k$4(it){var tt=r$7,rt=it.__c;typeof rt=="function"&&(it.__c=void 0,rt()),r$7=tt}function w$5(it){var tt=r$7;it.__c=it.__(),r$7=tt}function z$4(it,tt){return!it||it.length!==tt.length||tt.some(function(rt,at){return rt!==it[at]})}function B$3(it,tt){return typeof tt=="function"?tt(it):tt}const hooks_module=Object.freeze(Object.defineProperty({__proto__:null,useCallback:T$4,useContext:q$3,useDebugValue:x$6,useEffect:p$6,useErrorBoundary:P$3,useId:V$2,useImperativeHandle:A$6,useLayoutEffect:y$4,useMemo:F$2,useReducer:s$7,useRef:_$5,useState:h$6},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(hooks_module);var ConnectContent$1={},version$2={};Object.defineProperty(version$2,"__esModule",{value:!0}),version$2.LIB_VERSION=void 0,version$2.LIB_VERSION="3.6.5";var CloseIcon$2={};Object.defineProperty(CloseIcon$2,"__esModule",{value:!0}),CloseIcon$2.CloseIcon=void 0;const preact_1$b=require$$1;function CloseIcon$1(it){return(0,preact_1$b.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},it),(0,preact_1$b.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}CloseIcon$2.CloseIcon=CloseIcon$1;var coinbaseRoundSvg={};Object.defineProperty(coinbaseRoundSvg,"__esModule",{value:!0}),coinbaseRoundSvg.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMTQuMDM3IDE4LjkyNmMtMi43NSAwLTQuOTA3LTIuMjA1LTQuOTA3LTQuOTI2IDAtMi43MiAyLjIzLTQuOTI2IDQuOTA3LTQuOTI2YTQuODY2IDQuODY2IDAgMCAxIDQuODMzIDQuMTE4aDQuOTgyYy0uNDQ2LTUuMDczLTQuNjg0LTkuMDQ0LTkuODE1LTkuMDQ0QzguNjEgNC4xNDggNC4xNDkgOC41NiA0LjE0OSAxNHM0LjM4NyA5Ljg1MiA5Ljg5IDkuODUyYzUuMjA0IDAgOS4zNjgtMy45NyA5LjgxNC05LjA0M0gxOC44N2E0Ljg2NiA0Ljg2NiAwIDAgMS00LjgzMyA0LjExN1oiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";var coinbaseWalletRoundSvg={};Object.defineProperty(coinbaseWalletRoundSvg,"__esModule",{value:!0}),coinbaseWalletRoundSvg.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMjMuODUyIDE0QTkuODM0IDkuODM0IDAgMCAxIDE0IDIzLjg1MiA5LjgzNCA5LjgzNCAwIDAgMSA0LjE0OCAxNCA5LjgzNCA5LjgzNCAwIDAgMSAxNCA0LjE0OCA5LjgzNCA5LjgzNCAwIDAgMSAyMy44NTIgMTRaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTExLjE4NSAxMi41MDRjMC0uNDU2IDAtLjcxLjA5OC0uODYyLjA5OC0uMTUyLjE5Ni0uMzA0LjM0My0uMzU1LjE5Ni0uMTAyLjM5Mi0uMTAyLjg4MS0uMTAyaDIuOTg2Yy40OSAwIC42ODYgMCAuODgyLjEwMi4xNDYuMTAxLjI5My4yMDMuMzQyLjM1NS4wOTguMjAzLjA5OC40MDYuMDk4Ljg2MnYyLjk5MmMwIC40NTcgMCAuNzEtLjA5OC44NjMtLjA5OC4xNTItLjE5NS4zMDQtLjM0Mi4zNTUtLjE5Ni4xMDEtLjM5Mi4xMDEtLjg4Mi4xMDFoLTIuOTg2Yy0uNDkgMC0uNjg1IDAtLjg4LS4xMDEtLjE0OC0uMTAyLS4yOTUtLjIwMy0uMzQ0LS4zNTUtLjA5OC0uMjAzLS4wOTgtLjQwNi0uMDk4LS44NjN2LTIuOTkyWiIgZmlsbD0iIzAwNTJGRiIvPjwvc3ZnPg==";var QRCodeIcon$1={};Object.defineProperty(QRCodeIcon$1,"__esModule",{value:!0}),QRCodeIcon$1.QRCodeIcon=void 0;const preact_1$a=require$$1;function QRCodeIcon(it){return(0,preact_1$a.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},it),(0,preact_1$a.h)("path",{d:"M8.2271 1.77124L7.0271 1.77124V2.97124H8.2271V1.77124Z"}),(0,preact_1$a.h)("path",{d:"M5.44922 0.199219L5.44922 4.54922L9.79922 4.54922V0.199219L5.44922 0.199219ZM8.89922 3.64922L6.34922 3.64922L6.34922 1.09922L8.89922 1.09922V3.64922Z"}),(0,preact_1$a.h)("path",{d:"M2.97124 1.77124L1.77124 1.77124L1.77124 2.97124H2.97124V1.77124Z"}),(0,preact_1$a.h)("path",{d:"M0.199219 4.54922L4.54922 4.54922L4.54922 0.199219L0.199219 0.199219L0.199219 4.54922ZM1.09922 1.09922L3.64922 1.09922L3.64922 3.64922L1.09922 3.64922L1.09922 1.09922Z"}),(0,preact_1$a.h)("path",{d:"M2.97124 7.0271H1.77124L1.77124 8.2271H2.97124V7.0271Z"}),(0,preact_1$a.h)("path",{d:"M0.199219 9.79922H4.54922L4.54922 5.44922L0.199219 5.44922L0.199219 9.79922ZM1.09922 6.34922L3.64922 6.34922L3.64922 8.89922H1.09922L1.09922 6.34922Z"}),(0,preact_1$a.h)("path",{d:"M8.89922 7.39912H7.99922V5.40112H5.44922L5.44922 9.79912H6.34922L6.34922 6.30112H7.09922V8.29912H9.79922V5.40112H8.89922V7.39912Z"}),(0,preact_1$a.h)("path",{d:"M7.99912 8.89917H7.09912V9.79917H7.99912V8.89917Z"}),(0,preact_1$a.h)("path",{d:"M9.79917 8.89917H8.89917V9.79917H9.79917V8.89917Z"}))}QRCodeIcon$1.QRCodeIcon=QRCodeIcon;var QRLogoCoinbase={};Object.defineProperty(QRLogoCoinbase,"__esModule",{value:!0});const svg=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" fill="white"/>
        <path d="M50.512 94C74.2907 94 93.5673 74.5244 93.5673 50.5C93.5673 26.4756 74.2907 7 50.512 7C26.7332 7 7.45667 26.4756 7.45667 50.5C7.45667 74.5244 26.7332 94 50.512 94Z" fill="#0052FF"/>
        <path d="M50.6248 65.4335C42.3697 65.4335 35.8996 58.7469 35.8996 50.5C35.8996 42.2531 42.5928 35.5664 50.6248 35.5664C57.9873 35.5664 64.0111 40.9157 65.1267 48.0481H80.0749C78.7363 32.6688 66.0191 20.6328 50.6248 20.6328C34.3379 20.6328 20.9514 34.0062 20.9514 50.5C20.9514 66.9936 34.1148 80.3671 50.6248 80.3671C66.2422 80.3671 78.7363 68.331 80.0749 52.9516H65.1267C64.0111 60.0841 57.9873 65.4335 50.6248 65.4335Z" fill="white"/>
    </svg>
`;QRLogoCoinbase.default=svg;var QRLogoWallet={};Object.defineProperty(QRLogoWallet,"__esModule",{value:!0}),QRLogoWallet.default=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="50" fill="white"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" fill="#1B53E4"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" stroke="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.3379 49.9484C19.3379 66.8508 33.04 80.553 49.9425 80.553C66.8449 80.553 80.5471 66.8508 80.5471 49.9484C80.5471 33.0459 66.8449 19.3438 49.9425 19.3438C33.04 19.3438 19.3379 33.0459 19.3379 49.9484ZM44.0817 40.0799C41.8725 40.0799 40.0817 41.8708 40.0817 44.0799V55.8029C40.0817 58.012 41.8725 59.8029 44.0817 59.8029H55.8046C58.0138 59.8029 59.8046 58.012 59.8046 55.8029V44.0799C59.8046 41.8708 58.0138 40.0799 55.8046 40.0799H44.0817Z" fill="white"/>
    </svg>
`;var StatusDotIcon$1={};Object.defineProperty(StatusDotIcon$1,"__esModule",{value:!0}),StatusDotIcon$1.StatusDotIcon=void 0;const preact_1$9=require$$1;function StatusDotIcon(it){return(0,preact_1$9.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},it),(0,preact_1$9.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.29995 4.99995C2.29995 5.57985 1.82985 6.04995 1.24995 6.04995C0.670052 6.04995 0.199951 5.57985 0.199951 4.99995C0.199951 4.42005 0.670052 3.94995 1.24995 3.94995C1.82985 3.94995 2.29995 4.42005 2.29995 4.99995ZM4.99995 6.04995C5.57985 6.04995 6.04995 5.57985 6.04995 4.99995C6.04995 4.42005 5.57985 3.94995 4.99995 3.94995C4.42005 3.94995 3.94995 4.42005 3.94995 4.99995C3.94995 5.57985 4.42005 6.04995 4.99995 6.04995ZM8.74995 6.04995C9.32985 6.04995 9.79995 5.57985 9.79995 4.99995C9.79995 4.42005 9.32985 3.94995 8.74995 3.94995C8.17005 3.94995 7.69995 4.42005 7.69995 4.99995C7.69995 5.57985 8.17005 6.04995 8.74995 6.04995Z"}))}StatusDotIcon$1.StatusDotIcon=StatusDotIcon;var QRCode$4={};function QR8bitByte(it){this.mode=QRMode.MODE_8BIT_BYTE,this.data=it,this.parsedData=[];for(var tt=0,rt=this.data.length;tt<rt;tt++){var at=[],st=this.data.charCodeAt(tt);st>65536?(at[0]=240|(st&1835008)>>>18,at[1]=128|(st&258048)>>>12,at[2]=128|(st&4032)>>>6,at[3]=128|st&63):st>2048?(at[0]=224|(st&61440)>>>12,at[1]=128|(st&4032)>>>6,at[2]=128|st&63):st>128?(at[0]=192|(st&1984)>>>6,at[1]=128|st&63):at[0]=st,this.parsedData.push(at)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}QR8bitByte.prototype={getLength:function(it){return this.parsedData.length},write:function(it){for(var tt=0,rt=this.parsedData.length;tt<rt;tt++)it.put(this.parsedData[tt],8)}};function QRCodeModel(it,tt){this.typeNumber=it,this.errorCorrectLevel=tt,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}QRCodeModel.prototype={addData:function(it){var tt=new QR8bitByte(it);this.dataList.push(tt),this.dataCache=null},isDark:function(it,tt){if(it<0||this.moduleCount<=it||tt<0||this.moduleCount<=tt)throw new Error(it+","+tt);return this.modules[it][tt]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(it,tt){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var rt=0;rt<this.moduleCount;rt++){this.modules[rt]=new Array(this.moduleCount);for(var at=0;at<this.moduleCount;at++)this.modules[rt][at]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(it,tt),this.typeNumber>=7&&this.setupTypeNumber(it),this.dataCache==null&&(this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,tt)},setupPositionProbePattern:function(it,tt){for(var rt=-1;rt<=7;rt++)if(!(it+rt<=-1||this.moduleCount<=it+rt))for(var at=-1;at<=7;at++)tt+at<=-1||this.moduleCount<=tt+at||(0<=rt&&rt<=6&&(at==0||at==6)||0<=at&&at<=6&&(rt==0||rt==6)||2<=rt&&rt<=4&&2<=at&&at<=4?this.modules[it+rt][tt+at]=!0:this.modules[it+rt][tt+at]=!1)},getBestMaskPattern:function(){for(var it=0,tt=0,rt=0;rt<8;rt++){this.makeImpl(!0,rt);var at=QRUtil.getLostPoint(this);(rt==0||it>at)&&(it=at,tt=rt)}return tt},createMovieClip:function(it,tt,rt){var at=it.createEmptyMovieClip(tt,rt),st=1;this.make();for(var ot=0;ot<this.modules.length;ot++)for(var lt=ot*st,ut=0;ut<this.modules[ot].length;ut++){var ht=ut*st,mt=this.modules[ot][ut];mt&&(at.beginFill(0,100),at.moveTo(ht,lt),at.lineTo(ht+st,lt),at.lineTo(ht+st,lt+st),at.lineTo(ht,lt+st),at.endFill())}return at},setupTimingPattern:function(){for(var it=8;it<this.moduleCount-8;it++)this.modules[it][6]==null&&(this.modules[it][6]=it%2==0);for(var tt=8;tt<this.moduleCount-8;tt++)this.modules[6][tt]==null&&(this.modules[6][tt]=tt%2==0)},setupPositionAdjustPattern:function(){for(var it=QRUtil.getPatternPosition(this.typeNumber),tt=0;tt<it.length;tt++)for(var rt=0;rt<it.length;rt++){var at=it[tt],st=it[rt];if(this.modules[at][st]==null)for(var ot=-2;ot<=2;ot++)for(var lt=-2;lt<=2;lt++)ot==-2||ot==2||lt==-2||lt==2||ot==0&&lt==0?this.modules[at+ot][st+lt]=!0:this.modules[at+ot][st+lt]=!1}},setupTypeNumber:function(it){for(var tt=QRUtil.getBCHTypeNumber(this.typeNumber),rt=0;rt<18;rt++){var at=!it&&(tt>>rt&1)==1;this.modules[Math.floor(rt/3)][rt%3+this.moduleCount-8-3]=at}for(var rt=0;rt<18;rt++){var at=!it&&(tt>>rt&1)==1;this.modules[rt%3+this.moduleCount-8-3][Math.floor(rt/3)]=at}},setupTypeInfo:function(it,tt){for(var rt=this.errorCorrectLevel<<3|tt,at=QRUtil.getBCHTypeInfo(rt),st=0;st<15;st++){var ot=!it&&(at>>st&1)==1;st<6?this.modules[st][8]=ot:st<8?this.modules[st+1][8]=ot:this.modules[this.moduleCount-15+st][8]=ot}for(var st=0;st<15;st++){var ot=!it&&(at>>st&1)==1;st<8?this.modules[8][this.moduleCount-st-1]=ot:st<9?this.modules[8][15-st-1+1]=ot:this.modules[8][15-st-1]=ot}this.modules[this.moduleCount-8][8]=!it},mapData:function(it,tt){for(var rt=-1,at=this.moduleCount-1,st=7,ot=0,lt=this.moduleCount-1;lt>0;lt-=2)for(lt==6&&lt--;;){for(var ut=0;ut<2;ut++)if(this.modules[at][lt-ut]==null){var ht=!1;ot<it.length&&(ht=(it[ot]>>>st&1)==1);var mt=QRUtil.getMask(tt,at,lt-ut);mt&&(ht=!ht),this.modules[at][lt-ut]=ht,st--,st==-1&&(ot++,st=7)}if(at+=rt,at<0||this.moduleCount<=at){at-=rt,rt=-rt;break}}}},QRCodeModel.PAD0=236,QRCodeModel.PAD1=17,QRCodeModel.createData=function(it,tt,rt){for(var at=QRRSBlock.getRSBlocks(it,tt),st=new QRBitBuffer,ot=0;ot<rt.length;ot++){var lt=rt[ot];st.put(lt.mode,4),st.put(lt.getLength(),QRUtil.getLengthInBits(lt.mode,it)),lt.write(st)}for(var ut=0,ot=0;ot<at.length;ot++)ut+=at[ot].dataCount;if(st.getLengthInBits()>ut*8)throw new Error("code length overflow. ("+st.getLengthInBits()+">"+ut*8+")");for(st.getLengthInBits()+4<=ut*8&&st.put(0,4);st.getLengthInBits()%8!=0;)st.putBit(!1);for(;!(st.getLengthInBits()>=ut*8||(st.put(QRCodeModel.PAD0,8),st.getLengthInBits()>=ut*8));)st.put(QRCodeModel.PAD1,8);return QRCodeModel.createBytes(st,at)},QRCodeModel.createBytes=function(it,tt){for(var rt=0,at=0,st=0,ot=new Array(tt.length),lt=new Array(tt.length),ut=0;ut<tt.length;ut++){var ht=tt[ut].dataCount,mt=tt[ut].totalCount-ht;at=Math.max(at,ht),st=Math.max(st,mt),ot[ut]=new Array(ht);for(var bt=0;bt<ot[ut].length;bt++)ot[ut][bt]=255&it.buffer[bt+rt];rt+=ht;var vt=QRUtil.getErrorCorrectPolynomial(mt),At=new QRPolynomial(ot[ut],vt.getLength()-1),xt=At.mod(vt);lt[ut]=new Array(vt.getLength()-1);for(var bt=0;bt<lt[ut].length;bt++){var Et=bt+xt.getLength()-lt[ut].length;lt[ut][bt]=Et>=0?xt.get(Et):0}}for(var Tt=0,bt=0;bt<tt.length;bt++)Tt+=tt[bt].totalCount;for(var wt=new Array(Tt),Ct=0,bt=0;bt<at;bt++)for(var ut=0;ut<tt.length;ut++)bt<ot[ut].length&&(wt[Ct++]=ot[ut][bt]);for(var bt=0;bt<st;bt++)for(var ut=0;ut<tt.length;ut++)bt<lt[ut].length&&(wt[Ct++]=lt[ut][bt]);return wt};for(var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G18:1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,G15_MASK:1<<14|1<<12|1<<10|1<<4|1<<1,getBCHTypeInfo:function(it){for(var tt=it<<10;QRUtil.getBCHDigit(tt)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)tt^=QRUtil.G15<<QRUtil.getBCHDigit(tt)-QRUtil.getBCHDigit(QRUtil.G15);return(it<<10|tt)^QRUtil.G15_MASK},getBCHTypeNumber:function(it){for(var tt=it<<12;QRUtil.getBCHDigit(tt)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)tt^=QRUtil.G18<<QRUtil.getBCHDigit(tt)-QRUtil.getBCHDigit(QRUtil.G18);return it<<12|tt},getBCHDigit:function(it){for(var tt=0;it!=0;)tt++,it>>>=1;return tt},getPatternPosition:function(it){return QRUtil.PATTERN_POSITION_TABLE[it-1]},getMask:function(it,tt,rt){switch(it){case QRMaskPattern.PATTERN000:return(tt+rt)%2==0;case QRMaskPattern.PATTERN001:return tt%2==0;case QRMaskPattern.PATTERN010:return rt%3==0;case QRMaskPattern.PATTERN011:return(tt+rt)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(tt/2)+Math.floor(rt/3))%2==0;case QRMaskPattern.PATTERN101:return tt*rt%2+tt*rt%3==0;case QRMaskPattern.PATTERN110:return(tt*rt%2+tt*rt%3)%2==0;case QRMaskPattern.PATTERN111:return(tt*rt%3+(tt+rt)%2)%2==0;default:throw new Error("bad maskPattern:"+it)}},getErrorCorrectPolynomial:function(it){for(var tt=new QRPolynomial([1],0),rt=0;rt<it;rt++)tt=tt.multiply(new QRPolynomial([1,QRMath.gexp(rt)],0));return tt},getLengthInBits:function(it,tt){if(1<=tt&&tt<10)switch(it){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+it)}else if(tt<27)switch(it){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+it)}else if(tt<41)switch(it){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+it)}else throw new Error("type:"+tt)},getLostPoint:function(it){for(var tt=it.getModuleCount(),rt=0,at=0;at<tt;at++)for(var st=0;st<tt;st++){for(var ot=0,lt=it.isDark(at,st),ut=-1;ut<=1;ut++)if(!(at+ut<0||tt<=at+ut))for(var ht=-1;ht<=1;ht++)st+ht<0||tt<=st+ht||ut==0&&ht==0||lt==it.isDark(at+ut,st+ht)&&ot++;ot>5&&(rt+=3+ot-5)}for(var at=0;at<tt-1;at++)for(var st=0;st<tt-1;st++){var mt=0;it.isDark(at,st)&&mt++,it.isDark(at+1,st)&&mt++,it.isDark(at,st+1)&&mt++,it.isDark(at+1,st+1)&&mt++,(mt==0||mt==4)&&(rt+=3)}for(var at=0;at<tt;at++)for(var st=0;st<tt-6;st++)it.isDark(at,st)&&!it.isDark(at,st+1)&&it.isDark(at,st+2)&&it.isDark(at,st+3)&&it.isDark(at,st+4)&&!it.isDark(at,st+5)&&it.isDark(at,st+6)&&(rt+=40);for(var st=0;st<tt;st++)for(var at=0;at<tt-6;at++)it.isDark(at,st)&&!it.isDark(at+1,st)&&it.isDark(at+2,st)&&it.isDark(at+3,st)&&it.isDark(at+4,st)&&!it.isDark(at+5,st)&&it.isDark(at+6,st)&&(rt+=40);for(var bt=0,st=0;st<tt;st++)for(var at=0;at<tt;at++)it.isDark(at,st)&&bt++;var vt=Math.abs(100*bt/tt/tt-50)/5;return rt+=vt*10,rt}},QRMath={glog:function(it){if(it<1)throw new Error("glog("+it+")");return QRMath.LOG_TABLE[it]},gexp:function(it){for(;it<0;)it+=255;for(;it>=256;)it-=255;return QRMath.EXP_TABLE[it]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i$6=0;i$6<8;i$6++)QRMath.EXP_TABLE[i$6]=1<<i$6;for(var i$6=8;i$6<256;i$6++)QRMath.EXP_TABLE[i$6]=QRMath.EXP_TABLE[i$6-4]^QRMath.EXP_TABLE[i$6-5]^QRMath.EXP_TABLE[i$6-6]^QRMath.EXP_TABLE[i$6-8];for(var i$6=0;i$6<255;i$6++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i$6]]=i$6;function QRPolynomial(it,tt){if(it.length==null)throw new Error(it.length+"/"+tt);for(var rt=0;rt<it.length&&it[rt]==0;)rt++;this.num=new Array(it.length-rt+tt);for(var at=0;at<it.length-rt;at++)this.num[at]=it[at+rt]}QRPolynomial.prototype={get:function(it){return this.num[it]},getLength:function(){return this.num.length},multiply:function(it){for(var tt=new Array(this.getLength()+it.getLength()-1),rt=0;rt<this.getLength();rt++)for(var at=0;at<it.getLength();at++)tt[rt+at]^=QRMath.gexp(QRMath.glog(this.get(rt))+QRMath.glog(it.get(at)));return new QRPolynomial(tt,0)},mod:function(it){if(this.getLength()-it.getLength()<0)return this;for(var tt=QRMath.glog(this.get(0))-QRMath.glog(it.get(0)),rt=new Array(this.getLength()),at=0;at<this.getLength();at++)rt[at]=this.get(at);for(var at=0;at<it.getLength();at++)rt[at]^=QRMath.gexp(QRMath.glog(it.get(at))+tt);return new QRPolynomial(rt,0).mod(it)}};function QRRSBlock(it,tt){this.totalCount=it,this.dataCount=tt}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(it,tt){var rt=QRRSBlock.getRsBlockTable(it,tt);if(rt==null)throw new Error("bad rs block @ typeNumber:"+it+"/errorCorrectLevel:"+tt);for(var at=rt.length/3,st=[],ot=0;ot<at;ot++)for(var lt=rt[ot*3+0],ut=rt[ot*3+1],ht=rt[ot*3+2],mt=0;mt<lt;mt++)st.push(new QRRSBlock(ut,ht));return st},QRRSBlock.getRsBlockTable=function(it,tt){switch(tt){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(it-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(it-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(it-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(it-1)*4+3];default:return}};function QRBitBuffer(){this.buffer=[],this.length=0}QRBitBuffer.prototype={get:function(it){var tt=Math.floor(it/8);return(this.buffer[tt]>>>7-it%8&1)==1},put:function(it,tt){for(var rt=0;rt<tt;rt++)this.putBit((it>>>tt-rt-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(it){var tt=Math.floor(this.length/8);this.buffer.length<=tt&&this.buffer.push(0),it&&(this.buffer[tt]|=128>>>this.length%8),this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function QRCode$3(it){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof it=="string"&&(it={content:it}),it)for(var tt in it)this.options[tt]=it[tt];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function rt(ht){switch(ht){case"L":return QRErrorCorrectLevel.L;case"M":return QRErrorCorrectLevel.M;case"Q":return QRErrorCorrectLevel.Q;case"H":return QRErrorCorrectLevel.H;default:throw new Error("Unknwon error correction level: "+ht)}}function at(ht,mt){for(var bt=st(ht),vt=1,At=0,xt=0,Et=QRCodeLimitLength.length;xt<=Et;xt++){var Tt=QRCodeLimitLength[xt];if(!Tt)throw new Error("Content too long: expected "+At+" but got "+bt);switch(mt){case"L":At=Tt[0];break;case"M":At=Tt[1];break;case"Q":At=Tt[2];break;case"H":At=Tt[3];break;default:throw new Error("Unknwon error correction level: "+mt)}if(bt<=At)break;vt++}if(vt>QRCodeLimitLength.length)throw new Error("Content too long");return vt}function st(ht){var mt=encodeURI(ht).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return mt.length+(mt.length!=ht?3:0)}var ot=this.options.content,lt=at(ot,this.options.ecl),ut=rt(this.options.ecl);this.qrcode=new QRCodeModel(lt,ut),this.qrcode.addData(ot),this.qrcode.make()}QRCode$3.prototype.svg=function(it){var tt=this.options||{},rt=this.qrcode.modules;typeof it>"u"&&(it={container:tt.container||"svg"});for(var at=typeof tt.pretty<"u"?!!tt.pretty:!0,st=at?"  ":"",ot=at?`\r
`:"",lt=tt.width,ut=tt.height,ht=rt.length,mt=lt/(ht+2*tt.padding),bt=ut/(ht+2*tt.padding),vt=typeof tt.join<"u"?!!tt.join:!1,At=typeof tt.swap<"u"?!!tt.swap:!1,xt=typeof tt.xmlDeclaration<"u"?!!tt.xmlDeclaration:!0,Et=typeof tt.predefined<"u"?!!tt.predefined:!1,Tt=Et?st+'<defs><path id="qrmodule" d="M0 0 h'+bt+" v"+mt+' H0 z" style="fill:'+tt.color+';shape-rendering:crispEdges;" /></defs>'+ot:"",wt=st+'<rect x="0" y="0" width="'+lt+'" height="'+ut+'" style="fill:'+tt.background+';shape-rendering:crispEdges;"/>'+ot,Ct="",It="",St=0;St<ht;St++)for(var Rt=0;Rt<ht;Rt++){var Dt=rt[Rt][St];if(Dt){var Wt=Rt*mt+tt.padding*mt,qt=St*bt+tt.padding*bt;if(At){var Vt=Wt;Wt=qt,qt=Vt}if(vt){var Yt=mt+Wt,jt=bt+qt;Wt=Number.isInteger(Wt)?Number(Wt):Wt.toFixed(2),qt=Number.isInteger(qt)?Number(qt):qt.toFixed(2),Yt=Number.isInteger(Yt)?Number(Yt):Yt.toFixed(2),jt=Number.isInteger(jt)?Number(jt):jt.toFixed(2),It+="M"+Wt+","+qt+" V"+jt+" H"+Yt+" V"+qt+" H"+Wt+" Z "}else Et?Ct+=st+'<use x="'+Wt.toString()+'" y="'+qt.toString()+'" href="#qrmodule" />'+ot:Ct+=st+'<rect x="'+Wt.toString()+'" y="'+qt.toString()+'" width="'+mt+'" height="'+bt+'" style="fill:'+tt.color+';shape-rendering:crispEdges;"/>'+ot}}vt&&(Ct=st+'<path x="0" y="0" style="fill:'+tt.color+';shape-rendering:crispEdges;" d="'+It+'" />');let kt="";if(this.options.image!==void 0&&this.options.image.svg){const Nt=lt*this.options.image.width/100,Mt=ut*this.options.image.height/100,Lt=lt/2-Nt/2,Ht=ut/2-Mt/2;kt+=`<svg x="${Lt}" y="${Ht}" width="${Nt}" height="${Mt}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,kt+=this.options.image.svg+ot,kt+="</svg>"}var zt="";switch(it.container){case"svg":xt&&(zt+='<?xml version="1.0" standalone="yes"?>'+ot),zt+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+lt+'" height="'+ut+'">'+ot,zt+=Tt+wt+Ct,zt+=kt,zt+="</svg>";break;case"svg-viewbox":xt&&(zt+='<?xml version="1.0" standalone="yes"?>'+ot),zt+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+lt+" "+ut+'">'+ot,zt+=Tt+wt+Ct,zt+=kt,zt+="</svg>";break;case"g":zt+='<g width="'+lt+'" height="'+ut+'">'+ot,zt+=Tt+wt+Ct,zt+=kt,zt+="</g>";break;default:zt+=(Tt+wt+Ct+kt).replace(/^\s+/,"");break}return zt};var qrcodeSvg=QRCode$3,__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(QRCode$4,"__esModule",{value:!0}),QRCode$4.QRCode=void 0;const preact_1$8=require$$1,hooks_1$3=require$$2,qrcode_svg_1=__importDefault$6(qrcodeSvg),QRCode$2=it=>{const[tt,rt]=(0,hooks_1$3.useState)("");return(0,hooks_1$3.useEffect)(()=>{var at,st;const ot=new qrcode_svg_1.default({content:it.content,background:it.bgColor||"#ffffff",color:it.fgColor||"#000000",container:"svg",ecl:"M",width:(at=it.width)!==null&&at!==void 0?at:256,height:(st=it.height)!==null&&st!==void 0?st:256,padding:0,image:it.image}),lt=Buffer.from(ot.svg(),"utf8").toString("base64");rt(`data:image/svg+xml;base64,${lt}`)}),tt?(0,preact_1$8.h)("img",{src:tt,alt:"QR Code"}):null};QRCode$4.QRCode=QRCode$2;var Spinner$2={},SpinnerCss={};Object.defineProperty(SpinnerCss,"__esModule",{value:!0}),SpinnerCss.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(Spinner$2,"__esModule",{value:!0}),Spinner$2.Spinner=void 0;const preact_1$7=require$$1,Spinner_css_1=__importDefault$5(SpinnerCss),Spinner$1=it=>{var tt;const rt=(tt=it.size)!==null&&tt!==void 0?tt:64,at=it.color||"#000";return(0,preact_1$7.h)("div",{class:"-cbwsdk-spinner"},(0,preact_1$7.h)("style",null,Spinner_css_1.default),(0,preact_1$7.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:rt,height:rt}},(0,preact_1$7.h)("circle",{style:{cx:50,cy:50,r:45,stroke:at}})))};Spinner$2.Spinner=Spinner$1;var ConnectContentCss={};Object.defineProperty(ConnectContentCss,"__esModule",{value:!0}),ConnectContentCss.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-item.light.selected{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark.selected{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item.selected{border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(ConnectContent$1,"__esModule",{value:!0}),ConnectContent$1.CoinbaseAppSteps=ConnectContent$1.CoinbaseWalletSteps=ConnectContent$1.ConnectItem=ConnectContent$1.ConnectContent=void 0;const clsx_1$2=__importDefault$4(require$$0$2),preact_1$6=require$$1,hooks_1$2=require$$2,util_1$4=util$5,version_1=version$2,CloseIcon_1=CloseIcon$2,coinbase_round_svg_1=__importDefault$4(coinbaseRoundSvg),coinbase_wallet_round_svg_1=__importDefault$4(coinbaseWalletRoundSvg),QRCodeIcon_1=QRCodeIcon$1,QRLogoCoinbase_1=__importDefault$4(QRLogoCoinbase),QRLogoWallet_1=__importDefault$4(QRLogoWallet),StatusDotIcon_1=StatusDotIcon$1,QRCode_1=QRCode$4,Spinner_1=Spinner$2,ConnectContent_css_1=__importDefault$4(ConnectContentCss),wallets={"coinbase-wallet-app":{title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",icon:coinbase_wallet_round_svg_1.default,steps:CoinbaseWalletSteps},"coinbase-app":{title:"Coinbase app",description:"Connect with your Coinbase account",icon:coinbase_round_svg_1.default,steps:CoinbaseAppSteps}},makeQrCodeImage=it=>{switch(it){case"coinbase-app":return QRLogoCoinbase_1.default;case"coinbase-wallet-app":default:return QRLogoWallet_1.default}},makeIconColor=it=>it==="light"?"#FFFFFF":"#0A0B0D";function ConnectContent(it){const{theme:tt}=it,[rt,at]=(0,hooks_1$2.useState)("coinbase-wallet-app"),st=(0,hooks_1$2.useCallback)(mt=>{at(mt)},[]),ot=(0,util_1$4.createQrUrl)(it.sessionId,it.sessionSecret,it.linkAPIUrl,it.isParentConnection,it.version,it.chainId),lt=wallets[rt];if(!rt)return null;const ut=lt.steps,ht=rt==="coinbase-app";return(0,preact_1$6.h)("div",{"data-testid":"connect-content",class:(0,clsx_1$2.default)("-cbwsdk-connect-content",tt)},(0,preact_1$6.h)("style",null,ConnectContent_css_1.default),(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-header"},(0,preact_1$6.h)("h2",{class:(0,clsx_1$2.default)("-cbwsdk-connect-content-heading",tt)},"Scan to connect with one of our mobile apps"),it.onCancel&&(0,preact_1$6.h)("button",{type:"button",class:"-cbwsdk-cancel-button",onClick:it.onCancel},(0,preact_1$6.h)(CloseIcon_1.CloseIcon,{fill:tt==="light"?"#0A0B0D":"#FFFFFF"}))),(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-layout"},(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-column-left"},(0,preact_1$6.h)("div",null,Object.entries(wallets).map(([mt,bt])=>(0,preact_1$6.h)(ConnectItem,{key:mt,title:bt.title,description:bt.description,icon:bt.icon,selected:rt===mt,onClick:()=>st(mt),theme:tt}))),ht&&(0,preact_1$6.h)("div",{class:(0,clsx_1$2.default)("-cbwsdk-connect-content-update-app",tt)},"Don\u2019t see a ",(0,preact_1$6.h)("strong",null,"Scan")," option? Update your Coinbase app to the latest version and try again.")),(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-column-right"},(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-content-qr-wrapper"},(0,preact_1$6.h)(QRCode_1.QRCode,{content:ot,width:200,height:200,fgColor:"#000",bgColor:"transparent",image:{svg:makeQrCodeImage(rt),width:25,height:25}}),(0,preact_1$6.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:version_1.LIB_VERSION}),(0,preact_1$6.h)("input",{type:"hidden",value:ot})),(0,preact_1$6.h)(ut,{theme:tt}),!it.isConnected&&(0,preact_1$6.h)("div",{"data-testid":"connecting-spinner",class:(0,clsx_1$2.default)("-cbwsdk-connect-content-qr-connecting",tt)},(0,preact_1$6.h)(Spinner_1.Spinner,{size:36,color:tt==="dark"?"#FFF":"#000"}),(0,preact_1$6.h)("p",null,"Connecting...")))))}ConnectContent$1.ConnectContent=ConnectContent;function ConnectItem({title:it,description:tt,icon:rt,selected:at,theme:st,onClick:ot}){return(0,preact_1$6.h)("div",{onClick:ot,class:(0,clsx_1$2.default)("-cbwsdk-connect-item",st,{selected:at})},(0,preact_1$6.h)("div",null,(0,preact_1$6.h)("img",{src:rt,alt:it})),(0,preact_1$6.h)("div",{class:"-cbwsdk-connect-item-copy-wrapper"},(0,preact_1$6.h)("h3",{class:"-cbwsdk-connect-item-title"},it),(0,preact_1$6.h)("p",{class:"-cbwsdk-connect-item-description"},tt)))}ConnectContent$1.ConnectItem=ConnectItem;function CoinbaseWalletSteps({theme:it}){return(0,preact_1$6.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,preact_1$6.h)("li",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-item",it)},(0,preact_1$6.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,preact_1$6.h)("li",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-item",it)},(0,preact_1$6.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,preact_1$6.h)("span",null,"Tap ",(0,preact_1$6.h)("strong",null,"Scan")," "),(0,preact_1$6.h)("span",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",it)},(0,preact_1$6.h)(QRCodeIcon_1.QRCodeIcon,{fill:makeIconColor(it)})))))}ConnectContent$1.CoinbaseWalletSteps=CoinbaseWalletSteps;function CoinbaseAppSteps({theme:it}){return(0,preact_1$6.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,preact_1$6.h)("li",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-item",it)},(0,preact_1$6.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase app")),(0,preact_1$6.h)("li",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-item",it)},(0,preact_1$6.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,preact_1$6.h)("span",null,"Tap ",(0,preact_1$6.h)("strong",null,"More")),(0,preact_1$6.h)("span",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",it)},(0,preact_1$6.h)(StatusDotIcon_1.StatusDotIcon,{fill:makeIconColor(it)})),(0,preact_1$6.h)("span",{class:"-cbwsdk-wallet-steps-pad-left"},"then ",(0,preact_1$6.h)("strong",null,"Scan")),(0,preact_1$6.h)("span",{class:(0,clsx_1$2.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",it)},(0,preact_1$6.h)(QRCodeIcon_1.QRCodeIcon,{fill:makeIconColor(it)})))))}ConnectContent$1.CoinbaseAppSteps=CoinbaseAppSteps;var TryExtensionContent$1={},ArrowLeftIcon$1={};Object.defineProperty(ArrowLeftIcon$1,"__esModule",{value:!0}),ArrowLeftIcon$1.ArrowLeftIcon=void 0;const preact_1$5=require$$1;function ArrowLeftIcon(it){return(0,preact_1$5.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},it),(0,preact_1$5.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}ArrowLeftIcon$1.ArrowLeftIcon=ArrowLeftIcon;var LaptopIcon$1={};Object.defineProperty(LaptopIcon$1,"__esModule",{value:!0}),LaptopIcon$1.LaptopIcon=void 0;const preact_1$4=require$$1;function LaptopIcon(it){return(0,preact_1$4.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},it),(0,preact_1$4.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,preact_1$4.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}LaptopIcon$1.LaptopIcon=LaptopIcon;var SafeIcon$1={};Object.defineProperty(SafeIcon$1,"__esModule",{value:!0}),SafeIcon$1.SafeIcon=void 0;const preact_1$3=require$$1;function SafeIcon(it){return(0,preact_1$3.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},it),(0,preact_1$3.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}SafeIcon$1.SafeIcon=SafeIcon;var TryExtensionContentCss={};Object.defineProperty(TryExtensionContentCss,"__esModule",{value:!0}),TryExtensionContentCss.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(TryExtensionContent$1,"__esModule",{value:!0}),TryExtensionContent$1.TryExtensionContent=void 0;const clsx_1$1=__importDefault$3(require$$0$2),preact_1$2=require$$1,hooks_1$1=require$$2,ArrowLeftIcon_1=ArrowLeftIcon$1,LaptopIcon_1=LaptopIcon$1,SafeIcon_1=SafeIcon$1,TryExtensionContent_css_1=__importDefault$3(TryExtensionContentCss);function TryExtensionContent({theme:it}){const[tt,rt]=(0,hooks_1$1.useState)(!1),at=(0,hooks_1$1.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),st=(0,hooks_1$1.useCallback)(()=>{tt?window.location.reload():(at(),rt(!0))},[at,tt]);return(0,preact_1$2.h)("div",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension",it)},(0,preact_1$2.h)("style",null,TryExtensionContent_css_1.default),(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,preact_1$2.h)("h3",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-heading",it)},"Or try the Coinbase Wallet browser extension"),(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,preact_1$2.h)("button",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-cta",it),onClick:st},tt?"Refresh":"Install"),(0,preact_1$2.h)("div",null,!tt&&(0,preact_1$2.h)(ArrowLeftIcon_1.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:it==="light"?"#0052FF":"#588AF5"})))),(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,preact_1$2.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,preact_1$2.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,preact_1$2.h)("span",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-list-item-icon",it)},(0,preact_1$2.h)(LaptopIcon_1.LaptopIcon,{fill:it==="light"?"#0A0B0D":"#FFFFFF"}))),(0,preact_1$2.h)("div",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-list-item-copy",it)},"Connect with dapps with just one click on your desktop browser")),(0,preact_1$2.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,preact_1$2.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,preact_1$2.h)("span",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-list-item-icon",it)},(0,preact_1$2.h)(SafeIcon_1.SafeIcon,{fill:it==="light"?"#0A0B0D":"#FFFFFF"}))),(0,preact_1$2.h)("div",{class:(0,clsx_1$1.default)("-cbwsdk-try-extension-list-item-copy",it)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}TryExtensionContent$1.TryExtensionContent=TryExtensionContent;var ConnectDialogCss={};Object.defineProperty(ConnectDialogCss,"__esModule",{value:!0}),ConnectDialogCss.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(ConnectDialog$1,"__esModule",{value:!0}),ConnectDialog$1.ConnectDialog=void 0;const clsx_1=__importDefault$2(require$$0$2),preact_1$1=require$$1,hooks_1=require$$2,ConnectContent_1=ConnectContent$1,TryExtensionContent_1=TryExtensionContent$1,ConnectDialog_css_1=__importDefault$2(ConnectDialogCss),ConnectDialog=it=>{const{isOpen:tt,darkMode:rt}=it,[at,st]=(0,hooks_1.useState)(!tt),[ot,lt]=(0,hooks_1.useState)(!tt);(0,hooks_1.useEffect)(()=>{const ht=[window.setTimeout(()=>{lt(!tt)},10)];return tt?st(!1):ht.push(window.setTimeout(()=>{st(!0)},360)),()=>{ht.forEach(window.clearTimeout)}},[it.isOpen]);const ut=rt?"dark":"light";return(0,preact_1$1.h)("div",{class:(0,clsx_1.default)("-cbwsdk-connect-dialog-container",at&&"-cbwsdk-connect-dialog-container-hidden")},(0,preact_1$1.h)("style",null,ConnectDialog_css_1.default),(0,preact_1$1.h)("div",{class:(0,clsx_1.default)("-cbwsdk-connect-dialog-backdrop",ut,ot&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,preact_1$1.h)("div",{class:"-cbwsdk-connect-dialog"},(0,preact_1$1.h)("div",{class:(0,clsx_1.default)("-cbwsdk-connect-dialog-box",ot&&"-cbwsdk-connect-dialog-box-hidden")},it.connectDisabled?null:(0,preact_1$1.h)(ConnectContent_1.ConnectContent,{theme:ut,version:it.version,sessionId:it.sessionId,sessionSecret:it.sessionSecret,linkAPIUrl:it.linkAPIUrl,isConnected:it.isConnected,isParentConnection:it.isParentConnection,chainId:it.chainId,onCancel:it.onCancel}),(0,preact_1$1.h)(TryExtensionContent_1.TryExtensionContent,{theme:ut}))))};ConnectDialog$1.ConnectDialog=ConnectDialog,Object.defineProperty(LinkFlow$1,"__esModule",{value:!0}),LinkFlow$1.LinkFlow=void 0;const preact_1=require$$1,rxjs_1$2=require$$2$1,ConnectDialog_1=ConnectDialog$1;class LinkFlow{constructor(tt){this.extensionUI$=new rxjs_1$2.BehaviorSubject({}),this.subscriptions=new rxjs_1$2.Subscription,this.isConnected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=tt.darkMode,this.version=tt.version,this.sessionId=tt.sessionId,this.sessionSecret=tt.sessionSecret,this.linkAPIUrl=tt.linkAPIUrl,this.isParentConnection=tt.isParentConnection,this.connected$=tt.connected$,this.chainId$=tt.chainId$}attach(tt){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",tt.appendChild(this.root),this.render(),this.subscriptions.add(this.connected$.subscribe(rt=>{this.isConnected!==rt&&(this.isConnected=rt,this.render())})),this.subscriptions.add(this.chainId$.subscribe(rt=>{this.chainId!==rt&&(this.chainId=rt,this.render())}))}detach(){var tt;!this.root||(this.subscriptions.unsubscribe(),(0,preact_1.render)(null,this.root),(tt=this.root.parentElement)===null||tt===void 0||tt.removeChild(this.root))}setConnectDisabled(tt){this.connectDisabled=tt}open(tt){this.isOpen=!0,this.onCancel=tt.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){if(!this.root)return;const tt=this.extensionUI$.subscribe(()=>{!this.root||(0,preact_1.render)((0,preact_1.h)(ConnectDialog_1.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.isConnected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)});this.subscriptions.add(tt)}}LinkFlow$1.LinkFlow=LinkFlow;var Snackbar={},SnackbarCss={};Object.defineProperty(SnackbarCss,"__esModule",{value:!0}),SnackbarCss.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}",function(it){var tt=commonjsGlobal&&commonjsGlobal.__importDefault||function(vt){return vt&&vt.__esModule?vt:{default:vt}};Object.defineProperty(it,"__esModule",{value:!0}),it.SnackbarInstance=it.SnackbarContainer=it.Snackbar=void 0;const rt=tt(require$$0$2),at=require$$1,st=require$$2,ot=tt(SnackbarCss),lt="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";function ut(vt){switch(vt){case"coinbase-app":return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE0LjY3NCAxOC44NThjLTIuMDQ1IDAtMy42NDgtMS43MjItMy42NDgtMy44NDVzMS42NTktMy44NDUgMy42NDgtMy44NDVjMS44MjQgMCAzLjMxNyAxLjM3NyAzLjU5MyAzLjIxNGgzLjcwM2MtLjMzMS0zLjk2LTMuNDgyLTcuMDU5LTcuMjk2LTcuMDU5LTQuMDM0IDAtNy4zNSAzLjQ0My03LjM1IDcuNjkgMCA0LjI0NiAzLjI2IDcuNjkgNy4zNSA3LjY5IDMuODcgMCA2Ljk2NS0zLjEgNy4yOTYtNy4wNTloLTMuNzAzYy0uMjc2IDEuODM2LTEuNzY5IDMuMjE0LTMuNTkzIDMuMjE0WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0wIDEwLjY3OGMwLTMuNzExIDAtNS41OTYuNzQyLTcuMDIzQTYuNTMyIDYuNTMyIDAgMCAxIDMuNjU1Ljc0MkM1LjA4MiAwIDYuOTY3IDAgMTAuNjc4IDBoNy45MzhjMy43MTEgMCA1LjU5NiAwIDcuMDIzLjc0MmE2LjUzMSA2LjUzMSAwIDAgMSAyLjkxMyAyLjkxM2MuNzQyIDEuNDI3Ljc0MiAzLjMxMi43NDIgNy4wMjN2Ny45MzhjMCAzLjcxMSAwIDUuNTk2LS43NDIgNy4wMjNhNi41MzEgNi41MzEgMCAwIDEtMi45MTMgMi45MTNjLTEuNDI3Ljc0Mi0zLjMxMi43NDItNy4wMjMuNzQyaC03LjkzOGMtMy43MTEgMC01LjU5NiAwLTcuMDIzLS43NDJhNi41MzEgNi41MzEgMCAwIDEtMi45MTMtMi45MTNDMCAyNC4yMTIgMCAyMi4zODQgMCAxOC42MTZ2LTcuOTM4WiIgZmlsbD0iIzAwNTJGRiIvPjxwYXRoIGQ9Ik0xNC42ODQgMTkuNzczYy0yLjcyNyAwLTQuODY0LTIuMjk1LTQuODY0LTUuMTI2IDAtMi44MzEgMi4yMS01LjEyNyA0Ljg2NC01LjEyNyAyLjQzMiAwIDQuNDIyIDEuODM3IDQuNzkgNC4yODVoNC45MzhjLS40NDItNS4yOC00LjY0My05LjQxMS05LjcyOC05LjQxMS01LjM4IDAtOS44MDIgNC41OS05LjgwMiAxMC4yNTMgMCA1LjY2MiA0LjM0OCAxMC4yNTMgOS44MDIgMTAuMjUzIDUuMTU5IDAgOS4yODYtNC4xMzIgOS43MjgtOS40MTFoLTQuOTM4Yy0uMzY4IDIuNDQ4LTIuMzU4IDQuMjg0LTQuNzkgNC4yODRaIiBmaWxsPSIjZmZmIi8+PC9zdmc+";case"coinbase-wallet-app":default:return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+"}}class ht{constructor(At){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=At.darkMode}attach(At){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",At.appendChild(this.root),this.render()}presentItem(At){const xt=this.nextItemKey++;return this.items.set(xt,At),this.render(),()=>{this.items.delete(xt),this.render()}}clear(){this.items.clear(),this.render()}render(){!this.root||(0,at.render)((0,at.h)("div",null,(0,at.h)(it.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([At,xt])=>(0,at.h)(it.SnackbarInstance,Object.assign({},xt,{key:At}))))),this.root)}}it.Snackbar=ht;const mt=vt=>(0,at.h)("div",{class:(0,rt.default)("-cbwsdk-snackbar-container")},(0,at.h)("style",null,ot.default),(0,at.h)("div",{class:"-cbwsdk-snackbar"},vt.children));it.SnackbarContainer=mt;const bt=({autoExpand:vt,message:At,menuItems:xt,appSrc:Et})=>{const[Tt,wt]=(0,st.useState)(!0),[Ct,It]=(0,st.useState)(vt!=null?vt:!1);(0,st.useEffect)(()=>{const Rt=[window.setTimeout(()=>{wt(!1)},1),window.setTimeout(()=>{It(!0)},1e4)];return()=>{Rt.forEach(window.clearTimeout)}});const St=()=>{It(!Ct)};return(0,at.h)("div",{class:(0,rt.default)("-cbwsdk-snackbar-instance",Tt&&"-cbwsdk-snackbar-instance-hidden",Ct&&"-cbwsdk-snackbar-instance-expanded")},(0,at.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:St},(0,at.h)("img",{src:ut(Et),class:"-cbwsdk-snackbar-instance-header-cblogo"}),(0,at.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},At),(0,at.h)("div",{class:"-gear-container"},!Ct&&(0,at.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,at.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,at.h)("img",{src:lt,class:"-gear-icon",title:"Expand"}))),xt&&xt.length>0&&(0,at.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},xt.map((Rt,Dt)=>(0,at.h)("div",{class:(0,rt.default)("-cbwsdk-snackbar-instance-menu-item",Rt.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:Rt.onClick,key:Dt},(0,at.h)("svg",{width:Rt.svgWidth,height:Rt.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,at.h)("path",{"fill-rule":Rt.defaultFillRule,"clip-rule":Rt.defaultClipRule,d:Rt.path,fill:"#AAAAAA"})),(0,at.h)("span",{class:(0,rt.default)("-cbwsdk-snackbar-instance-menu-item-info",Rt.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},Rt.info)))))};it.SnackbarInstance=bt}(Snackbar);var cssReset={},cssResetCss={};Object.defineProperty(cssResetCss,"__esModule",{value:!0}),cssResetCss.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(cssReset,"__esModule",{value:!0}),cssReset.injectCssReset=void 0;const cssReset_css_1=__importDefault$1(cssResetCss);function injectCssReset(){const it=document.createElement("style");it.type="text/css",it.appendChild(document.createTextNode(cssReset_css_1.default)),document.documentElement.appendChild(it)}cssReset.injectCssReset=injectCssReset,Object.defineProperty(WalletSDKUI$1,"__esModule",{value:!0}),WalletSDKUI$1.WalletSDKUI=void 0;const LinkFlow_1=LinkFlow$1,Snackbar_1=Snackbar,cssReset_1=cssReset;class WalletSDKUI{constructor(tt){this.standalone=null,this.attached=!1,this.appSrc=null,this.snackbar=new Snackbar_1.Snackbar({darkMode:tt.darkMode}),this.linkFlow=new LinkFlow_1.LinkFlow({darkMode:tt.darkMode,version:tt.version,sessionId:tt.session.id,sessionSecret:tt.session.secret,linkAPIUrl:tt.linkAPIUrl,connected$:tt.connected$,chainId$:tt.chainId$,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const tt=document.documentElement,rt=document.createElement("div");rt.className="-cbwsdk-css-reset",tt.appendChild(rt),this.linkFlow.attach(rt),this.snackbar.attach(rt),this.attached=!0,(0,cssReset_1.injectCssReset)()}setConnectDisabled(tt){this.linkFlow.setConnectDisabled(tt)}addEthereumChain(tt){}watchAsset(tt){}switchEthereumChain(tt){}requestEthereumAccounts(tt){this.linkFlow.open({onCancel:tt.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(tt){}signEthereumTransaction(tt){}submitEthereumTransaction(tt){}ethereumAddressFromSignedMessage(tt){}showConnecting(tt){let rt;return tt.isUnlinkedErrorState?rt={autoExpand:!0,message:"Connection lost",appSrc:this.appSrc,menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:tt.onResetConnection}]}:rt={message:"Confirm on phone",appSrc:this.appSrc,menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:tt.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:tt.onResetConnection}]},this.snackbar.presentItem(rt)}setAppSrc(tt){this.appSrc=tt}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(tt){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(tt){this.standalone=tt}isStandalone(){var tt;return(tt=this.standalone)!==null&&tt!==void 0?tt:!1}}WalletSDKUI$1.WalletSDKUI=WalletSDKUI;var WalletSDKRelay$1={},bindDecorator={};Object.defineProperty(bindDecorator,"__esModule",{value:!0});var constants;(function(it){it.typeOfFunction="function",it.boolTrue=!0})(constants||(constants={}));function bind(it,tt,rt){if(!rt||typeof rt.value!==constants.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+tt+"> is not a method!");return{configurable:constants.boolTrue,get:function(){var at=rt.value.bind(this);return Object.defineProperty(this,tt,{value:at,configurable:constants.boolTrue,writable:constants.boolTrue}),at}}}bindDecorator.bind=bind,bindDecorator.default=bind;function audit(it){return function(rt){return rt.lift(new AuditOperator(it))}}var AuditOperator=function(){function it(tt){this.durationSelector=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new AuditSubscriber(tt,this.durationSelector))},it}(),AuditSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.durationSelector=at,st.hasValue=!1,st}return tt.prototype._next=function(rt){if(this.value=rt,this.hasValue=!0,!this.throttled){var at=void 0;try{var st=this.durationSelector;at=st(rt)}catch(lt){return this.destination.error(lt)}var ot=innerSubscribe(at,new SimpleInnerSubscriber(this));!ot||ot.closed?this.clearThrottle():this.add(this.throttled=ot)}},tt.prototype.clearThrottle=function(){var rt=this,at=rt.value,st=rt.hasValue,ot=rt.throttled;ot&&(this.remove(ot),this.throttled=void 0,ot.unsubscribe()),st&&(this.value=void 0,this.hasValue=!1,this.destination.next(at))},tt.prototype.notifyNext=function(){this.clearThrottle()},tt.prototype.notifyComplete=function(){this.clearThrottle()},tt}(SimpleOuterSubscriber);function auditTime(it,tt){return tt===void 0&&(tt=async),audit(function(){return timer(it,tt)})}function buffer$1(it){return function(rt){return rt.lift(new BufferOperator(it))}}var BufferOperator=function(){function it(tt){this.closingNotifier=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new BufferSubscriber(tt,this.closingNotifier))},it}(),BufferSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.buffer=[],st.add(innerSubscribe(at,new SimpleInnerSubscriber(st))),st}return tt.prototype._next=function(rt){this.buffer.push(rt)},tt.prototype.notifyNext=function(){var rt=this.buffer;this.buffer=[],this.destination.next(rt)},tt}(SimpleOuterSubscriber);function bufferCount(it,tt){return tt===void 0&&(tt=null),function(at){return at.lift(new BufferCountOperator(it,tt))}}var BufferCountOperator=function(){function it(tt,rt){this.bufferSize=tt,this.startBufferEvery=rt,!rt||tt===rt?this.subscriberClass=BufferCountSubscriber:this.subscriberClass=BufferSkipCountSubscriber}return it.prototype.call=function(tt,rt){return rt.subscribe(new this.subscriberClass(tt,this.bufferSize,this.startBufferEvery))},it}(),BufferCountSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.bufferSize=at,st.buffer=[],st}return tt.prototype._next=function(rt){var at=this.buffer;at.push(rt),at.length==this.bufferSize&&(this.destination.next(at),this.buffer=[])},tt.prototype._complete=function(){var rt=this.buffer;rt.length>0&&this.destination.next(rt),it.prototype._complete.call(this)},tt}(Subscriber),BufferSkipCountSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.bufferSize=at,ot.startBufferEvery=st,ot.buffers=[],ot.count=0,ot}return tt.prototype._next=function(rt){var at=this,st=at.bufferSize,ot=at.startBufferEvery,lt=at.buffers,ut=at.count;this.count++,ut%ot===0&&lt.push([]);for(var ht=lt.length;ht--;){var mt=lt[ht];mt.push(rt),mt.length===st&&(lt.splice(ht,1),this.destination.next(mt))}},tt.prototype._complete=function(){for(var rt=this,at=rt.buffers,st=rt.destination;at.length>0;){var ot=at.shift();ot.length>0&&st.next(ot)}it.prototype._complete.call(this)},tt}(Subscriber);function bufferTime(it){var tt=arguments.length,rt=async;isScheduler(arguments[arguments.length-1])&&(rt=arguments[arguments.length-1],tt--);var at=null;tt>=2&&(at=arguments[1]);var st=Number.POSITIVE_INFINITY;return tt>=3&&(st=arguments[2]),function(lt){return lt.lift(new BufferTimeOperator(it,at,st,rt))}}var BufferTimeOperator=function(){function it(tt,rt,at,st){this.bufferTimeSpan=tt,this.bufferCreationInterval=rt,this.maxBufferSize=at,this.scheduler=st}return it.prototype.call=function(tt,rt){return rt.subscribe(new BufferTimeSubscriber(tt,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},it}(),Context=function(){function it(){this.buffer=[]}return it}(),BufferTimeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot,lt){var ut=it.call(this,rt)||this;ut.bufferTimeSpan=at,ut.bufferCreationInterval=st,ut.maxBufferSize=ot,ut.scheduler=lt,ut.contexts=[];var ht=ut.openContext();if(ut.timespanOnly=st==null||st<0,ut.timespanOnly){var mt={subscriber:ut,context:ht,bufferTimeSpan:at};ut.add(ht.closeAction=lt.schedule(dispatchBufferTimeSpanOnly,at,mt))}else{var bt={subscriber:ut,context:ht},vt={bufferTimeSpan:at,bufferCreationInterval:st,subscriber:ut,scheduler:lt};ut.add(ht.closeAction=lt.schedule(dispatchBufferClose,at,bt)),ut.add(lt.schedule(dispatchBufferCreation,st,vt))}return ut}return tt.prototype._next=function(rt){for(var at=this.contexts,st=at.length,ot,lt=0;lt<st;lt++){var ut=at[lt],ht=ut.buffer;ht.push(rt),ht.length==this.maxBufferSize&&(ot=ut)}ot&&this.onBufferFull(ot)},tt.prototype._error=function(rt){this.contexts.length=0,it.prototype._error.call(this,rt)},tt.prototype._complete=function(){for(var rt=this,at=rt.contexts,st=rt.destination;at.length>0;){var ot=at.shift();st.next(ot.buffer)}it.prototype._complete.call(this)},tt.prototype._unsubscribe=function(){this.contexts=null},tt.prototype.onBufferFull=function(rt){this.closeContext(rt);var at=rt.closeAction;if(at.unsubscribe(),this.remove(at),!this.closed&&this.timespanOnly){rt=this.openContext();var st=this.bufferTimeSpan,ot={subscriber:this,context:rt,bufferTimeSpan:st};this.add(rt.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,st,ot))}},tt.prototype.openContext=function(){var rt=new Context;return this.contexts.push(rt),rt},tt.prototype.closeContext=function(rt){this.destination.next(rt.buffer);var at=this.contexts,st=at?at.indexOf(rt):-1;st>=0&&at.splice(at.indexOf(rt),1)},tt}(Subscriber);function dispatchBufferTimeSpanOnly(it){var tt=it.subscriber,rt=it.context;rt&&tt.closeContext(rt),tt.closed||(it.context=tt.openContext(),it.context.closeAction=this.schedule(it,it.bufferTimeSpan))}function dispatchBufferCreation(it){var tt=it.bufferCreationInterval,rt=it.bufferTimeSpan,at=it.subscriber,st=it.scheduler,ot=at.openContext(),lt=this;at.closed||(at.add(ot.closeAction=st.schedule(dispatchBufferClose,rt,{subscriber:at,context:ot})),lt.schedule(it,tt))}function dispatchBufferClose(it){var tt=it.subscriber,rt=it.context;tt.closeContext(rt)}function bufferToggle(it,tt){return function(at){return at.lift(new BufferToggleOperator(it,tt))}}var BufferToggleOperator=function(){function it(tt,rt){this.openings=tt,this.closingSelector=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new BufferToggleSubscriber(tt,this.openings,this.closingSelector))},it}(),BufferToggleSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.closingSelector=st,ot.contexts=[],ot.add(subscribeToResult(ot,at)),ot}return tt.prototype._next=function(rt){for(var at=this.contexts,st=at.length,ot=0;ot<st;ot++)at[ot].buffer.push(rt)},tt.prototype._error=function(rt){for(var at=this.contexts;at.length>0;){var st=at.shift();st.subscription.unsubscribe(),st.buffer=null,st.subscription=null}this.contexts=null,it.prototype._error.call(this,rt)},tt.prototype._complete=function(){for(var rt=this.contexts;rt.length>0;){var at=rt.shift();this.destination.next(at.buffer),at.subscription.unsubscribe(),at.buffer=null,at.subscription=null}this.contexts=null,it.prototype._complete.call(this)},tt.prototype.notifyNext=function(rt,at){rt?this.closeBuffer(rt):this.openBuffer(at)},tt.prototype.notifyComplete=function(rt){this.closeBuffer(rt.context)},tt.prototype.openBuffer=function(rt){try{var at=this.closingSelector,st=at.call(this,rt);st&&this.trySubscribe(st)}catch(ot){this._error(ot)}},tt.prototype.closeBuffer=function(rt){var at=this.contexts;if(at&&rt){var st=rt.buffer,ot=rt.subscription;this.destination.next(st),at.splice(at.indexOf(rt),1),this.remove(ot),ot.unsubscribe()}},tt.prototype.trySubscribe=function(rt){var at=this.contexts,st=[],ot=new Subscription,lt={buffer:st,subscription:ot};at.push(lt);var ut=subscribeToResult(this,rt,lt);!ut||ut.closed?this.closeBuffer(lt):(ut.context=lt,this.add(ut),ot.add(ut))},tt}(OuterSubscriber);function bufferWhen(it){return function(tt){return tt.lift(new BufferWhenOperator(it))}}var BufferWhenOperator=function(){function it(tt){this.closingSelector=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new BufferWhenSubscriber(tt,this.closingSelector))},it}(),BufferWhenSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.closingSelector=at,st.subscribing=!1,st.openBuffer(),st}return tt.prototype._next=function(rt){this.buffer.push(rt)},tt.prototype._complete=function(){var rt=this.buffer;rt&&this.destination.next(rt),it.prototype._complete.call(this)},tt.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},tt.prototype.notifyNext=function(){this.openBuffer()},tt.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},tt.prototype.openBuffer=function(){var rt=this.closingSubscription;rt&&(this.remove(rt),rt.unsubscribe());var at=this.buffer;this.buffer&&this.destination.next(at),this.buffer=[];var st;try{var ot=this.closingSelector;st=ot()}catch(lt){return this.error(lt)}rt=new Subscription,this.closingSubscription=rt,this.add(rt),this.subscribing=!0,rt.add(innerSubscribe(st,new SimpleInnerSubscriber(this))),this.subscribing=!1},tt}(SimpleOuterSubscriber);function catchError(it){return function(rt){var at=new CatchOperator(it),st=rt.lift(at);return at.caught=st}}var CatchOperator=function(){function it(tt){this.selector=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new CatchSubscriber(tt,this.selector,this.caught))},it}(),CatchSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.selector=at,ot.caught=st,ot}return tt.prototype.error=function(rt){if(!this.isStopped){var at=void 0;try{at=this.selector(rt,this.caught)}catch(lt){it.prototype.error.call(this,lt);return}this._unsubscribeAndRecycle();var st=new SimpleInnerSubscriber(this);this.add(st);var ot=innerSubscribe(at,st);ot!==st&&this.add(ot)}},tt}(SimpleOuterSubscriber);function combineAll(it){return function(tt){return tt.lift(new CombineLatestOperator(it))}}function combineLatest(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];var rt=null;return typeof it[it.length-1]=="function"&&(rt=it.pop()),it.length===1&&isArray$4(it[0])&&(it=it[0].slice()),function(at){return at.lift.call(from$2([at].concat(it)),new CombineLatestOperator(rt))}}function concat$1(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return function(rt){return rt.lift.call(concat$2.apply(void 0,[rt].concat(it)))}}function concatMap(it,tt){return mergeMap(it,tt,1)}function concatMapTo(it,tt){return concatMap(function(){return it},tt)}function count(it){return function(tt){return tt.lift(new CountOperator(it,tt))}}var CountOperator=function(){function it(tt,rt){this.predicate=tt,this.source=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new CountSubscriber(tt,this.predicate,this.source))},it}(),CountSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.predicate=at,ot.source=st,ot.count=0,ot.index=0,ot}return tt.prototype._next=function(rt){this.predicate?this._tryPredicate(rt):this.count++},tt.prototype._tryPredicate=function(rt){var at;try{at=this.predicate(rt,this.index++,this.source)}catch(st){this.destination.error(st);return}at&&this.count++},tt.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},tt}(Subscriber);function debounce$1(it){return function(tt){return tt.lift(new DebounceOperator(it))}}var DebounceOperator=function(){function it(tt){this.durationSelector=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new DebounceSubscriber(tt,this.durationSelector))},it}(),DebounceSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.durationSelector=at,st.hasValue=!1,st}return tt.prototype._next=function(rt){try{var at=this.durationSelector.call(this,rt);at&&this._tryNext(rt,at)}catch(st){this.destination.error(st)}},tt.prototype._complete=function(){this.emitValue(),this.destination.complete()},tt.prototype._tryNext=function(rt,at){var st=this.durationSubscription;this.value=rt,this.hasValue=!0,st&&(st.unsubscribe(),this.remove(st)),st=innerSubscribe(at,new SimpleInnerSubscriber(this)),st&&!st.closed&&this.add(this.durationSubscription=st)},tt.prototype.notifyNext=function(){this.emitValue()},tt.prototype.notifyComplete=function(){this.emitValue()},tt.prototype.emitValue=function(){if(this.hasValue){var rt=this.value,at=this.durationSubscription;at&&(this.durationSubscription=void 0,at.unsubscribe(),this.remove(at)),this.value=void 0,this.hasValue=!1,it.prototype._next.call(this,rt)}},tt}(SimpleOuterSubscriber);function debounceTime(it,tt){return tt===void 0&&(tt=async),function(rt){return rt.lift(new DebounceTimeOperator(it,tt))}}var DebounceTimeOperator=function(){function it(tt,rt){this.dueTime=tt,this.scheduler=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new DebounceTimeSubscriber(tt,this.dueTime,this.scheduler))},it}(),DebounceTimeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.dueTime=at,ot.scheduler=st,ot.debouncedSubscription=null,ot.lastValue=null,ot.hasValue=!1,ot}return tt.prototype._next=function(rt){this.clearDebounce(),this.lastValue=rt,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$1,this.dueTime,this))},tt.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},tt.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var rt=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(rt)}},tt.prototype.clearDebounce=function(){var rt=this.debouncedSubscription;rt!==null&&(this.remove(rt),rt.unsubscribe(),this.debouncedSubscription=null)},tt}(Subscriber);function dispatchNext$1(it){it.debouncedNext()}function defaultIfEmpty(it){return it===void 0&&(it=null),function(tt){return tt.lift(new DefaultIfEmptyOperator(it))}}var DefaultIfEmptyOperator=function(){function it(tt){this.defaultValue=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new DefaultIfEmptySubscriber(tt,this.defaultValue))},it}(),DefaultIfEmptySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.defaultValue=at,st.isEmpty=!0,st}return tt.prototype._next=function(rt){this.isEmpty=!1,this.destination.next(rt)},tt.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},tt}(Subscriber);function isDate(it){return it instanceof Date&&!isNaN(+it)}function delay(it,tt){tt===void 0&&(tt=async);var rt=isDate(it),at=rt?+it-tt.now():Math.abs(it);return function(st){return st.lift(new DelayOperator(at,tt))}}var DelayOperator=function(){function it(tt,rt){this.delay=tt,this.scheduler=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new DelaySubscriber(tt,this.delay,this.scheduler))},it}(),DelaySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.delay=at,ot.scheduler=st,ot.queue=[],ot.active=!1,ot.errored=!1,ot}return tt.dispatch=function(rt){for(var at=rt.source,st=at.queue,ot=rt.scheduler,lt=rt.destination;st.length>0&&st[0].time-ot.now()<=0;)st.shift().notification.observe(lt);if(st.length>0){var ut=Math.max(0,st[0].time-ot.now());this.schedule(rt,ut)}else this.unsubscribe(),at.active=!1},tt.prototype._schedule=function(rt){this.active=!0;var at=this.destination;at.add(rt.schedule(tt.dispatch,this.delay,{source:this,destination:this.destination,scheduler:rt}))},tt.prototype.scheduleNotification=function(rt){if(this.errored!==!0){var at=this.scheduler,st=new DelayMessage(at.now()+this.delay,rt);this.queue.push(st),this.active===!1&&this._schedule(at)}},tt.prototype._next=function(rt){this.scheduleNotification(Notification$1.createNext(rt))},tt.prototype._error=function(rt){this.errored=!0,this.queue=[],this.destination.error(rt),this.unsubscribe()},tt.prototype._complete=function(){this.scheduleNotification(Notification$1.createComplete()),this.unsubscribe()},tt}(Subscriber),DelayMessage=function(){function it(tt,rt){this.time=tt,this.notification=rt}return it}();function delayWhen(it,tt){return tt?function(rt){return new SubscriptionDelayObservable(rt,tt).lift(new DelayWhenOperator(it))}:function(rt){return rt.lift(new DelayWhenOperator(it))}}var DelayWhenOperator=function(){function it(tt){this.delayDurationSelector=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new DelayWhenSubscriber(tt,this.delayDurationSelector))},it}(),DelayWhenSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.delayDurationSelector=at,st.completed=!1,st.delayNotifierSubscriptions=[],st.index=0,st}return tt.prototype.notifyNext=function(rt,at,st,ot,lt){this.destination.next(rt),this.removeSubscription(lt),this.tryComplete()},tt.prototype.notifyError=function(rt,at){this._error(rt)},tt.prototype.notifyComplete=function(rt){var at=this.removeSubscription(rt);at&&this.destination.next(at),this.tryComplete()},tt.prototype._next=function(rt){var at=this.index++;try{var st=this.delayDurationSelector(rt,at);st&&this.tryDelay(st,rt)}catch(ot){this.destination.error(ot)}},tt.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},tt.prototype.removeSubscription=function(rt){rt.unsubscribe();var at=this.delayNotifierSubscriptions.indexOf(rt);return at!==-1&&this.delayNotifierSubscriptions.splice(at,1),rt.outerValue},tt.prototype.tryDelay=function(rt,at){var st=subscribeToResult(this,rt,at);if(st&&!st.closed){var ot=this.destination;ot.add(st),this.delayNotifierSubscriptions.push(st)}},tt.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},tt}(OuterSubscriber),SubscriptionDelayObservable=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this)||this;return st.source=rt,st.subscriptionDelay=at,st}return tt.prototype._subscribe=function(rt){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(rt,this.source))},tt}(Observable),SubscriptionDelaySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this)||this;return st.parent=rt,st.source=at,st.sourceSubscribed=!1,st}return tt.prototype._next=function(rt){this.subscribeToSource()},tt.prototype._error=function(rt){this.unsubscribe(),this.parent.error(rt)},tt.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},tt.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},tt}(Subscriber);function dematerialize(){return function(tt){return tt.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function it(){}return it.prototype.call=function(tt,rt){return rt.subscribe(new DeMaterializeSubscriber(tt))},it}(),DeMaterializeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){return it.call(this,rt)||this}return tt.prototype._next=function(rt){rt.observe(this.destination)},tt}(Subscriber);function distinct(it,tt){return function(rt){return rt.lift(new DistinctOperator(it,tt))}}var DistinctOperator=function(){function it(tt,rt){this.keySelector=tt,this.flushes=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new DistinctSubscriber(tt,this.keySelector,this.flushes))},it}(),DistinctSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.keySelector=at,ot.values=new Set,st&&ot.add(innerSubscribe(st,new SimpleInnerSubscriber(ot))),ot}return tt.prototype.notifyNext=function(){this.values.clear()},tt.prototype.notifyError=function(rt){this._error(rt)},tt.prototype._next=function(rt){this.keySelector?this._useKeySelector(rt):this._finalizeNext(rt,rt)},tt.prototype._useKeySelector=function(rt){var at,st=this.destination;try{at=this.keySelector(rt)}catch(ot){st.error(ot);return}this._finalizeNext(at,rt)},tt.prototype._finalizeNext=function(rt,at){var st=this.values;st.has(rt)||(st.add(rt),this.destination.next(at))},tt}(SimpleOuterSubscriber);function distinctUntilChanged(it,tt){return function(rt){return rt.lift(new DistinctUntilChangedOperator(it,tt))}}var DistinctUntilChangedOperator=function(){function it(tt,rt){this.compare=tt,this.keySelector=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new DistinctUntilChangedSubscriber(tt,this.compare,this.keySelector))},it}(),DistinctUntilChangedSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.keySelector=st,ot.hasKey=!1,typeof at=="function"&&(ot.compare=at),ot}return tt.prototype.compare=function(rt,at){return rt===at},tt.prototype._next=function(rt){var at;try{var st=this.keySelector;at=st?st(rt):rt}catch(ut){return this.destination.error(ut)}var ot=!1;if(this.hasKey)try{var lt=this.compare;ot=lt(this.key,at)}catch(ut){return this.destination.error(ut)}else this.hasKey=!0;ot||(this.key=at,this.destination.next(rt))},tt}(Subscriber);function distinctUntilKeyChanged(it,tt){return distinctUntilChanged(function(rt,at){return tt?tt(rt[it],at[it]):rt[it]===at[it]})}function throwIfEmpty(it){return it===void 0&&(it=defaultErrorFactory),function(tt){return tt.lift(new ThrowIfEmptyOperator(it))}}var ThrowIfEmptyOperator=function(){function it(tt){this.errorFactory=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new ThrowIfEmptySubscriber(tt,this.errorFactory))},it}(),ThrowIfEmptySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.errorFactory=at,st.hasValue=!1,st}return tt.prototype._next=function(rt){this.hasValue=!0,this.destination.next(rt)},tt.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var rt=void 0;try{rt=this.errorFactory()}catch(at){rt=at}this.destination.error(rt)},tt}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(it){return function(tt){return it===0?empty():tt.lift(new TakeOperator(it))}}var TakeOperator=function(){function it(tt){if(this.total=tt,this.total<0)throw new ArgumentOutOfRangeError}return it.prototype.call=function(tt,rt){return rt.subscribe(new TakeSubscriber(tt,this.total))},it}(),TakeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.total=at,st.count=0,st}return tt.prototype._next=function(rt){var at=this.total,st=++this.count;st<=at&&(this.destination.next(rt),st===at&&(this.destination.complete(),this.unsubscribe()))},tt}(Subscriber);function elementAt(it,tt){if(it<0)throw new ArgumentOutOfRangeError;var rt=arguments.length>=2;return function(at){return at.pipe(filter(function(st,ot){return ot===it}),take(1),rt?defaultIfEmpty(tt):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return function(rt){return concat$2(rt,of.apply(void 0,it))}}function every(it,tt){return function(rt){return rt.lift(new EveryOperator(it,tt,rt))}}var EveryOperator=function(){function it(tt,rt,at){this.predicate=tt,this.thisArg=rt,this.source=at}return it.prototype.call=function(tt,rt){return rt.subscribe(new EverySubscriber(tt,this.predicate,this.thisArg,this.source))},it}(),EverySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot){var lt=it.call(this,rt)||this;return lt.predicate=at,lt.thisArg=st,lt.source=ot,lt.index=0,lt.thisArg=st||lt,lt}return tt.prototype.notifyComplete=function(rt){this.destination.next(rt),this.destination.complete()},tt.prototype._next=function(rt){var at=!1;try{at=this.predicate.call(this.thisArg,rt,this.index++,this.source)}catch(st){this.destination.error(st);return}at||this.notifyComplete(!1)},tt.prototype._complete=function(){this.notifyComplete(!0)},tt}(Subscriber);function exhaust(){return function(it){return it.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function it(){}return it.prototype.call=function(tt,rt){return rt.subscribe(new SwitchFirstSubscriber(tt))},it}(),SwitchFirstSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this,rt)||this;return at.hasCompleted=!1,at.hasSubscription=!1,at}return tt.prototype._next=function(rt){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(rt,new SimpleInnerSubscriber(this))))},tt.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},tt.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},tt}(SimpleOuterSubscriber);function exhaustMap(it,tt){return tt?function(rt){return rt.pipe(exhaustMap(function(at,st){return from$2(it(at,st)).pipe(map(function(ot,lt){return tt(at,ot,st,lt)}))}))}:function(rt){return rt.lift(new ExhaustMapOperator(it))}}var ExhaustMapOperator=function(){function it(tt){this.project=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new ExhaustMapSubscriber(tt,this.project))},it}(),ExhaustMapSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.project=at,st.hasSubscription=!1,st.hasCompleted=!1,st.index=0,st}return tt.prototype._next=function(rt){this.hasSubscription||this.tryNext(rt)},tt.prototype.tryNext=function(rt){var at,st=this.index++;try{at=this.project(rt,st)}catch(ot){this.destination.error(ot);return}this.hasSubscription=!0,this._innerSub(at)},tt.prototype._innerSub=function(rt){var at=new SimpleInnerSubscriber(this),st=this.destination;st.add(at);var ot=innerSubscribe(rt,at);ot!==at&&st.add(ot)},tt.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},tt.prototype.notifyNext=function(rt){this.destination.next(rt)},tt.prototype.notifyError=function(rt){this.destination.error(rt)},tt.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},tt}(SimpleOuterSubscriber);function expand(it,tt,rt){return tt===void 0&&(tt=Number.POSITIVE_INFINITY),tt=(tt||0)<1?Number.POSITIVE_INFINITY:tt,function(at){return at.lift(new ExpandOperator(it,tt,rt))}}var ExpandOperator=function(){function it(tt,rt,at){this.project=tt,this.concurrent=rt,this.scheduler=at}return it.prototype.call=function(tt,rt){return rt.subscribe(new ExpandSubscriber(tt,this.project,this.concurrent,this.scheduler))},it}(),ExpandSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot){var lt=it.call(this,rt)||this;return lt.project=at,lt.concurrent=st,lt.scheduler=ot,lt.index=0,lt.active=0,lt.hasCompleted=!1,st<Number.POSITIVE_INFINITY&&(lt.buffer=[]),lt}return tt.dispatch=function(rt){var at=rt.subscriber,st=rt.result,ot=rt.value,lt=rt.index;at.subscribeToProjection(st,ot,lt)},tt.prototype._next=function(rt){var at=this.destination;if(at.closed){this._complete();return}var st=this.index++;if(this.active<this.concurrent){at.next(rt);try{var ot=this.project,lt=ot(rt,st);if(!this.scheduler)this.subscribeToProjection(lt,rt,st);else{var ut={subscriber:this,result:lt,value:rt,index:st},ht=this.destination;ht.add(this.scheduler.schedule(tt.dispatch,0,ut))}}catch(mt){at.error(mt)}}else this.buffer.push(rt)},tt.prototype.subscribeToProjection=function(rt,at,st){this.active++;var ot=this.destination;ot.add(innerSubscribe(rt,new SimpleInnerSubscriber(this)))},tt.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},tt.prototype.notifyNext=function(rt){this._next(rt)},tt.prototype.notifyComplete=function(){var rt=this.buffer;this.active--,rt&&rt.length>0&&this._next(rt.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},tt}(SimpleOuterSubscriber);function finalize(it){return function(tt){return tt.lift(new FinallyOperator(it))}}var FinallyOperator=function(){function it(tt){this.callback=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new FinallySubscriber(tt,this.callback))},it}(),FinallySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.add(new Subscription(at)),st}return tt}(Subscriber);function find(it,tt){if(typeof it!="function")throw new TypeError("predicate is not a function");return function(rt){return rt.lift(new FindValueOperator(it,rt,!1,tt))}}var FindValueOperator=function(){function it(tt,rt,at,st){this.predicate=tt,this.source=rt,this.yieldIndex=at,this.thisArg=st}return it.prototype.call=function(tt,rt){return rt.subscribe(new FindValueSubscriber(tt,this.predicate,this.source,this.yieldIndex,this.thisArg))},it}(),FindValueSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot,lt){var ut=it.call(this,rt)||this;return ut.predicate=at,ut.source=st,ut.yieldIndex=ot,ut.thisArg=lt,ut.index=0,ut}return tt.prototype.notifyComplete=function(rt){var at=this.destination;at.next(rt),at.complete(),this.unsubscribe()},tt.prototype._next=function(rt){var at=this,st=at.predicate,ot=at.thisArg,lt=this.index++;try{var ut=st.call(ot||this,rt,lt,this.source);ut&&this.notifyComplete(this.yieldIndex?lt:rt)}catch(ht){this.destination.error(ht)}},tt.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},tt}(Subscriber);function findIndex(it,tt){return function(rt){return rt.lift(new FindValueOperator(it,rt,!0,tt))}}function first$1(it,tt){var rt=arguments.length>=2;return function(at){return at.pipe(it?filter(function(st,ot){return it(st,ot,at)}):identity,take(1),rt?defaultIfEmpty(tt):throwIfEmpty(function(){return new EmptyError}))}}function ignoreElements(){return function(tt){return tt.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function it(){}return it.prototype.call=function(tt,rt){return rt.subscribe(new IgnoreElementsSubscriber(tt))},it}(),IgnoreElementsSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(){return it!==null&&it.apply(this,arguments)||this}return tt.prototype._next=function(rt){},tt}(Subscriber);function isEmpty$3(){return function(it){return it.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function it(){}return it.prototype.call=function(tt,rt){return rt.subscribe(new IsEmptySubscriber(tt))},it}(),IsEmptySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){return it.call(this,rt)||this}return tt.prototype.notifyComplete=function(rt){var at=this.destination;at.next(rt),at.complete()},tt.prototype._next=function(rt){this.notifyComplete(!1)},tt.prototype._complete=function(){this.notifyComplete(!0)},tt}(Subscriber);function takeLast(it){return function(rt){return it===0?empty():rt.lift(new TakeLastOperator(it))}}var TakeLastOperator=function(){function it(tt){if(this.total=tt,this.total<0)throw new ArgumentOutOfRangeError}return it.prototype.call=function(tt,rt){return rt.subscribe(new TakeLastSubscriber(tt,this.total))},it}(),TakeLastSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.total=at,st.ring=new Array,st.count=0,st}return tt.prototype._next=function(rt){var at=this.ring,st=this.total,ot=this.count++;if(at.length<st)at.push(rt);else{var lt=ot%st;at[lt]=rt}},tt.prototype._complete=function(){var rt=this.destination,at=this.count;if(at>0)for(var st=this.count>=this.total?this.total:this.count,ot=this.ring,lt=0;lt<st;lt++){var ut=at++%st;rt.next(ot[ut])}rt.complete()},tt}(Subscriber);function last$1(it,tt){var rt=arguments.length>=2;return function(at){return at.pipe(it?filter(function(st,ot){return it(st,ot,at)}):identity,takeLast(1),rt?defaultIfEmpty(tt):throwIfEmpty(function(){return new EmptyError}))}}function mapTo(it){return function(tt){return tt.lift(new MapToOperator(it))}}var MapToOperator=function(){function it(tt){this.value=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new MapToSubscriber(tt,this.value))},it}(),MapToSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.value=at,st}return tt.prototype._next=function(rt){this.destination.next(this.value)},tt}(Subscriber);function materialize(){return function(tt){return tt.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function it(){}return it.prototype.call=function(tt,rt){return rt.subscribe(new MaterializeSubscriber(tt))},it}(),MaterializeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){return it.call(this,rt)||this}return tt.prototype._next=function(rt){this.destination.next(Notification$1.createNext(rt))},tt.prototype._error=function(rt){var at=this.destination;at.next(Notification$1.createError(rt)),at.complete()},tt.prototype._complete=function(){var rt=this.destination;rt.next(Notification$1.createComplete()),rt.complete()},tt}(Subscriber);function scan(it,tt){var rt=!1;return arguments.length>=2&&(rt=!0),function(st){return st.lift(new ScanOperator(it,tt,rt))}}var ScanOperator=function(){function it(tt,rt,at){at===void 0&&(at=!1),this.accumulator=tt,this.seed=rt,this.hasSeed=at}return it.prototype.call=function(tt,rt){return rt.subscribe(new ScanSubscriber(tt,this.accumulator,this.seed,this.hasSeed))},it}(),ScanSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot){var lt=it.call(this,rt)||this;return lt.accumulator=at,lt._seed=st,lt.hasSeed=ot,lt.index=0,lt}return Object.defineProperty(tt.prototype,"seed",{get:function(){return this._seed},set:function(rt){this.hasSeed=!0,this._seed=rt},enumerable:!0,configurable:!0}),tt.prototype._next=function(rt){if(!this.hasSeed)this.seed=rt,this.destination.next(rt);else return this._tryNext(rt)},tt.prototype._tryNext=function(rt){var at=this.index++,st;try{st=this.accumulator(this.seed,rt,at)}catch(ot){this.destination.error(ot)}this.seed=st,this.destination.next(st)},tt}(Subscriber);function reduce(it,tt){return arguments.length>=2?function(at){return pipe(scan(it,tt),takeLast(1),defaultIfEmpty(tt))(at)}:function(at){return pipe(scan(function(st,ot,lt){return it(st,ot,lt+1)}),takeLast(1))(at)}}function max$2(it){var tt=typeof it=="function"?function(rt,at){return it(rt,at)>0?rt:at}:function(rt,at){return rt>at?rt:at};return reduce(tt)}function merge$1(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return function(rt){return rt.lift.call(merge$2.apply(void 0,[rt].concat(it)))}}function mergeMapTo(it,tt,rt){return rt===void 0&&(rt=Number.POSITIVE_INFINITY),typeof tt=="function"?mergeMap(function(){return it},tt,rt):(typeof tt=="number"&&(rt=tt),mergeMap(function(){return it},rt))}function mergeScan(it,tt,rt){return rt===void 0&&(rt=Number.POSITIVE_INFINITY),function(at){return at.lift(new MergeScanOperator(it,tt,rt))}}var MergeScanOperator=function(){function it(tt,rt,at){this.accumulator=tt,this.seed=rt,this.concurrent=at}return it.prototype.call=function(tt,rt){return rt.subscribe(new MergeScanSubscriber(tt,this.accumulator,this.seed,this.concurrent))},it}(),MergeScanSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot){var lt=it.call(this,rt)||this;return lt.accumulator=at,lt.acc=st,lt.concurrent=ot,lt.hasValue=!1,lt.hasCompleted=!1,lt.buffer=[],lt.active=0,lt.index=0,lt}return tt.prototype._next=function(rt){if(this.active<this.concurrent){var at=this.index++,st=this.destination,ot=void 0;try{var lt=this.accumulator;ot=lt(this.acc,rt,at)}catch(ut){return st.error(ut)}this.active++,this._innerSub(ot)}else this.buffer.push(rt)},tt.prototype._innerSub=function(rt){var at=new SimpleInnerSubscriber(this),st=this.destination;st.add(at);var ot=innerSubscribe(rt,at);ot!==at&&st.add(ot)},tt.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},tt.prototype.notifyNext=function(rt){var at=this.destination;this.acc=rt,this.hasValue=!0,at.next(rt)},tt.prototype.notifyComplete=function(){var rt=this.buffer;this.active--,rt.length>0?this._next(rt.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},tt}(SimpleOuterSubscriber);function min$2(it){var tt=typeof it=="function"?function(rt,at){return it(rt,at)<0?rt:at}:function(rt,at){return rt<at?rt:at};return reduce(tt)}function multicast(it,tt){return function(at){var st;if(typeof it=="function"?st=it:st=function(){return it},typeof tt=="function")return at.lift(new MulticastOperator(st,tt));var ot=Object.create(at,connectableObservableDescriptor);return ot.source=at,ot.subjectFactory=st,ot}}var MulticastOperator=function(){function it(tt,rt){this.subjectFactory=tt,this.selector=rt}return it.prototype.call=function(tt,rt){var at=this.selector,st=this.subjectFactory(),ot=at(st).subscribe(tt);return ot.add(rt.subscribe(st)),ot},it}();function onErrorResumeNext(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return it.length===1&&isArray$4(it[0])&&(it=it[0]),function(rt){return rt.lift(new OnErrorResumeNextOperator(it))}}var OnErrorResumeNextOperator=function(){function it(tt){this.nextSources=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new OnErrorResumeNextSubscriber(tt,this.nextSources))},it}(),OnErrorResumeNextSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.destination=rt,st.nextSources=at,st}return tt.prototype.notifyError=function(){this.subscribeToNextSource()},tt.prototype.notifyComplete=function(){this.subscribeToNextSource()},tt.prototype._error=function(rt){this.subscribeToNextSource(),this.unsubscribe()},tt.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},tt.prototype.subscribeToNextSource=function(){var rt=this.nextSources.shift();if(rt){var at=new SimpleInnerSubscriber(this),st=this.destination;st.add(at);var ot=innerSubscribe(rt,at);ot!==at&&st.add(ot)}else this.destination.complete()},tt}(SimpleOuterSubscriber);function pairwise(){return function(it){return it.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function it(){}return it.prototype.call=function(tt,rt){return rt.subscribe(new PairwiseSubscriber(tt))},it}(),PairwiseSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this,rt)||this;return at.hasPrev=!1,at}return tt.prototype._next=function(rt){var at;this.hasPrev?at=[this.prev,rt]:this.hasPrev=!0,this.prev=rt,at&&this.destination.next(at)},tt}(Subscriber);function partition(it,tt){return function(rt){return[filter(it,tt)(rt),filter(not$2(it,tt))(rt)]}}function pluck(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];var rt=it.length;if(rt===0)throw new Error("list of properties cannot be empty.");return function(at){return map(plucker(it,rt))(at)}}function plucker(it,tt){var rt=function(at){for(var st=at,ot=0;ot<tt;ot++){var lt=st!=null?st[it[ot]]:void 0;if(lt!==void 0)st=lt;else return}return st};return rt}function publish(it){return it?multicast(function(){return new Subject},it):multicast(new Subject)}function publishBehavior(it){return function(tt){return multicast(new BehaviorSubject(it))(tt)}}function publishLast(){return function(it){return multicast(new AsyncSubject)(it)}}function publishReplay(it,tt,rt,at){rt&&typeof rt!="function"&&(at=rt);var st=typeof rt=="function"?rt:void 0,ot=new ReplaySubject(it,tt,at);return function(lt){return multicast(function(){return ot},st)(lt)}}function race(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return function(at){return it.length===1&&isArray$4(it[0])&&(it=it[0]),at.lift.call(race$1.apply(void 0,[at].concat(it)))}}function repeat(it){return it===void 0&&(it=-1),function(tt){return it===0?empty():it<0?tt.lift(new RepeatOperator(-1,tt)):tt.lift(new RepeatOperator(it-1,tt))}}var RepeatOperator=function(){function it(tt,rt){this.count=tt,this.source=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new RepeatSubscriber(tt,this.count,this.source))},it}(),RepeatSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.count=at,ot.source=st,ot}return tt.prototype.complete=function(){if(!this.isStopped){var rt=this,at=rt.source,st=rt.count;if(st===0)return it.prototype.complete.call(this);st>-1&&(this.count=st-1),at.subscribe(this._unsubscribeAndRecycle())}},tt}(Subscriber);function repeatWhen(it){return function(tt){return tt.lift(new RepeatWhenOperator(it))}}var RepeatWhenOperator=function(){function it(tt){this.notifier=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new RepeatWhenSubscriber(tt,this.notifier,rt))},it}(),RepeatWhenSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.notifier=at,ot.source=st,ot.sourceIsBeingSubscribedTo=!0,ot}return tt.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},tt.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return it.prototype.complete.call(this)},tt.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return it.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},tt.prototype._unsubscribe=function(){var rt=this,at=rt.notifications,st=rt.retriesSubscription;at&&(at.unsubscribe(),this.notifications=void 0),st&&(st.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},tt.prototype._unsubscribeAndRecycle=function(){var rt=this._unsubscribe;return this._unsubscribe=null,it.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=rt,this},tt.prototype.subscribeToRetries=function(){this.notifications=new Subject;var rt;try{var at=this.notifier;rt=at(this.notifications)}catch{return it.prototype.complete.call(this)}this.retries=rt,this.retriesSubscription=innerSubscribe(rt,new SimpleInnerSubscriber(this))},tt}(SimpleOuterSubscriber);function retry(it){return it===void 0&&(it=-1),function(tt){return tt.lift(new RetryOperator(it,tt))}}var RetryOperator=function(){function it(tt,rt){this.count=tt,this.source=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new RetrySubscriber(tt,this.count,this.source))},it}(),RetrySubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.count=at,ot.source=st,ot}return tt.prototype.error=function(rt){if(!this.isStopped){var at=this,st=at.source,ot=at.count;if(ot===0)return it.prototype.error.call(this,rt);ot>-1&&(this.count=ot-1),st.subscribe(this._unsubscribeAndRecycle())}},tt}(Subscriber);function retryWhen(it){return function(tt){return tt.lift(new RetryWhenOperator(it,tt))}}var RetryWhenOperator=function(){function it(tt,rt){this.notifier=tt,this.source=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new RetryWhenSubscriber(tt,this.notifier,this.source))},it}(),RetryWhenSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.notifier=at,ot.source=st,ot}return tt.prototype.error=function(rt){if(!this.isStopped){var at=this.errors,st=this.retries,ot=this.retriesSubscription;if(st)this.errors=void 0,this.retriesSubscription=void 0;else{at=new Subject;try{var lt=this.notifier;st=lt(at)}catch(ut){return it.prototype.error.call(this,ut)}ot=innerSubscribe(st,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=at,this.retries=st,this.retriesSubscription=ot,at.next(rt)}},tt.prototype._unsubscribe=function(){var rt=this,at=rt.errors,st=rt.retriesSubscription;at&&(at.unsubscribe(),this.errors=void 0),st&&(st.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},tt.prototype.notifyNext=function(){var rt=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=rt,this.source.subscribe(this)},tt}(SimpleOuterSubscriber);function sample(it){return function(tt){return tt.lift(new SampleOperator(it))}}var SampleOperator=function(){function it(tt){this.notifier=tt}return it.prototype.call=function(tt,rt){var at=new SampleSubscriber(tt),st=rt.subscribe(at);return st.add(innerSubscribe(this.notifier,new SimpleInnerSubscriber(at))),st},it}(),SampleSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(){var rt=it!==null&&it.apply(this,arguments)||this;return rt.hasValue=!1,rt}return tt.prototype._next=function(rt){this.value=rt,this.hasValue=!0},tt.prototype.notifyNext=function(){this.emitValue()},tt.prototype.notifyComplete=function(){this.emitValue()},tt.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},tt}(SimpleOuterSubscriber);function sampleTime(it,tt){return tt===void 0&&(tt=async),function(rt){return rt.lift(new SampleTimeOperator(it,tt))}}var SampleTimeOperator=function(){function it(tt,rt){this.period=tt,this.scheduler=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new SampleTimeSubscriber(tt,this.period,this.scheduler))},it}(),SampleTimeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.period=at,ot.scheduler=st,ot.hasValue=!1,ot.add(st.schedule(dispatchNotification,at,{subscriber:ot,period:at})),ot}return tt.prototype._next=function(rt){this.lastValue=rt,this.hasValue=!0},tt.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},tt}(Subscriber);function dispatchNotification(it){var tt=it.subscriber,rt=it.period;tt.notifyNext(),this.schedule(it,rt)}function sequenceEqual(it,tt){return function(rt){return rt.lift(new SequenceEqualOperator(it,tt))}}var SequenceEqualOperator=function(){function it(tt,rt){this.compareTo=tt,this.comparator=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new SequenceEqualSubscriber(tt,this.compareTo,this.comparator))},it}(),SequenceEqualSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.compareTo=at,ot.comparator=st,ot._a=[],ot._b=[],ot._oneComplete=!1,ot.destination.add(at.subscribe(new SequenceEqualCompareToSubscriber(rt,ot))),ot}return tt.prototype._next=function(rt){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(rt),this.checkValues())},tt.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},tt.prototype.checkValues=function(){for(var rt=this,at=rt._a,st=rt._b,ot=rt.comparator;at.length>0&&st.length>0;){var lt=at.shift(),ut=st.shift(),ht=!1;try{ht=ot?ot(lt,ut):lt===ut}catch(mt){this.destination.error(mt)}ht||this.emit(!1)}},tt.prototype.emit=function(rt){var at=this.destination;at.next(rt),at.complete()},tt.prototype.nextB=function(rt){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(rt),this.checkValues())},tt.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},tt}(Subscriber),SequenceEqualCompareToSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.parent=at,st}return tt.prototype._next=function(rt){this.parent.nextB(rt)},tt.prototype._error=function(rt){this.parent.error(rt),this.unsubscribe()},tt.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},tt}(Subscriber);function shareSubjectFactory(){return new Subject}function share(){return function(it){return refCount()(multicast(shareSubjectFactory)(it))}}function shareReplay(it,tt,rt){var at;return it&&typeof it=="object"?at=it:at={bufferSize:it,windowTime:tt,refCount:!1,scheduler:rt},function(st){return st.lift(shareReplayOperator(at))}}function shareReplayOperator(it){var tt=it.bufferSize,rt=tt===void 0?Number.POSITIVE_INFINITY:tt,at=it.windowTime,st=at===void 0?Number.POSITIVE_INFINITY:at,ot=it.refCount,lt=it.scheduler,ut,ht=0,mt,bt=!1,vt=!1;return function(xt){ht++;var Et;!ut||bt?(bt=!1,ut=new ReplaySubject(rt,st,lt),Et=ut.subscribe(this),mt=xt.subscribe({next:function(Tt){ut.next(Tt)},error:function(Tt){bt=!0,ut.error(Tt)},complete:function(){vt=!0,mt=void 0,ut.complete()}}),vt&&(mt=void 0)):Et=ut.subscribe(this),this.add(function(){ht--,Et.unsubscribe(),Et=void 0,mt&&!vt&&ot&&ht===0&&(mt.unsubscribe(),mt=void 0,ut=void 0)})}}function single(it){return function(tt){return tt.lift(new SingleOperator(it,tt))}}var SingleOperator=function(){function it(tt,rt){this.predicate=tt,this.source=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new SingleSubscriber(tt,this.predicate,this.source))},it}(),SingleSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.predicate=at,ot.source=st,ot.seenValue=!1,ot.index=0,ot}return tt.prototype.applySingleValue=function(rt){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=rt)},tt.prototype._next=function(rt){var at=this.index++;this.predicate?this.tryNext(rt,at):this.applySingleValue(rt)},tt.prototype.tryNext=function(rt,at){try{this.predicate(rt,at,this.source)&&this.applySingleValue(rt)}catch(st){this.destination.error(st)}},tt.prototype._complete=function(){var rt=this.destination;this.index>0?(rt.next(this.seenValue?this.singleValue:void 0),rt.complete()):rt.error(new EmptyError)},tt}(Subscriber);function skip(it){return function(tt){return tt.lift(new SkipOperator(it))}}var SkipOperator=function(){function it(tt){this.total=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new SkipSubscriber(tt,this.total))},it}(),SkipSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.total=at,st.count=0,st}return tt.prototype._next=function(rt){++this.count>this.total&&this.destination.next(rt)},tt}(Subscriber);function skipLast(it){return function(tt){return tt.lift(new SkipLastOperator(it))}}var SkipLastOperator=function(){function it(tt){if(this._skipCount=tt,this._skipCount<0)throw new ArgumentOutOfRangeError}return it.prototype.call=function(tt,rt){return this._skipCount===0?rt.subscribe(new Subscriber(tt)):rt.subscribe(new SkipLastSubscriber(tt,this._skipCount))},it}(),SkipLastSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st._skipCount=at,st._count=0,st._ring=new Array(at),st}return tt.prototype._next=function(rt){var at=this._skipCount,st=this._count++;if(st<at)this._ring[st]=rt;else{var ot=st%at,lt=this._ring,ut=lt[ot];lt[ot]=rt,this.destination.next(ut)}},tt}(Subscriber);function skipUntil(it){return function(tt){return tt.lift(new SkipUntilOperator(it))}}var SkipUntilOperator=function(){function it(tt){this.notifier=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new SkipUntilSubscriber(tt,this.notifier))},it}(),SkipUntilSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;st.hasValue=!1;var ot=new SimpleInnerSubscriber(st);st.add(ot),st.innerSubscription=ot;var lt=innerSubscribe(at,ot);return lt!==ot&&(st.add(lt),st.innerSubscription=lt),st}return tt.prototype._next=function(rt){this.hasValue&&it.prototype._next.call(this,rt)},tt.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},tt.prototype.notifyComplete=function(){},tt}(SimpleOuterSubscriber);function skipWhile(it){return function(tt){return tt.lift(new SkipWhileOperator(it))}}var SkipWhileOperator=function(){function it(tt){this.predicate=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new SkipWhileSubscriber(tt,this.predicate))},it}(),SkipWhileSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.predicate=at,st.skipping=!0,st.index=0,st}return tt.prototype._next=function(rt){var at=this.destination;this.skipping&&this.tryCallPredicate(rt),this.skipping||at.next(rt)},tt.prototype.tryCallPredicate=function(rt){try{var at=this.predicate(rt,this.index++);this.skipping=Boolean(at)}catch(st){this.destination.error(st)}},tt}(Subscriber);function startWith(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];var rt=it[it.length-1];return isScheduler(rt)?(it.pop(),function(at){return concat$2(it,at,rt)}):function(at){return concat$2(it,at)}}var SubscribeOnObservable=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){at===void 0&&(at=0),st===void 0&&(st=asap);var ot=it.call(this)||this;return ot.source=rt,ot.delayTime=at,ot.scheduler=st,(!isNumeric(at)||at<0)&&(ot.delayTime=0),(!st||typeof st.schedule!="function")&&(ot.scheduler=asap),ot}return tt.create=function(rt,at,st){return at===void 0&&(at=0),st===void 0&&(st=asap),new tt(rt,at,st)},tt.dispatch=function(rt){var at=rt.source,st=rt.subscriber;return this.add(at.subscribe(st))},tt.prototype._subscribe=function(rt){var at=this.delayTime,st=this.source,ot=this.scheduler;return ot.schedule(tt.dispatch,at,{source:st,subscriber:rt})},tt}(Observable);function subscribeOn(it,tt){return tt===void 0&&(tt=0),function(at){return at.lift(new SubscribeOnOperator(it,tt))}}var SubscribeOnOperator=function(){function it(tt,rt){this.scheduler=tt,this.delay=rt}return it.prototype.call=function(tt,rt){return new SubscribeOnObservable(rt,this.delay,this.scheduler).subscribe(tt)},it}();function switchMap(it,tt){return typeof tt=="function"?function(rt){return rt.pipe(switchMap(function(at,st){return from$2(it(at,st)).pipe(map(function(ot,lt){return tt(at,ot,st,lt)}))}))}:function(rt){return rt.lift(new SwitchMapOperator(it))}}var SwitchMapOperator=function(){function it(tt){this.project=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new SwitchMapSubscriber(tt,this.project))},it}(),SwitchMapSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.project=at,st.index=0,st}return tt.prototype._next=function(rt){var at,st=this.index++;try{at=this.project(rt,st)}catch(ot){this.destination.error(ot);return}this._innerSub(at)},tt.prototype._innerSub=function(rt){var at=this.innerSubscription;at&&at.unsubscribe();var st=new SimpleInnerSubscriber(this),ot=this.destination;ot.add(st),this.innerSubscription=innerSubscribe(rt,st),this.innerSubscription!==st&&ot.add(this.innerSubscription)},tt.prototype._complete=function(){var rt=this.innerSubscription;(!rt||rt.closed)&&it.prototype._complete.call(this),this.unsubscribe()},tt.prototype._unsubscribe=function(){this.innerSubscription=void 0},tt.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&it.prototype._complete.call(this)},tt.prototype.notifyNext=function(rt){this.destination.next(rt)},tt}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity)}function switchMapTo(it,tt){return tt?switchMap(function(){return it},tt):switchMap(function(){return it})}function takeUntil(it){return function(tt){return tt.lift(new TakeUntilOperator(it))}}var TakeUntilOperator=function(){function it(tt){this.notifier=tt}return it.prototype.call=function(tt,rt){var at=new TakeUntilSubscriber(tt),st=innerSubscribe(this.notifier,new SimpleInnerSubscriber(at));return st&&!at.seenValue?(at.add(st),rt.subscribe(at)):at},it}(),TakeUntilSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this,rt)||this;return at.seenValue=!1,at}return tt.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},tt.prototype.notifyComplete=function(){},tt}(SimpleOuterSubscriber);function takeWhile(it,tt){return tt===void 0&&(tt=!1),function(rt){return rt.lift(new TakeWhileOperator(it,tt))}}var TakeWhileOperator=function(){function it(tt,rt){this.predicate=tt,this.inclusive=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new TakeWhileSubscriber(tt,this.predicate,this.inclusive))},it}(),TakeWhileSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.predicate=at,ot.inclusive=st,ot.index=0,ot}return tt.prototype._next=function(rt){var at=this.destination,st;try{st=this.predicate(rt,this.index++)}catch(ot){at.error(ot);return}this.nextOrComplete(rt,st)},tt.prototype.nextOrComplete=function(rt,at){var st=this.destination;Boolean(at)?st.next(rt):(this.inclusive&&st.next(rt),st.complete())},tt}(Subscriber);function tap(it,tt,rt){return function(st){return st.lift(new DoOperator(it,tt,rt))}}var DoOperator=function(){function it(tt,rt,at){this.nextOrObserver=tt,this.error=rt,this.complete=at}return it.prototype.call=function(tt,rt){return rt.subscribe(new TapSubscriber(tt,this.nextOrObserver,this.error,this.complete))},it}(),TapSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot){var lt=it.call(this,rt)||this;return lt._tapNext=noop$2,lt._tapError=noop$2,lt._tapComplete=noop$2,lt._tapError=st||noop$2,lt._tapComplete=ot||noop$2,isFunction$1(at)?(lt._context=lt,lt._tapNext=at):at&&(lt._context=at,lt._tapNext=at.next||noop$2,lt._tapError=at.error||noop$2,lt._tapComplete=at.complete||noop$2),lt}return tt.prototype._next=function(rt){try{this._tapNext.call(this._context,rt)}catch(at){this.destination.error(at);return}this.destination.next(rt)},tt.prototype._error=function(rt){try{this._tapError.call(this._context,rt)}catch(at){this.destination.error(at);return}this.destination.error(rt)},tt.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(rt){this.destination.error(rt);return}return this.destination.complete()},tt}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttle$1(it,tt){return tt===void 0&&(tt=defaultThrottleConfig),function(rt){return rt.lift(new ThrottleOperator(it,!!tt.leading,!!tt.trailing))}}var ThrottleOperator=function(){function it(tt,rt,at){this.durationSelector=tt,this.leading=rt,this.trailing=at}return it.prototype.call=function(tt,rt){return rt.subscribe(new ThrottleSubscriber(tt,this.durationSelector,this.leading,this.trailing))},it}(),ThrottleSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot){var lt=it.call(this,rt)||this;return lt.destination=rt,lt.durationSelector=at,lt._leading=st,lt._trailing=ot,lt._hasValue=!1,lt}return tt.prototype._next=function(rt){this._hasValue=!0,this._sendValue=rt,this._throttled||(this._leading?this.send():this.throttle(rt))},tt.prototype.send=function(){var rt=this,at=rt._hasValue,st=rt._sendValue;at&&(this.destination.next(st),this.throttle(st)),this._hasValue=!1,this._sendValue=void 0},tt.prototype.throttle=function(rt){var at=this.tryDurationSelector(rt);at&&this.add(this._throttled=innerSubscribe(at,new SimpleInnerSubscriber(this)))},tt.prototype.tryDurationSelector=function(rt){try{return this.durationSelector(rt)}catch(at){return this.destination.error(at),null}},tt.prototype.throttlingDone=function(){var rt=this,at=rt._throttled,st=rt._trailing;at&&at.unsubscribe(),this._throttled=void 0,st&&this.send()},tt.prototype.notifyNext=function(){this.throttlingDone()},tt.prototype.notifyComplete=function(){this.throttlingDone()},tt}(SimpleOuterSubscriber);function throttleTime(it,tt,rt){return tt===void 0&&(tt=async),rt===void 0&&(rt=defaultThrottleConfig),function(at){return at.lift(new ThrottleTimeOperator(it,tt,rt.leading,rt.trailing))}}var ThrottleTimeOperator=function(){function it(tt,rt,at,st){this.duration=tt,this.scheduler=rt,this.leading=at,this.trailing=st}return it.prototype.call=function(tt,rt){return rt.subscribe(new ThrottleTimeSubscriber(tt,this.duration,this.scheduler,this.leading,this.trailing))},it}(),ThrottleTimeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot,lt){var ut=it.call(this,rt)||this;return ut.duration=at,ut.scheduler=st,ut.leading=ot,ut.trailing=lt,ut._hasTrailingValue=!1,ut._trailingValue=null,ut}return tt.prototype._next=function(rt){this.throttled?this.trailing&&(this._trailingValue=rt,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(rt):this.trailing&&(this._trailingValue=rt,this._hasTrailingValue=!0))},tt.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},tt.prototype.clearThrottle=function(){var rt=this.throttled;rt&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),rt.unsubscribe(),this.remove(rt),this.throttled=null)},tt}(Subscriber);function dispatchNext(it){var tt=it.subscriber;tt.clearThrottle()}function timeInterval(it){return it===void 0&&(it=async),function(tt){return defer(function(){return tt.pipe(scan(function(rt,at){var st=rt.current;return{value:at,current:it.now(),last:st}},{current:it.now(),value:void 0,last:void 0}),map(function(rt){var at=rt.current,st=rt.last,ot=rt.value;return new TimeInterval(ot,at-st)}))})}}var TimeInterval=function(){function it(tt,rt){this.value=tt,this.interval=rt}return it}();function timeoutWith(it,tt,rt){return rt===void 0&&(rt=async),function(at){var st=isDate(it),ot=st?+it-rt.now():Math.abs(it);return at.lift(new TimeoutWithOperator(ot,st,tt,rt))}}var TimeoutWithOperator=function(){function it(tt,rt,at,st){this.waitFor=tt,this.absoluteTimeout=rt,this.withObservable=at,this.scheduler=st}return it.prototype.call=function(tt,rt){return rt.subscribe(new TimeoutWithSubscriber(tt,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},it}(),TimeoutWithSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot,lt){var ut=it.call(this,rt)||this;return ut.absoluteTimeout=at,ut.waitFor=st,ut.withObservable=ot,ut.scheduler=lt,ut.scheduleTimeout(),ut}return tt.dispatchTimeout=function(rt){var at=rt.withObservable;rt._unsubscribeAndRecycle(),rt.add(innerSubscribe(at,new SimpleInnerSubscriber(rt)))},tt.prototype.scheduleTimeout=function(){var rt=this.action;rt?this.action=rt.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(tt.dispatchTimeout,this.waitFor,this))},tt.prototype._next=function(rt){this.absoluteTimeout||this.scheduleTimeout(),it.prototype._next.call(this,rt)},tt.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},tt}(SimpleOuterSubscriber);function timeout(it,tt){return tt===void 0&&(tt=async),timeoutWith(it,throwError(new TimeoutError),tt)}function timestamp(it){return it===void 0&&(it=async),map(function(tt){return new Timestamp(tt,it.now())})}var Timestamp=function(){function it(tt,rt){this.value=tt,this.timestamp=rt}return it}();function toArrayReducer(it,tt,rt){return rt===0?[tt]:(it.push(tt),it)}function toArray$1(){return reduce(toArrayReducer,[])}function window$1(it){return function(rt){return rt.lift(new WindowOperator$1(it))}}var WindowOperator$1=function(){function it(tt){this.windowBoundaries=tt}return it.prototype.call=function(tt,rt){var at=new WindowSubscriber$1(tt),st=rt.subscribe(at);return st.closed||at.add(innerSubscribe(this.windowBoundaries,new SimpleInnerSubscriber(at))),st},it}(),WindowSubscriber$1=function(it){tslib.exports.__extends(tt,it);function tt(rt){var at=it.call(this,rt)||this;return at.window=new Subject,rt.next(at.window),at}return tt.prototype.notifyNext=function(){this.openWindow()},tt.prototype.notifyError=function(rt){this._error(rt)},tt.prototype.notifyComplete=function(){this._complete()},tt.prototype._next=function(rt){this.window.next(rt)},tt.prototype._error=function(rt){this.window.error(rt),this.destination.error(rt)},tt.prototype._complete=function(){this.window.complete(),this.destination.complete()},tt.prototype._unsubscribe=function(){this.window=null},tt.prototype.openWindow=function(){var rt=this.window;rt&&rt.complete();var at=this.destination,st=this.window=new Subject;at.next(st)},tt}(SimpleOuterSubscriber);function windowCount(it,tt){return tt===void 0&&(tt=0),function(at){return at.lift(new WindowCountOperator(it,tt))}}var WindowCountOperator=function(){function it(tt,rt){this.windowSize=tt,this.startWindowEvery=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new WindowCountSubscriber(tt,this.windowSize,this.startWindowEvery))},it}(),WindowCountSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.destination=rt,ot.windowSize=at,ot.startWindowEvery=st,ot.windows=[new Subject],ot.count=0,rt.next(ot.windows[0]),ot}return tt.prototype._next=function(rt){for(var at=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,st=this.destination,ot=this.windowSize,lt=this.windows,ut=lt.length,ht=0;ht<ut&&!this.closed;ht++)lt[ht].next(rt);var mt=this.count-ot+1;if(mt>=0&&mt%at===0&&!this.closed&&lt.shift().complete(),++this.count%at===0&&!this.closed){var bt=new Subject;lt.push(bt),st.next(bt)}},tt.prototype._error=function(rt){var at=this.windows;if(at)for(;at.length>0&&!this.closed;)at.shift().error(rt);this.destination.error(rt)},tt.prototype._complete=function(){var rt=this.windows;if(rt)for(;rt.length>0&&!this.closed;)rt.shift().complete();this.destination.complete()},tt.prototype._unsubscribe=function(){this.count=0,this.windows=null},tt}(Subscriber);function windowTime(it){var tt=async,rt=null,at=Number.POSITIVE_INFINITY;return isScheduler(arguments[3])&&(tt=arguments[3]),isScheduler(arguments[2])?tt=arguments[2]:isNumeric(arguments[2])&&(at=Number(arguments[2])),isScheduler(arguments[1])?tt=arguments[1]:isNumeric(arguments[1])&&(rt=Number(arguments[1])),function(ot){return ot.lift(new WindowTimeOperator(it,rt,at,tt))}}var WindowTimeOperator=function(){function it(tt,rt,at,st){this.windowTimeSpan=tt,this.windowCreationInterval=rt,this.maxWindowSize=at,this.scheduler=st}return it.prototype.call=function(tt,rt){return rt.subscribe(new WindowTimeSubscriber(tt,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},it}(),CountedSubject=function(it){tslib.exports.__extends(tt,it);function tt(){var rt=it!==null&&it.apply(this,arguments)||this;return rt._numberOfNextedValues=0,rt}return tt.prototype.next=function(rt){this._numberOfNextedValues++,it.prototype.next.call(this,rt)},Object.defineProperty(tt.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),tt}(Subject),WindowTimeSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st,ot,lt){var ut=it.call(this,rt)||this;ut.destination=rt,ut.windowTimeSpan=at,ut.windowCreationInterval=st,ut.maxWindowSize=ot,ut.scheduler=lt,ut.windows=[];var ht=ut.openWindow();if(st!==null&&st>=0){var mt={subscriber:ut,window:ht,context:null},bt={windowTimeSpan:at,windowCreationInterval:st,subscriber:ut,scheduler:lt};ut.add(lt.schedule(dispatchWindowClose,at,mt)),ut.add(lt.schedule(dispatchWindowCreation,st,bt))}else{var vt={subscriber:ut,window:ht,windowTimeSpan:at};ut.add(lt.schedule(dispatchWindowTimeSpanOnly,at,vt))}return ut}return tt.prototype._next=function(rt){for(var at=this.windows,st=at.length,ot=0;ot<st;ot++){var lt=at[ot];lt.closed||(lt.next(rt),lt.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(lt))}},tt.prototype._error=function(rt){for(var at=this.windows;at.length>0;)at.shift().error(rt);this.destination.error(rt)},tt.prototype._complete=function(){for(var rt=this.windows;rt.length>0;){var at=rt.shift();at.closed||at.complete()}this.destination.complete()},tt.prototype.openWindow=function(){var rt=new CountedSubject;this.windows.push(rt);var at=this.destination;return at.next(rt),rt},tt.prototype.closeWindow=function(rt){rt.complete();var at=this.windows;at.splice(at.indexOf(rt),1)},tt}(Subscriber);function dispatchWindowTimeSpanOnly(it){var tt=it.subscriber,rt=it.windowTimeSpan,at=it.window;at&&tt.closeWindow(at),it.window=tt.openWindow(),this.schedule(it,rt)}function dispatchWindowCreation(it){var tt=it.windowTimeSpan,rt=it.subscriber,at=it.scheduler,st=it.windowCreationInterval,ot=rt.openWindow(),lt=this,ut={action:lt,subscription:null},ht={subscriber:rt,window:ot,context:ut};ut.subscription=at.schedule(dispatchWindowClose,tt,ht),lt.add(ut.subscription),lt.schedule(it,st)}function dispatchWindowClose(it){var tt=it.subscriber,rt=it.window,at=it.context;at&&at.action&&at.subscription&&at.action.remove(at.subscription),tt.closeWindow(rt)}function windowToggle(it,tt){return function(rt){return rt.lift(new WindowToggleOperator(it,tt))}}var WindowToggleOperator=function(){function it(tt,rt){this.openings=tt,this.closingSelector=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new WindowToggleSubscriber(tt,this.openings,this.closingSelector))},it}(),WindowToggleSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;return ot.openings=at,ot.closingSelector=st,ot.contexts=[],ot.add(ot.openSubscription=subscribeToResult(ot,at,at)),ot}return tt.prototype._next=function(rt){var at=this.contexts;if(at)for(var st=at.length,ot=0;ot<st;ot++)at[ot].window.next(rt)},tt.prototype._error=function(rt){var at=this.contexts;if(this.contexts=null,at)for(var st=at.length,ot=-1;++ot<st;){var lt=at[ot];lt.window.error(rt),lt.subscription.unsubscribe()}it.prototype._error.call(this,rt)},tt.prototype._complete=function(){var rt=this.contexts;if(this.contexts=null,rt)for(var at=rt.length,st=-1;++st<at;){var ot=rt[st];ot.window.complete(),ot.subscription.unsubscribe()}it.prototype._complete.call(this)},tt.prototype._unsubscribe=function(){var rt=this.contexts;if(this.contexts=null,rt)for(var at=rt.length,st=-1;++st<at;){var ot=rt[st];ot.window.unsubscribe(),ot.subscription.unsubscribe()}},tt.prototype.notifyNext=function(rt,at,st,ot,lt){if(rt===this.openings){var ut=void 0;try{var ht=this.closingSelector;ut=ht(at)}catch(xt){return this.error(xt)}var mt=new Subject,bt=new Subscription,vt={window:mt,subscription:bt};this.contexts.push(vt);var At=subscribeToResult(this,ut,vt);At.closed?this.closeWindow(this.contexts.length-1):(At.context=vt,bt.add(At)),this.destination.next(mt)}else this.closeWindow(this.contexts.indexOf(rt))},tt.prototype.notifyError=function(rt){this.error(rt)},tt.prototype.notifyComplete=function(rt){rt!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(rt.context))},tt.prototype.closeWindow=function(rt){if(rt!==-1){var at=this.contexts,st=at[rt],ot=st.window,lt=st.subscription;at.splice(rt,1),ot.complete(),lt.unsubscribe()}},tt}(OuterSubscriber);function windowWhen(it){return function(rt){return rt.lift(new WindowOperator(it))}}var WindowOperator=function(){function it(tt){this.closingSelector=tt}return it.prototype.call=function(tt,rt){return rt.subscribe(new WindowSubscriber(tt,this.closingSelector))},it}(),WindowSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at){var st=it.call(this,rt)||this;return st.destination=rt,st.closingSelector=at,st.openWindow(),st}return tt.prototype.notifyNext=function(rt,at,st,ot,lt){this.openWindow(lt)},tt.prototype.notifyError=function(rt){this._error(rt)},tt.prototype.notifyComplete=function(rt){this.openWindow(rt)},tt.prototype._next=function(rt){this.window.next(rt)},tt.prototype._error=function(rt){this.window.error(rt),this.destination.error(rt),this.unsubscribeClosingNotification()},tt.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},tt.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},tt.prototype.openWindow=function(rt){rt===void 0&&(rt=null),rt&&(this.remove(rt),rt.unsubscribe());var at=this.window;at&&at.complete();var st=this.window=new Subject;this.destination.next(st);var ot;try{var lt=this.closingSelector;ot=lt()}catch(ut){this.destination.error(ut),this.window.error(ut);return}this.add(this.closingNotification=subscribeToResult(this,ot))},tt}(OuterSubscriber);function withLatestFrom(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return function(rt){var at;typeof it[it.length-1]=="function"&&(at=it.pop());var st=it;return rt.lift(new WithLatestFromOperator(st,at))}}var WithLatestFromOperator=function(){function it(tt,rt){this.observables=tt,this.project=rt}return it.prototype.call=function(tt,rt){return rt.subscribe(new WithLatestFromSubscriber(tt,this.observables,this.project))},it}(),WithLatestFromSubscriber=function(it){tslib.exports.__extends(tt,it);function tt(rt,at,st){var ot=it.call(this,rt)||this;ot.observables=at,ot.project=st,ot.toRespond=[];var lt=at.length;ot.values=new Array(lt);for(var ut=0;ut<lt;ut++)ot.toRespond.push(ut);for(var ut=0;ut<lt;ut++){var ht=at[ut];ot.add(subscribeToResult(ot,ht,void 0,ut))}return ot}return tt.prototype.notifyNext=function(rt,at,st){this.values[st]=at;var ot=this.toRespond;if(ot.length>0){var lt=ot.indexOf(st);lt!==-1&&ot.splice(lt,1)}},tt.prototype.notifyComplete=function(){},tt.prototype._next=function(rt){if(this.toRespond.length===0){var at=[rt].concat(this.values);this.project?this._tryProject(at):this.destination.next(at)}},tt.prototype._tryProject=function(rt){var at;try{at=this.project.apply(this,rt)}catch(st){this.destination.error(st);return}this.destination.next(at)},tt}(OuterSubscriber);function zip(){for(var it=[],tt=0;tt<arguments.length;tt++)it[tt]=arguments[tt];return function(at){return at.lift.call(zip$1.apply(void 0,[at].concat(it)))}}function zipAll(it){return function(tt){return tt.lift(new ZipOperator(it))}}const operators=Object.freeze(Object.defineProperty({__proto__:null,audit,auditTime,buffer:buffer$1,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,concat:concat$1,concatAll,concatMap,concatMapTo,count,debounce:debounce$1,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustMap,expand,filter,finalize,find,findIndex,first:first$1,groupBy,ignoreElements,isEmpty:isEmpty$3,last:last$1,map,mapTo,materialize,max:max$2,merge:merge$1,mergeAll,mergeMap,flatMap,mergeMapTo,mergeScan,min:min$2,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,reduce,repeat,repeatWhen,retry,retryWhen,refCount,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,take,takeLast,takeUntil,takeWhile,tap,throttle:throttle$1,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp,toArray:toArray$1,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll},Symbol.toStringTag,{value:"Module"})),require$$3$1=getAugmentedNamespace(operators);var WalletSDKConnection$1={},ClientMessage={};Object.defineProperty(ClientMessage,"__esModule",{value:!0}),ClientMessage.ClientMessagePublishEvent=ClientMessage.ClientMessageSetSessionConfig=ClientMessage.ClientMessageGetSessionConfig=ClientMessage.ClientMessageIsLinked=ClientMessage.ClientMessageHostSession=void 0;function ClientMessageHostSession(it){return Object.assign({type:"HostSession"},it)}ClientMessage.ClientMessageHostSession=ClientMessageHostSession;function ClientMessageIsLinked(it){return Object.assign({type:"IsLinked"},it)}ClientMessage.ClientMessageIsLinked=ClientMessageIsLinked;function ClientMessageGetSessionConfig(it){return Object.assign({type:"GetSessionConfig"},it)}ClientMessage.ClientMessageGetSessionConfig=ClientMessageGetSessionConfig;function ClientMessageSetSessionConfig(it){return Object.assign({type:"SetSessionConfig"},it)}ClientMessage.ClientMessageSetSessionConfig=ClientMessageSetSessionConfig;function ClientMessagePublishEvent(it){return Object.assign({type:"PublishEvent"},it)}ClientMessage.ClientMessagePublishEvent=ClientMessagePublishEvent;var RxWebSocket={};(function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.RxWebSocket=it.ConnectionState=void 0;const tt=require$$2$1,rt=require$$3$1;var at;(function(ot){ot[ot.DISCONNECTED=0]="DISCONNECTED",ot[ot.CONNECTING=1]="CONNECTING",ot[ot.CONNECTED=2]="CONNECTED"})(at=it.ConnectionState||(it.ConnectionState={}));class st{constructor(lt,ut=WebSocket){this.WebSocketClass=ut,this.webSocket=null,this.connectionStateSubject=new tt.BehaviorSubject(at.DISCONNECTED),this.incomingDataSubject=new tt.Subject,this.url=lt.replace(/^http/,"ws")}connect(){return this.webSocket?(0,tt.throwError)(new Error("webSocket object is not null")):new tt.Observable(lt=>{let ut;try{this.webSocket=ut=new this.WebSocketClass(this.url)}catch(ht){lt.error(ht);return}this.connectionStateSubject.next(at.CONNECTING),ut.onclose=ht=>{this.clearWebSocket(),lt.error(new Error(`websocket error ${ht.code}: ${ht.reason}`)),this.connectionStateSubject.next(at.DISCONNECTED)},ut.onopen=ht=>{lt.next(),lt.complete(),this.connectionStateSubject.next(at.CONNECTED)},ut.onmessage=ht=>{this.incomingDataSubject.next(ht.data)}}).pipe((0,rt.take)(1))}disconnect(){const{webSocket:lt}=this;if(!!lt){this.clearWebSocket(),this.connectionStateSubject.next(at.DISCONNECTED);try{lt.close()}catch{}}}get connectionState$(){return this.connectionStateSubject.asObservable()}get incomingData$(){return this.incomingDataSubject.asObservable()}get incomingJSONData$(){return this.incomingData$.pipe((0,rt.flatMap)(lt=>{let ut;try{ut=JSON.parse(lt)}catch{return(0,tt.empty)()}return(0,tt.of)(ut)}))}sendData(lt){const{webSocket:ut}=this;if(!ut)throw new Error("websocket is not connected");ut.send(lt)}clearWebSocket(){const{webSocket:lt}=this;!lt||(this.webSocket=null,lt.onclose=null,lt.onerror=null,lt.onmessage=null,lt.onopen=null)}}it.RxWebSocket=st})(RxWebSocket);var ServerMessage={};Object.defineProperty(ServerMessage,"__esModule",{value:!0}),ServerMessage.isServerMessageFail=void 0;function isServerMessageFail(it){return it&&it.type==="Fail"&&typeof it.id=="number"&&typeof it.sessionId=="string"&&typeof it.error=="string"}ServerMessage.isServerMessageFail=isServerMessageFail,Object.defineProperty(WalletSDKConnection$1,"__esModule",{value:!0}),WalletSDKConnection$1.WalletSDKConnection=void 0;const rxjs_1$1=require$$2$1,operators_1$1=require$$3$1,Session_1$1=Session$1,types_1$1=types$2,ClientMessage_1=ClientMessage,DiagnosticLogger_1$1=DiagnosticLogger,RxWebSocket_1=RxWebSocket,ServerMessage_1=ServerMessage,HEARTBEAT_INTERVAL=1e4,REQUEST_TIMEOUT=6e4;class WalletSDKConnection{constructor(tt,rt,at,st,ot=WebSocket){this.sessionId=tt,this.sessionKey=rt,this.diagnostic=st,this.subscriptions=new rxjs_1$1.Subscription,this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,types_1$1.IntNumber)(1),this.connectedSubject=new rxjs_1$1.BehaviorSubject(!1),this.linkedSubject=new rxjs_1$1.BehaviorSubject(!1),this.sessionConfigSubject=new rxjs_1$1.ReplaySubject(1);const lt=new RxWebSocket_1.RxWebSocket(at+"/rpc",ot);this.ws=lt,this.subscriptions.add(lt.connectionState$.pipe((0,operators_1$1.tap)(ut=>{var ht;return(ht=this.diagnostic)===null||ht===void 0?void 0:ht.log(DiagnosticLogger_1$1.EVENTS.CONNECTED_STATE_CHANGE,{state:ut,sessionIdHash:Session_1$1.Session.hash(tt)})}),(0,operators_1$1.skip)(1),(0,operators_1$1.filter)(ut=>ut===RxWebSocket_1.ConnectionState.DISCONNECTED&&!this.destroyed),(0,operators_1$1.delay)(5e3),(0,operators_1$1.filter)(ut=>!this.destroyed),(0,operators_1$1.flatMap)(ut=>lt.connect()),(0,operators_1$1.retry)()).subscribe()),this.subscriptions.add(lt.connectionState$.pipe((0,operators_1$1.skip)(2),(0,operators_1$1.switchMap)(ut=>(0,rxjs_1$1.iif)(()=>ut===RxWebSocket_1.ConnectionState.CONNECTED,this.authenticate().pipe((0,operators_1$1.tap)(ht=>this.sendIsLinked()),(0,operators_1$1.tap)(ht=>this.sendGetSessionConfig()),(0,operators_1$1.map)(ht=>!0)),(0,rxjs_1$1.of)(!1))),(0,operators_1$1.distinctUntilChanged)(),(0,operators_1$1.catchError)(ut=>(0,rxjs_1$1.of)(!1))).subscribe(ut=>this.connectedSubject.next(ut))),this.subscriptions.add(lt.connectionState$.pipe((0,operators_1$1.skip)(1),(0,operators_1$1.switchMap)(ut=>(0,rxjs_1$1.iif)(()=>ut===RxWebSocket_1.ConnectionState.CONNECTED,(0,rxjs_1$1.timer)(0,HEARTBEAT_INTERVAL)))).subscribe(ut=>ut===0?this.updateLastHeartbeat():this.heartbeat())),this.subscriptions.add(lt.incomingData$.pipe((0,operators_1$1.filter)(ut=>ut==="h")).subscribe(ut=>this.updateLastHeartbeat())),this.subscriptions.add(lt.incomingJSONData$.pipe((0,operators_1$1.filter)(ut=>["IsLinkedOK","Linked"].includes(ut.type))).subscribe(ut=>{var ht;const mt=ut;(ht=this.diagnostic)===null||ht===void 0||ht.log(DiagnosticLogger_1$1.EVENTS.LINKED,{sessionIdHash:Session_1$1.Session.hash(tt),linked:mt.linked,type:ut.type,onlineGuests:mt.onlineGuests}),this.linkedSubject.next(mt.linked||mt.onlineGuests>0)})),this.subscriptions.add(lt.incomingJSONData$.pipe((0,operators_1$1.filter)(ut=>["GetSessionConfigOK","SessionConfigUpdated"].includes(ut.type))).subscribe(ut=>{var ht;const mt=ut;(ht=this.diagnostic)===null||ht===void 0||ht.log(DiagnosticLogger_1$1.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:Session_1$1.Session.hash(tt),metadata_keys:mt&&mt.metadata?Object.keys(mt.metadata):void 0}),this.sessionConfigSubject.next({webhookId:mt.webhookId,webhookUrl:mt.webhookUrl,metadata:mt.metadata})}))}connect(){var tt;if(this.destroyed)throw new Error("instance is destroyed");(tt=this.diagnostic)===null||tt===void 0||tt.log(DiagnosticLogger_1$1.EVENTS.STARTED_CONNECTING,{sessionIdHash:Session_1$1.Session.hash(this.sessionId)}),this.ws.connect().subscribe()}destroy(){var tt;this.subscriptions.unsubscribe(),this.ws.disconnect(),(tt=this.diagnostic)===null||tt===void 0||tt.log(DiagnosticLogger_1$1.EVENTS.DISCONNECTED,{sessionIdHash:Session_1$1.Session.hash(this.sessionId)}),this.destroyed=!0}get isDestroyed(){return this.destroyed}get connected$(){return this.connectedSubject.asObservable()}get onceConnected$(){return this.connected$.pipe((0,operators_1$1.filter)(tt=>tt),(0,operators_1$1.take)(1),(0,operators_1$1.map)(()=>{}))}get linked$(){return this.linkedSubject.asObservable()}get onceLinked$(){return this.linked$.pipe((0,operators_1$1.filter)(tt=>tt),(0,operators_1$1.take)(1),(0,operators_1$1.map)(()=>{}))}get sessionConfig$(){return this.sessionConfigSubject.asObservable()}get incomingEvent$(){return this.ws.incomingJSONData$.pipe((0,operators_1$1.filter)(tt=>{if(tt.type!=="Event")return!1;const rt=tt;return typeof rt.sessionId=="string"&&typeof rt.eventId=="string"&&typeof rt.event=="string"&&typeof rt.data=="string"}),(0,operators_1$1.map)(tt=>tt))}setSessionMetadata(tt,rt){const at=(0,ClientMessage_1.ClientMessageSetSessionConfig)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId,metadata:{[tt]:rt}});return this.onceConnected$.pipe((0,operators_1$1.flatMap)(st=>this.makeRequest(at)),(0,operators_1$1.map)(st=>{if((0,ServerMessage_1.isServerMessageFail)(st))throw new Error(st.error||"failed to set session metadata")}))}publishEvent(tt,rt,at=!1){const st=(0,ClientMessage_1.ClientMessagePublishEvent)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId,event:tt,data:rt,callWebhook:at});return this.onceLinked$.pipe((0,operators_1$1.flatMap)(ot=>this.makeRequest(st)),(0,operators_1$1.map)(ot=>{if((0,ServerMessage_1.isServerMessageFail)(ot))throw new Error(ot.error||"failed to publish event");return ot.eventId}))}sendData(tt){this.ws.sendData(JSON.stringify(tt))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>HEARTBEAT_INTERVAL*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}makeRequest(tt,rt=REQUEST_TIMEOUT){const at=tt.id;try{this.sendData(tt)}catch(st){return(0,rxjs_1$1.throwError)(st)}return this.ws.incomingJSONData$.pipe((0,operators_1$1.timeoutWith)(rt,(0,rxjs_1$1.throwError)(new Error(`request ${at} timed out`))),(0,operators_1$1.filter)(st=>st.id===at),(0,operators_1$1.take)(1))}authenticate(){const tt=(0,ClientMessage_1.ClientMessageHostSession)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId,sessionKey:this.sessionKey});return this.makeRequest(tt).pipe((0,operators_1$1.map)(rt=>{if((0,ServerMessage_1.isServerMessageFail)(rt))throw new Error(rt.error||"failed to authentcate")}))}sendIsLinked(){const tt=(0,ClientMessage_1.ClientMessageIsLinked)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(tt)}sendGetSessionConfig(){const tt=(0,ClientMessage_1.ClientMessageGetSessionConfig)({id:(0,types_1$1.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(tt)}}WalletSDKConnection$1.WalletSDKConnection=WalletSDKConnection;var WalletUIError$1={};Object.defineProperty(WalletUIError$1,"__esModule",{value:!0}),WalletUIError$1.WalletUIError=void 0;class WalletUIError extends Error{constructor(tt,rt){super(tt),this.message=tt,this.errorCode=rt}}WalletUIError$1.WalletUIError=WalletUIError,WalletUIError.UserRejectedRequest=new WalletUIError("User rejected request"),WalletUIError.SwitchEthereumChainUnsupportedChainId=new WalletUIError("Unsupported chainId",4902);var aes256gcm$1={};Object.defineProperty(aes256gcm$1,"__esModule",{value:!0}),aes256gcm$1.decrypt=aes256gcm$1.encrypt=void 0;const util_1$3=util$5;async function encrypt$1(it,tt){if(tt.length!==64)throw Error("secret must be 256 bits");const rt=crypto.getRandomValues(new Uint8Array(12)),at=await crypto.subtle.importKey("raw",(0,util_1$3.hexStringToUint8Array)(tt),{name:"aes-gcm"},!1,["encrypt","decrypt"]),st=new TextEncoder,ot=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:rt},at,st.encode(it)),lt=16,ut=ot.slice(ot.byteLength-lt),ht=ot.slice(0,ot.byteLength-lt),mt=new Uint8Array(ut),bt=new Uint8Array(ht),vt=new Uint8Array([...rt,...mt,...bt]);return(0,util_1$3.uint8ArrayToHex)(vt)}aes256gcm$1.encrypt=encrypt$1;function decrypt$1(it,tt){if(tt.length!==64)throw Error("secret must be 256 bits");return new Promise((rt,at)=>{(async function(){const st=await crypto.subtle.importKey("raw",(0,util_1$3.hexStringToUint8Array)(tt),{name:"aes-gcm"},!1,["encrypt","decrypt"]),ot=(0,util_1$3.hexStringToUint8Array)(it),lt=ot.slice(0,12),ut=ot.slice(12,28),ht=ot.slice(28),mt=new Uint8Array([...ht,...ut]),bt={name:"AES-GCM",iv:new Uint8Array(lt)};try{const vt=await window.crypto.subtle.decrypt(bt,st,mt),At=new TextDecoder;rt(At.decode(vt))}catch(vt){at(vt)}})()})}aes256gcm$1.decrypt=decrypt$1;var Web3Method={};(function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.Web3Method=void 0,function(tt){tt.requestEthereumAccounts="requestEthereumAccounts",tt.signEthereumMessage="signEthereumMessage",tt.signEthereumTransaction="signEthereumTransaction",tt.submitEthereumTransaction="submitEthereumTransaction",tt.ethereumAddressFromSignedMessage="ethereumAddressFromSignedMessage",tt.scanQRCode="scanQRCode",tt.generic="generic",tt.childRequestEthereumAccounts="childRequestEthereumAccounts",tt.addEthereumChain="addEthereumChain",tt.switchEthereumChain="switchEthereumChain",tt.makeEthereumJSONRPCRequest="makeEthereumJSONRPCRequest",tt.watchAsset="watchAsset",tt.selectProvider="selectProvider"}(it.Web3Method||(it.Web3Method={}))})(Web3Method);var Web3RequestCanceledMessage$1={},RelayMessage={};(function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.RelayMessageType=void 0,function(tt){tt.SESSION_ID_REQUEST="SESSION_ID_REQUEST",tt.SESSION_ID_RESPONSE="SESSION_ID_RESPONSE",tt.LINKED="LINKED",tt.UNLINKED="UNLINKED",tt.WEB3_REQUEST="WEB3_REQUEST",tt.WEB3_REQUEST_CANCELED="WEB3_REQUEST_CANCELED",tt.WEB3_RESPONSE="WEB3_RESPONSE"}(it.RelayMessageType||(it.RelayMessageType={}))})(RelayMessage),Object.defineProperty(Web3RequestCanceledMessage$1,"__esModule",{value:!0}),Web3RequestCanceledMessage$1.Web3RequestCanceledMessage=void 0;const RelayMessage_1$2=RelayMessage;function Web3RequestCanceledMessage(it){return{type:RelayMessage_1$2.RelayMessageType.WEB3_REQUEST_CANCELED,id:it}}Web3RequestCanceledMessage$1.Web3RequestCanceledMessage=Web3RequestCanceledMessage;var Web3RequestMessage$1={};Object.defineProperty(Web3RequestMessage$1,"__esModule",{value:!0}),Web3RequestMessage$1.Web3RequestMessage=void 0;const RelayMessage_1$1=RelayMessage;function Web3RequestMessage(it){return Object.assign({type:RelayMessage_1$1.RelayMessageType.WEB3_REQUEST},it)}Web3RequestMessage$1.Web3RequestMessage=Web3RequestMessage;var Web3Response={};Object.defineProperty(Web3Response,"__esModule",{value:!0}),Web3Response.EthereumAddressFromSignedMessageResponse=Web3Response.SubmitEthereumTransactionResponse=Web3Response.SignEthereumTransactionResponse=Web3Response.SignEthereumMessageResponse=Web3Response.isRequestEthereumAccountsResponse=Web3Response.SelectProviderResponse=Web3Response.WatchAssetReponse=Web3Response.RequestEthereumAccountsResponse=Web3Response.SwitchEthereumChainResponse=Web3Response.AddEthereumChainResponse=Web3Response.ErrorResponse=void 0;const Web3Method_1$1=Web3Method;function ErrorResponse(it,tt,rt){return{method:it,errorMessage:tt,errorCode:rt}}Web3Response.ErrorResponse=ErrorResponse;function AddEthereumChainResponse(it){return{method:Web3Method_1$1.Web3Method.addEthereumChain,result:it}}Web3Response.AddEthereumChainResponse=AddEthereumChainResponse;function SwitchEthereumChainResponse(it){return{method:Web3Method_1$1.Web3Method.switchEthereumChain,result:it}}Web3Response.SwitchEthereumChainResponse=SwitchEthereumChainResponse;function RequestEthereumAccountsResponse(it){return{method:Web3Method_1$1.Web3Method.requestEthereumAccounts,result:it}}Web3Response.RequestEthereumAccountsResponse=RequestEthereumAccountsResponse;function WatchAssetReponse(it){return{method:Web3Method_1$1.Web3Method.watchAsset,result:it}}Web3Response.WatchAssetReponse=WatchAssetReponse;function SelectProviderResponse(it){return{method:Web3Method_1$1.Web3Method.selectProvider,result:it}}Web3Response.SelectProviderResponse=SelectProviderResponse;function isRequestEthereumAccountsResponse(it){return it&&it.method===Web3Method_1$1.Web3Method.requestEthereumAccounts}Web3Response.isRequestEthereumAccountsResponse=isRequestEthereumAccountsResponse;function SignEthereumMessageResponse(it){return{method:Web3Method_1$1.Web3Method.signEthereumMessage,result:it}}Web3Response.SignEthereumMessageResponse=SignEthereumMessageResponse;function SignEthereumTransactionResponse(it){return{method:Web3Method_1$1.Web3Method.signEthereumTransaction,result:it}}Web3Response.SignEthereumTransactionResponse=SignEthereumTransactionResponse;function SubmitEthereumTransactionResponse(it){return{method:Web3Method_1$1.Web3Method.submitEthereumTransaction,result:it}}Web3Response.SubmitEthereumTransactionResponse=SubmitEthereumTransactionResponse;function EthereumAddressFromSignedMessageResponse(it){return{method:Web3Method_1$1.Web3Method.ethereumAddressFromSignedMessage,result:it}}Web3Response.EthereumAddressFromSignedMessageResponse=EthereumAddressFromSignedMessageResponse;var Web3ResponseMessage$1={};Object.defineProperty(Web3ResponseMessage$1,"__esModule",{value:!0}),Web3ResponseMessage$1.isWeb3ResponseMessage=Web3ResponseMessage$1.Web3ResponseMessage=void 0;const RelayMessage_1=RelayMessage;function Web3ResponseMessage(it){return Object.assign({type:RelayMessage_1.RelayMessageType.WEB3_RESPONSE},it)}Web3ResponseMessage$1.Web3ResponseMessage=Web3ResponseMessage;function isWeb3ResponseMessage(it){return it&&it.type===RelayMessage_1.RelayMessageType.WEB3_RESPONSE}Web3ResponseMessage$1.isWeb3ResponseMessage=isWeb3ResponseMessage;var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(it,tt,rt,at){at===void 0&&(at=rt),Object.defineProperty(it,at,{enumerable:!0,get:function(){return tt[rt]}})}:function(it,tt,rt,at){at===void 0&&(at=rt),it[at]=tt[rt]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(it,tt){Object.defineProperty(it,"default",{enumerable:!0,value:tt})}:function(it,tt){it.default=tt}),__decorate$8=commonjsGlobal&&commonjsGlobal.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot},__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(it){if(it&&it.__esModule)return it;var tt={};if(it!=null)for(var rt in it)rt!=="default"&&Object.prototype.hasOwnProperty.call(it,rt)&&__createBinding(tt,it,rt);return __setModuleDefault(tt,it),tt},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(WalletSDKRelay$1,"__esModule",{value:!0}),WalletSDKRelay$1.WalletSDKRelay=void 0;const bind_decorator_1=__importDefault(bindDecorator),eth_rpc_errors_1=dist$2,rxjs_1=require$$2$1,operators_1=require$$3$1,DiagnosticLogger_1=DiagnosticLogger,WalletSDKConnection_1=WalletSDKConnection$1,WalletUIError_1=WalletUIError$1,types_1=types$2,util_1$2=util$5,aes256gcm=__importStar(aes256gcm$1),Session_1=Session$1,WalletSDKRelayAbstract_1=WalletSDKRelayAbstract$1,Web3Method_1=Web3Method,Web3RequestCanceledMessage_1=Web3RequestCanceledMessage$1,Web3RequestMessage_1=Web3RequestMessage$1,Web3Response_1=Web3Response,Web3ResponseMessage_1=Web3ResponseMessage$1;class WalletSDKRelay extends WalletSDKRelayAbstract_1.WalletSDKRelayAbstract{constructor(tt){var rt;super(),this.accountsCallback=null,this.chainCallback=null,this.dappDefaultChainSubject=new rxjs_1.BehaviorSubject(1),this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.subscriptions=new rxjs_1.Subscription,this.linkAPIUrl=tt.linkAPIUrl,this.storage=tt.storage,this.options=tt;const{session:at,ui:st,connection:ot}=this.subscribe();if(this._session=at,this.connection=ot,this.relayEventManager=tt.relayEventManager,tt.diagnosticLogger&&tt.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");tt.eventListener?this.diagnostic={log:tt.eventListener.onEvent}:this.diagnostic=tt.diagnosticLogger,this._reloadOnDisconnect=(rt=tt.reloadOnDisconnect)!==null&&rt!==void 0?rt:!0,this.ui=st}subscribe(){this.subscriptions.add(this.dappDefaultChainSubject.subscribe(st=>{this.dappDefaultChain!==st&&(this.dappDefaultChain=st)}));const tt=Session_1.Session.load(this.storage)||new Session_1.Session(this.storage).save(),rt=new WalletSDKConnection_1.WalletSDKConnection(tt.id,tt.key,this.linkAPIUrl,this.diagnostic);this.subscriptions.add(rt.sessionConfig$.subscribe({next:st=>{this.onSessionConfigChanged(st)},error:()=>{var st;(st=this.diagnostic)===null||st===void 0||st.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"error while invoking session config callback"})}})),this.subscriptions.add(rt.incomingEvent$.pipe((0,operators_1.filter)(st=>st.event==="Web3Response")).subscribe({next:this.handleIncomingEvent})),this.subscriptions.add(rt.linked$.pipe((0,operators_1.skip)(1),(0,operators_1.tap)(st=>{var ot;this.isLinked=st;const lt=this.storage.getItem(WalletSDKRelayAbstract_1.LOCAL_STORAGE_ADDRESSES_KEY);if(st&&(this.session.linked=st),this.isUnlinkedErrorState=!1,lt){const ut=lt.split(" "),ht=this.storage.getItem("IsStandaloneSigning")==="true";if(ut[0]!==""&&!st&&this.session.linked&&!ht){this.isUnlinkedErrorState=!0;const mt=this.getSessionIdHash();(ot=this.diagnostic)===null||ot===void 0||ot.log(DiagnosticLogger_1.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:mt})}}})).subscribe()),this.subscriptions.add(rt.sessionConfig$.pipe((0,operators_1.filter)(st=>!!st.metadata&&st.metadata.__destroyed==="1")).subscribe(()=>{var st;const ot=rt.isDestroyed;return(st=this.diagnostic)===null||st===void 0||st.log(DiagnosticLogger_1.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:ot,sessionIdHash:this.getSessionIdHash()}),this.resetAndReload()})),this.subscriptions.add(rt.sessionConfig$.pipe((0,operators_1.filter)(st=>st.metadata&&st.metadata.WalletUsername!==void 0)).pipe((0,operators_1.mergeMap)(st=>aes256gcm.decrypt(st.metadata.WalletUsername,tt.secret))).subscribe({next:st=>{this.storage.setItem(WalletSDKRelayAbstract_1.WALLET_USER_NAME_KEY,st)},error:()=>{var st;(st=this.diagnostic)===null||st===void 0||st.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"username"})}})),this.subscriptions.add(rt.sessionConfig$.pipe((0,operators_1.filter)(st=>st.metadata&&st.metadata.AppVersion!==void 0)).pipe((0,operators_1.mergeMap)(st=>aes256gcm.decrypt(st.metadata.AppVersion,tt.secret))).subscribe({next:st=>{this.storage.setItem(WalletSDKRelayAbstract_1.APP_VERSION_KEY,st)},error:()=>{var st;(st=this.diagnostic)===null||st===void 0||st.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appversion"})}})),this.subscriptions.add(rt.sessionConfig$.pipe((0,operators_1.filter)(st=>st.metadata&&st.metadata.ChainId!==void 0&&st.metadata.JsonRpcUrl!==void 0)).pipe((0,operators_1.mergeMap)(st=>(0,rxjs_1.zip)(aes256gcm.decrypt(st.metadata.ChainId,tt.secret),aes256gcm.decrypt(st.metadata.JsonRpcUrl,tt.secret)))).pipe((0,operators_1.distinctUntilChanged)()).subscribe({next:([st,ot])=>{this.chainCallback&&this.chainCallback(st,ot)},error:()=>{var st;(st=this.diagnostic)===null||st===void 0||st.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}})),this.subscriptions.add(rt.sessionConfig$.pipe((0,operators_1.filter)(st=>st.metadata&&st.metadata.EthereumAddress!==void 0)).pipe((0,operators_1.mergeMap)(st=>aes256gcm.decrypt(st.metadata.EthereumAddress,tt.secret))).subscribe({next:st=>{this.accountsCallback&&this.accountsCallback([st]),WalletSDKRelay.accountRequestCallbackIds.size>0&&(Array.from(WalletSDKRelay.accountRequestCallbackIds.values()).forEach(ot=>{const lt=(0,Web3ResponseMessage_1.Web3ResponseMessage)({id:ot,response:(0,Web3Response_1.RequestEthereumAccountsResponse)([st])});this.invokeCallback(Object.assign(Object.assign({},lt),{id:ot}))}),WalletSDKRelay.accountRequestCallbackIds.clear())},error:()=>{var st;(st=this.diagnostic)===null||st===void 0||st.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}})),this.subscriptions.add(rt.sessionConfig$.pipe((0,operators_1.filter)(st=>st.metadata&&st.metadata.AppSrc!==void 0)).pipe((0,operators_1.mergeMap)(st=>aes256gcm.decrypt(st.metadata.AppSrc,tt.secret))).subscribe({next:st=>{this.ui.setAppSrc(st)},error:()=>{var st;(st=this.diagnostic)===null||st===void 0||st.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appSrc"})}}));const at=this.options.uiConstructor({linkAPIUrl:this.options.linkAPIUrl,version:this.options.version,darkMode:this.options.darkMode,session:tt,connected$:rt.connected$,chainId$:this.dappDefaultChainSubject});return rt.connect(),{session:tt,ui:at,connection:rt}}attachUI(){this.ui.attach()}resetAndReload(){this.connection.setSessionMetadata("__destroyed","1").pipe((0,operators_1.timeout)(1e3),(0,operators_1.catchError)(tt=>(0,rxjs_1.of)(null))).subscribe(tt=>{var rt,at,st;const ot=this.ui.isStandalone();try{this.subscriptions.unsubscribe()}catch{(rt=this.diagnostic)===null||rt===void 0||rt.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error unsubscribing"})}(at=this.diagnostic)===null||at===void 0||at.log(DiagnosticLogger_1.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const lt=Session_1.Session.load(this.storage);if((lt==null?void 0:lt.id)===this._session.id?this.storage.clear():lt&&((st=this.diagnostic)===null||st===void 0||st.log(DiagnosticLogger_1.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:Session_1.Session.hash(lt.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0),this.subscriptions=new rxjs_1.Subscription;const{session:ut,ui:ht,connection:mt}=this.subscribe();this._session=ut,this.connection=mt,this.ui=ht,ot&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()},tt=>{var rt;(rt=this.diagnostic)===null||rt===void 0||rt.log(DiagnosticLogger_1.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${tt}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(tt,rt){this.appName=tt,this.appLogoUrl=rt}getStorageItem(tt){return this.storage.getItem(tt)}get session(){return this._session}setStorageItem(tt,rt){this.storage.setItem(tt,rt)}signEthereumMessage(tt,rt,at,st){return this.sendRequest({method:Web3Method_1.Web3Method.signEthereumMessage,params:{message:(0,util_1$2.hexStringFromBuffer)(tt,!0),address:rt,addPrefix:at,typedDataJson:st||null}})}ethereumAddressFromSignedMessage(tt,rt,at){return this.sendRequest({method:Web3Method_1.Web3Method.ethereumAddressFromSignedMessage,params:{message:(0,util_1$2.hexStringFromBuffer)(tt,!0),signature:(0,util_1$2.hexStringFromBuffer)(rt,!0),addPrefix:at}})}signEthereumTransaction(tt){return this.sendRequest({method:Web3Method_1.Web3Method.signEthereumTransaction,params:{fromAddress:tt.fromAddress,toAddress:tt.toAddress,weiValue:(0,util_1$2.bigIntStringFromBN)(tt.weiValue),data:(0,util_1$2.hexStringFromBuffer)(tt.data,!0),nonce:tt.nonce,gasPriceInWei:tt.gasPriceInWei?(0,util_1$2.bigIntStringFromBN)(tt.gasPriceInWei):null,maxFeePerGas:tt.gasPriceInWei?(0,util_1$2.bigIntStringFromBN)(tt.gasPriceInWei):null,maxPriorityFeePerGas:tt.gasPriceInWei?(0,util_1$2.bigIntStringFromBN)(tt.gasPriceInWei):null,gasLimit:tt.gasLimit?(0,util_1$2.bigIntStringFromBN)(tt.gasLimit):null,chainId:tt.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(tt){return this.sendRequest({method:Web3Method_1.Web3Method.signEthereumTransaction,params:{fromAddress:tt.fromAddress,toAddress:tt.toAddress,weiValue:(0,util_1$2.bigIntStringFromBN)(tt.weiValue),data:(0,util_1$2.hexStringFromBuffer)(tt.data,!0),nonce:tt.nonce,gasPriceInWei:tt.gasPriceInWei?(0,util_1$2.bigIntStringFromBN)(tt.gasPriceInWei):null,maxFeePerGas:tt.maxFeePerGas?(0,util_1$2.bigIntStringFromBN)(tt.maxFeePerGas):null,maxPriorityFeePerGas:tt.maxPriorityFeePerGas?(0,util_1$2.bigIntStringFromBN)(tt.maxPriorityFeePerGas):null,gasLimit:tt.gasLimit?(0,util_1$2.bigIntStringFromBN)(tt.gasLimit):null,chainId:tt.chainId,shouldSubmit:!0}})}submitEthereumTransaction(tt,rt){return this.sendRequest({method:Web3Method_1.Web3Method.submitEthereumTransaction,params:{signedTransaction:(0,util_1$2.hexStringFromBuffer)(tt,!0),chainId:rt}})}scanQRCode(tt){return this.sendRequest({method:Web3Method_1.Web3Method.scanQRCode,params:{regExp:tt}})}getQRCodeUrl(){return(0,util_1$2.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(tt,rt){return this.sendRequest({method:Web3Method_1.Web3Method.generic,params:{action:rt,data:tt}})}sendGenericMessage(tt){return this.sendRequest(tt)}sendRequest(tt){let rt=null;const at=(0,util_1$2.randomBytesHex)(8),st=lt=>{this.publishWeb3RequestCanceledEvent(at),this.handleErrorResponse(at,tt.method,lt),rt==null||rt()};return{promise:new Promise((lt,ut)=>{this.ui.isStandalone()||(rt=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:st,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(at,ht=>{if(rt==null||rt(),ht.errorMessage)return ut(new Error(ht.errorMessage));lt(ht)}),this.ui.isStandalone()?this.sendRequestStandalone(at,tt):this.publishWeb3RequestEvent(at,tt)}),cancel:st}}setConnectDisabled(tt){this.ui.setConnectDisabled(tt)}setAccountsCallback(tt){this.accountsCallback=tt}setChainCallback(tt){this.chainCallback=tt}setDappDefaultChainCallback(tt){this.dappDefaultChainSubject.next(tt)}publishWeb3RequestEvent(tt,rt){var at;const st=(0,Web3RequestMessage_1.Web3RequestMessage)({id:tt,request:rt}),ot=Session_1.Session.load(this.storage);(at=this.diagnostic)===null||at===void 0||at.log(DiagnosticLogger_1.EVENTS.WEB3_REQUEST,{eventId:st.id,method:`relay::${st.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:ot?Session_1.Session.hash(ot.id):"",isSessionMismatched:((ot==null?void 0:ot.id)!==this._session.id).toString()}),this.subscriptions.add(this.publishEvent("Web3Request",st,!0).subscribe({next:lt=>{var ut;(ut=this.diagnostic)===null||ut===void 0||ut.log(DiagnosticLogger_1.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:st.id,method:`relay::${st.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:ot?Session_1.Session.hash(ot.id):"",isSessionMismatched:((ot==null?void 0:ot.id)!==this._session.id).toString()})},error:lt=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:st.id,response:{method:st.request.method,errorMessage:lt.message}}))}}))}publishWeb3RequestCanceledEvent(tt){const rt=(0,Web3RequestCanceledMessage_1.Web3RequestCanceledMessage)(tt);this.subscriptions.add(this.publishEvent("Web3RequestCanceled",rt,!1).subscribe())}publishEvent(tt,rt,at){const st=this.session.secret;return new rxjs_1.Observable(ot=>{aes256gcm.encrypt(JSON.stringify(Object.assign(Object.assign({},rt),{origin:location.origin})),st).then(lt=>{ot.next(lt),ot.complete()})}).pipe((0,operators_1.mergeMap)(ot=>this.connection.publishEvent(tt,ot,at)))}handleIncomingEvent(tt){try{this.subscriptions.add((0,rxjs_1.from)(aes256gcm.decrypt(tt.data,this.session.secret)).pipe((0,operators_1.map)(rt=>JSON.parse(rt))).subscribe({next:rt=>{const at=(0,Web3ResponseMessage_1.isWeb3ResponseMessage)(rt)?rt:null;!at||this.handleWeb3ResponseMessage(at)},error:()=>{var rt;(rt=this.diagnostic)===null||rt===void 0||rt.log(DiagnosticLogger_1.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}))}catch{return}}handleWeb3ResponseMessage(tt){var rt;const{response:at}=tt;if((rt=this.diagnostic)===null||rt===void 0||rt.log(DiagnosticLogger_1.EVENTS.WEB3_RESPONSE,{eventId:tt.id,method:`relay::${at.method}`,sessionIdHash:this.getSessionIdHash()}),(0,Web3Response_1.isRequestEthereumAccountsResponse)(at)){WalletSDKRelay.accountRequestCallbackIds.forEach(st=>this.invokeCallback(Object.assign(Object.assign({},tt),{id:st}))),WalletSDKRelay.accountRequestCallbackIds.clear();return}this.invokeCallback(tt)}handleErrorResponse(tt,rt,at,st){this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:tt,response:(0,Web3Response_1.ErrorResponse)(rt,(at!=null?at:WalletUIError_1.WalletUIError.UserRejectedRequest).message,st)}))}invokeCallback(tt){const rt=this.relayEventManager.callbacks.get(tt.id);rt&&(rt(tt.response),this.relayEventManager.callbacks.delete(tt.id))}requestEthereumAccounts(){const tt={method:Web3Method_1.Web3Method.requestEthereumAccounts,params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},rt=(0,util_1$2.randomBytesHex)(8),at=ot=>{this.publishWeb3RequestCanceledEvent(rt),this.handleErrorResponse(rt,tt.method,ot)};return{promise:new Promise((ot,lt)=>{var ut;this.relayEventManager.callbacks.set(rt,mt=>{if(this.ui.hideRequestEthereumAccounts(),mt.errorMessage)return lt(new Error(mt.errorMessage));ot(mt)});const ht=((ut=window==null?void 0:window.navigator)===null||ut===void 0?void 0:ut.userAgent)||null;if(ht&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ht)){let mt;try{(0,util_1$2.isInIFrame)()&&window.top?mt=window.top.location:mt=window.location}catch{mt=window.location}mt.href=`https://www.coinbase.com/connect-dapp?uri=${encodeURIComponent(mt.href)}`;return}if(this.ui.inlineAccountsResponse()){const mt=bt=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:rt,response:(0,Web3Response_1.RequestEthereumAccountsResponse)(bt)}))};this.ui.requestEthereumAccounts({onCancel:at,onAccounts:mt})}else{const mt=eth_rpc_errors_1.ethErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>at(mt)})}WalletSDKRelay.accountRequestCallbackIds.add(rt),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(rt,tt)}),cancel:at}}selectProvider(tt){const rt={method:Web3Method_1.Web3Method.selectProvider,params:{providerOptions:tt}},at=(0,util_1$2.randomBytesHex)(8),st=lt=>{this.publishWeb3RequestCanceledEvent(at),this.handleErrorResponse(at,rt.method,lt)},ot=new Promise((lt,ut)=>{this.relayEventManager.callbacks.set(at,bt=>{if(bt.errorMessage)return ut(new Error(bt.errorMessage));lt(bt)});const ht=bt=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:at,response:(0,Web3Response_1.SelectProviderResponse)(types_1.ProviderType.Unselected)}))},mt=bt=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:at,response:(0,Web3Response_1.SelectProviderResponse)(bt)}))};this.ui.selectProvider&&this.ui.selectProvider({onApprove:mt,onCancel:ht,providerOptions:tt})});return{cancel:st,promise:ot}}watchAsset(tt,rt,at,st,ot,lt){const ut={method:Web3Method_1.Web3Method.watchAsset,params:{type:tt,options:{address:rt,symbol:at,decimals:st,image:ot},chainId:lt}};let ht=null;const mt=(0,util_1$2.randomBytesHex)(8),bt=At=>{this.publishWeb3RequestCanceledEvent(mt),this.handleErrorResponse(mt,ut.method,At),ht==null||ht()};this.ui.inlineWatchAsset()||(ht=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:bt,onResetConnection:this.resetAndReload}));const vt=new Promise((At,xt)=>{this.relayEventManager.callbacks.set(mt,wt=>{if(ht==null||ht(),wt.errorMessage)return xt(new Error(wt.errorMessage));At(wt)});const Et=wt=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:mt,response:(0,Web3Response_1.WatchAssetReponse)(!1)}))},Tt=()=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:mt,response:(0,Web3Response_1.WatchAssetReponse)(!0)}))};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:Tt,onCancel:Et,type:tt,address:rt,symbol:at,decimals:st,image:ot,chainId:lt}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(mt,ut)});return{cancel:bt,promise:vt}}addEthereumChain(tt,rt,at,st,ot,lt){const ut={method:Web3Method_1.Web3Method.addEthereumChain,params:{chainId:tt,rpcUrls:rt,blockExplorerUrls:st,chainName:ot,iconUrls:at,nativeCurrency:lt}};let ht=null;const mt=(0,util_1$2.randomBytesHex)(8),bt=At=>{this.publishWeb3RequestCanceledEvent(mt),this.handleErrorResponse(mt,ut.method,At),ht==null||ht()};return this.ui.inlineAddEthereumChain(tt)||(ht=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:bt,onResetConnection:this.resetAndReload})),{promise:new Promise((At,xt)=>{this.relayEventManager.callbacks.set(mt,wt=>{if(ht==null||ht(),wt.errorMessage)return xt(new Error(wt.errorMessage));At(wt)});const Et=wt=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:mt,response:(0,Web3Response_1.AddEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},Tt=wt=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:mt,response:(0,Web3Response_1.AddEthereumChainResponse)({isApproved:!0,rpcUrl:wt})}))};this.ui.inlineAddEthereumChain(tt)&&this.ui.addEthereumChain({onCancel:Et,onApprove:Tt,chainId:ut.params.chainId,rpcUrls:ut.params.rpcUrls,blockExplorerUrls:ut.params.blockExplorerUrls,chainName:ut.params.chainName,iconUrls:ut.params.iconUrls,nativeCurrency:ut.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(tt)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(mt,ut)}),cancel:bt}}switchEthereumChain(tt,rt){const at={method:Web3Method_1.Web3Method.switchEthereumChain,params:Object.assign({chainId:tt},{address:rt})},st=(0,util_1$2.randomBytesHex)(8),ot=ut=>{this.publishWeb3RequestCanceledEvent(st),this.handleErrorResponse(st,at.method,ut)};return{promise:new Promise((ut,ht)=>{this.relayEventManager.callbacks.set(st,vt=>{if(vt.errorMessage&&vt.errorCode)return ht(eth_rpc_errors_1.ethErrors.provider.custom({code:vt.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(vt.errorMessage)return ht(new Error(vt.errorMessage));ut(vt)});const mt=vt=>{if(typeof vt=="number"){const At=vt;this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:st,response:(0,Web3Response_1.ErrorResponse)(Web3Method_1.Web3Method.switchEthereumChain,WalletUIError_1.WalletUIError.SwitchEthereumChainUnsupportedChainId.message,At)}))}else vt instanceof WalletUIError_1.WalletUIError?this.handleErrorResponse(st,Web3Method_1.Web3Method.switchEthereumChain,vt,vt.errorCode):this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:st,response:(0,Web3Response_1.SwitchEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},bt=vt=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:st,response:(0,Web3Response_1.SwitchEthereumChainResponse)({isApproved:!0,rpcUrl:vt})}))};this.ui.switchEthereumChain({onCancel:mt,onApprove:bt,chainId:at.params.chainId,address:at.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(st,at)}),cancel:ot}}inlineAddEthereumChain(tt){return this.ui.inlineAddEthereumChain(tt)}getSessionIdHash(){return Session_1.Session.hash(this._session.id)}sendRequestStandalone(tt,rt){const at=ot=>{this.handleErrorResponse(tt,rt.method,ot)},st=ot=>{this.handleWeb3ResponseMessage((0,Web3ResponseMessage_1.Web3ResponseMessage)({id:tt,response:ot}))};switch(rt.method){case Web3Method_1.Web3Method.signEthereumMessage:this.ui.signEthereumMessage({request:rt,onSuccess:st,onCancel:at});break;case Web3Method_1.Web3Method.signEthereumTransaction:this.ui.signEthereumTransaction({request:rt,onSuccess:st,onCancel:at});break;case Web3Method_1.Web3Method.submitEthereumTransaction:this.ui.submitEthereumTransaction({request:rt,onSuccess:st,onCancel:at});break;case Web3Method_1.Web3Method.ethereumAddressFromSignedMessage:this.ui.ethereumAddressFromSignedMessage({request:rt,onSuccess:st});break;default:at();break}}onSessionConfigChanged(tt){}}WalletSDKRelay.accountRequestCallbackIds=new Set,__decorate$8([bind_decorator_1.default],WalletSDKRelay.prototype,"resetAndReload",null),__decorate$8([bind_decorator_1.default],WalletSDKRelay.prototype,"handleIncomingEvent",null),WalletSDKRelay$1.WalletSDKRelay=WalletSDKRelay;var WalletSDKRelayEventManager$1={};Object.defineProperty(WalletSDKRelayEventManager$1,"__esModule",{value:!0}),WalletSDKRelayEventManager$1.WalletSDKRelayEventManager=void 0;const util_1$1=util$5;class WalletSDKRelayEventManager{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const tt=this._nextRequestId,rt=(0,util_1$1.prepend0x)(tt.toString(16));return this.callbacks.get(rt)&&this.callbacks.delete(rt),tt}}WalletSDKRelayEventManager$1.WalletSDKRelayEventManager=WalletSDKRelayEventManager;const name$1="@coinbase/wallet-sdk",version$1="3.6.5",description$1="Coinbase Wallet JavaScript SDK",keywords=["cipher","cipherbrowser","coinbase","coinbasewallet","eth","ether","ethereum","etherium","injection","toshi","wallet","walletlink","web3"],main="dist/index.js",types="dist/index.d.ts",repository="https://github.com/coinbase/coinbase-wallet-sdk.git",author="Coinbase, Inc.",license="Apache-2.0",scripts={"pretest:unit":"node compile-assets.js","test:unit":"jest","test:unit:coverage":"yarn test:unit && open coverage/lcov-report/index.html","test:karma":"yarn build-npm && karma start",prebuild:`rm -rf ./build && node -p "'export const LIB_VERSION = ' + JSON.stringify(require('./package.json').version) + ';'" > src/version.ts`,build:"node compile-assets.js && webpack --config webpack.config.js","build-npm":"tsc -p ./tsconfig.build.json","build:dev":"export LINK_API_URL='http://localhost:3000'; yarn build","build:dev:watch":"nodemon -e 'ts,tsx,js,json,css,scss,svg' --ignore 'src/**/*-css.ts' --ignore 'src/**/*-svg.ts' --watch src/ --exec 'yarn build:dev'","build:prod":`yarn prebuild && yarn build && yarn build-npm && cp ./package.json ../../README.md ./LICENSE build/npm && cp -a src/vendor-js build/npm/dist && sed -i.bak 's|  "private": true,||g' build/npm/package.json && rm -f build/npm/package.json.bak`,"lint:types":"tsc --noEmit","lint:prettier":'prettier --check "{src,__tests__}/**/*.(js|ts|tsx)"',"lint:eslint":"eslint ./src --ext .ts,.tsx",lint:"yarn lint:eslint && yarn lint:types && yarn lint:prettier","fix:eslint":"yarn lint:eslint --fix","fix:prettier":"prettier . --write",release:"./scripts/release.sh"},dependencies={"@metamask/safe-event-emitter":"2.0.0","@solana/web3.js":"^1.70.1","bind-decorator":"^1.0.11","bn.js":"^5.1.1",buffer:"^6.0.3",clsx:"^1.1.0","eth-block-tracker":"4.4.3","eth-json-rpc-filters":"5.1.0","eth-rpc-errors":"4.0.2","json-rpc-engine":"6.1.0",keccak:"^3.0.1",preact:"^10.5.9",qs:"^6.10.3",rxjs:"^6.6.3","sha.js":"^2.4.11","stream-browserify":"^3.0.0",util:"^0.12.4"},devDependencies={"@babel/core":"^7.17.9","@babel/plugin-proposal-decorators":"^7.17.9","@babel/plugin-transform-react-jsx":"^7.17.3","@babel/preset-env":"^7.16.11","@babel/preset-typescript":"^7.16.7","@peculiar/webcrypto":"^1.3.3","@testing-library/jest-dom":"^5.16.4","@testing-library/preact":"^2.0.1","@types/bn.js":"^4.11.6","@types/jest":"^27.4.1","@types/node":"^14.14.20","@types/qs":"^6.9.7","@types/sha.js":"^2.4.0","@typescript-eslint/eslint-plugin":"^5.7.0","@typescript-eslint/eslint-plugin-tslint":"^5.7.0","@typescript-eslint/parser":"^5.7.0","babel-jest":"^27.5.1",browserify:"17.0.0","copy-webpack-plugin":"^6.4.1","core-js":"^3.8.2",eslint:"^8.4.1","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.25.3","eslint-plugin-preact":"^0.1.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-simple-import-sort":"^7.0.0",jasmine:"3.8.0",jest:"^27.5.1","jest-chrome":"^0.7.2","jest-websocket-mock":"^2.3.0",karma:"^6.4.0","karma-browserify":"8.1.0","karma-chrome-launcher":"^3.1.0","karma-jasmine":"^4.0.1",nodemon:"^2.0.6",prettier:"^2.5.1","raw-loader":"^4.0.2","regenerator-runtime":"^0.13.7",sass:"^1.50.0",svgo:"^2.8.0","ts-jest":"^27.1.4","ts-loader":"^8.0.13","ts-node":"^10.7.0",tslib:"^2.0.3",typescript:"^4.1.3",watchify:"4.0.0",webpack:"^5.76.0","webpack-cli":"^4.9.2","whatwg-fetch":"^3.5.0"},engines={node:">= 10.0.0"},require$$7={name:name$1,version:version$1,description:description$1,keywords,main,types,repository,author,license,scripts,dependencies,devDependencies,engines};Object.defineProperty(CoinbaseWalletSDK$1,"__esModule",{value:!0}),CoinbaseWalletSDK$1.CoinbaseWalletSDK=void 0;const wallet_logo_1=walletLogo$1,ScopedLocalStorage_1=ScopedLocalStorage$1,CoinbaseWalletProvider_1=CoinbaseWalletProvider$1,WalletSDKUI_1=WalletSDKUI$1,WalletSDKRelay_1=WalletSDKRelay$1,WalletSDKRelayEventManager_1=WalletSDKRelayEventManager$1,util_1=util$5,LINK_API_URL={}.LINK_API_URL||"https://www.walletlink.org",SDK_VERSION={}.SDK_VERSION||require$$7.version||"unknown";class CoinbaseWalletSDK{constructor(tt){var rt,at,st;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const ot=tt.linkAPIUrl||LINK_API_URL;let lt;if(tt.uiConstructor?lt=tt.uiConstructor:lt=mt=>new WalletSDKUI_1.WalletSDKUI(mt),typeof tt.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=tt.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(rt=tt.overrideIsCoinbaseWallet)!==null&&rt!==void 0?rt:!0,this._overrideIsCoinbaseBrowser=(at=tt.overrideIsCoinbaseBrowser)!==null&&at!==void 0?at:!1,tt.diagnosticLogger&&tt.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");tt.eventListener?this._diagnosticLogger={log:tt.eventListener.onEvent}:this._diagnosticLogger=tt.diagnosticLogger,this._reloadOnDisconnect=(st=tt.reloadOnDisconnect)!==null&&st!==void 0?st:!0;const ut=new URL(ot),ht=`${ut.protocol}//${ut.host}`;this._storage=new ScopedLocalStorage_1.ScopedLocalStorage(`-walletlink:${ht}`),this._storage.setItem("version",CoinbaseWalletSDK.VERSION),!(this.walletExtension||this.coinbaseBrowser)&&(this._relayEventManager=new WalletSDKRelayEventManager_1.WalletSDKRelayEventManager,this._relay=new WalletSDKRelay_1.WalletSDKRelay({linkAPIUrl:ot,version:SDK_VERSION,darkMode:!!tt.darkMode,uiConstructor:lt,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect}),this.setAppInfo(tt.appName,tt.appLogoUrl),!tt.headlessMode&&this._relay.attachUI())}makeWeb3Provider(tt="",rt=1){const at=this.walletExtension;if(at)return this.isCipherProvider(at)||at.setProviderInfo(tt,rt),this._reloadOnDisconnect===!1&&typeof at.disableReloadOnDisconnect=="function"&&at.disableReloadOnDisconnect(),at;const st=this.coinbaseBrowser;if(st)return st;const ot=this._relay;if(!ot||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return tt||ot.setConnectDisabled(!0),new CoinbaseWalletProvider_1.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(ot),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:tt,chainId:rt,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(tt,rt){var at;this._appName=tt||"DApp",this._appLogoUrl=rt||(0,util_1.getFavicon)();const st=this.walletExtension;st?this.isCipherProvider(st)||st.setAppInfo(this._appName,this._appLogoUrl):(at=this._relay)===null||at===void 0||at.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var tt;const rt=this.walletExtension;rt?rt.close():(tt=this._relay)===null||tt===void 0||tt.resetAndReload()}getQrUrl(){var tt,rt;return(rt=(tt=this._relay)===null||tt===void 0?void 0:tt.getQRCodeUrl())!==null&&rt!==void 0?rt:null}getCoinbaseWalletLogo(tt,rt=240){return(0,wallet_logo_1.walletLogo)(tt,rt)}get walletExtension(){var tt;return(tt=window.coinbaseWalletExtension)!==null&&tt!==void 0?tt:window.walletLinkExtension}get coinbaseBrowser(){var tt,rt;try{const at=(tt=window.ethereum)!==null&&tt!==void 0?tt:(rt=window.top)===null||rt===void 0?void 0:rt.ethereum;return at&&"isCoinbaseBrowser"in at&&at.isCoinbaseBrowser?at:void 0}catch{return}}isCipherProvider(tt){return typeof tt.isCipher=="boolean"&&tt.isCipher}}CoinbaseWalletSDK$1.CoinbaseWalletSDK=CoinbaseWalletSDK,CoinbaseWalletSDK.VERSION=SDK_VERSION,function(it){Object.defineProperty(it,"__esModule",{value:!0}),it.CoinbaseWalletProvider=it.CoinbaseWalletSDK=void 0;const tt=CoinbaseWalletSDK$1,rt=CoinbaseWalletProvider$1;var at=CoinbaseWalletSDK$1;Object.defineProperty(it,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return at.CoinbaseWalletSDK}});var st=CoinbaseWalletProvider$1;Object.defineProperty(it,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return st.CoinbaseWalletProvider}}),it.default=tt.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=tt.CoinbaseWalletSDK,window.CoinbaseWalletProvider=rt.CoinbaseWalletProvider,window.WalletLink=tt.CoinbaseWalletSDK,window.WalletLinkProvider=rt.CoinbaseWalletProvider)}(dist$3);var _client=new WeakMap,_provider$1=new WeakMap;class CoinbaseWalletConnector extends Connector$1{constructor(tt){var rt;super(tt),_defineProperty$1(this,"id","coinbasewallet"),_defineProperty$1(this,"name","Coinbase Wallet"),_defineProperty$1(this,"ready",typeof window<"u"&&!((rt=window.ethereum)!==null&&rt!==void 0&&rt.isCoinbaseWallet)),_classPrivateFieldInitSpec(this,_client,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_provider$1,{writable:!0,value:void 0}),_defineProperty$1(this,"onAccountsChanged",at=>{at.length===0?this.emit("disconnect"):this.emit("change",{account:utils$7.getAddress(at[0])})}),_defineProperty$1(this,"onChainChanged",at=>{const st=normalizeChainId(at),ot=this.isChainUnsupported(st);this.emit("change",{chain:{id:st,unsupported:ot}})}),_defineProperty$1(this,"onDisconnect",()=>{this.emit("disconnect")})}async connect(){try{const tt=this.getProvider();tt.on("accountsChanged",this.onAccountsChanged),tt.on("chainChanged",this.onChainChanged),tt.on("disconnect",this.onDisconnect);const rt=await tt.enable(),at=utils$7.getAddress(rt[0]),st=await this.getChainId(),ot=this.isChainUnsupported(st);return{account:at,chain:{id:st,unsupported:ot},provider:new Web3Provider(tt)}}catch(tt){throw/user closed modal/i.test(tt.message)?new UserRejectedRequestError:tt}}async disconnect(){if(!_classPrivateFieldGet(this,_provider$1))return;const tt=this.getProvider();if(tt.removeListener("accountsChanged",this.onAccountsChanged),tt.removeListener("chainChanged",this.onChainChanged),tt.removeListener("disconnect",this.onDisconnect),tt.disconnect(),tt.close(),typeof localStorage<"u"){let rt=localStorage.length;for(;rt--;){const at=localStorage.key(rt);!at||!/-walletlink/.test(at)||localStorage.removeItem(at)}}}async getAccount(){const rt=await this.getProvider().request({method:"eth_accounts"});return utils$7.getAddress(rt[0])}async getChainId(){const tt=this.getProvider();return normalizeChainId(tt.chainId)}getProvider(){return _classPrivateFieldGet(this,_provider$1)||(_classPrivateFieldSet(this,_client,new dist$3.CoinbaseWalletSDK(this.options)),_classPrivateFieldSet(this,_provider$1,_classPrivateFieldGet(this,_client).makeWeb3Provider(this.options.jsonRpcUrl))),_classPrivateFieldGet(this,_provider$1)}async getSigner(){const tt=this.getProvider(),rt=await this.getAccount();return new Web3Provider(tt).getSigner(rt)}async isAuthorized(){try{return!!await this.getAccount()}catch{return!1}}async switchChain(tt){const rt=this.getProvider(),at=utils$7.hexValue(tt);try{return await rt.request({method:"wallet_switchEthereumChain",params:[{chainId:at}]}),[...this.chains,...allChains].find(ot=>ot.id===tt)}catch(st){throw/user rejected signature request/i.test(st.message)?new UserRejectedRequestError:new SwitchChainError}}}var eventemitter3$1={exports:{}};(function(it){var tt=Object.prototype.hasOwnProperty,rt="~";function at(){}Object.create&&(at.prototype=Object.create(null),new at().__proto__||(rt=!1));function st(ht,mt,bt){this.fn=ht,this.context=mt,this.once=bt||!1}function ot(ht,mt,bt,vt,At){if(typeof bt!="function")throw new TypeError("The listener must be a function");var xt=new st(bt,vt||ht,At),Et=rt?rt+mt:mt;return ht._events[Et]?ht._events[Et].fn?ht._events[Et]=[ht._events[Et],xt]:ht._events[Et].push(xt):(ht._events[Et]=xt,ht._eventsCount++),ht}function lt(ht,mt){--ht._eventsCount===0?ht._events=new at:delete ht._events[mt]}function ut(){this._events=new at,this._eventsCount=0}ut.prototype.eventNames=function(){var mt=[],bt,vt;if(this._eventsCount===0)return mt;for(vt in bt=this._events)tt.call(bt,vt)&&mt.push(rt?vt.slice(1):vt);return Object.getOwnPropertySymbols?mt.concat(Object.getOwnPropertySymbols(bt)):mt},ut.prototype.listeners=function(mt){var bt=rt?rt+mt:mt,vt=this._events[bt];if(!vt)return[];if(vt.fn)return[vt.fn];for(var At=0,xt=vt.length,Et=new Array(xt);At<xt;At++)Et[At]=vt[At].fn;return Et},ut.prototype.listenerCount=function(mt){var bt=rt?rt+mt:mt,vt=this._events[bt];return vt?vt.fn?1:vt.length:0},ut.prototype.emit=function(mt,bt,vt,At,xt,Et){var Tt=rt?rt+mt:mt;if(!this._events[Tt])return!1;var wt=this._events[Tt],Ct=arguments.length,It,St;if(wt.fn){switch(wt.once&&this.removeListener(mt,wt.fn,void 0,!0),Ct){case 1:return wt.fn.call(wt.context),!0;case 2:return wt.fn.call(wt.context,bt),!0;case 3:return wt.fn.call(wt.context,bt,vt),!0;case 4:return wt.fn.call(wt.context,bt,vt,At),!0;case 5:return wt.fn.call(wt.context,bt,vt,At,xt),!0;case 6:return wt.fn.call(wt.context,bt,vt,At,xt,Et),!0}for(St=1,It=new Array(Ct-1);St<Ct;St++)It[St-1]=arguments[St];wt.fn.apply(wt.context,It)}else{var Rt=wt.length,Dt;for(St=0;St<Rt;St++)switch(wt[St].once&&this.removeListener(mt,wt[St].fn,void 0,!0),Ct){case 1:wt[St].fn.call(wt[St].context);break;case 2:wt[St].fn.call(wt[St].context,bt);break;case 3:wt[St].fn.call(wt[St].context,bt,vt);break;case 4:wt[St].fn.call(wt[St].context,bt,vt,At);break;default:if(!It)for(Dt=1,It=new Array(Ct-1);Dt<Ct;Dt++)It[Dt-1]=arguments[Dt];wt[St].fn.apply(wt[St].context,It)}}return!0},ut.prototype.on=function(mt,bt,vt){return ot(this,mt,bt,vt,!1)},ut.prototype.once=function(mt,bt,vt){return ot(this,mt,bt,vt,!0)},ut.prototype.removeListener=function(mt,bt,vt,At){var xt=rt?rt+mt:mt;if(!this._events[xt])return this;if(!bt)return lt(this,xt),this;var Et=this._events[xt];if(Et.fn)Et.fn===bt&&(!At||Et.once)&&(!vt||Et.context===vt)&&lt(this,xt);else{for(var Tt=0,wt=[],Ct=Et.length;Tt<Ct;Tt++)(Et[Tt].fn!==bt||At&&!Et[Tt].once||vt&&Et[Tt].context!==vt)&&wt.push(Et[Tt]);wt.length?this._events[xt]=wt.length===1?wt[0]:wt:lt(this,xt)}return this},ut.prototype.removeAllListeners=function(mt){var bt;return mt?(bt=rt?rt+mt:mt,this._events[bt]&&lt(this,bt)):(this._events=new at,this._eventsCount=0),this},ut.prototype.off=ut.prototype.removeListener,ut.prototype.addListener=ut.prototype.on,ut.prefixed=rt,ut.EventEmitter=ut,it.exports=ut})(eventemitter3$1);const EventEmitter$1=eventemitter3$1.exports,PARSE_ERROR="PARSE_ERROR",INVALID_REQUEST="INVALID_REQUEST",METHOD_NOT_FOUND="METHOD_NOT_FOUND",INVALID_PARAMS="INVALID_PARAMS",INTERNAL_ERROR="INTERNAL_ERROR",SERVER_ERROR="SERVER_ERROR",RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],STANDARD_ERROR_MAP={[PARSE_ERROR]:{code:-32700,message:"Parse error"},[INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[SERVER_ERROR]:{code:-32e3,message:"Server error"}},DEFAULT_ERROR=SERVER_ERROR;function isReservedErrorCode(it){return RESERVED_ERROR_CODES.includes(it)}function getError(it){return Object.keys(STANDARD_ERROR_MAP).includes(it)?STANDARD_ERROR_MAP[it]:STANDARD_ERROR_MAP[DEFAULT_ERROR]}function getErrorByCode(it){const tt=Object.values(STANDARD_ERROR_MAP).find(rt=>rt.code===it);return tt||STANDARD_ERROR_MAP[DEFAULT_ERROR]}function parseConnectionError(it,tt,rt){return it.message.includes("getaddrinfo ENOTFOUND")||it.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${rt} RPC url at ${tt}`):it}var cjs$4={},crypto$1={},hasRequiredCrypto;function requireCrypto(){if(hasRequiredCrypto)return crypto$1;hasRequiredCrypto=1,Object.defineProperty(crypto$1,"__esModule",{value:!0}),crypto$1.isBrowserCryptoAvailable=crypto$1.getSubtleCrypto=crypto$1.getBrowerCrypto=void 0;function it(){return(globalThis==null?void 0:globalThis.crypto)||(globalThis==null?void 0:globalThis.msCrypto)||{}}crypto$1.getBrowerCrypto=it;function tt(){const at=it();return at.subtle||at.webkitSubtle}crypto$1.getSubtleCrypto=tt;function rt(){return!!it()&&!!tt()}return crypto$1.isBrowserCryptoAvailable=rt,crypto$1}var env={},hasRequiredEnv;function requireEnv(){if(hasRequiredEnv)return env;hasRequiredEnv=1,Object.defineProperty(env,"__esModule",{value:!0}),env.isBrowser=env.isNode=env.isReactNative=void 0;function it(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}env.isReactNative=it;function tt(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}env.isNode=tt;function rt(){return!it()&&!tt()}return env.isBrowser=rt,env}(function(it){Object.defineProperty(it,"__esModule",{value:!0});const tt=tslib.exports;tt.__exportStar(requireCrypto(),it),tt.__exportStar(requireEnv(),it)})(cjs$4);function payloadId$1(){const it=Date.now()*Math.pow(10,3),tt=Math.floor(Math.random()*Math.pow(10,3));return it+tt}function formatJsonRpcRequest(it,tt,rt){return{id:rt||payloadId$1(),jsonrpc:"2.0",method:it,params:tt}}function formatJsonRpcError(it,tt,rt){return{id:it,jsonrpc:"2.0",error:formatErrorMessage(tt,rt)}}function formatErrorMessage(it,tt){return typeof it>"u"?getError(INTERNAL_ERROR):(typeof it=="string"&&(it=Object.assign(Object.assign({},getError(SERVER_ERROR)),{message:it})),typeof tt<"u"&&(it.data=tt),isReservedErrorCode(it.code)&&(it=getErrorByCode(it.code)),it)}class IEvents{}class IJsonRpcConnection extends IEvents{constructor(tt){super()}}class IBaseJsonRpcProvider extends IEvents{constructor(){super()}}class IJsonRpcProvider extends IBaseJsonRpcProvider{constructor(tt){super()}}const HTTP_REGEX="^https?:";function getUrlProtocol(it){const tt=it.match(new RegExp(/^\w+:/,"gi"));if(!(!tt||!tt.length))return tt[0]}function matchRegexProtocol(it,tt){const rt=getUrlProtocol(it);return typeof rt>"u"?!1:new RegExp(tt).test(rt)}function isHttpUrl(it){return matchRegexProtocol(it,HTTP_REGEX)}function isJsonRpcPayload(it){return typeof it=="object"&&"id"in it&&"jsonrpc"in it&&it.jsonrpc==="2.0"}function isJsonRpcResponse(it){return isJsonRpcPayload(it)&&(isJsonRpcResult(it)||isJsonRpcError(it))}function isJsonRpcResult(it){return"result"in it}function isJsonRpcError(it){return"error"in it}class JsonRpcProvider extends IJsonRpcProvider{constructor(tt){super(tt),this.events=new events.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(tt),this.connection.connected&&this.registerEventListeners()}async connect(tt=this.connection){await this.open(tt)}async disconnect(){await this.close()}on(tt,rt){this.events.on(tt,rt)}once(tt,rt){this.events.once(tt,rt)}off(tt,rt){this.events.off(tt,rt)}removeListener(tt,rt){this.events.removeListener(tt,rt)}async request(tt,rt){return this.requestStrict(formatJsonRpcRequest(tt.method,tt.params||[]),rt)}async requestStrict(tt,rt){return new Promise(async(at,st)=>{if(!this.connection.connected)try{await this.open()}catch(ot){st(ot)}this.events.on(`${tt.id}`,ot=>{isJsonRpcError(ot)?st(ot.error):at(ot.result)});try{await this.connection.send(tt,rt)}catch(ot){st(ot)}})}setConnection(tt=this.connection){return tt}onPayload(tt){this.events.emit("payload",tt),isJsonRpcResponse(tt)?this.events.emit(`${tt.id}`,tt):this.events.emit("message",{type:tt.method,data:tt.params})}onClose(tt){tt&&tt.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${tt.code} ${tt.reason?`(${tt.reason})`:""}`)),this.events.emit("disconnect")}async open(tt=this.connection){this.connection===tt&&this.connection.connected||(this.connection.connected&&this.close(),typeof tt=="string"&&(await this.connection.open(tt),tt=this.connection),this.connection=this.setConnection(tt),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",tt=>this.onPayload(tt)),this.connection.on("close",tt=>this.onClose(tt)),this.connection.on("error",tt=>this.events.emit("error",tt)),this.connection.on("register_error",tt=>this.onClose()),this.hasRegisteredEventListeners=!0)}}function safeJsonParse$2(it){if(typeof it!="string")throw new Error(`Cannot safe json parse value of type ${typeof it}`);try{return JSON.parse(it)}catch{return it}}function safeJsonStringify$2(it){return typeof it=="string"?it:JSON.stringify(it)}const DEFAULT_HTTP_HEADERS={Accept:"application/json","Content-Type":"application/json"},DEFAULT_HTTP_METHOD="POST",DEFAULT_FETCH_OPTS={headers:DEFAULT_HTTP_HEADERS,method:DEFAULT_HTTP_METHOD},EVENT_EMITTER_MAX_LISTENERS_DEFAULT=10;class HttpConnection{constructor(tt){if(this.url=tt,this.events=new events.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!isHttpUrl(tt))throw new Error(`Provided URL is not compatible with HTTP connection: ${tt}`);this.url=tt}get connected(){return this.isAvailable}get connecting(){return this.registering}on(tt,rt){this.events.on(tt,rt)}once(tt,rt){this.events.once(tt,rt)}off(tt,rt){this.events.off(tt,rt)}removeListener(tt,rt){this.events.removeListener(tt,rt)}async open(tt=this.url){await this.register(tt)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(tt,rt){this.isAvailable||await this.register();try{const at=safeJsonStringify$2(tt),ot=await(await fetch$1(this.url,Object.assign(Object.assign({},DEFAULT_FETCH_OPTS),{body:at}))).json();this.onPayload({data:ot})}catch(at){this.onError(tt.id,at)}}async register(tt=this.url){if(!isHttpUrl(tt))throw new Error(`Provided URL is not compatible with HTTP connection: ${tt}`);if(this.registering){const rt=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=rt||this.events.listenerCount("open")>=rt)&&this.events.setMaxListeners(rt+1),new Promise((at,st)=>{this.events.once("register_error",ot=>{this.resetMaxListeners(),st(ot)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return st(new Error("HTTP connection is missing or invalid"));at()})})}this.url=tt,this.registering=!0;try{const rt=safeJsonStringify$2({id:1,jsonrpc:"2.0",method:"test",params:[]});await fetch$1(tt,Object.assign(Object.assign({},DEFAULT_FETCH_OPTS),{body:rt})),this.onOpen()}catch(rt){const at=this.parseError(rt);throw this.events.emit("register_error",at),this.onClose(),at}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(tt){if(typeof tt.data>"u")return;const rt=typeof tt.data=="string"?safeJsonParse$2(tt.data):tt.data;this.events.emit("payload",rt)}onError(tt,rt){const at=this.parseError(rt),st=at.message||at.toString(),ot=formatJsonRpcError(tt,st);this.events.emit("payload",ot)}parseError(tt,rt=this.url){return parseConnectionError(tt,rt,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>EVENT_EMITTER_MAX_LISTENERS_DEFAULT&&this.events.setMaxListeners(EVENT_EMITTER_MAX_LISTENERS_DEFAULT)}}var cjs$3={},cjs$2={};Object.defineProperty(cjs$2,"__esModule",{value:!0}),cjs$2.getLocalStorage=cjs$2.getLocalStorageOrThrow=cjs$2.getCrypto=cjs$2.getCryptoOrThrow=cjs$2.getLocation=cjs$2.getLocationOrThrow=cjs$2.getNavigator=cjs$2.getNavigatorOrThrow=cjs$2.getDocument=cjs$2.getDocumentOrThrow=cjs$2.getFromWindowOrThrow=cjs$2.getFromWindow=void 0;function getFromWindow$2(it){let tt;return typeof window<"u"&&typeof window[it]<"u"&&(tt=window[it]),tt}cjs$2.getFromWindow=getFromWindow$2;function getFromWindowOrThrow$2(it){const tt=getFromWindow$2(it);if(!tt)throw new Error(`${it} is not defined in Window`);return tt}cjs$2.getFromWindowOrThrow=getFromWindowOrThrow$2;function getDocumentOrThrow$2(){return getFromWindowOrThrow$2("document")}cjs$2.getDocumentOrThrow=getDocumentOrThrow$2;function getDocument$5(){return getFromWindow$2("document")}cjs$2.getDocument=getDocument$5;function getNavigatorOrThrow$2(){return getFromWindowOrThrow$2("navigator")}cjs$2.getNavigatorOrThrow=getNavigatorOrThrow$2;function getNavigator$2(){return getFromWindow$2("navigator")}cjs$2.getNavigator=getNavigator$2;function getLocationOrThrow$2(){return getFromWindowOrThrow$2("location")}cjs$2.getLocationOrThrow=getLocationOrThrow$2;function getLocation$2(){return getFromWindow$2("location")}cjs$2.getLocation=getLocation$2;function getCryptoOrThrow$2(){return getFromWindowOrThrow$2("crypto")}cjs$2.getCryptoOrThrow=getCryptoOrThrow$2;function getCrypto$2(){return getFromWindow$2("crypto")}cjs$2.getCrypto=getCrypto$2;function getLocalStorageOrThrow$2(){return getFromWindowOrThrow$2("localStorage")}cjs$2.getLocalStorageOrThrow=getLocalStorageOrThrow$2;function getLocalStorage$2(){return getFromWindow$2("localStorage")}cjs$2.getLocalStorage=getLocalStorage$2,Object.defineProperty(cjs$3,"__esModule",{value:!0});var getWindowMetadata_1=cjs$3.getWindowMetadata=void 0;const window_getters_1=cjs$2;function getWindowMetadata(){let it,tt;try{it=window_getters_1.getDocumentOrThrow(),tt=window_getters_1.getLocationOrThrow()}catch{return null}function rt(){const vt=it.getElementsByTagName("link"),At=[];for(let xt=0;xt<vt.length;xt++){const Et=vt[xt],Tt=Et.getAttribute("rel");if(Tt&&Tt.toLowerCase().indexOf("icon")>-1){const wt=Et.getAttribute("href");if(wt)if(wt.toLowerCase().indexOf("https:")===-1&&wt.toLowerCase().indexOf("http:")===-1&&wt.indexOf("//")!==0){let Ct=tt.protocol+"//"+tt.host;if(wt.indexOf("/")===0)Ct+=wt;else{const It=tt.pathname.split("/");It.pop();const St=It.join("/");Ct+=St+"/"+wt}At.push(Ct)}else if(wt.indexOf("//")===0){const Ct=tt.protocol+wt;At.push(Ct)}else At.push(wt)}}return At}function at(...vt){const At=it.getElementsByTagName("meta");for(let xt=0;xt<At.length;xt++){const Et=At[xt],Tt=["itemprop","property","name"].map(wt=>Et.getAttribute(wt)).filter(wt=>wt?vt.includes(wt):!1);if(Tt.length&&Tt){const wt=Et.getAttribute("content");if(wt)return wt}}return""}function st(){let vt=at("name","og:site_name","og:title","twitter:title");return vt||(vt=it.title),vt}function ot(){return at("description","og:description","twitter:description","keywords")}const lt=st(),ut=ot(),ht=tt.origin,mt=rt();return{description:ut,url:ht,icons:mt,name:lt}}getWindowMetadata_1=cjs$3.getWindowMetadata=getWindowMetadata;var cjs$1={};Object.defineProperty(cjs$1,"__esModule",{value:!0});var getLocalStorage_1=cjs$1.getLocalStorage=getLocalStorageOrThrow_1=cjs$1.getLocalStorageOrThrow=getCrypto_1=cjs$1.getCrypto=getCryptoOrThrow_1=cjs$1.getCryptoOrThrow=getLocation_1=cjs$1.getLocation=getLocationOrThrow_1=cjs$1.getLocationOrThrow=getNavigator_1=cjs$1.getNavigator=getNavigatorOrThrow_1=cjs$1.getNavigatorOrThrow=getDocument_1=cjs$1.getDocument=getDocumentOrThrow_1=cjs$1.getDocumentOrThrow=getFromWindowOrThrow_1=cjs$1.getFromWindowOrThrow=getFromWindow_1=cjs$1.getFromWindow=void 0;function getFromWindow$1(it){let tt;return typeof window<"u"&&typeof window[it]<"u"&&(tt=window[it]),tt}var getFromWindow_1=cjs$1.getFromWindow=getFromWindow$1;function getFromWindowOrThrow$1(it){const tt=getFromWindow$1(it);if(!tt)throw new Error(`${it} is not defined in Window`);return tt}var getFromWindowOrThrow_1=cjs$1.getFromWindowOrThrow=getFromWindowOrThrow$1;function getDocumentOrThrow$1(){return getFromWindowOrThrow$1("document")}var getDocumentOrThrow_1=cjs$1.getDocumentOrThrow=getDocumentOrThrow$1;function getDocument$4(){return getFromWindow$1("document")}var getDocument_1=cjs$1.getDocument=getDocument$4;function getNavigatorOrThrow$1(){return getFromWindowOrThrow$1("navigator")}var getNavigatorOrThrow_1=cjs$1.getNavigatorOrThrow=getNavigatorOrThrow$1;function getNavigator$1(){return getFromWindow$1("navigator")}var getNavigator_1=cjs$1.getNavigator=getNavigator$1;function getLocationOrThrow$1(){return getFromWindowOrThrow$1("location")}var getLocationOrThrow_1=cjs$1.getLocationOrThrow=getLocationOrThrow$1;function getLocation$1(){return getFromWindow$1("location")}var getLocation_1=cjs$1.getLocation=getLocation$1;function getCryptoOrThrow$1(){return getFromWindowOrThrow$1("crypto")}var getCryptoOrThrow_1=cjs$1.getCryptoOrThrow=getCryptoOrThrow$1;function getCrypto$1(){return getFromWindow$1("crypto")}var getCrypto_1=cjs$1.getCrypto=getCrypto$1;function getLocalStorageOrThrow$1(){return getFromWindowOrThrow$1("localStorage")}var getLocalStorageOrThrow_1=cjs$1.getLocalStorageOrThrow=getLocalStorageOrThrow$1;function getLocalStorage$1(){return getFromWindow$1("localStorage")}getLocalStorage_1=cjs$1.getLocalStorage=getLocalStorage$1;var __spreadArrays=globalThis&&globalThis.__spreadArrays||function(){for(var it=0,tt=0,rt=arguments.length;tt<rt;tt++)it+=arguments[tt].length;for(var at=Array(it),st=0,tt=0;tt<rt;tt++)for(var ot=arguments[tt],lt=0,ut=ot.length;lt<ut;lt++,st++)at[st]=ot[lt];return at},BrowserInfo$1=function(){function it(tt,rt,at){this.name=tt,this.version=rt,this.os=at,this.type="browser"}return it}(),NodeInfo$1=function(){function it(tt){this.version=tt,this.type="node",this.name="node",this.os=process.platform}return it}(),SearchBotDeviceInfo$1=function(){function it(tt,rt,at,st){this.name=tt,this.version=rt,this.os=at,this.bot=st,this.type="bot-device"}return it}(),BotInfo$1=function(){function it(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return it}(),ReactNativeInfo$1=function(){function it(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return it}(),SEARCHBOX_UA_REGEX$1=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX$1=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS$1=3,userAgentRules$1=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",SEARCHBOX_UA_REGEX$1]],operatingSystemRules$1=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect$1(it){return it?parseUserAgent$1(it):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo$1:typeof navigator<"u"?parseUserAgent$1(navigator.userAgent):getNodeVersion$1()}function matchUserAgent$1(it){return it!==""&&userAgentRules$1.reduce(function(tt,rt){var at=rt[0],st=rt[1];if(tt)return tt;var ot=st.exec(it);return!!ot&&[at,ot]},!1)}function parseUserAgent$1(it){var tt=matchUserAgent$1(it);if(!tt)return null;var rt=tt[0],at=tt[1];if(rt==="searchbot")return new BotInfo$1;var st=at[1]&&at[1].split(/[._]/).slice(0,3);st?st.length<REQUIRED_VERSION_PARTS$1&&(st=__spreadArrays(st,createVersionParts$1(REQUIRED_VERSION_PARTS$1-st.length))):st=[];var ot=st.join("."),lt=detectOS$3(it),ut=SEARCHBOT_OS_REGEX$1.exec(it);return ut&&ut[1]?new SearchBotDeviceInfo$1(rt,ot,lt,ut[1]):new BrowserInfo$1(rt,ot,lt)}function detectOS$3(it){for(var tt=0,rt=operatingSystemRules$1.length;tt<rt;tt++){var at=operatingSystemRules$1[tt],st=at[0],ot=at[1],lt=ot.exec(it);if(lt)return st}return null}function getNodeVersion$1(){var it=typeof process<"u"&&process.version;return it?new NodeInfo$1(process.version.slice(1)):null}function createVersionParts$1(it){for(var tt=[],rt=0;rt<it;rt++)tt.push("0");return tt}function detectEnv$1(it){return detect$1(it)}function detectOS$2(){const it=detectEnv$1();return it&&it.os?it.os:void 0}function isAndroid$1(){const it=detectOS$2();return it?it.toLowerCase().includes("android"):!1}function isIOS$1(){const it=detectOS$2();return it?it.toLowerCase().includes("ios")||it.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function isMobile$1(){return detectOS$2()?isAndroid$1()||isIOS$1():!1}function isNode$2(){const it=detectEnv$1();return it&&it.name?it.name.toLowerCase()==="node":!1}function isBrowser$1(){return!isNode$2()&&!!getNavigator()}const getFromWindow=getFromWindow_1,getFromWindowOrThrow=getFromWindowOrThrow_1,getDocumentOrThrow=getDocumentOrThrow_1,getDocument$3=getDocument_1,getNavigatorOrThrow=getNavigatorOrThrow_1,getNavigator=getNavigator_1,getLocationOrThrow=getLocationOrThrow_1,getLocation=getLocation_1,getCryptoOrThrow=getCryptoOrThrow_1,getCrypto=getCrypto_1,getLocalStorageOrThrow=getLocalStorageOrThrow_1,getLocalStorage=getLocalStorage_1;function getClientMeta(){return getWindowMetadata_1()}function safeJsonParse$1(it){if(typeof it!="string")throw new Error(`Cannot safe json parse value of type ${typeof it}`);try{return JSON.parse(it)}catch{return it}}function safeJsonStringify$1(it){return typeof it=="string"?it:JSON.stringify(it)}const safeJsonParse=safeJsonParse$1,safeJsonStringify=safeJsonStringify$1;function setLocal(it,tt){const rt=safeJsonStringify(tt),at=getLocalStorage();at&&at.setItem(it,rt)}function getLocal(it){let tt=null,rt=null;const at=getLocalStorage();return at&&(rt=at.getItem(it)),tt=rt&&safeJsonParse(rt),tt}function removeLocal(it){const tt=getLocalStorage();tt&&tt.removeItem(it)}const mobileLinkChoiceKey="WALLETCONNECT_DEEPLINK_CHOICE";function formatIOSMobile(it,tt){const rt=encodeURIComponent(it);return tt.universalLink?`${tt.universalLink}/wc?uri=${rt}`:tt.deepLink?`${tt.deepLink}${tt.deepLink.endsWith(":")?"//":"/"}wc?uri=${rt}`:""}function saveMobileLinkInfo(it){const tt=it.href.split("?")[0];setLocal(mobileLinkChoiceKey,Object.assign(Object.assign({},it),{href:tt}))}function getMobileRegistryEntry(it,tt){return it.filter(rt=>rt.name.toLowerCase().includes(tt.toLowerCase()))[0]}function getMobileLinkRegistry(it,tt){let rt=it;return tt&&(rt=tt.map(at=>getMobileRegistryEntry(it,at)).filter(Boolean)),rt}const API_URL="https://registry.walletconnect.com";function getWalletRegistryUrl(){return API_URL+"/api/v2/wallets"}function getDappRegistryUrl(){return API_URL+"/api/v2/dapps"}function formatMobileRegistryEntry(it,tt="mobile"){var rt;return{name:it.name||"",shortName:it.metadata.shortName||"",color:it.metadata.colors.primary||"",logo:(rt=it.image_url.sm)!==null&&rt!==void 0?rt:"",universalLink:it[tt].universal||"",deepLink:it[tt].native||""}}function formatMobileRegistry(it,tt="mobile"){return Object.values(it).filter(rt=>!!rt[tt].universal||!!rt[tt].native).map(rt=>formatMobileRegistryEntry(rt,tt))}const esm$1=Object.freeze(Object.defineProperty({__proto__:null,detectEnv:detectEnv$1,detectOS:detectOS$2,isAndroid:isAndroid$1,isIOS:isIOS$1,isMobile:isMobile$1,isNode:isNode$2,isBrowser:isBrowser$1,getFromWindow,getFromWindowOrThrow,getDocumentOrThrow,getDocument:getDocument$3,getNavigatorOrThrow,getNavigator,getLocationOrThrow,getLocation,getCryptoOrThrow,getCrypto,getLocalStorageOrThrow,getLocalStorage,getClientMeta,safeJsonParse,safeJsonStringify,setLocal,getLocal,removeLocal,mobileLinkChoiceKey,formatIOSMobile,saveMobileLinkInfo,getMobileRegistryEntry,getMobileLinkRegistry,getWalletRegistryUrl,getDappRegistryUrl,formatMobileRegistryEntry,formatMobileRegistry},Symbol.toStringTag,{value:"Module"})),reservedEvents=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],signingMethods=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],infuraNetworks={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"};var bn={exports:{}};(function(it){(function(tt,rt){function at(jt,kt){if(!jt)throw new Error(kt||"Assertion failed")}function st(jt,kt){jt.super_=kt;var zt=function(){};zt.prototype=kt.prototype,jt.prototype=new zt,jt.prototype.constructor=jt}function ot(jt,kt,zt){if(ot.isBN(jt))return jt;this.negative=0,this.words=null,this.length=0,this.red=null,jt!==null&&((kt==="le"||kt==="be")&&(zt=kt,kt=10),this._init(jt||0,kt||10,zt||"be"))}typeof tt=="object"?tt.exports=ot:rt.BN=ot,ot.BN=ot,ot.wordSize=26;var lt;try{lt=require$$0$5.Buffer}catch{}ot.isBN=function(kt){return kt instanceof ot?!0:kt!==null&&typeof kt=="object"&&kt.constructor.wordSize===ot.wordSize&&Array.isArray(kt.words)},ot.max=function(kt,zt){return kt.cmp(zt)>0?kt:zt},ot.min=function(kt,zt){return kt.cmp(zt)<0?kt:zt},ot.prototype._init=function(kt,zt,Nt){if(typeof kt=="number")return this._initNumber(kt,zt,Nt);if(typeof kt=="object")return this._initArray(kt,zt,Nt);zt==="hex"&&(zt=16),at(zt===(zt|0)&&zt>=2&&zt<=36),kt=kt.toString().replace(/\s+/g,"");var Mt=0;kt[0]==="-"&&Mt++,zt===16?this._parseHex(kt,Mt):this._parseBase(kt,zt,Mt),kt[0]==="-"&&(this.negative=1),this.strip(),Nt==="le"&&this._initArray(this.toArray(),zt,Nt)},ot.prototype._initNumber=function(kt,zt,Nt){kt<0&&(this.negative=1,kt=-kt),kt<67108864?(this.words=[kt&67108863],this.length=1):kt<4503599627370496?(this.words=[kt&67108863,kt/67108864&67108863],this.length=2):(at(kt<9007199254740992),this.words=[kt&67108863,kt/67108864&67108863,1],this.length=3),Nt==="le"&&this._initArray(this.toArray(),zt,Nt)},ot.prototype._initArray=function(kt,zt,Nt){if(at(typeof kt.length=="number"),kt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(kt.length/3),this.words=new Array(this.length);for(var Mt=0;Mt<this.length;Mt++)this.words[Mt]=0;var Lt,Ht,Qt=0;if(Nt==="be")for(Mt=kt.length-1,Lt=0;Mt>=0;Mt-=3)Ht=kt[Mt]|kt[Mt-1]<<8|kt[Mt-2]<<16,this.words[Lt]|=Ht<<Qt&67108863,this.words[Lt+1]=Ht>>>26-Qt&67108863,Qt+=24,Qt>=26&&(Qt-=26,Lt++);else if(Nt==="le")for(Mt=0,Lt=0;Mt<kt.length;Mt+=3)Ht=kt[Mt]|kt[Mt+1]<<8|kt[Mt+2]<<16,this.words[Lt]|=Ht<<Qt&67108863,this.words[Lt+1]=Ht>>>26-Qt&67108863,Qt+=24,Qt>=26&&(Qt-=26,Lt++);return this.strip()};function ut(jt,kt,zt){for(var Nt=0,Mt=Math.min(jt.length,zt),Lt=kt;Lt<Mt;Lt++){var Ht=jt.charCodeAt(Lt)-48;Nt<<=4,Ht>=49&&Ht<=54?Nt|=Ht-49+10:Ht>=17&&Ht<=22?Nt|=Ht-17+10:Nt|=Ht&15}return Nt}ot.prototype._parseHex=function(kt,zt){this.length=Math.ceil((kt.length-zt)/6),this.words=new Array(this.length);for(var Nt=0;Nt<this.length;Nt++)this.words[Nt]=0;var Mt,Lt,Ht=0;for(Nt=kt.length-6,Mt=0;Nt>=zt;Nt-=6)Lt=ut(kt,Nt,Nt+6),this.words[Mt]|=Lt<<Ht&67108863,this.words[Mt+1]|=Lt>>>26-Ht&4194303,Ht+=24,Ht>=26&&(Ht-=26,Mt++);Nt+6!==zt&&(Lt=ut(kt,zt,Nt+6),this.words[Mt]|=Lt<<Ht&67108863,this.words[Mt+1]|=Lt>>>26-Ht&4194303),this.strip()};function ht(jt,kt,zt,Nt){for(var Mt=0,Lt=Math.min(jt.length,zt),Ht=kt;Ht<Lt;Ht++){var Qt=jt.charCodeAt(Ht)-48;Mt*=Nt,Qt>=49?Mt+=Qt-49+10:Qt>=17?Mt+=Qt-17+10:Mt+=Qt}return Mt}ot.prototype._parseBase=function(kt,zt,Nt){this.words=[0],this.length=1;for(var Mt=0,Lt=1;Lt<=67108863;Lt*=zt)Mt++;Mt--,Lt=Lt/zt|0;for(var Ht=kt.length-Nt,Qt=Ht%Mt,Ut=Math.min(Ht,Ht-Qt)+Nt,Bt=0,Kt=Nt;Kt<Ut;Kt+=Mt)Bt=ht(kt,Kt,Kt+Mt,zt),this.imuln(Lt),this.words[0]+Bt<67108864?this.words[0]+=Bt:this._iaddn(Bt);if(Qt!==0){var Gt=1;for(Bt=ht(kt,Kt,kt.length,zt),Kt=0;Kt<Qt;Kt++)Gt*=zt;this.imuln(Gt),this.words[0]+Bt<67108864?this.words[0]+=Bt:this._iaddn(Bt)}},ot.prototype.copy=function(kt){kt.words=new Array(this.length);for(var zt=0;zt<this.length;zt++)kt.words[zt]=this.words[zt];kt.length=this.length,kt.negative=this.negative,kt.red=this.red},ot.prototype.clone=function(){var kt=new ot(null);return this.copy(kt),kt},ot.prototype._expand=function(kt){for(;this.length<kt;)this.words[this.length++]=0;return this},ot.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ot.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ot.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var mt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],bt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],vt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ot.prototype.toString=function(kt,zt){kt=kt||10,zt=zt|0||1;var Nt;if(kt===16||kt==="hex"){Nt="";for(var Mt=0,Lt=0,Ht=0;Ht<this.length;Ht++){var Qt=this.words[Ht],Ut=((Qt<<Mt|Lt)&16777215).toString(16);Lt=Qt>>>24-Mt&16777215,Lt!==0||Ht!==this.length-1?Nt=mt[6-Ut.length]+Ut+Nt:Nt=Ut+Nt,Mt+=2,Mt>=26&&(Mt-=26,Ht--)}for(Lt!==0&&(Nt=Lt.toString(16)+Nt);Nt.length%zt!==0;)Nt="0"+Nt;return this.negative!==0&&(Nt="-"+Nt),Nt}if(kt===(kt|0)&&kt>=2&&kt<=36){var Bt=bt[kt],Kt=vt[kt];Nt="";var Gt=this.clone();for(Gt.negative=0;!Gt.isZero();){var Pt=Gt.modn(Kt).toString(kt);Gt=Gt.idivn(Kt),Gt.isZero()?Nt=Pt+Nt:Nt=mt[Bt-Pt.length]+Pt+Nt}for(this.isZero()&&(Nt="0"+Nt);Nt.length%zt!==0;)Nt="0"+Nt;return this.negative!==0&&(Nt="-"+Nt),Nt}at(!1,"Base should be between 2 and 36")},ot.prototype.toNumber=function(){var kt=this.words[0];return this.length===2?kt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?kt+=4503599627370496+this.words[1]*67108864:this.length>2&&at(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-kt:kt},ot.prototype.toJSON=function(){return this.toString(16)},ot.prototype.toBuffer=function(kt,zt){return at(typeof lt<"u"),this.toArrayLike(lt,kt,zt)},ot.prototype.toArray=function(kt,zt){return this.toArrayLike(Array,kt,zt)},ot.prototype.toArrayLike=function(kt,zt,Nt){var Mt=this.byteLength(),Lt=Nt||Math.max(1,Mt);at(Mt<=Lt,"byte array longer than desired length"),at(Lt>0,"Requested array length <= 0"),this.strip();var Ht=zt==="le",Qt=new kt(Lt),Ut,Bt,Kt=this.clone();if(Ht){for(Bt=0;!Kt.isZero();Bt++)Ut=Kt.andln(255),Kt.iushrn(8),Qt[Bt]=Ut;for(;Bt<Lt;Bt++)Qt[Bt]=0}else{for(Bt=0;Bt<Lt-Mt;Bt++)Qt[Bt]=0;for(Bt=0;!Kt.isZero();Bt++)Ut=Kt.andln(255),Kt.iushrn(8),Qt[Lt-Bt-1]=Ut}return Qt},Math.clz32?ot.prototype._countBits=function(kt){return 32-Math.clz32(kt)}:ot.prototype._countBits=function(kt){var zt=kt,Nt=0;return zt>=4096&&(Nt+=13,zt>>>=13),zt>=64&&(Nt+=7,zt>>>=7),zt>=8&&(Nt+=4,zt>>>=4),zt>=2&&(Nt+=2,zt>>>=2),Nt+zt},ot.prototype._zeroBits=function(kt){if(kt===0)return 26;var zt=kt,Nt=0;return(zt&8191)===0&&(Nt+=13,zt>>>=13),(zt&127)===0&&(Nt+=7,zt>>>=7),(zt&15)===0&&(Nt+=4,zt>>>=4),(zt&3)===0&&(Nt+=2,zt>>>=2),(zt&1)===0&&Nt++,Nt},ot.prototype.bitLength=function(){var kt=this.words[this.length-1],zt=this._countBits(kt);return(this.length-1)*26+zt};function At(jt){for(var kt=new Array(jt.bitLength()),zt=0;zt<kt.length;zt++){var Nt=zt/26|0,Mt=zt%26;kt[zt]=(jt.words[Nt]&1<<Mt)>>>Mt}return kt}ot.prototype.zeroBits=function(){if(this.isZero())return 0;for(var kt=0,zt=0;zt<this.length;zt++){var Nt=this._zeroBits(this.words[zt]);if(kt+=Nt,Nt!==26)break}return kt},ot.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ot.prototype.toTwos=function(kt){return this.negative!==0?this.abs().inotn(kt).iaddn(1):this.clone()},ot.prototype.fromTwos=function(kt){return this.testn(kt-1)?this.notn(kt).iaddn(1).ineg():this.clone()},ot.prototype.isNeg=function(){return this.negative!==0},ot.prototype.neg=function(){return this.clone().ineg()},ot.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ot.prototype.iuor=function(kt){for(;this.length<kt.length;)this.words[this.length++]=0;for(var zt=0;zt<kt.length;zt++)this.words[zt]=this.words[zt]|kt.words[zt];return this.strip()},ot.prototype.ior=function(kt){return at((this.negative|kt.negative)===0),this.iuor(kt)},ot.prototype.or=function(kt){return this.length>kt.length?this.clone().ior(kt):kt.clone().ior(this)},ot.prototype.uor=function(kt){return this.length>kt.length?this.clone().iuor(kt):kt.clone().iuor(this)},ot.prototype.iuand=function(kt){var zt;this.length>kt.length?zt=kt:zt=this;for(var Nt=0;Nt<zt.length;Nt++)this.words[Nt]=this.words[Nt]&kt.words[Nt];return this.length=zt.length,this.strip()},ot.prototype.iand=function(kt){return at((this.negative|kt.negative)===0),this.iuand(kt)},ot.prototype.and=function(kt){return this.length>kt.length?this.clone().iand(kt):kt.clone().iand(this)},ot.prototype.uand=function(kt){return this.length>kt.length?this.clone().iuand(kt):kt.clone().iuand(this)},ot.prototype.iuxor=function(kt){var zt,Nt;this.length>kt.length?(zt=this,Nt=kt):(zt=kt,Nt=this);for(var Mt=0;Mt<Nt.length;Mt++)this.words[Mt]=zt.words[Mt]^Nt.words[Mt];if(this!==zt)for(;Mt<zt.length;Mt++)this.words[Mt]=zt.words[Mt];return this.length=zt.length,this.strip()},ot.prototype.ixor=function(kt){return at((this.negative|kt.negative)===0),this.iuxor(kt)},ot.prototype.xor=function(kt){return this.length>kt.length?this.clone().ixor(kt):kt.clone().ixor(this)},ot.prototype.uxor=function(kt){return this.length>kt.length?this.clone().iuxor(kt):kt.clone().iuxor(this)},ot.prototype.inotn=function(kt){at(typeof kt=="number"&&kt>=0);var zt=Math.ceil(kt/26)|0,Nt=kt%26;this._expand(zt),Nt>0&&zt--;for(var Mt=0;Mt<zt;Mt++)this.words[Mt]=~this.words[Mt]&67108863;return Nt>0&&(this.words[Mt]=~this.words[Mt]&67108863>>26-Nt),this.strip()},ot.prototype.notn=function(kt){return this.clone().inotn(kt)},ot.prototype.setn=function(kt,zt){at(typeof kt=="number"&&kt>=0);var Nt=kt/26|0,Mt=kt%26;return this._expand(Nt+1),zt?this.words[Nt]=this.words[Nt]|1<<Mt:this.words[Nt]=this.words[Nt]&~(1<<Mt),this.strip()},ot.prototype.iadd=function(kt){var zt;if(this.negative!==0&&kt.negative===0)return this.negative=0,zt=this.isub(kt),this.negative^=1,this._normSign();if(this.negative===0&&kt.negative!==0)return kt.negative=0,zt=this.isub(kt),kt.negative=1,zt._normSign();var Nt,Mt;this.length>kt.length?(Nt=this,Mt=kt):(Nt=kt,Mt=this);for(var Lt=0,Ht=0;Ht<Mt.length;Ht++)zt=(Nt.words[Ht]|0)+(Mt.words[Ht]|0)+Lt,this.words[Ht]=zt&67108863,Lt=zt>>>26;for(;Lt!==0&&Ht<Nt.length;Ht++)zt=(Nt.words[Ht]|0)+Lt,this.words[Ht]=zt&67108863,Lt=zt>>>26;if(this.length=Nt.length,Lt!==0)this.words[this.length]=Lt,this.length++;else if(Nt!==this)for(;Ht<Nt.length;Ht++)this.words[Ht]=Nt.words[Ht];return this},ot.prototype.add=function(kt){var zt;return kt.negative!==0&&this.negative===0?(kt.negative=0,zt=this.sub(kt),kt.negative^=1,zt):kt.negative===0&&this.negative!==0?(this.negative=0,zt=kt.sub(this),this.negative=1,zt):this.length>kt.length?this.clone().iadd(kt):kt.clone().iadd(this)},ot.prototype.isub=function(kt){if(kt.negative!==0){kt.negative=0;var zt=this.iadd(kt);return kt.negative=1,zt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(kt),this.negative=1,this._normSign();var Nt=this.cmp(kt);if(Nt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Mt,Lt;Nt>0?(Mt=this,Lt=kt):(Mt=kt,Lt=this);for(var Ht=0,Qt=0;Qt<Lt.length;Qt++)zt=(Mt.words[Qt]|0)-(Lt.words[Qt]|0)+Ht,Ht=zt>>26,this.words[Qt]=zt&67108863;for(;Ht!==0&&Qt<Mt.length;Qt++)zt=(Mt.words[Qt]|0)+Ht,Ht=zt>>26,this.words[Qt]=zt&67108863;if(Ht===0&&Qt<Mt.length&&Mt!==this)for(;Qt<Mt.length;Qt++)this.words[Qt]=Mt.words[Qt];return this.length=Math.max(this.length,Qt),Mt!==this&&(this.negative=1),this.strip()},ot.prototype.sub=function(kt){return this.clone().isub(kt)};function xt(jt,kt,zt){zt.negative=kt.negative^jt.negative;var Nt=jt.length+kt.length|0;zt.length=Nt,Nt=Nt-1|0;var Mt=jt.words[0]|0,Lt=kt.words[0]|0,Ht=Mt*Lt,Qt=Ht&67108863,Ut=Ht/67108864|0;zt.words[0]=Qt;for(var Bt=1;Bt<Nt;Bt++){for(var Kt=Ut>>>26,Gt=Ut&67108863,Pt=Math.min(Bt,kt.length-1),Zt=Math.max(0,Bt-jt.length+1);Zt<=Pt;Zt++){var an=Bt-Zt|0;Mt=jt.words[an]|0,Lt=kt.words[Zt]|0,Ht=Mt*Lt+Gt,Kt+=Ht/67108864|0,Gt=Ht&67108863}zt.words[Bt]=Gt|0,Ut=Kt|0}return Ut!==0?zt.words[Bt]=Ut|0:zt.length--,zt.strip()}var Et=function(kt,zt,Nt){var Mt=kt.words,Lt=zt.words,Ht=Nt.words,Qt=0,Ut,Bt,Kt,Gt=Mt[0]|0,Pt=Gt&8191,Zt=Gt>>>13,an=Mt[1]|0,Jt=an&8191,rn=an>>>13,fn=Mt[2]|0,pn=fn&8191,vn=fn>>>13,En=Mt[3]|0,dn=En&8191,cn=En>>>13,_n=Mt[4]|0,wn=_n&8191,Ln=_n>>>13,yn=Mt[5]|0,nn=yn&8191,sn=yn>>>13,hn=Mt[6]|0,Cn=hn&8191,$n=hn>>>13,gn=Mt[7]|0,mn=gn&8191,Mn=gn>>>13,On=Mt[8]|0,Dn=On&8191,on=On>>>13,Xt=Mt[9]|0,tn=Xt&8191,un=Xt>>>13,xn=Lt[0]|0,Tn=xn&8191,In=xn>>>13,jn=Lt[1]|0,Un=jn&8191,zn=jn>>>13,Xn=Lt[2]|0,Gn=Xn&8191,Sn=Xn>>>13,Fn=Lt[3]|0,Nn=Fn&8191,Wn=Fn>>>13,Kn=Lt[4]|0,Hn=Kn&8191,Yn=Kn>>>13,dr=Lt[5]|0,tr=dr&8191,Qn=dr>>>13,mr=Lt[6]|0,Jn=mr&8191,rr=mr>>>13,hr=Lt[7]|0,er=hr&8191,ir=hr>>>13,An=Lt[8]|0,Rn=An&8191,Pn=An>>>13,kn=Lt[9]|0,Bn=kn&8191,Vn=kn>>>13;Nt.negative=kt.negative^zt.negative,Nt.length=19,Ut=Math.imul(Pt,Tn),Bt=Math.imul(Pt,In),Bt=Bt+Math.imul(Zt,Tn)|0,Kt=Math.imul(Zt,In);var nr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(nr>>>26)|0,nr&=67108863,Ut=Math.imul(Jt,Tn),Bt=Math.imul(Jt,In),Bt=Bt+Math.imul(rn,Tn)|0,Kt=Math.imul(rn,In),Ut=Ut+Math.imul(Pt,Un)|0,Bt=Bt+Math.imul(Pt,zn)|0,Bt=Bt+Math.imul(Zt,Un)|0,Kt=Kt+Math.imul(Zt,zn)|0;var Zn=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,Ut=Math.imul(pn,Tn),Bt=Math.imul(pn,In),Bt=Bt+Math.imul(vn,Tn)|0,Kt=Math.imul(vn,In),Ut=Ut+Math.imul(Jt,Un)|0,Bt=Bt+Math.imul(Jt,zn)|0,Bt=Bt+Math.imul(rn,Un)|0,Kt=Kt+Math.imul(rn,zn)|0,Ut=Ut+Math.imul(Pt,Gn)|0,Bt=Bt+Math.imul(Pt,Sn)|0,Bt=Bt+Math.imul(Zt,Gn)|0,Kt=Kt+Math.imul(Zt,Sn)|0;var qn=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(qn>>>26)|0,qn&=67108863,Ut=Math.imul(dn,Tn),Bt=Math.imul(dn,In),Bt=Bt+Math.imul(cn,Tn)|0,Kt=Math.imul(cn,In),Ut=Ut+Math.imul(pn,Un)|0,Bt=Bt+Math.imul(pn,zn)|0,Bt=Bt+Math.imul(vn,Un)|0,Kt=Kt+Math.imul(vn,zn)|0,Ut=Ut+Math.imul(Jt,Gn)|0,Bt=Bt+Math.imul(Jt,Sn)|0,Bt=Bt+Math.imul(rn,Gn)|0,Kt=Kt+Math.imul(rn,Sn)|0,Ut=Ut+Math.imul(Pt,Nn)|0,Bt=Bt+Math.imul(Pt,Wn)|0,Bt=Bt+Math.imul(Zt,Nn)|0,Kt=Kt+Math.imul(Zt,Wn)|0;var cr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(cr>>>26)|0,cr&=67108863,Ut=Math.imul(wn,Tn),Bt=Math.imul(wn,In),Bt=Bt+Math.imul(Ln,Tn)|0,Kt=Math.imul(Ln,In),Ut=Ut+Math.imul(dn,Un)|0,Bt=Bt+Math.imul(dn,zn)|0,Bt=Bt+Math.imul(cn,Un)|0,Kt=Kt+Math.imul(cn,zn)|0,Ut=Ut+Math.imul(pn,Gn)|0,Bt=Bt+Math.imul(pn,Sn)|0,Bt=Bt+Math.imul(vn,Gn)|0,Kt=Kt+Math.imul(vn,Sn)|0,Ut=Ut+Math.imul(Jt,Nn)|0,Bt=Bt+Math.imul(Jt,Wn)|0,Bt=Bt+Math.imul(rn,Nn)|0,Kt=Kt+Math.imul(rn,Wn)|0,Ut=Ut+Math.imul(Pt,Hn)|0,Bt=Bt+Math.imul(Pt,Yn)|0,Bt=Bt+Math.imul(Zt,Hn)|0,Kt=Kt+Math.imul(Zt,Yn)|0;var ar=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(ar>>>26)|0,ar&=67108863,Ut=Math.imul(nn,Tn),Bt=Math.imul(nn,In),Bt=Bt+Math.imul(sn,Tn)|0,Kt=Math.imul(sn,In),Ut=Ut+Math.imul(wn,Un)|0,Bt=Bt+Math.imul(wn,zn)|0,Bt=Bt+Math.imul(Ln,Un)|0,Kt=Kt+Math.imul(Ln,zn)|0,Ut=Ut+Math.imul(dn,Gn)|0,Bt=Bt+Math.imul(dn,Sn)|0,Bt=Bt+Math.imul(cn,Gn)|0,Kt=Kt+Math.imul(cn,Sn)|0,Ut=Ut+Math.imul(pn,Nn)|0,Bt=Bt+Math.imul(pn,Wn)|0,Bt=Bt+Math.imul(vn,Nn)|0,Kt=Kt+Math.imul(vn,Wn)|0,Ut=Ut+Math.imul(Jt,Hn)|0,Bt=Bt+Math.imul(Jt,Yn)|0,Bt=Bt+Math.imul(rn,Hn)|0,Kt=Kt+Math.imul(rn,Yn)|0,Ut=Ut+Math.imul(Pt,tr)|0,Bt=Bt+Math.imul(Pt,Qn)|0,Bt=Bt+Math.imul(Zt,tr)|0,Kt=Kt+Math.imul(Zt,Qn)|0;var sr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(sr>>>26)|0,sr&=67108863,Ut=Math.imul(Cn,Tn),Bt=Math.imul(Cn,In),Bt=Bt+Math.imul($n,Tn)|0,Kt=Math.imul($n,In),Ut=Ut+Math.imul(nn,Un)|0,Bt=Bt+Math.imul(nn,zn)|0,Bt=Bt+Math.imul(sn,Un)|0,Kt=Kt+Math.imul(sn,zn)|0,Ut=Ut+Math.imul(wn,Gn)|0,Bt=Bt+Math.imul(wn,Sn)|0,Bt=Bt+Math.imul(Ln,Gn)|0,Kt=Kt+Math.imul(Ln,Sn)|0,Ut=Ut+Math.imul(dn,Nn)|0,Bt=Bt+Math.imul(dn,Wn)|0,Bt=Bt+Math.imul(cn,Nn)|0,Kt=Kt+Math.imul(cn,Wn)|0,Ut=Ut+Math.imul(pn,Hn)|0,Bt=Bt+Math.imul(pn,Yn)|0,Bt=Bt+Math.imul(vn,Hn)|0,Kt=Kt+Math.imul(vn,Yn)|0,Ut=Ut+Math.imul(Jt,tr)|0,Bt=Bt+Math.imul(Jt,Qn)|0,Bt=Bt+Math.imul(rn,tr)|0,Kt=Kt+Math.imul(rn,Qn)|0,Ut=Ut+Math.imul(Pt,Jn)|0,Bt=Bt+Math.imul(Pt,rr)|0,Bt=Bt+Math.imul(Zt,Jn)|0,Kt=Kt+Math.imul(Zt,rr)|0;var ur=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(ur>>>26)|0,ur&=67108863,Ut=Math.imul(mn,Tn),Bt=Math.imul(mn,In),Bt=Bt+Math.imul(Mn,Tn)|0,Kt=Math.imul(Mn,In),Ut=Ut+Math.imul(Cn,Un)|0,Bt=Bt+Math.imul(Cn,zn)|0,Bt=Bt+Math.imul($n,Un)|0,Kt=Kt+Math.imul($n,zn)|0,Ut=Ut+Math.imul(nn,Gn)|0,Bt=Bt+Math.imul(nn,Sn)|0,Bt=Bt+Math.imul(sn,Gn)|0,Kt=Kt+Math.imul(sn,Sn)|0,Ut=Ut+Math.imul(wn,Nn)|0,Bt=Bt+Math.imul(wn,Wn)|0,Bt=Bt+Math.imul(Ln,Nn)|0,Kt=Kt+Math.imul(Ln,Wn)|0,Ut=Ut+Math.imul(dn,Hn)|0,Bt=Bt+Math.imul(dn,Yn)|0,Bt=Bt+Math.imul(cn,Hn)|0,Kt=Kt+Math.imul(cn,Yn)|0,Ut=Ut+Math.imul(pn,tr)|0,Bt=Bt+Math.imul(pn,Qn)|0,Bt=Bt+Math.imul(vn,tr)|0,Kt=Kt+Math.imul(vn,Qn)|0,Ut=Ut+Math.imul(Jt,Jn)|0,Bt=Bt+Math.imul(Jt,rr)|0,Bt=Bt+Math.imul(rn,Jn)|0,Kt=Kt+Math.imul(rn,rr)|0,Ut=Ut+Math.imul(Pt,er)|0,Bt=Bt+Math.imul(Pt,ir)|0,Bt=Bt+Math.imul(Zt,er)|0,Kt=Kt+Math.imul(Zt,ir)|0;var yr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(yr>>>26)|0,yr&=67108863,Ut=Math.imul(Dn,Tn),Bt=Math.imul(Dn,In),Bt=Bt+Math.imul(on,Tn)|0,Kt=Math.imul(on,In),Ut=Ut+Math.imul(mn,Un)|0,Bt=Bt+Math.imul(mn,zn)|0,Bt=Bt+Math.imul(Mn,Un)|0,Kt=Kt+Math.imul(Mn,zn)|0,Ut=Ut+Math.imul(Cn,Gn)|0,Bt=Bt+Math.imul(Cn,Sn)|0,Bt=Bt+Math.imul($n,Gn)|0,Kt=Kt+Math.imul($n,Sn)|0,Ut=Ut+Math.imul(nn,Nn)|0,Bt=Bt+Math.imul(nn,Wn)|0,Bt=Bt+Math.imul(sn,Nn)|0,Kt=Kt+Math.imul(sn,Wn)|0,Ut=Ut+Math.imul(wn,Hn)|0,Bt=Bt+Math.imul(wn,Yn)|0,Bt=Bt+Math.imul(Ln,Hn)|0,Kt=Kt+Math.imul(Ln,Yn)|0,Ut=Ut+Math.imul(dn,tr)|0,Bt=Bt+Math.imul(dn,Qn)|0,Bt=Bt+Math.imul(cn,tr)|0,Kt=Kt+Math.imul(cn,Qn)|0,Ut=Ut+Math.imul(pn,Jn)|0,Bt=Bt+Math.imul(pn,rr)|0,Bt=Bt+Math.imul(vn,Jn)|0,Kt=Kt+Math.imul(vn,rr)|0,Ut=Ut+Math.imul(Jt,er)|0,Bt=Bt+Math.imul(Jt,ir)|0,Bt=Bt+Math.imul(rn,er)|0,Kt=Kt+Math.imul(rn,ir)|0,Ut=Ut+Math.imul(Pt,Rn)|0,Bt=Bt+Math.imul(Pt,Pn)|0,Bt=Bt+Math.imul(Zt,Rn)|0,Kt=Kt+Math.imul(Zt,Pn)|0;var _r=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(_r>>>26)|0,_r&=67108863,Ut=Math.imul(tn,Tn),Bt=Math.imul(tn,In),Bt=Bt+Math.imul(un,Tn)|0,Kt=Math.imul(un,In),Ut=Ut+Math.imul(Dn,Un)|0,Bt=Bt+Math.imul(Dn,zn)|0,Bt=Bt+Math.imul(on,Un)|0,Kt=Kt+Math.imul(on,zn)|0,Ut=Ut+Math.imul(mn,Gn)|0,Bt=Bt+Math.imul(mn,Sn)|0,Bt=Bt+Math.imul(Mn,Gn)|0,Kt=Kt+Math.imul(Mn,Sn)|0,Ut=Ut+Math.imul(Cn,Nn)|0,Bt=Bt+Math.imul(Cn,Wn)|0,Bt=Bt+Math.imul($n,Nn)|0,Kt=Kt+Math.imul($n,Wn)|0,Ut=Ut+Math.imul(nn,Hn)|0,Bt=Bt+Math.imul(nn,Yn)|0,Bt=Bt+Math.imul(sn,Hn)|0,Kt=Kt+Math.imul(sn,Yn)|0,Ut=Ut+Math.imul(wn,tr)|0,Bt=Bt+Math.imul(wn,Qn)|0,Bt=Bt+Math.imul(Ln,tr)|0,Kt=Kt+Math.imul(Ln,Qn)|0,Ut=Ut+Math.imul(dn,Jn)|0,Bt=Bt+Math.imul(dn,rr)|0,Bt=Bt+Math.imul(cn,Jn)|0,Kt=Kt+Math.imul(cn,rr)|0,Ut=Ut+Math.imul(pn,er)|0,Bt=Bt+Math.imul(pn,ir)|0,Bt=Bt+Math.imul(vn,er)|0,Kt=Kt+Math.imul(vn,ir)|0,Ut=Ut+Math.imul(Jt,Rn)|0,Bt=Bt+Math.imul(Jt,Pn)|0,Bt=Bt+Math.imul(rn,Rn)|0,Kt=Kt+Math.imul(rn,Pn)|0,Ut=Ut+Math.imul(Pt,Bn)|0,Bt=Bt+Math.imul(Pt,Vn)|0,Bt=Bt+Math.imul(Zt,Bn)|0,Kt=Kt+Math.imul(Zt,Vn)|0;var xr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(xr>>>26)|0,xr&=67108863,Ut=Math.imul(tn,Un),Bt=Math.imul(tn,zn),Bt=Bt+Math.imul(un,Un)|0,Kt=Math.imul(un,zn),Ut=Ut+Math.imul(Dn,Gn)|0,Bt=Bt+Math.imul(Dn,Sn)|0,Bt=Bt+Math.imul(on,Gn)|0,Kt=Kt+Math.imul(on,Sn)|0,Ut=Ut+Math.imul(mn,Nn)|0,Bt=Bt+Math.imul(mn,Wn)|0,Bt=Bt+Math.imul(Mn,Nn)|0,Kt=Kt+Math.imul(Mn,Wn)|0,Ut=Ut+Math.imul(Cn,Hn)|0,Bt=Bt+Math.imul(Cn,Yn)|0,Bt=Bt+Math.imul($n,Hn)|0,Kt=Kt+Math.imul($n,Yn)|0,Ut=Ut+Math.imul(nn,tr)|0,Bt=Bt+Math.imul(nn,Qn)|0,Bt=Bt+Math.imul(sn,tr)|0,Kt=Kt+Math.imul(sn,Qn)|0,Ut=Ut+Math.imul(wn,Jn)|0,Bt=Bt+Math.imul(wn,rr)|0,Bt=Bt+Math.imul(Ln,Jn)|0,Kt=Kt+Math.imul(Ln,rr)|0,Ut=Ut+Math.imul(dn,er)|0,Bt=Bt+Math.imul(dn,ir)|0,Bt=Bt+Math.imul(cn,er)|0,Kt=Kt+Math.imul(cn,ir)|0,Ut=Ut+Math.imul(pn,Rn)|0,Bt=Bt+Math.imul(pn,Pn)|0,Bt=Bt+Math.imul(vn,Rn)|0,Kt=Kt+Math.imul(vn,Pn)|0,Ut=Ut+Math.imul(Jt,Bn)|0,Bt=Bt+Math.imul(Jt,Vn)|0,Bt=Bt+Math.imul(rn,Bn)|0,Kt=Kt+Math.imul(rn,Vn)|0;var vr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(vr>>>26)|0,vr&=67108863,Ut=Math.imul(tn,Gn),Bt=Math.imul(tn,Sn),Bt=Bt+Math.imul(un,Gn)|0,Kt=Math.imul(un,Sn),Ut=Ut+Math.imul(Dn,Nn)|0,Bt=Bt+Math.imul(Dn,Wn)|0,Bt=Bt+Math.imul(on,Nn)|0,Kt=Kt+Math.imul(on,Wn)|0,Ut=Ut+Math.imul(mn,Hn)|0,Bt=Bt+Math.imul(mn,Yn)|0,Bt=Bt+Math.imul(Mn,Hn)|0,Kt=Kt+Math.imul(Mn,Yn)|0,Ut=Ut+Math.imul(Cn,tr)|0,Bt=Bt+Math.imul(Cn,Qn)|0,Bt=Bt+Math.imul($n,tr)|0,Kt=Kt+Math.imul($n,Qn)|0,Ut=Ut+Math.imul(nn,Jn)|0,Bt=Bt+Math.imul(nn,rr)|0,Bt=Bt+Math.imul(sn,Jn)|0,Kt=Kt+Math.imul(sn,rr)|0,Ut=Ut+Math.imul(wn,er)|0,Bt=Bt+Math.imul(wn,ir)|0,Bt=Bt+Math.imul(Ln,er)|0,Kt=Kt+Math.imul(Ln,ir)|0,Ut=Ut+Math.imul(dn,Rn)|0,Bt=Bt+Math.imul(dn,Pn)|0,Bt=Bt+Math.imul(cn,Rn)|0,Kt=Kt+Math.imul(cn,Pn)|0,Ut=Ut+Math.imul(pn,Bn)|0,Bt=Bt+Math.imul(pn,Vn)|0,Bt=Bt+Math.imul(vn,Bn)|0,Kt=Kt+Math.imul(vn,Vn)|0;var lr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(lr>>>26)|0,lr&=67108863,Ut=Math.imul(tn,Nn),Bt=Math.imul(tn,Wn),Bt=Bt+Math.imul(un,Nn)|0,Kt=Math.imul(un,Wn),Ut=Ut+Math.imul(Dn,Hn)|0,Bt=Bt+Math.imul(Dn,Yn)|0,Bt=Bt+Math.imul(on,Hn)|0,Kt=Kt+Math.imul(on,Yn)|0,Ut=Ut+Math.imul(mn,tr)|0,Bt=Bt+Math.imul(mn,Qn)|0,Bt=Bt+Math.imul(Mn,tr)|0,Kt=Kt+Math.imul(Mn,Qn)|0,Ut=Ut+Math.imul(Cn,Jn)|0,Bt=Bt+Math.imul(Cn,rr)|0,Bt=Bt+Math.imul($n,Jn)|0,Kt=Kt+Math.imul($n,rr)|0,Ut=Ut+Math.imul(nn,er)|0,Bt=Bt+Math.imul(nn,ir)|0,Bt=Bt+Math.imul(sn,er)|0,Kt=Kt+Math.imul(sn,ir)|0,Ut=Ut+Math.imul(wn,Rn)|0,Bt=Bt+Math.imul(wn,Pn)|0,Bt=Bt+Math.imul(Ln,Rn)|0,Kt=Kt+Math.imul(Ln,Pn)|0,Ut=Ut+Math.imul(dn,Bn)|0,Bt=Bt+Math.imul(dn,Vn)|0,Bt=Bt+Math.imul(cn,Bn)|0,Kt=Kt+Math.imul(cn,Vn)|0;var wr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(wr>>>26)|0,wr&=67108863,Ut=Math.imul(tn,Hn),Bt=Math.imul(tn,Yn),Bt=Bt+Math.imul(un,Hn)|0,Kt=Math.imul(un,Yn),Ut=Ut+Math.imul(Dn,tr)|0,Bt=Bt+Math.imul(Dn,Qn)|0,Bt=Bt+Math.imul(on,tr)|0,Kt=Kt+Math.imul(on,Qn)|0,Ut=Ut+Math.imul(mn,Jn)|0,Bt=Bt+Math.imul(mn,rr)|0,Bt=Bt+Math.imul(Mn,Jn)|0,Kt=Kt+Math.imul(Mn,rr)|0,Ut=Ut+Math.imul(Cn,er)|0,Bt=Bt+Math.imul(Cn,ir)|0,Bt=Bt+Math.imul($n,er)|0,Kt=Kt+Math.imul($n,ir)|0,Ut=Ut+Math.imul(nn,Rn)|0,Bt=Bt+Math.imul(nn,Pn)|0,Bt=Bt+Math.imul(sn,Rn)|0,Kt=Kt+Math.imul(sn,Pn)|0,Ut=Ut+Math.imul(wn,Bn)|0,Bt=Bt+Math.imul(wn,Vn)|0,Bt=Bt+Math.imul(Ln,Bn)|0,Kt=Kt+Math.imul(Ln,Vn)|0;var pr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(pr>>>26)|0,pr&=67108863,Ut=Math.imul(tn,tr),Bt=Math.imul(tn,Qn),Bt=Bt+Math.imul(un,tr)|0,Kt=Math.imul(un,Qn),Ut=Ut+Math.imul(Dn,Jn)|0,Bt=Bt+Math.imul(Dn,rr)|0,Bt=Bt+Math.imul(on,Jn)|0,Kt=Kt+Math.imul(on,rr)|0,Ut=Ut+Math.imul(mn,er)|0,Bt=Bt+Math.imul(mn,ir)|0,Bt=Bt+Math.imul(Mn,er)|0,Kt=Kt+Math.imul(Mn,ir)|0,Ut=Ut+Math.imul(Cn,Rn)|0,Bt=Bt+Math.imul(Cn,Pn)|0,Bt=Bt+Math.imul($n,Rn)|0,Kt=Kt+Math.imul($n,Pn)|0,Ut=Ut+Math.imul(nn,Bn)|0,Bt=Bt+Math.imul(nn,Vn)|0,Bt=Bt+Math.imul(sn,Bn)|0,Kt=Kt+Math.imul(sn,Vn)|0;var gr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(gr>>>26)|0,gr&=67108863,Ut=Math.imul(tn,Jn),Bt=Math.imul(tn,rr),Bt=Bt+Math.imul(un,Jn)|0,Kt=Math.imul(un,rr),Ut=Ut+Math.imul(Dn,er)|0,Bt=Bt+Math.imul(Dn,ir)|0,Bt=Bt+Math.imul(on,er)|0,Kt=Kt+Math.imul(on,ir)|0,Ut=Ut+Math.imul(mn,Rn)|0,Bt=Bt+Math.imul(mn,Pn)|0,Bt=Bt+Math.imul(Mn,Rn)|0,Kt=Kt+Math.imul(Mn,Pn)|0,Ut=Ut+Math.imul(Cn,Bn)|0,Bt=Bt+Math.imul(Cn,Vn)|0,Bt=Bt+Math.imul($n,Bn)|0,Kt=Kt+Math.imul($n,Vn)|0;var Ar=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,Ut=Math.imul(tn,er),Bt=Math.imul(tn,ir),Bt=Bt+Math.imul(un,er)|0,Kt=Math.imul(un,ir),Ut=Ut+Math.imul(Dn,Rn)|0,Bt=Bt+Math.imul(Dn,Pn)|0,Bt=Bt+Math.imul(on,Rn)|0,Kt=Kt+Math.imul(on,Pn)|0,Ut=Ut+Math.imul(mn,Bn)|0,Bt=Bt+Math.imul(mn,Vn)|0,Bt=Bt+Math.imul(Mn,Bn)|0,Kt=Kt+Math.imul(Mn,Vn)|0;var Tr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,Ut=Math.imul(tn,Rn),Bt=Math.imul(tn,Pn),Bt=Bt+Math.imul(un,Rn)|0,Kt=Math.imul(un,Pn),Ut=Ut+Math.imul(Dn,Bn)|0,Bt=Bt+Math.imul(Dn,Vn)|0,Bt=Bt+Math.imul(on,Bn)|0,Kt=Kt+Math.imul(on,Vn)|0;var Cr=(Qt+Ut|0)+((Bt&8191)<<13)|0;Qt=(Kt+(Bt>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,Ut=Math.imul(tn,Bn),Bt=Math.imul(tn,Vn),Bt=Bt+Math.imul(un,Bn)|0,Kt=Math.imul(un,Vn);var br=(Qt+Ut|0)+((Bt&8191)<<13)|0;return Qt=(Kt+(Bt>>>13)|0)+(br>>>26)|0,br&=67108863,Ht[0]=nr,Ht[1]=Zn,Ht[2]=qn,Ht[3]=cr,Ht[4]=ar,Ht[5]=sr,Ht[6]=ur,Ht[7]=yr,Ht[8]=_r,Ht[9]=xr,Ht[10]=vr,Ht[11]=lr,Ht[12]=wr,Ht[13]=pr,Ht[14]=gr,Ht[15]=Ar,Ht[16]=Tr,Ht[17]=Cr,Ht[18]=br,Qt!==0&&(Ht[19]=Qt,Nt.length++),Nt};Math.imul||(Et=xt);function Tt(jt,kt,zt){zt.negative=kt.negative^jt.negative,zt.length=jt.length+kt.length;for(var Nt=0,Mt=0,Lt=0;Lt<zt.length-1;Lt++){var Ht=Mt;Mt=0;for(var Qt=Nt&67108863,Ut=Math.min(Lt,kt.length-1),Bt=Math.max(0,Lt-jt.length+1);Bt<=Ut;Bt++){var Kt=Lt-Bt,Gt=jt.words[Kt]|0,Pt=kt.words[Bt]|0,Zt=Gt*Pt,an=Zt&67108863;Ht=Ht+(Zt/67108864|0)|0,an=an+Qt|0,Qt=an&67108863,Ht=Ht+(an>>>26)|0,Mt+=Ht>>>26,Ht&=67108863}zt.words[Lt]=Qt,Nt=Ht,Ht=Mt}return Nt!==0?zt.words[Lt]=Nt:zt.length--,zt.strip()}function wt(jt,kt,zt){var Nt=new Ct;return Nt.mulp(jt,kt,zt)}ot.prototype.mulTo=function(kt,zt){var Nt,Mt=this.length+kt.length;return this.length===10&&kt.length===10?Nt=Et(this,kt,zt):Mt<63?Nt=xt(this,kt,zt):Mt<1024?Nt=Tt(this,kt,zt):Nt=wt(this,kt,zt),Nt};function Ct(jt,kt){this.x=jt,this.y=kt}Ct.prototype.makeRBT=function(kt){for(var zt=new Array(kt),Nt=ot.prototype._countBits(kt)-1,Mt=0;Mt<kt;Mt++)zt[Mt]=this.revBin(Mt,Nt,kt);return zt},Ct.prototype.revBin=function(kt,zt,Nt){if(kt===0||kt===Nt-1)return kt;for(var Mt=0,Lt=0;Lt<zt;Lt++)Mt|=(kt&1)<<zt-Lt-1,kt>>=1;return Mt},Ct.prototype.permute=function(kt,zt,Nt,Mt,Lt,Ht){for(var Qt=0;Qt<Ht;Qt++)Mt[Qt]=zt[kt[Qt]],Lt[Qt]=Nt[kt[Qt]]},Ct.prototype.transform=function(kt,zt,Nt,Mt,Lt,Ht){this.permute(Ht,kt,zt,Nt,Mt,Lt);for(var Qt=1;Qt<Lt;Qt<<=1)for(var Ut=Qt<<1,Bt=Math.cos(2*Math.PI/Ut),Kt=Math.sin(2*Math.PI/Ut),Gt=0;Gt<Lt;Gt+=Ut)for(var Pt=Bt,Zt=Kt,an=0;an<Qt;an++){var Jt=Nt[Gt+an],rn=Mt[Gt+an],fn=Nt[Gt+an+Qt],pn=Mt[Gt+an+Qt],vn=Pt*fn-Zt*pn;pn=Pt*pn+Zt*fn,fn=vn,Nt[Gt+an]=Jt+fn,Mt[Gt+an]=rn+pn,Nt[Gt+an+Qt]=Jt-fn,Mt[Gt+an+Qt]=rn-pn,an!==Ut&&(vn=Bt*Pt-Kt*Zt,Zt=Bt*Zt+Kt*Pt,Pt=vn)}},Ct.prototype.guessLen13b=function(kt,zt){var Nt=Math.max(zt,kt)|1,Mt=Nt&1,Lt=0;for(Nt=Nt/2|0;Nt;Nt=Nt>>>1)Lt++;return 1<<Lt+1+Mt},Ct.prototype.conjugate=function(kt,zt,Nt){if(!(Nt<=1))for(var Mt=0;Mt<Nt/2;Mt++){var Lt=kt[Mt];kt[Mt]=kt[Nt-Mt-1],kt[Nt-Mt-1]=Lt,Lt=zt[Mt],zt[Mt]=-zt[Nt-Mt-1],zt[Nt-Mt-1]=-Lt}},Ct.prototype.normalize13b=function(kt,zt){for(var Nt=0,Mt=0;Mt<zt/2;Mt++){var Lt=Math.round(kt[2*Mt+1]/zt)*8192+Math.round(kt[2*Mt]/zt)+Nt;kt[Mt]=Lt&67108863,Lt<67108864?Nt=0:Nt=Lt/67108864|0}return kt},Ct.prototype.convert13b=function(kt,zt,Nt,Mt){for(var Lt=0,Ht=0;Ht<zt;Ht++)Lt=Lt+(kt[Ht]|0),Nt[2*Ht]=Lt&8191,Lt=Lt>>>13,Nt[2*Ht+1]=Lt&8191,Lt=Lt>>>13;for(Ht=2*zt;Ht<Mt;++Ht)Nt[Ht]=0;at(Lt===0),at((Lt&-8192)===0)},Ct.prototype.stub=function(kt){for(var zt=new Array(kt),Nt=0;Nt<kt;Nt++)zt[Nt]=0;return zt},Ct.prototype.mulp=function(kt,zt,Nt){var Mt=2*this.guessLen13b(kt.length,zt.length),Lt=this.makeRBT(Mt),Ht=this.stub(Mt),Qt=new Array(Mt),Ut=new Array(Mt),Bt=new Array(Mt),Kt=new Array(Mt),Gt=new Array(Mt),Pt=new Array(Mt),Zt=Nt.words;Zt.length=Mt,this.convert13b(kt.words,kt.length,Qt,Mt),this.convert13b(zt.words,zt.length,Kt,Mt),this.transform(Qt,Ht,Ut,Bt,Mt,Lt),this.transform(Kt,Ht,Gt,Pt,Mt,Lt);for(var an=0;an<Mt;an++){var Jt=Ut[an]*Gt[an]-Bt[an]*Pt[an];Bt[an]=Ut[an]*Pt[an]+Bt[an]*Gt[an],Ut[an]=Jt}return this.conjugate(Ut,Bt,Mt),this.transform(Ut,Bt,Zt,Ht,Mt,Lt),this.conjugate(Zt,Ht,Mt),this.normalize13b(Zt,Mt),Nt.negative=kt.negative^zt.negative,Nt.length=kt.length+zt.length,Nt.strip()},ot.prototype.mul=function(kt){var zt=new ot(null);return zt.words=new Array(this.length+kt.length),this.mulTo(kt,zt)},ot.prototype.mulf=function(kt){var zt=new ot(null);return zt.words=new Array(this.length+kt.length),wt(this,kt,zt)},ot.prototype.imul=function(kt){return this.clone().mulTo(kt,this)},ot.prototype.imuln=function(kt){at(typeof kt=="number"),at(kt<67108864);for(var zt=0,Nt=0;Nt<this.length;Nt++){var Mt=(this.words[Nt]|0)*kt,Lt=(Mt&67108863)+(zt&67108863);zt>>=26,zt+=Mt/67108864|0,zt+=Lt>>>26,this.words[Nt]=Lt&67108863}return zt!==0&&(this.words[Nt]=zt,this.length++),this},ot.prototype.muln=function(kt){return this.clone().imuln(kt)},ot.prototype.sqr=function(){return this.mul(this)},ot.prototype.isqr=function(){return this.imul(this.clone())},ot.prototype.pow=function(kt){var zt=At(kt);if(zt.length===0)return new ot(1);for(var Nt=this,Mt=0;Mt<zt.length&&zt[Mt]===0;Mt++,Nt=Nt.sqr());if(++Mt<zt.length)for(var Lt=Nt.sqr();Mt<zt.length;Mt++,Lt=Lt.sqr())zt[Mt]!==0&&(Nt=Nt.mul(Lt));return Nt},ot.prototype.iushln=function(kt){at(typeof kt=="number"&&kt>=0);var zt=kt%26,Nt=(kt-zt)/26,Mt=67108863>>>26-zt<<26-zt,Lt;if(zt!==0){var Ht=0;for(Lt=0;Lt<this.length;Lt++){var Qt=this.words[Lt]&Mt,Ut=(this.words[Lt]|0)-Qt<<zt;this.words[Lt]=Ut|Ht,Ht=Qt>>>26-zt}Ht&&(this.words[Lt]=Ht,this.length++)}if(Nt!==0){for(Lt=this.length-1;Lt>=0;Lt--)this.words[Lt+Nt]=this.words[Lt];for(Lt=0;Lt<Nt;Lt++)this.words[Lt]=0;this.length+=Nt}return this.strip()},ot.prototype.ishln=function(kt){return at(this.negative===0),this.iushln(kt)},ot.prototype.iushrn=function(kt,zt,Nt){at(typeof kt=="number"&&kt>=0);var Mt;zt?Mt=(zt-zt%26)/26:Mt=0;var Lt=kt%26,Ht=Math.min((kt-Lt)/26,this.length),Qt=67108863^67108863>>>Lt<<Lt,Ut=Nt;if(Mt-=Ht,Mt=Math.max(0,Mt),Ut){for(var Bt=0;Bt<Ht;Bt++)Ut.words[Bt]=this.words[Bt];Ut.length=Ht}if(Ht!==0)if(this.length>Ht)for(this.length-=Ht,Bt=0;Bt<this.length;Bt++)this.words[Bt]=this.words[Bt+Ht];else this.words[0]=0,this.length=1;var Kt=0;for(Bt=this.length-1;Bt>=0&&(Kt!==0||Bt>=Mt);Bt--){var Gt=this.words[Bt]|0;this.words[Bt]=Kt<<26-Lt|Gt>>>Lt,Kt=Gt&Qt}return Ut&&Kt!==0&&(Ut.words[Ut.length++]=Kt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ot.prototype.ishrn=function(kt,zt,Nt){return at(this.negative===0),this.iushrn(kt,zt,Nt)},ot.prototype.shln=function(kt){return this.clone().ishln(kt)},ot.prototype.ushln=function(kt){return this.clone().iushln(kt)},ot.prototype.shrn=function(kt){return this.clone().ishrn(kt)},ot.prototype.ushrn=function(kt){return this.clone().iushrn(kt)},ot.prototype.testn=function(kt){at(typeof kt=="number"&&kt>=0);var zt=kt%26,Nt=(kt-zt)/26,Mt=1<<zt;if(this.length<=Nt)return!1;var Lt=this.words[Nt];return!!(Lt&Mt)},ot.prototype.imaskn=function(kt){at(typeof kt=="number"&&kt>=0);var zt=kt%26,Nt=(kt-zt)/26;if(at(this.negative===0,"imaskn works only with positive numbers"),this.length<=Nt)return this;if(zt!==0&&Nt++,this.length=Math.min(Nt,this.length),zt!==0){var Mt=67108863^67108863>>>zt<<zt;this.words[this.length-1]&=Mt}return this.strip()},ot.prototype.maskn=function(kt){return this.clone().imaskn(kt)},ot.prototype.iaddn=function(kt){return at(typeof kt=="number"),at(kt<67108864),kt<0?this.isubn(-kt):this.negative!==0?this.length===1&&(this.words[0]|0)<kt?(this.words[0]=kt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(kt),this.negative=1,this):this._iaddn(kt)},ot.prototype._iaddn=function(kt){this.words[0]+=kt;for(var zt=0;zt<this.length&&this.words[zt]>=67108864;zt++)this.words[zt]-=67108864,zt===this.length-1?this.words[zt+1]=1:this.words[zt+1]++;return this.length=Math.max(this.length,zt+1),this},ot.prototype.isubn=function(kt){if(at(typeof kt=="number"),at(kt<67108864),kt<0)return this.iaddn(-kt);if(this.negative!==0)return this.negative=0,this.iaddn(kt),this.negative=1,this;if(this.words[0]-=kt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var zt=0;zt<this.length&&this.words[zt]<0;zt++)this.words[zt]+=67108864,this.words[zt+1]-=1;return this.strip()},ot.prototype.addn=function(kt){return this.clone().iaddn(kt)},ot.prototype.subn=function(kt){return this.clone().isubn(kt)},ot.prototype.iabs=function(){return this.negative=0,this},ot.prototype.abs=function(){return this.clone().iabs()},ot.prototype._ishlnsubmul=function(kt,zt,Nt){var Mt=kt.length+Nt,Lt;this._expand(Mt);var Ht,Qt=0;for(Lt=0;Lt<kt.length;Lt++){Ht=(this.words[Lt+Nt]|0)+Qt;var Ut=(kt.words[Lt]|0)*zt;Ht-=Ut&67108863,Qt=(Ht>>26)-(Ut/67108864|0),this.words[Lt+Nt]=Ht&67108863}for(;Lt<this.length-Nt;Lt++)Ht=(this.words[Lt+Nt]|0)+Qt,Qt=Ht>>26,this.words[Lt+Nt]=Ht&67108863;if(Qt===0)return this.strip();for(at(Qt===-1),Qt=0,Lt=0;Lt<this.length;Lt++)Ht=-(this.words[Lt]|0)+Qt,Qt=Ht>>26,this.words[Lt]=Ht&67108863;return this.negative=1,this.strip()},ot.prototype._wordDiv=function(kt,zt){var Nt=this.length-kt.length,Mt=this.clone(),Lt=kt,Ht=Lt.words[Lt.length-1]|0,Qt=this._countBits(Ht);Nt=26-Qt,Nt!==0&&(Lt=Lt.ushln(Nt),Mt.iushln(Nt),Ht=Lt.words[Lt.length-1]|0);var Ut=Mt.length-Lt.length,Bt;if(zt!=="mod"){Bt=new ot(null),Bt.length=Ut+1,Bt.words=new Array(Bt.length);for(var Kt=0;Kt<Bt.length;Kt++)Bt.words[Kt]=0}var Gt=Mt.clone()._ishlnsubmul(Lt,1,Ut);Gt.negative===0&&(Mt=Gt,Bt&&(Bt.words[Ut]=1));for(var Pt=Ut-1;Pt>=0;Pt--){var Zt=(Mt.words[Lt.length+Pt]|0)*67108864+(Mt.words[Lt.length+Pt-1]|0);for(Zt=Math.min(Zt/Ht|0,67108863),Mt._ishlnsubmul(Lt,Zt,Pt);Mt.negative!==0;)Zt--,Mt.negative=0,Mt._ishlnsubmul(Lt,1,Pt),Mt.isZero()||(Mt.negative^=1);Bt&&(Bt.words[Pt]=Zt)}return Bt&&Bt.strip(),Mt.strip(),zt!=="div"&&Nt!==0&&Mt.iushrn(Nt),{div:Bt||null,mod:Mt}},ot.prototype.divmod=function(kt,zt,Nt){if(at(!kt.isZero()),this.isZero())return{div:new ot(0),mod:new ot(0)};var Mt,Lt,Ht;return this.negative!==0&&kt.negative===0?(Ht=this.neg().divmod(kt,zt),zt!=="mod"&&(Mt=Ht.div.neg()),zt!=="div"&&(Lt=Ht.mod.neg(),Nt&&Lt.negative!==0&&Lt.iadd(kt)),{div:Mt,mod:Lt}):this.negative===0&&kt.negative!==0?(Ht=this.divmod(kt.neg(),zt),zt!=="mod"&&(Mt=Ht.div.neg()),{div:Mt,mod:Ht.mod}):(this.negative&kt.negative)!==0?(Ht=this.neg().divmod(kt.neg(),zt),zt!=="div"&&(Lt=Ht.mod.neg(),Nt&&Lt.negative!==0&&Lt.isub(kt)),{div:Ht.div,mod:Lt}):kt.length>this.length||this.cmp(kt)<0?{div:new ot(0),mod:this}:kt.length===1?zt==="div"?{div:this.divn(kt.words[0]),mod:null}:zt==="mod"?{div:null,mod:new ot(this.modn(kt.words[0]))}:{div:this.divn(kt.words[0]),mod:new ot(this.modn(kt.words[0]))}:this._wordDiv(kt,zt)},ot.prototype.div=function(kt){return this.divmod(kt,"div",!1).div},ot.prototype.mod=function(kt){return this.divmod(kt,"mod",!1).mod},ot.prototype.umod=function(kt){return this.divmod(kt,"mod",!0).mod},ot.prototype.divRound=function(kt){var zt=this.divmod(kt);if(zt.mod.isZero())return zt.div;var Nt=zt.div.negative!==0?zt.mod.isub(kt):zt.mod,Mt=kt.ushrn(1),Lt=kt.andln(1),Ht=Nt.cmp(Mt);return Ht<0||Lt===1&&Ht===0?zt.div:zt.div.negative!==0?zt.div.isubn(1):zt.div.iaddn(1)},ot.prototype.modn=function(kt){at(kt<=67108863);for(var zt=(1<<26)%kt,Nt=0,Mt=this.length-1;Mt>=0;Mt--)Nt=(zt*Nt+(this.words[Mt]|0))%kt;return Nt},ot.prototype.idivn=function(kt){at(kt<=67108863);for(var zt=0,Nt=this.length-1;Nt>=0;Nt--){var Mt=(this.words[Nt]|0)+zt*67108864;this.words[Nt]=Mt/kt|0,zt=Mt%kt}return this.strip()},ot.prototype.divn=function(kt){return this.clone().idivn(kt)},ot.prototype.egcd=function(kt){at(kt.negative===0),at(!kt.isZero());var zt=this,Nt=kt.clone();zt.negative!==0?zt=zt.umod(kt):zt=zt.clone();for(var Mt=new ot(1),Lt=new ot(0),Ht=new ot(0),Qt=new ot(1),Ut=0;zt.isEven()&&Nt.isEven();)zt.iushrn(1),Nt.iushrn(1),++Ut;for(var Bt=Nt.clone(),Kt=zt.clone();!zt.isZero();){for(var Gt=0,Pt=1;(zt.words[0]&Pt)===0&&Gt<26;++Gt,Pt<<=1);if(Gt>0)for(zt.iushrn(Gt);Gt-- >0;)(Mt.isOdd()||Lt.isOdd())&&(Mt.iadd(Bt),Lt.isub(Kt)),Mt.iushrn(1),Lt.iushrn(1);for(var Zt=0,an=1;(Nt.words[0]&an)===0&&Zt<26;++Zt,an<<=1);if(Zt>0)for(Nt.iushrn(Zt);Zt-- >0;)(Ht.isOdd()||Qt.isOdd())&&(Ht.iadd(Bt),Qt.isub(Kt)),Ht.iushrn(1),Qt.iushrn(1);zt.cmp(Nt)>=0?(zt.isub(Nt),Mt.isub(Ht),Lt.isub(Qt)):(Nt.isub(zt),Ht.isub(Mt),Qt.isub(Lt))}return{a:Ht,b:Qt,gcd:Nt.iushln(Ut)}},ot.prototype._invmp=function(kt){at(kt.negative===0),at(!kt.isZero());var zt=this,Nt=kt.clone();zt.negative!==0?zt=zt.umod(kt):zt=zt.clone();for(var Mt=new ot(1),Lt=new ot(0),Ht=Nt.clone();zt.cmpn(1)>0&&Nt.cmpn(1)>0;){for(var Qt=0,Ut=1;(zt.words[0]&Ut)===0&&Qt<26;++Qt,Ut<<=1);if(Qt>0)for(zt.iushrn(Qt);Qt-- >0;)Mt.isOdd()&&Mt.iadd(Ht),Mt.iushrn(1);for(var Bt=0,Kt=1;(Nt.words[0]&Kt)===0&&Bt<26;++Bt,Kt<<=1);if(Bt>0)for(Nt.iushrn(Bt);Bt-- >0;)Lt.isOdd()&&Lt.iadd(Ht),Lt.iushrn(1);zt.cmp(Nt)>=0?(zt.isub(Nt),Mt.isub(Lt)):(Nt.isub(zt),Lt.isub(Mt))}var Gt;return zt.cmpn(1)===0?Gt=Mt:Gt=Lt,Gt.cmpn(0)<0&&Gt.iadd(kt),Gt},ot.prototype.gcd=function(kt){if(this.isZero())return kt.abs();if(kt.isZero())return this.abs();var zt=this.clone(),Nt=kt.clone();zt.negative=0,Nt.negative=0;for(var Mt=0;zt.isEven()&&Nt.isEven();Mt++)zt.iushrn(1),Nt.iushrn(1);do{for(;zt.isEven();)zt.iushrn(1);for(;Nt.isEven();)Nt.iushrn(1);var Lt=zt.cmp(Nt);if(Lt<0){var Ht=zt;zt=Nt,Nt=Ht}else if(Lt===0||Nt.cmpn(1)===0)break;zt.isub(Nt)}while(!0);return Nt.iushln(Mt)},ot.prototype.invm=function(kt){return this.egcd(kt).a.umod(kt)},ot.prototype.isEven=function(){return(this.words[0]&1)===0},ot.prototype.isOdd=function(){return(this.words[0]&1)===1},ot.prototype.andln=function(kt){return this.words[0]&kt},ot.prototype.bincn=function(kt){at(typeof kt=="number");var zt=kt%26,Nt=(kt-zt)/26,Mt=1<<zt;if(this.length<=Nt)return this._expand(Nt+1),this.words[Nt]|=Mt,this;for(var Lt=Mt,Ht=Nt;Lt!==0&&Ht<this.length;Ht++){var Qt=this.words[Ht]|0;Qt+=Lt,Lt=Qt>>>26,Qt&=67108863,this.words[Ht]=Qt}return Lt!==0&&(this.words[Ht]=Lt,this.length++),this},ot.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ot.prototype.cmpn=function(kt){var zt=kt<0;if(this.negative!==0&&!zt)return-1;if(this.negative===0&&zt)return 1;this.strip();var Nt;if(this.length>1)Nt=1;else{zt&&(kt=-kt),at(kt<=67108863,"Number is too big");var Mt=this.words[0]|0;Nt=Mt===kt?0:Mt<kt?-1:1}return this.negative!==0?-Nt|0:Nt},ot.prototype.cmp=function(kt){if(this.negative!==0&&kt.negative===0)return-1;if(this.negative===0&&kt.negative!==0)return 1;var zt=this.ucmp(kt);return this.negative!==0?-zt|0:zt},ot.prototype.ucmp=function(kt){if(this.length>kt.length)return 1;if(this.length<kt.length)return-1;for(var zt=0,Nt=this.length-1;Nt>=0;Nt--){var Mt=this.words[Nt]|0,Lt=kt.words[Nt]|0;if(Mt!==Lt){Mt<Lt?zt=-1:Mt>Lt&&(zt=1);break}}return zt},ot.prototype.gtn=function(kt){return this.cmpn(kt)===1},ot.prototype.gt=function(kt){return this.cmp(kt)===1},ot.prototype.gten=function(kt){return this.cmpn(kt)>=0},ot.prototype.gte=function(kt){return this.cmp(kt)>=0},ot.prototype.ltn=function(kt){return this.cmpn(kt)===-1},ot.prototype.lt=function(kt){return this.cmp(kt)===-1},ot.prototype.lten=function(kt){return this.cmpn(kt)<=0},ot.prototype.lte=function(kt){return this.cmp(kt)<=0},ot.prototype.eqn=function(kt){return this.cmpn(kt)===0},ot.prototype.eq=function(kt){return this.cmp(kt)===0},ot.red=function(kt){return new Vt(kt)},ot.prototype.toRed=function(kt){return at(!this.red,"Already a number in reduction context"),at(this.negative===0,"red works only with positives"),kt.convertTo(this)._forceRed(kt)},ot.prototype.fromRed=function(){return at(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ot.prototype._forceRed=function(kt){return this.red=kt,this},ot.prototype.forceRed=function(kt){return at(!this.red,"Already a number in reduction context"),this._forceRed(kt)},ot.prototype.redAdd=function(kt){return at(this.red,"redAdd works only with red numbers"),this.red.add(this,kt)},ot.prototype.redIAdd=function(kt){return at(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,kt)},ot.prototype.redSub=function(kt){return at(this.red,"redSub works only with red numbers"),this.red.sub(this,kt)},ot.prototype.redISub=function(kt){return at(this.red,"redISub works only with red numbers"),this.red.isub(this,kt)},ot.prototype.redShl=function(kt){return at(this.red,"redShl works only with red numbers"),this.red.shl(this,kt)},ot.prototype.redMul=function(kt){return at(this.red,"redMul works only with red numbers"),this.red._verify2(this,kt),this.red.mul(this,kt)},ot.prototype.redIMul=function(kt){return at(this.red,"redMul works only with red numbers"),this.red._verify2(this,kt),this.red.imul(this,kt)},ot.prototype.redSqr=function(){return at(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ot.prototype.redISqr=function(){return at(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ot.prototype.redSqrt=function(){return at(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ot.prototype.redInvm=function(){return at(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ot.prototype.redNeg=function(){return at(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ot.prototype.redPow=function(kt){return at(this.red&&!kt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,kt)};var It={k256:null,p224:null,p192:null,p25519:null};function St(jt,kt){this.name=jt,this.p=new ot(kt,16),this.n=this.p.bitLength(),this.k=new ot(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}St.prototype._tmp=function(){var kt=new ot(null);return kt.words=new Array(Math.ceil(this.n/13)),kt},St.prototype.ireduce=function(kt){var zt=kt,Nt;do this.split(zt,this.tmp),zt=this.imulK(zt),zt=zt.iadd(this.tmp),Nt=zt.bitLength();while(Nt>this.n);var Mt=Nt<this.n?-1:zt.ucmp(this.p);return Mt===0?(zt.words[0]=0,zt.length=1):Mt>0?zt.isub(this.p):zt.strip(),zt},St.prototype.split=function(kt,zt){kt.iushrn(this.n,0,zt)},St.prototype.imulK=function(kt){return kt.imul(this.k)};function Rt(){St.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}st(Rt,St),Rt.prototype.split=function(kt,zt){for(var Nt=4194303,Mt=Math.min(kt.length,9),Lt=0;Lt<Mt;Lt++)zt.words[Lt]=kt.words[Lt];if(zt.length=Mt,kt.length<=9){kt.words[0]=0,kt.length=1;return}var Ht=kt.words[9];for(zt.words[zt.length++]=Ht&Nt,Lt=10;Lt<kt.length;Lt++){var Qt=kt.words[Lt]|0;kt.words[Lt-10]=(Qt&Nt)<<4|Ht>>>22,Ht=Qt}Ht>>>=22,kt.words[Lt-10]=Ht,Ht===0&&kt.length>10?kt.length-=10:kt.length-=9},Rt.prototype.imulK=function(kt){kt.words[kt.length]=0,kt.words[kt.length+1]=0,kt.length+=2;for(var zt=0,Nt=0;Nt<kt.length;Nt++){var Mt=kt.words[Nt]|0;zt+=Mt*977,kt.words[Nt]=zt&67108863,zt=Mt*64+(zt/67108864|0)}return kt.words[kt.length-1]===0&&(kt.length--,kt.words[kt.length-1]===0&&kt.length--),kt};function Dt(){St.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}st(Dt,St);function Wt(){St.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}st(Wt,St);function qt(){St.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}st(qt,St),qt.prototype.imulK=function(kt){for(var zt=0,Nt=0;Nt<kt.length;Nt++){var Mt=(kt.words[Nt]|0)*19+zt,Lt=Mt&67108863;Mt>>>=26,kt.words[Nt]=Lt,zt=Mt}return zt!==0&&(kt.words[kt.length++]=zt),kt},ot._prime=function(kt){if(It[kt])return It[kt];var zt;if(kt==="k256")zt=new Rt;else if(kt==="p224")zt=new Dt;else if(kt==="p192")zt=new Wt;else if(kt==="p25519")zt=new qt;else throw new Error("Unknown prime "+kt);return It[kt]=zt,zt};function Vt(jt){if(typeof jt=="string"){var kt=ot._prime(jt);this.m=kt.p,this.prime=kt}else at(jt.gtn(1),"modulus must be greater than 1"),this.m=jt,this.prime=null}Vt.prototype._verify1=function(kt){at(kt.negative===0,"red works only with positives"),at(kt.red,"red works only with red numbers")},Vt.prototype._verify2=function(kt,zt){at((kt.negative|zt.negative)===0,"red works only with positives"),at(kt.red&&kt.red===zt.red,"red works only with red numbers")},Vt.prototype.imod=function(kt){return this.prime?this.prime.ireduce(kt)._forceRed(this):kt.umod(this.m)._forceRed(this)},Vt.prototype.neg=function(kt){return kt.isZero()?kt.clone():this.m.sub(kt)._forceRed(this)},Vt.prototype.add=function(kt,zt){this._verify2(kt,zt);var Nt=kt.add(zt);return Nt.cmp(this.m)>=0&&Nt.isub(this.m),Nt._forceRed(this)},Vt.prototype.iadd=function(kt,zt){this._verify2(kt,zt);var Nt=kt.iadd(zt);return Nt.cmp(this.m)>=0&&Nt.isub(this.m),Nt},Vt.prototype.sub=function(kt,zt){this._verify2(kt,zt);var Nt=kt.sub(zt);return Nt.cmpn(0)<0&&Nt.iadd(this.m),Nt._forceRed(this)},Vt.prototype.isub=function(kt,zt){this._verify2(kt,zt);var Nt=kt.isub(zt);return Nt.cmpn(0)<0&&Nt.iadd(this.m),Nt},Vt.prototype.shl=function(kt,zt){return this._verify1(kt),this.imod(kt.ushln(zt))},Vt.prototype.imul=function(kt,zt){return this._verify2(kt,zt),this.imod(kt.imul(zt))},Vt.prototype.mul=function(kt,zt){return this._verify2(kt,zt),this.imod(kt.mul(zt))},Vt.prototype.isqr=function(kt){return this.imul(kt,kt.clone())},Vt.prototype.sqr=function(kt){return this.mul(kt,kt)},Vt.prototype.sqrt=function(kt){if(kt.isZero())return kt.clone();var zt=this.m.andln(3);if(at(zt%2===1),zt===3){var Nt=this.m.add(new ot(1)).iushrn(2);return this.pow(kt,Nt)}for(var Mt=this.m.subn(1),Lt=0;!Mt.isZero()&&Mt.andln(1)===0;)Lt++,Mt.iushrn(1);at(!Mt.isZero());var Ht=new ot(1).toRed(this),Qt=Ht.redNeg(),Ut=this.m.subn(1).iushrn(1),Bt=this.m.bitLength();for(Bt=new ot(2*Bt*Bt).toRed(this);this.pow(Bt,Ut).cmp(Qt)!==0;)Bt.redIAdd(Qt);for(var Kt=this.pow(Bt,Mt),Gt=this.pow(kt,Mt.addn(1).iushrn(1)),Pt=this.pow(kt,Mt),Zt=Lt;Pt.cmp(Ht)!==0;){for(var an=Pt,Jt=0;an.cmp(Ht)!==0;Jt++)an=an.redSqr();at(Jt<Zt);var rn=this.pow(Kt,new ot(1).iushln(Zt-Jt-1));Gt=Gt.redMul(rn),Kt=rn.redSqr(),Pt=Pt.redMul(Kt),Zt=Jt}return Gt},Vt.prototype.invm=function(kt){var zt=kt._invmp(this.m);return zt.negative!==0?(zt.negative=0,this.imod(zt).redNeg()):this.imod(zt)},Vt.prototype.pow=function(kt,zt){if(zt.isZero())return new ot(1).toRed(this);if(zt.cmpn(1)===0)return kt.clone();var Nt=4,Mt=new Array(1<<Nt);Mt[0]=new ot(1).toRed(this),Mt[1]=kt;for(var Lt=2;Lt<Mt.length;Lt++)Mt[Lt]=this.mul(Mt[Lt-1],kt);var Ht=Mt[0],Qt=0,Ut=0,Bt=zt.bitLength()%26;for(Bt===0&&(Bt=26),Lt=zt.length-1;Lt>=0;Lt--){for(var Kt=zt.words[Lt],Gt=Bt-1;Gt>=0;Gt--){var Pt=Kt>>Gt&1;if(Ht!==Mt[0]&&(Ht=this.sqr(Ht)),Pt===0&&Qt===0){Ut=0;continue}Qt<<=1,Qt|=Pt,Ut++,!(Ut!==Nt&&(Lt!==0||Gt!==0))&&(Ht=this.mul(Ht,Mt[Qt]),Ut=0,Qt=0)}Bt=26}return Ht},Vt.prototype.convertTo=function(kt){var zt=kt.umod(this.m);return zt===kt?zt.clone():zt},Vt.prototype.convertFrom=function(kt){var zt=kt.clone();return zt.red=null,zt},ot.mont=function(kt){return new Yt(kt)};function Yt(jt){Vt.call(this,jt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ot(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}st(Yt,Vt),Yt.prototype.convertTo=function(kt){return this.imod(kt.ushln(this.shift))},Yt.prototype.convertFrom=function(kt){var zt=this.imod(kt.mul(this.rinv));return zt.red=null,zt},Yt.prototype.imul=function(kt,zt){if(kt.isZero()||zt.isZero())return kt.words[0]=0,kt.length=1,kt;var Nt=kt.imul(zt),Mt=Nt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Lt=Nt.isub(Mt).iushrn(this.shift),Ht=Lt;return Lt.cmp(this.m)>=0?Ht=Lt.isub(this.m):Lt.cmpn(0)<0&&(Ht=Lt.iadd(this.m)),Ht._forceRed(this)},Yt.prototype.mul=function(kt,zt){if(kt.isZero()||zt.isZero())return new ot(0)._forceRed(this);var Nt=kt.mul(zt),Mt=Nt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Lt=Nt.isub(Mt).iushrn(this.shift),Ht=Lt;return Lt.cmp(this.m)>=0?Ht=Lt.isub(this.m):Lt.cmpn(0)<0&&(Ht=Lt.iadd(this.m)),Ht._forceRed(this)},Yt.prototype.invm=function(kt){var zt=this.imod(kt._invmp(this.m).mul(this.r2));return zt._forceRed(this)}})(it,commonjsGlobal)})(bn);const BN=bn.exports;var isTypedarray=isTypedArray$2;isTypedArray$2.strict=isStrictTypedArray,isTypedArray$2.loose=isLooseTypedArray;var toString$1=Object.prototype.toString,names={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function isTypedArray$2(it){return isStrictTypedArray(it)||isLooseTypedArray(it)}function isStrictTypedArray(it){return it instanceof Int8Array||it instanceof Int16Array||it instanceof Int32Array||it instanceof Uint8Array||it instanceof Uint8ClampedArray||it instanceof Uint16Array||it instanceof Uint32Array||it instanceof Float32Array||it instanceof Float64Array}function isLooseTypedArray(it){return names[toString$1.call(it)]}var isTypedArray$1=isTypedarray.strict,typedarrayToBuffer=function it(tt){if(isTypedArray$1(tt)){var rt=Buffer.from(tt.buffer);return tt.byteLength!==tt.buffer.byteLength&&(rt=rt.slice(tt.byteOffset,tt.byteOffset+tt.byteLength)),rt}else return Buffer.from(tt)};const ENC_HEX="hex",ENC_UTF8="utf8",STRING_ZERO="0";function bufferToArray(it){return new Uint8Array(it)}function bufferToHex(it,tt=!1){const rt=it.toString(ENC_HEX);return tt?addHexPrefix(rt):rt}function bufferToUtf8(it){return it.toString(ENC_UTF8)}function arrayToBuffer(it){return typedarrayToBuffer(it)}function arrayToHex(it,tt=!1){return bufferToHex(arrayToBuffer(it),tt)}function arrayToUtf8(it){return bufferToUtf8(arrayToBuffer(it))}function hexToBuffer(it){return Buffer.from(removeHexPrefix(it),ENC_HEX)}function hexToArray(it){return bufferToArray(hexToBuffer(it))}function utf8ToBuffer(it){return Buffer.from(it,ENC_UTF8)}function utf8ToArray(it){return bufferToArray(utf8ToBuffer(it))}function utf8ToHex(it,tt=!1){return bufferToHex(utf8ToBuffer(it),tt)}function isHexString$1(it,tt){return!(typeof it!="string"||!it.match(/^0x[0-9A-Fa-f]*$/)||tt&&it.length!==2+2*tt)}function concatArrays(...it){let tt=[];return it.forEach(rt=>tt=tt.concat(Array.from(rt))),new Uint8Array([...tt])}function calcByteLength(it,tt=8){const rt=it%tt;return rt?(it-rt)/tt*tt+tt:it}function sanitizeBytes(it,tt=8,rt=STRING_ZERO){return padLeft(it,calcByteLength(it.length,tt),rt)}function padLeft(it,tt,rt=STRING_ZERO){return padString(it,tt,!0,rt)}function removeHexPrefix(it){return it.replace(/^0x/,"")}function addHexPrefix(it){return it.startsWith("0x")?it:`0x${it}`}function sanitizeHex$1(it){return it=removeHexPrefix(it),it=sanitizeBytes(it,2),it&&(it=addHexPrefix(it)),it}function removeHexLeadingZeros$1(it){const tt=it.startsWith("0x");return it=removeHexPrefix(it),it=it.startsWith(STRING_ZERO)?it.substring(1):it,tt?addHexPrefix(it):it}function padString(it,tt,rt,at=STRING_ZERO){const st=tt-it.length;let ot=it;if(st>0){const lt=at.repeat(st);ot=rt?lt+it:it+lt}return ot}function convertArrayBufferToBuffer(it){return arrayToBuffer(new Uint8Array(it))}function convertArrayBufferToHex(it,tt){return arrayToHex(new Uint8Array(it),!tt)}function convertBufferToArrayBuffer(it){return bufferToArray(it).buffer}function convertUtf8ToBuffer(it){return utf8ToBuffer(it)}function convertUtf8ToHex(it,tt){return utf8ToHex(it,!tt)}function convertHexToArrayBuffer(it){return hexToArray(it).buffer}function convertNumberToHex(it,tt){const rt=removeHexPrefix(sanitizeHex$1(new BN(it).toString(16)));return tt?rt:addHexPrefix(rt)}function sanitizeHex(it){return sanitizeHex$1(it)}function removeHexLeadingZeros(it){return removeHexLeadingZeros$1(addHexPrefix(it))}const payloadId=payloadId$1;function uuid$1(){return((tt,rt)=>{for(rt=tt="";tt++<36;rt+=tt*51&52?(tt^15?8^Math.random()*(tt^20?16:4):4).toString(16):"-");return rt})()}function getInfuraRpcUrl(it,tt){let rt;const at=infuraNetworks[it];return at&&(rt=`https://${at}.infura.io/v3/${tt}`),rt}function getRpcUrl(it,tt){let rt;const at=getInfuraRpcUrl(it,tt.infuraId);return tt.custom&&tt.custom[it]?rt=tt.custom[it]:at&&(rt=at),rt}function isEmptyString(it){return it===""||typeof it=="string"&&it.trim()===""}function isEmptyArray(it){return!(it&&it.length)}function isHexString(it,tt){return isHexString$1(it,tt)}function isJsonRpcRequest(it){return typeof it.method<"u"}function isJsonRpcResponseSuccess(it){return typeof it.result<"u"}function isJsonRpcResponseError(it){return typeof it.error<"u"}function isInternalEvent(it){return typeof it.event<"u"}function isReservedEvent(it){return reservedEvents.includes(it)||it.startsWith("wc_")}function isSilentPayload(it){return it.method.startsWith("wc_")?!0:!signingMethods.includes(it.method)}function toChecksumAddress(it){it=removeHexPrefix(it.toLowerCase());const tt=removeHexPrefix(sha3$3.exports.keccak_256(convertUtf8ToBuffer(it)));let rt="";for(let at=0;at<it.length;at++)parseInt(tt[at],16)>7?rt+=it[at].toUpperCase():rt+=it[at];return addHexPrefix(rt)}const isValidAddress=it=>it?it.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(it)?/^(0x)?[0-9a-f]{40}$/.test(it)||/^(0x)?[0-9A-F]{40}$/.test(it)?!0:it===toChecksumAddress(it):!1:!1;function parsePersonalSign(it){return!isEmptyArray(it)&&!isHexString(it[0])&&(it[0]=convertUtf8ToHex(it[0])),it}function parseTransactionData(it){if(typeof it.type<"u"&&it.type!=="0")return it;if(typeof it.from>"u"||!isValidAddress(it.from))throw new Error("Transaction object must include a valid 'from' value.");function tt(st){let ot=st;return(typeof st=="number"||typeof st=="string"&&!isEmptyString(st))&&(isHexString(st)?typeof st=="string"&&(ot=sanitizeHex(st)):ot=convertNumberToHex(st)),typeof ot=="string"&&(ot=removeHexLeadingZeros(ot)),ot}const rt={from:sanitizeHex(it.from),to:typeof it.to>"u"?void 0:sanitizeHex(it.to),gasPrice:typeof it.gasPrice>"u"?"":tt(it.gasPrice),gas:typeof it.gas>"u"?typeof it.gasLimit>"u"?"":tt(it.gasLimit):tt(it.gas),value:typeof it.value>"u"?"":tt(it.value),nonce:typeof it.nonce>"u"?"":tt(it.nonce),data:typeof it.data>"u"?"":sanitizeHex(it.data)||"0x"},at=["gasPrice","gas","value","nonce"];return Object.keys(rt).forEach(st=>{(typeof rt[st]>"u"||typeof rt[st]=="string"&&!rt[st].trim().length)&&at.includes(st)&&delete rt[st]}),rt}function formatRpcError(it){const tt=it.message||"Failed or Rejected Request";let rt=-32e3;if(it&&!it.code)switch(tt){case"Parse error":rt=-32700;break;case"Invalid request":rt=-32600;break;case"Method not found":rt=-32601;break;case"Invalid params":rt=-32602;break;case"Internal error":rt=-32603;break;default:rt=-32e3;break}const at={code:rt,message:tt};return it.data&&(at.data=it.data),at}var queryString={},strictUriEncode=it=>encodeURIComponent(it).replace(/[!'()*]/g,tt=>`%${tt.charCodeAt(0).toString(16).toUpperCase()}`),token$1="%[a-f0-9]{2}",singleMatcher=new RegExp("("+token$1+")|([^%]+?)","gi"),multiMatcher=new RegExp("("+token$1+")+","gi");function decodeComponents(it,tt){try{return[decodeURIComponent(it.join(""))]}catch{}if(it.length===1)return it;tt=tt||1;var rt=it.slice(0,tt),at=it.slice(tt);return Array.prototype.concat.call([],decodeComponents(rt),decodeComponents(at))}function decode(it){try{return decodeURIComponent(it)}catch{for(var tt=it.match(singleMatcher)||[],rt=1;rt<tt.length;rt++)it=decodeComponents(tt,rt).join(""),tt=it.match(singleMatcher)||[];return it}}function customDecodeURIComponent(it){for(var tt={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},rt=multiMatcher.exec(it);rt;){try{tt[rt[0]]=decodeURIComponent(rt[0])}catch{var at=decode(rt[0]);at!==rt[0]&&(tt[rt[0]]=at)}rt=multiMatcher.exec(it)}tt["%C2"]="\uFFFD";for(var st=Object.keys(tt),ot=0;ot<st.length;ot++){var lt=st[ot];it=it.replace(new RegExp(lt,"g"),tt[lt])}return it}var decodeUriComponent=function(it){if(typeof it!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof it+"`");try{return it=it.replace(/\+/g," "),decodeURIComponent(it)}catch{return customDecodeURIComponent(it)}},splitOnFirst=(it,tt)=>{if(!(typeof it=="string"&&typeof tt=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(tt==="")return[it];const rt=it.indexOf(tt);return rt===-1?[it]:[it.slice(0,rt),it.slice(rt+tt.length)]};(function(it){const tt=strictUriEncode,rt=decodeUriComponent,at=splitOnFirst,st=wt=>wt==null;function ot(wt){switch(wt.arrayFormat){case"index":return Ct=>(It,St)=>{const Rt=It.length;return St===void 0||wt.skipNull&&St===null||wt.skipEmptyString&&St===""?It:St===null?[...It,[ht(Ct,wt),"[",Rt,"]"].join("")]:[...It,[ht(Ct,wt),"[",ht(Rt,wt),"]=",ht(St,wt)].join("")]};case"bracket":return Ct=>(It,St)=>St===void 0||wt.skipNull&&St===null||wt.skipEmptyString&&St===""?It:St===null?[...It,[ht(Ct,wt),"[]"].join("")]:[...It,[ht(Ct,wt),"[]=",ht(St,wt)].join("")];case"comma":case"separator":return Ct=>(It,St)=>St==null||St.length===0?It:It.length===0?[[ht(Ct,wt),"=",ht(St,wt)].join("")]:[[It,ht(St,wt)].join(wt.arrayFormatSeparator)];default:return Ct=>(It,St)=>St===void 0||wt.skipNull&&St===null||wt.skipEmptyString&&St===""?It:St===null?[...It,ht(Ct,wt)]:[...It,[ht(Ct,wt),"=",ht(St,wt)].join("")]}}function lt(wt){let Ct;switch(wt.arrayFormat){case"index":return(It,St,Rt)=>{if(Ct=/\[(\d*)\]$/.exec(It),It=It.replace(/\[\d*\]$/,""),!Ct){Rt[It]=St;return}Rt[It]===void 0&&(Rt[It]={}),Rt[It][Ct[1]]=St};case"bracket":return(It,St,Rt)=>{if(Ct=/(\[\])$/.exec(It),It=It.replace(/\[\]$/,""),!Ct){Rt[It]=St;return}if(Rt[It]===void 0){Rt[It]=[St];return}Rt[It]=[].concat(Rt[It],St)};case"comma":case"separator":return(It,St,Rt)=>{const Wt=typeof St=="string"&&St.split("").indexOf(wt.arrayFormatSeparator)>-1?St.split(wt.arrayFormatSeparator).map(qt=>mt(qt,wt)):St===null?St:mt(St,wt);Rt[It]=Wt};default:return(It,St,Rt)=>{if(Rt[It]===void 0){Rt[It]=St;return}Rt[It]=[].concat(Rt[It],St)}}}function ut(wt){if(typeof wt!="string"||wt.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function ht(wt,Ct){return Ct.encode?Ct.strict?tt(wt):encodeURIComponent(wt):wt}function mt(wt,Ct){return Ct.decode?rt(wt):wt}function bt(wt){return Array.isArray(wt)?wt.sort():typeof wt=="object"?bt(Object.keys(wt)).sort((Ct,It)=>Number(Ct)-Number(It)).map(Ct=>wt[Ct]):wt}function vt(wt){const Ct=wt.indexOf("#");return Ct!==-1&&(wt=wt.slice(0,Ct)),wt}function At(wt){let Ct="";const It=wt.indexOf("#");return It!==-1&&(Ct=wt.slice(It)),Ct}function xt(wt){wt=vt(wt);const Ct=wt.indexOf("?");return Ct===-1?"":wt.slice(Ct+1)}function Et(wt,Ct){return Ct.parseNumbers&&!Number.isNaN(Number(wt))&&typeof wt=="string"&&wt.trim()!==""?wt=Number(wt):Ct.parseBooleans&&wt!==null&&(wt.toLowerCase()==="true"||wt.toLowerCase()==="false")&&(wt=wt.toLowerCase()==="true"),wt}function Tt(wt,Ct){Ct=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},Ct),ut(Ct.arrayFormatSeparator);const It=lt(Ct),St=Object.create(null);if(typeof wt!="string"||(wt=wt.trim().replace(/^[?#&]/,""),!wt))return St;for(const Rt of wt.split("&")){let[Dt,Wt]=at(Ct.decode?Rt.replace(/\+/g," "):Rt,"=");Wt=Wt===void 0?null:["comma","separator"].includes(Ct.arrayFormat)?Wt:mt(Wt,Ct),It(mt(Dt,Ct),Wt,St)}for(const Rt of Object.keys(St)){const Dt=St[Rt];if(typeof Dt=="object"&&Dt!==null)for(const Wt of Object.keys(Dt))Dt[Wt]=Et(Dt[Wt],Ct);else St[Rt]=Et(Dt,Ct)}return Ct.sort===!1?St:(Ct.sort===!0?Object.keys(St).sort():Object.keys(St).sort(Ct.sort)).reduce((Rt,Dt)=>{const Wt=St[Dt];return Boolean(Wt)&&typeof Wt=="object"&&!Array.isArray(Wt)?Rt[Dt]=bt(Wt):Rt[Dt]=Wt,Rt},Object.create(null))}it.extract=xt,it.parse=Tt,it.stringify=(wt,Ct)=>{if(!wt)return"";Ct=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},Ct),ut(Ct.arrayFormatSeparator);const It=Wt=>Ct.skipNull&&st(wt[Wt])||Ct.skipEmptyString&&wt[Wt]==="",St=ot(Ct),Rt={};for(const Wt of Object.keys(wt))It(Wt)||(Rt[Wt]=wt[Wt]);const Dt=Object.keys(Rt);return Ct.sort!==!1&&Dt.sort(Ct.sort),Dt.map(Wt=>{const qt=wt[Wt];return qt===void 0?"":qt===null?ht(Wt,Ct):Array.isArray(qt)?qt.reduce(St(Wt),[]).join("&"):ht(Wt,Ct)+"="+ht(qt,Ct)}).filter(Wt=>Wt.length>0).join("&")},it.parseUrl=(wt,Ct)=>{Ct=Object.assign({decode:!0},Ct);const[It,St]=at(wt,"#");return Object.assign({url:It.split("?")[0]||"",query:Tt(xt(wt),Ct)},Ct&&Ct.parseFragmentIdentifier&&St?{fragmentIdentifier:mt(St,Ct)}:{})},it.stringifyUrl=(wt,Ct)=>{Ct=Object.assign({encode:!0,strict:!0},Ct);const It=vt(wt.url).split("?")[0]||"",St=it.extract(wt.url),Rt=it.parse(St,{sort:!1}),Dt=Object.assign(Rt,wt.query);let Wt=it.stringify(Dt,Ct);Wt&&(Wt=`?${Wt}`);let qt=At(wt.url);return wt.fragmentIdentifier&&(qt=`#${ht(wt.fragmentIdentifier,Ct)}`),`${It}${Wt}${qt}`}})(queryString);function getQueryString(it){const tt=it.indexOf("?")!==-1?it.indexOf("?"):void 0;return typeof tt<"u"?it.substr(tt):""}function appendToQueryString(it,tt){let rt=parseQueryString(it);return rt=Object.assign(Object.assign({},rt),tt),it=formatQueryString(rt),it}function parseQueryString(it){return queryString.parse(it)}function formatQueryString(it){return queryString.stringify(it)}function isWalletConnectSession(it){return typeof it.bridge<"u"}function parseWalletConnectUri(it){const tt=it.indexOf(":"),rt=it.indexOf("?")!==-1?it.indexOf("?"):void 0,at=it.substring(0,tt),st=it.substring(tt+1,rt);function ot(vt){const At="@",xt=vt.split(At);return{handshakeTopic:xt[0],version:parseInt(xt[1],10)}}const lt=ot(st),ut=typeof rt<"u"?it.substr(rt):"";function ht(vt){const At=parseQueryString(vt);return{key:At.key||"",bridge:At.bridge||""}}const mt=ht(ut);return Object.assign(Object.assign({protocol:at},lt),mt)}var eventemitter3={exports:{}};(function(it){var tt=Object.prototype.hasOwnProperty,rt="~";function at(){}Object.create&&(at.prototype=Object.create(null),new at().__proto__||(rt=!1));function st(ht,mt,bt){this.fn=ht,this.context=mt,this.once=bt||!1}function ot(ht,mt,bt,vt,At){if(typeof bt!="function")throw new TypeError("The listener must be a function");var xt=new st(bt,vt||ht,At),Et=rt?rt+mt:mt;return ht._events[Et]?ht._events[Et].fn?ht._events[Et]=[ht._events[Et],xt]:ht._events[Et].push(xt):(ht._events[Et]=xt,ht._eventsCount++),ht}function lt(ht,mt){--ht._eventsCount===0?ht._events=new at:delete ht._events[mt]}function ut(){this._events=new at,this._eventsCount=0}ut.prototype.eventNames=function(){var mt=[],bt,vt;if(this._eventsCount===0)return mt;for(vt in bt=this._events)tt.call(bt,vt)&&mt.push(rt?vt.slice(1):vt);return Object.getOwnPropertySymbols?mt.concat(Object.getOwnPropertySymbols(bt)):mt},ut.prototype.listeners=function(mt){var bt=rt?rt+mt:mt,vt=this._events[bt];if(!vt)return[];if(vt.fn)return[vt.fn];for(var At=0,xt=vt.length,Et=new Array(xt);At<xt;At++)Et[At]=vt[At].fn;return Et},ut.prototype.listenerCount=function(mt){var bt=rt?rt+mt:mt,vt=this._events[bt];return vt?vt.fn?1:vt.length:0},ut.prototype.emit=function(mt,bt,vt,At,xt,Et){var Tt=rt?rt+mt:mt;if(!this._events[Tt])return!1;var wt=this._events[Tt],Ct=arguments.length,It,St;if(wt.fn){switch(wt.once&&this.removeListener(mt,wt.fn,void 0,!0),Ct){case 1:return wt.fn.call(wt.context),!0;case 2:return wt.fn.call(wt.context,bt),!0;case 3:return wt.fn.call(wt.context,bt,vt),!0;case 4:return wt.fn.call(wt.context,bt,vt,At),!0;case 5:return wt.fn.call(wt.context,bt,vt,At,xt),!0;case 6:return wt.fn.call(wt.context,bt,vt,At,xt,Et),!0}for(St=1,It=new Array(Ct-1);St<Ct;St++)It[St-1]=arguments[St];wt.fn.apply(wt.context,It)}else{var Rt=wt.length,Dt;for(St=0;St<Rt;St++)switch(wt[St].once&&this.removeListener(mt,wt[St].fn,void 0,!0),Ct){case 1:wt[St].fn.call(wt[St].context);break;case 2:wt[St].fn.call(wt[St].context,bt);break;case 3:wt[St].fn.call(wt[St].context,bt,vt);break;case 4:wt[St].fn.call(wt[St].context,bt,vt,At);break;default:if(!It)for(Dt=1,It=new Array(Ct-1);Dt<Ct;Dt++)It[Dt-1]=arguments[Dt];wt[St].fn.apply(wt[St].context,It)}}return!0},ut.prototype.on=function(mt,bt,vt){return ot(this,mt,bt,vt,!1)},ut.prototype.once=function(mt,bt,vt){return ot(this,mt,bt,vt,!0)},ut.prototype.removeListener=function(mt,bt,vt,At){var xt=rt?rt+mt:mt;if(!this._events[xt])return this;if(!bt)return lt(this,xt),this;var Et=this._events[xt];if(Et.fn)Et.fn===bt&&(!At||Et.once)&&(!vt||Et.context===vt)&&lt(this,xt);else{for(var Tt=0,wt=[],Ct=Et.length;Tt<Ct;Tt++)(Et[Tt].fn!==bt||At&&!Et[Tt].once||vt&&Et[Tt].context!==vt)&&wt.push(Et[Tt]);wt.length?this._events[xt]=wt.length===1?wt[0]:wt:lt(this,xt)}return this},ut.prototype.removeAllListeners=function(mt){var bt;return mt?(bt=rt?rt+mt:mt,this._events[bt]&&lt(this,bt)):(this._events=new at,this._eventsCount=0),this},ut.prototype.off=ut.prototype.removeListener,ut.prototype.addListener=ut.prototype.on,ut.prefixed=rt,ut.EventEmitter=ut,it.exports=ut})(eventemitter3);const EventEmitter=eventemitter3.exports;class NetworkMonitor{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(tt,rt){this._eventEmitters.push({event:tt,callback:rt})}trigger(tt){let rt=[];tt&&(rt=this._eventEmitters.filter(at=>at.event===tt)),rt.forEach(at=>{at.callback()})}}const WS=typeof globalThis.WebSocket<"u"?globalThis.WebSocket:require("ws");class SocketTransport{constructor(tt){if(this.opts=tt,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=tt.protocol,this._version=tt.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=tt.subscriptions||[],this._netMonitor=tt.netMonitor||new NetworkMonitor,!tt.url||typeof tt.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=tt.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(tt){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(tt){}get connecting(){return this.readyState===0}set connected(tt){}get connected(){return this.readyState===1}set closing(tt){}get closing(){return this.readyState===2}set closed(tt){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(tt,rt,at){if(!rt||typeof rt!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:rt,type:"pub",payload:tt,silent:!!at})}subscribe(tt){this._socketSend({topic:tt,type:"sub",payload:"",silent:!0})}on(tt,rt){this._events.push({event:tt,callback:rt})}_socketCreate(){if(this._nextSocket)return;const tt=getWebSocketUrl(this._url,this._protocol,this._version);if(this._nextSocket=new WS(tt),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=rt=>this._socketReceive(rt),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=rt=>this._socketError(rt),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(tt){const rt=JSON.stringify(tt);this._socket&&this._socket.readyState===1?this._socket.send(rt):(this._setToQueue(tt),this._socketCreate())}async _socketReceive(tt){let rt;try{rt=JSON.parse(tt.data)}catch{return}if(this._socketSend({topic:rt.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const at=this._events.filter(st=>st.event==="message");at&&at.length&&at.forEach(st=>st.callback(rt))}}_socketError(tt){const rt=this._events.filter(at=>at.event==="error");rt&&rt.length&&rt.forEach(at=>at.callback(tt))}_queueSubscriptions(){this._subscriptions.forEach(rt=>this._queue.push({topic:rt,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(tt){this._queue.push(tt)}_pushQueue(){this._queue.forEach(rt=>this._socketSend(rt)),this._queue=[]}}function getWebSocketUrl(it,tt,rt){var at,st;const lt=(it.startsWith("https")?it.replace("https","wss"):it.startsWith("http")?it.replace("http","ws"):it).split("?"),ut=isBrowser$1()?{protocol:tt,version:rt,env:"browser",host:((at=getLocation())===null||at===void 0?void 0:at.host)||""}:{protocol:tt,version:rt,env:((st=detectEnv$1())===null||st===void 0?void 0:st.name)||""},ht=appendToQueryString(getQueryString(lt[1]||""),ut);return lt[0]+"?"+ht}const ERROR_SESSION_CONNECTED="Session currently connected",ERROR_SESSION_DISCONNECTED="Session currently disconnected",ERROR_SESSION_REJECTED="Session Rejected",ERROR_MISSING_JSON_RPC="Missing JSON RPC response",ERROR_MISSING_RESULT='JSON-RPC success response must include "result" field',ERROR_MISSING_ERROR='JSON-RPC error response must include "error" field',ERROR_MISSING_METHOD='JSON RPC request must have valid "method" value',ERROR_MISSING_ID='JSON RPC request must have valid "id" value',ERROR_MISSING_REQUIRED="Missing one of the required parameters: bridge / uri / session",ERROR_INVALID_RESPONSE="JSON RPC response format is invalid",ERROR_INVALID_URI="URI format is invalid",ERROR_QRCODE_MODAL_NOT_PROVIDED="QRCode Modal not provided",ERROR_QRCODE_MODAL_USER_CLOSED="User close QRCode Modal";class EventManager{constructor(){this._eventEmitters=[]}subscribe(tt){this._eventEmitters.push(tt)}unsubscribe(tt){this._eventEmitters=this._eventEmitters.filter(rt=>rt.event!==tt)}trigger(tt){let rt=[],at;isJsonRpcRequest(tt)?at=tt.method:isJsonRpcResponseSuccess(tt)||isJsonRpcResponseError(tt)?at=`response:${tt.id}`:isInternalEvent(tt)?at=tt.event:at="",at&&(rt=this._eventEmitters.filter(st=>st.event===at)),(!rt||!rt.length)&&!isReservedEvent(at)&&!isInternalEvent(at)&&(rt=this._eventEmitters.filter(st=>st.event==="call_request")),rt.forEach(st=>{if(isJsonRpcResponseError(tt)){const ot=new Error(tt.error.message);st.callback(ot,null)}else st.callback(null,tt)})}}class SessionStorage{constructor(tt="walletconnect"){this.storageId=tt}getSession(){let tt=null;const rt=getLocal(this.storageId);return rt&&isWalletConnectSession(rt)&&(tt=rt),tt}setSession(tt){return setLocal(this.storageId,tt),tt}removeSession(){removeLocal(this.storageId)}}const domain="walletconnect.org",alphanumerical="abcdefghijklmnopqrstuvwxyz0123456789",bridges=alphanumerical.split("").map(it=>`https://${it}.bridge.walletconnect.org`);function extractHostname(it){let tt=it.indexOf("//")>-1?it.split("/")[2]:it.split("/")[0];return tt=tt.split(":")[0],tt=tt.split("?")[0],tt}function extractRootDomain(it){return extractHostname(it).split(".").slice(-2).join(".")}function randomBridgeIndex(){return Math.floor(Math.random()*bridges.length)}function selectRandomBridgeUrl(){return bridges[randomBridgeIndex()]}function shouldSelectRandomly(it){return extractRootDomain(it)===domain}function getBridgeUrl(it){return shouldSelectRandomly(it)?selectRandomBridgeUrl():it}class Connector{constructor(tt){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new EventManager,this._clientMeta=getClientMeta()||tt.connectorOpts.clientMeta||null,this._cryptoLib=tt.cryptoLib,this._sessionStorage=tt.sessionStorage||new SessionStorage(tt.connectorOpts.storageId),this._qrcodeModal=tt.connectorOpts.qrcodeModal,this._qrcodeModalOptions=tt.connectorOpts.qrcodeModalOptions,this._signingMethods=[...signingMethods,...tt.connectorOpts.signingMethods||[]],!tt.connectorOpts.bridge&&!tt.connectorOpts.uri&&!tt.connectorOpts.session)throw new Error(ERROR_MISSING_REQUIRED);tt.connectorOpts.bridge&&(this.bridge=getBridgeUrl(tt.connectorOpts.bridge)),tt.connectorOpts.uri&&(this.uri=tt.connectorOpts.uri);const rt=tt.connectorOpts.session||this._getStorageSession();rt&&(this.session=rt),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=tt.transport||new SocketTransport({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),tt.connectorOpts.uri&&this._subscribeToSessionRequest(),tt.pushServerOpts&&this._registerPushServer(tt.pushServerOpts)}set bridge(tt){!tt||(this._bridge=tt)}get bridge(){return this._bridge}set key(tt){if(!tt)return;const rt=convertHexToArrayBuffer(tt);this._key=rt}get key(){return this._key?convertArrayBufferToHex(this._key,!0):""}set clientId(tt){!tt||(this._clientId=tt)}get clientId(){let tt=this._clientId;return tt||(tt=this._clientId=uuid$1()),this._clientId}set peerId(tt){!tt||(this._peerId=tt)}get peerId(){return this._peerId}set clientMeta(tt){}get clientMeta(){let tt=this._clientMeta;return tt||(tt=this._clientMeta=getClientMeta()),tt}set peerMeta(tt){this._peerMeta=tt}get peerMeta(){return this._peerMeta}set handshakeTopic(tt){!tt||(this._handshakeTopic=tt)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(tt){!tt||(this._handshakeId=tt)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(tt){if(!tt)return;const{handshakeTopic:rt,bridge:at,key:st}=this._parseUri(tt);this.handshakeTopic=rt,this.bridge=at,this.key=st}set chainId(tt){this._chainId=tt}get chainId(){return this._chainId}set networkId(tt){this._networkId=tt}get networkId(){return this._networkId}set accounts(tt){this._accounts=tt}get accounts(){return this._accounts}set rpcUrl(tt){this._rpcUrl=tt}get rpcUrl(){return this._rpcUrl}set connected(tt){}get connected(){return this._connected}set pending(tt){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(tt){!tt||(this._connected=tt.connected,this.accounts=tt.accounts,this.chainId=tt.chainId,this.bridge=tt.bridge,this.key=tt.key,this.clientId=tt.clientId,this.clientMeta=tt.clientMeta,this.peerId=tt.peerId,this.peerMeta=tt.peerMeta,this.handshakeId=tt.handshakeId,this.handshakeTopic=tt.handshakeTopic)}on(tt,rt){const at={event:tt,callback:rt};this._eventManager.subscribe(at)}off(tt){this._eventManager.unsubscribe(tt)}async createInstantRequest(tt){this._key=await this._generateKey();const rt=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(tt)}]});this.handshakeId=rt.id,this.handshakeTopic=uuid$1(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(ERROR_QRCODE_MODAL_USER_CLOSED)});const at=()=>{this.killSession()};try{const st=await this._sendCallRequest(rt);return st&&at(),st}catch(st){throw at(),st}}async connect(tt){if(!this._qrcodeModal)throw new Error(ERROR_QRCODE_MODAL_NOT_PROVIDED);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(tt),new Promise(async(rt,at)=>{this.on("modal_closed",()=>at(new Error(ERROR_QRCODE_MODAL_USER_CLOSED))),this.on("connect",(st,ot)=>{if(st)return at(st);rt(ot.params[0])})}))}async createSession(tt){if(this._connected)throw new Error(ERROR_SESSION_CONNECTED);if(this.pending)return;this._key=await this._generateKey();const rt=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:tt&&tt.chainId?tt.chainId:null}]});this.handshakeId=rt.id,this.handshakeTopic=uuid$1(),this._sendSessionRequest(rt,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(tt){if(this._connected)throw new Error(ERROR_SESSION_CONNECTED);this.chainId=tt.chainId,this.accounts=tt.accounts,this.networkId=tt.networkId||0,this.rpcUrl=tt.rpcUrl||"";const rt={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},at={id:this.handshakeId,jsonrpc:"2.0",result:rt};this._sendResponse(at),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(tt){if(this._connected)throw new Error(ERROR_SESSION_CONNECTED);const rt=tt&&tt.message?tt.message:ERROR_SESSION_REJECTED,at=this._formatResponse({id:this.handshakeId,error:{message:rt}});this._sendResponse(at),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:rt}]}),this._removeStorageSession()}updateSession(tt){if(!this._connected)throw new Error(ERROR_SESSION_DISCONNECTED);this.chainId=tt.chainId,this.accounts=tt.accounts,this.networkId=tt.networkId||0,this.rpcUrl=tt.rpcUrl||"";const rt={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},at=this._formatRequest({method:"wc_sessionUpdate",params:[rt]});this._sendSessionRequest(at,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(tt){const rt=tt?tt.message:"Session Disconnected",at={approved:!1,chainId:null,networkId:null,accounts:null},st=this._formatRequest({method:"wc_sessionUpdate",params:[at]});await this._sendRequest(st),this._handleSessionDisconnect(rt)}async sendTransaction(tt){if(!this._connected)throw new Error(ERROR_SESSION_DISCONNECTED);const rt=parseTransactionData(tt),at=this._formatRequest({method:"eth_sendTransaction",params:[rt]});return await this._sendCallRequest(at)}async signTransaction(tt){if(!this._connected)throw new Error(ERROR_SESSION_DISCONNECTED);const rt=parseTransactionData(tt),at=this._formatRequest({method:"eth_signTransaction",params:[rt]});return await this._sendCallRequest(at)}async signMessage(tt){if(!this._connected)throw new Error(ERROR_SESSION_DISCONNECTED);const rt=this._formatRequest({method:"eth_sign",params:tt});return await this._sendCallRequest(rt)}async signPersonalMessage(tt){if(!this._connected)throw new Error(ERROR_SESSION_DISCONNECTED);tt=parsePersonalSign(tt);const rt=this._formatRequest({method:"personal_sign",params:tt});return await this._sendCallRequest(rt)}async signTypedData(tt){if(!this._connected)throw new Error(ERROR_SESSION_DISCONNECTED);const rt=this._formatRequest({method:"eth_signTypedData",params:tt});return await this._sendCallRequest(rt)}async updateChain(tt){if(!this._connected)throw new Error("Session currently disconnected");const rt=this._formatRequest({method:"wallet_updateChain",params:[tt]});return await this._sendCallRequest(rt)}unsafeSend(tt,rt){return this._sendRequest(tt,rt),this._eventManager.trigger({event:"call_request_sent",params:[{request:tt,options:rt}]}),new Promise((at,st)=>{this._subscribeToResponse(tt.id,(ot,lt)=>{if(ot){st(ot);return}if(!lt)throw new Error(ERROR_MISSING_JSON_RPC);at(lt)})})}async sendCustomRequest(tt,rt){if(!this._connected)throw new Error(ERROR_SESSION_DISCONNECTED);switch(tt.method){case"eth_accounts":return this.accounts;case"eth_chainId":return convertNumberToHex(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":tt.params&&(tt.params[0]=parseTransactionData(tt.params[0]));break;case"personal_sign":tt.params&&(tt.params=parsePersonalSign(tt.params));break}const at=this._formatRequest(tt);return await this._sendCallRequest(at,rt)}approveRequest(tt){if(isJsonRpcResponseSuccess(tt)){const rt=this._formatResponse(tt);this._sendResponse(rt)}else throw new Error(ERROR_MISSING_RESULT)}rejectRequest(tt){if(isJsonRpcResponseError(tt)){const rt=this._formatResponse(tt);this._sendResponse(rt)}else throw new Error(ERROR_MISSING_ERROR)}transportClose(){this._transport.close()}async _sendRequest(tt,rt){const at=this._formatRequest(tt),st=await this._encrypt(at),ot=typeof(rt==null?void 0:rt.topic)<"u"?rt.topic:this.peerId,lt=JSON.stringify(st),ut=typeof(rt==null?void 0:rt.forcePushNotification)<"u"?!rt.forcePushNotification:isSilentPayload(at);this._transport.send(lt,ot,ut)}async _sendResponse(tt){const rt=await this._encrypt(tt),at=this.peerId,st=JSON.stringify(rt),ot=!0;this._transport.send(st,at,ot)}async _sendSessionRequest(tt,rt,at){this._sendRequest(tt,at),this._subscribeToSessionResponse(tt.id,rt)}_sendCallRequest(tt,rt){return this._sendRequest(tt,rt),this._eventManager.trigger({event:"call_request_sent",params:[{request:tt,options:rt}]}),this._subscribeToCallResponse(tt.id)}_formatRequest(tt){if(typeof tt.method>"u")throw new Error(ERROR_MISSING_METHOD);return{id:typeof tt.id>"u"?payloadId():tt.id,jsonrpc:"2.0",method:tt.method,params:typeof tt.params>"u"?[]:tt.params}}_formatResponse(tt){if(typeof tt.id>"u")throw new Error(ERROR_MISSING_ID);const rt={id:tt.id,jsonrpc:"2.0"};if(isJsonRpcResponseError(tt)){const at=formatRpcError(tt.error);return Object.assign(Object.assign(Object.assign({},rt),tt),{error:at})}else if(isJsonRpcResponseSuccess(tt))return Object.assign(Object.assign({},rt),tt);throw new Error(ERROR_INVALID_RESPONSE)}_handleSessionDisconnect(tt){const rt=tt||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),removeLocal(mobileLinkChoiceKey)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:rt}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(tt,rt){rt?rt.approved?(this._connected?(rt.chainId&&(this.chainId=rt.chainId),rt.accounts&&(this.accounts=rt.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,rt.chainId&&(this.chainId=rt.chainId),rt.accounts&&(this.accounts=rt.accounts),rt.peerId&&!this.peerId&&(this.peerId=rt.peerId),rt.peerMeta&&!this.peerMeta&&(this.peerMeta=rt.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(tt):this._handleSessionDisconnect(tt)}async _handleIncomingMessages(tt){if(![this.clientId,this.handshakeTopic].includes(tt.topic))return;let at;try{at=JSON.parse(tt.payload)}catch{return}const st=await this._decrypt(at);st&&this._eventManager.trigger(st)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(tt,rt){this.on(`response:${tt}`,rt)}_subscribeToSessionResponse(tt,rt){this._subscribeToResponse(tt,(at,st)=>{if(at){this._handleSessionResponse(at.message);return}isJsonRpcResponseSuccess(st)?this._handleSessionResponse(rt,st.result):st.error&&st.error.message?this._handleSessionResponse(st.error.message):this._handleSessionResponse(rt)})}_subscribeToCallResponse(tt){return new Promise((rt,at)=>{this._subscribeToResponse(tt,(st,ot)=>{if(st){at(st);return}isJsonRpcResponseSuccess(ot)?rt(ot.result):ot.error&&ot.error.message?at(ot.error):at(new Error(ERROR_INVALID_RESPONSE))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(tt,rt)=>{const{request:at}=rt.params[0];if(isMobile$1()&&this._signingMethods.includes(at.method)){const st=getLocal(mobileLinkChoiceKey);st&&(window.location.href=st.href)}}),this.on("wc_sessionRequest",(tt,rt)=>{tt&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:tt.toString()}]}),this.handshakeId=rt.id,this.peerId=rt.params[0].peerId,this.peerMeta=rt.params[0].peerMeta;const at=Object.assign(Object.assign({},rt),{method:"session_request"});this._eventManager.trigger(at)}),this.on("wc_sessionUpdate",(tt,rt)=>{tt&&this._handleSessionResponse(tt.message),this._handleSessionResponse("Session disconnected",rt.params[0])})}_initTransport(){this._transport.on("message",tt=>this._handleIncomingMessages(tt)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const tt=this.protocol,rt=this.handshakeTopic,at=this.version,st=encodeURIComponent(this.bridge),ot=this.key;return`${tt}:${rt}@${at}?bridge=${st}&key=${ot}`}_parseUri(tt){const rt=parseWalletConnectUri(tt);if(rt.protocol===this.protocol){if(!rt.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const at=rt.handshakeTopic;if(!rt.bridge)throw Error("Invalid or missing bridge url parameter value");const st=decodeURIComponent(rt.bridge);if(!rt.key)throw Error("Invalid or missing key parameter value");const ot=rt.key;return{handshakeTopic:at,bridge:st,key:ot}}else throw new Error(ERROR_INVALID_URI)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(tt){const rt=this._key;return this._cryptoLib&&rt?await this._cryptoLib.encrypt(tt,rt):null}async _decrypt(tt){const rt=this._key;return this._cryptoLib&&rt?await this._cryptoLib.decrypt(tt,rt):null}_getStorageSession(){let tt=null;return this._sessionStorage&&(tt=this._sessionStorage.getSession()),tt}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(tt){if(!tt.url||typeof tt.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!tt.type||typeof tt.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!tt.token||typeof tt.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const rt={bridge:this.bridge,topic:this.clientId,type:tt.type,token:tt.token,peerName:"",language:tt.language||""};this.on("connect",async(at,st)=>{if(at)throw at;if(tt.peerMeta){const ot=st.params[0].peerMeta.name;rt.peerName=ot}try{if(!(await(await fetch(`${tt.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(rt)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function randomBytes(it){return cjs$4.getBrowerCrypto().getRandomValues(new Uint8Array(it))}const LENGTH_256=256,AES_LENGTH=LENGTH_256,HMAC_LENGTH=LENGTH_256,AES_BROWSER_ALGO="AES-CBC",HMAC_BROWSER_ALGO=`SHA-${AES_LENGTH}`,HMAC_BROWSER="HMAC",ENCRYPT_OP="encrypt",DECRYPT_OP="decrypt",SIGN_OP="sign",VERIFY_OP="verify";function getAlgo(it){return it===AES_BROWSER_ALGO?{length:AES_LENGTH,name:AES_BROWSER_ALGO}:{hash:{name:HMAC_BROWSER_ALGO},name:HMAC_BROWSER}}function getOps(it){return it===AES_BROWSER_ALGO?[ENCRYPT_OP,DECRYPT_OP]:[SIGN_OP,VERIFY_OP]}async function browserImportKey(it,tt=AES_BROWSER_ALGO){return cjs$4.getSubtleCrypto().importKey("raw",it,getAlgo(tt),!0,getOps(tt))}async function browserAesEncrypt(it,tt,rt){const at=cjs$4.getSubtleCrypto(),st=await browserImportKey(tt,AES_BROWSER_ALGO),ot=await at.encrypt({iv:it,name:AES_BROWSER_ALGO},st,rt);return new Uint8Array(ot)}async function browserAesDecrypt(it,tt,rt){const at=cjs$4.getSubtleCrypto(),st=await browserImportKey(tt,AES_BROWSER_ALGO),ot=await at.decrypt({iv:it,name:AES_BROWSER_ALGO},st,rt);return new Uint8Array(ot)}async function browserHmacSha256Sign(it,tt){const rt=cjs$4.getSubtleCrypto(),at=await browserImportKey(it,HMAC_BROWSER),st=await rt.sign({length:HMAC_LENGTH,name:HMAC_BROWSER},at,tt);return new Uint8Array(st)}function aesCbcEncrypt(it,tt,rt){return browserAesEncrypt(it,tt,rt)}function aesCbcDecrypt(it,tt,rt){return browserAesDecrypt(it,tt,rt)}async function hmacSha256Sign(it,tt){return await browserHmacSha256Sign(it,tt)}async function generateKey(it){const tt=(it||256)/8,rt=randomBytes(tt);return convertBufferToArrayBuffer(arrayToBuffer(rt))}async function verifyHmac(it,tt){const rt=hexToArray(it.data),at=hexToArray(it.iv),st=hexToArray(it.hmac),ot=arrayToHex(st,!1),lt=concatArrays(rt,at),ut=await hmacSha256Sign(tt,lt),ht=arrayToHex(ut,!1);return removeHexPrefix(ot)===removeHexPrefix(ht)}async function encrypt(it,tt,rt){const at=bufferToArray(convertArrayBufferToBuffer(tt)),st=rt||await generateKey(128),ot=bufferToArray(convertArrayBufferToBuffer(st)),lt=arrayToHex(ot,!1),ut=JSON.stringify(it),ht=utf8ToArray(ut),mt=await aesCbcEncrypt(ot,at,ht),bt=arrayToHex(mt,!1),vt=concatArrays(mt,ot),At=await hmacSha256Sign(at,vt),xt=arrayToHex(At,!1);return{data:bt,hmac:xt,iv:lt}}async function decrypt(it,tt){const rt=bufferToArray(convertArrayBufferToBuffer(tt));if(!rt)throw new Error("Missing key: required for decryption");if(!await verifyHmac(it,rt))return null;const st=hexToArray(it.data),ot=hexToArray(it.iv),lt=await aesCbcDecrypt(ot,rt,st),ut=arrayToUtf8(lt);let ht;try{ht=JSON.parse(ut)}catch{return null}return ht}const cryptoLib=Object.freeze(Object.defineProperty({__proto__:null,generateKey,verifyHmac,encrypt,decrypt},Symbol.toStringTag,{value:"Module"}));class WalletConnect extends Connector{constructor(tt,rt){super({cryptoLib,connectorOpts:tt,pushServerOpts:rt})}}const require$$0$1=getAugmentedNamespace(esm$1);var browser={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},typedarrayBuffer={},toString={}.toString,isarray=Array.isArray||function(it){return toString.call(it)=="[object Array]"},isArray$3=isarray;function typedArraySupport(){try{var it=new Uint8Array(1);return it.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},it.foo()===42}catch{return!1}}Buffer$2.TYPED_ARRAY_SUPPORT=typedArraySupport();var K_MAX_LENGTH=Buffer$2.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function Buffer$2(it,tt,rt){return!Buffer$2.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer$2)?new Buffer$2(it,tt,rt):typeof it=="number"?allocUnsafe(this,it):from$1(this,it,tt,rt)}Buffer$2.TYPED_ARRAY_SUPPORT&&(Buffer$2.prototype.__proto__=Uint8Array.prototype,Buffer$2.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer$2[Symbol.species]===Buffer$2&&Object.defineProperty(Buffer$2,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function checked(it){if(it>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return it|0}function isnan(it){return it!==it}function createBuffer(it,tt){var rt;return Buffer$2.TYPED_ARRAY_SUPPORT?(rt=new Uint8Array(tt),rt.__proto__=Buffer$2.prototype):(rt=it,rt===null&&(rt=new Buffer$2(tt)),rt.length=tt),rt}function allocUnsafe(it,tt){var rt=createBuffer(it,tt<0?0:checked(tt)|0);if(!Buffer$2.TYPED_ARRAY_SUPPORT)for(var at=0;at<tt;++at)rt[at]=0;return rt}function fromString(it,tt){var rt=byteLength(tt)|0,at=createBuffer(it,rt),st=at.write(tt);return st!==rt&&(at=at.slice(0,st)),at}function fromArrayLike(it,tt){for(var rt=tt.length<0?0:checked(tt.length)|0,at=createBuffer(it,rt),st=0;st<rt;st+=1)at[st]=tt[st]&255;return at}function fromArrayBuffer(it,tt,rt,at){if(rt<0||tt.byteLength<rt)throw new RangeError("'offset' is out of bounds");if(tt.byteLength<rt+(at||0))throw new RangeError("'length' is out of bounds");var st;return rt===void 0&&at===void 0?st=new Uint8Array(tt):at===void 0?st=new Uint8Array(tt,rt):st=new Uint8Array(tt,rt,at),Buffer$2.TYPED_ARRAY_SUPPORT?st.__proto__=Buffer$2.prototype:st=fromArrayLike(it,st),st}function fromObject(it,tt){if(Buffer$2.isBuffer(tt)){var rt=checked(tt.length)|0,at=createBuffer(it,rt);return at.length===0||tt.copy(at,0,0,rt),at}if(tt){if(typeof ArrayBuffer<"u"&&tt.buffer instanceof ArrayBuffer||"length"in tt)return typeof tt.length!="number"||isnan(tt.length)?createBuffer(it,0):fromArrayLike(it,tt);if(tt.type==="Buffer"&&Array.isArray(tt.data))return fromArrayLike(it,tt.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function utf8ToBytes(it,tt){tt=tt||1/0;for(var rt,at=it.length,st=null,ot=[],lt=0;lt<at;++lt){if(rt=it.charCodeAt(lt),rt>55295&&rt<57344){if(!st){if(rt>56319){(tt-=3)>-1&&ot.push(239,191,189);continue}else if(lt+1===at){(tt-=3)>-1&&ot.push(239,191,189);continue}st=rt;continue}if(rt<56320){(tt-=3)>-1&&ot.push(239,191,189),st=rt;continue}rt=(st-55296<<10|rt-56320)+65536}else st&&(tt-=3)>-1&&ot.push(239,191,189);if(st=null,rt<128){if((tt-=1)<0)break;ot.push(rt)}else if(rt<2048){if((tt-=2)<0)break;ot.push(rt>>6|192,rt&63|128)}else if(rt<65536){if((tt-=3)<0)break;ot.push(rt>>12|224,rt>>6&63|128,rt&63|128)}else if(rt<1114112){if((tt-=4)<0)break;ot.push(rt>>18|240,rt>>12&63|128,rt>>6&63|128,rt&63|128)}else throw new Error("Invalid code point")}return ot}function byteLength(it){if(Buffer$2.isBuffer(it))return it.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(it)||it instanceof ArrayBuffer))return it.byteLength;typeof it!="string"&&(it=""+it);var tt=it.length;return tt===0?0:utf8ToBytes(it).length}function blitBuffer(it,tt,rt,at){for(var st=0;st<at&&!(st+rt>=tt.length||st>=it.length);++st)tt[st+rt]=it[st];return st}function utf8Write(it,tt,rt,at){return blitBuffer(utf8ToBytes(tt,it.length-rt),it,rt,at)}function from$1(it,tt,rt,at){if(typeof tt=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&tt instanceof ArrayBuffer?fromArrayBuffer(it,tt,rt,at):typeof tt=="string"?fromString(it,tt):fromObject(it,tt)}Buffer$2.prototype.write=function it(tt,rt,at){rt===void 0?(at=this.length,rt=0):at===void 0&&typeof rt=="string"?(at=this.length,rt=0):isFinite(rt)&&(rt=rt|0,isFinite(at)?at=at|0:at=void 0);var st=this.length-rt;if((at===void 0||at>st)&&(at=st),tt.length>0&&(at<0||rt<0)||rt>this.length)throw new RangeError("Attempt to write outside buffer bounds");return utf8Write(this,tt,rt,at)},Buffer$2.prototype.slice=function it(tt,rt){var at=this.length;tt=~~tt,rt=rt===void 0?at:~~rt,tt<0?(tt+=at,tt<0&&(tt=0)):tt>at&&(tt=at),rt<0?(rt+=at,rt<0&&(rt=0)):rt>at&&(rt=at),rt<tt&&(rt=tt);var st;if(Buffer$2.TYPED_ARRAY_SUPPORT)st=this.subarray(tt,rt),st.__proto__=Buffer$2.prototype;else{var ot=rt-tt;st=new Buffer$2(ot,void 0);for(var lt=0;lt<ot;++lt)st[lt]=this[lt+tt]}return st},Buffer$2.prototype.copy=function it(tt,rt,at,st){if(at||(at=0),!st&&st!==0&&(st=this.length),rt>=tt.length&&(rt=tt.length),rt||(rt=0),st>0&&st<at&&(st=at),st===at||tt.length===0||this.length===0)return 0;if(rt<0)throw new RangeError("targetStart out of bounds");if(at<0||at>=this.length)throw new RangeError("sourceStart out of bounds");if(st<0)throw new RangeError("sourceEnd out of bounds");st>this.length&&(st=this.length),tt.length-rt<st-at&&(st=tt.length-rt+at);var ot=st-at,lt;if(this===tt&&at<rt&&rt<st)for(lt=ot-1;lt>=0;--lt)tt[lt+rt]=this[lt+at];else if(ot<1e3||!Buffer$2.TYPED_ARRAY_SUPPORT)for(lt=0;lt<ot;++lt)tt[lt+rt]=this[lt+at];else Uint8Array.prototype.set.call(tt,this.subarray(at,at+ot),rt);return ot},Buffer$2.prototype.fill=function it(tt,rt,at){if(typeof tt=="string"){if(typeof rt=="string"?(rt=0,at=this.length):typeof at=="string"&&(at=this.length),tt.length===1){var st=tt.charCodeAt(0);st<256&&(tt=st)}}else typeof tt=="number"&&(tt=tt&255);if(rt<0||this.length<rt||this.length<at)throw new RangeError("Out of range index");if(at<=rt)return this;rt=rt>>>0,at=at===void 0?this.length:at>>>0,tt||(tt=0);var ot;if(typeof tt=="number")for(ot=rt;ot<at;++ot)this[ot]=tt;else{var lt=Buffer$2.isBuffer(tt)?tt:new Buffer$2(tt),ut=lt.length;for(ot=0;ot<at-rt;++ot)this[ot+rt]=lt[ot%ut]}return this},Buffer$2.concat=function it(tt,rt){if(!isArray$3(tt))throw new TypeError('"list" argument must be an Array of Buffers');if(tt.length===0)return createBuffer(null,0);var at;if(rt===void 0)for(rt=0,at=0;at<tt.length;++at)rt+=tt[at].length;var st=allocUnsafe(null,rt),ot=0;for(at=0;at<tt.length;++at){var lt=tt[at];if(!Buffer$2.isBuffer(lt))throw new TypeError('"list" argument must be an Array of Buffers');lt.copy(st,ot),ot+=lt.length}return st},Buffer$2.byteLength=byteLength,Buffer$2.prototype._isBuffer=!0,Buffer$2.isBuffer=function it(tt){return!!(tt!=null&&tt._isBuffer)},typedarrayBuffer.alloc=function(it){var tt=new Buffer$2(it);return tt.fill(0),tt},typedarrayBuffer.from=function(it){return new Buffer$2(it)};var utils$1={},toSJISFunction,CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function it(tt){if(!tt)throw new Error('"version" cannot be null or undefined');if(tt<1||tt>40)throw new Error('"version" should be in range from 1 to 40');return tt*4+17},utils$1.getSymbolTotalCodewords=function it(tt){return CODEWORDS_COUNT[tt]},utils$1.getBCHDigit=function(it){for(var tt=0;it!==0;)tt++,it>>>=1;return tt},utils$1.setToSJISFunction=function it(tt){if(typeof tt!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=tt},utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"},utils$1.toSJIS=function it(tt){return toSJISFunction(tt)};var errorCorrectionLevel={};(function(it){it.L={bit:1},it.M={bit:0},it.Q={bit:3},it.H={bit:2};function tt(rt){if(typeof rt!="string")throw new Error("Param is not a string");var at=rt.toLowerCase();switch(at){case"l":case"low":return it.L;case"m":case"medium":return it.M;case"q":case"quartile":return it.Q;case"h":case"high":return it.H;default:throw new Error("Unknown EC Level: "+rt)}}it.isValid=function(at){return at&&typeof at.bit<"u"&&at.bit>=0&&at.bit<4},it.from=function(at,st){if(it.isValid(at))return at;try{return tt(at)}catch{return st}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(it){var tt=Math.floor(it/8);return(this.buffer[tt]>>>7-it%8&1)===1},put:function(it,tt){for(var rt=0;rt<tt;rt++)this.putBit((it>>>tt-rt-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(it){var tt=Math.floor(this.length/8);this.buffer.length<=tt&&this.buffer.push(0),it&&(this.buffer[tt]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1,BufferUtil$4=typedarrayBuffer;function BitMatrix$1(it){if(!it||it<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=it,this.data=BufferUtil$4.alloc(it*it),this.reservedBit=BufferUtil$4.alloc(it*it)}BitMatrix$1.prototype.set=function(it,tt,rt,at){var st=it*this.size+tt;this.data[st]=rt,at&&(this.reservedBit[st]=!0)},BitMatrix$1.prototype.get=function(it,tt){return this.data[it*this.size+tt]},BitMatrix$1.prototype.xor=function(it,tt,rt){this.data[it*this.size+tt]^=rt},BitMatrix$1.prototype.isReserved=function(it,tt){return this.reservedBit[it*this.size+tt]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(it){var tt=utils$1.getSymbolSize;it.getRowColCoords=function(at){if(at===1)return[];for(var st=Math.floor(at/7)+2,ot=tt(at),lt=ot===145?26:Math.ceil((ot-13)/(2*st-2))*2,ut=[ot-7],ht=1;ht<st-1;ht++)ut[ht]=ut[ht-1]-lt;return ut.push(6),ut.reverse()},it.getPositions=function(at){for(var st=[],ot=it.getRowColCoords(at),lt=ot.length,ut=0;ut<lt;ut++)for(var ht=0;ht<lt;ht++)ut===0&&ht===0||ut===0&&ht===lt-1||ut===lt-1&&ht===0||st.push([ot[ut],ot[ht]]);return st}})(alignmentPattern);var finderPattern={},getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function it(tt){var rt=getSymbolSize(tt);return[[0,0],[rt-FINDER_PATTERN_SIZE,0],[0,rt-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(it){it.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var tt={N1:3,N2:3,N3:40,N4:10};it.isValid=function(st){return st!=null&&st!==""&&!isNaN(st)&&st>=0&&st<=7},it.from=function(st){return it.isValid(st)?parseInt(st,10):void 0},it.getPenaltyN1=function(st){for(var ot=st.size,lt=0,ut=0,ht=0,mt=null,bt=null,vt=0;vt<ot;vt++){ut=ht=0,mt=bt=null;for(var At=0;At<ot;At++){var xt=st.get(vt,At);xt===mt?ut++:(ut>=5&&(lt+=tt.N1+(ut-5)),mt=xt,ut=1),xt=st.get(At,vt),xt===bt?ht++:(ht>=5&&(lt+=tt.N1+(ht-5)),bt=xt,ht=1)}ut>=5&&(lt+=tt.N1+(ut-5)),ht>=5&&(lt+=tt.N1+(ht-5))}return lt},it.getPenaltyN2=function(st){for(var ot=st.size,lt=0,ut=0;ut<ot-1;ut++)for(var ht=0;ht<ot-1;ht++){var mt=st.get(ut,ht)+st.get(ut,ht+1)+st.get(ut+1,ht)+st.get(ut+1,ht+1);(mt===4||mt===0)&&lt++}return lt*tt.N2},it.getPenaltyN3=function(st){for(var ot=st.size,lt=0,ut=0,ht=0,mt=0;mt<ot;mt++){ut=ht=0;for(var bt=0;bt<ot;bt++)ut=ut<<1&2047|st.get(mt,bt),bt>=10&&(ut===1488||ut===93)&&lt++,ht=ht<<1&2047|st.get(bt,mt),bt>=10&&(ht===1488||ht===93)&&lt++}return lt*tt.N3},it.getPenaltyN4=function(st){for(var ot=0,lt=st.data.length,ut=0;ut<lt;ut++)ot+=st.data[ut];var ht=Math.abs(Math.ceil(ot*100/lt/5)-10);return ht*tt.N4};function rt(at,st,ot){switch(at){case it.Patterns.PATTERN000:return(st+ot)%2===0;case it.Patterns.PATTERN001:return st%2===0;case it.Patterns.PATTERN010:return ot%3===0;case it.Patterns.PATTERN011:return(st+ot)%3===0;case it.Patterns.PATTERN100:return(Math.floor(st/2)+Math.floor(ot/3))%2===0;case it.Patterns.PATTERN101:return st*ot%2+st*ot%3===0;case it.Patterns.PATTERN110:return(st*ot%2+st*ot%3)%2===0;case it.Patterns.PATTERN111:return(st*ot%3+(st+ot)%2)%2===0;default:throw new Error("bad maskPattern:"+at)}}it.applyMask=function(st,ot){for(var lt=ot.size,ut=0;ut<lt;ut++)for(var ht=0;ht<lt;ht++)ot.isReserved(ht,ut)||ot.xor(ht,ut,rt(st,ht,ut))},it.getBestMask=function(st,ot){for(var lt=Object.keys(it.Patterns).length,ut=0,ht=1/0,mt=0;mt<lt;mt++){ot(mt),it.applyMask(mt,st);var bt=it.getPenaltyN1(st)+it.getPenaltyN2(st)+it.getPenaltyN3(st)+it.getPenaltyN4(st);it.applyMask(mt,st),bt<ht&&(ht=bt,ut=mt)}return ut}})(maskPattern);var errorCorrectionCode={},ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function it(tt,rt){switch(rt){case ECLevel$1.L:return EC_BLOCKS_TABLE[(tt-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(tt-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(tt-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(tt-1)*4+3];default:return}},errorCorrectionCode.getTotalCodewordsCount=function it(tt,rt){switch(rt){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(tt-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(tt-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(tt-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(tt-1)*4+3];default:return}};var polynomial={},galoisField={},BufferUtil$3=typedarrayBuffer,EXP_TABLE=BufferUtil$3.alloc(512),LOG_TABLE=BufferUtil$3.alloc(256);(function it(){for(var tt=1,rt=0;rt<255;rt++)EXP_TABLE[rt]=tt,LOG_TABLE[tt]=rt,tt<<=1,tt&256&&(tt^=285);for(rt=255;rt<512;rt++)EXP_TABLE[rt]=EXP_TABLE[rt-255]})(),galoisField.log=function it(tt){if(tt<1)throw new Error("log("+tt+")");return LOG_TABLE[tt]},galoisField.exp=function it(tt){return EXP_TABLE[tt]},galoisField.mul=function it(tt,rt){return tt===0||rt===0?0:EXP_TABLE[LOG_TABLE[tt]+LOG_TABLE[rt]]},function(it){var tt=typedarrayBuffer,rt=galoisField;it.mul=function(st,ot){for(var lt=tt.alloc(st.length+ot.length-1),ut=0;ut<st.length;ut++)for(var ht=0;ht<ot.length;ht++)lt[ut+ht]^=rt.mul(st[ut],ot[ht]);return lt},it.mod=function(st,ot){for(var lt=tt.from(st);lt.length-ot.length>=0;){for(var ut=lt[0],ht=0;ht<ot.length;ht++)lt[ht]^=rt.mul(ot[ht],ut);for(var mt=0;mt<lt.length&&lt[mt]===0;)mt++;lt=lt.slice(mt)}return lt},it.generateECPolynomial=function(st){for(var ot=tt.from([1]),lt=0;lt<st;lt++)ot=it.mul(ot,[1,rt.exp(lt)]);return ot}}(polynomial);var buffer={};/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/(function(it){var tt=base64Js,rt=ieee754,at=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;it.Buffer=ut,it.SlowBuffer=It,it.INSPECT_MAX_BYTES=50;var st=2147483647;it.kMaxLength=st,ut.TYPED_ARRAY_SUPPORT=ot(),!ut.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function ot(){try{var yn=new Uint8Array(1),nn={foo:function(){return 42}};return Object.setPrototypeOf(nn,Uint8Array.prototype),Object.setPrototypeOf(yn,nn),yn.foo()===42}catch{return!1}}Object.defineProperty(ut.prototype,"parent",{enumerable:!0,get:function(){if(!!ut.isBuffer(this))return this.buffer}}),Object.defineProperty(ut.prototype,"offset",{enumerable:!0,get:function(){if(!!ut.isBuffer(this))return this.byteOffset}});function lt(yn){if(yn>st)throw new RangeError('The value "'+yn+'" is invalid for option "size"');var nn=new Uint8Array(yn);return Object.setPrototypeOf(nn,ut.prototype),nn}function ut(yn,nn,sn){if(typeof yn=="number"){if(typeof nn=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return vt(yn)}return ht(yn,nn,sn)}ut.poolSize=8192;function ht(yn,nn,sn){if(typeof yn=="string")return At(yn,nn);if(ArrayBuffer.isView(yn))return Et(yn);if(yn==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof yn);if(_n(yn,ArrayBuffer)||yn&&_n(yn.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_n(yn,SharedArrayBuffer)||yn&&_n(yn.buffer,SharedArrayBuffer)))return Tt(yn,nn,sn);if(typeof yn=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var hn=yn.valueOf&&yn.valueOf();if(hn!=null&&hn!==yn)return ut.from(hn,nn,sn);var Cn=wt(yn);if(Cn)return Cn;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof yn[Symbol.toPrimitive]=="function")return ut.from(yn[Symbol.toPrimitive]("string"),nn,sn);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof yn)}ut.from=function(yn,nn,sn){return ht(yn,nn,sn)},Object.setPrototypeOf(ut.prototype,Uint8Array.prototype),Object.setPrototypeOf(ut,Uint8Array);function mt(yn){if(typeof yn!="number")throw new TypeError('"size" argument must be of type number');if(yn<0)throw new RangeError('The value "'+yn+'" is invalid for option "size"')}function bt(yn,nn,sn){return mt(yn),yn<=0?lt(yn):nn!==void 0?typeof sn=="string"?lt(yn).fill(nn,sn):lt(yn).fill(nn):lt(yn)}ut.alloc=function(yn,nn,sn){return bt(yn,nn,sn)};function vt(yn){return mt(yn),lt(yn<0?0:Ct(yn)|0)}ut.allocUnsafe=function(yn){return vt(yn)},ut.allocUnsafeSlow=function(yn){return vt(yn)};function At(yn,nn){if((typeof nn!="string"||nn==="")&&(nn="utf8"),!ut.isEncoding(nn))throw new TypeError("Unknown encoding: "+nn);var sn=St(yn,nn)|0,hn=lt(sn),Cn=hn.write(yn,nn);return Cn!==sn&&(hn=hn.slice(0,Cn)),hn}function xt(yn){for(var nn=yn.length<0?0:Ct(yn.length)|0,sn=lt(nn),hn=0;hn<nn;hn+=1)sn[hn]=yn[hn]&255;return sn}function Et(yn){if(_n(yn,Uint8Array)){var nn=new Uint8Array(yn);return Tt(nn.buffer,nn.byteOffset,nn.byteLength)}return xt(yn)}function Tt(yn,nn,sn){if(nn<0||yn.byteLength<nn)throw new RangeError('"offset" is outside of buffer bounds');if(yn.byteLength<nn+(sn||0))throw new RangeError('"length" is outside of buffer bounds');var hn;return nn===void 0&&sn===void 0?hn=new Uint8Array(yn):sn===void 0?hn=new Uint8Array(yn,nn):hn=new Uint8Array(yn,nn,sn),Object.setPrototypeOf(hn,ut.prototype),hn}function wt(yn){if(ut.isBuffer(yn)){var nn=Ct(yn.length)|0,sn=lt(nn);return sn.length===0||yn.copy(sn,0,0,nn),sn}if(yn.length!==void 0)return typeof yn.length!="number"||wn(yn.length)?lt(0):xt(yn);if(yn.type==="Buffer"&&Array.isArray(yn.data))return xt(yn.data)}function Ct(yn){if(yn>=st)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+st.toString(16)+" bytes");return yn|0}function It(yn){return+yn!=yn&&(yn=0),ut.alloc(+yn)}ut.isBuffer=function(nn){return nn!=null&&nn._isBuffer===!0&&nn!==ut.prototype},ut.compare=function(nn,sn){if(_n(nn,Uint8Array)&&(nn=ut.from(nn,nn.offset,nn.byteLength)),_n(sn,Uint8Array)&&(sn=ut.from(sn,sn.offset,sn.byteLength)),!ut.isBuffer(nn)||!ut.isBuffer(sn))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(nn===sn)return 0;for(var hn=nn.length,Cn=sn.length,$n=0,gn=Math.min(hn,Cn);$n<gn;++$n)if(nn[$n]!==sn[$n]){hn=nn[$n],Cn=sn[$n];break}return hn<Cn?-1:Cn<hn?1:0},ut.isEncoding=function(nn){switch(String(nn).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ut.concat=function(nn,sn){if(!Array.isArray(nn))throw new TypeError('"list" argument must be an Array of Buffers');if(nn.length===0)return ut.alloc(0);var hn;if(sn===void 0)for(sn=0,hn=0;hn<nn.length;++hn)sn+=nn[hn].length;var Cn=ut.allocUnsafe(sn),$n=0;for(hn=0;hn<nn.length;++hn){var gn=nn[hn];if(_n(gn,Uint8Array))$n+gn.length>Cn.length?ut.from(gn).copy(Cn,$n):Uint8Array.prototype.set.call(Cn,gn,$n);else if(ut.isBuffer(gn))gn.copy(Cn,$n);else throw new TypeError('"list" argument must be an Array of Buffers');$n+=gn.length}return Cn};function St(yn,nn){if(ut.isBuffer(yn))return yn.length;if(ArrayBuffer.isView(yn)||_n(yn,ArrayBuffer))return yn.byteLength;if(typeof yn!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof yn);var sn=yn.length,hn=arguments.length>2&&arguments[2]===!0;if(!hn&&sn===0)return 0;for(var Cn=!1;;)switch(nn){case"ascii":case"latin1":case"binary":return sn;case"utf8":case"utf-8":return pn(yn).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sn*2;case"hex":return sn>>>1;case"base64":return dn(yn).length;default:if(Cn)return hn?-1:pn(yn).length;nn=(""+nn).toLowerCase(),Cn=!0}}ut.byteLength=St;function Rt(yn,nn,sn){var hn=!1;if((nn===void 0||nn<0)&&(nn=0),nn>this.length||((sn===void 0||sn>this.length)&&(sn=this.length),sn<=0)||(sn>>>=0,nn>>>=0,sn<=nn))return"";for(yn||(yn="utf8");;)switch(yn){case"hex":return Bt(this,nn,sn);case"utf8":case"utf-8":return Mt(this,nn,sn);case"ascii":return Qt(this,nn,sn);case"latin1":case"binary":return Ut(this,nn,sn);case"base64":return Nt(this,nn,sn);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kt(this,nn,sn);default:if(hn)throw new TypeError("Unknown encoding: "+yn);yn=(yn+"").toLowerCase(),hn=!0}}ut.prototype._isBuffer=!0;function Dt(yn,nn,sn){var hn=yn[nn];yn[nn]=yn[sn],yn[sn]=hn}ut.prototype.swap16=function(){var nn=this.length;if(nn%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var sn=0;sn<nn;sn+=2)Dt(this,sn,sn+1);return this},ut.prototype.swap32=function(){var nn=this.length;if(nn%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var sn=0;sn<nn;sn+=4)Dt(this,sn,sn+3),Dt(this,sn+1,sn+2);return this},ut.prototype.swap64=function(){var nn=this.length;if(nn%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var sn=0;sn<nn;sn+=8)Dt(this,sn,sn+7),Dt(this,sn+1,sn+6),Dt(this,sn+2,sn+5),Dt(this,sn+3,sn+4);return this},ut.prototype.toString=function(){var nn=this.length;return nn===0?"":arguments.length===0?Mt(this,0,nn):Rt.apply(this,arguments)},ut.prototype.toLocaleString=ut.prototype.toString,ut.prototype.equals=function(nn){if(!ut.isBuffer(nn))throw new TypeError("Argument must be a Buffer");return this===nn?!0:ut.compare(this,nn)===0},ut.prototype.inspect=function(){var nn="",sn=it.INSPECT_MAX_BYTES;return nn=this.toString("hex",0,sn).replace(/(.{2})/g,"$1 ").trim(),this.length>sn&&(nn+=" ... "),"<Buffer "+nn+">"},at&&(ut.prototype[at]=ut.prototype.inspect),ut.prototype.compare=function(nn,sn,hn,Cn,$n){if(_n(nn,Uint8Array)&&(nn=ut.from(nn,nn.offset,nn.byteLength)),!ut.isBuffer(nn))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof nn);if(sn===void 0&&(sn=0),hn===void 0&&(hn=nn?nn.length:0),Cn===void 0&&(Cn=0),$n===void 0&&($n=this.length),sn<0||hn>nn.length||Cn<0||$n>this.length)throw new RangeError("out of range index");if(Cn>=$n&&sn>=hn)return 0;if(Cn>=$n)return-1;if(sn>=hn)return 1;if(sn>>>=0,hn>>>=0,Cn>>>=0,$n>>>=0,this===nn)return 0;for(var gn=$n-Cn,mn=hn-sn,Mn=Math.min(gn,mn),On=this.slice(Cn,$n),Dn=nn.slice(sn,hn),on=0;on<Mn;++on)if(On[on]!==Dn[on]){gn=On[on],mn=Dn[on];break}return gn<mn?-1:mn<gn?1:0};function Wt(yn,nn,sn,hn,Cn){if(yn.length===0)return-1;if(typeof sn=="string"?(hn=sn,sn=0):sn>2147483647?sn=2147483647:sn<-2147483648&&(sn=-2147483648),sn=+sn,wn(sn)&&(sn=Cn?0:yn.length-1),sn<0&&(sn=yn.length+sn),sn>=yn.length){if(Cn)return-1;sn=yn.length-1}else if(sn<0)if(Cn)sn=0;else return-1;if(typeof nn=="string"&&(nn=ut.from(nn,hn)),ut.isBuffer(nn))return nn.length===0?-1:qt(yn,nn,sn,hn,Cn);if(typeof nn=="number")return nn=nn&255,typeof Uint8Array.prototype.indexOf=="function"?Cn?Uint8Array.prototype.indexOf.call(yn,nn,sn):Uint8Array.prototype.lastIndexOf.call(yn,nn,sn):qt(yn,[nn],sn,hn,Cn);throw new TypeError("val must be string, number or Buffer")}function qt(yn,nn,sn,hn,Cn){var $n=1,gn=yn.length,mn=nn.length;if(hn!==void 0&&(hn=String(hn).toLowerCase(),hn==="ucs2"||hn==="ucs-2"||hn==="utf16le"||hn==="utf-16le")){if(yn.length<2||nn.length<2)return-1;$n=2,gn/=2,mn/=2,sn/=2}function Mn(tn,un){return $n===1?tn[un]:tn.readUInt16BE(un*$n)}var On;if(Cn){var Dn=-1;for(On=sn;On<gn;On++)if(Mn(yn,On)===Mn(nn,Dn===-1?0:On-Dn)){if(Dn===-1&&(Dn=On),On-Dn+1===mn)return Dn*$n}else Dn!==-1&&(On-=On-Dn),Dn=-1}else for(sn+mn>gn&&(sn=gn-mn),On=sn;On>=0;On--){for(var on=!0,Xt=0;Xt<mn;Xt++)if(Mn(yn,On+Xt)!==Mn(nn,Xt)){on=!1;break}if(on)return On}return-1}ut.prototype.includes=function(nn,sn,hn){return this.indexOf(nn,sn,hn)!==-1},ut.prototype.indexOf=function(nn,sn,hn){return Wt(this,nn,sn,hn,!0)},ut.prototype.lastIndexOf=function(nn,sn,hn){return Wt(this,nn,sn,hn,!1)};function Vt(yn,nn,sn,hn){sn=Number(sn)||0;var Cn=yn.length-sn;hn?(hn=Number(hn),hn>Cn&&(hn=Cn)):hn=Cn;var $n=nn.length;hn>$n/2&&(hn=$n/2);for(var gn=0;gn<hn;++gn){var mn=parseInt(nn.substr(gn*2,2),16);if(wn(mn))return gn;yn[sn+gn]=mn}return gn}function Yt(yn,nn,sn,hn){return cn(pn(nn,yn.length-sn),yn,sn,hn)}function jt(yn,nn,sn,hn){return cn(vn(nn),yn,sn,hn)}function kt(yn,nn,sn,hn){return cn(dn(nn),yn,sn,hn)}function zt(yn,nn,sn,hn){return cn(En(nn,yn.length-sn),yn,sn,hn)}ut.prototype.write=function(nn,sn,hn,Cn){if(sn===void 0)Cn="utf8",hn=this.length,sn=0;else if(hn===void 0&&typeof sn=="string")Cn=sn,hn=this.length,sn=0;else if(isFinite(sn))sn=sn>>>0,isFinite(hn)?(hn=hn>>>0,Cn===void 0&&(Cn="utf8")):(Cn=hn,hn=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var $n=this.length-sn;if((hn===void 0||hn>$n)&&(hn=$n),nn.length>0&&(hn<0||sn<0)||sn>this.length)throw new RangeError("Attempt to write outside buffer bounds");Cn||(Cn="utf8");for(var gn=!1;;)switch(Cn){case"hex":return Vt(this,nn,sn,hn);case"utf8":case"utf-8":return Yt(this,nn,sn,hn);case"ascii":case"latin1":case"binary":return jt(this,nn,sn,hn);case"base64":return kt(this,nn,sn,hn);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zt(this,nn,sn,hn);default:if(gn)throw new TypeError("Unknown encoding: "+Cn);Cn=(""+Cn).toLowerCase(),gn=!0}},ut.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Nt(yn,nn,sn){return nn===0&&sn===yn.length?tt.fromByteArray(yn):tt.fromByteArray(yn.slice(nn,sn))}function Mt(yn,nn,sn){sn=Math.min(yn.length,sn);for(var hn=[],Cn=nn;Cn<sn;){var $n=yn[Cn],gn=null,mn=$n>239?4:$n>223?3:$n>191?2:1;if(Cn+mn<=sn){var Mn,On,Dn,on;switch(mn){case 1:$n<128&&(gn=$n);break;case 2:Mn=yn[Cn+1],(Mn&192)===128&&(on=($n&31)<<6|Mn&63,on>127&&(gn=on));break;case 3:Mn=yn[Cn+1],On=yn[Cn+2],(Mn&192)===128&&(On&192)===128&&(on=($n&15)<<12|(Mn&63)<<6|On&63,on>2047&&(on<55296||on>57343)&&(gn=on));break;case 4:Mn=yn[Cn+1],On=yn[Cn+2],Dn=yn[Cn+3],(Mn&192)===128&&(On&192)===128&&(Dn&192)===128&&(on=($n&15)<<18|(Mn&63)<<12|(On&63)<<6|Dn&63,on>65535&&on<1114112&&(gn=on))}}gn===null?(gn=65533,mn=1):gn>65535&&(gn-=65536,hn.push(gn>>>10&1023|55296),gn=56320|gn&1023),hn.push(gn),Cn+=mn}return Ht(hn)}var Lt=4096;function Ht(yn){var nn=yn.length;if(nn<=Lt)return String.fromCharCode.apply(String,yn);for(var sn="",hn=0;hn<nn;)sn+=String.fromCharCode.apply(String,yn.slice(hn,hn+=Lt));return sn}function Qt(yn,nn,sn){var hn="";sn=Math.min(yn.length,sn);for(var Cn=nn;Cn<sn;++Cn)hn+=String.fromCharCode(yn[Cn]&127);return hn}function Ut(yn,nn,sn){var hn="";sn=Math.min(yn.length,sn);for(var Cn=nn;Cn<sn;++Cn)hn+=String.fromCharCode(yn[Cn]);return hn}function Bt(yn,nn,sn){var hn=yn.length;(!nn||nn<0)&&(nn=0),(!sn||sn<0||sn>hn)&&(sn=hn);for(var Cn="",$n=nn;$n<sn;++$n)Cn+=Ln[yn[$n]];return Cn}function Kt(yn,nn,sn){for(var hn=yn.slice(nn,sn),Cn="",$n=0;$n<hn.length-1;$n+=2)Cn+=String.fromCharCode(hn[$n]+hn[$n+1]*256);return Cn}ut.prototype.slice=function(nn,sn){var hn=this.length;nn=~~nn,sn=sn===void 0?hn:~~sn,nn<0?(nn+=hn,nn<0&&(nn=0)):nn>hn&&(nn=hn),sn<0?(sn+=hn,sn<0&&(sn=0)):sn>hn&&(sn=hn),sn<nn&&(sn=nn);var Cn=this.subarray(nn,sn);return Object.setPrototypeOf(Cn,ut.prototype),Cn};function Gt(yn,nn,sn){if(yn%1!==0||yn<0)throw new RangeError("offset is not uint");if(yn+nn>sn)throw new RangeError("Trying to access beyond buffer length")}ut.prototype.readUintLE=ut.prototype.readUIntLE=function(nn,sn,hn){nn=nn>>>0,sn=sn>>>0,hn||Gt(nn,sn,this.length);for(var Cn=this[nn],$n=1,gn=0;++gn<sn&&($n*=256);)Cn+=this[nn+gn]*$n;return Cn},ut.prototype.readUintBE=ut.prototype.readUIntBE=function(nn,sn,hn){nn=nn>>>0,sn=sn>>>0,hn||Gt(nn,sn,this.length);for(var Cn=this[nn+--sn],$n=1;sn>0&&($n*=256);)Cn+=this[nn+--sn]*$n;return Cn},ut.prototype.readUint8=ut.prototype.readUInt8=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,1,this.length),this[nn]},ut.prototype.readUint16LE=ut.prototype.readUInt16LE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,2,this.length),this[nn]|this[nn+1]<<8},ut.prototype.readUint16BE=ut.prototype.readUInt16BE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,2,this.length),this[nn]<<8|this[nn+1]},ut.prototype.readUint32LE=ut.prototype.readUInt32LE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,4,this.length),(this[nn]|this[nn+1]<<8|this[nn+2]<<16)+this[nn+3]*16777216},ut.prototype.readUint32BE=ut.prototype.readUInt32BE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,4,this.length),this[nn]*16777216+(this[nn+1]<<16|this[nn+2]<<8|this[nn+3])},ut.prototype.readIntLE=function(nn,sn,hn){nn=nn>>>0,sn=sn>>>0,hn||Gt(nn,sn,this.length);for(var Cn=this[nn],$n=1,gn=0;++gn<sn&&($n*=256);)Cn+=this[nn+gn]*$n;return $n*=128,Cn>=$n&&(Cn-=Math.pow(2,8*sn)),Cn},ut.prototype.readIntBE=function(nn,sn,hn){nn=nn>>>0,sn=sn>>>0,hn||Gt(nn,sn,this.length);for(var Cn=sn,$n=1,gn=this[nn+--Cn];Cn>0&&($n*=256);)gn+=this[nn+--Cn]*$n;return $n*=128,gn>=$n&&(gn-=Math.pow(2,8*sn)),gn},ut.prototype.readInt8=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,1,this.length),this[nn]&128?(255-this[nn]+1)*-1:this[nn]},ut.prototype.readInt16LE=function(nn,sn){nn=nn>>>0,sn||Gt(nn,2,this.length);var hn=this[nn]|this[nn+1]<<8;return hn&32768?hn|4294901760:hn},ut.prototype.readInt16BE=function(nn,sn){nn=nn>>>0,sn||Gt(nn,2,this.length);var hn=this[nn+1]|this[nn]<<8;return hn&32768?hn|4294901760:hn},ut.prototype.readInt32LE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,4,this.length),this[nn]|this[nn+1]<<8|this[nn+2]<<16|this[nn+3]<<24},ut.prototype.readInt32BE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,4,this.length),this[nn]<<24|this[nn+1]<<16|this[nn+2]<<8|this[nn+3]},ut.prototype.readFloatLE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,4,this.length),rt.read(this,nn,!0,23,4)},ut.prototype.readFloatBE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,4,this.length),rt.read(this,nn,!1,23,4)},ut.prototype.readDoubleLE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,8,this.length),rt.read(this,nn,!0,52,8)},ut.prototype.readDoubleBE=function(nn,sn){return nn=nn>>>0,sn||Gt(nn,8,this.length),rt.read(this,nn,!1,52,8)};function Pt(yn,nn,sn,hn,Cn,$n){if(!ut.isBuffer(yn))throw new TypeError('"buffer" argument must be a Buffer instance');if(nn>Cn||nn<$n)throw new RangeError('"value" argument is out of bounds');if(sn+hn>yn.length)throw new RangeError("Index out of range")}ut.prototype.writeUintLE=ut.prototype.writeUIntLE=function(nn,sn,hn,Cn){if(nn=+nn,sn=sn>>>0,hn=hn>>>0,!Cn){var $n=Math.pow(2,8*hn)-1;Pt(this,nn,sn,hn,$n,0)}var gn=1,mn=0;for(this[sn]=nn&255;++mn<hn&&(gn*=256);)this[sn+mn]=nn/gn&255;return sn+hn},ut.prototype.writeUintBE=ut.prototype.writeUIntBE=function(nn,sn,hn,Cn){if(nn=+nn,sn=sn>>>0,hn=hn>>>0,!Cn){var $n=Math.pow(2,8*hn)-1;Pt(this,nn,sn,hn,$n,0)}var gn=hn-1,mn=1;for(this[sn+gn]=nn&255;--gn>=0&&(mn*=256);)this[sn+gn]=nn/mn&255;return sn+hn},ut.prototype.writeUint8=ut.prototype.writeUInt8=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,1,255,0),this[sn]=nn&255,sn+1},ut.prototype.writeUint16LE=ut.prototype.writeUInt16LE=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,2,65535,0),this[sn]=nn&255,this[sn+1]=nn>>>8,sn+2},ut.prototype.writeUint16BE=ut.prototype.writeUInt16BE=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,2,65535,0),this[sn]=nn>>>8,this[sn+1]=nn&255,sn+2},ut.prototype.writeUint32LE=ut.prototype.writeUInt32LE=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,4,4294967295,0),this[sn+3]=nn>>>24,this[sn+2]=nn>>>16,this[sn+1]=nn>>>8,this[sn]=nn&255,sn+4},ut.prototype.writeUint32BE=ut.prototype.writeUInt32BE=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,4,4294967295,0),this[sn]=nn>>>24,this[sn+1]=nn>>>16,this[sn+2]=nn>>>8,this[sn+3]=nn&255,sn+4},ut.prototype.writeIntLE=function(nn,sn,hn,Cn){if(nn=+nn,sn=sn>>>0,!Cn){var $n=Math.pow(2,8*hn-1);Pt(this,nn,sn,hn,$n-1,-$n)}var gn=0,mn=1,Mn=0;for(this[sn]=nn&255;++gn<hn&&(mn*=256);)nn<0&&Mn===0&&this[sn+gn-1]!==0&&(Mn=1),this[sn+gn]=(nn/mn>>0)-Mn&255;return sn+hn},ut.prototype.writeIntBE=function(nn,sn,hn,Cn){if(nn=+nn,sn=sn>>>0,!Cn){var $n=Math.pow(2,8*hn-1);Pt(this,nn,sn,hn,$n-1,-$n)}var gn=hn-1,mn=1,Mn=0;for(this[sn+gn]=nn&255;--gn>=0&&(mn*=256);)nn<0&&Mn===0&&this[sn+gn+1]!==0&&(Mn=1),this[sn+gn]=(nn/mn>>0)-Mn&255;return sn+hn},ut.prototype.writeInt8=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,1,127,-128),nn<0&&(nn=255+nn+1),this[sn]=nn&255,sn+1},ut.prototype.writeInt16LE=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,2,32767,-32768),this[sn]=nn&255,this[sn+1]=nn>>>8,sn+2},ut.prototype.writeInt16BE=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,2,32767,-32768),this[sn]=nn>>>8,this[sn+1]=nn&255,sn+2},ut.prototype.writeInt32LE=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,4,2147483647,-2147483648),this[sn]=nn&255,this[sn+1]=nn>>>8,this[sn+2]=nn>>>16,this[sn+3]=nn>>>24,sn+4},ut.prototype.writeInt32BE=function(nn,sn,hn){return nn=+nn,sn=sn>>>0,hn||Pt(this,nn,sn,4,2147483647,-2147483648),nn<0&&(nn=4294967295+nn+1),this[sn]=nn>>>24,this[sn+1]=nn>>>16,this[sn+2]=nn>>>8,this[sn+3]=nn&255,sn+4};function Zt(yn,nn,sn,hn,Cn,$n){if(sn+hn>yn.length)throw new RangeError("Index out of range");if(sn<0)throw new RangeError("Index out of range")}function an(yn,nn,sn,hn,Cn){return nn=+nn,sn=sn>>>0,Cn||Zt(yn,nn,sn,4),rt.write(yn,nn,sn,hn,23,4),sn+4}ut.prototype.writeFloatLE=function(nn,sn,hn){return an(this,nn,sn,!0,hn)},ut.prototype.writeFloatBE=function(nn,sn,hn){return an(this,nn,sn,!1,hn)};function Jt(yn,nn,sn,hn,Cn){return nn=+nn,sn=sn>>>0,Cn||Zt(yn,nn,sn,8),rt.write(yn,nn,sn,hn,52,8),sn+8}ut.prototype.writeDoubleLE=function(nn,sn,hn){return Jt(this,nn,sn,!0,hn)},ut.prototype.writeDoubleBE=function(nn,sn,hn){return Jt(this,nn,sn,!1,hn)},ut.prototype.copy=function(nn,sn,hn,Cn){if(!ut.isBuffer(nn))throw new TypeError("argument should be a Buffer");if(hn||(hn=0),!Cn&&Cn!==0&&(Cn=this.length),sn>=nn.length&&(sn=nn.length),sn||(sn=0),Cn>0&&Cn<hn&&(Cn=hn),Cn===hn||nn.length===0||this.length===0)return 0;if(sn<0)throw new RangeError("targetStart out of bounds");if(hn<0||hn>=this.length)throw new RangeError("Index out of range");if(Cn<0)throw new RangeError("sourceEnd out of bounds");Cn>this.length&&(Cn=this.length),nn.length-sn<Cn-hn&&(Cn=nn.length-sn+hn);var $n=Cn-hn;return this===nn&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(sn,hn,Cn):Uint8Array.prototype.set.call(nn,this.subarray(hn,Cn),sn),$n},ut.prototype.fill=function(nn,sn,hn,Cn){if(typeof nn=="string"){if(typeof sn=="string"?(Cn=sn,sn=0,hn=this.length):typeof hn=="string"&&(Cn=hn,hn=this.length),Cn!==void 0&&typeof Cn!="string")throw new TypeError("encoding must be a string");if(typeof Cn=="string"&&!ut.isEncoding(Cn))throw new TypeError("Unknown encoding: "+Cn);if(nn.length===1){var $n=nn.charCodeAt(0);(Cn==="utf8"&&$n<128||Cn==="latin1")&&(nn=$n)}}else typeof nn=="number"?nn=nn&255:typeof nn=="boolean"&&(nn=Number(nn));if(sn<0||this.length<sn||this.length<hn)throw new RangeError("Out of range index");if(hn<=sn)return this;sn=sn>>>0,hn=hn===void 0?this.length:hn>>>0,nn||(nn=0);var gn;if(typeof nn=="number")for(gn=sn;gn<hn;++gn)this[gn]=nn;else{var mn=ut.isBuffer(nn)?nn:ut.from(nn,Cn),Mn=mn.length;if(Mn===0)throw new TypeError('The value "'+nn+'" is invalid for argument "value"');for(gn=0;gn<hn-sn;++gn)this[gn+sn]=mn[gn%Mn]}return this};var rn=/[^+/0-9A-Za-z-_]/g;function fn(yn){if(yn=yn.split("=")[0],yn=yn.trim().replace(rn,""),yn.length<2)return"";for(;yn.length%4!==0;)yn=yn+"=";return yn}function pn(yn,nn){nn=nn||1/0;for(var sn,hn=yn.length,Cn=null,$n=[],gn=0;gn<hn;++gn){if(sn=yn.charCodeAt(gn),sn>55295&&sn<57344){if(!Cn){if(sn>56319){(nn-=3)>-1&&$n.push(239,191,189);continue}else if(gn+1===hn){(nn-=3)>-1&&$n.push(239,191,189);continue}Cn=sn;continue}if(sn<56320){(nn-=3)>-1&&$n.push(239,191,189),Cn=sn;continue}sn=(Cn-55296<<10|sn-56320)+65536}else Cn&&(nn-=3)>-1&&$n.push(239,191,189);if(Cn=null,sn<128){if((nn-=1)<0)break;$n.push(sn)}else if(sn<2048){if((nn-=2)<0)break;$n.push(sn>>6|192,sn&63|128)}else if(sn<65536){if((nn-=3)<0)break;$n.push(sn>>12|224,sn>>6&63|128,sn&63|128)}else if(sn<1114112){if((nn-=4)<0)break;$n.push(sn>>18|240,sn>>12&63|128,sn>>6&63|128,sn&63|128)}else throw new Error("Invalid code point")}return $n}function vn(yn){for(var nn=[],sn=0;sn<yn.length;++sn)nn.push(yn.charCodeAt(sn)&255);return nn}function En(yn,nn){for(var sn,hn,Cn,$n=[],gn=0;gn<yn.length&&!((nn-=2)<0);++gn)sn=yn.charCodeAt(gn),hn=sn>>8,Cn=sn%256,$n.push(Cn),$n.push(hn);return $n}function dn(yn){return tt.toByteArray(fn(yn))}function cn(yn,nn,sn,hn){for(var Cn=0;Cn<hn&&!(Cn+sn>=nn.length||Cn>=yn.length);++Cn)nn[Cn+sn]=yn[Cn];return Cn}function _n(yn,nn){return yn instanceof nn||yn!=null&&yn.constructor!=null&&yn.constructor.name!=null&&yn.constructor.name===nn.name}function wn(yn){return yn!==yn}var Ln=function(){for(var yn="0123456789abcdef",nn=new Array(256),sn=0;sn<16;++sn)for(var hn=sn*16,Cn=0;Cn<16;++Cn)nn[hn+Cn]=yn[sn]+yn[Cn];return nn}()})(buffer);var BufferUtil$2=typedarrayBuffer,Polynomial=polynomial,Buffer$1=buffer.Buffer;function ReedSolomonEncoder$1(it){this.genPoly=void 0,this.degree=it,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function it(tt){this.degree=tt,this.genPoly=Polynomial.generateECPolynomial(this.degree)},ReedSolomonEncoder$1.prototype.encode=function it(tt){if(!this.genPoly)throw new Error("Encoder not initialized");var rt=BufferUtil$2.alloc(this.degree),at=Buffer$1.concat([tt,rt],tt.length+this.degree),st=Polynomial.mod(at,this.genPoly),ot=this.degree-st.length;if(ot>0){var lt=BufferUtil$2.alloc(this.degree);return st.copy(lt,ot),lt}return st};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function it(tt){return!isNaN(tt)&&tt>=1&&tt<=40};var regex={},numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+",kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");var byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g"),regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),regex.BYTE=new RegExp(byte,"g"),regex.NUMERIC=new RegExp(numeric,"g"),regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");var TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function it(tt){return TEST_KANJI.test(tt)},regex.testNumeric=function it(tt){return TEST_NUMERIC.test(tt)},regex.testAlphanumeric=function it(tt){return TEST_ALPHANUMERIC.test(tt)},function(it){var tt=versionCheck,rt=regex;it.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},it.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},it.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},it.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},it.MIXED={bit:-1},it.getCharCountIndicator=function(ot,lt){if(!ot.ccBits)throw new Error("Invalid mode: "+ot);if(!tt.isValid(lt))throw new Error("Invalid version: "+lt);return lt>=1&&lt<10?ot.ccBits[0]:lt<27?ot.ccBits[1]:ot.ccBits[2]},it.getBestModeForData=function(ot){return rt.testNumeric(ot)?it.NUMERIC:rt.testAlphanumeric(ot)?it.ALPHANUMERIC:rt.testKanji(ot)?it.KANJI:it.BYTE},it.toString=function(ot){if(ot&&ot.id)return ot.id;throw new Error("Invalid mode")},it.isValid=function(ot){return ot&&ot.bit&&ot.ccBits};function at(st){if(typeof st!="string")throw new Error("Param is not a string");var ot=st.toLowerCase();switch(ot){case"numeric":return it.NUMERIC;case"alphanumeric":return it.ALPHANUMERIC;case"kanji":return it.KANJI;case"byte":return it.BYTE;default:throw new Error("Unknown mode: "+st)}}it.from=function(ot,lt){if(it.isValid(ot))return ot;try{return at(ot)}catch{return lt}}}(mode),function(it){var tt=utils$1,rt=errorCorrectionCode,at=errorCorrectionLevel,st=mode,ot=versionCheck,lt=isarray,ut=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,ht=tt.getBCHDigit(ut);function mt(xt,Et,Tt){for(var wt=1;wt<=40;wt++)if(Et<=it.getCapacity(wt,Tt,xt))return wt}function bt(xt,Et){return st.getCharCountIndicator(xt,Et)+4}function vt(xt,Et){var Tt=0;return xt.forEach(function(wt){var Ct=bt(wt.mode,Et);Tt+=Ct+wt.getBitsLength()}),Tt}function At(xt,Et){for(var Tt=1;Tt<=40;Tt++){var wt=vt(xt,Tt);if(wt<=it.getCapacity(Tt,Et,st.MIXED))return Tt}}it.from=function(Et,Tt){return ot.isValid(Et)?parseInt(Et,10):Tt},it.getCapacity=function(Et,Tt,wt){if(!ot.isValid(Et))throw new Error("Invalid QR Code version");typeof wt>"u"&&(wt=st.BYTE);var Ct=tt.getSymbolTotalCodewords(Et),It=rt.getTotalCodewordsCount(Et,Tt),St=(Ct-It)*8;if(wt===st.MIXED)return St;var Rt=St-bt(wt,Et);switch(wt){case st.NUMERIC:return Math.floor(Rt/10*3);case st.ALPHANUMERIC:return Math.floor(Rt/11*2);case st.KANJI:return Math.floor(Rt/13);case st.BYTE:default:return Math.floor(Rt/8)}},it.getBestVersionForData=function(Et,Tt){var wt,Ct=at.from(Tt,at.M);if(lt(Et)){if(Et.length>1)return At(Et,Ct);if(Et.length===0)return 1;wt=Et[0]}else wt=Et;return mt(wt.mode,wt.getLength(),Ct)},it.getEncodedBits=function(Et){if(!ot.isValid(Et)||Et<7)throw new Error("Invalid QR Code version");for(var Tt=Et<<12;tt.getBCHDigit(Tt)-ht>=0;)Tt^=ut<<tt.getBCHDigit(Tt)-ht;return Et<<12|Tt}}(version);var formatInfo={},Utils$3=utils$1,G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function it(tt,rt){for(var at=tt.bit<<3|rt,st=at<<10;Utils$3.getBCHDigit(st)-G15_BCH>=0;)st^=G15<<Utils$3.getBCHDigit(st)-G15_BCH;return(at<<10|st)^G15_MASK};var segments={},Mode$4=mode;function NumericData(it){this.mode=Mode$4.NUMERIC,this.data=it.toString()}NumericData.getBitsLength=function it(tt){return 10*Math.floor(tt/3)+(tt%3?tt%3*3+1:0)},NumericData.prototype.getLength=function it(){return this.data.length},NumericData.prototype.getBitsLength=function it(){return NumericData.getBitsLength(this.data.length)},NumericData.prototype.write=function it(tt){var rt,at,st;for(rt=0;rt+3<=this.data.length;rt+=3)at=this.data.substr(rt,3),st=parseInt(at,10),tt.put(st,10);var ot=this.data.length-rt;ot>0&&(at=this.data.substr(rt),st=parseInt(at,10),tt.put(st,ot*3+1))};var numericData=NumericData,Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(it){this.mode=Mode$3.ALPHANUMERIC,this.data=it}AlphanumericData.getBitsLength=function it(tt){return 11*Math.floor(tt/2)+6*(tt%2)},AlphanumericData.prototype.getLength=function it(){return this.data.length},AlphanumericData.prototype.getBitsLength=function it(){return AlphanumericData.getBitsLength(this.data.length)},AlphanumericData.prototype.write=function it(tt){var rt;for(rt=0;rt+2<=this.data.length;rt+=2){var at=ALPHA_NUM_CHARS.indexOf(this.data[rt])*45;at+=ALPHA_NUM_CHARS.indexOf(this.data[rt+1]),tt.put(at,11)}this.data.length%2&&tt.put(ALPHA_NUM_CHARS.indexOf(this.data[rt]),6)};var alphanumericData=AlphanumericData,BufferUtil$1=typedarrayBuffer,Mode$2=mode;function ByteData(it){this.mode=Mode$2.BYTE,this.data=BufferUtil$1.from(it)}ByteData.getBitsLength=function it(tt){return tt*8},ByteData.prototype.getLength=function it(){return this.data.length},ByteData.prototype.getBitsLength=function it(){return ByteData.getBitsLength(this.data.length)},ByteData.prototype.write=function(it){for(var tt=0,rt=this.data.length;tt<rt;tt++)it.put(this.data[tt],8)};var byteData=ByteData,Mode$1=mode,Utils$2=utils$1;function KanjiData(it){this.mode=Mode$1.KANJI,this.data=it}KanjiData.getBitsLength=function it(tt){return tt*13},KanjiData.prototype.getLength=function it(){return this.data.length},KanjiData.prototype.getBitsLength=function it(){return KanjiData.getBitsLength(this.data.length)},KanjiData.prototype.write=function(it){var tt;for(tt=0;tt<this.data.length;tt++){var rt=Utils$2.toSJIS(this.data[tt]);if(rt>=33088&&rt<=40956)rt-=33088;else if(rt>=57408&&rt<=60351)rt-=49472;else throw new Error("Invalid SJIS character: "+this.data[tt]+`
Make sure your charset is UTF-8`);rt=(rt>>>8&255)*192+(rt&255),it.put(rt,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(it){var tt={single_source_shortest_paths:function(rt,at,st){var ot={},lt={};lt[at]=0;var ut=tt.PriorityQueue.make();ut.push(at,0);for(var ht,mt,bt,vt,At,xt,Et,Tt,wt;!ut.empty();){ht=ut.pop(),mt=ht.value,vt=ht.cost,At=rt[mt]||{};for(bt in At)At.hasOwnProperty(bt)&&(xt=At[bt],Et=vt+xt,Tt=lt[bt],wt=typeof lt[bt]>"u",(wt||Tt>Et)&&(lt[bt]=Et,ut.push(bt,Et),ot[bt]=mt))}if(typeof st<"u"&&typeof lt[st]>"u"){var Ct=["Could not find a path from ",at," to ",st,"."].join("");throw new Error(Ct)}return ot},extract_shortest_path_from_predecessor_list:function(rt,at){for(var st=[],ot=at;ot;)st.push(ot),rt[ot],ot=rt[ot];return st.reverse(),st},find_path:function(rt,at,st){var ot=tt.single_source_shortest_paths(rt,at,st);return tt.extract_shortest_path_from_predecessor_list(ot,st)},PriorityQueue:{make:function(rt){var at=tt.PriorityQueue,st={},ot;rt=rt||{};for(ot in at)at.hasOwnProperty(ot)&&(st[ot]=at[ot]);return st.queue=[],st.sorter=rt.sorter||at.default_sorter,st},default_sorter:function(rt,at){return rt.cost-at.cost},push:function(rt,at){var st={value:rt,cost:at};this.queue.push(st),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};it.exports=tt})(dijkstra),function(it){var tt=mode,rt=numericData,at=alphanumericData,st=byteData,ot=kanjiData,lt=regex,ut=utils$1,ht=dijkstra.exports;function mt(Ct){return unescape(encodeURIComponent(Ct)).length}function bt(Ct,It,St){for(var Rt=[],Dt;(Dt=Ct.exec(St))!==null;)Rt.push({data:Dt[0],index:Dt.index,mode:It,length:Dt[0].length});return Rt}function vt(Ct){var It=bt(lt.NUMERIC,tt.NUMERIC,Ct),St=bt(lt.ALPHANUMERIC,tt.ALPHANUMERIC,Ct),Rt,Dt;ut.isKanjiModeEnabled()?(Rt=bt(lt.BYTE,tt.BYTE,Ct),Dt=bt(lt.KANJI,tt.KANJI,Ct)):(Rt=bt(lt.BYTE_KANJI,tt.BYTE,Ct),Dt=[]);var Wt=It.concat(St,Rt,Dt);return Wt.sort(function(qt,Vt){return qt.index-Vt.index}).map(function(qt){return{data:qt.data,mode:qt.mode,length:qt.length}})}function At(Ct,It){switch(It){case tt.NUMERIC:return rt.getBitsLength(Ct);case tt.ALPHANUMERIC:return at.getBitsLength(Ct);case tt.KANJI:return ot.getBitsLength(Ct);case tt.BYTE:return st.getBitsLength(Ct)}}function xt(Ct){return Ct.reduce(function(It,St){var Rt=It.length-1>=0?It[It.length-1]:null;return Rt&&Rt.mode===St.mode?(It[It.length-1].data+=St.data,It):(It.push(St),It)},[])}function Et(Ct){for(var It=[],St=0;St<Ct.length;St++){var Rt=Ct[St];switch(Rt.mode){case tt.NUMERIC:It.push([Rt,{data:Rt.data,mode:tt.ALPHANUMERIC,length:Rt.length},{data:Rt.data,mode:tt.BYTE,length:Rt.length}]);break;case tt.ALPHANUMERIC:It.push([Rt,{data:Rt.data,mode:tt.BYTE,length:Rt.length}]);break;case tt.KANJI:It.push([Rt,{data:Rt.data,mode:tt.BYTE,length:mt(Rt.data)}]);break;case tt.BYTE:It.push([{data:Rt.data,mode:tt.BYTE,length:mt(Rt.data)}])}}return It}function Tt(Ct,It){for(var St={},Rt={start:{}},Dt=["start"],Wt=0;Wt<Ct.length;Wt++){for(var qt=Ct[Wt],Vt=[],Yt=0;Yt<qt.length;Yt++){var jt=qt[Yt],kt=""+Wt+Yt;Vt.push(kt),St[kt]={node:jt,lastCount:0},Rt[kt]={};for(var zt=0;zt<Dt.length;zt++){var Nt=Dt[zt];St[Nt]&&St[Nt].node.mode===jt.mode?(Rt[Nt][kt]=At(St[Nt].lastCount+jt.length,jt.mode)-At(St[Nt].lastCount,jt.mode),St[Nt].lastCount+=jt.length):(St[Nt]&&(St[Nt].lastCount=jt.length),Rt[Nt][kt]=At(jt.length,jt.mode)+4+tt.getCharCountIndicator(jt.mode,It))}}Dt=Vt}for(zt=0;zt<Dt.length;zt++)Rt[Dt[zt]].end=0;return{map:Rt,table:St}}function wt(Ct,It){var St,Rt=tt.getBestModeForData(Ct);if(St=tt.from(It,Rt),St!==tt.BYTE&&St.bit<Rt.bit)throw new Error('"'+Ct+'" cannot be encoded with mode '+tt.toString(St)+`.
 Suggested mode is: `+tt.toString(Rt));switch(St===tt.KANJI&&!ut.isKanjiModeEnabled()&&(St=tt.BYTE),St){case tt.NUMERIC:return new rt(Ct);case tt.ALPHANUMERIC:return new at(Ct);case tt.KANJI:return new ot(Ct);case tt.BYTE:return new st(Ct)}}it.fromArray=function(It){return It.reduce(function(St,Rt){return typeof Rt=="string"?St.push(wt(Rt,null)):Rt.data&&St.push(wt(Rt.data,Rt.mode)),St},[])},it.fromString=function(It,St){for(var Rt=vt(It,ut.isKanjiModeEnabled()),Dt=Et(Rt),Wt=Tt(Dt,St),qt=ht.find_path(Wt.map,"start","end"),Vt=[],Yt=1;Yt<qt.length-1;Yt++)Vt.push(Wt.table[qt[Yt]].node);return it.fromArray(xt(Vt))},it.rawSplit=function(It){return it.fromArray(vt(It,ut.isKanjiModeEnabled()))}}(segments);var BufferUtil=typedarrayBuffer,Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments,isArray$2=isarray;function setupFinderPattern(it,tt){for(var rt=it.size,at=FinderPattern.getPositions(tt),st=0;st<at.length;st++)for(var ot=at[st][0],lt=at[st][1],ut=-1;ut<=7;ut++)if(!(ot+ut<=-1||rt<=ot+ut))for(var ht=-1;ht<=7;ht++)lt+ht<=-1||rt<=lt+ht||(ut>=0&&ut<=6&&(ht===0||ht===6)||ht>=0&&ht<=6&&(ut===0||ut===6)||ut>=2&&ut<=4&&ht>=2&&ht<=4?it.set(ot+ut,lt+ht,!0,!0):it.set(ot+ut,lt+ht,!1,!0))}function setupTimingPattern(it){for(var tt=it.size,rt=8;rt<tt-8;rt++){var at=rt%2===0;it.set(rt,6,at,!0),it.set(6,rt,at,!0)}}function setupAlignmentPattern(it,tt){for(var rt=AlignmentPattern.getPositions(tt),at=0;at<rt.length;at++)for(var st=rt[at][0],ot=rt[at][1],lt=-2;lt<=2;lt++)for(var ut=-2;ut<=2;ut++)lt===-2||lt===2||ut===-2||ut===2||lt===0&&ut===0?it.set(st+lt,ot+ut,!0,!0):it.set(st+lt,ot+ut,!1,!0)}function setupVersionInfo(it,tt){for(var rt=it.size,at=Version.getEncodedBits(tt),st,ot,lt,ut=0;ut<18;ut++)st=Math.floor(ut/3),ot=ut%3+rt-8-3,lt=(at>>ut&1)===1,it.set(st,ot,lt,!0),it.set(ot,st,lt,!0)}function setupFormatInfo(it,tt,rt){var at=it.size,st=FormatInfo.getEncodedBits(tt,rt),ot,lt;for(ot=0;ot<15;ot++)lt=(st>>ot&1)===1,ot<6?it.set(ot,8,lt,!0):ot<8?it.set(ot+1,8,lt,!0):it.set(at-15+ot,8,lt,!0),ot<8?it.set(8,at-ot-1,lt,!0):ot<9?it.set(8,15-ot-1+1,lt,!0):it.set(8,15-ot-1,lt,!0);it.set(at-8,8,1,!0)}function setupData(it,tt){for(var rt=it.size,at=-1,st=rt-1,ot=7,lt=0,ut=rt-1;ut>0;ut-=2)for(ut===6&&ut--;;){for(var ht=0;ht<2;ht++)if(!it.isReserved(st,ut-ht)){var mt=!1;lt<tt.length&&(mt=(tt[lt]>>>ot&1)===1),it.set(st,ut-ht,mt),ot--,ot===-1&&(lt++,ot=7)}if(st+=at,st<0||rt<=st){st-=at,at=-at;break}}}function createData(it,tt,rt){var at=new BitBuffer;rt.forEach(function(mt){at.put(mt.mode.bit,4),at.put(mt.getLength(),Mode.getCharCountIndicator(mt.mode,it)),mt.write(at)});var st=Utils$1.getSymbolTotalCodewords(it),ot=ECCode.getTotalCodewordsCount(it,tt),lt=(st-ot)*8;for(at.getLengthInBits()+4<=lt&&at.put(0,4);at.getLengthInBits()%8!==0;)at.putBit(0);for(var ut=(lt-at.getLengthInBits())/8,ht=0;ht<ut;ht++)at.put(ht%2?17:236,8);return createCodewords(at,it,tt)}function createCodewords(it,tt,rt){for(var at=Utils$1.getSymbolTotalCodewords(tt),st=ECCode.getTotalCodewordsCount(tt,rt),ot=at-st,lt=ECCode.getBlocksCount(tt,rt),ut=at%lt,ht=lt-ut,mt=Math.floor(at/lt),bt=Math.floor(ot/lt),vt=bt+1,At=mt-bt,xt=new ReedSolomonEncoder(At),Et=0,Tt=new Array(lt),wt=new Array(lt),Ct=0,It=BufferUtil.from(it.buffer),St=0;St<lt;St++){var Rt=St<ht?bt:vt;Tt[St]=It.slice(Et,Et+Rt),wt[St]=xt.encode(Tt[St]),Et+=Rt,Ct=Math.max(Ct,Rt)}var Dt=BufferUtil.alloc(at),Wt=0,qt,Vt;for(qt=0;qt<Ct;qt++)for(Vt=0;Vt<lt;Vt++)qt<Tt[Vt].length&&(Dt[Wt++]=Tt[Vt][qt]);for(qt=0;qt<At;qt++)for(Vt=0;Vt<lt;Vt++)Dt[Wt++]=wt[Vt][qt];return Dt}function createSymbol(it,tt,rt,at){var st;if(isArray$2(it))st=Segments.fromArray(it);else if(typeof it=="string"){var ot=tt;if(!ot){var lt=Segments.rawSplit(it);ot=Version.getBestVersionForData(lt,rt)}st=Segments.fromString(it,ot||40)}else throw new Error("Invalid data");var ut=Version.getBestVersionForData(st,rt);if(!ut)throw new Error("The amount of data is too big to be stored in a QR Code");if(!tt)tt=ut;else if(tt<ut)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ut+`.
`);var ht=createData(tt,rt,st),mt=Utils$1.getSymbolSize(tt),bt=new BitMatrix(mt);return setupFinderPattern(bt,tt),setupTimingPattern(bt),setupAlignmentPattern(bt,tt),setupFormatInfo(bt,rt,0),tt>=7&&setupVersionInfo(bt,tt),setupData(bt,ht),isNaN(at)&&(at=MaskPattern.getBestMask(bt,setupFormatInfo.bind(null,bt,rt))),MaskPattern.applyMask(at,bt),setupFormatInfo(bt,rt,at),{modules:bt,version:tt,errorCorrectionLevel:rt,maskPattern:at,segments:st}}qrcode.create=function it(tt,rt){if(typeof tt>"u"||tt==="")throw new Error("No input text");var at=ECLevel.M,st,ot;return typeof rt<"u"&&(at=ECLevel.from(rt.errorCorrectionLevel,ECLevel.M),st=Version.from(rt.version),ot=MaskPattern.from(rt.maskPattern),rt.toSJISFunc&&Utils$1.setToSJISFunction(rt.toSJISFunc)),createSymbol(tt,st,at,ot)};var canvas={},utils={};(function(it){function tt(rt){if(typeof rt=="number"&&(rt=rt.toString()),typeof rt!="string")throw new Error("Color should be defined as hex string");var at=rt.slice().replace("#","").split("");if(at.length<3||at.length===5||at.length>8)throw new Error("Invalid hex color: "+rt);(at.length===3||at.length===4)&&(at=Array.prototype.concat.apply([],at.map(function(ot){return[ot,ot]}))),at.length===6&&at.push("F","F");var st=parseInt(at.join(""),16);return{r:st>>24&255,g:st>>16&255,b:st>>8&255,a:st&255,hex:"#"+at.slice(0,6).join("")}}it.getOptions=function(at){at||(at={}),at.color||(at.color={});var st=typeof at.margin>"u"||at.margin===null||at.margin<0?4:at.margin,ot=at.width&&at.width>=21?at.width:void 0,lt=at.scale||4;return{width:ot,scale:ot?4:lt,margin:st,color:{dark:tt(at.color.dark||"#000000ff"),light:tt(at.color.light||"#ffffffff")},type:at.type,rendererOpts:at.rendererOpts||{}}},it.getScale=function(at,st){return st.width&&st.width>=at+st.margin*2?st.width/(at+st.margin*2):st.scale},it.getImageWidth=function(at,st){var ot=it.getScale(at,st);return Math.floor((at+st.margin*2)*ot)},it.qrToImageData=function(at,st,ot){for(var lt=st.modules.size,ut=st.modules.data,ht=it.getScale(lt,ot),mt=Math.floor((lt+ot.margin*2)*ht),bt=ot.margin*ht,vt=[ot.color.light,ot.color.dark],At=0;At<mt;At++)for(var xt=0;xt<mt;xt++){var Et=(At*mt+xt)*4,Tt=ot.color.light;if(At>=bt&&xt>=bt&&At<mt-bt&&xt<mt-bt){var wt=Math.floor((At-bt)/ht),Ct=Math.floor((xt-bt)/ht);Tt=vt[ut[wt*lt+Ct]?1:0]}at[Et++]=Tt.r,at[Et++]=Tt.g,at[Et++]=Tt.b,at[Et]=Tt.a}}})(utils),function(it){var tt=utils;function rt(st,ot,lt){st.clearRect(0,0,ot.width,ot.height),ot.style||(ot.style={}),ot.height=lt,ot.width=lt,ot.style.height=lt+"px",ot.style.width=lt+"px"}function at(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}it.render=function(ot,lt,ut){var ht=ut,mt=lt;typeof ht>"u"&&(!lt||!lt.getContext)&&(ht=lt,lt=void 0),lt||(mt=at()),ht=tt.getOptions(ht);var bt=tt.getImageWidth(ot.modules.size,ht),vt=mt.getContext("2d"),At=vt.createImageData(bt,bt);return tt.qrToImageData(At.data,ot,ht),rt(vt,mt,bt),vt.putImageData(At,0,0),mt},it.renderToDataURL=function(ot,lt,ut){var ht=ut;typeof ht>"u"&&(!lt||!lt.getContext)&&(ht=lt,lt=void 0),ht||(ht={});var mt=it.render(ot,lt,ht),bt=ht.type||"image/png",vt=ht.rendererOpts||{};return mt.toDataURL(bt,vt.quality)}}(canvas);var svgTag={},Utils=utils;function getColorAttrib(it,tt){var rt=it.a/255,at=tt+'="'+it.hex+'"';return rt<1?at+" "+tt+'-opacity="'+rt.toFixed(2).slice(1)+'"':at}function svgCmd(it,tt,rt){var at=it+tt;return typeof rt<"u"&&(at+=" "+rt),at}function qrToPath(it,tt,rt){for(var at="",st=0,ot=!1,lt=0,ut=0;ut<it.length;ut++){var ht=Math.floor(ut%tt),mt=Math.floor(ut/tt);!ht&&!ot&&(ot=!0),it[ut]?(lt++,ut>0&&ht>0&&it[ut-1]||(at+=ot?svgCmd("M",ht+rt,.5+mt+rt):svgCmd("m",st,0),st=0,ot=!1),ht+1<tt&&it[ut+1]||(at+=svgCmd("h",lt),lt=0)):st++}return at}svgTag.render=function it(tt,rt,at){var st=Utils.getOptions(rt),ot=tt.modules.size,lt=tt.modules.data,ut=ot+st.margin*2,ht=st.color.light.a?"<path "+getColorAttrib(st.color.light,"fill")+' d="M0 0h'+ut+"v"+ut+'H0z"/>':"",mt="<path "+getColorAttrib(st.color.dark,"stroke")+' d="'+qrToPath(lt,ot,st.margin)+'"/>',bt='viewBox="0 0 '+ut+" "+ut+'"',vt=st.width?'width="'+st.width+'" height="'+st.width+'" ':"",At='<svg xmlns="http://www.w3.org/2000/svg" '+vt+bt+' shape-rendering="crispEdges">'+ht+mt+`</svg>
`;return typeof at=="function"&&at(null,At),At};var canPromise=canPromise$1,QRCode$1=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(it,tt,rt,at,st){var ot=[].slice.call(arguments,1),lt=ot.length,ut=typeof ot[lt-1]=="function";if(!ut&&!canPromise())throw new Error("Callback required as last argument");if(ut){if(lt<2)throw new Error("Too few arguments provided");lt===2?(st=rt,rt=tt,tt=at=void 0):lt===3&&(tt.getContext&&typeof st>"u"?(st=at,at=void 0):(st=at,at=rt,rt=tt,tt=void 0))}else{if(lt<1)throw new Error("Too few arguments provided");return lt===1?(rt=tt,tt=at=void 0):lt===2&&!tt.getContext&&(at=rt,rt=tt,tt=void 0),new Promise(function(mt,bt){try{var vt=QRCode$1.create(rt,at);mt(it(vt,tt,at))}catch(At){bt(At)}})}try{var ht=QRCode$1.create(rt,at);st(null,it(ht,tt,at))}catch(mt){st(mt)}}browser.create=QRCode$1.create,browser.toCanvas=renderCanvas.bind(null,CanvasRenderer.render),browser.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL),browser.toString=renderCanvas.bind(null,function(it,tt,rt){return SvgRenderer.render(it,rt)});var toggleSelection=function(){var it=document.getSelection();if(!it.rangeCount)return function(){};for(var tt=document.activeElement,rt=[],at=0;at<it.rangeCount;at++)rt.push(it.getRangeAt(at));switch(tt.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":tt.blur();break;default:tt=null;break}return it.removeAllRanges(),function(){it.type==="Caret"&&it.removeAllRanges(),it.rangeCount||rt.forEach(function(st){it.addRange(st)}),tt&&tt.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(it){var tt=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return it.replace(/#{\s*key\s*}/g,tt)}function copy$2(it,tt){var rt,at,st,ot,lt,ut,ht=!1;tt||(tt={}),rt=tt.debug||!1;try{st=deselectCurrent(),ot=document.createRange(),lt=document.getSelection(),ut=document.createElement("span"),ut.textContent=it,ut.ariaHidden="true",ut.style.all="unset",ut.style.position="fixed",ut.style.top=0,ut.style.clip="rect(0, 0, 0, 0)",ut.style.whiteSpace="pre",ut.style.webkitUserSelect="text",ut.style.MozUserSelect="text",ut.style.msUserSelect="text",ut.style.userSelect="text",ut.addEventListener("copy",function(bt){if(bt.stopPropagation(),tt.format)if(bt.preventDefault(),typeof bt.clipboardData>"u"){rt&&console.warn("unable to use e.clipboardData"),rt&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var vt=clipboardToIE11Formatting[tt.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(vt,it)}else bt.clipboardData.clearData(),bt.clipboardData.setData(tt.format,it);tt.onCopy&&(bt.preventDefault(),tt.onCopy(bt.clipboardData))}),document.body.appendChild(ut),ot.selectNodeContents(ut),lt.addRange(ot);var mt=document.execCommand("copy");if(!mt)throw new Error("copy command was unsuccessful");ht=!0}catch(bt){rt&&console.error("unable to copy using execCommand: ",bt),rt&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(tt.format||"text",it),tt.onCopy&&tt.onCopy(window.clipboardData),ht=!0}catch(vt){rt&&console.error("unable to copy using clipboardData: ",vt),rt&&console.error("falling back to prompt"),at=format("message"in tt?tt.message:defaultMessage),window.prompt(at,it)}}finally{lt&&(typeof lt.removeRange=="function"?lt.removeRange(ot):lt.removeAllRanges()),ut&&document.body.removeChild(ut),st()}return ht}var copyToClipboard=copy$2,n$8,u$3,i$5,t$6,r$6,o$6,f$4,e$7={},c$5=[],s$6=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function a$4(it,tt){for(var rt in tt)it[rt]=tt[rt];return it}function v$3(it){var tt=it.parentNode;tt&&tt.removeChild(it)}function h$5(it,tt,rt){var at,st=arguments,ot={};for(at in tt)at!=="key"&&at!=="ref"&&(ot[at]=tt[at]);if(arguments.length>3)for(rt=[rt],at=3;at<arguments.length;at++)rt.push(st[at]);if(rt!=null&&(ot.children=rt),typeof it=="function"&&it.defaultProps!=null)for(at in it.defaultProps)ot[at]===void 0&&(ot[at]=it.defaultProps[at]);return p$5(it,ot,tt&&tt.key,tt&&tt.ref,null)}function p$5(it,tt,rt,at,st){var ot={type:it,props:tt,key:rt,ref:at,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:st};return st==null&&(ot.__v=ot),n$8.vnode&&n$8.vnode(ot),ot}function y$3(){return{}}function d$4(it){return it.children}function m$3(it,tt){this.props=it,this.context=tt}function w$4(it,tt){if(tt==null)return it.__?w$4(it.__,it.__.__k.indexOf(it)+1):null;for(var rt;tt<it.__k.length;tt++)if((rt=it.__k[tt])!=null&&rt.__e!=null)return rt.__e;return typeof it.type=="function"?w$4(it):null}function k$3(it){var tt,rt;if((it=it.__)!=null&&it.__c!=null){for(it.__e=it.__c.base=null,tt=0;tt<it.__k.length;tt++)if((rt=it.__k[tt])!=null&&rt.__e!=null){it.__e=it.__c.base=rt.__e;break}return k$3(it)}}function g$5(it){(!it.__d&&(it.__d=!0)&&u$3.push(it)&&!i$5++||r$6!==n$8.debounceRendering)&&((r$6=n$8.debounceRendering)||t$6)(_$4)}function _$4(){for(var it;i$5=u$3.length;)it=u$3.sort(function(tt,rt){return tt.__v.__b-rt.__v.__b}),u$3=[],it.some(function(tt){var rt,at,st,ot,lt,ut,ht;tt.__d&&(ut=(lt=(rt=tt).__v).__e,(ht=rt.__P)&&(at=[],(st=a$4({},lt)).__v=st,ot=A$5(ht,lt,st,rt.__n,ht.ownerSVGElement!==void 0,null,at,ut==null?w$4(lt):ut),T$3(at,lt),ot!=ut&&k$3(lt)))})}function b$1(it,tt,rt,at,st,ot,lt,ut,ht){var mt,bt,vt,At,xt,Et,Tt,wt=rt&&rt.__k||c$5,Ct=wt.length;if(ut==e$7&&(ut=ot!=null?ot[0]:Ct?w$4(rt,0):null),mt=0,tt.__k=x$5(tt.__k,function(It){if(It!=null){if(It.__=tt,It.__b=tt.__b+1,(vt=wt[mt])===null||vt&&It.key==vt.key&&It.type===vt.type)wt[mt]=void 0;else for(bt=0;bt<Ct;bt++){if((vt=wt[bt])&&It.key==vt.key&&It.type===vt.type){wt[bt]=void 0;break}vt=null}if(At=A$5(it,It,vt=vt||e$7,at,st,ot,lt,ut,ht),(bt=It.ref)&&vt.ref!=bt&&(Tt||(Tt=[]),vt.ref&&Tt.push(vt.ref,null,It),Tt.push(bt,It.__c||At,It)),At!=null){var St;if(Et==null&&(Et=At),It.__d!==void 0)St=It.__d,It.__d=void 0;else if(ot==vt||At!=ut||At.parentNode==null){e:if(ut==null||ut.parentNode!==it)it.appendChild(At),St=null;else{for(xt=ut,bt=0;(xt=xt.nextSibling)&&bt<Ct;bt+=2)if(xt==At)break e;it.insertBefore(At,ut),St=ut}tt.type=="option"&&(it.value="")}ut=St!==void 0?St:At.nextSibling,typeof tt.type=="function"&&(tt.__d=ut)}else ut&&vt.__e==ut&&ut.parentNode!=it&&(ut=w$4(vt))}return mt++,It}),tt.__e=Et,ot!=null&&typeof tt.type!="function")for(mt=ot.length;mt--;)ot[mt]!=null&&v$3(ot[mt]);for(mt=Ct;mt--;)wt[mt]!=null&&D$1(wt[mt],wt[mt]);if(Tt)for(mt=0;mt<Tt.length;mt++)j$2(Tt[mt],Tt[++mt],Tt[++mt])}function x$5(it,tt,rt){if(rt==null&&(rt=[]),it==null||typeof it=="boolean")tt&&rt.push(tt(null));else if(Array.isArray(it))for(var at=0;at<it.length;at++)x$5(it[at],tt,rt);else rt.push(tt?tt(typeof it=="string"||typeof it=="number"?p$5(null,it,null,null,it):it.__e!=null||it.__c!=null?p$5(it.type,it.props,it.key,null,it.__v):it):it);return rt}function P$2(it,tt,rt,at,st){var ot;for(ot in rt)ot==="children"||ot==="key"||ot in tt||N$2(it,ot,null,rt[ot],at);for(ot in tt)st&&typeof tt[ot]!="function"||ot==="children"||ot==="key"||ot==="value"||ot==="checked"||rt[ot]===tt[ot]||N$2(it,ot,tt[ot],rt[ot],at)}function C$3(it,tt,rt){tt[0]==="-"?it.setProperty(tt,rt):it[tt]=typeof rt=="number"&&s$6.test(tt)===!1?rt+"px":rt==null?"":rt}function N$2(it,tt,rt,at,st){var ot,lt,ut,ht,mt;if(st?tt==="className"&&(tt="class"):tt==="class"&&(tt="className"),tt==="style")if(ot=it.style,typeof rt=="string")ot.cssText=rt;else{if(typeof at=="string"&&(ot.cssText="",at=null),at)for(ht in at)rt&&ht in rt||C$3(ot,ht,"");if(rt)for(mt in rt)at&&rt[mt]===at[mt]||C$3(ot,mt,rt[mt])}else tt[0]==="o"&&tt[1]==="n"?(lt=tt!==(tt=tt.replace(/Capture$/,"")),ut=tt.toLowerCase(),tt=(ut in it?ut:tt).slice(2),rt?(at||it.addEventListener(tt,z$3,lt),(it.l||(it.l={}))[tt]=rt):it.removeEventListener(tt,z$3,lt)):tt!=="list"&&tt!=="tagName"&&tt!=="form"&&tt!=="type"&&tt!=="size"&&!st&&tt in it?it[tt]=rt==null?"":rt:typeof rt!="function"&&tt!=="dangerouslySetInnerHTML"&&(tt!==(tt=tt.replace(/^xlink:?/,""))?rt==null||rt===!1?it.removeAttributeNS("http://www.w3.org/1999/xlink",tt.toLowerCase()):it.setAttributeNS("http://www.w3.org/1999/xlink",tt.toLowerCase(),rt):rt==null||rt===!1&&!/^ar/.test(tt)?it.removeAttribute(tt):it.setAttribute(tt,rt))}function z$3(it){this.l[it.type](n$8.event?n$8.event(it):it)}function A$5(it,tt,rt,at,st,ot,lt,ut,ht){var mt,bt,vt,At,xt,Et,Tt,wt,Ct,It,St=tt.type;if(tt.constructor!==void 0)return null;(mt=n$8.__b)&&mt(tt);try{e:if(typeof St=="function"){if(wt=tt.props,Ct=(mt=St.contextType)&&at[mt.__c],It=mt?Ct?Ct.props.value:mt.__:at,rt.__c?Tt=(bt=tt.__c=rt.__c).__=bt.__E:("prototype"in St&&St.prototype.render?tt.__c=bt=new St(wt,It):(tt.__c=bt=new m$3(wt,It),bt.constructor=St,bt.render=E$3),Ct&&Ct.sub(bt),bt.props=wt,bt.state||(bt.state={}),bt.context=It,bt.__n=at,vt=bt.__d=!0,bt.__h=[]),bt.__s==null&&(bt.__s=bt.state),St.getDerivedStateFromProps!=null&&(bt.__s==bt.state&&(bt.__s=a$4({},bt.__s)),a$4(bt.__s,St.getDerivedStateFromProps(wt,bt.__s))),At=bt.props,xt=bt.state,vt)St.getDerivedStateFromProps==null&&bt.componentWillMount!=null&&bt.componentWillMount(),bt.componentDidMount!=null&&bt.__h.push(bt.componentDidMount);else{if(St.getDerivedStateFromProps==null&&wt!==At&&bt.componentWillReceiveProps!=null&&bt.componentWillReceiveProps(wt,It),!bt.__e&&bt.shouldComponentUpdate!=null&&bt.shouldComponentUpdate(wt,bt.__s,It)===!1||tt.__v===rt.__v&&!bt.__){for(bt.props=wt,bt.state=bt.__s,tt.__v!==rt.__v&&(bt.__d=!1),bt.__v=tt,tt.__e=rt.__e,tt.__k=rt.__k,bt.__h.length&&lt.push(bt),mt=0;mt<tt.__k.length;mt++)tt.__k[mt]&&(tt.__k[mt].__=tt);break e}bt.componentWillUpdate!=null&&bt.componentWillUpdate(wt,bt.__s,It),bt.componentDidUpdate!=null&&bt.__h.push(function(){bt.componentDidUpdate(At,xt,Et)})}bt.context=It,bt.props=wt,bt.state=bt.__s,(mt=n$8.__r)&&mt(tt),bt.__d=!1,bt.__v=tt,bt.__P=it,mt=bt.render(bt.props,bt.state,bt.context),tt.__k=mt!=null&&mt.type==d$4&&mt.key==null?mt.props.children:Array.isArray(mt)?mt:[mt],bt.getChildContext!=null&&(at=a$4(a$4({},at),bt.getChildContext())),vt||bt.getSnapshotBeforeUpdate==null||(Et=bt.getSnapshotBeforeUpdate(At,xt)),b$1(it,tt,rt,at,st,ot,lt,ut,ht),bt.base=tt.__e,bt.__h.length&&lt.push(bt),Tt&&(bt.__E=bt.__=null),bt.__e=!1}else ot==null&&tt.__v===rt.__v?(tt.__k=rt.__k,tt.__e=rt.__e):tt.__e=$$2(rt.__e,tt,rt,at,st,ot,lt,ht);(mt=n$8.diffed)&&mt(tt)}catch(Rt){tt.__v=null,n$8.__e(Rt,tt,rt)}return tt.__e}function T$3(it,tt){n$8.__c&&n$8.__c(tt,it),it.some(function(rt){try{it=rt.__h,rt.__h=[],it.some(function(at){at.call(rt)})}catch(at){n$8.__e(at,rt.__v)}})}function $$2(it,tt,rt,at,st,ot,lt,ut){var ht,mt,bt,vt,At,xt=rt.props,Et=tt.props;if(st=tt.type==="svg"||st,ot!=null){for(ht=0;ht<ot.length;ht++)if((mt=ot[ht])!=null&&((tt.type===null?mt.nodeType===3:mt.localName===tt.type)||it==mt)){it=mt,ot[ht]=null;break}}if(it==null){if(tt.type===null)return document.createTextNode(Et);it=st?document.createElementNS("http://www.w3.org/2000/svg",tt.type):document.createElement(tt.type,Et.is&&{is:Et.is}),ot=null,ut=!1}if(tt.type===null)xt!==Et&&it.data!=Et&&(it.data=Et);else{if(ot!=null&&(ot=c$5.slice.call(it.childNodes)),bt=(xt=rt.props||e$7).dangerouslySetInnerHTML,vt=Et.dangerouslySetInnerHTML,!ut){if(xt===e$7)for(xt={},At=0;At<it.attributes.length;At++)xt[it.attributes[At].name]=it.attributes[At].value;(vt||bt)&&(vt&&bt&&vt.__html==bt.__html||(it.innerHTML=vt&&vt.__html||""))}P$2(it,Et,xt,st,ut),vt?tt.__k=[]:(tt.__k=tt.props.children,b$1(it,tt,rt,at,tt.type!=="foreignObject"&&st,ot,lt,e$7,ut)),ut||("value"in Et&&(ht=Et.value)!==void 0&&ht!==it.value&&N$2(it,"value",ht,xt.value,!1),"checked"in Et&&(ht=Et.checked)!==void 0&&ht!==it.checked&&N$2(it,"checked",ht,xt.checked,!1))}return it}function j$2(it,tt,rt){try{typeof it=="function"?it(tt):it.current=tt}catch(at){n$8.__e(at,rt)}}function D$1(it,tt,rt){var at,st,ot;if(n$8.unmount&&n$8.unmount(it),(at=it.ref)&&(at.current&&at.current!==it.__e||j$2(at,null,tt)),rt||typeof it.type=="function"||(rt=(st=it.__e)!=null),it.__e=it.__d=void 0,(at=it.__c)!=null){if(at.componentWillUnmount)try{at.componentWillUnmount()}catch(lt){n$8.__e(lt,tt)}at.base=at.__P=null}if(at=it.__k)for(ot=0;ot<at.length;ot++)at[ot]&&D$1(at[ot],tt,rt);st!=null&&v$3(st)}function E$3(it,tt,rt){return this.constructor(it,rt)}function H$2(it,tt,rt){var at,st,ot;n$8.__&&n$8.__(it,tt),st=(at=rt===o$6)?null:rt&&rt.__k||tt.__k,it=h$5(d$4,null,[it]),ot=[],A$5(tt,(at?tt:rt||tt).__k=it,st||e$7,e$7,tt.ownerSVGElement!==void 0,rt&&!at?[rt]:st?null:c$5.slice.call(tt.childNodes),ot,rt||e$7,at),T$3(ot,it)}function I$3(it,tt){H$2(it,tt,o$6)}function L$2(it,tt){var rt,at;for(at in tt=a$4(a$4({},it.props),tt),arguments.length>2&&(tt.children=c$5.slice.call(arguments,2)),rt={},tt)at!=="key"&&at!=="ref"&&(rt[at]=tt[at]);return p$5(it.type,rt,tt.key||it.key,tt.ref||it.ref,null)}function M$2(it){var tt={},rt={__c:"__cC"+f$4++,__:it,Consumer:function(at,st){return at.children(st)},Provider:function(at){var st,ot=this;return this.getChildContext||(st=[],this.getChildContext=function(){return tt[rt.__c]=ot,tt},this.shouldComponentUpdate=function(lt){ot.props.value!==lt.value&&st.some(function(ut){ut.context=lt.value,g$5(ut)})},this.sub=function(lt){st.push(lt);var ut=lt.componentWillUnmount;lt.componentWillUnmount=function(){st.splice(st.indexOf(lt),1),ut&&ut.call(lt)}}),at.children}};return rt.Consumer.contextType=rt,rt.Provider.__=rt,rt}n$8={__e:function(it,tt){for(var rt,at;tt=tt.__;)if((rt=tt.__c)&&!rt.__)try{if(rt.constructor&&rt.constructor.getDerivedStateFromError!=null&&(at=!0,rt.setState(rt.constructor.getDerivedStateFromError(it))),rt.componentDidCatch!=null&&(at=!0,rt.componentDidCatch(it)),at)return g$5(rt.__E=rt)}catch(st){it=st}throw it}},m$3.prototype.setState=function(it,tt){var rt;rt=this.__s!==this.state?this.__s:this.__s=a$4({},this.state),typeof it=="function"&&(it=it(rt,this.props)),it&&a$4(rt,it),it!=null&&this.__v&&(tt&&this.__h.push(tt),g$5(this))},m$3.prototype.forceUpdate=function(it){this.__v&&(this.__e=!0,it&&this.__h.push(it),g$5(this))},m$3.prototype.render=d$4,u$3=[],i$5=0,t$6=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,o$6=e$7,f$4=0;var t$5,u$2,r$5,i$4=0,o$5=[],c$4=n$8.__r,f$3=n$8.diffed,e$6=n$8.__c,a$3=n$8.unmount;function v$2(it,tt){n$8.__h&&n$8.__h(u$2,it,i$4||tt),i$4=0;var rt=u$2.__H||(u$2.__H={__:[],__h:[]});return it>=rt.__.length&&rt.__.push({}),rt.__[it]}function m$2(it){return i$4=1,p$4(E$2,it)}function p$4(it,tt,rt){var at=v$2(t$5++,2);return at.__c||(at.__c=u$2,at.__=[rt?rt(tt):E$2(void 0,tt),function(st){var ot=it(at.__[0],st);at.__[0]!==ot&&(at.__[0]=ot,at.__c.setState({}))}]),at.__}function l$5(it,tt){var rt=v$2(t$5++,3);!n$8.__s&&x$4(rt.__H,tt)&&(rt.__=it,rt.__H=tt,u$2.__H.__h.push(rt))}function y$2(it,tt){var rt=v$2(t$5++,4);!n$8.__s&&x$4(rt.__H,tt)&&(rt.__=it,rt.__H=tt,u$2.__h.push(rt))}function d$3(it){return i$4=5,h$4(function(){return{current:it}},[])}function s$5(it,tt,rt){i$4=6,y$2(function(){typeof it=="function"?it(tt()):it&&(it.current=tt())},rt==null?rt:rt.concat(it))}function h$4(it,tt){var rt=v$2(t$5++,7);return x$4(rt.__H,tt)?(rt.__H=tt,rt.__h=it,rt.__=it()):rt.__}function T$2(it,tt){return i$4=8,h$4(function(){return it},tt)}function w$3(it){var tt=u$2.context[it.__c],rt=v$2(t$5++,9);return rt.__c=it,tt?(rt.__==null&&(rt.__=!0,tt.sub(u$2)),tt.props.value):it.__}function A$4(it,tt){n$8.useDebugValue&&n$8.useDebugValue(tt?tt(it):it)}function F$1(it){var tt=v$2(t$5++,10),rt=m$2();return tt.__=it,u$2.componentDidCatch||(u$2.componentDidCatch=function(at){tt.__&&tt.__(at),rt[1](at)}),[rt[0],function(){rt[1](void 0)}]}function _$3(){o$5.some(function(it){if(it.__P)try{it.__H.__h.forEach(g$4),it.__H.__h.forEach(q$2),it.__H.__h=[]}catch(tt){return it.__H.__h=[],n$8.__e(tt,it.__v),!0}}),o$5=[]}function g$4(it){it.t&&it.t()}function q$2(it){var tt=it.__();typeof tt=="function"&&(it.t=tt)}function x$4(it,tt){return!it||tt.some(function(rt,at){return rt!==it[at]})}function E$2(it,tt){return typeof tt=="function"?tt(it):tt}n$8.__r=function(it){c$4&&c$4(it),t$5=0,(u$2=it.__c).__H&&(u$2.__H.__h.forEach(g$4),u$2.__H.__h.forEach(q$2),u$2.__H.__h=[])},n$8.diffed=function(it){f$3&&f$3(it);var tt=it.__c;if(tt){var rt=tt.__H;rt&&rt.__h.length&&(o$5.push(tt)!==1&&r$5===n$8.requestAnimationFrame||((r$5=n$8.requestAnimationFrame)||function(at){var st,ot=function(){clearTimeout(lt),cancelAnimationFrame(st),setTimeout(at)},lt=setTimeout(ot,100);typeof window<"u"&&(st=requestAnimationFrame(ot))})(_$3))}},n$8.__c=function(it,tt){tt.some(function(rt){try{rt.__h.forEach(g$4),rt.__h=rt.__h.filter(function(at){return!at.__||q$2(at)})}catch(at){tt.some(function(st){st.__h&&(st.__h=[])}),tt=[],n$8.__e(at,rt.__v)}}),e$6&&e$6(it,tt)},n$8.unmount=function(it){a$3&&a$3(it);var tt=it.__c;if(tt){var rt=tt.__H;if(rt)try{rt.__.forEach(function(at){return at.t&&at.t()})}catch(at){n$8.__e(at,tt.__v)}}};function E$1(it,tt){for(var rt in tt)it[rt]=tt[rt];return it}function w$2(it,tt){for(var rt in it)if(rt!=="__source"&&!(rt in tt))return!0;for(var at in tt)if(at!=="__source"&&it[at]!==tt[at])return!0;return!1}var C$2=function(it){var tt,rt;function at(st){var ot;return(ot=it.call(this,st)||this).isPureReactComponent=!0,ot}return rt=it,(tt=at).prototype=Object.create(rt.prototype),tt.prototype.constructor=tt,tt.__proto__=rt,at.prototype.shouldComponentUpdate=function(st,ot){return w$2(this.props,st)||w$2(this.state,ot)},at}(m$3);function _$2(it,tt){function rt(st){var ot=this.props.ref,lt=ot==st.ref;return!lt&&ot&&(ot.call?ot(null):ot.current=null),tt?!tt(this.props,st)||!lt:w$2(this.props,st)}function at(st){return this.shouldComponentUpdate=rt,h$5(it,E$1({},st))}return at.prototype.isReactComponent=!0,at.displayName="Memo("+(it.displayName||it.name)+")",at.t=!0,at}var A$3=n$8.__b;function S$2(it){function tt(rt){var at=E$1({},rt);return delete at.ref,it(at,rt.ref)}return tt.prototype.isReactComponent=tt.t=!0,tt.displayName="ForwardRef("+(it.displayName||it.name)+")",tt}n$8.__b=function(it){it.type&&it.type.t&&it.ref&&(it.props.ref=it.ref,it.ref=null),A$3&&A$3(it)};var k$2=function(it,tt){return it?x$5(it).reduce(function(rt,at,st){return rt.concat(tt(at,st))},[]):null},R$1={map:k$2,forEach:k$2,count:function(it){return it?x$5(it).length:0},only:function(it){if((it=x$5(it)).length!==1)throw new Error("Children.only() expects only one child.");return it[0]},toArray:x$5},F=n$8.__e;function N$1(it){return it&&((it=E$1({},it)).__c=null,it.__k=it.__k&&it.__k.map(N$1)),it}function U(){this.__u=0,this.o=null,this.__b=null}function M$1(it){var tt=it.__.__c;return tt&&tt.u&&tt.u(it)}function L$1(it){var tt,rt,at;function st(ot){if(tt||(tt=it()).then(function(lt){rt=lt.default||lt},function(lt){at=lt}),at)throw at;if(!rt)throw tt;return h$5(rt,ot)}return st.displayName="Lazy",st.t=!0,st}function O(){this.i=null,this.l=null}n$8.__e=function(it,tt,rt){if(it.then){for(var at,st=tt;st=st.__;)if((at=st.__c)&&at.__c)return at.__c(it,tt.__c)}F(it,tt,rt)},(U.prototype=new m$3).__c=function(it,tt){var rt=this;rt.o==null&&(rt.o=[]),rt.o.push(tt);var at=M$1(rt.__v),st=!1,ot=function(){st||(st=!0,at?at(lt):lt())};tt.__c=tt.componentWillUnmount,tt.componentWillUnmount=function(){ot(),tt.__c&&tt.__c()};var lt=function(){var ut;if(!--rt.__u)for(rt.__v.__k[0]=rt.state.u,rt.setState({u:rt.__b=null});ut=rt.o.pop();)ut.forceUpdate()};rt.__u++||rt.setState({u:rt.__b=rt.__v.__k[0]}),it.then(ot,ot)},U.prototype.render=function(it,tt){return this.__b&&(this.__v.__k[0]=N$1(this.__b),this.__b=null),[h$5(m$3,null,tt.u?null:it.children),tt.u&&it.fallback]};var P$1=function(it,tt,rt){if(++rt[1]===rt[0]&&it.l.delete(tt),it.props.revealOrder&&(it.props.revealOrder[0]!=="t"||!it.l.size))for(rt=it.i;rt;){for(;rt.length>3;)rt.pop()();if(rt[1]<rt[0])break;it.i=rt=rt[2]}};(O.prototype=new m$3).u=function(it){var tt=this,rt=M$1(tt.__v),at=tt.l.get(it);return at[0]++,function(st){var ot=function(){tt.props.revealOrder?(at.push(st),P$1(tt,it,at)):st()};rt?rt(ot):ot()}},O.prototype.render=function(it){this.i=null,this.l=new Map;var tt=x$5(it.children);it.revealOrder&&it.revealOrder[0]==="b"&&tt.reverse();for(var rt=tt.length;rt--;)this.l.set(tt[rt],this.i=[1,0,this.i]);return it.children},O.prototype.componentDidUpdate=O.prototype.componentDidMount=function(){var it=this;it.l.forEach(function(tt,rt){P$1(it,rt,tt)})};var W=function(){function it(){}var tt=it.prototype;return tt.getChildContext=function(){return this.props.context},tt.render=function(rt){return rt.children},it}();function j$1(it){var tt=this,rt=it.container,at=h$5(W,{context:tt.context},it.vnode);return tt.s&&tt.s!==rt&&(tt.v.parentNode&&tt.s.removeChild(tt.v),D$1(tt.h),tt.p=!1),it.vnode?tt.p?(rt.__k=tt.__k,H$2(at,rt),tt.__k=rt.__k):(tt.v=document.createTextNode(""),I$3("",rt),rt.appendChild(tt.v),tt.p=!0,tt.s=rt,H$2(at,rt,tt.v),tt.__k=tt.v.__k):tt.p&&(tt.v.parentNode&&tt.s.removeChild(tt.v),D$1(tt.h)),tt.h=at,tt.componentWillUnmount=function(){tt.v.parentNode&&tt.s.removeChild(tt.v),D$1(tt.h)},null}function z$2(it,tt){return h$5(j$1,{vnode:it,container:tt})}var D=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;m$3.prototype.isReactComponent={};var H$1=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103;function T$1(it,tt,rt){if(tt.__k==null)for(;tt.firstChild;)tt.removeChild(tt.firstChild);return H$2(it,tt),typeof rt=="function"&&rt(),it?it.__c:null}function V$1(it,tt,rt){return I$3(it,tt),typeof rt=="function"&&rt(),it?it.__c:null}var Z=n$8.event;function I$2(it,tt){it["UNSAFE_"+tt]&&!it[tt]&&Object.defineProperty(it,tt,{configurable:!1,get:function(){return this["UNSAFE_"+tt]},set:function(rt){this["UNSAFE_"+tt]=rt}})}n$8.event=function(it){Z&&(it=Z(it)),it.persist=function(){};var tt=!1,rt=!1,at=it.stopPropagation;it.stopPropagation=function(){at.call(it),tt=!0};var st=it.preventDefault;return it.preventDefault=function(){st.call(it),rt=!0},it.isPropagationStopped=function(){return tt},it.isDefaultPrevented=function(){return rt},it.nativeEvent=it};var $$1={configurable:!0,get:function(){return this.class}},q$1=n$8.vnode;n$8.vnode=function(it){it.$$typeof=H$1;var tt=it.type,rt=it.props;if(tt){if(rt.class!=rt.className&&($$1.enumerable="className"in rt,rt.className!=null&&(rt.class=rt.className),Object.defineProperty(rt,"className",$$1)),typeof tt!="function"){var at,st,ot;for(ot in rt.defaultValue&&rt.value!==void 0&&(rt.value||rt.value===0||(rt.value=rt.defaultValue),delete rt.defaultValue),Array.isArray(rt.value)&&rt.multiple&&tt==="select"&&(x$5(rt.children).forEach(function(lt){rt.value.indexOf(lt.props.value)!=-1&&(lt.props.selected=!0)}),delete rt.value),rt)if(at=D.test(ot))break;if(at)for(ot in st=it.props={},rt)st[D.test(ot)?ot.replace(/[A-Z0-9]/,"-$&").toLowerCase():ot]=rt[ot]}(function(lt){var ut=it.type,ht=it.props;if(ht&&typeof ut=="string"){var mt={};for(var bt in ht)/^on(Ani|Tra|Tou)/.test(bt)&&(ht[bt.toLowerCase()]=ht[bt],delete ht[bt]),mt[bt.toLowerCase()]=bt;if(mt.ondoubleclick&&(ht.ondblclick=ht[mt.ondoubleclick],delete ht[mt.ondoubleclick]),mt.onbeforeinput&&(ht.onbeforeinput=ht[mt.onbeforeinput],delete ht[mt.onbeforeinput]),mt.onchange&&(ut==="textarea"||ut.toLowerCase()==="input"&&!/^fil|che|ra/i.test(ht.type))){var vt=mt.oninput||"oninput";ht[vt]||(ht[vt]=ht[mt.onchange],delete ht[mt.onchange])}}})(),typeof tt=="function"&&!tt.m&&tt.prototype&&(I$2(tt.prototype,"componentWillMount"),I$2(tt.prototype,"componentWillReceiveProps"),I$2(tt.prototype,"componentWillUpdate"),tt.m=!0)}q$1&&q$1(it)};var B$2="16.8.0";function G(it){return h$5.bind(null,it)}function J(it){return!!it&&it.$$typeof===H$1}function K(it){return J(it)?L$2.apply(null,arguments):it}function Q$1(it){return!!it.__k&&(H$2(null,it),!0)}function X(it){return it&&(it.base||it.nodeType===1&&it)||null}var Y=function(it,tt){return it(tt)};const compat_module={useState:m$2,useReducer:p$4,useEffect:l$5,useLayoutEffect:y$2,useRef:d$3,useImperativeHandle:s$5,useMemo:h$4,useCallback:T$2,useContext:w$3,useDebugValue:A$4,version:"16.8.0",Children:R$1,render:T$1,hydrate:T$1,unmountComponentAtNode:Q$1,createPortal:z$2,createElement:h$5,createContext:M$2,createFactory:G,cloneElement:K,createRef:y$3,Fragment:d$4,isValidElement:J,findDOMNode:X,Component:m$3,PureComponent:C$2,memo:_$2,forwardRef:S$2,unstable_batchedUpdates:Y,Suspense:U,SuspenseList:O,lazy:L$1},compat_module$1=Object.freeze(Object.defineProperty({__proto__:null,default:compat_module,version:B$2,Children:R$1,render:T$1,hydrate:V$1,unmountComponentAtNode:Q$1,createPortal:z$2,createFactory:G,cloneElement:K,isValidElement:J,findDOMNode:X,PureComponent:C$2,memo:_$2,forwardRef:S$2,unstable_batchedUpdates:Y,Suspense:U,SuspenseList:O,lazy:L$1,createElement:h$5,createContext:M$2,createRef:y$3,Fragment:d$4,Component:m$3,useState:m$2,useReducer:p$4,useEffect:l$5,useLayoutEffect:y$2,useRef:d$3,useImperativeHandle:s$5,useMemo:h$4,useCallback:T$2,useContext:w$3,useDebugValue:A$4,useErrorBoundary:F$1},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(compat_module$1);function _interopDefault$1(it){return it&&typeof it=="object"&&"default"in it?it.default:it}var browserUtils=require$$0$1,QRCode=_interopDefault$1(browser),copy$1=_interopDefault$1(copyToClipboard),React=require$$3;function open(it){QRCode.toString(it,{type:"terminal"}).then(console.log)}var WALLETCONNECT_STYLE_SHEET=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function _catch(it,tt){try{var rt=it()}catch(at){return tt(at)}return rt&&rt.then?rt.then(void 0,tt):rt}var WALLETCONNECT_LOGO_SVG_URL="data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",WALLETCONNECT_HEADER_TEXT="WalletConnect",ANIMATION_DURATION=300,DEFAULT_BUTTON_COLOR="rgb(64, 153, 255)",WALLETCONNECT_WRAPPER_ID="walletconnect-wrapper",WALLETCONNECT_STYLE_ID="walletconnect-style-sheet",WALLETCONNECT_MODAL_ID="walletconnect-qrcode-modal",WALLETCONNECT_CLOSE_BUTTON_ID="walletconnect-qrcode-close",WALLETCONNECT_CTA_TEXT_ID="walletconnect-qrcode-text",WALLETCONNECT_CONNECT_BUTTON_ID="walletconnect-connect-button";function Header(it){return React.createElement("div",{className:"walletconnect-modal__header"},React.createElement("img",{src:WALLETCONNECT_LOGO_SVG_URL,className:"walletconnect-modal__headerLogo"}),React.createElement("p",null,WALLETCONNECT_HEADER_TEXT),React.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:it.onClose},React.createElement("div",{id:WALLETCONNECT_CLOSE_BUTTON_ID,className:"walletconnect-modal__close__icon"},React.createElement("div",{className:"walletconnect-modal__close__line1"}),React.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function ConnectButton(it){return React.createElement("a",{className:"walletconnect-connect__button",href:it.href,id:WALLETCONNECT_CONNECT_BUTTON_ID+"-"+it.name,onClick:it.onClick,rel:"noopener noreferrer",style:{backgroundColor:it.color},target:"_blank"},it.name)}var CARET_SVG_URL="data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E";function WalletButton(it){var tt=it.color,rt=it.href,at=it.name,st=it.logo,ot=it.onClick;return React.createElement("a",{className:"walletconnect-modal__base__row",href:rt,onClick:ot,rel:"noopener noreferrer",target:"_blank"},React.createElement("h3",{className:"walletconnect-modal__base__row__h3"},at),React.createElement("div",{className:"walletconnect-modal__base__row__right"},React.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+st+"') "+tt,backgroundSize:"100%"}}),React.createElement("img",{src:CARET_SVG_URL,className:"walletconnect-modal__base__row__right__caret"})))}function WalletIcon(it){var tt=it.color,rt=it.href,at=it.name,st=it.logo,ot=it.onClick,lt=window.innerWidth<768?(at.length>8?2.5:2.7)+"vw":"inherit";return React.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:rt,onClick:ot,rel:"noopener noreferrer",target:"_blank"},React.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+st+"') "+tt,backgroundSize:"100%"}}),React.createElement("div",{style:{fontSize:lt},className:"walletconnect-connect__button__text"},at))}var GRID_MIN_COUNT=5,LINKS_PER_PAGE=12;function LinkDisplay(it){var tt=browserUtils.isAndroid(),rt=React.useState(""),at=rt[0],st=rt[1],ot=React.useState(""),lt=ot[0],ut=ot[1],ht=React.useState(1),mt=ht[0],bt=ht[1],vt=lt?it.links.filter(function(Rt){return Rt.name.toLowerCase().includes(lt.toLowerCase())}):it.links,At=it.errorMessage,xt=lt||vt.length>GRID_MIN_COUNT,Et=Math.ceil(vt.length/LINKS_PER_PAGE),Tt=[(mt-1)*LINKS_PER_PAGE+1,mt*LINKS_PER_PAGE],wt=vt.length?vt.filter(function(Rt,Dt){return Dt+1>=Tt[0]&&Dt+1<=Tt[1]}):[],Ct=!tt&&Et>1,It=void 0;function St(Rt){st(Rt.target.value),clearTimeout(It),Rt.target.value?It=setTimeout(function(){ut(Rt.target.value),bt(1)},1e3):(st(""),ut(""),bt(1))}return React.createElement("div",null,React.createElement("p",{id:WALLETCONNECT_CTA_TEXT_ID,className:"walletconnect-qrcode__text"},tt?it.text.connect_mobile_wallet:it.text.choose_preferred_wallet),!tt&&React.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:at,onChange:St}),React.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(tt?"__android":xt&&vt.length?"__wrap":"")},tt?React.createElement(ConnectButton,{name:it.text.connect,color:DEFAULT_BUTTON_COLOR,href:it.uri,onClick:React.useCallback(function(){browserUtils.saveMobileLinkInfo({name:"Unknown",href:it.uri})},[])}):wt.length?wt.map(function(Rt){var Dt=Rt.color,Wt=Rt.name,qt=Rt.shortName,Vt=Rt.logo,Yt=browserUtils.formatIOSMobile(it.uri,Rt),jt=React.useCallback(function(){browserUtils.saveMobileLinkInfo({name:Wt,href:Yt})},[wt]);return xt?React.createElement(WalletIcon,{color:Dt,href:Yt,name:qt||Wt,logo:Vt,onClick:jt}):React.createElement(WalletButton,{color:Dt,href:Yt,name:Wt,logo:Vt,onClick:jt})}):React.createElement(React.Fragment,null,React.createElement("p",null,At.length?it.errorMessage:!!it.links.length&&!vt.length?it.text.no_wallets_found:it.text.loading))),Ct&&React.createElement("div",{className:"walletconnect-modal__footer"},Array(Et).fill(0).map(function(Rt,Dt){var Wt=Dt+1,qt=mt===Wt;return React.createElement("a",{style:{margin:"auto 10px",fontWeight:qt?"bold":"normal"},onClick:function(){return bt(Wt)}},Wt)})))}function Notification(it){var tt=!!it.message.trim();return React.createElement("div",{className:"walletconnect-qrcode__notification"+(tt?" notification__show":"")},it.message)}var formatQRCodeImage=function(it){try{var tt="";return Promise.resolve(QRCode.toString(it,{margin:0,type:"svg"})).then(function(rt){return typeof rt=="string"&&(tt=rt.replace("<svg",'<svg class="walletconnect-qrcode__image"')),tt})}catch(rt){return Promise.reject(rt)}};function QRCodeDisplay(it){var tt=React.useState(""),rt=tt[0],at=tt[1],st=React.useState(""),ot=st[0],lt=st[1];React.useEffect(function(){try{return Promise.resolve(formatQRCodeImage(it.uri)).then(function(ht){lt(ht)})}catch(ht){Promise.reject(ht)}},[]);var ut=function(){var ht=copy$1(it.uri);ht?(at(it.text.copied_to_clipboard),setInterval(function(){return at("")},1200)):(at("Error"),setInterval(function(){return at("")},1200))};return React.createElement("div",null,React.createElement("p",{id:WALLETCONNECT_CTA_TEXT_ID,className:"walletconnect-qrcode__text"},it.text.scan_qrcode_with_wallet),React.createElement("div",{dangerouslySetInnerHTML:{__html:ot}}),React.createElement("div",{className:"walletconnect-modal__footer"},React.createElement("a",{onClick:ut},it.text.copy_to_clipboard)),React.createElement(Notification,{message:rt}))}function Modal$2(it){var tt=browserUtils.isAndroid(),rt=browserUtils.isMobile(),at=rt?it.qrcodeModalOptions&&it.qrcodeModalOptions.mobileLinks?it.qrcodeModalOptions.mobileLinks:void 0:it.qrcodeModalOptions&&it.qrcodeModalOptions.desktopLinks?it.qrcodeModalOptions.desktopLinks:void 0,st=React.useState(!1),ot=st[0],lt=st[1],ut=React.useState(!1),ht=ut[0],mt=ut[1],bt=React.useState(!rt),vt=bt[0],At=bt[1],xt={mobile:rt,text:it.text,uri:it.uri,qrcodeModalOptions:it.qrcodeModalOptions},Et=React.useState(""),Tt=Et[0],wt=Et[1],Ct=React.useState(!1),It=Ct[0],St=Ct[1],Rt=React.useState([]),Dt=Rt[0],Wt=Rt[1],qt=React.useState(""),Vt=qt[0],Yt=qt[1],jt=function(){ht||ot||at&&!at.length||Dt.length>0||React.useEffect(function(){var zt=function(){try{if(tt)return Promise.resolve();lt(!0);var Nt=_catch(function(){var Mt=it.qrcodeModalOptions&&it.qrcodeModalOptions.registryUrl?it.qrcodeModalOptions.registryUrl:browserUtils.getWalletRegistryUrl();return Promise.resolve(fetch(Mt)).then(function(Lt){return Promise.resolve(Lt.json()).then(function(Ht){var Qt=Ht.listings,Ut=rt?"mobile":"desktop",Bt=browserUtils.getMobileLinkRegistry(browserUtils.formatMobileRegistry(Qt,Ut),at);lt(!1),mt(!0),Yt(Bt.length?"":it.text.no_supported_wallets),Wt(Bt);var Kt=Bt.length===1;Kt&&(wt(browserUtils.formatIOSMobile(it.uri,Bt[0])),At(!0)),St(Kt)})})},function(Mt){lt(!1),mt(!0),Yt(it.text.something_went_wrong),console.error(Mt)});return Promise.resolve(Nt&&Nt.then?Nt.then(function(){}):void 0)}catch(Mt){return Promise.reject(Mt)}};zt()})};jt();var kt=rt?vt:!vt;return React.createElement("div",{id:WALLETCONNECT_MODAL_ID,className:"walletconnect-qrcode__base animated fadeIn"},React.createElement("div",{className:"walletconnect-modal__base"},React.createElement(Header,{onClose:it.onClose}),It&&vt?React.createElement("div",{className:"walletconnect-modal__single_wallet"},React.createElement("a",{onClick:function(){return browserUtils.saveMobileLinkInfo({name:Dt[0].name,href:Tt})},href:Tt,rel:"noopener noreferrer",target:"_blank"},it.text.connect_with+" "+(It?Dt[0].name:"")+" \u203A")):tt||ot||!ot&&Dt.length?React.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(kt?" right__selected":"")},React.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),rt?React.createElement(React.Fragment,null,React.createElement("a",{onClick:function(){return At(!1),jt()}},it.text.mobile),React.createElement("a",{onClick:function(){return At(!0)}},it.text.qrcode)):React.createElement(React.Fragment,null,React.createElement("a",{onClick:function(){return At(!0)}},it.text.qrcode),React.createElement("a",{onClick:function(){return At(!1),jt()}},it.text.desktop))):null,React.createElement("div",null,vt||!tt&&!ot&&!Dt.length?React.createElement(QRCodeDisplay,Object.assign({},xt)):React.createElement(LinkDisplay,Object.assign({},xt,{links:Dt,errorMessage:Vt})))))}var de$1={choose_preferred_wallet:"W\xE4hle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterst\xFCtzten Wallet",no_wallets_found:"keine Wallet gefunden"},en={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},es={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera m\xF3vil",scan_qrcode_with_wallet:"Escanea el c\xF3digo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"C\xF3digo QR",mobile:"M\xF3vil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali\xF3 mal",no_supported_wallets:"Todav\xEDa no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},fr={choose_preferred_wallet:"Choisissez votre portefeuille pr\xE9f\xE9r\xE9",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi\xE9!",connect_with:"Connectez-vous \xE0 l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn\xE9",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouv\xE9"},ko={choose_preferred_wallet:"\uC6D0\uD558\uB294 \uC9C0\uAC11\uC744 \uC120\uD0DD\uD558\uC138\uC694",connect_mobile_wallet:"\uBAA8\uBC14\uC77C \uC9C0\uAC11\uACFC \uC5F0\uACB0",scan_qrcode_with_wallet:"WalletConnect \uC9C0\uC6D0 \uC9C0\uAC11\uC5D0\uC11C QR\uCF54\uB4DC\uB97C \uC2A4\uCE94\uD558\uC138\uC694",connect:"\uC5F0\uACB0",qrcode:"QR \uCF54\uB4DC",mobile:"\uBAA8\uBC14\uC77C",desktop:"\uB370\uC2A4\uD06C\uD0D1",copy_to_clipboard:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC",copied_to_clipboard:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",connect_with:"\uC640 \uC5F0\uACB0\uD558\uB2E4",loading:"\uB85C\uB4DC \uC911...",something_went_wrong:"\uBB38\uC81C\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",no_supported_wallets:"\uC544\uC9C1 \uC9C0\uC6D0\uB418\uB294 \uC9C0\uAC11\uC774 \uC5C6\uC2B5\uB2C8\uB2E4",no_wallets_found:"\uC9C0\uAC11\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4"},pt$2={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se \xE0 carteira m\xF3vel",scan_qrcode_with_wallet:"Ler o c\xF3digo QR com uma carteira compat\xEDvel com WalletConnect",connect:"Conectar",qrcode:"C\xF3digo QR",mobile:"M\xF3vel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda n\xE3o h\xE1 carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},zh={choose_preferred_wallet:"\u9009\u62E9\u4F60\u7684\u94B1\u5305",connect_mobile_wallet:"\u8FDE\u63A5\u81F3\u79FB\u52A8\u7AEF\u94B1\u5305",scan_qrcode_with_wallet:"\u4F7F\u7528\u517C\u5BB9 WalletConnect \u7684\u94B1\u5305\u626B\u63CF\u4E8C\u7EF4\u7801",connect:"\u8FDE\u63A5",qrcode:"\u4E8C\u7EF4\u7801",mobile:"\u79FB\u52A8",desktop:"\u684C\u9762",copy_to_clipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F",copied_to_clipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F\u6210\u529F\uFF01",connect_with:"\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u8FDE\u63A5",loading:"\u6B63\u5728\u52A0\u8F7D...",something_went_wrong:"\u51FA\u4E86\u95EE\u9898",no_supported_wallets:"\u76EE\u524D\u8FD8\u6CA1\u6709\u652F\u6301\u7684\u94B1\u5305",no_wallets_found:"\u6CA1\u6709\u627E\u5230\u94B1\u5305"},fa={choose_preferred_wallet:"\u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u062E\u0648\u062F \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F",connect_mobile_wallet:"\u0628\u0647 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0645\u0648\u0628\u0627\u06CC\u0644 \u0648\u0635\u0644 \u0634\u0648\u06CC\u062F",scan_qrcode_with_wallet:"\u06A9\u062F QR \u0631\u0627 \u0628\u0627 \u06CC\u06A9 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0633\u0627\u0632\u06AF\u0627\u0631 \u0628\u0627 WalletConnect \u0627\u0633\u06A9\u0646 \u06A9\u0646\u06CC\u062F",connect:"\u0627\u062A\u0635\u0627\u0644",qrcode:"\u06A9\u062F QR",mobile:"\u0633\u06CC\u0627\u0631",desktop:"\u062F\u0633\u06A9\u062A\u0627\u067E",copy_to_clipboard:"\u06A9\u067E\u06CC \u0628\u0647 \u06A9\u0644\u06CC\u067E \u0628\u0648\u0631\u062F",copied_to_clipboard:"\u062F\u0631 \u06A9\u0644\u06CC\u067E \u0628\u0648\u0631\u062F \u06A9\u067E\u06CC \u0634\u062F!",connect_with:"\u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627",loading:"...\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC",something_went_wrong:"\u0645\u0634\u06A9\u0644\u06CC \u067E\u06CC\u0634 \u0622\u0645\u062F",no_supported_wallets:"\u0647\u0646\u0648\u0632 \u0647\u06CC\u0686 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC \u0634\u062F\u0647 \u0627\u06CC \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F",no_wallets_found:"\u0647\u06CC\u0686 \u06A9\u06CC\u0641 \u067E\u0648\u0644\u06CC \u067E\u06CC\u062F\u0627 \u0646\u0634\u062F"},languages={de:de$1,en,es,fr,ko,pt:pt$2,zh,fa};function injectStyleSheet(){var it=browserUtils.getDocumentOrThrow(),tt=it.getElementById(WALLETCONNECT_STYLE_ID);tt&&it.head.removeChild(tt);var rt=it.createElement("style");rt.setAttribute("id",WALLETCONNECT_STYLE_ID),rt.innerText=WALLETCONNECT_STYLE_SHEET,it.head.appendChild(rt)}function renderWrapper(){var it=browserUtils.getDocumentOrThrow(),tt=it.createElement("div");return tt.setAttribute("id",WALLETCONNECT_WRAPPER_ID),it.body.appendChild(tt),tt}function triggerCloseAnimation(){var it=browserUtils.getDocumentOrThrow(),tt=it.getElementById(WALLETCONNECT_MODAL_ID);tt&&(tt.className=tt.className.replace("fadeIn","fadeOut"),setTimeout(function(){var rt=it.getElementById(WALLETCONNECT_WRAPPER_ID);rt&&it.body.removeChild(rt)},ANIMATION_DURATION))}function getWrappedCallback(it){return function(){triggerCloseAnimation(),it&&it()}}function getText(){var it=browserUtils.getNavigatorOrThrow().language.split("-")[0]||"en";return languages[it]||languages.en}function open$1(it,tt,rt){injectStyleSheet();var at=renderWrapper();React.render(React.createElement(Modal$2,{text:getText(),uri:it,onClose:getWrappedCallback(tt),qrcodeModalOptions:rt}),at)}function close$1(){triggerCloseAnimation()}var isNode$1=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function open$2(it,tt,rt){console.log(it),isNode$1()?open(it):open$1(it,tt,rt)}function close$2(){isNode$1()||close$1()}var index={open:open$2,close:close$2},cjs=index;class SignerConnection extends IJsonRpcConnection{constructor(tt){super(),this.events=new EventEmitter,this.accounts=[],this.chainId=1,this.pending=!1,this.bridge="https://bridge.walletconnect.org",this.qrcode=!0,this.qrcodeModalOptions=void 0,this.opts=tt,this.chainId=(tt==null?void 0:tt.chainId)||this.chainId,this.wc=this.register(tt)}get connected(){return typeof this.wc<"u"&&this.wc.connected}get connecting(){return this.pending}get connector(){return this.wc=this.register(this.opts),this.wc}on(tt,rt){this.events.on(tt,rt)}once(tt,rt){this.events.once(tt,rt)}off(tt,rt){this.events.off(tt,rt)}removeListener(tt,rt){this.events.removeListener(tt,rt)}async open(tt){if(this.connected){this.onOpen();return}return new Promise((rt,at)=>{this.on("error",st=>{at(st)}),this.on("open",()=>{rt()}),this.create(tt)})}async close(){typeof this.wc>"u"||(this.wc.connected&&this.wc.killSession(),this.onClose())}async send(tt){this.wc=this.register(this.opts),this.connected||await this.open(),this.sendPayload(tt).then(rt=>this.events.emit("payload",rt)).catch(rt=>this.events.emit("payload",formatJsonRpcError(tt.id,rt.message)))}register(tt){if(this.wc)return this.wc;this.opts=tt||this.opts,this.bridge=tt!=null&&tt.connector?tt.connector.bridge:(tt==null?void 0:tt.bridge)||"https://bridge.walletconnect.org",this.qrcode=typeof(tt==null?void 0:tt.qrcode)>"u"||tt.qrcode!==!1,this.chainId=typeof(tt==null?void 0:tt.chainId)<"u"?tt.chainId:this.chainId,this.qrcodeModalOptions=tt==null?void 0:tt.qrcodeModalOptions;const rt={bridge:this.bridge,qrcodeModal:this.qrcode?cjs:void 0,qrcodeModalOptions:this.qrcodeModalOptions,storageId:tt==null?void 0:tt.storageId,signingMethods:tt==null?void 0:tt.signingMethods,clientMeta:tt==null?void 0:tt.clientMeta};if(this.wc=typeof(tt==null?void 0:tt.connector)<"u"?tt.connector:new WalletConnect(rt),typeof this.wc>"u")throw new Error("Failed to register WalletConnect connector");return this.wc.accounts.length&&(this.accounts=this.wc.accounts),this.wc.chainId&&(this.chainId=this.wc.chainId),this.registerConnectorEvents(),this.wc}onOpen(tt){this.pending=!1,tt&&(this.wc=tt),this.events.emit("open")}onClose(){this.pending=!1,this.wc&&(this.wc=void 0),this.events.emit("close")}onError(tt,rt="Failed or Rejected Request",at=-32e3,st){const ot={id:tt.id,jsonrpc:tt.jsonrpc,error:{code:at,message:rt}};return typeof st<"u"&&(ot.error.data=st),this.events.emit("payload",ot),ot}create(tt){this.wc=this.register(this.opts),this.chainId=tt||this.chainId,!(this.connected||this.pending)&&(this.pending=!0,this.registerConnectorEvents(),this.wc.createSession({chainId:this.chainId}).then(()=>this.events.emit("created")).catch(rt=>this.events.emit("error",rt)))}registerConnectorEvents(){this.wc=this.register(this.opts),this.wc.on("connect",tt=>{var rt,at;if(tt){this.events.emit("error",tt);return}this.accounts=((rt=this.wc)===null||rt===void 0?void 0:rt.accounts)||[],this.chainId=((at=this.wc)===null||at===void 0?void 0:at.chainId)||this.chainId,this.onOpen()}),this.wc.on("disconnect",tt=>{if(tt){this.events.emit("error",tt);return}this.onClose()}),this.wc.on("modal_closed",()=>{this.events.emit("error",new Error("User closed modal"))}),this.wc.on("session_update",(tt,rt)=>{const{accounts:at,chainId:st}=rt.params[0];(!this.accounts||at&&this.accounts!==at)&&(this.accounts=at,this.events.emit("accountsChanged",at)),(!this.chainId||st&&this.chainId!==st)&&(this.chainId=st,this.events.emit("chainChanged",st))})}async sendPayload(tt){this.wc=this.register(this.opts);try{const rt=await this.wc.unsafeSend(tt);return this.sanitizeResponse(rt)}catch(rt){return this.onError(tt,rt.message)}}sanitizeResponse(tt){return typeof tt.error<"u"&&typeof tt.error.code>"u"?formatJsonRpcError(tt.id,tt.error.message,tt.error.data):tt}}class WalletConnectProvider{constructor(tt){this.events=new EventEmitter$1,this.rpc={infuraId:tt==null?void 0:tt.infuraId,custom:tt==null?void 0:tt.rpc},this.signer=new JsonRpcProvider(new SignerConnection(tt));const rt=this.signer.connection.chainId||(tt==null?void 0:tt.chainId)||1;this.http=this.setHttpProvider(rt),this.registerEventListeners()}get connected(){return this.signer.connection.connected}get connector(){return this.signer.connection.connector}get accounts(){return this.signer.connection.accounts}get chainId(){return this.signer.connection.chainId}get rpcUrl(){var tt;return((tt=this.http)===null||tt===void 0?void 0:tt.connection).url||""}async request(tt){switch(tt.method){case"eth_requestAccounts":return await this.connect(),this.signer.connection.accounts;case"eth_accounts":return this.signer.connection.accounts;case"eth_chainId":return this.signer.connection.chainId}if(signingMethods.includes(tt.method))return this.signer.request(tt);if(typeof this.http>"u")throw new Error(`Cannot request JSON-RPC method (${tt.method}) without provided rpc url`);return this.http.request(tt)}sendAsync(tt,rt){this.request(tt).then(at=>rt(null,at)).catch(at=>rt(at,void 0))}async enable(){return await this.request({method:"eth_requestAccounts"})}async connect(){this.signer.connection.connected||await this.signer.connect()}async disconnect(){this.signer.connection.connected&&await this.signer.disconnect()}on(tt,rt){this.events.on(tt,rt)}once(tt,rt){this.events.once(tt,rt)}removeListener(tt,rt){this.events.removeListener(tt,rt)}off(tt,rt){this.events.off(tt,rt)}get isWalletConnect(){return!0}registerEventListeners(){this.signer.connection.on("accountsChanged",tt=>{this.events.emit("accountsChanged",tt)}),this.signer.connection.on("chainChanged",tt=>{this.http=this.setHttpProvider(tt),this.events.emit("chainChanged",tt)}),this.signer.on("disconnect",()=>{this.events.emit("disconnect")})}setHttpProvider(tt){const rt=getRpcUrl(tt,this.rpc);return typeof rt>"u"?void 0:new JsonRpcProvider(new HttpConnection(rt))}}function _classPrivateMethodInitSpec(it,tt){_checkPrivateRedeclaration(it,tt),tt.add(it)}function _classPrivateMethodGet(it,tt,rt){if(!tt.has(it))throw new TypeError("attempted to get private field on non-instance");return rt}const switchChainAllowedRegex=/(rainbow)/i;var _provider=new WeakMap,_switchChain=new WeakSet;class WalletConnectConnector extends Connector$1{constructor(tt){super(tt),_classPrivateMethodInitSpec(this,_switchChain),_defineProperty$1(this,"id","walletConnect"),_defineProperty$1(this,"name","WalletConnect"),_defineProperty$1(this,"ready",!0),_classPrivateFieldInitSpec(this,_provider,{writable:!0,value:void 0}),_defineProperty$1(this,"onAccountsChanged",rt=>{rt.length===0?this.emit("disconnect"):this.emit("change",{account:utils$7.getAddress(rt[0])})}),_defineProperty$1(this,"onChainChanged",rt=>{const at=normalizeChainId(rt),st=this.isChainUnsupported(at);this.emit("change",{chain:{id:at,unsupported:st}})}),_defineProperty$1(this,"onDisconnect",()=>{this.emit("disconnect")})}async connect(){try{var tt,rt,at;const st=this.getProvider(!0);st.on("accountsChanged",this.onAccountsChanged),st.on("chainChanged",this.onChainChanged),st.on("disconnect",this.onDisconnect);const ot=await st.enable(),lt=utils$7.getAddress(ot[0]),ut=await this.getChainId(),ht=this.isChainUnsupported(ut),mt=(tt=(rt=st.connector)===null||rt===void 0||(at=rt.peerMeta)===null||at===void 0?void 0:at.name)!==null&&tt!==void 0?tt:"";return switchChainAllowedRegex.test(mt)&&(this.switchChain=_classPrivateMethodGet(this,_switchChain,_switchChain2)),{account:lt,chain:{id:ut,unsupported:ht},provider:new Web3Provider(st)}}catch(st){throw/user closed modal/i.test(st.message)?new UserRejectedRequestError:st}}async disconnect(){const tt=this.getProvider();await tt.disconnect(),tt.removeListener("accountsChanged",this.onAccountsChanged),tt.removeListener("chainChanged",this.onChainChanged),tt.removeListener("disconnect",this.onDisconnect),typeof localStorage<"u"&&localStorage.removeItem("walletconnect")}async getAccount(){const rt=this.getProvider().accounts;return utils$7.getAddress(rt[0])}async getChainId(){const tt=this.getProvider();return normalizeChainId(tt.chainId)}getProvider(tt){return(!_classPrivateFieldGet(this,_provider)||tt)&&_classPrivateFieldSet(this,_provider,new WalletConnectProvider(this.options)),_classPrivateFieldGet(this,_provider)}async getSigner(){const tt=this.getProvider(),rt=await this.getAccount();return new Web3Provider(tt).getSigner(rt)}async isAuthorized(){try{return!!await this.getAccount()}catch{return!1}}}async function _switchChain2(it){const tt=this.getProvider(),rt=utils$7.hexValue(it);try{return await tt.request({method:"wallet_switchEthereumChain",params:[{chainId:rt}]}),[...this.chains,...allChains].find(st=>st.id===it)}catch(at){const st=typeof at=="string"?at:at==null?void 0:at.message;throw/user rejected request/i.test(st)?new UserRejectedRequestError:new SwitchChainError}}function useConnect(){const it=useContext();return invariant$1(it,"useConnect() can only be used inside <ThirdwebProvider />. If you are using <ThirdwebSDKProvider /> you will have to use your own connection logic."),useConnect$1()}function Mime$1(){this._types=Object.create(null),this._extensions=Object.create(null);for(let it=0;it<arguments.length;it++)this.define(arguments[it]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Mime$1.prototype.define=function(it,tt){for(let rt in it){let at=it[rt].map(function(st){return st.toLowerCase()});rt=rt.toLowerCase();for(let st=0;st<at.length;st++){const ot=at[st];if(ot[0]!=="*"){if(!tt&&ot in this._types)throw new Error('Attempt to change mapping for "'+ot+'" extension from "'+this._types[ot]+'" to "'+rt+'". Pass `force=true` to allow this, otherwise remove "'+ot+'" from the list of extensions for "'+rt+'".');this._types[ot]=rt}}if(tt||!this._extensions[rt]){const st=at[0];this._extensions[rt]=st[0]!=="*"?st:st.substr(1)}}},Mime$1.prototype.getType=function(it){it=String(it);let tt=it.replace(/^.*[/\\]/,"").toLowerCase(),rt=tt.replace(/^.*\./,"").toLowerCase(),at=tt.length<it.length;return(rt.length<tt.length-1||!at)&&this._types[rt]||null},Mime$1.prototype.getExtension=function(it){return it=/^\s*([^;\s]*)/.test(it)&&RegExp.$1,it&&this._extensions[it.toLowerCase()]||null};var Mime_1=Mime$1,standard={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/globalThis":["u8msg"],"message/globalThis-delivery-status":["u8dsn"],"message/globalThis-disposition-notification":["u8mdn"],"message/globalThis-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};let Mime=Mime_1;var lite=new Mime(standard),__spreadArray=globalThis&&globalThis.__spreadArray||function(it,tt,rt){if(rt||arguments.length===2)for(var at=0,st=tt.length,ot;at<st;at++)(ot||!(at in tt))&&(ot||(ot=Array.prototype.slice.call(tt,0,at)),ot[at]=tt[at]);return it.concat(ot||Array.prototype.slice.call(tt))},BrowserInfo=function(){function it(tt,rt,at){this.name=tt,this.version=rt,this.os=at,this.type="browser"}return it}(),NodeInfo=function(){function it(tt){this.version=tt,this.type="node",this.name="node",this.os=process.platform}return it}(),SearchBotDeviceInfo=function(){function it(tt,rt,at,st){this.name=tt,this.version=rt,this.os=at,this.bot=st,this.type="bot-device"}return it}(),BotInfo=function(){function it(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return it}(),ReactNativeInfo=function(){function it(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return it}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(it){return it?parseUserAgent(it):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(it){return it!==""&&userAgentRules.reduce(function(tt,rt){var at=rt[0],st=rt[1];if(tt)return tt;var ot=st.exec(it);return!!ot&&[at,ot]},!1)}function parseUserAgent(it){var tt=matchUserAgent(it);if(!tt)return null;var rt=tt[0],at=tt[1];if(rt==="searchbot")return new BotInfo;var st=at[1]&&at[1].split(".").join("_").split("_").slice(0,3);st?st.length<REQUIRED_VERSION_PARTS&&(st=__spreadArray(__spreadArray([],st,!0),createVersionParts(REQUIRED_VERSION_PARTS-st.length),!0)):st=[];var ot=st.join("."),lt=detectOS$1(it),ut=SEARCHBOT_OS_REGEX.exec(it);return ut&&ut[1]?new SearchBotDeviceInfo(rt,ot,lt,ut[1]):new BrowserInfo(rt,ot,lt)}function detectOS$1(it){for(var tt=0,rt=operatingSystemRules.length;tt<rt;tt++){var at=operatingSystemRules[tt],st=at[0],ot=at[1],lt=ot.exec(it);if(lt)return st}return null}function getNodeVersion(){var it=typeof process<"u"&&process.version;return it?new NodeInfo(process.version.slice(1)):null}function createVersionParts(it){for(var tt=[],rt=0;rt<it;rt++)tt.push("0");return tt}function _extends(){return _extends=Object.assign?Object.assign.bind():function(it){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var at in rt)Object.prototype.hasOwnProperty.call(rt,at)&&(it[at]=rt[at])}return it},_extends.apply(this,arguments)}function memoize$1(it){var tt=Object.create(null);return function(rt){return tt[rt]===void 0&&(tt[rt]=it(rt)),tt[rt]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(it){return reactPropsRegex.test(it)||it.charCodeAt(0)===111&&it.charCodeAt(1)===110&&it.charCodeAt(2)<91});function sheetForTag(it){if(it.sheet)return it.sheet;for(var tt=0;tt<document.styleSheets.length;tt++)if(document.styleSheets[tt].ownerNode===it)return document.styleSheets[tt]}function createStyleElement(it){var tt=document.createElement("style");return tt.setAttribute("data-emotion",it.key),it.nonce!==void 0&&tt.setAttribute("nonce",it.nonce),tt.appendChild(document.createTextNode("")),tt.setAttribute("data-s",""),tt}var StyleSheet=function(){function it(rt){var at=this;this._insertTag=function(st){var ot;at.tags.length===0?at.insertionPoint?ot=at.insertionPoint.nextSibling:at.prepend?ot=at.container.firstChild:ot=at.before:ot=at.tags[at.tags.length-1].nextSibling,at.container.insertBefore(st,ot),at.tags.push(st)},this.isSpeedy=rt.speedy===void 0?!0:rt.speedy,this.tags=[],this.ctr=0,this.nonce=rt.nonce,this.key=rt.key,this.container=rt.container,this.prepend=rt.prepend,this.insertionPoint=rt.insertionPoint,this.before=null}var tt=it.prototype;return tt.hydrate=function(at){at.forEach(this._insertTag)},tt.insert=function(at){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var st=this.tags[this.tags.length-1];if(this.isSpeedy){var ot=sheetForTag(st);try{ot.insertRule(at,ot.cssRules.length)}catch{}}else st.appendChild(document.createTextNode(at));this.ctr++},tt.flush=function(){this.tags.forEach(function(at){return at.parentNode&&at.parentNode.removeChild(at)}),this.tags=[],this.ctr=0},it}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(it,tt){return charat(it,0)^45?(((tt<<2^charat(it,0))<<2^charat(it,1))<<2^charat(it,2))<<2^charat(it,3):0}function trim(it){return it.trim()}function match$1(it,tt){return(it=tt.exec(it))?it[0]:it}function replace(it,tt,rt){return it.replace(tt,rt)}function indexof(it,tt){return it.indexOf(tt)}function charat(it,tt){return it.charCodeAt(tt)|0}function substr(it,tt,rt){return it.slice(tt,rt)}function strlen(it){return it.length}function sizeof(it){return it.length}function append(it,tt){return tt.push(it),it}function combine(it,tt){return it.map(tt).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(it,tt,rt,at,st,ot,lt){return{value:it,root:tt,parent:rt,type:at,props:st,children:ot,line,column,length:lt,return:""}}function copy(it,tt){return assign(node("",null,null,"",null,null,0),it,{length:-it.length},tt)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice$1(it,tt){return substr(characters,it,tt)}function token(it){switch(it){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(it){return line=column=1,length=strlen(characters=it),position=0,[]}function dealloc(it){return characters="",it}function delimit(it){return trim(slice$1(position-1,delimiter(it===91?it+2:it===40?it+1:it)))}function whitespace(it){for(;(character=peek())&&character<33;)next();return token(it)>2||token(character)>3?"":" "}function escaping(it,tt){for(;--tt&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(it,caret()+(tt<6&&peek()==32&&next()==32))}function delimiter(it){for(;next();)switch(character){case it:return position;case 34:case 39:it!==34&&it!==39&&delimiter(character);break;case 40:it===41&&delimiter(it);break;case 92:next();break}return position}function commenter(it,tt){for(;next()&&it+character!==47+10;)if(it+character===42+42&&peek()===47)break;return"/*"+slice$1(tt,position-1)+"*"+from(it===47?it:next())}function identifier(it){for(;!token(peek());)next();return slice$1(it,position)}function compile(it){return dealloc(parse("",null,null,null,[""],it=alloc(it),0,[0],it))}function parse(it,tt,rt,at,st,ot,lt,ut,ht){for(var mt=0,bt=0,vt=lt,At=0,xt=0,Et=0,Tt=1,wt=1,Ct=1,It=0,St="",Rt=st,Dt=ot,Wt=at,qt=St;wt;)switch(Et=It,It=next()){case 40:if(Et!=108&&charat(qt,vt-1)==58){indexof(qt+=replace(delimit(It),"&","&\f"),"&\f")!=-1&&(Ct=-1);break}case 34:case 39:case 91:qt+=delimit(It);break;case 9:case 10:case 13:case 32:qt+=whitespace(Et);break;case 92:qt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),tt,rt),ht);break;default:qt+="/"}break;case 123*Tt:ut[mt++]=strlen(qt)*Ct;case 125*Tt:case 59:case 0:switch(It){case 0:case 125:wt=0;case 59+bt:xt>0&&strlen(qt)-vt&&append(xt>32?declaration(qt+";",at,rt,vt-1):declaration(replace(qt," ","")+";",at,rt,vt-2),ht);break;case 59:qt+=";";default:if(append(Wt=ruleset(qt,tt,rt,mt,bt,st,ut,St,Rt=[],Dt=[],vt),ot),It===123)if(bt===0)parse(qt,tt,Wt,Wt,Rt,ot,vt,ut,Dt);else switch(At===99&&charat(qt,3)===110?100:At){case 100:case 109:case 115:parse(it,Wt,Wt,at&&append(ruleset(it,Wt,Wt,0,0,st,ut,St,st,Rt=[],vt),Dt),st,Dt,vt,ut,at?Rt:Dt);break;default:parse(qt,Wt,Wt,Wt,[""],Dt,0,ut,Dt)}}mt=bt=xt=0,Tt=Ct=1,St=qt="",vt=lt;break;case 58:vt=1+strlen(qt),xt=Et;default:if(Tt<1){if(It==123)--Tt;else if(It==125&&Tt++==0&&prev()==125)continue}switch(qt+=from(It),It*Tt){case 38:Ct=bt>0?1:(qt+="\f",-1);break;case 44:ut[mt++]=(strlen(qt)-1)*Ct,Ct=1;break;case 64:peek()===45&&(qt+=delimit(next())),At=peek(),bt=vt=strlen(St=qt+=identifier(caret())),It++;break;case 45:Et===45&&strlen(qt)==2&&(Tt=0)}}return ot}function ruleset(it,tt,rt,at,st,ot,lt,ut,ht,mt,bt){for(var vt=st-1,At=st===0?ot:[""],xt=sizeof(At),Et=0,Tt=0,wt=0;Et<at;++Et)for(var Ct=0,It=substr(it,vt+1,vt=abs(Tt=lt[Et])),St=it;Ct<xt;++Ct)(St=trim(Tt>0?At[Ct]+" "+It:replace(It,/&\f/g,At[Ct])))&&(ht[wt++]=St);return node(it,tt,rt,st===0?RULESET:ut,ht,mt,bt)}function comment(it,tt,rt){return node(it,tt,rt,COMMENT,from(char()),substr(it,2,-2),0)}function declaration(it,tt,rt,at){return node(it,tt,rt,DECLARATION,substr(it,0,at),substr(it,at+1,-1),at)}function serialize(it,tt){for(var rt="",at=sizeof(it),st=0;st<at;st++)rt+=tt(it[st],st,it,tt)||"";return rt}function stringify(it,tt,rt,at){switch(it.type){case IMPORT:case DECLARATION:return it.return=it.return||it.value;case COMMENT:return"";case KEYFRAMES:return it.return=it.value+"{"+serialize(it.children,at)+"}";case RULESET:it.value=it.props.join(",")}return strlen(rt=serialize(it.children,at))?it.return=it.value+"{"+rt+"}":""}function middleware(it){var tt=sizeof(it);return function(rt,at,st,ot){for(var lt="",ut=0;ut<tt;ut++)lt+=it[ut](rt,at,st,ot)||"";return lt}}function rulesheet(it){return function(tt){tt.root||(tt=tt.return)&&it(tt)}}var weakMemoize=function it(tt){var rt=new WeakMap;return function(at){if(rt.has(at))return rt.get(at);var st=tt(at);return rt.set(at,st),st}},identifierWithPointTracking=function it(tt,rt,at){for(var st=0,ot=0;st=ot,ot=peek(),st===38&&ot===12&&(rt[at]=1),!token(ot);)next();return slice$1(tt,position)},toRules=function it(tt,rt){var at=-1,st=44;do switch(token(st)){case 0:st===38&&peek()===12&&(rt[at]=1),tt[at]+=identifierWithPointTracking(position-1,rt,at);break;case 2:tt[at]+=delimit(st);break;case 4:if(st===44){tt[++at]=peek()===58?"&\f":"",rt[at]=tt[at].length;break}default:tt[at]+=from(st)}while(st=next());return tt},getRules=function it(tt,rt){return dealloc(toRules(alloc(tt),rt))},fixedElements=new WeakMap,compat=function it(tt){if(!(tt.type!=="rule"||!tt.parent||tt.length<1)){for(var rt=tt.value,at=tt.parent,st=tt.column===at.column&&tt.line===at.line;at.type!=="rule";)if(at=at.parent,!at)return;if(!(tt.props.length===1&&rt.charCodeAt(0)!==58&&!fixedElements.get(at))&&!st){fixedElements.set(tt,!0);for(var ot=[],lt=getRules(rt,ot),ut=at.props,ht=0,mt=0;ht<lt.length;ht++)for(var bt=0;bt<ut.length;bt++,mt++)tt.props[mt]=ot[ht]?lt[ht].replace(/&\f/g,ut[bt]):ut[bt]+" "+lt[ht]}}},removeLabel=function it(tt){if(tt.type==="decl"){var rt=tt.value;rt.charCodeAt(0)===108&&rt.charCodeAt(2)===98&&(tt.return="",tt.value="")}};function prefix(it,tt){switch(hash(it,tt)){case 5103:return WEBKIT+"print-"+it+it;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+it+it;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+it+MOZ+it+MS+it+it;case 6828:case 4268:return WEBKIT+it+MS+it+it;case 6165:return WEBKIT+it+MS+"flex-"+it+it;case 5187:return WEBKIT+it+replace(it,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+it;case 5443:return WEBKIT+it+MS+"flex-item-"+replace(it,/flex-|-self/,"")+it;case 4675:return WEBKIT+it+MS+"flex-line-pack"+replace(it,/align-content|flex-|-self/,"")+it;case 5548:return WEBKIT+it+MS+replace(it,"shrink","negative")+it;case 5292:return WEBKIT+it+MS+replace(it,"basis","preferred-size")+it;case 6060:return WEBKIT+"box-"+replace(it,"-grow","")+WEBKIT+it+MS+replace(it,"grow","positive")+it;case 4554:return WEBKIT+replace(it,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+it;case 6187:return replace(replace(replace(it,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),it,"")+it;case 5495:case 3959:return replace(it,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(it,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+it+it;case 4095:case 3583:case 4068:case 2532:return replace(it,/(.+)-inline(.+)/,WEBKIT+"$1$2")+it;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(it)-1-tt>6)switch(charat(it,tt+1)){case 109:if(charat(it,tt+4)!==45)break;case 102:return replace(it,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(it,tt+3)==108?"$3":"$2-$3"))+it;case 115:return~indexof(it,"stretch")?prefix(replace(it,"stretch","fill-available"),tt)+it:it}break;case 4949:if(charat(it,tt+1)!==115)break;case 6444:switch(charat(it,strlen(it)-3-(~indexof(it,"!important")&&10))){case 107:return replace(it,":",":"+WEBKIT)+it;case 101:return replace(it,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(it,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+it}break;case 5936:switch(charat(it,tt+11)){case 114:return WEBKIT+it+MS+replace(it,/[svh]\w+-[tblr]{2}/,"tb")+it;case 108:return WEBKIT+it+MS+replace(it,/[svh]\w+-[tblr]{2}/,"tb-rl")+it;case 45:return WEBKIT+it+MS+replace(it,/[svh]\w+-[tblr]{2}/,"lr")+it}return WEBKIT+it+MS+it+it}return it}var prefixer=function it(tt,rt,at,st){if(tt.length>-1&&!tt.return)switch(tt.type){case DECLARATION:tt.return=prefix(tt.value,tt.length);break;case KEYFRAMES:return serialize([copy(tt,{value:replace(tt.value,"@","@"+WEBKIT)})],st);case RULESET:if(tt.length)return combine(tt.props,function(ot){switch(match$1(ot,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(tt,{props:[replace(ot,/:(read-\w+)/,":"+MOZ+"$1")]})],st);case"::placeholder":return serialize([copy(tt,{props:[replace(ot,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(tt,{props:[replace(ot,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(tt,{props:[replace(ot,/:(plac\w+)/,MS+"input-$1")]})],st)}return""})}},defaultStylisPlugins=[prefixer],createCache=function it(tt){var rt=tt.key;if(rt==="css"){var at=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(at,function(Tt){var wt=Tt.getAttribute("data-emotion");wt.indexOf(" ")!==-1&&(document.head.appendChild(Tt),Tt.setAttribute("data-s",""))})}var st=tt.stylisPlugins||defaultStylisPlugins,ot={},lt,ut=[];lt=tt.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+rt+' "]'),function(Tt){for(var wt=Tt.getAttribute("data-emotion").split(" "),Ct=1;Ct<wt.length;Ct++)ot[wt[Ct]]=!0;ut.push(Tt)});var ht,mt=[compat,removeLabel];{var bt,vt=[stringify,rulesheet(function(Tt){bt.insert(Tt)})],At=middleware(mt.concat(st,vt)),xt=function(wt){return serialize(compile(wt),At)};ht=function(wt,Ct,It,St){bt=It,xt(wt?wt+"{"+Ct.styles+"}":Ct.styles),St&&(Et.inserted[Ct.name]=!0)}}var Et={key:rt,sheet:new StyleSheet({key:rt,container:lt,nonce:tt.nonce,speedy:tt.speedy,prepend:tt.prepend,insertionPoint:tt.insertionPoint}),nonce:tt.nonce,inserted:ot,registered:{},insert:ht};return Et.sheet.hydrate(ut),Et},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var b=typeof Symbol=="function"&&Symbol.for,c$3=b?Symbol.for("react.element"):60103,d$2=b?Symbol.for("react.portal"):60106,e$5=b?Symbol.for("react.fragment"):60107,f$2=b?Symbol.for("react.strict_mode"):60108,g$3=b?Symbol.for("react.profiler"):60114,h$3=b?Symbol.for("react.provider"):60109,k$1=b?Symbol.for("react.context"):60110,l$4=b?Symbol.for("react.async_mode"):60111,m$1=b?Symbol.for("react.concurrent_mode"):60111,n$7=b?Symbol.for("react.forward_ref"):60112,p$3=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r$4=b?Symbol.for("react.memo"):60115,t$4=b?Symbol.for("react.lazy"):60116,v$1=b?Symbol.for("react.block"):60121,w$1=b?Symbol.for("react.fundamental"):60117,x$3=b?Symbol.for("react.responder"):60118,y$1=b?Symbol.for("react.scope"):60119;function z$1(it){if(typeof it=="object"&&it!==null){var tt=it.$$typeof;switch(tt){case c$3:switch(it=it.type,it){case l$4:case m$1:case e$5:case g$3:case f$2:case p$3:return it;default:switch(it=it&&it.$$typeof,it){case k$1:case n$7:case t$4:case r$4:case h$3:return it;default:return tt}}case d$2:return tt}}}function A$2(it){return z$1(it)===m$1}reactIs_production_min.AsyncMode=l$4,reactIs_production_min.ConcurrentMode=m$1,reactIs_production_min.ContextConsumer=k$1,reactIs_production_min.ContextProvider=h$3,reactIs_production_min.Element=c$3,reactIs_production_min.ForwardRef=n$7,reactIs_production_min.Fragment=e$5,reactIs_production_min.Lazy=t$4,reactIs_production_min.Memo=r$4,reactIs_production_min.Portal=d$2,reactIs_production_min.Profiler=g$3,reactIs_production_min.StrictMode=f$2,reactIs_production_min.Suspense=p$3,reactIs_production_min.isAsyncMode=function(it){return A$2(it)||z$1(it)===l$4},reactIs_production_min.isConcurrentMode=A$2,reactIs_production_min.isContextConsumer=function(it){return z$1(it)===k$1},reactIs_production_min.isContextProvider=function(it){return z$1(it)===h$3},reactIs_production_min.isElement=function(it){return typeof it=="object"&&it!==null&&it.$$typeof===c$3},reactIs_production_min.isForwardRef=function(it){return z$1(it)===n$7},reactIs_production_min.isFragment=function(it){return z$1(it)===e$5},reactIs_production_min.isLazy=function(it){return z$1(it)===t$4},reactIs_production_min.isMemo=function(it){return z$1(it)===r$4},reactIs_production_min.isPortal=function(it){return z$1(it)===d$2},reactIs_production_min.isProfiler=function(it){return z$1(it)===g$3},reactIs_production_min.isStrictMode=function(it){return z$1(it)===f$2},reactIs_production_min.isSuspense=function(it){return z$1(it)===p$3},reactIs_production_min.isValidElementType=function(it){return typeof it=="string"||typeof it=="function"||it===e$5||it===m$1||it===g$3||it===f$2||it===p$3||it===q||typeof it=="object"&&it!==null&&(it.$$typeof===t$4||it.$$typeof===r$4||it.$$typeof===h$3||it.$$typeof===k$1||it.$$typeof===n$7||it.$$typeof===w$1||it.$$typeof===x$3||it.$$typeof===y$1||it.$$typeof===v$1)},reactIs_production_min.typeOf=z$1,function(it){it.exports=reactIs_production_min}(reactIs$1);var reactIs=reactIs$1.exports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS,TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(it,tt,rt){var at="";return rt.split(" ").forEach(function(st){it[st]!==void 0?tt.push(it[st]+";"):at+=st+" "}),at}var registerStyles=function it(tt,rt,at){var st=tt.key+"-"+rt.name;(at===!1||isBrowser===!1)&&tt.registered[st]===void 0&&(tt.registered[st]=rt.styles)},insertStyles=function it(tt,rt,at){registerStyles(tt,rt,at);var st=tt.key+"-"+rt.name;if(tt.inserted[rt.name]===void 0){var ot=rt;do tt.insert(rt===ot?"."+st:"",ot,tt.sheet,!0),ot=ot.next;while(ot!==void 0)}};function murmur2(it){for(var tt=0,rt,at=0,st=it.length;st>=4;++at,st-=4)rt=it.charCodeAt(at)&255|(it.charCodeAt(++at)&255)<<8|(it.charCodeAt(++at)&255)<<16|(it.charCodeAt(++at)&255)<<24,rt=(rt&65535)*1540483477+((rt>>>16)*59797<<16),rt^=rt>>>24,tt=(rt&65535)*1540483477+((rt>>>16)*59797<<16)^(tt&65535)*1540483477+((tt>>>16)*59797<<16);switch(st){case 3:tt^=(it.charCodeAt(at+2)&255)<<16;case 2:tt^=(it.charCodeAt(at+1)&255)<<8;case 1:tt^=it.charCodeAt(at)&255,tt=(tt&65535)*1540483477+((tt>>>16)*59797<<16)}return tt^=tt>>>13,tt=(tt&65535)*1540483477+((tt>>>16)*59797<<16),((tt^tt>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function it(tt){return tt.charCodeAt(1)===45},isProcessableValue=function it(tt){return tt!=null&&typeof tt!="boolean"},processStyleName=memoize$1(function(it){return isCustomProperty(it)?it:it.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function it(tt,rt){switch(tt){case"animation":case"animationName":if(typeof rt=="string")return rt.replace(animationRegex,function(at,st,ot){return cursor={name:st,styles:ot,next:cursor},st})}return unitlessKeys[tt]!==1&&!isCustomProperty(tt)&&typeof rt=="number"&&rt!==0?rt+"px":rt},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(it,tt,rt){if(rt==null)return"";if(rt.__emotion_styles!==void 0)return rt;switch(typeof rt){case"boolean":return"";case"object":{if(rt.anim===1)return cursor={name:rt.name,styles:rt.styles,next:cursor},rt.name;if(rt.styles!==void 0){var at=rt.next;if(at!==void 0)for(;at!==void 0;)cursor={name:at.name,styles:at.styles,next:cursor},at=at.next;var st=rt.styles+";";return st}return createStringFromObject(it,tt,rt)}case"function":{if(it!==void 0){var ot=cursor,lt=rt(it);return cursor=ot,handleInterpolation(it,tt,lt)}break}}if(tt==null)return rt;var ut=tt[rt];return ut!==void 0?ut:rt}function createStringFromObject(it,tt,rt){var at="";if(Array.isArray(rt))for(var st=0;st<rt.length;st++)at+=handleInterpolation(it,tt,rt[st])+";";else for(var ot in rt){var lt=rt[ot];if(typeof lt!="object")tt!=null&&tt[lt]!==void 0?at+=ot+"{"+tt[lt]+"}":isProcessableValue(lt)&&(at+=processStyleName(ot)+":"+processStyleValue(ot,lt)+";");else if(Array.isArray(lt)&&typeof lt[0]=="string"&&(tt==null||tt[lt[0]]===void 0))for(var ut=0;ut<lt.length;ut++)isProcessableValue(lt[ut])&&(at+=processStyleName(ot)+":"+processStyleValue(ot,lt[ut])+";");else{var ht=handleInterpolation(it,tt,lt);switch(ot){case"animation":case"animationName":{at+=processStyleName(ot)+":"+ht+";";break}default:at+=ot+"{"+ht+"}"}}}return at}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function it(tt,rt,at){if(tt.length===1&&typeof tt[0]=="object"&&tt[0]!==null&&tt[0].styles!==void 0)return tt[0];var st=!0,ot="";cursor=void 0;var lt=tt[0];lt==null||lt.raw===void 0?(st=!1,ot+=handleInterpolation(at,rt,lt)):ot+=lt[0];for(var ut=1;ut<tt.length;ut++)ot+=handleInterpolation(at,rt,tt[ut]),st&&(ot+=lt[ut]);labelPattern.lastIndex=0;for(var ht="",mt;(mt=labelPattern.exec(ot))!==null;)ht+="-"+mt[1];var bt=murmur2(ot)+ht;return{name:bt,styles:ot,next:cursor}},syncFallback=function it(tt){return tt()},useInsertionEffect=React$2["useInsertionEffect"]?React$2["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,EmotionCacheContext=react.exports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function it(tt){return react.exports.forwardRef(function(rt,at){var st=react.exports.useContext(EmotionCacheContext);return tt(rt,st,at)})},ThemeContext$2=react.exports.createContext({}),getTheme=function it(tt,rt){if(typeof rt=="function"){var at=rt(tt);return at}return _extends({},tt,rt)},createCacheWithTheme=weakMemoize(function(it){return weakMemoize(function(tt){return getTheme(it,tt)})}),ThemeProvider$3=function it(tt){var rt=react.exports.useContext(ThemeContext$2);return tt.theme!==rt&&(rt=createCacheWithTheme(rt)(tt.theme)),react.exports.createElement(ThemeContext$2.Provider,{value:rt},tt.children)};function css(){for(var it=arguments.length,tt=new Array(it),rt=0;rt<it;rt++)tt[rt]=arguments[rt];return serializeStyles(tt)}var keyframes=function it(){var tt=css.apply(void 0,arguments),rt="animation-"+tt.name;return{name:rt,styles:"@keyframes "+rt+"{"+tt.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function it(tt){return tt!=="theme"},getDefaultShouldForwardProp=function it(tt){return typeof tt=="string"&&tt.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function it(tt,rt,at){var st;if(rt){var ot=rt.shouldForwardProp;st=tt.__emotion_forwardProp&&ot?function(lt){return tt.__emotion_forwardProp(lt)&&ot(lt)}:ot}return typeof st!="function"&&at&&(st=tt.__emotion_forwardProp),st},Insertion=function it(tt){var rt=tt.cache,at=tt.serialized,st=tt.isStringTag;return registerStyles(rt,at,st),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(rt,at,st)}),null},createStyled$1=function it(tt,rt){var at=tt.__emotion_real===tt,st=at&&tt.__emotion_base||tt,ot,lt;rt!==void 0&&(ot=rt.label,lt=rt.target);var ut=composeShouldForwardProps(tt,rt,at),ht=ut||getDefaultShouldForwardProp(st),mt=!ht("as");return function(){var bt=arguments,vt=at&&tt.__emotion_styles!==void 0?tt.__emotion_styles.slice(0):[];if(ot!==void 0&&vt.push("label:"+ot+";"),bt[0]==null||bt[0].raw===void 0)vt.push.apply(vt,bt);else{vt.push(bt[0][0]);for(var At=bt.length,xt=1;xt<At;xt++)vt.push(bt[xt],bt[0][xt])}var Et=withEmotionCache(function(Tt,wt,Ct){var It=mt&&Tt.as||st,St="",Rt=[],Dt=Tt;if(Tt.theme==null){Dt={};for(var Wt in Tt)Dt[Wt]=Tt[Wt];Dt.theme=react.exports.useContext(ThemeContext$2)}typeof Tt.className=="string"?St=getRegisteredStyles(wt.registered,Rt,Tt.className):Tt.className!=null&&(St=Tt.className+" ");var qt=serializeStyles(vt.concat(Rt),wt.registered,Dt);St+=wt.key+"-"+qt.name,lt!==void 0&&(St+=" "+lt);var Vt=mt&&ut===void 0?getDefaultShouldForwardProp(It):ht,Yt={};for(var jt in Tt)mt&&jt==="as"||Vt(jt)&&(Yt[jt]=Tt[jt]);return Yt.className=St,Yt.ref=Ct,react.exports.createElement(react.exports.Fragment,null,react.exports.createElement(Insertion,{cache:wt,serialized:qt,isStringTag:typeof It=="string"}),react.exports.createElement(It,Yt))});return Et.displayName=ot!==void 0?ot:"Styled("+(typeof st=="string"?st:st.displayName||st.name||"Component")+")",Et.defaultProps=tt.defaultProps,Et.__emotion_real=Et,Et.__emotion_base=st,Et.__emotion_styles=vt,Et.__emotion_forwardProp=ut,Object.defineProperty(Et,"toString",{value:function(){return"."+lt}}),Et.withComponent=function(Tt,wt){return it(Tt,_extends({},rt,wt,{shouldForwardProp:composeShouldForwardProps(Et,wt,!0)})).apply(void 0,vt)},Et}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(it){newStyled[it]=newStyled(it)});var colorString$1={exports:{}},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},simpleSwizzle={exports:{}},isArrayish$1=function it(tt){return!tt||typeof tt=="string"?!1:tt instanceof Array||Array.isArray(tt)||tt.length>=0&&(tt.splice instanceof Function||Object.getOwnPropertyDescriptor(tt,tt.length-1)&&tt.constructor.name!=="String")},isArrayish=isArrayish$1,concat=Array.prototype.concat,slice=Array.prototype.slice,swizzle$1=simpleSwizzle.exports=function it(tt){for(var rt=[],at=0,st=tt.length;at<st;at++){var ot=tt[at];isArrayish(ot)?rt=concat.call(rt,slice.call(ot)):rt.push(ot)}return rt};swizzle$1.wrap=function(it){return function(){return it(swizzle$1(arguments))}};var colorNames=colorName,swizzle=simpleSwizzle.exports,hasOwnProperty=Object.hasOwnProperty,reverseNames=Object.create(null);for(var name in colorNames)hasOwnProperty.call(colorNames,name)&&(reverseNames[colorNames[name]]=name);var cs=colorString$1.exports={to:{},get:{}};cs.get=function(it){var tt=it.substring(0,3).toLowerCase(),rt,at;switch(tt){case"hsl":rt=cs.get.hsl(it),at="hsl";break;case"hwb":rt=cs.get.hwb(it),at="hwb";break;default:rt=cs.get.rgb(it),at="rgb";break}return rt?{model:at,value:rt}:null},cs.get.rgb=function(it){if(!it)return null;var tt=/^#([a-f0-9]{3,4})$/i,rt=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,at=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,st=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,ot=/^(\w+)$/,lt=[0,0,0,1],ut,ht,mt;if(ut=it.match(rt)){for(mt=ut[2],ut=ut[1],ht=0;ht<3;ht++){var bt=ht*2;lt[ht]=parseInt(ut.slice(bt,bt+2),16)}mt&&(lt[3]=parseInt(mt,16)/255)}else if(ut=it.match(tt)){for(ut=ut[1],mt=ut[3],ht=0;ht<3;ht++)lt[ht]=parseInt(ut[ht]+ut[ht],16);mt&&(lt[3]=parseInt(mt+mt,16)/255)}else if(ut=it.match(at)){for(ht=0;ht<3;ht++)lt[ht]=parseInt(ut[ht+1],0);ut[4]&&(ut[5]?lt[3]=parseFloat(ut[4])*.01:lt[3]=parseFloat(ut[4]))}else if(ut=it.match(st)){for(ht=0;ht<3;ht++)lt[ht]=Math.round(parseFloat(ut[ht+1])*2.55);ut[4]&&(ut[5]?lt[3]=parseFloat(ut[4])*.01:lt[3]=parseFloat(ut[4]))}else return(ut=it.match(ot))?ut[1]==="transparent"?[0,0,0,0]:hasOwnProperty.call(colorNames,ut[1])?(lt=colorNames[ut[1]],lt[3]=1,lt):null:null;for(ht=0;ht<3;ht++)lt[ht]=clamp$3(lt[ht],0,255);return lt[3]=clamp$3(lt[3],0,1),lt},cs.get.hsl=function(it){if(!it)return null;var tt=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,rt=it.match(tt);if(rt){var at=parseFloat(rt[4]),st=(parseFloat(rt[1])%360+360)%360,ot=clamp$3(parseFloat(rt[2]),0,100),lt=clamp$3(parseFloat(rt[3]),0,100),ut=clamp$3(isNaN(at)?1:at,0,1);return[st,ot,lt,ut]}return null},cs.get.hwb=function(it){if(!it)return null;var tt=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,rt=it.match(tt);if(rt){var at=parseFloat(rt[4]),st=(parseFloat(rt[1])%360+360)%360,ot=clamp$3(parseFloat(rt[2]),0,100),lt=clamp$3(parseFloat(rt[3]),0,100),ut=clamp$3(isNaN(at)?1:at,0,1);return[st,ot,lt,ut]}return null},cs.to.hex=function(){var it=swizzle(arguments);return"#"+hexDouble(it[0])+hexDouble(it[1])+hexDouble(it[2])+(it[3]<1?hexDouble(Math.round(it[3]*255)):"")},cs.to.rgb=function(){var it=swizzle(arguments);return it.length<4||it[3]===1?"rgb("+Math.round(it[0])+", "+Math.round(it[1])+", "+Math.round(it[2])+")":"rgba("+Math.round(it[0])+", "+Math.round(it[1])+", "+Math.round(it[2])+", "+it[3]+")"},cs.to.rgb.percent=function(){var it=swizzle(arguments),tt=Math.round(it[0]/255*100),rt=Math.round(it[1]/255*100),at=Math.round(it[2]/255*100);return it.length<4||it[3]===1?"rgb("+tt+"%, "+rt+"%, "+at+"%)":"rgba("+tt+"%, "+rt+"%, "+at+"%, "+it[3]+")"},cs.to.hsl=function(){var it=swizzle(arguments);return it.length<4||it[3]===1?"hsl("+it[0]+", "+it[1]+"%, "+it[2]+"%)":"hsla("+it[0]+", "+it[1]+"%, "+it[2]+"%, "+it[3]+")"},cs.to.hwb=function(){var it=swizzle(arguments),tt="";return it.length>=4&&it[3]!==1&&(tt=", "+it[3]),"hwb("+it[0]+", "+it[1]+"%, "+it[2]+"%"+tt+")"},cs.to.keyword=function(it){return reverseNames[it.slice(0,3)]};function clamp$3(it,tt,rt){return Math.min(Math.max(tt,it),rt)}function hexDouble(it){var tt=Math.round(it).toString(16).toUpperCase();return tt.length<2?"0"+tt:tt}const cssKeywords=colorName,reverseKeywords={};for(const it of Object.keys(cssKeywords))reverseKeywords[cssKeywords[it]]=it;const convert$2={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var conversions$2=convert$2;for(const it of Object.keys(convert$2)){if(!("channels"in convert$2[it]))throw new Error("missing channels property: "+it);if(!("labels"in convert$2[it]))throw new Error("missing channel labels property: "+it);if(convert$2[it].labels.length!==convert$2[it].channels)throw new Error("channel and label counts mismatch: "+it);const{channels:tt,labels:rt}=convert$2[it];delete convert$2[it].channels,delete convert$2[it].labels,Object.defineProperty(convert$2[it],"channels",{value:tt}),Object.defineProperty(convert$2[it],"labels",{value:rt})}convert$2.rgb.hsl=function(it){const tt=it[0]/255,rt=it[1]/255,at=it[2]/255,st=Math.min(tt,rt,at),ot=Math.max(tt,rt,at),lt=ot-st;let ut,ht;ot===st?ut=0:tt===ot?ut=(rt-at)/lt:rt===ot?ut=2+(at-tt)/lt:at===ot&&(ut=4+(tt-rt)/lt),ut=Math.min(ut*60,360),ut<0&&(ut+=360);const mt=(st+ot)/2;return ot===st?ht=0:mt<=.5?ht=lt/(ot+st):ht=lt/(2-ot-st),[ut,ht*100,mt*100]},convert$2.rgb.hsv=function(it){let tt,rt,at,st,ot;const lt=it[0]/255,ut=it[1]/255,ht=it[2]/255,mt=Math.max(lt,ut,ht),bt=mt-Math.min(lt,ut,ht),vt=function(At){return(mt-At)/6/bt+1/2};return bt===0?(st=0,ot=0):(ot=bt/mt,tt=vt(lt),rt=vt(ut),at=vt(ht),lt===mt?st=at-rt:ut===mt?st=1/3+tt-at:ht===mt&&(st=2/3+rt-tt),st<0?st+=1:st>1&&(st-=1)),[st*360,ot*100,mt*100]},convert$2.rgb.hwb=function(it){const tt=it[0],rt=it[1];let at=it[2];const st=convert$2.rgb.hsl(it)[0],ot=1/255*Math.min(tt,Math.min(rt,at));return at=1-1/255*Math.max(tt,Math.max(rt,at)),[st,ot*100,at*100]},convert$2.rgb.cmyk=function(it){const tt=it[0]/255,rt=it[1]/255,at=it[2]/255,st=Math.min(1-tt,1-rt,1-at),ot=(1-tt-st)/(1-st)||0,lt=(1-rt-st)/(1-st)||0,ut=(1-at-st)/(1-st)||0;return[ot*100,lt*100,ut*100,st*100]};function comparativeDistance(it,tt){return(it[0]-tt[0])**2+(it[1]-tt[1])**2+(it[2]-tt[2])**2}convert$2.rgb.keyword=function(it){const tt=reverseKeywords[it];if(tt)return tt;let rt=1/0,at;for(const st of Object.keys(cssKeywords)){const ot=cssKeywords[st],lt=comparativeDistance(it,ot);lt<rt&&(rt=lt,at=st)}return at},convert$2.keyword.rgb=function(it){return cssKeywords[it]},convert$2.rgb.xyz=function(it){let tt=it[0]/255,rt=it[1]/255,at=it[2]/255;tt=tt>.04045?((tt+.055)/1.055)**2.4:tt/12.92,rt=rt>.04045?((rt+.055)/1.055)**2.4:rt/12.92,at=at>.04045?((at+.055)/1.055)**2.4:at/12.92;const st=tt*.4124+rt*.3576+at*.1805,ot=tt*.2126+rt*.7152+at*.0722,lt=tt*.0193+rt*.1192+at*.9505;return[st*100,ot*100,lt*100]},convert$2.rgb.lab=function(it){const tt=convert$2.rgb.xyz(it);let rt=tt[0],at=tt[1],st=tt[2];rt/=95.047,at/=100,st/=108.883,rt=rt>.008856?rt**(1/3):7.787*rt+16/116,at=at>.008856?at**(1/3):7.787*at+16/116,st=st>.008856?st**(1/3):7.787*st+16/116;const ot=116*at-16,lt=500*(rt-at),ut=200*(at-st);return[ot,lt,ut]},convert$2.hsl.rgb=function(it){const tt=it[0]/360,rt=it[1]/100,at=it[2]/100;let st,ot,lt;if(rt===0)return lt=at*255,[lt,lt,lt];at<.5?st=at*(1+rt):st=at+rt-at*rt;const ut=2*at-st,ht=[0,0,0];for(let mt=0;mt<3;mt++)ot=tt+1/3*-(mt-1),ot<0&&ot++,ot>1&&ot--,6*ot<1?lt=ut+(st-ut)*6*ot:2*ot<1?lt=st:3*ot<2?lt=ut+(st-ut)*(2/3-ot)*6:lt=ut,ht[mt]=lt*255;return ht},convert$2.hsl.hsv=function(it){const tt=it[0];let rt=it[1]/100,at=it[2]/100,st=rt;const ot=Math.max(at,.01);at*=2,rt*=at<=1?at:2-at,st*=ot<=1?ot:2-ot;const lt=(at+rt)/2,ut=at===0?2*st/(ot+st):2*rt/(at+rt);return[tt,ut*100,lt*100]},convert$2.hsv.rgb=function(it){const tt=it[0]/60,rt=it[1]/100;let at=it[2]/100;const st=Math.floor(tt)%6,ot=tt-Math.floor(tt),lt=255*at*(1-rt),ut=255*at*(1-rt*ot),ht=255*at*(1-rt*(1-ot));switch(at*=255,st){case 0:return[at,ht,lt];case 1:return[ut,at,lt];case 2:return[lt,at,ht];case 3:return[lt,ut,at];case 4:return[ht,lt,at];case 5:return[at,lt,ut]}},convert$2.hsv.hsl=function(it){const tt=it[0],rt=it[1]/100,at=it[2]/100,st=Math.max(at,.01);let ot,lt;lt=(2-rt)*at;const ut=(2-rt)*st;return ot=rt*st,ot/=ut<=1?ut:2-ut,ot=ot||0,lt/=2,[tt,ot*100,lt*100]},convert$2.hwb.rgb=function(it){const tt=it[0]/360;let rt=it[1]/100,at=it[2]/100;const st=rt+at;let ot;st>1&&(rt/=st,at/=st);const lt=Math.floor(6*tt),ut=1-at;ot=6*tt-lt,(lt&1)!==0&&(ot=1-ot);const ht=rt+ot*(ut-rt);let mt,bt,vt;switch(lt){default:case 6:case 0:mt=ut,bt=ht,vt=rt;break;case 1:mt=ht,bt=ut,vt=rt;break;case 2:mt=rt,bt=ut,vt=ht;break;case 3:mt=rt,bt=ht,vt=ut;break;case 4:mt=ht,bt=rt,vt=ut;break;case 5:mt=ut,bt=rt,vt=ht;break}return[mt*255,bt*255,vt*255]},convert$2.cmyk.rgb=function(it){const tt=it[0]/100,rt=it[1]/100,at=it[2]/100,st=it[3]/100,ot=1-Math.min(1,tt*(1-st)+st),lt=1-Math.min(1,rt*(1-st)+st),ut=1-Math.min(1,at*(1-st)+st);return[ot*255,lt*255,ut*255]},convert$2.xyz.rgb=function(it){const tt=it[0]/100,rt=it[1]/100,at=it[2]/100;let st,ot,lt;return st=tt*3.2406+rt*-1.5372+at*-.4986,ot=tt*-.9689+rt*1.8758+at*.0415,lt=tt*.0557+rt*-.204+at*1.057,st=st>.0031308?1.055*st**(1/2.4)-.055:st*12.92,ot=ot>.0031308?1.055*ot**(1/2.4)-.055:ot*12.92,lt=lt>.0031308?1.055*lt**(1/2.4)-.055:lt*12.92,st=Math.min(Math.max(0,st),1),ot=Math.min(Math.max(0,ot),1),lt=Math.min(Math.max(0,lt),1),[st*255,ot*255,lt*255]},convert$2.xyz.lab=function(it){let tt=it[0],rt=it[1],at=it[2];tt/=95.047,rt/=100,at/=108.883,tt=tt>.008856?tt**(1/3):7.787*tt+16/116,rt=rt>.008856?rt**(1/3):7.787*rt+16/116,at=at>.008856?at**(1/3):7.787*at+16/116;const st=116*rt-16,ot=500*(tt-rt),lt=200*(rt-at);return[st,ot,lt]},convert$2.lab.xyz=function(it){const tt=it[0],rt=it[1],at=it[2];let st,ot,lt;ot=(tt+16)/116,st=rt/500+ot,lt=ot-at/200;const ut=ot**3,ht=st**3,mt=lt**3;return ot=ut>.008856?ut:(ot-16/116)/7.787,st=ht>.008856?ht:(st-16/116)/7.787,lt=mt>.008856?mt:(lt-16/116)/7.787,st*=95.047,ot*=100,lt*=108.883,[st,ot,lt]},convert$2.lab.lch=function(it){const tt=it[0],rt=it[1],at=it[2];let st;st=Math.atan2(at,rt)*360/2/Math.PI,st<0&&(st+=360);const lt=Math.sqrt(rt*rt+at*at);return[tt,lt,st]},convert$2.lch.lab=function(it){const tt=it[0],rt=it[1],st=it[2]/360*2*Math.PI,ot=rt*Math.cos(st),lt=rt*Math.sin(st);return[tt,ot,lt]},convert$2.rgb.ansi16=function(it,tt=null){const[rt,at,st]=it;let ot=tt===null?convert$2.rgb.hsv(it)[2]:tt;if(ot=Math.round(ot/50),ot===0)return 30;let lt=30+(Math.round(st/255)<<2|Math.round(at/255)<<1|Math.round(rt/255));return ot===2&&(lt+=60),lt},convert$2.hsv.ansi16=function(it){return convert$2.rgb.ansi16(convert$2.hsv.rgb(it),it[2])},convert$2.rgb.ansi256=function(it){const tt=it[0],rt=it[1],at=it[2];return tt===rt&&rt===at?tt<8?16:tt>248?231:Math.round((tt-8)/247*24)+232:16+36*Math.round(tt/255*5)+6*Math.round(rt/255*5)+Math.round(at/255*5)},convert$2.ansi16.rgb=function(it){let tt=it%10;if(tt===0||tt===7)return it>50&&(tt+=3.5),tt=tt/10.5*255,[tt,tt,tt];const rt=(~~(it>50)+1)*.5,at=(tt&1)*rt*255,st=(tt>>1&1)*rt*255,ot=(tt>>2&1)*rt*255;return[at,st,ot]},convert$2.ansi256.rgb=function(it){if(it>=232){const ot=(it-232)*10+8;return[ot,ot,ot]}it-=16;let tt;const rt=Math.floor(it/36)/5*255,at=Math.floor((tt=it%36)/6)/5*255,st=tt%6/5*255;return[rt,at,st]},convert$2.rgb.hex=function(it){const rt=(((Math.round(it[0])&255)<<16)+((Math.round(it[1])&255)<<8)+(Math.round(it[2])&255)).toString(16).toUpperCase();return"000000".substring(rt.length)+rt},convert$2.hex.rgb=function(it){const tt=it.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!tt)return[0,0,0];let rt=tt[0];tt[0].length===3&&(rt=rt.split("").map(ut=>ut+ut).join(""));const at=parseInt(rt,16),st=at>>16&255,ot=at>>8&255,lt=at&255;return[st,ot,lt]},convert$2.rgb.hcg=function(it){const tt=it[0]/255,rt=it[1]/255,at=it[2]/255,st=Math.max(Math.max(tt,rt),at),ot=Math.min(Math.min(tt,rt),at),lt=st-ot;let ut,ht;return lt<1?ut=ot/(1-lt):ut=0,lt<=0?ht=0:st===tt?ht=(rt-at)/lt%6:st===rt?ht=2+(at-tt)/lt:ht=4+(tt-rt)/lt,ht/=6,ht%=1,[ht*360,lt*100,ut*100]},convert$2.hsl.hcg=function(it){const tt=it[1]/100,rt=it[2]/100,at=rt<.5?2*tt*rt:2*tt*(1-rt);let st=0;return at<1&&(st=(rt-.5*at)/(1-at)),[it[0],at*100,st*100]},convert$2.hsv.hcg=function(it){const tt=it[1]/100,rt=it[2]/100,at=tt*rt;let st=0;return at<1&&(st=(rt-at)/(1-at)),[it[0],at*100,st*100]},convert$2.hcg.rgb=function(it){const tt=it[0]/360,rt=it[1]/100,at=it[2]/100;if(rt===0)return[at*255,at*255,at*255];const st=[0,0,0],ot=tt%1*6,lt=ot%1,ut=1-lt;let ht=0;switch(Math.floor(ot)){case 0:st[0]=1,st[1]=lt,st[2]=0;break;case 1:st[0]=ut,st[1]=1,st[2]=0;break;case 2:st[0]=0,st[1]=1,st[2]=lt;break;case 3:st[0]=0,st[1]=ut,st[2]=1;break;case 4:st[0]=lt,st[1]=0,st[2]=1;break;default:st[0]=1,st[1]=0,st[2]=ut}return ht=(1-rt)*at,[(rt*st[0]+ht)*255,(rt*st[1]+ht)*255,(rt*st[2]+ht)*255]},convert$2.hcg.hsv=function(it){const tt=it[1]/100,rt=it[2]/100,at=tt+rt*(1-tt);let st=0;return at>0&&(st=tt/at),[it[0],st*100,at*100]},convert$2.hcg.hsl=function(it){const tt=it[1]/100,at=it[2]/100*(1-tt)+.5*tt;let st=0;return at>0&&at<.5?st=tt/(2*at):at>=.5&&at<1&&(st=tt/(2*(1-at))),[it[0],st*100,at*100]},convert$2.hcg.hwb=function(it){const tt=it[1]/100,rt=it[2]/100,at=tt+rt*(1-tt);return[it[0],(at-tt)*100,(1-at)*100]},convert$2.hwb.hcg=function(it){const tt=it[1]/100,at=1-it[2]/100,st=at-tt;let ot=0;return st<1&&(ot=(at-st)/(1-st)),[it[0],st*100,ot*100]},convert$2.apple.rgb=function(it){return[it[0]/65535*255,it[1]/65535*255,it[2]/65535*255]},convert$2.rgb.apple=function(it){return[it[0]/255*65535,it[1]/255*65535,it[2]/255*65535]},convert$2.gray.rgb=function(it){return[it[0]/100*255,it[0]/100*255,it[0]/100*255]},convert$2.gray.hsl=function(it){return[0,0,it[0]]},convert$2.gray.hsv=convert$2.gray.hsl,convert$2.gray.hwb=function(it){return[0,100,it[0]]},convert$2.gray.cmyk=function(it){return[0,0,0,it[0]]},convert$2.gray.lab=function(it){return[it[0],0,0]},convert$2.gray.hex=function(it){const tt=Math.round(it[0]/100*255)&255,at=((tt<<16)+(tt<<8)+tt).toString(16).toUpperCase();return"000000".substring(at.length)+at},convert$2.rgb.gray=function(it){return[(it[0]+it[1]+it[2])/3/255*100]};const conversions$1=conversions$2;function buildGraph(){const it={},tt=Object.keys(conversions$1);for(let rt=tt.length,at=0;at<rt;at++)it[tt[at]]={distance:-1,parent:null};return it}function deriveBFS(it){const tt=buildGraph(),rt=[it];for(tt[it].distance=0;rt.length;){const at=rt.pop(),st=Object.keys(conversions$1[at]);for(let ot=st.length,lt=0;lt<ot;lt++){const ut=st[lt],ht=tt[ut];ht.distance===-1&&(ht.distance=tt[at].distance+1,ht.parent=at,rt.unshift(ut))}}return tt}function link(it,tt){return function(rt){return tt(it(rt))}}function wrapConversion(it,tt){const rt=[tt[it].parent,it];let at=conversions$1[tt[it].parent][it],st=tt[it].parent;for(;tt[st].parent;)rt.unshift(tt[st].parent),at=link(conversions$1[tt[st].parent][st],at),st=tt[st].parent;return at.conversion=rt,at}var route$1=function(it){const tt=deriveBFS(it),rt={},at=Object.keys(tt);for(let st=at.length,ot=0;ot<st;ot++){const lt=at[ot];tt[lt].parent!==null&&(rt[lt]=wrapConversion(lt,tt))}return rt};const conversions=conversions$2,route=route$1,convert$1={},models=Object.keys(conversions);function wrapRaw(it){const tt=function(...rt){const at=rt[0];return at==null?at:(at.length>1&&(rt=at),it(rt))};return"conversion"in it&&(tt.conversion=it.conversion),tt}function wrapRounded(it){const tt=function(...rt){const at=rt[0];if(at==null)return at;at.length>1&&(rt=at);const st=it(rt);if(typeof st=="object")for(let ot=st.length,lt=0;lt<ot;lt++)st[lt]=Math.round(st[lt]);return st};return"conversion"in it&&(tt.conversion=it.conversion),tt}models.forEach(it=>{convert$1[it]={},Object.defineProperty(convert$1[it],"channels",{value:conversions[it].channels}),Object.defineProperty(convert$1[it],"labels",{value:conversions[it].labels});const tt=route(it);Object.keys(tt).forEach(at=>{const st=tt[at];convert$1[it][at]=wrapRounded(st),convert$1[it][at].raw=wrapRaw(st)})});var colorConvert=convert$1;const colorString=colorString$1.exports,convert=colorConvert,skippedModels=["keyword","gray","hex"],hashedModelKeys={};for(const it of Object.keys(convert))hashedModelKeys[[...convert[it].labels].sort().join("")]=it;const limiters={};function Color$1(it,tt){if(!(this instanceof Color$1))return new Color$1(it,tt);if(tt&&tt in skippedModels&&(tt=null),tt&&!(tt in convert))throw new Error("Unknown model: "+tt);let rt,at;if(it==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(it instanceof Color$1)this.model=it.model,this.color=[...it.color],this.valpha=it.valpha;else if(typeof it=="string"){const st=colorString.get(it);if(st===null)throw new Error("Unable to parse color from string: "+it);this.model=st.model,at=convert[this.model].channels,this.color=st.value.slice(0,at),this.valpha=typeof st.value[at]=="number"?st.value[at]:1}else if(it.length>0){this.model=tt||"rgb",at=convert[this.model].channels;const st=Array.prototype.slice.call(it,0,at);this.color=zeroArray(st,at),this.valpha=typeof it[at]=="number"?it[at]:1}else if(typeof it=="number")this.model="rgb",this.color=[it>>16&255,it>>8&255,it&255],this.valpha=1;else{this.valpha=1;const st=Object.keys(it);"alpha"in it&&(st.splice(st.indexOf("alpha"),1),this.valpha=typeof it.alpha=="number"?it.alpha:0);const ot=st.sort().join("");if(!(ot in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(it));this.model=hashedModelKeys[ot];const{labels:lt}=convert[this.model],ut=[];for(rt=0;rt<lt.length;rt++)ut.push(it[lt[rt]]);this.color=zeroArray(ut)}if(limiters[this.model])for(at=convert[this.model].channels,rt=0;rt<at;rt++){const st=limiters[this.model][rt];st&&(this.color[rt]=st(this.color[rt]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Color$1.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(it){let tt=this.model in colorString.to?this:this.rgb();tt=tt.round(typeof it=="number"?it:1);const rt=tt.valpha===1?tt.color:[...tt.color,this.valpha];return colorString.to[tt.model](rt)},percentString(it){const tt=this.rgb().round(typeof it=="number"?it:1),rt=tt.valpha===1?tt.color:[...tt.color,this.valpha];return colorString.to.rgb.percent(rt)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const it={},{channels:tt}=convert[this.model],{labels:rt}=convert[this.model];for(let at=0;at<tt;at++)it[rt[at]]=this.color[at];return this.valpha!==1&&(it.alpha=this.valpha),it},unitArray(){const it=this.rgb().color;return it[0]/=255,it[1]/=255,it[2]/=255,this.valpha!==1&&it.push(this.valpha),it},unitObject(){const it=this.rgb().object();return it.r/=255,it.g/=255,it.b/=255,this.valpha!==1&&(it.alpha=this.valpha),it},round(it){return it=Math.max(it||0,0),new Color$1([...this.color.map(roundToPlace(it)),this.valpha],this.model)},alpha(it){return it!==void 0?new Color$1([...this.color,Math.max(0,Math.min(1,it))],this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,it=>(it%360+360)%360),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(95.047)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(108.833)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword(it){return it!==void 0?new Color$1(it):convert[this.model].keyword(this.color)},hex(it){return it!==void 0?new Color$1(it):colorString.to.hex(this.rgb().round().color)},hexa(it){if(it!==void 0)return new Color$1(it);const tt=this.rgb().round().color;let rt=Math.round(this.valpha*255).toString(16).toUpperCase();return rt.length===1&&(rt="0"+rt),colorString.to.hex(tt)+rt},rgbNumber(){const it=this.rgb().color;return(it[0]&255)<<16|(it[1]&255)<<8|it[2]&255},luminosity(){const it=this.rgb().color,tt=[];for(const[rt,at]of it.entries()){const st=at/255;tt[rt]=st<=.04045?st/12.92:((st+.055)/1.055)**2.4}return .2126*tt[0]+.7152*tt[1]+.0722*tt[2]},contrast(it){const tt=this.luminosity(),rt=it.luminosity();return tt>rt?(tt+.05)/(rt+.05):(rt+.05)/(tt+.05)},level(it){const tt=this.contrast(it);return tt>=7?"AAA":tt>=4.5?"AA":""},isDark(){const it=this.rgb().color;return(it[0]*2126+it[1]*7152+it[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const it=this.rgb();for(let tt=0;tt<3;tt++)it.color[tt]=255-it.color[tt];return it},lighten(it){const tt=this.hsl();return tt.color[2]+=tt.color[2]*it,tt},darken(it){const tt=this.hsl();return tt.color[2]-=tt.color[2]*it,tt},saturate(it){const tt=this.hsl();return tt.color[1]+=tt.color[1]*it,tt},desaturate(it){const tt=this.hsl();return tt.color[1]-=tt.color[1]*it,tt},whiten(it){const tt=this.hwb();return tt.color[1]+=tt.color[1]*it,tt},blacken(it){const tt=this.hwb();return tt.color[2]+=tt.color[2]*it,tt},grayscale(){const it=this.rgb().color,tt=it[0]*.3+it[1]*.59+it[2]*.11;return Color$1.rgb(tt,tt,tt)},fade(it){return this.alpha(this.valpha-this.valpha*it)},opaquer(it){return this.alpha(this.valpha+this.valpha*it)},rotate(it){const tt=this.hsl();let rt=tt.color[0];return rt=(rt+it)%360,rt=rt<0?360+rt:rt,tt.color[0]=rt,tt},mix(it,tt){if(!it||!it.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof it);const rt=it.rgb(),at=this.rgb(),st=tt===void 0?.5:tt,ot=2*st-1,lt=rt.alpha()-at.alpha(),ut=((ot*lt===-1?ot:(ot+lt)/(1+ot*lt))+1)/2,ht=1-ut;return Color$1.rgb(ut*rt.red()+ht*at.red(),ut*rt.green()+ht*at.green(),ut*rt.blue()+ht*at.blue(),rt.alpha()*st+at.alpha()*(1-st))}};for(const it of Object.keys(convert)){if(skippedModels.includes(it))continue;const{channels:tt}=convert[it];Color$1.prototype[it]=function(...rt){return this.model===it?new Color$1(this):rt.length>0?new Color$1(rt,it):new Color$1([...assertArray(convert[this.model][it].raw(this.color)),this.valpha],it)},Color$1[it]=function(...rt){let at=rt[0];return typeof at=="number"&&(at=zeroArray(rt,tt)),new Color$1(at,it)}}function roundTo(it,tt){return Number(it.toFixed(tt))}function roundToPlace(it){return function(tt){return roundTo(tt,it)}}function getset(it,tt,rt){it=Array.isArray(it)?it:[it];for(const at of it)(limiters[at]||(limiters[at]=[]))[tt]=rt;return it=it[0],function(at){let st;return at!==void 0?(rt&&(at=rt(at)),st=this[it](),st.color[tt]=at,st):(st=this[it]().color[tt],rt&&(st=rt(st)),st)}}function maxfn(it){return function(tt){return Math.max(0,Math.min(it,tt))}}function assertArray(it){return Array.isArray(it)?it:[it]}function zeroArray(it,tt){for(let rt=0;rt<tt;rt++)typeof it[rt]!="number"&&(it[rt]=0);return it}var color$1=Color$1;const color$2=color$1;var IconsManifest=[{id:"fa",name:"Font Awesome",projectUrl:"https://fontawesome.com/",license:"CC BY 4.0 License",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"},{id:"io",name:"Ionicons 4",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"io5",name:"Ionicons 5",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"md",name:"Material Design icons",projectUrl:"http://google.github.io/material-design-icons/",license:"Apache License Version 2.0",licenseUrl:"https://github.com/google/material-design-icons/blob/master/LICENSE"},{id:"ti",name:"Typicons",projectUrl:"http://s-ings.com/typicons/",license:"CC BY-SA 3.0",licenseUrl:"https://creativecommons.org/licenses/by-sa/3.0/"},{id:"go",name:"Github Octicons icons",projectUrl:"https://octicons.github.com/",license:"MIT",licenseUrl:"https://github.com/primer/octicons/blob/master/LICENSE"},{id:"fi",name:"Feather",projectUrl:"https://feathericons.com/",license:"MIT",licenseUrl:"https://github.com/feathericons/feather/blob/master/LICENSE"},{id:"gi",name:"Game Icons",projectUrl:"https://game-icons.net/",license:"CC BY 3.0",licenseUrl:"https://creativecommons.org/licenses/by/3.0/"},{id:"wi",name:"Weather Icons",projectUrl:"https://erikflowers.github.io/weather-icons/",license:"SIL OFL 1.1",licenseUrl:"http://scripts.sil.org/OFL"},{id:"di",name:"Devicons",projectUrl:"https://vorillaz.github.io/devicons/",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ai",name:"Ant Design Icons",projectUrl:"https://github.com/ant-design/ant-design-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"bs",name:"Bootstrap Icons",projectUrl:"https://github.com/twbs/icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ri",name:"Remix Icon",projectUrl:"https://github.com/Remix-Design/RemixIcon",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"fc",name:"Flat Color Icons",projectUrl:"https://github.com/icons8/flat-color-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"gr",name:"Grommet-Icons",projectUrl:"https://github.com/grommet/grommet-icons",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"hi",name:"Heroicons",projectUrl:"https://github.com/refactoringui/heroicons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"si",name:"Simple Icons",projectUrl:"https://simpleicons.org/",license:"CC0 1.0 Universal",licenseUrl:"https://creativecommons.org/publicdomain/zero/1.0/"},{id:"im",name:"IcoMoon Free",projectUrl:"https://github.com/Keyamoon/IcoMoon-Free",license:"CC BY 4.0 License"},{id:"bi",name:"BoxIcons",projectUrl:"https://github.com/atisawd/boxicons",license:"CC BY 4.0 License"},{id:"cg",name:"css.gg",projectUrl:"https://github.com/astrit/css.gg",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"vsc",name:"VS Code Icons",projectUrl:"https://github.com/microsoft/vscode-codicons",license:"CC BY 4.0",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"}],DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React$1.createContext&&React$1.createContext(DefaultContext),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(it){for(var tt,rt=1,at=arguments.length;rt<at;rt++){tt=arguments[rt];for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(it[st]=tt[st])}return it},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(it,tt){var rt={};for(var at in it)Object.prototype.hasOwnProperty.call(it,at)&&tt.indexOf(at)<0&&(rt[at]=it[at]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,at=Object.getOwnPropertySymbols(it);st<at.length;st++)tt.indexOf(at[st])<0&&Object.prototype.propertyIsEnumerable.call(it,at[st])&&(rt[at[st]]=it[at[st]]);return rt};function Tree2Element(it){return it&&it.map(function(tt,rt){return React$1.createElement(tt.tag,__assign({key:rt},tt.attr),Tree2Element(tt.child))})}function GenIcon$7(it){return function(tt){return React$1.createElement(IconBase,__assign({attr:__assign({},it.attr)},tt),Tree2Element(it.child))}}function IconBase(it){var tt=function(rt){var at=it.attr,st=it.size,ot=it.title,lt=__rest(it,["attr","size","title"]),ut=st||rt.size||"1em",ht;return rt.className&&(ht=rt.className),it.className&&(ht=(ht?ht+" ":"")+it.className),React$1.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},rt.attr,at,lt,{className:ht,style:__assign(__assign({color:it.color||rt.color},rt.style),it.style),height:ut,width:ut,xmlns:"http://www.w3.org/2000/svg"}),ot&&React$1.createElement("title",null,ot),it.children)};return IconContext!==void 0?React$1.createElement(IconContext.Consumer,null,function(rt){return tt(rt)}):tt(DefaultContext)}const esm=Object.freeze(Object.defineProperty({__proto__:null,IconsManifest,GenIcon:GenIcon$7,IconBase,DefaultContext,IconContext},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(esm);var GenIcon$6=require$$0.GenIcon,FiCheck_1=function it(tt){return GenIcon$6({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(tt)},GenIcon$5=require$$0.GenIcon,FiChevronDown_1=function it(tt){return GenIcon$5({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(tt)},GenIcon$4=require$$0.GenIcon,FiCopy_1=function it(tt){return GenIcon$4({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}}]})(tt)},GenIcon$3=require$$0.GenIcon,FiLock_1=function it(tt){return GenIcon$3({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(tt)},GenIcon$2=require$$0.GenIcon,FiShuffle_1=function it(tt){return GenIcon$2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 3 21 3 21 8"}},{tag:"line",attr:{x1:"4",y1:"20",x2:"21",y2:"3"}},{tag:"polyline",attr:{points:"21 16 21 21 16 21"}},{tag:"line",attr:{x1:"15",y1:"15",x2:"21",y2:"21"}},{tag:"line",attr:{x1:"4",y1:"4",x2:"9",y2:"9"}}]})(tt)},GenIcon$1=require$$0.GenIcon,FiWifi_1=function it(tt){return GenIcon$1({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12.55a11 11 0 0 1 14.08 0"}},{tag:"path",attr:{d:"M1.42 9a16 16 0 0 1 21.16 0"}},{tag:"path",attr:{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12.01",y2:"20"}}]})(tt)},GenIcon=require$$0.GenIcon,FiXCircle_1=function it(tt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(tt)},createAnatomy=(it,tt=[])=>({parts:(...rt)=>{if(isEmpty$2(tt))return createAnatomy(it,rt);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...rt)=>createAnatomy(it,[...tt,...rt]),build:()=>[...new Set(tt)].reduce((rt,at)=>Object.assign(rt,{[at]:{selector:[`&[data-scope="${toKebabCase(it)}"][data-part="${toKebabCase(at)}"]`,`& [data-scope="${toKebabCase(it)}"][data-part="${toKebabCase(at)}"]`].join(", "),attrs:{"data-scope":toKebabCase(it),"data-part":toKebabCase(at)}}}),{})}),toKebabCase=it=>it.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),isEmpty$2=it=>it.length===0,anatomy=createAnatomy("menu").parts("trigger","triggerItem","positioner","arrow","arrowTip","content","separator","item","optionItem","itemGroupLabel","itemGroup"),parts=anatomy.build(),first=it=>it[0],last=it=>it[it.length-1],add=(it,...tt)=>it.concat(tt),remove=(it,tt)=>removeAt(it,it.indexOf(tt)),removeAt=(it,tt)=>(tt>-1&&it.splice(tt,1),it);function isDocument$2(it){return it.nodeType===Node.DOCUMENT_NODE}function isWindow$2(it){return(it==null?void 0:it.toString())==="[object Window]"}function getDocument$2(it){var tt;return isWindow$2(it)?it.document:isDocument$2(it)?it:(tt=it==null?void 0:it.ownerDocument)!=null?tt:document}function getWindow$2(it){var tt;return(tt=it==null?void 0:it.ownerDocument.defaultView)!=null?tt:window}function defineDomHelpers(it){const tt={getRootNode:rt=>{var at,st;return(st=(at=rt.getRootNode)==null?void 0:at.call(rt))!=null?st:document},getDoc:rt=>getDocument$2(tt.getRootNode(rt)),getWin:rt=>{var at;return(at=tt.getDoc(rt).defaultView)!=null?at:window},getActiveElement:rt=>tt.getDoc(rt).activeElement,getById:(rt,at)=>tt.getRootNode(rt).getElementById(at)};return{...tt,...it}}function contains$2(it,tt){return it?it===tt||isHTMLElement$4(it)&&isHTMLElement$4(tt)&&it.contains(tt):!1}function isHTMLElement$4(it){return typeof it=="object"&&(it==null?void 0:it.nodeType)===Node.ELEMENT_NODE&&typeof(it==null?void 0:it.nodeName)=="string"}function isElementEditable(it){if(it==null||!isHTMLElement$4(it))return!1;try{const tt=getWindow$2(it);return it instanceof tt.HTMLInputElement&&it.selectionStart!=null||/(textarea|select)/.test(it.localName)||it.isContentEditable}catch{return!1}}function queryAll(it,tt){var rt;return Array.from((rt=it==null?void 0:it.querySelectorAll(tt))!=null?rt:[])}function itemById(it,tt){return it.find(rt=>rt.id===tt)}function indexOfId(it,tt){const rt=itemById(it,tt);return rt?it.indexOf(rt):-1}function nextById(it,tt,rt=!0){let at=indexOfId(it,tt);return at=rt?(at+1)%it.length:Math.min(at+1,it.length-1),it[at]}function prevById(it,tt,rt=!0){let at=indexOfId(it,tt);return at===-1?rt?it[it.length-1]:null:(at=rt?(at-1+it.length)%it.length:Math.max(0,at-1),it[at])}var getValueText=it=>{var tt,rt;return(rt=(tt=it.dataset.valuetext)!=null?tt:it.textContent)!=null?rt:""},match=(it,tt)=>it.toLowerCase().startsWith(tt.toLowerCase()),wrap=(it,tt)=>it.map((rt,at)=>it[(Math.max(tt,0)+at)%it.length]);function findByText(it,tt,rt){const at=rt?indexOfId(it,rt):-1;let st=rt?wrap(it,at):it;return tt.length===1&&(st=st.filter(lt=>lt.id!==rt)),st.find(lt=>match(getValueText(lt),tt))}function findByTypeaheadImpl(it,tt){const{state:rt,activeId:at,key:st,timeout:ot=350}=tt,lt=rt.keysSoFar+st,ht=lt.length>1&&Array.from(lt).every(xt=>xt===lt[0])?lt[0]:lt;let mt=it.slice();const bt=findByText(mt,ht,at);function vt(){clearTimeout(rt.timer),rt.timer=-1}function At(xt){rt.keysSoFar=xt,vt(),xt!==""&&(rt.timer=+setTimeout(()=>{At(""),vt()},ot))}return At(lt),bt}var findByTypeahead=Object.assign(findByTypeaheadImpl,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:isValidTypeaheadEvent});function isValidTypeaheadEvent(it){return it.key.length===1&&!it.ctrlKey&&!it.metaKey}var dom=defineDomHelpers({getTriggerId:it=>{var tt,rt;return(rt=(tt=it.ids)==null?void 0:tt.trigger)!=null?rt:`menu:${it.id}:trigger`},getContextTriggerId:it=>{var tt,rt;return(rt=(tt=it.ids)==null?void 0:tt.contextTrigger)!=null?rt:`menu:${it.id}:ctx-trigger`},getContentId:it=>{var tt,rt;return(rt=(tt=it.ids)==null?void 0:tt.content)!=null?rt:`menu:${it.id}:content`},getArrowId:it=>`menu:${it.id}:arrow`,getPositionerId:it=>`menu:${it.id}:popper`,getGroupId:(it,tt)=>{var rt,at,st;return(st=(at=(rt=it.ids)==null?void 0:rt.group)==null?void 0:at.call(rt,tt))!=null?st:`menu:${it.id}:group:${tt}`},getGroupLabelId:(it,tt)=>{var rt,at,st;return(st=(at=(rt=it.ids)==null?void 0:rt.label)==null?void 0:at.call(rt,tt))!=null?st:`menu:${it.id}:label:${tt}`},getContentEl:it=>dom.getById(it,dom.getContentId(it)),getPositionerEl:it=>dom.getById(it,dom.getPositionerId(it)),getTriggerEl:it=>dom.getById(it,dom.getTriggerId(it)),getFocusedItem:it=>it.highlightedId?dom.getById(it,it.highlightedId):null,getArrowEl:it=>dom.getById(it,dom.getArrowId(it)),getElements:it=>{const rt=`[role^="menuitem"][data-ownedby=${CSS.escape(dom.getContentId(it))}]:not([data-disabled])`;return queryAll(dom.getContentEl(it),rt)},getFirstEl:it=>first(dom.getElements(it)),getLastEl:it=>last(dom.getElements(it)),getNextEl:(it,tt)=>nextById(dom.getElements(it),it.highlightedId,tt!=null?tt:it.loop),getPrevEl:(it,tt)=>prevById(dom.getElements(it),it.highlightedId,tt!=null?tt:it.loop),getElemByKey:(it,tt)=>findByTypeahead(dom.getElements(it),{state:it.typeahead,key:tt,activeId:it.highlightedId}),isTargetDisabled:it=>isHTMLElement$4(it)&&it.dataset.disabled==="",isTriggerItem:it=>{var tt;return!!((tt=it==null?void 0:it.getAttribute("role"))!=null&&tt.startsWith("menuitem"))&&!!(it!=null&&it.hasAttribute("aria-controls"))}}),isArray$1=it=>Array.isArray(it),isObject$2=it=>!(it==null||typeof it!="object"||isArray$1(it)),hasProp$3=(it,tt)=>Object.prototype.hasOwnProperty.call(it,tt),isDom$1=()=>typeof window<"u";function getPlatform$1(){var it;const tt=navigator.userAgentData;return(it=tt==null?void 0:tt.platform)!=null?it:navigator.platform}var pt$1=it=>isDom$1()&&it.test(getPlatform$1()),isTouchDevice$1=()=>isDom$1()&&!!navigator.maxTouchPoints,isMac$1=()=>pt$1(/^Mac/)&&!isTouchDevice$1;function getNativeEvent(it){var tt;return(tt=it.nativeEvent)!=null?tt:it}function isSelfEvent(it){return contains$2(it.currentTarget,it.target)}var supportsPointerEvent=()=>isDom$1()&&window.onpointerdown===null,supportsTouchEvent=()=>isDom$1()&&window.ontouchstart===null,supportsMouseEvent=()=>isDom$1()&&window.onmousedown===null,isTouchEvent=it=>isObject$2(it)&&hasProp$3(it,"touches"),isLeftClick=it=>it.button===0,isContextMenuEvent$1=it=>it.button===2||isCtrlKey$1(it)&&it.button===0,isModifiedEvent=it=>it.ctrlKey||it.altKey||it.metaKey,isCtrlKey$1=it=>isMac$1()?it.metaKey&&!it.ctrlKey:it.ctrlKey&&!it.metaKey,fallback$1={pageX:0,pageY:0,clientX:0,clientY:0};function getEventPoint(it,tt="page"){var rt,at;const st=isTouchEvent(it)?(at=(rt=it.touches[0])!=null?rt:it.changedTouches[0])!=null?at:fallback$1:it;return{x:st[`${tt}X`],y:st[`${tt}Y`]}}var runIfFn$4=(it,...tt)=>{const rt=typeof it=="function"?it(...tt):it;return rt!=null?rt:void 0},cast=it=>it,noop$1=()=>{},callAll$2=(...it)=>(...tt)=>{it.forEach(function(rt){rt==null||rt(...tt)})},uuid=(()=>{let it=0;return()=>(it++,it.toString(36))})();const e$4=Symbol(),t$3=Symbol(),r$3="a",n$6="w";let o$4=(it,tt)=>new Proxy(it,tt);const s$4=Object.getPrototypeOf,c$2=new WeakMap,l$3=it=>it&&(c$2.has(it)?c$2.get(it):s$4(it)===Object.prototype||s$4(it)===Array.prototype),f$1=it=>typeof it=="object"&&it!==null,i$3=new WeakMap,a$2=it=>it[t$3]||it,u$1=(it,tt,rt)=>{if(!l$3(it))return it;const at=a$2(it),st=(lt=>Object.isFrozen(lt)||Object.values(Object.getOwnPropertyDescriptors(lt)).some(ut=>!ut.writable))(at);let ot=rt&&rt.get(at);return ot&&ot[1].f===st||(ot=((lt,ut)=>{const ht={f:ut};let mt=!1;const bt=(At,xt)=>{if(!mt){let Et=ht[r$3].get(lt);if(Et||(Et={},ht[r$3].set(lt,Et)),At===n$6)Et[n$6]=!0;else{let Tt=Et[At];Tt||(Tt=new Set,Et[At]=Tt),Tt.add(xt)}}},vt={get:(At,xt)=>xt===t$3?lt:(bt("k",xt),u$1(Reflect.get(At,xt),ht[r$3],ht.c)),has:(At,xt)=>xt===e$4?(mt=!0,ht[r$3].delete(lt),!0):(bt("h",xt),Reflect.has(At,xt)),getOwnPropertyDescriptor:(At,xt)=>(bt("o",xt),Reflect.getOwnPropertyDescriptor(At,xt)),ownKeys:At=>(bt(n$6),Reflect.ownKeys(At))};return ut&&(vt.set=vt.deleteProperty=()=>!1),[vt,ht]})(at,st),ot[1].p=o$4(st?(lt=>{let ut=i$3.get(lt);if(!ut){if(Array.isArray(lt))ut=Array.from(lt);else{const ht=Object.getOwnPropertyDescriptors(lt);Object.values(ht).forEach(mt=>{mt.configurable=!0}),ut=Object.create(s$4(lt),ht)}i$3.set(lt,ut)}return ut})(at):at,ot[0]),rt&&rt.set(at,ot)),ot[1][r$3]=tt,ot[1].c=rt,ot[1].p},p$2=(it,tt,rt,at)=>{if(Object.is(it,tt))return!1;if(!f$1(it)||!f$1(tt))return!0;const st=rt.get(a$2(it));if(!st)return!0;if(at){const lt=at.get(it);if(lt&&lt.n===tt)return lt.g;at.set(it,{n:tt,g:!1})}let ot=null;try{for(const lt of st.h||[])if(ot=Reflect.has(it,lt)!==Reflect.has(tt,lt),ot)return ot;if(st[n$6]===!0){if(ot=((lt,ut)=>{const ht=Reflect.ownKeys(lt),mt=Reflect.ownKeys(ut);return ht.length!==mt.length||ht.some((bt,vt)=>bt!==mt[vt])})(it,tt),ot)return ot}else for(const lt of st.o||[])if(ot=!!Reflect.getOwnPropertyDescriptor(it,lt)!=!!Reflect.getOwnPropertyDescriptor(tt,lt),ot)return ot;for(const lt of st.k||[])if(ot=p$2(it[lt],tt[lt],rt,at),ot)return ot;return ot===null&&(ot=!0),ot}finally{at&&at.set(it,{n:tt,g:ot})}},g$2=it=>l$3(it)&&it[t$3]||null,h$2=(it,tt=!0)=>{c$2.set(it,tt)};var __DEV__=!1,VERSION=Symbol(),LISTENERS=Symbol(),SNAPSHOT=Symbol(),HANDLER=Symbol(),PROMISE_RESULT=Symbol(),PROMISE_ERROR=Symbol(),refSet=new WeakSet;function ref(it){return refSet.add(it),it}var isObject$1=it=>typeof it=="object"&&it!==null,canProxy=it=>isObject$1(it)&&!refSet.has(it)&&(Array.isArray(it)||!(Symbol.iterator in it))&&!(it instanceof WeakMap)&&!(it instanceof WeakSet)&&!(it instanceof Error)&&!(it instanceof Number)&&!(it instanceof Date)&&!(it instanceof String)&&!(it instanceof RegExp)&&!(it instanceof ArrayBuffer),proxyCache=new WeakMap,globalVersion=1,snapshotCache=new WeakMap;function proxy(it={}){if(!isObject$1(it))throw new Error("object required");const tt=proxyCache.get(it);if(tt)return tt;let rt=globalVersion;const at=new Set,st=(At,xt=++globalVersion)=>{rt!==xt&&(rt=xt,at.forEach(Et=>Et(At,xt)))},ot=new Map,lt=At=>{let xt=ot.get(At);return xt||(xt=(Et,Tt)=>{const wt=[...Et];wt[1]=[At,...wt[1]],st(wt,Tt)},ot.set(At,xt)),xt},ut=At=>{const xt=ot.get(At);return ot.delete(At),xt},ht=(At,xt)=>{const Et=snapshotCache.get(xt);if((Et==null?void 0:Et[0])===rt)return Et[1];const Tt=Array.isArray(At)?[]:Object.create(Object.getPrototypeOf(At));return h$2(Tt,!0),snapshotCache.set(xt,[rt,Tt]),Reflect.ownKeys(At).forEach(wt=>{const Ct=Reflect.get(At,wt,xt);if(refSet.has(Ct))h$2(Ct,!1),Tt[wt]=Ct;else if(Ct instanceof Promise)if(PROMISE_RESULT in Ct)Tt[wt]=Ct[PROMISE_RESULT];else{const It=Ct[PROMISE_ERROR]||Ct;Object.defineProperty(Tt,wt,{get(){if(PROMISE_RESULT in Ct)return Ct[PROMISE_RESULT];throw It}})}else Ct!=null&&Ct[LISTENERS]?Tt[wt]=Ct[SNAPSHOT]:Tt[wt]=Ct}),Object.freeze(Tt),Tt},mt=Array.isArray(it)?[]:Object.create(Object.getPrototypeOf(it)),bt={get(At,xt,Et){return xt===VERSION?rt:xt===LISTENERS?at:xt===SNAPSHOT?ht(At,Et):xt===HANDLER?bt:Reflect.get(At,xt,Et)},deleteProperty(At,xt){const Et=Reflect.get(At,xt),Tt=Et==null?void 0:Et[LISTENERS];Tt&&Tt.delete(ut(xt));const wt=Reflect.deleteProperty(At,xt);return wt&&st(["delete",[xt],Et]),wt},is:Object.is,canProxy,set(At,xt,Et,Tt){var wt;const Ct=Reflect.has(At,xt),It=Reflect.get(At,xt,Tt);if(Ct&&this.is(It,Et))return!0;const St=It==null?void 0:It[LISTENERS];St&&St.delete(ut(xt)),isObject$1(Et)&&(Et=g$2(Et)||Et);let Rt;return(wt=Object.getOwnPropertyDescriptor(At,xt))!=null&&wt.set?Rt=Et:Et instanceof Promise?Rt=Et.then(Dt=>(Rt[PROMISE_RESULT]=Dt,st(["resolve",[xt],Dt]),Dt)).catch(Dt=>{Rt[PROMISE_ERROR]=Dt,st(["reject",[xt],Dt])}):Et!=null&&Et[LISTENERS]?(Rt=Et,Rt[LISTENERS].add(lt(xt))):this.canProxy(Et)?(Rt=proxy(Et),Rt[LISTENERS].add(lt(xt))):Rt=Et,Reflect.set(At,xt,Rt,Tt),st(["set",[xt],Et,It]),!0}},vt=new Proxy(mt,bt);return proxyCache.set(it,vt),Reflect.ownKeys(it).forEach(At=>{const xt=Object.getOwnPropertyDescriptor(it,At);xt.get||xt.set?Object.defineProperty(mt,At,xt):vt[At]=it[At]}),vt}function subscribe(it,tt,rt){__DEV__&&!(it!=null&&it[LISTENERS])&&console.warn("Please use proxy object");let at;const st=[],ot=lt=>{if(st.push(lt),rt){tt(st.splice(0));return}at||(at=Promise.resolve().then(()=>{at=void 0,tt(st.splice(0))}))};return it[LISTENERS].add(ot),()=>{it[LISTENERS].delete(ot)}}function snapshot(it){return __DEV__&&!(it!=null&&it[SNAPSHOT])&&console.warn("Please use proxy object"),it[SNAPSHOT]}function proxyWithComputed(it,tt){Object.keys(tt).forEach(at=>{if(Object.getOwnPropertyDescriptor(it,at))throw new Error("object property already defined");const st=tt[at],{get:ot,set:lt}=typeof st=="function"?{get:st}:st,ut={};ut.get=()=>ot(snapshot(rt)),lt&&(ut.set=ht=>lt(rt,ht)),Object.defineProperty(it,at,ut)});const rt=proxy(it);return rt}function createProxy(it){var tt,rt;const at=(tt=it.computed)!=null?tt:cast({}),st=(rt=it.context)!=null?rt:cast({}),ot=proxy({value:"",previousValue:"",event:cast({}),previousEvent:cast({}),context:proxyWithComputed(st,at),done:!1,tags:[],hasTag(lt){return this.tags.includes(lt)},matches(...lt){return lt.includes(this.value)},can(lt){return cast(this).nextEvents.includes(lt)},get nextEvents(){var lt,ut,ht,mt;const bt=(ht=(ut=(lt=it.states)==null?void 0:lt[this.value])==null?void 0:ut.on)!=null?ht:{},vt=(mt=it==null?void 0:it.on)!=null?mt:{};return Object.keys({...bt,...vt})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return cast(ot)}var isDev=()=>!1,isArray=it=>Array.isArray(it),isObject=it=>!(it==null||typeof it!="object"||isArray(it)),isNumber=it=>typeof it=="number"&&!Number.isNaN(it),isString=it=>typeof it=="string",isFunction=it=>typeof it=="function";function compact$1(it){return it===void 0?it:Object.fromEntries(Object.entries(it).filter(([,tt])=>tt!==void 0).map(([tt,rt])=>[tt,isObject(rt)?compact$1(rt):rt]))}function deepMerge(it,...tt){for(const rt of tt){const at=compact$1(rt);for(const st in at)isObject(rt[st])?(it[st]||(it[st]={}),deepMerge(it[st],rt[st])):it[st]=rt[st]}return it}function warn$1(...it){const tt=it.length===1?it[0]:it[1],rt=it.length===2?it[0]:!0}function invariant(...it){const tt=it.length===1?it[0]:it[1],rt=it.length===2?it[0]:!0}function determineDelayFn(it,tt){return(rt,at)=>{if(isNumber(it))return it;if(isFunction(it))return it(rt,at);if(isString(it)){const st=Number.parseFloat(it);if(!Number.isNaN(st))return st;if(tt){const ot=tt==null?void 0:tt[it];return invariant(ot==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${it}\`. It doesn't exist in \`options.delays\``),isFunction(ot)?ot(rt,at):ot}}}}function set(it,tt,rt){typeof rt.value=="object"&&(rt.value=klona$1(rt.value)),!rt.enumerable||rt.get||rt.set||!rt.configurable||!rt.writable||tt==="__proto__"?Object.defineProperty(it,tt,rt):it[tt]=rt.value}function klona$1(it){if(typeof it!="object")return it;var tt=0,rt,at,st,ot=Object.prototype.toString.call(it);if(ot==="[object Object]"?st=Object.create(it.__proto__||null):ot==="[object Array]"?st=Array(it.length):ot==="[object Set]"?(st=new Set,it.forEach(function(lt){st.add(klona$1(lt))})):ot==="[object Map]"?(st=new Map,it.forEach(function(lt,ut){st.set(klona$1(ut),klona$1(lt))})):ot==="[object Date]"?st=new Date(+it):ot==="[object RegExp]"?st=new RegExp(it.source,it.flags):ot==="[object DataView]"?st=new it.constructor(klona$1(it.buffer)):ot==="[object ArrayBuffer]"?st=it.slice(0):ot.slice(-6)==="Array]"&&(st=new it.constructor(it)),st){for(at=Object.getOwnPropertySymbols(it);tt<at.length;tt++)set(st,at[tt],Object.getOwnPropertyDescriptor(it,at[tt]));for(tt=0,at=Object.getOwnPropertyNames(it);tt<at.length;tt++)Object.hasOwnProperty.call(st,rt=at[tt])&&st[rt]===it[rt]||set(st,rt,Object.getOwnPropertyDescriptor(it,rt))}return st||it}function klona(it){var tt,rt,at;if(Array.isArray(it)){for(rt=Array(tt=it.length);tt--;)rt[tt]=(at=it[tt])&&typeof at=="object"?klona(at):at;return rt}if(Object.prototype.toString.call(it)==="[object Object]"){rt={};for(tt in it)tt==="__proto__"?Object.defineProperty(rt,tt,{value:klona(it[tt]),configurable:!0,enumerable:!0,writable:!0}):rt[tt]=(at=it[tt])&&typeof at=="object"?klona(at):at;return rt}return it}function cloneJson(it){return klona(it)}function cloneFull(it){return klona$1(it)}function toEvent(it){return isString(it)?{type:it}:it}function toArray(it){return it?isArray(it)?it.slice():[it]:[]}function isGuardHelper(it){return isObject(it)&&it.predicate!=null}var defaultCompareFn=(it,tt)=>Object.is(it,tt);function subscribeKey(it,tt,rt,at,st){let ot=Reflect.get(snapshot(it),tt);const lt=st||defaultCompareFn;return subscribe(it,function(){const ht=snapshot(it);lt(ot,ht[tt],tt)||(rt(ht[tt]),ot=Reflect.get(ht,tt))},at)}var Truthy=()=>!0;function exec(it,tt,rt,at){return st=>{var ot;return isString(st)?!!((ot=it[st])!=null&&ot.call(it,tt,rt,at)):isFunction(st)?st(tt,rt,at):st.predicate(it)(tt,rt,at)}}function or(...it){return{predicate:tt=>(rt,at,st)=>it.map(exec(tt,rt,at,st)).some(Boolean)}}function and$1(...it){return{predicate:tt=>(rt,at,st)=>it.map(exec(tt,rt,at,st)).every(Boolean)}}function not$1(it){return{predicate:tt=>(rt,at,st)=>!exec(tt,rt,at,st)(it)}}function stateIn(...it){return(tt,rt,at)=>at.state.matches(...it)}var guards={or,and:and$1,not:not$1,stateIn};function determineGuardFn(it,tt){return it=it!=null?it:Truthy,(rt,at,st)=>{if(isString(it)){const ot=tt[it];return isFunction(ot)?ot(rt,at,st):ot}return isGuardHelper(it)?it.predicate(tt)(rt,at,st):it==null?void 0:it(rt,at,st)}}function determineActionsFn(it,tt){return(rt,at,st)=>isGuardHelper(it)?it.predicate(tt)(rt,at,st):it}function toTarget(it){return isString(it)?{target:it}:it}function determineTransitionFn(it,tt){return(rt,at,st)=>toArray(it).map(toTarget).find(ot=>{var lt;const ht=determineGuardFn(ot.guard,tt)(rt,at,st);return(lt=ht!=null?ht:ot.target)!=null?lt:ot.actions})}var __defProp=Object.defineProperty,__defNormalProp=(it,tt,rt)=>tt in it?__defProp(it,tt,{enumerable:!0,configurable:!0,writable:!0,value:rt}):it[tt]=rt,__publicField=(it,tt,rt)=>(__defNormalProp(it,typeof tt!="symbol"?tt+"":tt,rt),rt);function clear(it){for(;it.length>0;)it.pop();return it}var Machine=class{constructor(it,tt){__publicField(this,"status","Not Started"),__publicField(this,"state"),__publicField(this,"initialState"),__publicField(this,"id"),__publicField(this,"type","machine"),__publicField(this,"activityEvents",new Map),__publicField(this,"delayedEvents",new Map),__publicField(this,"stateListeners",new Set),__publicField(this,"contextListeners",new Set),__publicField(this,"eventListeners",new Set),__publicField(this,"doneListeners",new Set),__publicField(this,"contextWatchers",new Set),__publicField(this,"removeStateListener",noop$1),__publicField(this,"removeEventListener",noop$1),__publicField(this,"removeContextListener",noop$1),__publicField(this,"parent"),__publicField(this,"children",new Map),__publicField(this,"guardMap"),__publicField(this,"actionMap"),__publicField(this,"delayMap"),__publicField(this,"activityMap"),__publicField(this,"sync"),__publicField(this,"options"),__publicField(this,"config"),__publicField(this,"start",Tt=>{if(this.status==="Running")return this;this.status="Running",this.removeStateListener=subscribe(this.state,()=>{this.stateListeners.forEach(Dt=>{Dt(this.stateSnapshot)})},this.sync),this.removeEventListener=subscribeKey(this.state,"event",Dt=>{this.executeActions(this.config.onEvent,Dt),this.eventListeners.forEach(Wt=>{Wt(Dt)})},this.sync),this.removeContextListener=subscribe(this.state.context,()=>{this.log("Context:",this.contextSnapshot),this.contextListeners.forEach(Dt=>{Dt(this.contextSnapshot)})},this.sync||this.options.debug),this.setupContextWatchers(),this.executeActivities(toEvent("machine.start"),toArray(this.config.activities),"machine.start"),this.executeActions(this.config.entry,toEvent("machine.start"));const wt=toEvent("machine.init"),Ct=isObject(Tt)?Tt.value:Tt,It=isObject(Tt)?Tt.context:void 0;It&&this.setContext(It);const St={target:Ct!=null?Ct:this.config.initial},Rt=this.getNextStateInfo(St,wt);return this.initialState=Rt,this.performStateChangeEffects(this.state.value,Rt,wt),this}),__publicField(this,"setupContextWatchers",()=>{var Tt,wt;for(const[Ct,It]of Object.entries((Tt=this.config.watch)!=null?Tt:{})){let St;if(Ct==="*")St=subscribe(this.state.context,()=>{this.executeActions(It,this.state.event)});else{const Rt=(wt=this.options.compareFns)==null?void 0:wt[Ct];St=subscribeKey(this.state.context,Ct,()=>{this.executeActions(It,this.state.event)},this.sync,Rt)}this.contextWatchers.add(St)}}),__publicField(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,toEvent("machine.stop")),this.executeActions(this.config.exit,toEvent("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.stopEventListeners(),this.stopContextListeners(),this.status="Stopped",this}),__publicField(this,"stopEventListeners",()=>{this.eventListeners.clear(),this.removeEventListener()}),__publicField(this,"stopContextListeners",()=>{this.contextListeners.clear(),this.removeContextListener()}),__publicField(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),__publicField(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(Tt=>Tt()),this.contextWatchers.clear()}),__publicField(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(Tt=>{Tt.forEach(wt=>wt())}),this.delayedEvents.clear()}),__publicField(this,"stopActivities",Tt=>{var wt,Ct;Tt?((wt=this.activityEvents.get(Tt))==null||wt.forEach(It=>It()),(Ct=this.activityEvents.get(Tt))==null||Ct.clear(),this.activityEvents.delete(Tt)):(this.activityEvents.forEach(It=>{It.forEach(St=>St()),It.clear()}),this.activityEvents.clear())}),__publicField(this,"sendChild",(Tt,wt)=>{const Ct=toEvent(Tt),It=runIfFn$4(wt,this.contextSnapshot),St=this.children.get(It);St||invariant(`[@zag-js/core] Cannot send '${Ct.type}' event to unknown child`),St.send(Ct)}),__publicField(this,"stopChild",Tt=>{this.children.has(Tt)||invariant(`[@zag-js/core > stop-child] Cannot stop unknown child ${Tt}`),this.children.get(Tt).stop(),this.children.delete(Tt)}),__publicField(this,"removeChild",Tt=>{this.children.delete(Tt)}),__publicField(this,"stopChildren",()=>{this.children.forEach(Tt=>Tt.stop()),this.children.clear()}),__publicField(this,"setParent",Tt=>{this.parent=Tt}),__publicField(this,"spawn",(Tt,wt)=>{const Ct=runIfFn$4(Tt);return wt&&(Ct.id=wt),Ct.type="machine.actor",Ct.setParent(this),this.children.set(Ct.id,cast(Ct)),Ct.onDone(()=>{this.removeChild(Ct.id)}).start(),cast(ref(Ct))}),__publicField(this,"addActivityCleanup",(Tt,wt)=>{var Ct;!Tt||(this.activityEvents.has(Tt)?(Ct=this.activityEvents.get(Tt))==null||Ct.add(wt):this.activityEvents.set(Tt,new Set([wt])))}),__publicField(this,"setState",Tt=>{this.state.previousValue=this.state.value,this.state.value=Tt;const wt=this.getStateNode(Tt);Tt==null?clear(this.state.tags):this.state.tags=toArray(wt==null?void 0:wt.tags)}),__publicField(this,"setContext",Tt=>{!Tt||deepMerge(this.state.context,Tt)}),__publicField(this,"withContext",Tt=>{const wt={...this.config.context,...compact$1(Tt)};return new Machine({...this.config,context:wt},this.options)}),__publicField(this,"setOptions",Tt=>{const wt=compact$1(Tt);this.actionMap={...this.actionMap,...wt.actions},this.delayMap={...this.delayMap,...wt.delays},this.activityMap={...this.activityMap,...wt.activities},this.guardMap={...this.guardMap,...wt.guards}}),__publicField(this,"getStateNode",Tt=>{var wt;if(!!Tt)return(wt=this.config.states)==null?void 0:wt[Tt]}),__publicField(this,"getNextStateInfo",(Tt,wt)=>{var Ct;const It=this.determineTransition(Tt,wt),St=!(It!=null&&It.target),Rt=(Ct=It==null?void 0:It.target)!=null?Ct:this.state.value,Dt=this.state.value!==Rt,Wt=this.getStateNode(Rt),Vt={reenter:!St&&!Dt&&!(It!=null&&It.internal),transition:It,stateNode:Wt,target:Rt,changed:Dt};return this.log("NextState:",`[${wt.type}]`,this.state.value,"---->",Vt.target),Vt}),__publicField(this,"getActionFromDelayedTransition",Tt=>{const wt=toEvent("machine.after"),It=determineDelayFn(Tt.delay,this.delayMap)(this.contextSnapshot,wt);let St;return{entry:()=>{St=globalThis.setTimeout(()=>{const Rt=this.getNextStateInfo(Tt,wt);this.performStateChangeEffects(this.state.value,Rt,wt)},It)},exit:()=>{globalThis.clearTimeout(St)}}}),__publicField(this,"getDelayedEventActions",Tt=>{const wt=this.getStateNode(Tt),Ct=toEvent("machine.after");if(!wt||!wt.after)return;const It=[],St=[];if(isArray(wt.after)){const Rt=this.determineTransition(wt.after,Ct);if(!Rt)return;const Dt=this.getActionFromDelayedTransition(Rt);It.push(Dt.entry),St.push(Dt.exit)}else if(isObject(wt.after))for(const Rt in wt.after){const Dt=wt.after[Rt];let Wt={};if(isArray(Dt)){const Vt=this.determineTransition(Dt,Ct);Vt&&(Wt=Vt)}else isString(Dt)?Wt={target:Dt,delay:Rt}:Wt={...Dt,delay:Rt};const qt=this.getActionFromDelayedTransition(Wt);It.push(qt.entry),St.push(qt.exit)}return{entries:It,exits:St}}),__publicField(this,"executeActions",(Tt,wt)=>{var Ct;const It=determineActionsFn(Tt,this.guardMap)(this.contextSnapshot,wt,this.guardMeta);for(const St of toArray(It)){const Rt=isString(St)?(Ct=this.actionMap)==null?void 0:Ct[St]:St;warn$1(isString(St)&&!Rt,`[@zag-js/core > execute-actions] No implementation found for action: \`${St}\``),Rt==null||Rt(this.state.context,wt,this.meta)}}),__publicField(this,"executeActivities",(Tt,wt,Ct)=>{var It;for(const St of wt){const Rt=isString(St)?(It=this.activityMap)==null?void 0:It[St]:St;if(!Rt){warn$1(`[@zag-js/core > execute-activity] No implementation found for activity: \`${St}\``);continue}const Dt=Rt(this.state.context,Tt,this.meta);Dt&&this.addActivityCleanup(Ct!=null?Ct:this.state.value,Dt)}}),__publicField(this,"createEveryActivities",(Tt,wt)=>{if(!Tt)return;const Ct=toEvent("machine.every");if(isArray(Tt)){const It=toArray(Tt).find(Wt=>{const qt=Wt.delay,Yt=determineDelayFn(qt,this.delayMap)(this.contextSnapshot,Ct),kt=determineGuardFn(Wt.guard,this.guardMap)(this.contextSnapshot,Ct,this.guardMeta);return kt!=null?kt:Yt!=null});if(!It)return;const Rt=determineDelayFn(It.delay,this.delayMap)(this.contextSnapshot,Ct);wt(()=>{const Wt=globalThis.setInterval(()=>{this.executeActions(It.actions,Ct)},Rt);return()=>{globalThis.clearInterval(Wt)}})}else for(const It in Tt){const St=Tt==null?void 0:Tt[It],Dt=determineDelayFn(It,this.delayMap)(this.contextSnapshot,Ct);wt(()=>{const qt=globalThis.setInterval(()=>{this.executeActions(St,Ct)},Dt);return()=>{globalThis.clearInterval(qt)}})}}),__publicField(this,"setEvent",Tt=>{this.state.previousEvent=this.state.event,this.state.event=ref(toEvent(Tt))}),__publicField(this,"performExitEffects",(Tt,wt)=>{const Ct=this.state.value;if(Ct==="")return;const It=Tt?this.getStateNode(Tt):void 0;this.stopActivities(Ct);const St=determineActionsFn(It==null?void 0:It.exit,this.guardMap)(this.contextSnapshot,wt,this.guardMeta),Rt=toArray(St),Dt=this.delayedEvents.get(Ct);Dt&&Rt.push(...Dt),this.executeActions(Rt,wt),this.eventListeners.clear()}),__publicField(this,"performEntryEffects",(Tt,wt)=>{const Ct=this.getStateNode(Tt),It=toArray(Ct==null?void 0:Ct.activities);this.createEveryActivities(Ct==null?void 0:Ct.every,Wt=>{It.unshift(Wt)}),It.length>0&&this.executeActivities(wt,It);const St=determineActionsFn(Ct==null?void 0:Ct.entry,this.guardMap)(this.contextSnapshot,wt,this.guardMeta),Rt=toArray(St),Dt=this.getDelayedEventActions(Tt);(Ct==null?void 0:Ct.after)&&Dt&&(this.delayedEvents.set(Tt,Dt==null?void 0:Dt.exits),Rt.push(...Dt.entries)),this.executeActions(Rt,wt),(Ct==null?void 0:Ct.type)==="final"&&(this.state.done=!0,this.doneListeners.forEach(Wt=>{Wt(this.stateSnapshot)}),this.stop())}),__publicField(this,"performTransitionEffects",(Tt,wt)=>{const Ct=this.determineTransition(Tt,wt);this.executeActions(Ct==null?void 0:Ct.actions,wt)}),__publicField(this,"performStateChangeEffects",(Tt,wt,Ct)=>{this.setEvent(Ct);const It=wt.changed||wt.reenter;It&&this.performExitEffects(Tt,Ct),this.performTransitionEffects(wt.transition,Ct),this.setState(wt.target),It&&this.performEntryEffects(wt.target,Ct)}),__publicField(this,"determineTransition",(Tt,wt)=>{const Ct=determineTransitionFn(Tt,this.guardMap);return Ct==null?void 0:Ct(this.contextSnapshot,wt,this.guardMeta)}),__publicField(this,"sendParent",Tt=>{var wt;this.parent||invariant("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const Ct=toEvent(Tt);(wt=this.parent)==null||wt.send(Ct)}),__publicField(this,"log",(...Tt)=>{isDev()&&this.options.debug&&console.log(...Tt)}),__publicField(this,"send",Tt=>{const wt=toEvent(Tt);this.transition(this.state.value,wt)}),__publicField(this,"transition",(Tt,wt)=>{var Ct,It,St;const Rt=isString(Tt)?this.getStateNode(Tt):Tt==null?void 0:Tt.stateNode,Dt=toEvent(wt);if(!Rt&&!this.config.on){const Vt=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${Tt}, \`event\`: ${Dt.type}`;warn$1(Vt);return}const Wt=(St=(Ct=Rt==null?void 0:Rt.on)==null?void 0:Ct[Dt.type])!=null?St:(It=this.config.on)==null?void 0:It[Dt.type],qt=this.getNextStateInfo(Wt,Dt);return this.performStateChangeEffects(this.state.value,qt,Dt),qt.stateNode}),__publicField(this,"subscribe",Tt=>(this.stateListeners.add(Tt),this.status==="Running"&&Tt(this.stateSnapshot),()=>{this.stateListeners.delete(Tt)})),__publicField(this,"onDone",Tt=>(this.doneListeners.add(Tt),this)),__publicField(this,"onTransition",Tt=>(this.stateListeners.add(Tt),this.status==="Running"&&Tt(this.stateSnapshot),this)),__publicField(this,"onChange",Tt=>(this.contextListeners.add(Tt),this)),__publicField(this,"onEvent",Tt=>(this.eventListeners.add(Tt),this));var rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt;this.config=cloneFull(it),this.options=cloneFull(tt!=null?tt:{}),this.id=(rt=this.config.id)!=null?rt:`machine-${uuid()}`,this.guardMap=(st=(at=this.options)==null?void 0:at.guards)!=null?st:{},this.actionMap=(lt=(ot=this.options)==null?void 0:ot.actions)!=null?lt:{},this.delayMap=(ht=(ut=this.options)==null?void 0:ut.delays)!=null?ht:{},this.activityMap=(bt=(mt=this.options)==null?void 0:mt.activities)!=null?bt:{},this.sync=(At=(vt=this.options)==null?void 0:vt.sync)!=null?At:!1,this.state=createProxy(this.config);const Et=toEvent("machine.created");this.executeActions((xt=this.config)==null?void 0:xt.created,Et)}get stateSnapshot(){return cast(snapshot(this.state))}getState(){return cloneJson(this.stateSnapshot)}get contextSnapshot(){return this.stateSnapshot.context}get self(){const it=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),get state(){return it.stateSnapshot}}}get meta(){return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,getState:()=>this.stateSnapshot,getAction:it=>this.actionMap[it],getGuard:it=>this.guardMap[it]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}},createMachine=(it,tt)=>new Machine(it,tt),clsx=(...it)=>it.map(tt=>tt==null?void 0:tt.trim()).filter(Boolean).join(" ");function mergeProps(...it){var tt,rt;let at={};for(let st of it){for(let ot in at){if(/^on[A-Z]/.test(ot)&&typeof at[ot]=="function"&&typeof st[ot]=="function"){at[ot]=callAll$2(at[ot],st[ot]);continue}if(ot==="className"||ot==="class"){at[ot]=clsx(at[ot],st[ot]);continue}if(ot==="style"){at[ot]=Object.assign({},(tt=at[ot])!=null?tt:{},(rt=st[ot])!=null?rt:{});continue}at[ot]=st[ot]!==void 0?st[ot]:at[ot]}for(let ot in st)at[ot]===void 0&&(at[ot]=st[ot])}return at}function getAlignment(it){return it.split("-")[1]}function getLengthFromAxis(it){return it==="y"?"height":"width"}function getSide(it){return it.split("-")[0]}function getMainAxisFromPlacement(it){return["top","bottom"].includes(getSide(it))?"x":"y"}function computeCoordsFromPlacement(it,tt,rt){let{reference:at,floating:st}=it;const ot=at.x+at.width/2-st.width/2,lt=at.y+at.height/2-st.height/2,ut=getMainAxisFromPlacement(tt),ht=getLengthFromAxis(ut),mt=at[ht]/2-st[ht]/2,bt=getSide(tt),vt=ut==="x";let At;switch(bt){case"top":At={x:ot,y:at.y-st.height};break;case"bottom":At={x:ot,y:at.y+at.height};break;case"right":At={x:at.x+at.width,y:lt};break;case"left":At={x:at.x-st.width,y:lt};break;default:At={x:at.x,y:at.y}}switch(getAlignment(tt)){case"start":At[ut]-=mt*(rt&&vt?-1:1);break;case"end":At[ut]+=mt*(rt&&vt?-1:1);break}return At}const computePosition$1=async(it,tt,rt)=>{const{placement:at="bottom",strategy:st="absolute",middleware:ot=[],platform:lt}=rt,ut=ot.filter(Boolean),ht=await(lt.isRTL==null?void 0:lt.isRTL(tt));let mt=await lt.getElementRects({reference:it,floating:tt,strategy:st}),{x:bt,y:vt}=computeCoordsFromPlacement(mt,at,ht),At=at,xt={},Et=0;for(let Tt=0;Tt<ut.length;Tt++){const{name:wt,fn:Ct}=ut[Tt],{x:It,y:St,data:Rt,reset:Dt}=await Ct({x:bt,y:vt,initialPlacement:at,placement:At,strategy:st,middlewareData:xt,rects:mt,platform:lt,elements:{reference:it,floating:tt}});if(bt=It!=null?It:bt,vt=St!=null?St:vt,xt={...xt,[wt]:{...xt[wt],...Rt}},Dt&&Et<=50){Et++,typeof Dt=="object"&&(Dt.placement&&(At=Dt.placement),Dt.rects&&(mt=Dt.rects===!0?await lt.getElementRects({reference:it,floating:tt,strategy:st}):Dt.rects),{x:bt,y:vt}=computeCoordsFromPlacement(mt,At,ht)),Tt=-1;continue}}return{x:bt,y:vt,placement:At,strategy:st,middlewareData:xt}};function expandPaddingObject(it){return{top:0,right:0,bottom:0,left:0,...it}}function getSideObjectFromPadding(it){return typeof it!="number"?expandPaddingObject(it):{top:it,right:it,bottom:it,left:it}}function rectToClientRect(it){return{...it,top:it.y,left:it.x,right:it.x+it.width,bottom:it.y+it.height}}async function detectOverflow(it,tt){var rt;tt===void 0&&(tt={});const{x:at,y:st,platform:ot,rects:lt,elements:ut,strategy:ht}=it,{boundary:mt="clippingAncestors",rootBoundary:bt="viewport",elementContext:vt="floating",altBoundary:At=!1,padding:xt=0}=tt,Et=getSideObjectFromPadding(xt),wt=ut[At?vt==="floating"?"reference":"floating":vt],Ct=rectToClientRect(await ot.getClippingRect({element:(rt=await(ot.isElement==null?void 0:ot.isElement(wt)))==null||rt?wt:wt.contextElement||await(ot.getDocumentElement==null?void 0:ot.getDocumentElement(ut.floating)),boundary:mt,rootBoundary:bt,strategy:ht})),It=vt==="floating"?{...lt.floating,x:at,y:st}:lt.reference,St=await(ot.getOffsetParent==null?void 0:ot.getOffsetParent(ut.floating)),Rt=await(ot.isElement==null?void 0:ot.isElement(St))?await(ot.getScale==null?void 0:ot.getScale(St))||{x:1,y:1}:{x:1,y:1},Dt=rectToClientRect(ot.convertOffsetParentRelativeRectToViewportRelativeRect?await ot.convertOffsetParentRelativeRectToViewportRelativeRect({rect:It,offsetParent:St,strategy:ht}):It);return{top:(Ct.top-Dt.top+Et.top)/Rt.y,bottom:(Dt.bottom-Ct.bottom+Et.bottom)/Rt.y,left:(Ct.left-Dt.left+Et.left)/Rt.x,right:(Dt.right-Ct.right+Et.right)/Rt.x}}const min$1=Math.min,max$1=Math.max;function within(it,tt,rt){return max$1(it,min$1(tt,rt))}const arrow=it=>({name:"arrow",options:it,async fn(tt){const{element:rt,padding:at=0}=it||{},{x:st,y:ot,placement:lt,rects:ut,platform:ht,elements:mt}=tt;if(rt==null)return{};const bt=getSideObjectFromPadding(at),vt={x:st,y:ot},At=getMainAxisFromPlacement(lt),xt=getLengthFromAxis(At),Et=await ht.getDimensions(rt),Tt=At==="y",wt=Tt?"top":"left",Ct=Tt?"bottom":"right",It=Tt?"clientHeight":"clientWidth",St=ut.reference[xt]+ut.reference[At]-vt[At]-ut.floating[xt],Rt=vt[At]-ut.reference[At],Dt=await(ht.getOffsetParent==null?void 0:ht.getOffsetParent(rt));let Wt=Dt?Dt[It]:0;(!Wt||!await(ht.isElement==null?void 0:ht.isElement(Dt)))&&(Wt=mt.floating[It]||ut.floating[xt]);const qt=St/2-Rt/2,Vt=bt[wt],Yt=Wt-Et[xt]-bt[Ct],jt=Wt/2-Et[xt]/2+qt,kt=within(Vt,jt,Yt),Nt=getAlignment(lt)!=null&&jt!=kt&&ut.reference[xt]/2-(jt<Vt?bt[wt]:bt[Ct])-Et[xt]/2<0?jt<Vt?Vt-jt:Yt-jt:0;return{[At]:vt[At]-Nt,data:{[At]:kt,centerOffset:jt-kt}}}}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(it){return it.replace(/left|right|bottom|top/g,tt=>oppositeSideMap[tt])}function getAlignmentSides(it,tt,rt){rt===void 0&&(rt=!1);const at=getAlignment(it),st=getMainAxisFromPlacement(it),ot=getLengthFromAxis(st);let lt=st==="x"?at===(rt?"end":"start")?"right":"left":at==="start"?"bottom":"top";return tt.reference[ot]>tt.floating[ot]&&(lt=getOppositePlacement(lt)),{main:lt,cross:getOppositePlacement(lt)}}const oppositeAlignmentMap={start:"end",end:"start"};function getOppositeAlignmentPlacement(it){return it.replace(/start|end/g,tt=>oppositeAlignmentMap[tt])}function getExpandedPlacements(it){const tt=getOppositePlacement(it);return[getOppositeAlignmentPlacement(it),tt,getOppositeAlignmentPlacement(tt)]}function getSideList(it,tt,rt){const at=["left","right"],st=["right","left"],ot=["top","bottom"],lt=["bottom","top"];switch(it){case"top":case"bottom":return rt?tt?st:at:tt?at:st;case"left":case"right":return tt?ot:lt;default:return[]}}function getOppositeAxisPlacements(it,tt,rt,at){const st=getAlignment(it);let ot=getSideList(getSide(it),rt==="start",at);return st&&(ot=ot.map(lt=>lt+"-"+st),tt&&(ot=ot.concat(ot.map(getOppositeAlignmentPlacement)))),ot}const flip=function(it){return it===void 0&&(it={}),{name:"flip",options:it,async fn(tt){var rt;const{placement:at,middlewareData:st,rects:ot,initialPlacement:lt,platform:ut,elements:ht}=tt,{mainAxis:mt=!0,crossAxis:bt=!0,fallbackPlacements:vt,fallbackStrategy:At="bestFit",fallbackAxisSideDirection:xt="none",flipAlignment:Et=!0,...Tt}=it,wt=getSide(at),Ct=getSide(lt)===lt,It=await(ut.isRTL==null?void 0:ut.isRTL(ht.floating)),St=vt||(Ct||!Et?[getOppositePlacement(lt)]:getExpandedPlacements(lt));!vt&&xt!=="none"&&St.push(...getOppositeAxisPlacements(lt,Et,xt,It));const Rt=[lt,...St],Dt=await detectOverflow(tt,Tt),Wt=[];let qt=((rt=st.flip)==null?void 0:rt.overflows)||[];if(mt&&Wt.push(Dt[wt]),bt){const{main:kt,cross:zt}=getAlignmentSides(at,ot,It);Wt.push(Dt[kt],Dt[zt])}if(qt=[...qt,{placement:at,overflows:Wt}],!Wt.every(kt=>kt<=0)){var Vt,Yt;const kt=(((Vt=st.flip)==null?void 0:Vt.index)||0)+1,zt=Rt[kt];if(zt)return{data:{index:kt,overflows:qt},reset:{placement:zt}};let Nt=(Yt=qt.filter(Mt=>Mt.overflows[0]<=0).sort((Mt,Lt)=>Mt.overflows[1]-Lt.overflows[1])[0])==null?void 0:Yt.placement;if(!Nt)switch(At){case"bestFit":{var jt;const Mt=(jt=qt.map(Lt=>[Lt.placement,Lt.overflows.filter(Ht=>Ht>0).reduce((Ht,Qt)=>Ht+Qt,0)]).sort((Lt,Ht)=>Lt[1]-Ht[1])[0])==null?void 0:jt[0];Mt&&(Nt=Mt);break}case"initialPlacement":Nt=lt;break}if(at!==Nt)return{reset:{placement:Nt}}}return{}}}};async function convertValueToCoords(it,tt){const{placement:rt,platform:at,elements:st}=it,ot=await(at.isRTL==null?void 0:at.isRTL(st.floating)),lt=getSide(rt),ut=getAlignment(rt),ht=getMainAxisFromPlacement(rt)==="x",mt=["left","top"].includes(lt)?-1:1,bt=ot&&ht?-1:1,vt=typeof tt=="function"?tt(it):tt;let{mainAxis:At,crossAxis:xt,alignmentAxis:Et}=typeof vt=="number"?{mainAxis:vt,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...vt};return ut&&typeof Et=="number"&&(xt=ut==="end"?Et*-1:Et),ht?{x:xt*bt,y:At*mt}:{x:At*mt,y:xt*bt}}const offset=function(it){return it===void 0&&(it=0),{name:"offset",options:it,async fn(tt){const{x:rt,y:at}=tt,st=await convertValueToCoords(tt,it);return{x:rt+st.x,y:at+st.y,data:st}}}};function getCrossAxis(it){return it==="x"?"y":"x"}const shift=function(it){return it===void 0&&(it={}),{name:"shift",options:it,async fn(tt){const{x:rt,y:at,placement:st}=tt,{mainAxis:ot=!0,crossAxis:lt=!1,limiter:ut={fn:wt=>{let{x:Ct,y:It}=wt;return{x:Ct,y:It}}},...ht}=it,mt={x:rt,y:at},bt=await detectOverflow(tt,ht),vt=getMainAxisFromPlacement(getSide(st)),At=getCrossAxis(vt);let xt=mt[vt],Et=mt[At];if(ot){const wt=vt==="y"?"top":"left",Ct=vt==="y"?"bottom":"right",It=xt+bt[wt],St=xt-bt[Ct];xt=within(It,xt,St)}if(lt){const wt=At==="y"?"top":"left",Ct=At==="y"?"bottom":"right",It=Et+bt[wt],St=Et-bt[Ct];Et=within(It,Et,St)}const Tt=ut.fn({...tt,[vt]:xt,[At]:Et});return{...Tt,data:{x:Tt.x-rt,y:Tt.y-at}}}}},size=function(it){return it===void 0&&(it={}),{name:"size",options:it,async fn(tt){const{placement:rt,rects:at,platform:st,elements:ot}=tt,{apply:lt=()=>{},...ut}=it,ht=await detectOverflow(tt,ut),mt=getSide(rt),bt=getAlignment(rt),At=getMainAxisFromPlacement(rt)==="x",{width:xt,height:Et}=at.floating;let Tt,wt;mt==="top"||mt==="bottom"?(Tt=mt,wt=bt===(await(st.isRTL==null?void 0:st.isRTL(ot.floating))?"start":"end")?"left":"right"):(wt=mt,Tt=bt==="end"?"top":"bottom");const Ct=Et-ht[Tt],It=xt-ht[wt];let St=Ct,Rt=It;if(At?Rt=min$1(xt-ht.right-ht.left,It):St=min$1(Et-ht.bottom-ht.top,Ct),!tt.middlewareData.shift&&!bt){const Wt=max$1(ht.left,0),qt=max$1(ht.right,0),Vt=max$1(ht.top,0),Yt=max$1(ht.bottom,0);At?Rt=xt-2*(Wt!==0||qt!==0?Wt+qt:max$1(ht.left,ht.right)):St=Et-2*(Vt!==0||Yt!==0?Vt+Yt:max$1(ht.top,ht.bottom))}await lt({...tt,availableWidth:Rt,availableHeight:St});const Dt=await st.getDimensions(ot.floating);return xt!==Dt.width||Et!==Dt.height?{reset:{rects:!0}}:{}}}};function getWindow$1(it){var tt;return((tt=it.ownerDocument)==null?void 0:tt.defaultView)||window}function getComputedStyle$1(it){return getWindow$1(it).getComputedStyle(it)}function getNodeName(it){return isNode(it)?(it.nodeName||"").toLowerCase():""}let uaString;function getUAString(){if(uaString)return uaString;const it=navigator.userAgentData;return it&&Array.isArray(it.brands)?(uaString=it.brands.map(tt=>tt.brand+"/"+tt.version).join(" "),uaString):navigator.userAgent}function isHTMLElement$3(it){return it instanceof getWindow$1(it).HTMLElement}function isElement(it){return it instanceof getWindow$1(it).Element}function isNode(it){return it instanceof getWindow$1(it).Node}function isShadowRoot(it){if(typeof ShadowRoot>"u")return!1;const tt=getWindow$1(it).ShadowRoot;return it instanceof tt||it instanceof ShadowRoot}function isOverflowElement(it){const{overflow:tt,overflowX:rt,overflowY:at,display:st}=getComputedStyle$1(it);return/auto|scroll|overlay|hidden|clip/.test(tt+at+rt)&&!["inline","contents"].includes(st)}function isTableElement(it){return["table","td","th"].includes(getNodeName(it))}function isContainingBlock(it){const tt=/firefox/i.test(getUAString()),rt=getComputedStyle$1(it),at=rt.backdropFilter||rt.WebkitBackdropFilter;return rt.transform!=="none"||rt.perspective!=="none"||(at?at!=="none":!1)||tt&&rt.willChange==="filter"||tt&&(rt.filter?rt.filter!=="none":!1)||["transform","perspective"].some(st=>rt.willChange.includes(st))||["paint","layout","strict","content"].some(st=>{const ot=rt.contain;return ot!=null?ot.includes(st):!1})}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function isLastTraversableNode(it){return["html","body","#document"].includes(getNodeName(it))}const min=Math.min,max=Math.max,round$1=Math.round;function getCssDimensions(it){const tt=getComputedStyle$1(it);let rt=parseFloat(tt.width),at=parseFloat(tt.height);const st=it.offsetWidth,ot=it.offsetHeight,lt=round$1(rt)!==st||round$1(at)!==ot;return lt&&(rt=st,at=ot),{width:rt,height:at,fallback:lt}}function unwrapElement(it){return isElement(it)?it:it.contextElement}const FALLBACK_SCALE={x:1,y:1};function getScale(it){const tt=unwrapElement(it);if(!isHTMLElement$3(tt))return FALLBACK_SCALE;const rt=tt.getBoundingClientRect(),{width:at,height:st,fallback:ot}=getCssDimensions(tt);let lt=(ot?round$1(rt.width):rt.width)/at,ut=(ot?round$1(rt.height):rt.height)/st;return(!lt||!Number.isFinite(lt))&&(lt=1),(!ut||!Number.isFinite(ut))&&(ut=1),{x:lt,y:ut}}function getBoundingClientRect(it,tt,rt,at){var st,ot;tt===void 0&&(tt=!1),rt===void 0&&(rt=!1);const lt=it.getBoundingClientRect(),ut=unwrapElement(it);let ht=FALLBACK_SCALE;tt&&(at?isElement(at)&&(ht=getScale(at)):ht=getScale(it));const mt=ut?getWindow$1(ut):window,bt=!isLayoutViewport()&&rt;let vt=(lt.left+(bt&&((st=mt.visualViewport)==null?void 0:st.offsetLeft)||0))/ht.x,At=(lt.top+(bt&&((ot=mt.visualViewport)==null?void 0:ot.offsetTop)||0))/ht.y,xt=lt.width/ht.x,Et=lt.height/ht.y;if(ut){const Tt=getWindow$1(ut),wt=at&&isElement(at)?getWindow$1(at):at;let Ct=Tt.frameElement;for(;Ct&&at&&wt!==Tt;){const It=getScale(Ct),St=Ct.getBoundingClientRect(),Rt=getComputedStyle(Ct);St.x+=(Ct.clientLeft+parseFloat(Rt.paddingLeft))*It.x,St.y+=(Ct.clientTop+parseFloat(Rt.paddingTop))*It.y,vt*=It.x,At*=It.y,xt*=It.x,Et*=It.y,vt+=St.x,At+=St.y,Ct=getWindow$1(Ct).frameElement}}return{width:xt,height:Et,top:At,right:vt+xt,bottom:At+Et,left:vt,x:vt,y:At}}function getDocumentElement(it){return((isNode(it)?it.ownerDocument:it.document)||window.document).documentElement}function getNodeScroll(it){return isElement(it)?{scrollLeft:it.scrollLeft,scrollTop:it.scrollTop}:{scrollLeft:it.pageXOffset,scrollTop:it.pageYOffset}}function getWindowScrollBarX(it){return getBoundingClientRect(getDocumentElement(it)).left+getNodeScroll(it).scrollLeft}function getRectRelativeToOffsetParent(it,tt,rt){const at=isHTMLElement$3(tt),st=getDocumentElement(tt),ot=getBoundingClientRect(it,!0,rt==="fixed",tt);let lt={scrollLeft:0,scrollTop:0};const ut={x:0,y:0};if(at||!at&&rt!=="fixed")if((getNodeName(tt)!=="body"||isOverflowElement(st))&&(lt=getNodeScroll(tt)),isHTMLElement$3(tt)){const ht=getBoundingClientRect(tt,!0);ut.x=ht.x+tt.clientLeft,ut.y=ht.y+tt.clientTop}else st&&(ut.x=getWindowScrollBarX(st));return{x:ot.left+lt.scrollLeft-ut.x,y:ot.top+lt.scrollTop-ut.y,width:ot.width,height:ot.height}}function getParentNode(it){if(getNodeName(it)==="html")return it;const tt=it.assignedSlot||it.parentNode||(isShadowRoot(it)?it.host:null)||getDocumentElement(it);return isShadowRoot(tt)?tt.host:tt}function getTrueOffsetParent(it){return!isHTMLElement$3(it)||getComputedStyle$1(it).position==="fixed"?null:it.offsetParent}function getContainingBlock(it){let tt=getParentNode(it);for(;isHTMLElement$3(tt)&&!isLastTraversableNode(tt);){if(isContainingBlock(tt))return tt;tt=getParentNode(tt)}return null}function getOffsetParent(it){const tt=getWindow$1(it);let rt=getTrueOffsetParent(it);for(;rt&&isTableElement(rt)&&getComputedStyle$1(rt).position==="static";)rt=getTrueOffsetParent(rt);return rt&&(getNodeName(rt)==="html"||getNodeName(rt)==="body"&&getComputedStyle$1(rt).position==="static"&&!isContainingBlock(rt))?tt:rt||getContainingBlock(it)||tt}function getDimensions(it){return getCssDimensions(it)}function convertOffsetParentRelativeRectToViewportRelativeRect(it){let{rect:tt,offsetParent:rt,strategy:at}=it;const st=isHTMLElement$3(rt),ot=getDocumentElement(rt);if(rt===ot)return tt;let lt={scrollLeft:0,scrollTop:0},ut={x:1,y:1};const ht={x:0,y:0};if((st||!st&&at!=="fixed")&&((getNodeName(rt)!=="body"||isOverflowElement(ot))&&(lt=getNodeScroll(rt)),isHTMLElement$3(rt))){const mt=getBoundingClientRect(rt);ut=getScale(rt),ht.x=mt.x+rt.clientLeft,ht.y=mt.y+rt.clientTop}return{width:tt.width*ut.x,height:tt.height*ut.y,x:tt.x*ut.x-lt.scrollLeft*ut.x+ht.x,y:tt.y*ut.y-lt.scrollTop*ut.y+ht.y}}function getViewportRect(it,tt){const rt=getWindow$1(it),at=getDocumentElement(it),st=rt.visualViewport;let ot=at.clientWidth,lt=at.clientHeight,ut=0,ht=0;if(st){ot=st.width,lt=st.height;const mt=isLayoutViewport();(mt||!mt&&tt==="fixed")&&(ut=st.offsetLeft,ht=st.offsetTop)}return{width:ot,height:lt,x:ut,y:ht}}function getDocumentRect(it){var tt;const rt=getDocumentElement(it),at=getNodeScroll(it),st=(tt=it.ownerDocument)==null?void 0:tt.body,ot=max(rt.scrollWidth,rt.clientWidth,st?st.scrollWidth:0,st?st.clientWidth:0),lt=max(rt.scrollHeight,rt.clientHeight,st?st.scrollHeight:0,st?st.clientHeight:0);let ut=-at.scrollLeft+getWindowScrollBarX(it);const ht=-at.scrollTop;return getComputedStyle$1(st||rt).direction==="rtl"&&(ut+=max(rt.clientWidth,st?st.clientWidth:0)-ot),{width:ot,height:lt,x:ut,y:ht}}function getNearestOverflowAncestor(it){const tt=getParentNode(it);return isLastTraversableNode(tt)?it.ownerDocument.body:isHTMLElement$3(tt)&&isOverflowElement(tt)?tt:getNearestOverflowAncestor(tt)}function getOverflowAncestors(it,tt){var rt;tt===void 0&&(tt=[]);const at=getNearestOverflowAncestor(it),st=at===((rt=it.ownerDocument)==null?void 0:rt.body),ot=getWindow$1(at);return st?tt.concat(ot,ot.visualViewport||[],isOverflowElement(at)?at:[]):tt.concat(at,getOverflowAncestors(at))}function getInnerBoundingClientRect(it,tt){const rt=getBoundingClientRect(it,!0,tt==="fixed"),at=rt.top+it.clientTop,st=rt.left+it.clientLeft,ot=isHTMLElement$3(it)?getScale(it):{x:1,y:1},lt=it.clientWidth*ot.x,ut=it.clientHeight*ot.y,ht=st*ot.x,mt=at*ot.y;return{top:mt,left:ht,right:ht+lt,bottom:mt+ut,x:ht,y:mt,width:lt,height:ut}}function getClientRectFromClippingAncestor(it,tt,rt){return tt==="viewport"?rectToClientRect(getViewportRect(it,rt)):isElement(tt)?getInnerBoundingClientRect(tt,rt):rectToClientRect(getDocumentRect(getDocumentElement(it)))}function getClippingElementAncestors(it,tt){const rt=tt.get(it);if(rt)return rt;let at=getOverflowAncestors(it).filter(ut=>isElement(ut)&&getNodeName(ut)!=="body"),st=null;const ot=getComputedStyle$1(it).position==="fixed";let lt=ot?getParentNode(it):it;for(;isElement(lt)&&!isLastTraversableNode(lt);){const ut=getComputedStyle$1(lt),ht=isContainingBlock(lt);(ot?!ht&&!st:!ht&&ut.position==="static"&&!!st&&["absolute","fixed"].includes(st.position))?at=at.filter(bt=>bt!==lt):st=ut,lt=getParentNode(lt)}return tt.set(it,at),at}function getClippingRect(it){let{element:tt,boundary:rt,rootBoundary:at,strategy:st}=it;const lt=[...rt==="clippingAncestors"?getClippingElementAncestors(tt,this._c):[].concat(rt),at],ut=lt[0],ht=lt.reduce((mt,bt)=>{const vt=getClientRectFromClippingAncestor(tt,bt,st);return mt.top=max(vt.top,mt.top),mt.right=min(vt.right,mt.right),mt.bottom=min(vt.bottom,mt.bottom),mt.left=max(vt.left,mt.left),mt},getClientRectFromClippingAncestor(tt,ut,st));return{width:ht.right-ht.left,height:ht.bottom-ht.top,x:ht.left,y:ht.top}}const platform={getClippingRect,convertOffsetParentRelativeRectToViewportRelativeRect,isElement,getDimensions,getOffsetParent,getDocumentElement,getScale,async getElementRects(it){let{reference:tt,floating:rt,strategy:at}=it;const st=this.getOffsetParent||getOffsetParent,ot=this.getDimensions;return{reference:getRectRelativeToOffsetParent(tt,await st(rt),at),floating:{x:0,y:0,...await ot(rt)}}},getClientRects:it=>Array.from(it.getClientRects()),isRTL:it=>getComputedStyle$1(it).direction==="rtl"},computePosition=(it,tt,rt)=>{const at=new Map,st={platform,...rt},ot={...st.platform,_c:at};return computePosition$1(it,tt,{...st,platform:ot})};var runIfFn$3=(it,...tt)=>{const rt=typeof it=="function"?it(...tt):it;return rt!=null?rt:void 0},callAll$1=(...it)=>(...tt)=>{it.forEach(function(rt){rt==null||rt(...tt)})},isBoolean=it=>it===!0||it===!1,hasProp$2=(it,tt)=>Object.prototype.hasOwnProperty.call(it,tt);function isHTMLElement$2(it){return typeof it=="object"&&(it==null?void 0:it.nodeType)===Node.ELEMENT_NODE&&typeof(it==null?void 0:it.nodeName)=="string"}var isRef$3=it=>hasProp$2(it,"current");function addDomEvent$3(it,tt,rt,at){const st=isRef$3(it)?it.current:runIfFn$3(it);return st==null||st.addEventListener(tt,rt,at),()=>{st==null||st.removeEventListener(tt,rt,at)}}function getObservedElements(){return globalThis.__rectObserverMap__=globalThis.__rectObserverMap__||new Map,globalThis.__rectObserverMap__}function observeElementRect(it,tt){const rt=getObservedElements(),at=rt.get(it);return at?(at.callbacks.push(tt),tt(it.getBoundingClientRect())):(rt.set(it,{rect:{},callbacks:[tt]}),rt.size===1&&(rafId=requestAnimationFrame(runLoop))),function(){const ot=rt.get(it);if(!ot)return;const lt=ot.callbacks.indexOf(tt);lt>-1&&ot.callbacks.splice(lt,1),ot.callbacks.length===0&&(rt.delete(it),rt.size===0&&cancelAnimationFrame(rafId))}}var rafId;function runLoop(){const it=getObservedElements(),tt=[];it.forEach((rt,at)=>{const st=at.getBoundingClientRect();isEqual(rt.rect,st)||(rt.rect=st,tt.push(rt))}),tt.forEach(rt=>{rt.callbacks.forEach(at=>at(rt.rect))}),rafId=requestAnimationFrame(runLoop)}function isEqual(it,tt){return it.width===tt.width&&it.height===tt.height&&it.top===tt.top&&it.right===tt.right&&it.bottom===tt.bottom&&it.left===tt.left}function resolveOptions(it){var tt,rt,at;const st=isBoolean(it);return{ancestorResize:st?it:(tt=it.ancestorResize)!=null?tt:!0,ancestorScroll:st?it:(rt=it.ancestorScroll)!=null?rt:!0,referenceResize:st?it:(at=it.referenceResize)!=null?at:!0}}function autoUpdate(it,tt,rt,at=!1){const{ancestorScroll:st,ancestorResize:ot,referenceResize:lt}=resolveOptions(at),ut=st||ot,ht=[];ut&&isHTMLElement$2(it)&&ht.push(...getOverflowAncestors(it));function mt(){let vt=[observeElementRect(tt,rt)];return lt&&isHTMLElement$2(it)&&vt.push(observeElementRect(it,rt)),vt.push(callAll$1(...ht.map(At=>addDomEvent$3(At,"resize",rt)))),()=>vt.forEach(At=>At())}function bt(){return callAll$1(...ht.map(vt=>addDomEvent$3(vt,"scroll",rt,{passive:!0})))}return callAll$1(mt(),bt())}var toVar=it=>({variable:it,reference:`var(${it})`}),cssVars={arrowSize:toVar("--arrow-size"),arrowSizeHalf:toVar("--arrow-size-half"),arrowBg:toVar("--arrow-background"),transformOrigin:toVar("--transform-origin"),arrowOffset:toVar("--arrow-offset")},getTransformOrigin=it=>({top:"bottom center","top-start":it?`${it.x}px bottom`:"left bottom","top-end":it?`${it.x}px bottom`:"right bottom",bottom:"top center","bottom-start":it?`${it.x}px top`:"top left","bottom-end":it?`${it.x}px top`:"top right",left:"right center","left-start":it?`right ${it.y}px`:"right top","left-end":it?`right ${it.y}px`:"right bottom",right:"left center","right-start":it?`left ${it.y}px`:"left top","right-end":it?`left ${it.y}px`:"left bottom"}),transformOrigin={name:"transformOrigin",fn({placement:it,elements:tt,middlewareData:rt}){const{arrow:at}=rt,st=getTransformOrigin(at)[it],{floating:ot}=tt;return ot.style.setProperty(cssVars.transformOrigin.variable,st),{data:{transformOrigin:st}}}},shiftArrow=it=>({name:"shiftArrow",fn({placement:tt,middlewareData:rt}){const{element:at}=it;if(rt.arrow){const{x:st,y:ot}=rt.arrow,lt=tt.split("-")[0];Object.assign(at.style,{left:st!=null?`${st}px`:"",top:ot!=null?`${ot}px`:"",[lt]:`calc(100% + ${cssVars.arrowOffset.reference})`})}return{}}}),defaultOptions={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,sameWidth:!1,overflowPadding:8};function getPlacement(it,tt,rt={}){if(!tt||!it)return;const at=Object.assign({},defaultOptions,rt),st=tt.querySelector("[data-part=arrow]"),ot=[],lt=typeof at.boundary=="function"?at.boundary():at.boundary;if(at.flip&&ot.push(flip({boundary:lt,padding:at.overflowPadding})),at.gutter||at.offset){const ht=st?st.offsetHeight/2:0,mt=at.gutter?{mainAxis:at.gutter}:at.offset;(mt==null?void 0:mt.mainAxis)!=null&&(mt.mainAxis+=ht),ot.push(offset(mt))}ot.push(shift({boundary:lt,crossAxis:at.overlap,padding:at.overflowPadding})),st&&ot.push(arrow({element:st,padding:8}),shiftArrow({element:st})),ot.push(transformOrigin),ot.push(size({padding:at.overflowPadding,apply({rects:ht,availableHeight:mt,availableWidth:bt}){const vt=Math.round(ht.reference.width);tt.style.setProperty("--reference-width",`${vt}px`),tt.style.setProperty("--available-width",`${bt}px`),tt.style.setProperty("--available-height",`${mt}px`),at.sameWidth&&Object.assign(tt.style,{width:`${vt}px`,minWidth:"unset"}),at.fitViewport&&Object.assign(tt.style,{maxWidth:`${bt}px`,maxHeight:`${mt}px`})}}));function ut(ht={}){if(!it||!tt)return;const{placement:mt,strategy:bt}=at;computePosition(it,tt,{placement:mt,middleware:ot,strategy:bt,...ht}).then(vt=>{var At;const xt=Math.round(vt.x),Et=Math.round(vt.y);Object.assign(tt.style,{position:vt.strategy,top:"0",left:"0",transform:`translate3d(${xt}px, ${Et}px, 0)`}),(At=at.onComplete)==null||At.call(at,{...vt,compute:ut})})}return ut(),callAll$1(at.listeners?autoUpdate(it,tt,ut,at.listeners):void 0,at.onCleanup)}function getBasePlacement(it){return it.split("-")[0]}var UNMEASURED_FLOATING_STYLE={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)",pointerEvents:"none"},ARROW_FLOATING_STYLE={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function getPlacementStyles(it){const{measured:tt,strategy:rt="absolute",placement:at="bottom"}=it;return{arrow:{position:"absolute",width:cssVars.arrowSize.reference,height:cssVars.arrowSize.reference,[cssVars.arrowSizeHalf.variable]:`calc(${cssVars.arrowSize.reference} / 2)`,[cssVars.arrowOffset.variable]:`calc(${cssVars.arrowSizeHalf.reference} * -1)`,opacity:tt?void 0:0},arrowTip:{transform:ARROW_FLOATING_STYLE[at.split("-")[0]],background:cssVars.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:rt,minWidth:"max-content",...!tt&&UNMEASURED_FLOATING_STYLE}}}var dataAttr=it=>it?"":void 0,rtlKeyMap={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"},sameKeyMap={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"};function getEventKey(it,tt={}){var rt;const{dir:at="ltr",orientation:st="horizontal"}=tt;let{key:ot}=it;return ot=(rt=sameKeyMap[ot])!=null?rt:ot,at==="rtl"&&st==="horizontal"&&ot in rtlKeyMap&&(ot=rtlKeyMap[ot]),ot}function connect(it,tt,rt){var at;const st=it.context.isSubmenu,ot=it.context.value,lt=it.context.isTypingAhead,ut=it.hasTag("visible"),ht=getPlacementStyles({measured:!!it.context.anchorPoint||!!it.context.currentPlacement,placement:it.context.currentPlacement}),mt={isOpen:ut,open(){tt("OPEN")},close(){tt("CLOSE")},highlightedId:it.context.highlightedId,setHighlightedId(bt){tt({type:"SET_HIGHLIGHTED_ID",id:bt})},setParent(bt){tt({type:"SET_PARENT",value:bt,id:bt.state.context.id})},setChild(bt){tt({type:"SET_CHILD",value:bt,id:bt.state.context.id})},value:ot,setValue(bt,vt){tt({type:"SET_VALUE",name:bt,value:vt})},isOptionChecked(bt){return bt.type==="radio"?(ot==null?void 0:ot[bt.name])===bt.value:ot==null?void 0:ot[bt.name].includes(bt.value)},contextTriggerProps:rt.element({...parts.trigger.attrs,id:dom.getContextTriggerId(it.context),onPointerDown(bt){if(bt.pointerType==="mouse")return;const vt=getNativeEvent(bt);tt({type:"CONTEXT_MENU_START",point:getEventPoint(vt)})},onPointerCancel(bt){bt.pointerType!=="mouse"&&tt("CONTEXT_MENU_CANCEL")},onPointerMove(bt){bt.pointerType!=="mouse"&&tt("CONTEXT_MENU_CANCEL")},onPointerUp(bt){bt.pointerType!=="mouse"&&tt("CONTEXT_MENU_CANCEL")},onContextMenu(bt){const vt=getNativeEvent(bt);tt({type:"CONTEXT_MENU",point:getEventPoint(vt)}),bt.preventDefault()},style:{WebkitTouchCallout:"none",userSelect:"none"}}),getTriggerItemProps(bt){return mergeProps(mt.getItemProps({id:bt.triggerProps.id}),bt.triggerProps)},triggerProps:rt.button({...st?parts.triggerItem.attrs:parts.trigger.attrs,"data-placement":it.context.currentPlacement,type:"button",dir:it.context.dir,id:dom.getTriggerId(it.context),"data-uid":it.context.id,"aria-haspopup":"menu","aria-controls":dom.getContentId(it.context),"aria-expanded":ut||void 0,"data-expanded":dataAttr(ut),onPointerMove(bt){bt.pointerType!=="mouse"||dom.isTargetDisabled(bt.currentTarget)||!st||tt({type:"TRIGGER_POINTERMOVE",target:bt.currentTarget})},onPointerLeave(bt){if(bt.pointerType!=="mouse")return;const vt=getNativeEvent(bt);dom.isTargetDisabled(bt.currentTarget)||!st||tt({type:"TRIGGER_POINTERLEAVE",target:bt.currentTarget,point:getEventPoint(vt)})},onClick(bt){dom.isTriggerItem(bt.currentTarget)&&tt({type:"TRIGGER_CLICK",target:bt.currentTarget})},onPointerDown(bt){const vt=dom.isTargetDisabled(bt.currentTarget),At=getNativeEvent(bt);!isLeftClick(At)||vt||isContextMenuEvent$1(bt)||(bt.preventDefault(),dom.isTriggerItem(bt.currentTarget)||tt({type:"TRIGGER_CLICK",target:bt.currentTarget}))},onBlur(){tt("TRIGGER_BLUR")},onFocus(){tt("TRIGGER_FOCUS")},onKeyDown(bt){const vt={ArrowDown(){tt("ARROW_DOWN")},ArrowUp(){tt("ARROW_UP")},Enter(){tt({type:"ARROW_DOWN"})},Space(){tt({type:"ARROW_DOWN"})}},At=getEventKey(bt,it.context),xt=vt[At];xt&&(bt.preventDefault(),xt(bt))}}),positionerProps:rt.element({...parts.positioner.attrs,id:dom.getPositionerId(it.context),style:ht.floating}),arrowProps:rt.element({id:dom.getArrowId(it.context),...parts.arrow.attrs,style:ht.arrow}),arrowTipProps:rt.element({...parts.arrowTip.attrs,style:ht.arrowTip}),contentProps:rt.element({...parts.content.attrs,id:dom.getContentId(it.context),"aria-label":it.context["aria-label"],hidden:!ut,role:"menu",tabIndex:0,dir:it.context.dir,"aria-activedescendant":(at=it.context.highlightedId)!=null?at:void 0,"aria-labelledby":dom.getTriggerId(it.context),"data-placement":it.context.currentPlacement,onPointerEnter(bt){bt.pointerType==="mouse"&&tt("MENU_POINTERENTER")},onKeyDown(bt){if(!isSelfEvent(bt))return;const vt=dom.getFocusedItem(it.context),At=!!(vt!=null&&vt.matches("a[href]")),xt={ArrowDown(){tt("ARROW_DOWN")},ArrowUp(){tt("ARROW_UP")},ArrowLeft(){tt("ARROW_LEFT")},ArrowRight(){tt("ARROW_RIGHT")},Enter(){At&&(vt==null||vt.click()),tt("ENTER")},Space(wt){var Ct;lt?tt({type:"TYPEAHEAD",key:wt.key}):(Ct=xt.Enter)==null||Ct.call(xt,wt)},Home(){tt("HOME")},End(){tt("END")},Tab(wt){tt({type:"TAB",shiftKey:wt.shiftKey,loop:!1})}},Et=getEventKey(bt,{dir:it.context.dir}),Tt=xt[Et];if(Tt){const wt=At&&Et==="Enter";Tt(bt),wt||bt.preventDefault()}else{if(!(bt.key.length===1&&!isModifiedEvent(bt)&&!isElementEditable(vt)))return;tt({type:"TYPEAHEAD",key:bt.key}),bt.preventDefault()}}}),separatorProps:rt.element({...parts.separator.attrs,role:"separator","aria-orientation":"horizontal"}),getItemProps(bt){const{id:vt,disabled:At,valueText:xt}=bt;return rt.element({...parts.item.attrs,id:vt,role:"menuitem","aria-disabled":At,"data-disabled":dataAttr(At),"data-ownedby":dom.getContentId(it.context),"data-focus":dataAttr(it.context.highlightedId===vt),"data-valuetext":xt,onClick(Et){At||tt({type:"ITEM_CLICK",target:Et.currentTarget,id:vt})},onPointerDown(Et){At||tt({type:"ITEM_POINTERDOWN",target:Et.currentTarget,id:vt})},onPointerUp(Et){const Tt=getNativeEvent(Et);!isLeftClick(Tt)||At||it.context.pointerdownNode===Et.currentTarget||Et.currentTarget.click()},onPointerLeave(Et){At||Et.pointerType!=="mouse"||tt({type:"ITEM_POINTERLEAVE",target:Et.currentTarget})},onPointerMove(Et){At||Et.pointerType!=="mouse"||tt({type:"ITEM_POINTERMOVE",id:vt,target:Et.currentTarget})},onDragStart(Et){Et.currentTarget.matches("a[href]")&&Et.preventDefault()},onAuxClick(Et){At||(Et.preventDefault(),Et.currentTarget.click())}})},getOptionItemProps(bt){var vt,At;const{name:xt,type:Et,disabled:Tt,onCheckedChange:wt}=bt;(vt=bt.id)!=null||(bt.id=bt.value),(At=bt.valueText)!=null||(bt.valueText=bt.value);const Ct=mt.isOptionChecked(bt);return Object.assign(mt.getItemProps(bt),rt.element({"data-type":Et,"data-name":xt,...parts.optionItem.attrs,"data-value":bt.value,role:`menuitem${Et}`,"aria-checked":!!Ct,"data-checked":dataAttr(Ct),onClick(It){Tt||(tt({type:"ITEM_CLICK",target:It.currentTarget,option:bt}),wt==null||wt(!Ct))}}))},getItemGroupLabelProps(bt){return rt.element({id:dom.getGroupLabelId(it.context,bt.htmlFor),...parts.itemGroupLabel.attrs})},getItemGroupProps(bt){return rt.element({id:dom.getGroupId(it.context,bt.id),...parts.itemGroup.attrs,"aria-labelledby":bt.id,role:"group"})}};return mt}var runIfFn$2=(it,...tt)=>{const rt=typeof it=="function"?it(...tt):it;return rt!=null?rt:void 0},hasProp$1=(it,tt)=>Object.prototype.hasOwnProperty.call(it,tt),isRef$2=it=>hasProp$1(it,"current");function addDomEvent$2(it,tt,rt,at){const st=isRef$2(it)?it.current:runIfFn$2(it);return st==null||st.addEventListener(tt,rt,at),()=>{st==null||st.removeEventListener(tt,rt,at)}}function trackEscapeKeydown(it){return addDomEvent$2(document,"keydown",rt=>{rt.key==="Escape"&&(it==null||it(rt))})}function isDocument$1(it){return it.nodeType===Node.DOCUMENT_NODE}function isWindow$1(it){return(it==null?void 0:it.toString())==="[object Window]"}function getDocument$1(it){var tt;return isWindow$1(it)?it.document:isDocument$1(it)?it:(tt=it==null?void 0:it.ownerDocument)!=null?tt:document}function getEventTarget$1(it){var tt,rt;return(rt=(tt=it.composedPath)==null?void 0:tt.call(it)[0])!=null?rt:it.target}function contains$1(it,tt){return it?it===tt||isHTMLElement$1(it)&&isHTMLElement$1(tt)&&it.contains(tt):!1}function isHTMLElement$1(it){return typeof it=="object"&&(it==null?void 0:it.nodeType)===Node.ELEMENT_NODE&&typeof(it==null?void 0:it.nodeName)=="string"}var layerStack={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(it=>it.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(it){var tt;const rt=this.indexOf(it),at=this.topMostPointerBlockingLayer()?this.indexOf((tt=this.topMostPointerBlockingLayer())==null?void 0:tt.node):-1;return rt<at},isTopMost(it){const tt=this.layers[this.count()-1];return(tt==null?void 0:tt.node)===it},getNestedLayers(it){return Array.from(this.layers).slice(this.indexOf(it)+1)},isInNestedLayer(it,tt){return this.getNestedLayers(it).some(rt=>contains$1(rt.node,tt))},isInBranch(it){return Array.from(this.branches).some(tt=>contains$1(tt,it))},add(it){this.layers.push(it)},addBranch(it){this.branches.push(it)},remove(it){const tt=this.indexOf(it);tt<0||(tt<this.count()-1&&this.getNestedLayers(it).forEach(at=>at.dismiss()),this.layers.splice(tt,1))},removeBranch(it){const tt=this.branches.indexOf(it);tt>=0&&this.branches.splice(tt,1)},indexOf(it){return this.layers.findIndex(tt=>tt.node===it)},dismiss(it){var tt;(tt=this.layers[this.indexOf(it)])==null||tt.dismiss()},clear(){this.remove(this.layers[0].node)}},originalBodyPointerEvents;function assignPointerEventToLayers(){layerStack.layers.forEach(({node:it})=>{it.style.pointerEvents=layerStack.isBelowPointerBlockingLayer(it)?"none":"auto"})}function clearPointerEvent(it){it.style.pointerEvents=""}var DATA_ATTR="data-inert";function disablePointerEventsOutside(it){const tt=getDocument$1(it);return layerStack.hasPointerBlockingLayer()&&!tt.body.hasAttribute(DATA_ATTR)&&(originalBodyPointerEvents=document.body.style.pointerEvents,tt.body.style.pointerEvents="none",tt.body.setAttribute(DATA_ATTR,"")),()=>{layerStack.hasPointerBlockingLayer()||(tt.body.style.pointerEvents=originalBodyPointerEvents,tt.body.removeAttribute(DATA_ATTR),tt.body.style.length===0&&tt.body.removeAttribute("style"))}}var runIfFn$1=(it,...tt)=>{const rt=typeof it=="function"?it(...tt):it;return rt!=null?rt:void 0},callAll=(...it)=>(...tt)=>{it.forEach(function(rt){rt==null||rt(...tt)})},hasProp=(it,tt)=>Object.prototype.hasOwnProperty.call(it,tt),isDom=()=>typeof window<"u";function getPlatform(){var it;const tt=navigator.userAgentData;return(it=tt==null?void 0:tt.platform)!=null?it:navigator.platform}var pt=it=>isDom()&&it.test(getPlatform()),isTouchDevice=()=>isDom()&&!!navigator.maxTouchPoints,isMac=()=>pt(/^Mac/)&&!isTouchDevice;function isDocument(it){return it.nodeType===Node.DOCUMENT_NODE}function isWindow(it){return(it==null?void 0:it.toString())==="[object Window]"}function getDocument(it){var tt;return isWindow(it)?it.document:isDocument(it)?it:(tt=it==null?void 0:it.ownerDocument)!=null?tt:document}function getWindow(it){var tt;return(tt=it==null?void 0:it.ownerDocument.defaultView)!=null?tt:window}function getEventTarget(it){var tt,rt;return(rt=(tt=it.composedPath)==null?void 0:tt.call(it)[0])!=null?rt:it.target}function contains(it,tt){return it?it===tt||isHTMLElement(it)&&isHTMLElement(tt)&&it.contains(tt):!1}function isHTMLElement(it){return typeof it=="object"&&(it==null?void 0:it.nodeType)===Node.ELEMENT_NODE&&typeof(it==null?void 0:it.nodeName)=="string"}function isVisible(it){return isHTMLElement(it)?it.offsetWidth>0||it.offsetHeight>0||it.getClientRects().length>0:!1}var isContextMenuEvent=it=>it.button===2||isCtrlKey(it)&&it.button===0,isCtrlKey=it=>isMac()?it.metaKey&&!it.ctrlKey:it.ctrlKey&&!it.metaKey;function fireCustomEvent(it,tt,rt){if(!it)return;const at=getWindow(it),st=new at.CustomEvent(tt,rt);return it.dispatchEvent(st)}var focusableSelector="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type";function isFocusable(it){return it?it.matches(focusableSelector)&&isVisible(it):!1}var isRef$1=it=>hasProp(it,"current");function addDomEvent$1(it,tt,rt,at){const st=isRef$1(it)?it.current:runIfFn$1(it);return st==null||st.addEventListener(tt,rt,at),()=>{st==null||st.removeEventListener(tt,rt,at)}}var POINTER_OUTSIDE_EVENT="pointerdown.outside",FOCUS_OUTSIDE_EVENT="focus.outside";function trackInteractOutside(it,tt){const{exclude:rt,onFocusOutside:at,onPointerDownOutside:st,onInteractOutside:ot}=tt;if(!it)return;const lt=getDocument(it),ut=getWindow(it);function ht(Et){const Tt=getEventTarget(Et);return!(Tt instanceof ut.HTMLElement)||!contains(lt.documentElement,Tt)||contains(it,Tt)?!1:!(rt!=null&&rt(Tt))}let mt;function bt(Et){function Tt(){if(!(!it||!ht(Et))){if(st||ot){const wt=callAll(st,ot);it.addEventListener(POINTER_OUTSIDE_EVENT,wt,{once:!0})}fireCustomEvent(it,POINTER_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:Et,contextmenu:isContextMenuEvent(Et),focusable:isFocusable(getEventTarget(Et))}})}}Et.pointerType==="touch"?(lt.removeEventListener("click",Tt),mt=Tt,lt.addEventListener("click",Tt,{once:!0})):Tt()}const vt=new Set,At=setTimeout(()=>{vt.add(addDomEvent$1(lt,"pointerdown",bt,!0))},0);function xt(Et){if(!(!it||!ht(Et))){if(at||ot){const Tt=callAll(at,ot);it.addEventListener(FOCUS_OUTSIDE_EVENT,Tt,{once:!0})}fireCustomEvent(it,FOCUS_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:Et,contextmenu:!1,focusable:isFocusable(getEventTarget(Et))}})}}return vt.add(addDomEvent$1(lt,"focusin",xt,!0)),()=>{clearTimeout(At),mt&&lt.removeEventListener("click",mt),vt.forEach(Et=>Et())}}function warn(...it){const tt=it.length===1?it[0]:it[1],rt=it.length===2?it[0]:!0}function trackDismissableElement(it,tt){if(!it){warn("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:rt,pointerBlocking:at,exclude:st,debug:ot}=tt,lt={dismiss:rt,node:it,pointerBlocking:at};layerStack.add(lt),assignPointerEventToLayers();function ut(At){var xt,Et;const Tt=getEventTarget$1(At.detail.originalEvent);layerStack.isBelowPointerBlockingLayer(it)||layerStack.isInBranch(Tt)||((xt=tt.onPointerDownOutside)==null||xt.call(tt,At),(Et=tt.onInteractOutside)==null||Et.call(tt,At),!At.defaultPrevented&&(ot&&console.log("onPointerDownOutside:",At.detail.originalEvent),rt==null||rt()))}function ht(At){var xt,Et;const Tt=getEventTarget$1(At.detail.originalEvent);layerStack.isInBranch(Tt)||((xt=tt.onFocusOutside)==null||xt.call(tt,At),(Et=tt.onInteractOutside)==null||Et.call(tt,At),!At.defaultPrevented&&(ot&&console.log("onFocusOutside:",At.detail.originalEvent),rt==null||rt()))}function mt(At){var xt;!layerStack.isTopMost(it)||((xt=tt.onEscapeKeyDown)==null||xt.call(tt,At),!At.defaultPrevented&&rt&&(At.preventDefault(),rt()))}function bt(At){if(!it)return!1;const xt=typeof st=="function"?st():st;return(Array.isArray(xt)?xt:[xt]).some(Tt=>contains$1(Tt,At))||layerStack.isInNestedLayer(it,At)}const vt=[at?disablePointerEventsOutside(it):void 0,trackEscapeKeydown(mt),trackInteractOutside(it,{exclude:bt,onFocusOutside:ht,onPointerDownOutside:ut})];return()=>{layerStack.remove(it),assignPointerEventToLayers(),clearPointerEvent(it),vt.forEach(At=>At==null?void 0:At())}}var runIfFn=(it,...tt)=>{const rt=typeof it=="function"?it(...tt):it;return rt!=null?rt:void 0};function compact(it){return it===void 0?it:Object.fromEntries(Object.entries(it).filter(([,tt])=>tt!==void 0).map(([tt,rt])=>[tt,isObject$2(rt)?compact(rt):rt]))}var isRef=it=>hasProp$3(it,"current"),fallback={pageX:0,pageY:0,clientX:0,clientY:0};function extractInfo(it,tt="page"){const rt=isTouchEvent(it)?it.touches[0]||it.changedTouches[0]||fallback:it;return{point:{x:rt[`${tt}X`],y:rt[`${tt}Y`]}}}function addDomEvent(it,tt,rt,at){const st=isRef(it)?it.current:runIfFn(it);return st==null||st.addEventListener(tt,rt,at),()=>{st==null||st.removeEventListener(tt,rt,at)}}function addPointerEvent(it,tt,rt,at){var st;const ot=(st=getEventName(tt))!=null?st:tt;return addDomEvent(it,ot,wrapHandler(rt,tt==="pointerdown"),at)}function wrapHandler(it,tt=!1){const rt=at=>{it(at,extractInfo(at))};return tt?filterPrimaryPointer(rt):rt}function filterPrimaryPointer(it){return tt=>{var rt;const at=(rt=tt.view)!=null?rt:window,st=tt instanceof at.MouseEvent;(!st||st&&tt.button===0)&&it(tt)}}var mouseEventNames={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},touchEventNames={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function getEventName(it){return supportsPointerEvent()?it:supportsTouchEvent()?touchEventNames[it]:supportsMouseEvent()?mouseEventNames[it]:it}function raf(it){const tt=globalThis.requestAnimationFrame(it);return function(){globalThis.cancelAnimationFrame(tt)}}var point=(it,tt)=>({x:it,y:tt});function createRect(it){const{x:tt,y:rt,width:at,height:st}=it,ot=tt+at/2,lt=rt+st/2;return{x:tt,y:rt,width:at,height:st,minX:tt,minY:rt,maxX:tt+at,maxY:rt+st,midX:ot,midY:lt,center:point(ot,lt)}}function getRectCorners(it){const tt=point(it.minX,it.minY),rt=point(it.maxX,it.minY),at=point(it.maxX,it.maxY),st=point(it.minX,it.maxY);return{top:tt,right:rt,bottom:at,left:st}}function getElementPolygon(it,tt){const rt=createRect(it),{top:at,right:st,left:ot,bottom:lt}=getRectCorners(rt),[ut]=tt.split("-");return{top:[ot,at,st,lt],right:[at,st,lt,ot],bottom:[at,ot,lt,st],left:[st,at,ot,lt]}[ut]}function isPointInPolygon(it,tt){const{x:rt,y:at}=tt;let st=!1;for(let ot=0,lt=it.length-1;ot<it.length;lt=ot++){const ut=it[ot].x,ht=it[ot].y,mt=it[lt].x,bt=it[lt].y;ht>at!=bt>at&&rt<(mt-ut)*(at-ht)/(bt-ht)+ut&&(st=!st)}return st}var{not,and}=guards;function machine(it){const tt=compact(it);return createMachine({id:"menu",initial:"unknown",context:{highlightedId:null,hoverId:null,parent:null,children:{},intentPolygon:null,loop:!1,suspendPointer:!1,anchorPoint:null,closeOnSelect:!0,isPlacementComplete:!1,focusTriggerOnClose:!0,...tt,pointerdownNode:null,typeahead:findByTypeahead.defaultOptions,positioning:{placement:"bottom-start",gutter:8,...tt.positioning}},computed:{isSubmenu:rt=>rt.parent!==null,isRtl:rt=>rt.dir==="rtl",isTypingAhead:rt=>rt.typeahead.keysSoFar!==""},watch:{isSubmenu:"setSubmenuPlacement",anchorPoint:"applyAnchorPoint"},on:{SET_PARENT:{actions:"setParentMenu"},SET_CHILD:{actions:"setChildMenu"},OPEN:{target:"open",actions:"invokeOnOpen"},OPEN_AUTOFOCUS:{internal:!0,target:"open",actions:["focusFirstItem","invokeOnOpen"]},CLOSE:{target:"closed",actions:"invokeOnClose"},RESTORE_FOCUS:{actions:"restoreFocus"},SET_VALUE:{actions:["setOptionValue","invokeOnValueChange"]},SET_HIGHLIGHTED_ID:{actions:"setFocusedItem"}},states:{unknown:{on:{SETUP:"idle"}},idle:{on:{CONTEXT_MENU_START:{target:"opening:contextmenu",actions:"setAnchorPoint"},CONTEXT_MENU:{target:"open",actions:["setAnchorPoint","invokeOnOpen"]},TRIGGER_CLICK:{target:"open",actions:"invokeOnOpen"},TRIGGER_FOCUS:{guard:not("isSubmenu"),target:"closed"},TRIGGER_POINTERMOVE:{guard:"isSubmenu",target:"opening"}}},"opening:contextmenu":{after:{LONG_PRESS_DELAY:{target:"open",actions:"invokeOnOpen"}},on:{CONTEXT_MENU_CANCEL:{target:"closed",actions:"invokeOnClose"}}},opening:{after:{SUBMENU_OPEN_DELAY:{target:"open",actions:"invokeOnOpen"}},on:{BLUR:{target:"closed",actions:"invokeOnClose"},TRIGGER_POINTERLEAVE:{target:"closed",actions:"invokeOnClose"}}},closing:{tags:["visible"],activities:["trackPointerMove","trackInteractOutside"],after:{SUBMENU_CLOSE_DELAY:{target:"closed",actions:["focusParentMenu","restoreParentFocus","invokeOnClose"]}},on:{MENU_POINTERENTER:{target:"open",actions:"clearIntentPolygon"},POINTER_MOVED_AWAY_FROM_SUBMENU:{target:"closed",actions:["focusParentMenu","restoreParentFocus"]}}},closed:{entry:["clearFocusedItem","focusTrigger","clearAnchorPoint","resumePointer"],on:{CONTEXT_MENU_START:{target:"opening:contextmenu",actions:"setAnchorPoint"},CONTEXT_MENU:{target:"open",actions:["setAnchorPoint","invokeOnOpen"]},TRIGGER_CLICK:{target:"open",actions:"invokeOnOpen"},TRIGGER_POINTERMOVE:{guard:"isTriggerItem",target:"opening"},TRIGGER_BLUR:"idle",ARROW_DOWN:{target:"open",actions:["focusFirstItem","invokeOnOpen"]},ARROW_UP:{target:"open",actions:["focusLastItem","invokeOnOpen"]}}},open:{tags:["visible"],activities:["trackInteractOutside","computePlacement"],entry:["focusMenu","resumePointer"],exit:["clearPointerdownNode"],on:{TRIGGER_CLICK:{guard:not("isTriggerItem"),target:"closed",actions:"invokeOnClose"},TAB:[{guard:"isForwardTabNavigation",actions:["focusNextItem"]},{actions:["focusPrevItem"]}],ARROW_UP:{actions:["focusPrevItem","focusMenu"]},ARROW_DOWN:{actions:["focusNextItem","focusMenu"]},ARROW_LEFT:{guard:"isSubmenu",target:"closed",actions:["focusParentMenu","invokeOnClose"]},HOME:{actions:["focusFirstItem","focusMenu"]},END:{actions:["focusLastItem","focusMenu"]},REQUEST_CLOSE:{target:"closed",actions:"invokeOnClose"},ARROW_RIGHT:{guard:"isTriggerItemFocused",actions:"openSubmenu"},ENTER:[{guard:"isTriggerItemFocused",actions:"openSubmenu"},{guard:"closeOnSelect",target:"closed",actions:"clickFocusedItem"},{actions:"clickFocusedItem"}],ITEM_POINTERMOVE:[{guard:and(not("suspendPointer"),not("isTargetFocused")),actions:["focusItem","focusMenu"]},{guard:not("isTargetFocused"),actions:"setHoveredItem"}],ITEM_POINTERLEAVE:{guard:and(not("suspendPointer"),not("isTriggerItem")),actions:"clearFocusedItem"},ITEM_CLICK:[{guard:and(not("isTriggerItemFocused"),not("isFocusedItemEditable"),"closeOnSelect"),target:"closed",actions:["invokeOnSelect","changeOptionValue","invokeOnValueChange","closeRootMenu","invokeOnClose"]},{guard:and(not("isTriggerItemFocused"),not("isFocusedItemEditable")),actions:["invokeOnSelect","changeOptionValue","invokeOnValueChange"]},{actions:["focusItem"]}],TRIGGER_POINTERLEAVE:{target:"closing",actions:"setIntentPolygon"},ITEM_POINTERDOWN:{actions:["setPointerdownNode","focusItem"]},TYPEAHEAD:{actions:"focusMatchedItem"},FOCUS_MENU:{actions:"focusMenu"}}}}},{delays:{LONG_PRESS_DELAY:700,SUBMENU_OPEN_DELAY:100,SUBMENU_CLOSE_DELAY:100},guards:{closeOnSelect:(rt,at)=>{var st,ot;return!!((ot=(st=at.option)==null?void 0:st.closeOnSelect)!=null?ot:rt.closeOnSelect)},isMenuFocused:rt=>{const at=dom.getContentEl(rt),st=dom.getActiveElement(rt);return contains$2(at,st)},isTargetFocused:(rt,at)=>rt.highlightedId===at.target.id,isTriggerItem:(rt,at)=>dom.isTriggerItem(at.target),isTriggerItemFocused:(rt,at)=>{var st;const ot=(st=at.target)!=null?st:dom.getFocusedItem(rt);return!!(ot!=null&&ot.hasAttribute("aria-controls"))},isForwardTabNavigation:(rt,at)=>!at.shiftKey,isSubmenu:rt=>rt.isSubmenu,suspendPointer:rt=>rt.suspendPointer,isFocusedItemEditable:rt=>isElementEditable(dom.getFocusedItem(rt)),isWithinPolygon:(rt,at)=>rt.intentPolygon?isPointInPolygon(rt.intentPolygon,at.point):!1},activities:{computePlacement(rt){if(!rt.anchorPoint)return rt.currentPlacement=rt.positioning.placement,getPlacement(dom.getTriggerEl(rt),dom.getPositionerEl(rt),{...rt.positioning,onComplete(at){rt.currentPlacement=at.placement,rt.isPlacementComplete=!0}})},trackInteractOutside(rt,at,{send:st}){return trackDismissableElement(dom.getContentEl(rt),{exclude:[dom.getTriggerEl(rt)],onEscapeKeyDown(ot){rt.isSubmenu&&ot.preventDefault(),closeRootMenu(rt)},onPointerDownOutside(ot){rt.focusTriggerOnClose=!ot.detail.focusable},onDismiss(){st({type:"REQUEST_CLOSE",src:"interact-outside"})}})},trackPointerMove(rt,at,{guards:st,send:ot}){const{isWithinPolygon:lt}=st;rt.parent.state.context.suspendPointer=!0;const ut=dom.getDoc(rt);return addPointerEvent(ut,"pointermove",ht=>{lt(rt,{point:getEventPoint(ht)})||(ot("POINTER_MOVED_AWAY_FROM_SUBMENU"),rt.parent.state.context.suspendPointer=!1)})}},actions:{setAnchorPoint(rt,at){rt.anchorPoint=at.point},clearAnchorPoint(rt){rt.anchorPoint=null},applyAnchorPoint(rt){const at=rt.anchorPoint;if(!at)return;const st=dom.getPositionerEl(rt);!st||raf(()=>{Object.assign(st.style,{position:"absolute",top:"0",left:"0",transform:`translate3d(${at.x}px, ${at.y}px, 0)`}),rt.isPlacementComplete=!0})},setSubmenuPlacement(rt){!rt.isSubmenu||(rt.positioning.placement=rt.isRtl?"left-start":"right-start",rt.positioning.gutter=0)},invokeOnValueChange(rt,at){var st,ot,lt;if(!rt.value)return;const ut=(ot=at.name)!=null?ot:(st=at.option)==null?void 0:st.name;if(!ut)return;const ht=rt.value[ut],mt=isArray$1(ht)?Array.from(ht):ht;(lt=rt.onValueChange)==null||lt.call(rt,{name:ut,value:mt})},setOptionValue(rt,at){!rt.value||(rt.value[at.name]=at.value)},changeOptionValue(rt,at){if(!at.option||!rt.value)return;const{value:st,type:ot,name:lt}=at.option,ut=rt.value[lt];ot==="checkbox"&&isArray$1(ut)?rt.value[lt]=ut.includes(st)?remove(ut,st):add(ut,st):rt.value[lt]=st},clickFocusedItem(rt){var at;(at=dom.getFocusedItem(rt))==null||at.click()},setIntentPolygon(rt,at){const st=dom.getContentEl(rt),ot=rt.currentPlacement;if(!st||!ot)return;const lt=st.getBoundingClientRect(),ut=getElementPolygon(lt,ot);if(!ut)return;const mt=getBasePlacement(ot)==="right"?-5:5;rt.intentPolygon=[{...at.point,x:at.point.x+mt},...ut]},clearIntentPolygon(rt){rt.intentPolygon=null},resumePointer(rt){!rt.parent||(rt.parent.state.context.suspendPointer=!1)},setFocusedItem(rt,at){rt.highlightedId=at.id},clearFocusedItem(rt){rt.highlightedId=null},focusMenu(rt){raf(()=>{const at=dom.getActiveElement(rt),st=dom.getContentEl(rt);contains$2(st,at)||st==null||st.focus()})},focusFirstItem(rt){const at=dom.getFirstEl(rt);!at||(rt.highlightedId=at.id)},focusLastItem(rt){const at=dom.getLastEl(rt);!at||(rt.highlightedId=at.id)},focusNextItem(rt,at){var st;const ot=dom.getNextEl(rt,at.loop);rt.highlightedId=(st=ot==null?void 0:ot.id)!=null?st:null},focusPrevItem(rt,at){var st;const ot=dom.getPrevEl(rt,at.loop);rt.highlightedId=(st=ot==null?void 0:ot.id)!=null?st:null},invokeOnSelect(rt){var at;!rt.highlightedId||((at=rt.onSelect)==null||at.call(rt,{value:rt.highlightedId}),rt.closeOnSelect||(rt.pointerdownNode=null))},focusItem(rt,at){rt.highlightedId=at.id},focusTrigger(rt){rt.isSubmenu||rt.anchorPoint||!rt.focusTriggerOnClose||raf(()=>{var at;return(at=dom.getTriggerEl(rt))==null?void 0:at.focus()})},focusMatchedItem(rt,at){const st=dom.getElemByKey(rt,at.key);st&&(rt.highlightedId=st.id)},setParentMenu(rt,at){rt.parent=ref(at.value)},setChildMenu(rt,at){rt.children[at.id]=ref(at.value)},closeRootMenu(rt){closeRootMenu(rt)},openSubmenu(rt){const at=dom.getFocusedItem(rt),st=at==null?void 0:at.getAttribute("data-uid"),ot=st?rt.children[st]:null;ot==null||ot.send("OPEN_AUTOFOCUS")},focusParentMenu(rt){var at;(at=rt.parent)==null||at.send("FOCUS_MENU")},setHoveredItem(rt,at){rt.hoverId=at.id},restoreFocus(rt){!rt.hoverId||(rt.highlightedId=rt.hoverId,rt.hoverId=null)},restoreParentFocus(rt){var at;(at=rt.parent)==null||at.send("RESTORE_FOCUS")},setPointerdownNode(rt,at){rt.pointerdownNode=ref(at.target)},clearPointerdownNode(rt){rt.pointerdownNode=null},invokeOnOpen(rt){var at;(at=rt.onOpen)==null||at.call(rt)},invokeOnClose(rt){var at;(at=rt.onClose)==null||at.call(rt)}}})}function closeRootMenu(it){let tt=it.parent;for(;tt&&tt.state.context.isSubmenu;)tt=tt.state.context.parent;tt==null||tt.send("CLOSE")}function createNormalizer(it){return new Proxy({},{get(){return it}})}var normalizeProps=createNormalizer(it=>it);function useSnapshot(it,tt){const rt=tt==null?void 0:tt.sync,at=react.exports.useRef(),st=react.exports.useRef();let ot=!0;const lt=react.exports.useSyncExternalStore(react.exports.useCallback(mt=>{const bt=subscribe(it,mt,rt);return mt(),bt},[it,rt]),()=>{const mt=snapshot(it);try{if(!ot&&at.current&&st.current&&!p$2(at.current,mt,st.current,new WeakMap))return at.current}catch{}return mt},()=>snapshot(it));ot=!1;const ut=new WeakMap;react.exports.useEffect(()=>{at.current=lt,st.current=ut});const ht=react.exports.useMemo(()=>new WeakMap,[]);return u$1(lt,ut,ht)}var useSafeLayoutEffect=typeof document<"u"?react.exports.useLayoutEffect:react.exports.useEffect;function useConstant(it){const tt=react.exports.useRef();return tt.current||(tt.current={v:it()}),tt.current.v}function useService(it,tt){const{actions:rt,state:at,context:st}=tt!=null?tt:{},ot=useConstant(()=>{const lt=typeof it=="function"?it():it;return st?lt.withContext(st):lt});return useSafeLayoutEffect(()=>(ot.start(at),ot.state.can("SETUP")&&ot.send("SETUP"),()=>{ot.stop()}),[]),ot.setOptions({actions:rt}),ot.setContext(st),ot}function useMachine(it,tt){const rt=useService(it,tt);return[useSnapshot(rt.state),rt.send,rt]}const DEFAULT_API_KEY="f9e23156ccfc6173c5267eaabf320fb692ffab1c2d572095a58091cbb67590cd";function transformChainToMinimalWagmiChain(it){return{id:it.chainId,name:it.name,rpcUrls:it.rpc,nativeCurrency:{name:it.nativeCurrency.name,symbol:it.nativeCurrency.symbol,decimals:it.nativeCurrency.decimals},testnet:it.testnet,blockExplorers:it.explorers}}const defaultdAppMeta={name:"thirdweb powered dApp"},defaultWalletConnectors=["metamask","walletConnect","walletLink"],ThirdwebProvider=it=>{let{sdkOptions:tt,supportedChains:rt=defaultChains$1,activeChain:at,walletConnectors:st=defaultWalletConnectors,dAppMeta:ot=defaultdAppMeta,authConfig:lt,storageInterface:ut,queryClient:ht,autoConnect:mt=!0,children:bt,thirdwebApiKey:vt=DEFAULT_API_KEY,alchemyApiKey:At,infuraApiKey:xt,desiredChainId:Et,chainRpc:Tt}=it;const wt=react.exports.useMemo(()=>!at||typeof at=="string"||typeof at=="number"?rt:[...rt,at],[rt,at]),Ct=react.exports.useMemo(()=>{var St,Rt;return at?typeof at=="number"?at:typeof at=="string"?(Rt=rt.find(Dt=>Dt.slug===at))==null?void 0:Rt.chainId:at.chainId:(St=rt[0])==null?void 0:St.chainId},[at,rt]),It=react.exports.useMemo(()=>{const St=wt.map(transformChainToMinimalWagmiChain),Rt={...wt.reduce((qt,Vt)=>{try{qt[Vt.chainId]=getChainRPC(Vt,{thirdwebApiKey:vt,alchemyApiKey:At,infuraApiKey:xt})}catch{console.warn("No viable rpc url for chain: ",Vt.slug),qt[Vt.chainId]=""}return qt},{})},Dt={name:ot.name,url:ot.url||"",icons:[ot.logoUrl||""],description:ot.description||""},Wt={appName:ot.name,appLogoUrl:ot.logoUrl,darkMode:ot.isDarkMode};return{autoConnect:mt,connectorStorageKey:"tw:provider:connectors",connectors:qt=>{let{chainId:Vt}=qt;return st.map(Yt=>{if(Yt instanceof Connector$1)return Yt;if(typeof Yt=="string"&&(Yt==="injected"||Yt==="metamask")||typeof Yt=="object"&&(Yt.name==="injected"||Yt.name==="metamask"))return new InjectedConnector({options:typeof Yt=="string"?{shimDisconnect:!0,shimChainChangedDisconnect:!0}:Yt.options,chains:St});if(typeof Yt=="string"&&Yt==="walletConnect"||typeof Yt=="object"&&Yt.name==="walletConnect")return new WalletConnectConnector({options:typeof Yt=="string"?{chainId:Vt,rpc:Rt,clientMeta:Dt,qrcode:!0}:{chainId:Vt,rpc:Rt,clientMeta:Dt,qrcode:!0,...Yt.options},chains:St});if(typeof Yt=="string"&&(Yt==="coinbase"||Yt==="walletLink")||typeof Yt=="object"&&(Yt.name==="coinbase"||Yt.name==="walletLink")){const jt=Rt[Vt||1];return new CoinbaseWalletConnector({chains:St,options:typeof Yt=="string"?{...Wt,jsonRpcUrl:jt}:{...Wt,jsonRpcUrl:jt,...Yt.options}})}return null}).filter(Yt=>Yt!==null)}}},[wt,ot.name,ot.url,ot.logoUrl,ot.description,ot.isDarkMode,mt,vt,At,xt,st]);return jsx(Provider,{...It,children:jsx(ThirdwebSDKProviderWagmiWrapper,{queryClient:ht,sdkOptions:tt,supportedChains:wt,activeChain:Ct||Et,storageInterface:ut,authConfig:lt,thirdwebApiKey:vt,alchemyApiKey:At,infuraApiKey:xt,children:bt})})},ThirdwebSDKProviderWagmiWrapper=it=>{let{children:tt,...rt}=it;const[at]=useSigner();return jsx(ThirdwebSDKProvider,{signer:at.data,...rt,children:tt})};function useNetwork(){const it=useContext();return invariant$1(it,"useNetwork() can only be used inside <ThirdwebProvider />. If you are using <ThirdwebSDKProvider /> you will have to use your own network logic."),useNetwork$1()}function useDisconnect(it){const tt=useContext();invariant$1(tt,"useDisconnect() can only be used inside <ThirdwebProvider />. If you are using <ThirdwebSDKProvider /> you will have to use your own connection logic.");const rt={reconnectPrevious:!0,...it},[,at]=useConnect(),[st,ot]=useAccount();return async()=>{var ut,ht;const lt=((ht=(ut=st==null?void 0:st.data)==null?void 0:ut.connector)==null?void 0:ht.previousConnector)||void 0;if(rt.reconnectPrevious&&lt)try{return await at(lt)}catch(mt){return console.error("failed to re-connect to previous connector",mt),ot()}return ot()}}function detectEnv(it){return detect(it)}function isAndroid(){const it=detectOS();return it?it.toLowerCase().includes("android"):!1}function isIOS(){const it=detectOS();return it?it.toLowerCase().includes("ios")||it.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function detectOS(){const it=detectEnv();return it!=null&&it.os?it.os:void 0}function isMobile(){return detectOS()?isAndroid()||isIOS():!1}function useMetamask(){var ht;const it=useContext();invariant$1(it,"useMetamask() can only be used inside <ThirdwebProvider />. If you are using <ThirdwebSDKProvider /> you will have to use your own wallet-connection logic.");const[tt,rt]=useConnect(),at=typeof window<"u"&&((ht=window.ethereum)==null?void 0:ht.isMetaMask),st=isMobile()&&!at,ot=tt.data.connectors.find(mt=>mt.id==="injected"),lt=tt.data.connectors.find(mt=>mt.id==="walletConnect"),ut=(st?lt:ot)||ot;return invariant$1(ut,"No connector found, please make sure you provide the InjectedConnector to your <ThirdwebProvider />"),async()=>{if(!at){const mt=`https://metamask.app.link/dapp/${window.location.toString()}`;return window.open(mt,"_blank"),Promise.resolve({error:new Error("metamask not injected")})}return await rt(ut)}}globalThis.Buffer=buffer$2.Buffer,globalThis.Buffer=buffer$2.Buffer;const DEFAULT_IPFS_GATEWAY="https://gateway.ipfscdn.io/ipfs/",DEFAULT_IPFS_RESOLVER_OPTIONS={gatewayUrl:DEFAULT_IPFS_GATEWAY};function resolveIpfsUri(it){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_IPFS_RESOLVER_OPTIONS;if(!!it)return it.startsWith("ipfs://")?it.replace("ipfs://",tt.gatewayUrl):it}async function resolveMimeType(it){if(!it)return;const tt=lite.getType(it);if(tt)return tt;const rt=await fetch(it,{method:"HEAD"});if(rt.ok&&rt.headers.has("content-type"))return rt.headers.get("content-type")||void 0}let video;function supportsVideoType(it){return typeof window>"u"||!it||!it.startsWith("video/")?"":(video||(video=document.createElement("video")),video.canPlayType(it))}function shouldRenderVideoTag(it){return!!supportsVideoType(it)}let audio;function supportsAudioType(it){return typeof window>"u"||!it||!it.startsWith("audio/")?"":(audio||(audio=document.createElement("audio")),audio.canPlayType(it))}function shouldRenderAudioTag(it){return!!supportsAudioType(it)}function mergeRefs(it){return tt=>{it.forEach(rt=>{typeof rt=="function"?rt(tt):rt!=null&&(rt.current=tt)})}}const CarbonDocumentUnknown=it=>jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",...it,children:[jsx("circle",{cx:"9",cy:"28.5",r:"1.5",fill:"currentColor"}),jsx("path",{fill:"currentColor",d:"M10 25H8v-4h2a2 2 0 0 0 0-4H8a2.002 2.002 0 0 0-2 2v.5H4V19a4.005 4.005 0 0 1 4-4h2a4 4 0 0 1 0 8Z"}),jsx("path",{fill:"currentColor",d:"m27.7 9.3l-7-7A.908.908 0 0 0 20 2H10a2.006 2.006 0 0 0-2 2v8h2V4h8v6a2.006 2.006 0 0 0 2 2h6v16H14v2h12a2.006 2.006 0 0 0 2-2V10a.91.91 0 0 0-.3-.7ZM20 10V4.4l5.6 5.6Z"})]}),CarbonDocumentAudio=it=>jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",...it,children:[jsx("path",{fill:"currentColor",d:"M29 31a.999.999 0 0 1-.625-.22L23.65 27H20a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1h3.65l4.726-3.78A1 1 0 0 1 30 17v13a1 1 0 0 1-1 1Zm-8-6h3a1 1 0 0 1 .625.22L28 27.92v-8.84l-3.376 2.7A1 1 0 0 1 24 22h-3Z"}),jsx("path",{fill:"currentColor",d:"M16 28H8V4h8v6a2.006 2.006 0 0 0 2 2h6v3h2v-5a.91.91 0 0 0-.3-.7l-7-7A.909.909 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v24a2.006 2.006 0 0 0 2 2h8Zm2-23.6l5.6 5.6H18Z"})]}),CarbonPauseFilled=it=>jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",...it,children:jsx("path",{fill:"currentColor",d:"M12 6h-2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm10 0h-2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2z"})}),CarbonPlayFilledAlt=it=>jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 32 32",...it,children:jsx("path",{fill:"currentColor",d:"M7 28a1 1 0 0 1-1-1V5a1 1 0 0 1 1.482-.876l20 11a1 1 0 0 1 0 1.752l-20 11A1 1 0 0 1 7 28Z"})}),ModelViewer$1=react.exports.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>ModelViewer1ba1b804_esm),void 0)),PlayButton=it=>{let{onClick:tt,isPlaying:rt}=it;const[at,st]=react.exports.useState(!1),ot=()=>st(!0),lt=()=>st(!1),ut=()=>st(!1),ht=()=>st(!0);return jsx("button",{style:{position:"absolute",bottom:0,right:0,transform:"translate(-25%, -25%)",maxWidth:"32px",width:"8%",minWidth:"24px",aspectRatio:"1",zIndex:3,backgroundColor:"#fff",color:"rgb(138, 147, 155)",display:"grid",placeItems:"center",borderRadius:"50%",border:"1px solid rgb(229, 232, 235)",cursor:"pointer",...at?{color:"rgb(53, 56, 64)",boxShadow:"rgb(4 17 29 / 25%) 0px 0px 8px 0px"}:{}},onClick:tt,onMouseEnter:ot,onMouseLeave:lt,onMouseDown:ut,onMouseUp:ht,children:rt?jsx(CarbonPauseFilled,{style:{width:"66%",height:"66%"}}):jsx(CarbonPlayFilledAlt,{style:{width:"66%",height:"66%"}})})},VideoPlayer=React$1.forwardRef((it,tt)=>{let{src:rt,alt:at,poster:st,requireInteraction:ot,style:lt,width:ut,height:ht,controls:mt,...bt}=it;const vt=react.exports.useRef(null),[At,xt]=react.exports.useState(!ot),[Et,Tt]=react.exports.useState(!0);return react.exports.useEffect(()=>{if(vt.current)if(At)try{vt.current.play()}catch(wt){console.error("error playing video",wt)}else try{vt.current.pause(),vt.current.currentTime=0}catch(wt){console.error("error pausing video",wt)}},[At]),jsxs("div",{style:{position:"relative",...lt},...bt,children:[jsx("video",{ref:mergeRefs([vt,tt]),src:rt!=null?rt:void 0,poster:st!=null?st:void 0,loop:!0,playsInline:!0,controlsList:"nodownload",muted:Et,preload:st?"metadata":"auto",onCanPlay:()=>{var wt;At&&((wt=vt.current)==null||wt.play())},width:ut,height:ht,controls:mt,style:{height:"100%",width:"100%",objectFit:"contain",zIndex:1,transition:"opacity .5s",opacity:st?At?1:0:1}}),st&&jsx("img",{src:st,style:{objectFit:"contain",pointerEvents:"none",position:"absolute",width:"100%",height:"100%",zIndex:2,transition:"opacity .5s",opacity:At?0:1,top:0,left:0,right:0,bottom:0},alt:at}),jsx(PlayButton,{onClick:()=>{xt(wt=>!wt),Tt(!1)},isPlaying:At})]})});VideoPlayer.displayName="VideoPlayer";const AudioPlayer=React$1.forwardRef((it,tt)=>{let{src:rt,alt:at,poster:st,style:ot,height:lt,width:ut,...ht}=it;const mt=react.exports.useRef(null),[bt,vt]=react.exports.useState(!1),[At,xt]=react.exports.useState(!0);return react.exports.useEffect(()=>{mt.current&&(bt?mt.current.play():(mt.current.pause(),mt.current.currentTime=0))},[bt]),jsxs("div",{style:{position:"relative",...ot},...ht,children:[st?jsx("img",{height:lt,width:ut,src:st,style:{height:"100%",width:"100%",pointerEvents:"none",objectFit:"contain"},alt:at}):jsx("div",{style:{width:"100%",height:"100%",display:"grid",placeItems:"center",pointerEvents:"none",backgroundColor:"#fff",color:"rgb(138, 147, 155)"},children:jsx(CarbonDocumentAudio,{style:{height:"64px",width:"64px"}})}),jsx(PlayButton,{onClick:()=>{vt(Et=>!Et),xt(!1)},isPlaying:bt}),jsx("audio",{ref:mergeRefs([mt,tt]),src:rt!=null?rt:void 0,loop:!0,playsInline:!0,muted:At,preload:"none",controlsList:"nodownload",style:{position:"absolute",opacity:0,pointerEvents:"none",zIndex:-1,visibility:"hidden"}})]})});AudioPlayer.displayName="AudioPlayer";const IframePlayer=React$1.forwardRef((it,tt)=>{let{src:rt,alt:at,poster:st,requireInteraction:ot,style:lt,...ut}=it;const[ht,mt]=react.exports.useState(!ot);return jsxs("div",{style:{position:"relative",...lt},...ut,children:[jsx("iframe",{src:ht&&rt!=null?rt:void 0,ref:tt,style:{objectFit:"contain",zIndex:1,height:"100%",width:"100%",transition:"opacity .5s",opacity:st?ht?1:0:1},sandbox:"allow-scripts",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}),st&&jsx("img",{src:st,style:{objectFit:"contain",pointerEvents:"none",position:"absolute",width:"100%",height:"100%",zIndex:2,transition:"opacity .5s",opacity:ht?0:1,top:0,left:0,right:0,bottom:0},alt:at}),jsx(PlayButton,{onClick:()=>{mt(bt=>!bt)},isPlaying:ht})]})});IframePlayer.displayName="IframePlayer";const LinkPlayer=React$1.forwardRef((it,tt)=>{let{src:rt,alt:at,style:st,...ot}=it;return jsx("div",{style:{position:"relative",...st},...ot,children:jsx("div",{style:{width:"100%",height:"100%",display:"grid",placeItems:"center",backgroundColor:"#fff",color:"rgb(138, 147, 155)"},children:jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center",flexWrap:"nowrap"},children:[jsx(CarbonDocumentUnknown,{style:{maxWidth:"128px",minWidth:"48px",width:"50%",aspectRatio:"1"}}),jsx("a",{rel:"noopener noreferrer",style:{textDecoration:"underline",color:"rgb(138, 147, 155)"},href:rt!=null?rt:void 0,target:"_blank",ref:tt,children:at||"File"})]})})})});LinkPlayer.displayName="LinkPlayer";const MediaRenderer=React$1.forwardRef((it,tt)=>{let{src:rt,poster:at,alt:st,requireInteraction:ot=!1,width:lt="300px",height:ut="300px",style:ht,mimeType:mt,...bt}=it;const vt={objectFit:"contain",width:lt,height:ut,...ht},At=useResolvedMediaType(rt!=null?rt:void 0,mt),xt=useResolvedMediaType(at!=null?at:void 0);if(At.mimeType){if(At.mimeType==="text/html")return jsx(IframePlayer,{style:vt,src:At.url,poster:xt.url,requireInteraction:ot,...bt});if(At.mimeType.startsWith("model"))return jsx(react.exports.Suspense,{fallback:at?jsx("img",{style:vt,src:at,alt:st,ref:tt,...bt}):null,children:jsx(ModelViewer$1,{style:vt,src:At.url||"",poster:at,alt:st,...bt})});if(shouldRenderVideoTag(At.mimeType))return jsx(VideoPlayer,{style:vt,src:At.url,poster:xt.url,requireInteraction:ot,...bt});if(shouldRenderAudioTag(At.mimeType))return jsx(AudioPlayer,{style:vt,src:At.url,poster:xt.url,requireInteraction:ot,...bt});if(At.mimeType.startsWith("image/"))return jsx("img",{style:vt,src:At.url,alt:st,ref:tt,...bt})}else return jsx("img",{style:vt,...bt,ref:tt,alt:st});return jsx(LinkPlayer,{style:vt,src:At.url,alt:st,ref:tt,...bt})});MediaRenderer.displayName="MediaRenderer";function useResolvedMediaType(it,tt){const rt=react.exports.useMemo(()=>resolveIpfsUri(it),[it]),at=useQuery(["mime-type",rt],()=>resolveMimeType(rt),{enabled:!!rt&&!tt,initialData:tt});return{url:rt,mimeType:at.data}}const ThirdwebNftMedia=React$1.forwardRef((it,tt)=>{var ut;let{metadata:rt,width:at="300px",height:st="300px",style:ot,...lt}=it;return jsx(MediaRenderer,{src:rt.animation_url||rt.image,poster:rt.image,alt:((ut=rt.name)==null?void 0:ut.toString())||"",ref:tt,width:at,height:st,style:{...ot},...lt})});ThirdwebNftMedia.displayName="ThirdwebNftMedia";function canUseDOM(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function useForceUpdate(){const[,it]=react.exports.useState(Object.create(null));return react.exports.useCallback(()=>{it(Object.create(null))},[])}const useIsomorphicLayoutEffect=canUseDOM()?react.exports.useLayoutEffect:react.exports.useEffect,PortalImpl=it=>{let{children:tt,type:rt="reach-portal",containerRef:at}=it;const st=react.exports.useRef(null),ot=react.exports.useRef(null),lt=useForceUpdate();return useIsomorphicLayoutEffect(()=>{if(!st.current)return;const ut=st.current.ownerDocument,ht=(at==null?void 0:at.current)||ut.body;return ot.current=ut==null?void 0:ut.createElement(rt),ht.appendChild(ot.current),lt(),()=>{ot.current&&ht&&ht.removeChild(ot.current)}},[rt,lt,at]),ot.current?reactDom.exports.createPortal(tt,ot.current):jsx("span",{ref:st})},Portal$2=it=>{let{unstable_skipInitialRender:tt,...rt}=it;const[at,st]=react.exports.useState(!1);return react.exports.useEffect(()=>{tt&&st(!0)},[tt]),tt&&!at?null:jsx(PortalImpl,{...rt})};Portal$2.displayName="Portal";function shortenString(it,tt){return`${it.substring(0,tt?4:6)}...${it.substring(it.length-(tt?3:4))}`}function shortenAddress(it,tt){try{const rt=getAddress(it);return shortenString(rt,tt)}catch{return it}}function shortenIfAddress(it,tt){return typeof it=="string"&&it.length>0?shortenAddress(it,tt):it||""}function useClipboard(it){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const[rt,at]=react.exports.useState(!1),{timeout:st=1500,...ot}=typeof tt=="number"?{timeout:tt}:tt,lt=react.exports.useCallback(()=>{const ut=copyToClipboard(it,ot);at(ut)},[it,ot]);return react.exports.useEffect(()=>{let ut=null;return rt&&(ut=window.setTimeout(()=>{at(!1)},st)),()=>{ut&&window.clearTimeout(ut)}},[st,rt]),{value:it,onCopy:lt,hasCopied:rt}}const Box$2=newStyled.div``,spin=keyframes({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Spinner=newStyled.div`
  display: inline-block;
  border-top: 2px solid currentcolor;
  border-right: 2px solid currentcolor;
  border-bottom-style: solid;
  border-left-style: solid;
  border-radius: 99999px;
  border-bottom-width: 2px;
  border-left-width: 2px;
  border-bottom-color: transparent;
  border-left-color: transparent;
  animation: 0.45s linear 0s infinite normal none running ${spin};
  width: 0.75em;
  height: 0.75em;
  flex-shrink: 0;
`,BaseButton=newStyled.button`
  position: relative;
  border-radius: 0.5em;
  padding: 0.75em 1.25em;
  padding-right: ${it=>it.hasRightElement?"0.75em":"1.25em"};
  padding-left: ${it=>it.hasLeftElement?"0.75em":"1.25em"};
  font-size: 1em;
  font-weight: 600;
  letter-spacing: 0.5px;
  display: flex;
  gap: 0.5em;
  align-items: center;
  color: ${it=>computeTextColorBasedOnBackground(it.theme.colors.accent)};
  border: 2px solid
    ${it=>computeHoverColor(it.theme.colors.accent)};
  &:hover {
    cursor: pointer;
  }
  &:disabled {
    cursor: not-allowed;
  }
  &:focus {
    position: relative;
    border-radius: 0.5em;
    outline: 0;
  }
  &:focus:after {
    content: "";
    position: absolute;
    top: -5px;
    right: -5px;
    bottom: -5px;
    left: -5px;
    border: 2px solid ${it=>it.theme.colors.accent};
    border-radius: 11px;
  }
`;function computeHoverColor(it){const tt=color$2(it);return tt.hex()==="#000000"?"#262627":tt.luminosity()<.2?tt.lighten(.1).hex():tt.darken(.1).hex()}function computeDisabledColor(it){const tt=color$2(it);return tt.hex()==="#000000"?"#262627":tt.luminosity()<.2?tt.lighten(.5).hex():tt.darken(.5).hex()}function computeTextColorBasedOnBackground(it){return color$2(it).isDark()?"#fff":"#000"}const SolidButton=newStyled(BaseButton)`
  background: ${it=>it.theme.colors.accent};
  &:hover {
    background: ${it=>computeHoverColor(it.theme.colors.accent)};
    border-color: ${it=>computeHoverColor(it.theme.colors.accent)};
  }
  &:disabled {
    background: ${it=>computeDisabledColor(it.theme.colors.accent)};
    border-color: ${it=>computeDisabledColor(it.theme.colors.accent)};
    color: ${it=>computeTextColorBasedOnBackground(computeDisabledColor(it.theme.colors.accent))};
  }
`,OutlineButton=newStyled(BaseButton)`
  background: transparent;
  &:hover {
    background: ${it=>color$2(it.theme.colors.background).alpha(.5).hexa()};
  }
`,Button=it=>{let{children:tt,variant:rt,rightElement:at,leftElement:st,isLoading:ot,isDisabled:lt,disabled:ut,...ht}=it;return jsxs(rt==="outline"?OutlineButton:SolidButton,{...ht,disabled:lt||ut||ot,hasRightElement:!!at,hasLeftElement:!!st,children:[ot?jsx(Spinner,{style:{position:"absolute",left:"calc(50% - 0.75em / 2)"}}):null,jsxs("span",{style:{opacity:ot?0:1,display:"inherit",gap:"inherit",alignItems:"inherit",justifyContent:"inherit",width:"100%"},children:[st,jsx("span",{style:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:tt}),at]})]})},chainLogos={ethereum:{svgProps:{viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",fill:"none"},paths:jsxs(Fragment$1,{children:[jsx("path",{fill:"#25292E",fillRule:"evenodd",d:"M14 28a14 14 0 1 0 0-28 14 14 0 0 0 0 28Z",clipRule:"evenodd"}),jsx("path",{fill:"url(#a)",fillOpacity:".3",fillRule:"evenodd",d:"M14 28a14 14 0 1 0 0-28 14 14 0 0 0 0 28Z",clipRule:"evenodd"}),jsx("path",{fill:"url(#b)",d:"M8.19 14.77 14 18.21l5.8-3.44-5.8 8.19-5.81-8.19Z"}),jsx("path",{fill:"#fff",d:"m14 16.93-5.81-3.44L14 4.34l5.81 9.15L14 16.93Z"}),jsxs("defs",{children:[jsxs("linearGradient",{id:"a",x1:"0",x2:"14",y1:"0",y2:"28",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{stopColor:"#fff"}),jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),jsxs("linearGradient",{id:"b",x1:"14",x2:"14",y1:"14.77",y2:"22.96",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{stopColor:"#fff"}),jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:".9"})]})]})]})},arbitrum:{svgProps:{viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",fill:"none"},paths:jsxs(Fragment$1,{children:[jsx("rect",{width:"26.6",height:"26.6",x:".7",y:".7",fill:"#2D374B",stroke:"#96BEDC",strokeWidth:"1.4",rx:"13.3"}),jsx("mask",{id:"a",width:"28",height:"28",x:"0",y:"0",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"},children:jsx("rect",{width:"28",height:"28",fill:"#C4C4C4",rx:"14"})}),jsxs("g",{mask:"url(#a)",children:[jsx("path",{fill:"#28A0F0",d:"m14.0861 18.6041 6.5014 10.2239 4.0057-2.3213-7.86-12.3943-2.6471 4.4917Zm13.0744 3.4692-.003-1.8599-7.3064-11.407-2.3087 3.9173 7.091 11.4303 2.172-1.2586a.9628.9628 0 0 0 .3555-.7009l-.0004-.1212Z"}),jsx("rect",{width:"25.9",height:"25.9",x:"1.05",y:"1.05",fill:"url(#b)",fillOpacity:".3",stroke:"#96BEDC",strokeWidth:"2.1",rx:"12.95"}),jsx("path",{fill:"#fff",d:"m.3634 28.2207-3.07-1.7674-.234-.8333L7.7461 9.0194c.7298-1.1913 2.3197-1.575 3.7957-1.5541l1.7323.0457L.3634 28.2207ZM19.1655 7.511l-4.5653.0166L2.24 27.9533l3.6103 2.0788.9818-1.6652L19.1655 7.511Z"})]}),jsx("defs",{children:jsxs("linearGradient",{id:"b",x1:"0",x2:"14",y1:"0",y2:"28",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{stopColor:"#fff"}),jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]})})]})},avalanche:{svgProps:{viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",fill:"none"},paths:jsxs(Fragment$1,{children:[jsx("path",{fill:"#fff",d:"M23 5H5v18h18V5Z"}),jsx("path",{fill:"#E84142",fillRule:"evenodd",d:"M14 28c-7.513.008-14-6.487-14-14C0 6.196 6.043-.008 14 0c7.95.008 14 6.196 14 14 0 7.505-6.495 13.992-14 14Zm-3.971-7.436H7.315c-.57 0-.851 0-1.023-.11a.69.69 0 0 1-.313-.54c-.01-.202.13-.45.412-.944l6.7-11.809c.285-.501.43-.752.612-.845.195-.1.429-.1.625 0 .182.093.326.344.611.845l1.377 2.404.007.013c.308.538.464.81.533 1.097a2.04 2.04 0 0 1 0 .954c-.07.289-.224.564-.536 1.11l-3.52 6.22-.009.017c-.31.542-.467.817-.684 1.024a2.048 2.048 0 0 1-.835.485c-.285.079-.604.079-1.243.079Zm6.852 0h3.888c.574 0 .862 0 1.034-.113a.687.687 0 0 0 .313-.543c.01-.196-.128-.434-.398-.9a8.198 8.198 0 0 1-.028-.048l-1.948-3.332-.022-.037c-.274-.463-.412-.697-.59-.787a.684.684 0 0 0-.621 0c-.179.093-.323.337-.608.828l-1.94 3.331-.007.012c-.284.49-.426.735-.416.936.014.22.127.423.313.543.168.11.456.11 1.03.11Z",clipRule:"evenodd"})]})},optimism:{svgProps:{viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",fill:"none"},paths:jsxs(Fragment$1,{children:[jsx("rect",{width:"28",height:"28",fill:"#FF3131",rx:"14"}),jsx("rect",{width:"28",height:"28",fill:"url(#a)",fillOpacity:".3",rx:"14"}),jsx("path",{fill:"#fff",d:"M9.22 18.35c2.7 0 4.86-2.2 4.86-5.38 0-2.19-1.47-3.8-3.98-3.8-2.72 0-4.85 2.2-4.85 5.38 0 2.2 1.5 3.8 3.97 3.8Zm.83-7.35c1.06 0 1.74.81 1.74 2.1 0 1.9-1.11 3.42-2.51 3.42-1.06 0-1.74-.82-1.74-2.1 0-1.89 1.11-3.42 2.5-3.42Zm6.38-1.68-1.88 8.88h2.26l.55-2.6h1.47c2.43 0 4.01-1.38 4.01-3.6 0-1.61-1.17-2.68-3.1-2.68h-3.3Zm1.9 1.74h.94c.83 0 1.3.38 1.3 1.14 0 1-.68 1.7-1.74 1.7h-1.11l.6-2.84Z"}),jsx("defs",{children:jsxs("linearGradient",{id:"a",x1:"0",x2:"14",y1:"0",y2:"28",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{stopColor:"#fff"}),jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]})})]})},polygon:{svgProps:{viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg",fill:"none"},paths:jsxs(Fragment$1,{children:[jsx("rect",{width:"28",height:"28",fill:"#8247E5",rx:"14"}),jsx("rect",{width:"28",height:"28",fill:"url(#a)",fillOpacity:".3",rx:"14"}),jsx("path",{fill:"#fff",d:"M18.28 10.92a1.06 1.06 0 0 0-1.06 0l-2.41 1.42-1.65.93-2.41 1.43c-.31.19-.72.19-1.06 0l-1.92-1.12a1.07 1.07 0 0 1-.53-.9v-2.2a1 1 0 0 1 .53-.9l1.9-1.08c.3-.18.7-.18 1.04 0l1.9 1.09c.3.18.52.52.52.9v1.42l1.64-.96V9.52a1 1 0 0 0-.52-.9l-3.5-2.04a1.06 1.06 0 0 0-1.06 0L6.13 8.63a1 1 0 0 0-.53.9v4.12a1 1 0 0 0 .53.9l3.56 2.04c.31.19.71.19 1.06 0l2.41-1.4 1.65-.95 2.41-1.4c.31-.19.72-.19 1.06 0l1.89 1.09c.3.18.53.52.53.9v2.2a1 1 0 0 1-.53.9l-1.9 1.11c-.3.19-.7.19-1.05 0l-1.89-1.08a1.07 1.07 0 0 1-.52-.9v-1.43l-1.65.96v1.43a1 1 0 0 0 .53.9l3.56 2.04c.31.19.72.19 1.06 0l3.56-2.04c.31-.19.53-.53.53-.9v-4.13a1 1 0 0 0-.53-.9l-3.6-2.07Z"}),jsx("defs",{children:jsxs("linearGradient",{id:"a",x1:"0",x2:"14",y1:"0",y2:"28",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{stopColor:"#fff"}),jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]})})]})},fantom:{svgProps:{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},paths:jsxs(Fragment$1,{children:[jsxs("defs",{children:[jsx("style",{children:".cls-1{fill:#fff;fill-rule:evenodd}"}),jsx("mask",{id:"mask",width:93.1,height:20,x:10,y:6,maskUnits:"userSpaceOnUse",children:jsx("path",{id:"a",d:"M10 6h93.1v20H10Z",className:"cls-1"})})]}),jsx("g",{id:"Layer_2","data-name":"Layer 2",children:jsxs("g",{id:"Layer_1-2","data-name":"Layer 1",children:[jsx("circle",{cx:16,cy:16,r:16,fill:"#13b5ec"}),jsx("path",{d:"m17.2 12.9 3.6-2.1V15Zm3.6 9L16 24.7l-4.8-2.8V17l4.8 2.8 4.8-2.8Zm-9.6-11.1 3.6 2.1-3.6 2.1Zm5.4 3.1 3.6 2.1-3.6 2.1Zm-1.2 4.2L11.8 16l3.6-2.1Zm4.8-8.3L16 12.2l-4.2-2.4L16 7.3ZM10 9.4v13.1l6 3.4 6-3.4V9.4L16 6Z",className:"cls-1"})]})})]})},binance:{svgProps:{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},paths:jsxs(Fragment$1,{children:[jsx("polygon",{fill:"#F3BA2F",points:"38.171,53.203 62.759,28.616 87.36,53.216 101.667,38.909 62.759,0 23.864,38.896 "}),jsx("rect",{x:"3.644",y:"53.188",transform:"matrix(0.7071 0.7071 -0.7071 0.7071 48.7933 8.8106)",fill:"#F3BA2F",width:"20.233",height:"20.234"}),jsx("polygon",{fill:"#F3BA2F",points:"38.171,73.408 62.759,97.995 87.359,73.396 101.674,87.695 101.667,87.703 62.759,126.61123.863,87.716 23.843,87.696 "}),jsx("rect",{x:"101.64",y:"53.189",transform:"matrix(-0.7071 0.7071 -0.7071 -0.7071 235.5457 29.0503)",fill:"#F3BA2F",width:"20.234",height:"20.233"}),jsx("polygon",{fill:"#F3BA2F",points:"77.271,63.298 77.277,63.298 62.759,48.78 52.03,59.509 52.029,59.509 50.797,60.742 48.254,63.28548.254,63.285 48.234,63.305 48.254,63.326 62.759,77.831 77.277,63.313 77.284,63.305 "})]})}},CoinbaseWalletIcon={svgProps:{viewBox:"0 0 28 28",width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},paths:jsxs(Fragment$1,{children:[jsx("rect",{width:"28",height:"28",fill:"#2C5FF6"}),jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 23.8C19.4124 23.8 23.8 19.4124 23.8 14C23.8 8.58761 19.4124 4.2 14 4.2C8.58761 4.2 4.2 8.58761 4.2 14C4.2 19.4124 8.58761 23.8 14 23.8ZM11.55 10.8C11.1358 10.8 10.8 11.1358 10.8 11.55V16.45C10.8 16.8642 11.1358 17.2 11.55 17.2H16.45C16.8642 17.2 17.2 16.8642 17.2 16.45V11.55C17.2 11.1358 16.8642 10.8 16.45 10.8H11.55Z",fill:"white"})]})},MetamaskIcon={svgProps:{viewBox:"0 0 28 28",width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},paths:jsxs(Fragment$1,{children:[jsx("rect",{width:"28",height:"28",fill:"white"}),jsx("path",{d:"M24.0891 3.1199L15.3446 9.61456L16.9617 5.7828L24.0891 3.1199Z",fill:"#E2761B",stroke:"#E2761B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M3.90207 3.1199L12.5763 9.67608L11.0383 5.7828L3.90207 3.1199Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M20.9429 18.1745L18.6139 21.7426L23.597 23.1136L25.0295 18.2536L20.9429 18.1745Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M2.97929 18.2536L4.40301 23.1136L9.38607 21.7426L7.05713 18.1745L2.97929 18.2536Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M9.10483 12.1456L7.71626 14.2461L12.6642 14.4658L12.4884 9.14877L9.10483 12.1456Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M18.8864 12.1456L15.4589 9.08725L15.3446 14.4658L20.2837 14.2461L18.8864 12.1456Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M9.38606 21.7426L12.3566 20.2925L9.79033 18.2888L9.38606 21.7426Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M15.6347 20.2925L18.6139 21.7426L18.2009 18.2888L15.6347 20.2925Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M18.6139 21.7426L15.6347 20.2925L15.8719 22.2348L15.8456 23.0521L18.6139 21.7426Z",fill:"#D7C1B3",stroke:"#D7C1B3",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M9.38606 21.7426L12.1544 23.0521L12.1368 22.2348L12.3566 20.2925L9.38606 21.7426Z",fill:"#D7C1B3",stroke:"#D7C1B3",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M12.1984 17.0056L9.72002 16.2762L11.4689 15.4765L12.1984 17.0056Z",fill:"#233447",stroke:"#233447",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M15.7928 17.0056L16.5223 15.4765L18.28 16.2762L15.7928 17.0056Z",fill:"#233447",stroke:"#233447",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M9.38606 21.7426L9.80791 18.1745L7.05712 18.2536L9.38606 21.7426Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M18.1921 18.1745L18.6139 21.7426L20.9429 18.2536L18.1921 18.1745Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M20.2837 14.2461L15.3446 14.4658L15.8016 17.0057L16.5311 15.4765L18.2888 16.2762L20.2837 14.2461Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M9.72002 16.2762L11.4777 15.4765L12.1984 17.0057L12.6642 14.4658L7.71626 14.2461L9.72002 16.2762Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M7.71626 14.2461L9.79033 18.2888L9.72002 16.2762L7.71626 14.2461Z",fill:"#E4751F",stroke:"#E4751F",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M18.2888 16.2762L18.2009 18.2888L20.2837 14.2461L18.2888 16.2762Z",fill:"#E4751F",stroke:"#E4751F",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M12.6642 14.4658L12.1984 17.0057L12.7784 20.0025L12.9102 16.0565L12.6642 14.4658Z",fill:"#E4751F",stroke:"#E4751F",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M15.3446 14.4658L15.1073 16.0477L15.2128 20.0025L15.8016 17.0057L15.3446 14.4658Z",fill:"#E4751F",stroke:"#E4751F",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M15.8016 17.0056L15.2128 20.0025L15.6347 20.2925L18.2009 18.2888L18.2888 16.2762L15.8016 17.0056Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M9.72002 16.2762L9.79033 18.2888L12.3566 20.2925L12.7784 20.0025L12.1984 17.0056L9.72002 16.2762Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M15.8456 23.0521L15.8719 22.2348L15.6522 22.0414H12.339L12.1368 22.2348L12.1544 23.0521L9.38606 21.7426L10.3528 22.5336L12.3126 23.8958H15.6786L17.6472 22.5336L18.6139 21.7426L15.8456 23.0521Z",fill:"#C0AD9E",stroke:"#C0AD9E",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M15.6347 20.2925L15.2128 20.0025H12.7784L12.3566 20.2925L12.1368 22.2348L12.339 22.0414H15.6522L15.8719 22.2348L15.6347 20.2925Z",fill:"#161616",stroke:"#161616",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M24.4583 10.0364L25.2053 6.45072L24.0891 3.1199L15.6347 9.39485L18.8864 12.1456L23.4827 13.4903L24.5022 12.3038L24.0628 11.9874L24.7658 11.3459L24.221 10.924L24.924 10.3879L24.4583 10.0364Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M2.79472 6.45072L3.54174 10.0364L3.06717 10.3879L3.77024 10.924L3.23415 11.3459L3.93722 11.9874L3.4978 12.3038L4.50847 13.4903L9.10483 12.1456L12.3566 9.39485L3.90207 3.1199L2.79472 6.45072Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M23.4827 13.4903L18.8864 12.1456L20.2837 14.2461L18.2009 18.2888L20.9429 18.2536H25.0295L23.4827 13.4903Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M9.10484 12.1456L4.50848 13.4903L2.97929 18.2536H7.05713L9.79033 18.2888L7.71626 14.2461L9.10484 12.1456Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"}),jsx("path",{d:"M15.3446 14.4658L15.6347 9.39485L16.9705 5.7828H11.0383L12.3566 9.39485L12.6642 14.4658L12.7696 16.0653L12.7784 20.0025H15.2128L15.2304 16.0653L15.3446 14.4658Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"0.0878845",strokeLinecap:"round",strokeLinejoin:"round"})]})},WalletConnectIcon={svgProps:{viewBox:"0 0 28 28",width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},paths:jsxs(Fragment$1,{children:[jsx("rect",{width:"28",height:"28",fill:"#3B99FC"}),jsx("path",{d:"M8.38969 10.3739C11.4882 7.27538 16.5118 7.27538 19.6103 10.3739L19.9832 10.7468C20.1382 10.9017 20.1382 11.1529 19.9832 11.3078L18.7076 12.5835C18.6301 12.6609 18.5045 12.6609 18.4271 12.5835L17.9139 12.0703C15.7523 9.9087 12.2477 9.9087 10.0861 12.0703L9.53655 12.6198C9.45909 12.6973 9.3335 12.6973 9.25604 12.6198L7.98039 11.3442C7.82547 11.1893 7.82547 10.9381 7.98039 10.7832L8.38969 10.3739ZM22.2485 13.012L23.3838 14.1474C23.5387 14.3023 23.5387 14.5535 23.3838 14.7084L18.2645 19.8277C18.1096 19.9827 17.8584 19.9827 17.7035 19.8277C17.7035 19.8277 17.7035 19.8277 17.7035 19.8277L14.0702 16.1944C14.0314 16.1557 13.9686 16.1557 13.9299 16.1944C13.9299 16.1944 13.9299 16.1944 13.9299 16.1944L10.2966 19.8277C10.1417 19.9827 9.89053 19.9827 9.73561 19.8278C9.7356 19.8278 9.7356 19.8277 9.7356 19.8277L4.61619 14.7083C4.46127 14.5534 4.46127 14.3022 4.61619 14.1473L5.75152 13.012C5.90645 12.857 6.15763 12.857 6.31255 13.012L9.94595 16.6454C9.98468 16.6841 10.0475 16.6841 10.0862 16.6454C10.0862 16.6454 10.0862 16.6454 10.0862 16.6454L13.7194 13.012C13.8743 12.857 14.1255 12.857 14.2805 13.012C14.2805 13.012 14.2805 13.012 14.2805 13.012L17.9139 16.6454C17.9526 16.6841 18.0154 16.6841 18.0541 16.6454L21.6874 13.012C21.8424 12.8571 22.0936 12.8571 22.2485 13.012Z",fill:"white"})]})},StyledSvg=newStyled.svg`
  border-radius: 0.25em;
  flex-shrink: 0;
  ${it=>it.boxSize?`width: ${it.boxSize};
    height: ${it.boxSize};`:""}
`,iconMap={metamask:MetamaskIcon,walletConnect:WalletConnectIcon,coinbaseWallet:CoinbaseWalletIcon,...chainLogos},Icon=it=>{let{name:tt,...rt}=it;const at=iconMap[tt];return jsx(StyledSvg,{...at.svgProps,...rt,children:at.paths})},MenuItemBase=newStyled.li`
  display: flex;
  padding: 0.75em 1em;
  align-items: center;
  gap: 0.5em;
  font-size: 1em;

  ${it=>it.isSelectable?`&:hover,
  &[data-focus] {
    cursor: pointer;
    background: ${color$2(it.theme.colors.text).alpha(.15).hexa()};
  }`:""}

  > svg {
    flex-shrink: 0;
  }
`,MenuItem=it=>{let{children:tt,leftElement:rt,rightElement:at,isSelectable:st=!0,onClick:ot,...lt}=it;return jsxs(MenuItemBase,{...lt,onClick:st?ot:void 0,isSelectable:st,children:[rt,tt,at]})},Menu=newStyled.ul`
  padding: 0;
  margin: 0;
  background: ${it=>it.theme.colors.background};
  color: ${it=>it.theme.colors.text};
  list-style: none;
  border-radius: 0.5em;
  overflow: hidden;
  position: relative;
  pointer-events: auto;
  &:focus {
    outline: 0;
  }
  &:after {
    content: "";
    position: absolute;
    border: 1px solid ${it=>it.theme.colors.accent};
    border-radius: 0.5em;
    pointer-events: none;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
`,lightModeTheme={colors:{accent:"#fff",background:"#fff",text:"#000"}},darkModeTheme={colors:{accent:"#000",background:"#000",text:"#fff"}},fontFamily=`SFRounded, ui-rounded, "SF Pro Rounded", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"`,ThemeProvider$2=it=>{let{colorMode:tt,accentColor:rt,children:at}=it;const st=react.exports.useMemo(()=>{const ot=tt==="light"?lightModeTheme:darkModeTheme;return{...ot,colors:{...ot.colors,accent:rt||ot.colors.accent}}},[rt,tt]);return jsx(ThemeProvider$3,{theme:st,children:jsx("span",{style:{fontFamily},children:at})})},Select=newStyled.select`
  margin: -0.25em 0;
  background: ${it=>color$2(it.theme.colors.background).alpha(.85).hexa()};
  color: ${it=>it.theme.colors.text};
  border: 1px solid
    ${it=>color$2(it.theme.colors.text).alpha(.25).hexa()};
  border-radius: 0.25em;
  padding: 0.25em;
  width: 100%;
  flex-shrink: 1;
  font-size: 1em;
  &:hover {
    cursor: pointer;
  }
  &:focus {
    outline: 2px solid ${it=>it.theme.colors.accent};
  }
  &:disabled {
    cursor: not-allowed;
  }
`,SupportedNetworkSelect=it=>{let{disabledChainIds:tt,...rt}=it;const at=useThirdwebConfigContext(),{mainnets:st,testnets:ot}=react.exports.useMemo(()=>{const lt=at.chains;return{mainnets:lt.filter(ut=>!ut.testnet),testnets:lt.filter(ut=>ut.testnet)}},[at.chains]);return jsxs(Select,{...rt,children:[jsx("option",{disabled:!0,value:-1,children:"Select Network"}),jsx("optgroup",{label:"Mainnets",children:st.map(lt=>{var ut;return jsxs("option",{value:lt.chainId,disabled:tt==null?void 0:tt.includes(lt.chainId),children:[lt.name," (",(ut=lt.nativeCurrency)==null?void 0:ut.symbol,")"]},lt.chainId)})}),jsx("optgroup",{label:"Testnets",children:ot.map(lt=>{var ut;return jsxs("option",{value:lt.chainId,disabled:tt==null?void 0:tt.includes(lt.chainId),children:[lt.name," (",(ut=lt.nativeCurrency)==null?void 0:ut.symbol,")"]},lt.chainId)})})]})},SUPPORTED_CONNECTORS=["injected","walletConnect","coinbasewallet"];function getIconForConnector(it){if(it.name.toLowerCase().includes("coinbase"))return jsx(Icon,{boxSize:"1.5em",name:"coinbaseWallet"});if(it.name.toLocaleLowerCase().includes("metamask"))return jsx(Icon,{boxSize:"1.5em",name:"metamask"});switch(it.id){case"injected":return jsx(Icon,{boxSize:"1.5em",name:"metamask"});case"walletConnect":return jsx(Icon,{boxSize:"1.5em",name:"walletConnect"});case"coinbasewallet":return jsx(Icon,{boxSize:"1.5em",name:"coinbaseWallet"});default:throw new Error("unsupported connector")}}let connecting=!1,switchingNetwork=!1,authing=!1,switchingWallet=!1;const chainIdToCurrencyMap={[ChainId$1.Mainnet]:"ethereum",[ChainId$1.Goerli]:"ethereum",[ChainId$1.Arbitrum]:"arbitrum",[ChainId$1.ArbitrumGoerli]:"arbitrum",[ChainId$1.Avalanche]:"avalanche",[ChainId$1.AvalancheFujiTestnet]:"avalanche",[ChainId$1.Fantom]:"fantom",[ChainId$1.FantomTestnet]:"fantom",[ChainId$1.Optimism]:"optimism",[ChainId$1.OptimismGoerli]:"optimism",[ChainId$1.Polygon]:"polygon",[ChainId$1.Mumbai]:"polygon",[ChainId$1.BinanceSmartChainMainnet]:"binance",[ChainId$1.BinanceSmartChainTestnet]:"binance",[ChainId$1.Hardhat]:"ethereum",[ChainId$1.Localhost]:"ethereum"},ConnectWallet=it=>{var zt,Nt;let{auth:tt,className:rt,btnTitle:at,...st}=it;const ot=react.exports.useId(),lt=useAddress(),[ut,ht]=useMachine(machine({id:ot,closeOnSelect:!0,positioning:{sameWidth:!0}})),mt=connect(ut,ht,normalizeProps),[{data:{connectors:bt,connector:vt}},At]=useConnect(),xt=useDisconnect({reconnectPrevious:!1}),Et=bt.filter(Mt=>SUPPORTED_CONNECTORS.includes(Mt.id)),[Tt,wt]=useNetwork(),Ct=useChainId(),It=useMetamask(),St=useBalance(),{onCopy:Rt,hasCopied:Dt}=useClipboard(lt||""),Wt=useThirdwebAuthContext(),{user:qt,isLoading:Vt}=useUser(),{login:Yt}=useLogin(),{logout:jt}=useLogout(),kt=tt!=null&&tt.loginOptional?!1:!!(Wt!=null&&Wt.authUrl)&&!!lt&&!(qt!=null&&qt.address);return jsx(ThemeProvider$2,{...st,children:jsxs("div",{style:{position:"relative",width:"100%"},children:[jsx(Button,{className:rt,style:{height:"50px",minWidth:"200px",width:"100%"},onClick:async Mt=>{if(kt){Mt.preventDefault(),Mt.stopPropagation(),authing=!0;try{await Yt(tt==null?void 0:tt.loginOptions)}catch(Lt){console.error("failed to log in",Lt)}authing=!1}},...kt?{}:mt.triggerProps,leftElement:kt?Vt?jsx(Spinner,{}):jsx(FiLock_1,{}):lt&&Ct&&Ct in chainIdToCurrencyMap?jsx(Icon,{boxSize:"1.5em",name:chainIdToCurrencyMap[Ct]}):void 0,rightElement:kt?void 0:jsxs(Fragment$1,{children:[vt&&getIconForConnector(vt),jsx(FiChevronDown_1,{style:{transition:"transform 150ms ease",transform:`rotate(${mt.isOpen?"-180deg":"0deg"})`}})]}),children:lt?kt?jsx("span",{style:{whiteSpace:"nowrap"},children:"Sign in"}):jsxs("span",{style:{display:"flex",flexDirection:"column",fontWeight:400,alignItems:"flex-start",fontSize:"0.8em"},children:[jsx("span",{style:{whiteSpace:"nowrap",fontWeight:500},children:St.isLoading?"Loading...":jsxs(Fragment$1,{children:[(zt=St.data)==null?void 0:zt.displayValue.slice(0,5)," ",(Nt=St.data)==null?void 0:Nt.symbol]})}),jsx("span",{style:{fontSize:"0.9em"},children:shortenIfAddress(lt)})]}):jsx("span",{style:{whiteSpace:"nowrap"},children:at||"Connect Wallet"})}),jsx(Portal$2,{children:jsx(Box$2,{...mt.positionerProps,style:{zIndex:9999,fontFamily},children:jsx(Menu,{...mt.contentProps,children:mt.isOpen?lt?jsxs(Fragment$1,{children:[(Wt==null?void 0:Wt.authUrl)&&!(qt!=null&&qt.address)&&!kt?jsx(MenuItem,{...mt.getItemProps({id:"auth",closeOnSelect:!1}),leftElement:Vt?jsx(Spinner,{}):jsx(FiLock_1,{}),onClick:async()=>{if(!(Vt||authing||(qt==null?void 0:qt.address))){authing=!0;try{await Yt(tt==null?void 0:tt.loginOptions)}catch(Mt){console.error("failed to log in",Mt)}authing=!1}},children:"Sign in"}):null,jsx(MenuItem,{...mt.getItemProps({id:"copy",closeOnSelect:!1}),leftElement:Dt?jsx(FiCheck_1,{width:"1em",height:"1em",color:"#57ab5a"}):jsx(FiCopy_1,{width:"1em",height:"1em"}),onClick:()=>{Rt()},children:"Copy address"}),jsx(MenuItem,{...mt.getItemProps({id:"switch-network",closeOnSelect:!1,disabled:!wt}),isSelectable:!1,leftElement:Tt.loading?jsx(Spinner,{}):Tt.error?jsx(FiWifi_1,{color:"#e5534b",width:"1em",height:"1em"}):jsx(FiWifi_1,{width:"1em",height:"1em"}),children:jsx(SupportedNetworkSelect,{value:Ct,disabled:!wt,onChange:async Mt=>{if(!switchingNetwork&&wt){switchingNetwork=!0;const Lt=parseInt(Mt.target.value);try{await wt(Lt)}catch(Ht){console.error("failed to switch network",Ht)}finally{switchingNetwork=!1}}}})}),vt&&vt.name==="MetaMask"&&vt.id==="injected"?jsx(MenuItem,{...mt.getItemProps({id:"switch-wallet"}),leftElement:jsx(FiShuffle_1,{width:"1em",height:"1em"}),onClick:async()=>{if(!switchingWallet){switchingWallet=!0;try{await vt.getProvider().request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}),mt.close()}catch(Mt){console.error("failed to switch wallets",Mt)}switchingWallet=!1}},children:"Switch Account"}):null,jsx(MenuItem,{...mt.getItemProps({id:"disconnect"}),leftElement:jsx(FiXCircle_1,{width:"1em",height:"1em"}),onClick:()=>{xt(),Wt!=null&&Wt.authUrl&&jt(),mt.close()},children:"Disconnect"})]}):jsxs(Fragment$1,{children:[jsx(MenuItem,{...mt.getItemProps({id:"metamask"}),onClick:async()=>{if(!connecting)try{connecting=!0,await It(),mt.close()}finally{connecting=!1}},leftElement:jsx(Icon,{boxSize:"1.5em",name:"metamask"}),children:"MetaMask"}),Et.filter(Mt=>Mt.name!=="MetaMask").sort((Mt,Lt)=>Mt.name.localeCompare(Lt.name)).map(Mt=>Mt.ready?jsx(MenuItem,{...mt.getItemProps({id:Mt.id}),onClick:async()=>{if(!connecting)try{connecting=!0,await At(Mt),mt.close()}finally{connecting=!1}},leftElement:getIconForConnector(Mt),children:Mt.name},Mt.id):null)]}):null})})})]})})};function _objectWithoutPropertiesLoose(it,tt){if(it==null)return{};var rt={},at=Object.keys(it),st,ot;for(ot=0;ot<at.length;ot++)st=at[ot],!(tt.indexOf(st)>=0)&&(rt[st]=it[st]);return rt}function isPlainObject(it){return it!==null&&typeof it=="object"&&it.constructor===Object}function deepClone(it){if(!isPlainObject(it))return it;const tt={};return Object.keys(it).forEach(rt=>{tt[rt]=deepClone(it[rt])}),tt}function deepmerge(it,tt,rt={clone:!0}){const at=rt.clone?_extends({},it):it;return isPlainObject(it)&&isPlainObject(tt)&&Object.keys(tt).forEach(st=>{st!=="__proto__"&&(isPlainObject(tt[st])&&st in it&&isPlainObject(it[st])?at[st]=deepmerge(it[st],tt[st],rt):rt.clone?at[st]=isPlainObject(tt[st])?deepClone(tt[st]):tt[st]:at[st]=tt[st])}),at}function formatMuiErrorMessage(it){let tt="https://mui.com/production-error/?code="+it;for(let rt=1;rt<arguments.length;rt+=1)tt+="&args[]="+encodeURIComponent(arguments[rt]);return"Minified MUI error #"+it+"; visit "+tt+" for the full message."}function capitalize(it){if(typeof it!="string")throw new Error(formatMuiErrorMessage(7));return it.charAt(0).toUpperCase()+it.slice(1)}function createChainedFunction(...it){return it.reduce((tt,rt)=>rt==null?tt:function(...st){tt.apply(this,st),rt.apply(this,st)},()=>{})}function ownerDocument(it){return it&&it.ownerDocument||document}function ownerWindow(it){return ownerDocument(it).defaultView||window}function setRef(it,tt){typeof it=="function"?it(tt):it&&(it.current=tt)}const useEnhancedEffect=typeof window<"u"?react.exports.useLayoutEffect:react.exports.useEffect,useEnhancedEffect$1=useEnhancedEffect;function useEventCallback(it){const tt=react.exports.useRef(it);return useEnhancedEffect$1(()=>{tt.current=it}),react.exports.useCallback((...rt)=>(0,tt.current)(...rt),[])}function useForkRef(...it){return react.exports.useMemo(()=>it.every(tt=>tt==null)?null:tt=>{it.forEach(rt=>{setRef(rt,tt)})},it)}function getScrollbarSize(it){const tt=it.documentElement.clientWidth;return Math.abs(window.innerWidth-tt)}function resolveProps(it,tt){const rt=_extends({},tt);return Object.keys(it).forEach(at=>{if(at.toString().match(/^(components|slots)$/))rt[at]=_extends({},it[at],rt[at]);else if(at.toString().match(/^(componentsProps|slotProps)$/)){const st=it[at]||{},ot=tt[at];rt[at]={},!ot||!Object.keys(ot)?rt[at]=st:!st||!Object.keys(st)?rt[at]=ot:(rt[at]=_extends({},ot),Object.keys(st).forEach(lt=>{rt[at][lt]=resolveProps(st[lt],ot[lt])}))}else rt[at]===void 0&&(rt[at]=it[at])}),rt}function composeClasses(it,tt,rt=void 0){const at={};return Object.keys(it).forEach(st=>{at[st]=it[st].reduce((ot,lt)=>{if(lt){const ut=tt(lt);ut!==""&&ot.push(ut),rt&&rt[lt]&&ot.push(rt[lt])}return ot},[]).join(" ")}),at}const defaultGenerator=it=>it,createClassNameGenerator=()=>{let it=defaultGenerator;return{configure(tt){it=tt},generate(tt){return it(tt)},reset(){it=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),ClassNameGenerator$1=ClassNameGenerator,globalStateClassesMapping={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function generateUtilityClass(it,tt,rt="Mui"){const at=globalStateClassesMapping[tt];return at?`${rt}-${at}`:`${ClassNameGenerator$1.generate(it)}-${tt}`}function generateUtilityClasses(it,tt,rt="Mui"){const at={};return tt.forEach(st=>{at[st]=generateUtilityClass(it,st,rt)}),at}function getContainer$1(it){return typeof it=="function"?it():it}const Portal=react.exports.forwardRef(function it(tt,rt){const{children:at,container:st,disablePortal:ot=!1}=tt,[lt,ut]=react.exports.useState(null),ht=useForkRef(react.exports.isValidElement(at)?at.ref:null,rt);if(useEnhancedEffect$1(()=>{ot||ut(getContainer$1(st)||document.body)},[st,ot]),useEnhancedEffect$1(()=>{if(lt&&!ot)return setRef(rt,lt),()=>{setRef(rt,null)}},[rt,lt,ot]),ot){if(react.exports.isValidElement(at)){const mt={ref:ht};return react.exports.cloneElement(at,mt)}return jsx(react.exports.Fragment,{children:at})}return jsx(react.exports.Fragment,{children:lt&&reactDom.exports.createPortal(at,lt)})}),Portal$1=Portal;function isOverflowing(it){const tt=ownerDocument(it);return tt.body===it?ownerWindow(it).innerWidth>tt.documentElement.clientWidth:it.scrollHeight>it.clientHeight}function ariaHidden(it,tt){tt?it.setAttribute("aria-hidden","true"):it.removeAttribute("aria-hidden")}function getPaddingRight(it){return parseInt(ownerWindow(it).getComputedStyle(it).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(it){const rt=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(it.tagName)!==-1,at=it.tagName==="INPUT"&&it.getAttribute("type")==="hidden";return rt||at}function ariaHiddenSiblings(it,tt,rt,at,st){const ot=[tt,rt,...at];[].forEach.call(it.children,lt=>{const ut=ot.indexOf(lt)===-1,ht=!isAriaHiddenForbiddenOnElement(lt);ut&&ht&&ariaHidden(lt,st)})}function findIndexOf(it,tt){let rt=-1;return it.some((at,st)=>tt(at)?(rt=st,!0):!1),rt}function handleContainer(it,tt){const rt=[],at=it.container;if(!tt.disableScrollLock){if(isOverflowing(at)){const lt=getScrollbarSize(ownerDocument(at));rt.push({value:at.style.paddingRight,property:"padding-right",el:at}),at.style.paddingRight=`${getPaddingRight(at)+lt}px`;const ut=ownerDocument(at).querySelectorAll(".mui-fixed");[].forEach.call(ut,ht=>{rt.push({value:ht.style.paddingRight,property:"padding-right",el:ht}),ht.style.paddingRight=`${getPaddingRight(ht)+lt}px`})}let ot;if(at.parentNode instanceof DocumentFragment)ot=ownerDocument(at).body;else{const lt=at.parentElement,ut=ownerWindow(at);ot=(lt==null?void 0:lt.nodeName)==="HTML"&&ut.getComputedStyle(lt).overflowY==="scroll"?lt:at}rt.push({value:ot.style.overflow,property:"overflow",el:ot},{value:ot.style.overflowX,property:"overflow-x",el:ot},{value:ot.style.overflowY,property:"overflow-y",el:ot}),ot.style.overflow="hidden"}return()=>{rt.forEach(({value:ot,el:lt,property:ut})=>{ot?lt.style.setProperty(ut,ot):lt.style.removeProperty(ut)})}}function getHiddenSiblings(it){const tt=[];return[].forEach.call(it.children,rt=>{rt.getAttribute("aria-hidden")==="true"&&tt.push(rt)}),tt}class ModalManager{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(tt,rt){let at=this.modals.indexOf(tt);if(at!==-1)return at;at=this.modals.length,this.modals.push(tt),tt.modalRef&&ariaHidden(tt.modalRef,!1);const st=getHiddenSiblings(rt);ariaHiddenSiblings(rt,tt.mount,tt.modalRef,st,!0);const ot=findIndexOf(this.containers,lt=>lt.container===rt);return ot!==-1?(this.containers[ot].modals.push(tt),at):(this.containers.push({modals:[tt],container:rt,restore:null,hiddenSiblings:st}),at)}mount(tt,rt){const at=findIndexOf(this.containers,ot=>ot.modals.indexOf(tt)!==-1),st=this.containers[at];st.restore||(st.restore=handleContainer(st,rt))}remove(tt,rt=!0){const at=this.modals.indexOf(tt);if(at===-1)return at;const st=findIndexOf(this.containers,lt=>lt.modals.indexOf(tt)!==-1),ot=this.containers[st];if(ot.modals.splice(ot.modals.indexOf(tt),1),this.modals.splice(at,1),ot.modals.length===0)ot.restore&&ot.restore(),tt.modalRef&&ariaHidden(tt.modalRef,rt),ariaHiddenSiblings(ot.container,tt.mount,tt.modalRef,ot.hiddenSiblings,!1),this.containers.splice(st,1);else{const lt=ot.modals[ot.modals.length-1];lt.modalRef&&ariaHidden(lt.modalRef,!1)}return at}isTopModal(tt){return this.modals.length>0&&this.modals[this.modals.length-1]===tt}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(it){const tt=parseInt(it.getAttribute("tabindex")||"",10);return Number.isNaN(tt)?it.contentEditable==="true"||(it.nodeName==="AUDIO"||it.nodeName==="VIDEO"||it.nodeName==="DETAILS")&&it.getAttribute("tabindex")===null?0:it.tabIndex:tt}function isNonTabbableRadio(it){if(it.tagName!=="INPUT"||it.type!=="radio"||!it.name)return!1;const tt=at=>it.ownerDocument.querySelector(`input[type="radio"]${at}`);let rt=tt(`[name="${it.name}"]:checked`);return rt||(rt=tt(`[name="${it.name}"]`)),rt!==it}function isNodeMatchingSelectorFocusable(it){return!(it.disabled||it.tagName==="INPUT"&&it.type==="hidden"||isNonTabbableRadio(it))}function defaultGetTabbable(it){const tt=[],rt=[];return Array.from(it.querySelectorAll(candidatesSelector)).forEach((at,st)=>{const ot=getTabIndex(at);ot===-1||!isNodeMatchingSelectorFocusable(at)||(ot===0?tt.push(at):rt.push({documentOrder:st,tabIndex:ot,node:at}))}),rt.sort((at,st)=>at.tabIndex===st.tabIndex?at.documentOrder-st.documentOrder:at.tabIndex-st.tabIndex).map(at=>at.node).concat(tt)}function defaultIsEnabled(){return!0}function FocusTrap(it){const{children:tt,disableAutoFocus:rt=!1,disableEnforceFocus:at=!1,disableRestoreFocus:st=!1,getTabbable:ot=defaultGetTabbable,isEnabled:lt=defaultIsEnabled,open:ut}=it,ht=react.exports.useRef(!1),mt=react.exports.useRef(null),bt=react.exports.useRef(null),vt=react.exports.useRef(null),At=react.exports.useRef(null),xt=react.exports.useRef(!1),Et=react.exports.useRef(null),Tt=useForkRef(tt.ref,Et),wt=react.exports.useRef(null);react.exports.useEffect(()=>{!ut||!Et.current||(xt.current=!rt)},[rt,ut]),react.exports.useEffect(()=>{if(!ut||!Et.current)return;const St=ownerDocument(Et.current);return Et.current.contains(St.activeElement)||(Et.current.hasAttribute("tabIndex")||Et.current.setAttribute("tabIndex","-1"),xt.current&&Et.current.focus()),()=>{st||(vt.current&&vt.current.focus&&(ht.current=!0,vt.current.focus()),vt.current=null)}},[ut]),react.exports.useEffect(()=>{if(!ut||!Et.current)return;const St=ownerDocument(Et.current),Rt=qt=>{const{current:Vt}=Et;if(Vt!==null){if(!St.hasFocus()||at||!lt()||ht.current){ht.current=!1;return}if(!Vt.contains(St.activeElement)){if(qt&&At.current!==qt.target||St.activeElement!==At.current)At.current=null;else if(At.current!==null)return;if(!xt.current)return;let kt=[];if((St.activeElement===mt.current||St.activeElement===bt.current)&&(kt=ot(Et.current)),kt.length>0){var Yt,jt;const zt=Boolean(((Yt=wt.current)==null?void 0:Yt.shiftKey)&&((jt=wt.current)==null?void 0:jt.key)==="Tab"),Nt=kt[0],Mt=kt[kt.length-1];typeof Nt!="string"&&typeof Mt!="string"&&(zt?Mt.focus():Nt.focus())}else Vt.focus()}}},Dt=qt=>{wt.current=qt,!(at||!lt()||qt.key!=="Tab")&&St.activeElement===Et.current&&qt.shiftKey&&(ht.current=!0,bt.current&&bt.current.focus())};St.addEventListener("focusin",Rt),St.addEventListener("keydown",Dt,!0);const Wt=setInterval(()=>{St.activeElement&&St.activeElement.tagName==="BODY"&&Rt(null)},50);return()=>{clearInterval(Wt),St.removeEventListener("focusin",Rt),St.removeEventListener("keydown",Dt,!0)}},[rt,at,st,lt,ut,ot]);const Ct=St=>{vt.current===null&&(vt.current=St.relatedTarget),xt.current=!0,At.current=St.target;const Rt=tt.props.onFocus;Rt&&Rt(St)},It=St=>{vt.current===null&&(vt.current=St.relatedTarget),xt.current=!0};return jsxs(react.exports.Fragment,{children:[jsx("div",{tabIndex:ut?0:-1,onFocus:It,ref:mt,"data-testid":"sentinelStart"}),react.exports.cloneElement(tt,{ref:Tt,onFocus:Ct}),jsx("div",{tabIndex:ut?0:-1,onFocus:It,ref:bt,"data-testid":"sentinelEnd"})]})}function getModalUtilityClass(it){return generateUtilityClass("MuiModal",it)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);function isHostComponent(it){return typeof it=="string"}function appendOwnerState(it,tt,rt){return it===void 0||isHostComponent(it)?tt:_extends({},tt,{ownerState:_extends({},tt.ownerState,rt)})}const defaultContextValue={disableDefaultClasses:!1},ClassNameConfiguratorContext=react.exports.createContext(defaultContextValue);function useClassNamesOverride(it){const{disableDefaultClasses:tt}=react.exports.useContext(ClassNameConfiguratorContext);return rt=>tt?"":it(rt)}function extractEventHandlers(it,tt=[]){if(it===void 0)return{};const rt={};return Object.keys(it).filter(at=>at.match(/^on[A-Z]/)&&typeof it[at]=="function"&&!tt.includes(at)).forEach(at=>{rt[at]=it[at]}),rt}function resolveComponentProps(it,tt){return typeof it=="function"?it(tt):it}function omitEventHandlers(it){if(it===void 0)return{};const tt={};return Object.keys(it).filter(rt=>!(rt.match(/^on[A-Z]/)&&typeof it[rt]=="function")).forEach(rt=>{tt[rt]=it[rt]}),tt}function mergeSlotProps(it){const{getSlotProps:tt,additionalProps:rt,externalSlotProps:at,externalForwardedProps:st,className:ot}=it;if(!tt){const xt=clsx$1(st==null?void 0:st.className,at==null?void 0:at.className,ot,rt==null?void 0:rt.className),Et=_extends({},rt==null?void 0:rt.style,st==null?void 0:st.style,at==null?void 0:at.style),Tt=_extends({},rt,st,at);return xt.length>0&&(Tt.className=xt),Object.keys(Et).length>0&&(Tt.style=Et),{props:Tt,internalRef:void 0}}const lt=extractEventHandlers(_extends({},st,at)),ut=omitEventHandlers(at),ht=omitEventHandlers(st),mt=tt(lt),bt=clsx$1(mt==null?void 0:mt.className,rt==null?void 0:rt.className,ot,st==null?void 0:st.className,at==null?void 0:at.className),vt=_extends({},mt==null?void 0:mt.style,rt==null?void 0:rt.style,st==null?void 0:st.style,at==null?void 0:at.style),At=_extends({},mt,rt,ht,ut);return bt.length>0&&(At.className=bt),Object.keys(vt).length>0&&(At.style=vt),{props:At,internalRef:mt.ref}}const _excluded$l=["elementType","externalSlotProps","ownerState"];function useSlotProps(it){var tt;const{elementType:rt,externalSlotProps:at,ownerState:st}=it,ot=_objectWithoutPropertiesLoose(it,_excluded$l),lt=resolveComponentProps(at,st),{props:ut,internalRef:ht}=mergeSlotProps(_extends({},ot,{externalSlotProps:lt})),mt=useForkRef(ht,lt==null?void 0:lt.ref,(tt=it.additionalProps)==null?void 0:tt.ref);return appendOwnerState(rt,_extends({},ut,{ref:mt}),st)}const _excluded$k=["children","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],useUtilityClasses$8=it=>{const{open:tt,exited:rt}=it;return composeClasses({root:["root",!tt&&rt&&"hidden"],backdrop:["backdrop"]},useClassNamesOverride(getModalUtilityClass))};function getContainer(it){return typeof it=="function"?it():it}function getHasTransition(it){return it?it.props.hasOwnProperty("in"):!1}const defaultManager=new ModalManager,ModalUnstyled=react.exports.forwardRef(function it(tt,rt){var at,st;const{children:ot,closeAfterTransition:lt=!1,component:ut,container:ht,disableAutoFocus:mt=!1,disableEnforceFocus:bt=!1,disableEscapeKeyDown:vt=!1,disablePortal:At=!1,disableRestoreFocus:xt=!1,disableScrollLock:Et=!1,hideBackdrop:Tt=!1,keepMounted:wt=!1,manager:Ct=defaultManager,onBackdropClick:It,onClose:St,onKeyDown:Rt,open:Dt,onTransitionEnter:Wt,onTransitionExited:qt,slotProps:Vt={},slots:Yt={}}=tt,jt=_objectWithoutPropertiesLoose(tt,_excluded$k),[kt,zt]=react.exports.useState(!Dt),Nt=react.exports.useRef({}),Mt=react.exports.useRef(null),Lt=react.exports.useRef(null),Ht=useForkRef(Lt,rt),Qt=getHasTransition(ot),Ut=(at=tt["aria-hidden"])!=null?at:!0,Bt=()=>ownerDocument(Mt.current),Kt=()=>(Nt.current.modalRef=Lt.current,Nt.current.mountNode=Mt.current,Nt.current),Gt=()=>{Ct.mount(Kt(),{disableScrollLock:Et}),Lt.current&&(Lt.current.scrollTop=0)},Pt=useEventCallback(()=>{const nn=getContainer(ht)||Bt().body;Ct.add(Kt(),nn),Lt.current&&Gt()}),Zt=react.exports.useCallback(()=>Ct.isTopModal(Kt()),[Ct]),an=useEventCallback(nn=>{Mt.current=nn,!(!nn||!Lt.current)&&(Dt&&Zt()?Gt():ariaHidden(Lt.current,Ut))}),Jt=react.exports.useCallback(()=>{Ct.remove(Kt(),Ut)},[Ct,Ut]);react.exports.useEffect(()=>()=>{Jt()},[Jt]),react.exports.useEffect(()=>{Dt?Pt():(!Qt||!lt)&&Jt()},[Dt,Jt,Qt,lt,Pt]);const rn=_extends({},tt,{closeAfterTransition:lt,disableAutoFocus:mt,disableEnforceFocus:bt,disableEscapeKeyDown:vt,disablePortal:At,disableRestoreFocus:xt,disableScrollLock:Et,exited:kt,hideBackdrop:Tt,keepMounted:wt}),fn=useUtilityClasses$8(rn),pn=()=>{zt(!1),Wt&&Wt()},vn=()=>{zt(!0),qt&&qt(),lt&&Jt()},En=nn=>{nn.target===nn.currentTarget&&(It&&It(nn),St&&St(nn,"backdropClick"))},dn=nn=>{Rt&&Rt(nn),!(nn.key!=="Escape"||!Zt())&&(vt||(nn.stopPropagation(),St&&St(nn,"escapeKeyDown")))},cn={};ot.props.tabIndex===void 0&&(cn.tabIndex="-1"),Qt&&(cn.onEnter=createChainedFunction(pn,ot.props.onEnter),cn.onExited=createChainedFunction(vn,ot.props.onExited));const _n=(st=ut!=null?ut:Yt.root)!=null?st:"div",wn=useSlotProps({elementType:_n,externalSlotProps:Vt.root,externalForwardedProps:jt,additionalProps:{ref:Ht,role:"presentation",onKeyDown:dn},className:fn.root,ownerState:rn}),Ln=Yt.backdrop,yn=useSlotProps({elementType:Ln,externalSlotProps:Vt.backdrop,additionalProps:{"aria-hidden":!0,onClick:En,open:Dt},className:fn.backdrop,ownerState:rn});return!wt&&!Dt&&(!Qt||kt)?null:jsx(Portal$1,{ref:an,container:ht,disablePortal:At,children:jsxs(_n,_extends({},wn,{children:[!Tt&&Ln?jsx(Ln,_extends({},yn)):null,jsx(FocusTrap,{disableEnforceFocus:bt,disableAutoFocus:mt,disableRestoreFocus:xt,isEnabled:Zt,open:Dt,children:react.exports.cloneElement(ot,cn)})]}))})}),ModalUnstyled$1=ModalUnstyled;/**
* @mui/styled-engine v5.11.11
*
* @license MIT
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/function styled$2(it,tt){return newStyled(it,tt)}const internal_processStyles=(it,tt)=>{Array.isArray(it.__emotion_styles)&&(it.__emotion_styles=tt(it.__emotion_styles))};function merge(it,tt){return tt?deepmerge(it,tt,{clone:!1}):it}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:it=>`@media (min-width:${values[it]}px)`};function handleBreakpoints(it,tt,rt){const at=it.theme||{};if(Array.isArray(tt)){const ot=at.breakpoints||defaultBreakpoints;return tt.reduce((lt,ut,ht)=>(lt[ot.up(ot.keys[ht])]=rt(tt[ht]),lt),{})}if(typeof tt=="object"){const ot=at.breakpoints||defaultBreakpoints;return Object.keys(tt).reduce((lt,ut)=>{if(Object.keys(ot.values||values).indexOf(ut)!==-1){const ht=ot.up(ut);lt[ht]=rt(tt[ut],ut)}else{const ht=ut;lt[ht]=tt[ht]}return lt},{})}return rt(tt)}function createEmptyBreakpointObject(it={}){var tt;return((tt=it.keys)==null?void 0:tt.reduce((at,st)=>{const ot=it.up(st);return at[ot]={},at},{}))||{}}function removeUnusedBreakpoints(it,tt){return it.reduce((rt,at)=>{const st=rt[at];return(!st||Object.keys(st).length===0)&&delete rt[at],rt},tt)}function getPath(it,tt,rt=!0){if(!tt||typeof tt!="string")return null;if(it&&it.vars&&rt){const at=`vars.${tt}`.split(".").reduce((st,ot)=>st&&st[ot]?st[ot]:null,it);if(at!=null)return at}return tt.split(".").reduce((at,st)=>at&&at[st]!=null?at[st]:null,it)}function getStyleValue(it,tt,rt,at=rt){let st;return typeof it=="function"?st=it(rt):Array.isArray(it)?st=it[rt]||at:st=getPath(it,rt)||at,tt&&(st=tt(st,at,it)),st}function style$2(it){const{prop:tt,cssProperty:rt=it.prop,themeKey:at,transform:st}=it,ot=lt=>{if(lt[tt]==null)return null;const ut=lt[tt],ht=lt.theme,mt=getPath(ht,at)||{};return handleBreakpoints(lt,ut,vt=>{let At=getStyleValue(mt,st,vt);return vt===At&&typeof vt=="string"&&(At=getStyleValue(mt,st,`${tt}${vt==="default"?"":capitalize(vt)}`,vt)),rt===!1?At:{[rt]:At}})};return ot.propTypes={},ot.filterProps=[tt],ot}function compose(...it){const tt=it.reduce((at,st)=>(st.filterProps.forEach(ot=>{at[ot]=st}),at),{}),rt=at=>Object.keys(at).reduce((st,ot)=>tt[ot]?merge(st,tt[ot](at)):st,{});return rt.propTypes={},rt.filterProps=it.reduce((at,st)=>at.concat(st.filterProps),[]),rt}function memoize(it){const tt={};return rt=>(tt[rt]===void 0&&(tt[rt]=it(rt)),tt[rt])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(it=>{if(it.length>2)if(aliases[it])it=aliases[it];else return[it];const[tt,rt]=it.split(""),at=properties[tt],st=directions[rt]||"";return Array.isArray(st)?st.map(ot=>at+ot):[at+st]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(it,tt,rt,at){var st;const ot=(st=getPath(it,tt,!1))!=null?st:rt;return typeof ot=="number"?lt=>typeof lt=="string"?lt:ot*lt:Array.isArray(ot)?lt=>typeof lt=="string"?lt:ot[lt]:typeof ot=="function"?ot:()=>{}}function createUnarySpacing(it){return createUnaryUnit(it,"spacing",8)}function getValue(it,tt){if(typeof tt=="string"||tt==null)return tt;const rt=Math.abs(tt),at=it(rt);return tt>=0?at:typeof at=="number"?-at:`-${at}`}function getStyleFromPropValue(it,tt){return rt=>it.reduce((at,st)=>(at[st]=getValue(tt,rt),at),{})}function resolveCssProperty(it,tt,rt,at){if(tt.indexOf(rt)===-1)return null;const st=getCssProperties(rt),ot=getStyleFromPropValue(st,at),lt=it[rt];return handleBreakpoints(it,lt,ot)}function style$1(it,tt){const rt=createUnarySpacing(it.theme);return Object.keys(it).map(at=>resolveCssProperty(it,tt,at,rt)).reduce(merge,{})}function margin(it){return style$1(it,marginKeys)}margin.propTypes={},margin.filterProps=marginKeys;function padding(it){return style$1(it,paddingKeys)}padding.propTypes={},padding.filterProps=paddingKeys;function borderTransform(it){return typeof it!="number"?it:`${it}px solid`}const border=style$2({prop:"border",themeKey:"borders",transform:borderTransform}),borderTop=style$2({prop:"borderTop",themeKey:"borders",transform:borderTransform}),borderRight=style$2({prop:"borderRight",themeKey:"borders",transform:borderTransform}),borderBottom=style$2({prop:"borderBottom",themeKey:"borders",transform:borderTransform}),borderLeft=style$2({prop:"borderLeft",themeKey:"borders",transform:borderTransform}),borderColor=style$2({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$2({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$2({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$2({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$2({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=it=>{if(it.borderRadius!==void 0&&it.borderRadius!==null){const tt=createUnaryUnit(it.theme,"shape.borderRadius",4),rt=at=>({borderRadius:getValue(tt,at)});return handleBreakpoints(it,it.borderRadius,rt)}return null};borderRadius.propTypes={},borderRadius.filterProps=["borderRadius"],compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);const gap=it=>{if(it.gap!==void 0&&it.gap!==null){const tt=createUnaryUnit(it.theme,"spacing",8),rt=at=>({gap:getValue(tt,at)});return handleBreakpoints(it,it.gap,rt)}return null};gap.propTypes={},gap.filterProps=["gap"];const columnGap=it=>{if(it.columnGap!==void 0&&it.columnGap!==null){const tt=createUnaryUnit(it.theme,"spacing",8),rt=at=>({columnGap:getValue(tt,at)});return handleBreakpoints(it,it.columnGap,rt)}return null};columnGap.propTypes={},columnGap.filterProps=["columnGap"];const rowGap=it=>{if(it.rowGap!==void 0&&it.rowGap!==null){const tt=createUnaryUnit(it.theme,"spacing",8),rt=at=>({rowGap:getValue(tt,at)});return handleBreakpoints(it,it.rowGap,rt)}return null};rowGap.propTypes={},rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(it,tt){return tt==="grey"?tt:it}const color=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(it){return it<=1&&it!==0?`${it*100}%`:it}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=it=>{if(it.maxWidth!==void 0&&it.maxWidth!==null){const tt=rt=>{var at,st,ot;return{maxWidth:((at=it.theme)==null||(st=at.breakpoints)==null||(ot=st.values)==null?void 0:ot[rt])||values[rt]||sizingTransform(rt)}};return handleBreakpoints(it,it.maxWidth,tt)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform}),style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const createFontStyleFunction=it=>tt=>{if(tt[it]!==void 0&&tt[it]!==null){const rt=at=>{var st;let ot=(st=tt.theme.typography)==null?void 0:st[at];if(typeof ot=="object"&&(ot=null),!ot){var lt,ut;ot=(lt=tt.theme.typography)==null?void 0:lt[`${it}${tt[it]==="default"||tt[it]===it?"":capitalize((ut=tt[it])==null?void 0:ut.toString())}`]}if(!ot){var ht,mt,bt;ot=(ht=(mt=tt.theme.typography)==null||(bt=mt[at])==null?void 0:bt[it])!=null?ht:at}return{[it]:ot}};return handleBreakpoints(tt,tt[it],rt)}return null},defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:it=>({"@media print":{display:it}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography",style:createFontStyleFunction("fontFamily")},fontSize:{themeKey:"typography",style:createFontStyleFunction("fontSize")},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography",style:createFontStyleFunction("fontWeight")},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...it){const tt=it.reduce((at,st)=>at.concat(Object.keys(st)),[]),rt=new Set(tt);return it.every(at=>rt.size===Object.keys(at).length)}function callIfFn(it,tt){return typeof it=="function"?it(tt):it}function unstable_createStyleFunctionSx(){function it(rt,at,st,ot){const lt={[rt]:at,theme:st},ut=ot[rt];if(!ut)return{[rt]:at};const{cssProperty:ht=rt,themeKey:mt,transform:bt,style:vt}=ut;if(at==null)return null;const At=getPath(st,mt)||{};return vt?vt(lt):handleBreakpoints(lt,at,Et=>{let Tt=getStyleValue(At,bt,Et);return Et===Tt&&typeof Et=="string"&&(Tt=getStyleValue(At,bt,`${rt}${Et==="default"?"":capitalize(Et)}`,Et)),ht===!1?Tt:{[ht]:Tt}})}function tt(rt){var at;const{sx:st,theme:ot={}}=rt||{};if(!st)return null;const lt=(at=ot.unstable_sxConfig)!=null?at:defaultSxConfig$1;function ut(ht){let mt=ht;if(typeof ht=="function")mt=ht(ot);else if(typeof ht!="object")return ht;if(!mt)return null;const bt=createEmptyBreakpointObject(ot.breakpoints),vt=Object.keys(bt);let At=bt;return Object.keys(mt).forEach(xt=>{const Et=callIfFn(mt[xt],ot);if(Et!=null)if(typeof Et=="object")if(lt[xt])At=merge(At,it(xt,Et,ot,lt));else{const Tt=handleBreakpoints({theme:ot},Et,wt=>({[xt]:wt}));objectsHaveSameKeys(Tt,Et)?At[xt]=tt({sx:Et,theme:ot}):At=merge(At,Tt)}else At=merge(At,it(xt,Et,ot,lt))}),removeUnusedBreakpoints(vt,At)}return Array.isArray(st)?st.map(ut):ut(st)}return tt}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const styleFunctionSx$1=styleFunctionSx,_excluded$j=["sx"],splitProps=it=>{var tt,rt;const at={systemProps:{},otherProps:{}},st=(tt=it==null||(rt=it.theme)==null?void 0:rt.unstable_sxConfig)!=null?tt:defaultSxConfig$1;return Object.keys(it).forEach(ot=>{st[ot]?at.systemProps[ot]=it[ot]:at.otherProps[ot]=it[ot]}),at};function extendSxProp(it){const{sx:tt}=it,rt=_objectWithoutPropertiesLoose(it,_excluded$j),{systemProps:at,otherProps:st}=splitProps(rt);let ot;return Array.isArray(tt)?ot=[at,...tt]:typeof tt=="function"?ot=(...lt)=>{const ut=tt(...lt);return isPlainObject(ut)?_extends({},at,ut):at}:ot=_extends({},at,tt),_extends({},st,{sx:ot})}const _excluded$i=["values","unit","step"],sortBreakpointsValues=it=>{const tt=Object.keys(it).map(rt=>({key:rt,val:it[rt]}))||[];return tt.sort((rt,at)=>rt.val-at.val),tt.reduce((rt,at)=>_extends({},rt,{[at.key]:at.val}),{})};function createBreakpoints(it){const{values:tt={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:rt="px",step:at=5}=it,st=_objectWithoutPropertiesLoose(it,_excluded$i),ot=sortBreakpointsValues(tt),lt=Object.keys(ot);function ut(At){return`@media (min-width:${typeof tt[At]=="number"?tt[At]:At}${rt})`}function ht(At){return`@media (max-width:${(typeof tt[At]=="number"?tt[At]:At)-at/100}${rt})`}function mt(At,xt){const Et=lt.indexOf(xt);return`@media (min-width:${typeof tt[At]=="number"?tt[At]:At}${rt}) and (max-width:${(Et!==-1&&typeof tt[lt[Et]]=="number"?tt[lt[Et]]:xt)-at/100}${rt})`}function bt(At){return lt.indexOf(At)+1<lt.length?mt(At,lt[lt.indexOf(At)+1]):ut(At)}function vt(At){const xt=lt.indexOf(At);return xt===0?ut(lt[1]):xt===lt.length-1?ht(lt[xt]):mt(At,lt[lt.indexOf(At)+1]).replace("@media","@media not all and")}return _extends({keys:lt,values:ot,up:ut,down:ht,between:mt,only:bt,not:vt,unit:rt},st)}const shape={borderRadius:4},shape$1=shape;function createSpacing(it=8){if(it.mui)return it;const tt=createUnarySpacing({spacing:it}),rt=(...at)=>(at.length===0?[1]:at).map(ot=>{const lt=tt(ot);return typeof lt=="number"?`${lt}px`:lt}).join(" ");return rt.mui=!0,rt}const _excluded$h=["breakpoints","palette","spacing","shape"];function createTheme$1(it={},...tt){const{breakpoints:rt={},palette:at={},spacing:st,shape:ot={}}=it,lt=_objectWithoutPropertiesLoose(it,_excluded$h),ut=createBreakpoints(rt),ht=createSpacing(st);let mt=deepmerge({breakpoints:ut,direction:"ltr",components:{},palette:_extends({mode:"light"},at),spacing:ht,shape:_extends({},shape$1,ot)},lt);return mt=tt.reduce((bt,vt)=>deepmerge(bt,vt),mt),mt.unstable_sxConfig=_extends({},defaultSxConfig$1,lt==null?void 0:lt.unstable_sxConfig),mt.unstable_sx=function(vt){return styleFunctionSx$1({sx:vt,theme:this})},mt}const ThemeContext=react.exports.createContext(null),ThemeContext$1=ThemeContext;function useTheme$3(){return react.exports.useContext(ThemeContext$1)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(it,tt){return typeof tt=="function"?tt(it):_extends({},it,tt)}function ThemeProvider$1(it){const{children:tt,theme:rt}=it,at=useTheme$3(),st=react.exports.useMemo(()=>{const ot=at===null?rt:mergeOuterLocalTheme(at,rt);return ot!=null&&(ot[nested]=at!==null),ot},[rt,at]);return jsx(ThemeContext$1.Provider,{value:st,children:tt})}function isObjectEmpty(it){return Object.keys(it).length===0}function useTheme$2(it=null){const tt=useTheme$3();return!tt||isObjectEmpty(tt)?it:tt}const systemDefaultTheme$1=createTheme$1();function useTheme$1(it=systemDefaultTheme$1){return useTheme$2(it)}const _excluded$g=["className","component"];function createBox(it={}){const{defaultTheme:tt,defaultClassName:rt="MuiBox-root",generateClassName:at}=it,st=styled$2("div",{shouldForwardProp:lt=>lt!=="theme"&&lt!=="sx"&&lt!=="as"})(styleFunctionSx$1);return react.exports.forwardRef(function(ut,ht){const mt=useTheme$1(tt),bt=extendSxProp(ut),{className:vt,component:At="div"}=bt,xt=_objectWithoutPropertiesLoose(bt,_excluded$g);return jsx(st,_extends({as:At,ref:ht,className:clsx$1(vt,at?at(rt):rt),theme:mt},xt))})}const _excluded$f=["variant"];function isEmpty$1(it){return it.length===0}function propsToClassKey(it){const{variant:tt}=it,rt=_objectWithoutPropertiesLoose(it,_excluded$f);let at=tt||"";return Object.keys(rt).sort().forEach(st=>{st==="color"?at+=isEmpty$1(at)?it[st]:capitalize(it[st]):at+=`${isEmpty$1(at)?st:capitalize(st)}${capitalize(it[st].toString())}`}),at}const _excluded$e=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],_excluded2=["theme"],_excluded3=["theme"];function isEmpty(it){return Object.keys(it).length===0}function isStringTag(it){return typeof it=="string"&&it.charCodeAt(0)>96}const getStyleOverrides=(it,tt)=>tt.components&&tt.components[it]&&tt.components[it].styleOverrides?tt.components[it].styleOverrides:null,getVariantStyles=(it,tt)=>{let rt=[];tt&&tt.components&&tt.components[it]&&tt.components[it].variants&&(rt=tt.components[it].variants);const at={};return rt.forEach(st=>{const ot=propsToClassKey(st.props);at[ot]=st.style}),at},variantsResolver=(it,tt,rt,at)=>{var st,ot;const{ownerState:lt={}}=it,ut=[],ht=rt==null||(st=rt.components)==null||(ot=st[at])==null?void 0:ot.variants;return ht&&ht.forEach(mt=>{let bt=!0;Object.keys(mt.props).forEach(vt=>{lt[vt]!==mt.props[vt]&&it[vt]!==mt.props[vt]&&(bt=!1)}),bt&&ut.push(tt[propsToClassKey(mt.props)])}),ut};function shouldForwardProp(it){return it!=="ownerState"&&it!=="theme"&&it!=="sx"&&it!=="as"}const systemDefaultTheme=createTheme$1();function createStyled(it={}){const{defaultTheme:tt=systemDefaultTheme,rootShouldForwardProp:rt=shouldForwardProp,slotShouldForwardProp:at=shouldForwardProp}=it,st=ot=>{const lt=isEmpty(ot.theme)?tt:ot.theme;return styleFunctionSx$1(_extends({},ot,{theme:lt}))};return st.__mui_systemSx=!0,(ot,lt={})=>{internal_processStyles(ot,St=>St.filter(Rt=>!(Rt!=null&&Rt.__mui_systemSx)));const{name:ut,slot:ht,skipVariantsResolver:mt,skipSx:bt,overridesResolver:vt}=lt,At=_objectWithoutPropertiesLoose(lt,_excluded$e),xt=mt!==void 0?mt:ht&&ht!=="Root"||!1,Et=bt||!1;let Tt,wt=shouldForwardProp;ht==="Root"?wt=rt:ht?wt=at:isStringTag(ot)&&(wt=void 0);const Ct=styled$2(ot,_extends({shouldForwardProp:wt,label:Tt},At)),It=(St,...Rt)=>{const Dt=Rt?Rt.map(Yt=>typeof Yt=="function"&&Yt.__emotion_real!==Yt?jt=>{let{theme:kt}=jt,zt=_objectWithoutPropertiesLoose(jt,_excluded2);return Yt(_extends({theme:isEmpty(kt)?tt:kt},zt))}:Yt):[];let Wt=St;ut&&vt&&Dt.push(Yt=>{const jt=isEmpty(Yt.theme)?tt:Yt.theme,kt=getStyleOverrides(ut,jt);if(kt){const zt={};return Object.entries(kt).forEach(([Nt,Mt])=>{zt[Nt]=typeof Mt=="function"?Mt(_extends({},Yt,{theme:jt})):Mt}),vt(Yt,zt)}return null}),ut&&!xt&&Dt.push(Yt=>{const jt=isEmpty(Yt.theme)?tt:Yt.theme;return variantsResolver(Yt,getVariantStyles(ut,jt),jt,ut)}),Et||Dt.push(st);const qt=Dt.length-Rt.length;if(Array.isArray(St)&&qt>0){const Yt=new Array(qt).fill("");Wt=[...St,...Yt],Wt.raw=[...St.raw,...Yt]}else typeof St=="function"&&St.__emotion_real!==St&&(Wt=Yt=>{let{theme:jt}=Yt,kt=_objectWithoutPropertiesLoose(Yt,_excluded3);return St(_extends({theme:isEmpty(jt)?tt:jt},kt))});return Ct(Wt,...Dt)};return Ct.withConfig&&(It.withConfig=Ct.withConfig),It}}function getThemeProps(it){const{theme:tt,name:rt,props:at}=it;return!tt||!tt.components||!tt.components[rt]||!tt.components[rt].defaultProps?at:resolveProps(tt.components[rt].defaultProps,at)}function useThemeProps$1({props:it,name:tt,defaultTheme:rt}){const at=useTheme$1(rt);return getThemeProps({theme:at,name:tt,props:it})}function clamp$2(it,tt=0,rt=1){return Math.min(Math.max(tt,it),rt)}function hexToRgb(it){it=it.slice(1);const tt=new RegExp(`.{1,${it.length>=6?2:1}}`,"g");let rt=it.match(tt);return rt&&rt[0].length===1&&(rt=rt.map(at=>at+at)),rt?`rgb${rt.length===4?"a":""}(${rt.map((at,st)=>st<3?parseInt(at,16):Math.round(parseInt(at,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(it){if(it.type)return it;if(it.charAt(0)==="#")return decomposeColor(hexToRgb(it));const tt=it.indexOf("("),rt=it.substring(0,tt);if(["rgb","rgba","hsl","hsla","color"].indexOf(rt)===-1)throw new Error(formatMuiErrorMessage(9,it));let at=it.substring(tt+1,it.length-1),st;if(rt==="color"){if(at=at.split(" "),st=at.shift(),at.length===4&&at[3].charAt(0)==="/"&&(at[3]=at[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(st)===-1)throw new Error(formatMuiErrorMessage(10,st))}else at=at.split(",");return at=at.map(ot=>parseFloat(ot)),{type:rt,values:at,colorSpace:st}}function recomposeColor(it){const{type:tt,colorSpace:rt}=it;let{values:at}=it;return tt.indexOf("rgb")!==-1?at=at.map((st,ot)=>ot<3?parseInt(st,10):st):tt.indexOf("hsl")!==-1&&(at[1]=`${at[1]}%`,at[2]=`${at[2]}%`),tt.indexOf("color")!==-1?at=`${rt} ${at.join(" ")}`:at=`${at.join(", ")}`,`${tt}(${at})`}function hslToRgb(it){it=decomposeColor(it);const{values:tt}=it,rt=tt[0],at=tt[1]/100,st=tt[2]/100,ot=at*Math.min(st,1-st),lt=(mt,bt=(mt+rt/30)%12)=>st-ot*Math.max(Math.min(bt-3,9-bt,1),-1);let ut="rgb";const ht=[Math.round(lt(0)*255),Math.round(lt(8)*255),Math.round(lt(4)*255)];return it.type==="hsla"&&(ut+="a",ht.push(tt[3])),recomposeColor({type:ut,values:ht})}function getLuminance(it){it=decomposeColor(it);let tt=it.type==="hsl"||it.type==="hsla"?decomposeColor(hslToRgb(it)).values:it.values;return tt=tt.map(rt=>(it.type!=="color"&&(rt/=255),rt<=.03928?rt/12.92:((rt+.055)/1.055)**2.4)),Number((.2126*tt[0]+.7152*tt[1]+.0722*tt[2]).toFixed(3))}function getContrastRatio(it,tt){const rt=getLuminance(it),at=getLuminance(tt);return(Math.max(rt,at)+.05)/(Math.min(rt,at)+.05)}function alpha(it,tt){return it=decomposeColor(it),tt=clamp$2(tt),(it.type==="rgb"||it.type==="hsl")&&(it.type+="a"),it.type==="color"?it.values[3]=`/${tt}`:it.values[3]=tt,recomposeColor(it)}function darken(it,tt){if(it=decomposeColor(it),tt=clamp$2(tt),it.type.indexOf("hsl")!==-1)it.values[2]*=1-tt;else if(it.type.indexOf("rgb")!==-1||it.type.indexOf("color")!==-1)for(let rt=0;rt<3;rt+=1)it.values[rt]*=1-tt;return recomposeColor(it)}function lighten(it,tt){if(it=decomposeColor(it),tt=clamp$2(tt),it.type.indexOf("hsl")!==-1)it.values[2]+=(100-it.values[2])*tt;else if(it.type.indexOf("rgb")!==-1)for(let rt=0;rt<3;rt+=1)it.values[rt]+=(255-it.values[rt])*tt;else if(it.type.indexOf("color")!==-1)for(let rt=0;rt<3;rt+=1)it.values[rt]+=(1-it.values[rt])*tt;return recomposeColor(it)}const EMPTY_THEME={};function InnerThemeProvider(it){const tt=useTheme$1();return jsx(ThemeContext$2.Provider,{value:typeof tt=="object"?tt:EMPTY_THEME,children:it.children})}function ThemeProvider(it){const{children:tt,theme:rt}=it;return jsx(ThemeProvider$1,{theme:rt,children:jsx(InnerThemeProvider,{children:tt})})}function createMixins(it,tt){return _extends({toolbar:{minHeight:56,[it.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[it.up("sm")]:{minHeight:64}}},tt)}const common$1={black:"#000",white:"#fff"},common$2=common$1,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$d=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$2.white,default:common$2.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$2.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$2.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(it,tt,rt,at){const st=at.light||at,ot=at.dark||at*1.5;it[tt]||(it.hasOwnProperty(rt)?it[tt]=it[rt]:tt==="light"?it.light=lighten(it.main,st):tt==="dark"&&(it.dark=darken(it.main,ot)))}function getDefaultPrimary(it="light"){return it==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(it="light"){return it==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(it="light"){return it==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(it="light"){return it==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(it="light"){return it==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(it="light"){return it==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(it){const{mode:tt="light",contrastThreshold:rt=3,tonalOffset:at=.2}=it,st=_objectWithoutPropertiesLoose(it,_excluded$d),ot=it.primary||getDefaultPrimary(tt),lt=it.secondary||getDefaultSecondary(tt),ut=it.error||getDefaultError(tt),ht=it.info||getDefaultInfo(tt),mt=it.success||getDefaultSuccess(tt),bt=it.warning||getDefaultWarning(tt);function vt(Tt){return getContrastRatio(Tt,dark.text.primary)>=rt?dark.text.primary:light.text.primary}const At=({color:Tt,name:wt,mainShade:Ct=500,lightShade:It=300,darkShade:St=700})=>{if(Tt=_extends({},Tt),!Tt.main&&Tt[Ct]&&(Tt.main=Tt[Ct]),!Tt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,wt?` (${wt})`:"",Ct));if(typeof Tt.main!="string")throw new Error(formatMuiErrorMessage(12,wt?` (${wt})`:"",JSON.stringify(Tt.main)));return addLightOrDark(Tt,"light",It,at),addLightOrDark(Tt,"dark",St,at),Tt.contrastText||(Tt.contrastText=vt(Tt.main)),Tt},xt={dark,light};return deepmerge(_extends({common:_extends({},common$2),mode:tt,primary:At({color:ot,name:"primary"}),secondary:At({color:lt,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:At({color:ut,name:"error"}),warning:At({color:bt,name:"warning"}),info:At({color:ht,name:"info"}),success:At({color:mt,name:"success"}),grey:grey$1,contrastThreshold:rt,getContrastText:vt,augmentColor:At,tonalOffset:at},xt[tt]),st)}const _excluded$c=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round(it){return Math.round(it*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(it,tt){const rt=typeof tt=="function"?tt(it):tt,{fontFamily:at=defaultFontFamily,fontSize:st=14,fontWeightLight:ot=300,fontWeightRegular:lt=400,fontWeightMedium:ut=500,fontWeightBold:ht=700,htmlFontSize:mt=16,allVariants:bt,pxToRem:vt}=rt,At=_objectWithoutPropertiesLoose(rt,_excluded$c),xt=st/14,Et=vt||(Ct=>`${Ct/mt*xt}rem`),Tt=(Ct,It,St,Rt,Dt)=>_extends({fontFamily:at,fontWeight:Ct,fontSize:Et(It),lineHeight:St},at===defaultFontFamily?{letterSpacing:`${round(Rt/It)}em`}:{},Dt,bt),wt={h1:Tt(ot,96,1.167,-1.5),h2:Tt(ot,60,1.2,-.5),h3:Tt(lt,48,1.167,0),h4:Tt(lt,34,1.235,.25),h5:Tt(lt,24,1.334,0),h6:Tt(ut,20,1.6,.15),subtitle1:Tt(lt,16,1.75,.15),subtitle2:Tt(ut,14,1.57,.1),body1:Tt(lt,16,1.5,.15),body2:Tt(lt,14,1.43,.15),button:Tt(ut,14,1.75,.4,caseAllCaps),caption:Tt(lt,12,1.66,.4),overline:Tt(lt,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends({htmlFontSize:mt,pxToRem:Et,fontFamily:at,fontSize:st,fontWeightLight:ot,fontWeightRegular:lt,fontWeightMedium:ut,fontWeightBold:ht},wt),At,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...it){return[`${it[0]}px ${it[1]}px ${it[2]}px ${it[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${it[4]}px ${it[5]}px ${it[6]}px ${it[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${it[8]}px ${it[9]}px ${it[10]}px ${it[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],shadows$1=shadows,_excluded$b=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(it){return`${Math.round(it)}ms`}function getAutoHeightDuration(it){if(!it)return 0;const tt=it/36;return Math.round((4+15*tt**.25+tt/5)*10)}function createTransitions(it){const tt=_extends({},easing,it.easing),rt=_extends({},duration,it.duration);return _extends({getAutoHeightDuration,create:(st=["all"],ot={})=>{const{duration:lt=rt.standard,easing:ut=tt.easeInOut,delay:ht=0}=ot;return _objectWithoutPropertiesLoose(ot,_excluded$b),(Array.isArray(st)?st:[st]).map(mt=>`${mt} ${typeof lt=="string"?lt:formatMs(lt)} ${ut} ${typeof ht=="string"?ht:formatMs(ht)}`).join(",")}},it,{easing:tt,duration:rt})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$a=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(it={},...tt){const{mixins:rt={},palette:at={},transitions:st={},typography:ot={}}=it,lt=_objectWithoutPropertiesLoose(it,_excluded$a);if(it.vars)throw new Error(formatMuiErrorMessage(18));const ut=createPalette(at),ht=createTheme$1(it);let mt=deepmerge(ht,{mixins:createMixins(ht.breakpoints,rt),palette:ut,shadows:shadows$1.slice(),typography:createTypography(ut,ot),transitions:createTransitions(st),zIndex:_extends({},zIndex$1)});return mt=deepmerge(mt,lt),mt=tt.reduce((bt,vt)=>deepmerge(bt,vt),mt),mt.unstable_sxConfig=_extends({},defaultSxConfig$1,lt==null?void 0:lt.unstable_sxConfig),mt.unstable_sx=function(vt){return styleFunctionSx$1({sx:vt,theme:this})},mt}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1,rootShouldForwardProp=it=>shouldForwardProp(it)&&it!=="classes",styled=createStyled({defaultTheme:defaultTheme$2,rootShouldForwardProp}),styled$1=styled;function useThemeProps({props:it,name:tt}){return useThemeProps$1({props:it,name:tt,defaultTheme:defaultTheme$2})}function _setPrototypeOf(it,tt){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(at,st){return at.__proto__=st,at},_setPrototypeOf(it,tt)}function _inheritsLoose(it,tt){it.prototype=Object.create(tt.prototype),it.prototype.constructor=it,_setPrototypeOf(it,tt)}const config={disabled:!1},TransitionGroupContext=React$1.createContext(null);var forceReflow=function it(tt){return tt.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(it){_inheritsLoose(tt,it);function tt(at,st){var ot;ot=it.call(this,at,st)||this;var lt=st,ut=lt&&!lt.isMounting?at.enter:at.appear,ht;return ot.appearStatus=null,at.in?ut?(ht=EXITED,ot.appearStatus=ENTERING):ht=ENTERED:at.unmountOnExit||at.mountOnEnter?ht=UNMOUNTED:ht=EXITED,ot.state={status:ht},ot.nextCallback=null,ot}tt.getDerivedStateFromProps=function(st,ot){var lt=st.in;return lt&&ot.status===UNMOUNTED?{status:EXITED}:null};var rt=tt.prototype;return rt.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},rt.componentDidUpdate=function(st){var ot=null;if(st!==this.props){var lt=this.state.status;this.props.in?lt!==ENTERING&&lt!==ENTERED&&(ot=ENTERING):(lt===ENTERING||lt===ENTERED)&&(ot=EXITING)}this.updateStatus(!1,ot)},rt.componentWillUnmount=function(){this.cancelNextCallback()},rt.getTimeouts=function(){var st=this.props.timeout,ot,lt,ut;return ot=lt=ut=st,st!=null&&typeof st!="number"&&(ot=st.exit,lt=st.enter,ut=st.appear!==void 0?st.appear:lt),{exit:ot,enter:lt,appear:ut}},rt.updateStatus=function(st,ot){if(st===void 0&&(st=!1),ot!==null)if(this.cancelNextCallback(),ot===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var lt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);lt&&forceReflow(lt)}this.performEnter(st)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},rt.performEnter=function(st){var ot=this,lt=this.props.enter,ut=this.context?this.context.isMounting:st,ht=this.props.nodeRef?[ut]:[ReactDOM.findDOMNode(this),ut],mt=ht[0],bt=ht[1],vt=this.getTimeouts(),At=ut?vt.appear:vt.enter;if(!st&&!lt||config.disabled){this.safeSetState({status:ENTERED},function(){ot.props.onEntered(mt)});return}this.props.onEnter(mt,bt),this.safeSetState({status:ENTERING},function(){ot.props.onEntering(mt,bt),ot.onTransitionEnd(At,function(){ot.safeSetState({status:ENTERED},function(){ot.props.onEntered(mt,bt)})})})},rt.performExit=function(){var st=this,ot=this.props.exit,lt=this.getTimeouts(),ut=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!ot||config.disabled){this.safeSetState({status:EXITED},function(){st.props.onExited(ut)});return}this.props.onExit(ut),this.safeSetState({status:EXITING},function(){st.props.onExiting(ut),st.onTransitionEnd(lt.exit,function(){st.safeSetState({status:EXITED},function(){st.props.onExited(ut)})})})},rt.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},rt.safeSetState=function(st,ot){ot=this.setNextCallback(ot),this.setState(st,ot)},rt.setNextCallback=function(st){var ot=this,lt=!0;return this.nextCallback=function(ut){lt&&(lt=!1,ot.nextCallback=null,st(ut))},this.nextCallback.cancel=function(){lt=!1},this.nextCallback},rt.onTransitionEnd=function(st,ot){this.setNextCallback(ot);var lt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),ut=st==null&&!this.props.addEndListener;if(!lt||ut){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var ht=this.props.nodeRef?[this.nextCallback]:[lt,this.nextCallback],mt=ht[0],bt=ht[1];this.props.addEndListener(mt,bt)}st!=null&&setTimeout(this.nextCallback,st)},rt.render=function(){var st=this.state.status;if(st===UNMOUNTED)return null;var ot=this.props,lt=ot.children;ot.in,ot.mountOnEnter,ot.unmountOnExit,ot.appear,ot.enter,ot.exit,ot.timeout,ot.addEndListener,ot.onEnter,ot.onEntering,ot.onEntered,ot.onExit,ot.onExiting,ot.onExited,ot.nodeRef;var ut=_objectWithoutPropertiesLoose(ot,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$1.createElement(TransitionGroupContext.Provider,{value:null},typeof lt=="function"?lt(st,ut):React$1.cloneElement(React$1.Children.only(lt),ut))},tt}(React$1.Component);Transition.contextType=TransitionGroupContext,Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop},Transition.UNMOUNTED=UNMOUNTED,Transition.EXITED=EXITED,Transition.ENTERING=ENTERING,Transition.ENTERED=ENTERED,Transition.EXITING=EXITING;const Transition$1=Transition;function useTheme(){return useTheme$1(defaultTheme$2)}const reflow=it=>it.scrollTop;function getTransitionProps(it,tt){var rt,at;const{timeout:st,easing:ot,style:lt={}}=it;return{duration:(rt=lt.transitionDuration)!=null?rt:typeof st=="number"?st:st[tt.mode]||0,easing:(at=lt.transitionTimingFunction)!=null?at:typeof ot=="object"?ot[tt.mode]:ot,delay:lt.transitionDelay}}const _excluded$9=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],styles$1={entering:{opacity:1},entered:{opacity:1}},Fade=react.exports.forwardRef(function it(tt,rt){const at=useTheme(),st={enter:at.transitions.duration.enteringScreen,exit:at.transitions.duration.leavingScreen},{addEndListener:ot,appear:lt=!0,children:ut,easing:ht,in:mt,onEnter:bt,onEntered:vt,onEntering:At,onExit:xt,onExited:Et,onExiting:Tt,style:wt,timeout:Ct=st,TransitionComponent:It=Transition$1}=tt,St=_objectWithoutPropertiesLoose(tt,_excluded$9),Rt=react.exports.useRef(null),Dt=useForkRef(Rt,ut.ref,rt),Wt=Mt=>Lt=>{if(Mt){const Ht=Rt.current;Lt===void 0?Mt(Ht):Mt(Ht,Lt)}},qt=Wt(At),Vt=Wt((Mt,Lt)=>{reflow(Mt);const Ht=getTransitionProps({style:wt,timeout:Ct,easing:ht},{mode:"enter"});Mt.style.webkitTransition=at.transitions.create("opacity",Ht),Mt.style.transition=at.transitions.create("opacity",Ht),bt&&bt(Mt,Lt)}),Yt=Wt(vt),jt=Wt(Tt),kt=Wt(Mt=>{const Lt=getTransitionProps({style:wt,timeout:Ct,easing:ht},{mode:"exit"});Mt.style.webkitTransition=at.transitions.create("opacity",Lt),Mt.style.transition=at.transitions.create("opacity",Lt),xt&&xt(Mt)}),zt=Wt(Et);return jsx(It,_extends({appear:lt,in:mt,nodeRef:Rt,onEnter:Vt,onEntered:Yt,onEntering:qt,onExit:kt,onExited:zt,onExiting:jt,addEndListener:Mt=>{ot&&ot(Rt.current,Mt)},timeout:Ct},St,{children:(Mt,Lt)=>react.exports.cloneElement(ut,_extends({style:_extends({opacity:0,visibility:Mt==="exited"&&!mt?"hidden":void 0},styles$1[Mt],wt,ut.props.style),ref:Dt},Lt))}))}),Fade$1=Fade;function getBackdropUtilityClass(it){return generateUtilityClass("MuiBackdrop",it)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const _excluded$8=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],useUtilityClasses$7=it=>{const{classes:tt,invisible:rt}=it;return composeClasses({root:["root",rt&&"invisible"]},getBackdropUtilityClass,tt)},BackdropRoot=styled$1("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(it,tt)=>{const{ownerState:rt}=it;return[tt.root,rt.invisible&&tt.invisible]}})(({ownerState:it})=>_extends({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},it.invisible&&{backgroundColor:"transparent"})),Backdrop=react.exports.forwardRef(function it(tt,rt){var at,st,ot;const lt=useThemeProps({props:tt,name:"MuiBackdrop"}),{children:ut,className:ht,component:mt="div",components:bt={},componentsProps:vt={},invisible:At=!1,open:xt,slotProps:Et={},slots:Tt={},TransitionComponent:wt=Fade$1,transitionDuration:Ct}=lt,It=_objectWithoutPropertiesLoose(lt,_excluded$8),St=_extends({},lt,{component:mt,invisible:At}),Rt=useUtilityClasses$7(St),Dt=(at=Et.root)!=null?at:vt.root;return jsx(wt,_extends({in:xt,timeout:Ct},It,{children:jsx(BackdropRoot,_extends({"aria-hidden":!0},Dt,{as:(st=(ot=Tt.root)!=null?ot:bt.Root)!=null?st:mt,className:clsx$1(Rt.root,ht,Dt==null?void 0:Dt.className),ownerState:_extends({},St,Dt==null?void 0:Dt.ownerState),classes:Rt,ref:rt,children:ut}))}))}),Backdrop$1=Backdrop,_excluded$7=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],ModalRoot=styled$1("div",{name:"MuiModal",slot:"Root",overridesResolver:(it,tt)=>{const{ownerState:rt}=it;return[tt.root,!rt.open&&rt.exited&&tt.hidden]}})(({theme:it,ownerState:tt})=>_extends({position:"fixed",zIndex:(it.vars||it).zIndex.modal,right:0,bottom:0,top:0,left:0},!tt.open&&tt.exited&&{visibility:"hidden"})),ModalBackdrop=styled$1(Backdrop$1,{name:"MuiModal",slot:"Backdrop",overridesResolver:(it,tt)=>tt.backdrop})({zIndex:-1}),Modal=react.exports.forwardRef(function it(tt,rt){var at,st,ot,lt,ut,ht;const mt=useThemeProps({name:"MuiModal",props:tt}),{BackdropComponent:bt=ModalBackdrop,BackdropProps:vt,classes:At,className:xt,closeAfterTransition:Et=!1,children:Tt,component:wt,components:Ct={},componentsProps:It={},disableAutoFocus:St=!1,disableEnforceFocus:Rt=!1,disableEscapeKeyDown:Dt=!1,disablePortal:Wt=!1,disableRestoreFocus:qt=!1,disableScrollLock:Vt=!1,hideBackdrop:Yt=!1,keepMounted:jt=!1,slotProps:kt,slots:zt,theme:Nt}=mt,Mt=_objectWithoutPropertiesLoose(mt,_excluded$7),[Lt,Ht]=react.exports.useState(!0),Qt={closeAfterTransition:Et,disableAutoFocus:St,disableEnforceFocus:Rt,disableEscapeKeyDown:Dt,disablePortal:Wt,disableRestoreFocus:qt,disableScrollLock:Vt,hideBackdrop:Yt,keepMounted:jt},Ut=_extends({},mt,Qt,{exited:Lt}),Bt=(at=(st=zt==null?void 0:zt.root)!=null?st:Ct.Root)!=null?at:ModalRoot,Kt=(ot=(lt=zt==null?void 0:zt.backdrop)!=null?lt:Ct.Backdrop)!=null?ot:bt,Gt=(ut=kt==null?void 0:kt.root)!=null?ut:It.root,Pt=(ht=kt==null?void 0:kt.backdrop)!=null?ht:It.backdrop;return jsx(ModalUnstyled$1,_extends({slots:{root:Bt,backdrop:Kt},slotProps:{root:()=>_extends({},resolveComponentProps(Gt,Ut),!isHostComponent(Bt)&&{as:wt,theme:Nt},{className:clsx$1(xt,Gt==null?void 0:Gt.className,At==null?void 0:At.root,!Ut.open&&Ut.exited&&(At==null?void 0:At.hidden))}),backdrop:()=>_extends({},vt,resolveComponentProps(Pt,Ut),{className:clsx$1(Pt==null?void 0:Pt.className,At==null?void 0:At.backdrop)})},onTransitionEnter:()=>Ht(!1),onTransitionExited:()=>Ht(!0),ref:rt},Mt,Qt,{children:Tt}))}),Modal$1=Modal,getOverlayAlpha=it=>{let tt;return it<1?tt=5.11916*it**2:tt=4.5*Math.log(it+1)+2,(tt/100).toFixed(2)},getOverlayAlpha$1=getOverlayAlpha,defaultTheme=createTheme(),Box=createBox({defaultTheme,defaultClassName:"MuiBox-root",generateClassName:ClassNameGenerator$1.generate}),Box$1=Box;function getTypographyUtilityClass(it){return generateUtilityClass("MuiTypography",it)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _excluded$6=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses$6=it=>{const{align:tt,gutterBottom:rt,noWrap:at,paragraph:st,variant:ot,classes:lt}=it,ut={root:["root",ot,it.align!=="inherit"&&`align${capitalize(tt)}`,rt&&"gutterBottom",at&&"noWrap",st&&"paragraph"]};return composeClasses(ut,getTypographyUtilityClass,lt)},TypographyRoot=styled$1("span",{name:"MuiTypography",slot:"Root",overridesResolver:(it,tt)=>{const{ownerState:rt}=it;return[tt.root,rt.variant&&tt[rt.variant],rt.align!=="inherit"&&tt[`align${capitalize(rt.align)}`],rt.noWrap&&tt.noWrap,rt.gutterBottom&&tt.gutterBottom,rt.paragraph&&tt.paragraph]}})(({theme:it,ownerState:tt})=>_extends({margin:0},tt.variant&&it.typography[tt.variant],tt.align!=="inherit"&&{textAlign:tt.align},tt.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},tt.gutterBottom&&{marginBottom:"0.35em"},tt.paragraph&&{marginBottom:16})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},colorTransformations={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=it=>colorTransformations[it]||it,Typography=react.exports.forwardRef(function it(tt,rt){const at=useThemeProps({props:tt,name:"MuiTypography"}),st=transformDeprecatedColors(at.color),ot=extendSxProp(_extends({},at,{color:st})),{align:lt="inherit",className:ut,component:ht,gutterBottom:mt=!1,noWrap:bt=!1,paragraph:vt=!1,variant:At="body1",variantMapping:xt=defaultVariantMapping}=ot,Et=_objectWithoutPropertiesLoose(ot,_excluded$6),Tt=_extends({},ot,{align:lt,color:st,className:ut,component:ht,gutterBottom:mt,noWrap:bt,paragraph:vt,variant:At,variantMapping:xt}),wt=ht||(vt?"p":xt[At]||defaultVariantMapping[At])||"span",Ct=useUtilityClasses$6(Tt);return jsx(TypographyRoot,_extends({as:wt,ref:rt,ownerState:Tt,className:clsx$1(Ct.root,ut)},Et))}),Typography$1=Typography;function getPaperUtilityClass(it){return generateUtilityClass("MuiPaper",it)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$5=["className","component","elevation","square","variant"],useUtilityClasses$5=it=>{const{square:tt,elevation:rt,variant:at,classes:st}=it,ot={root:["root",at,!tt&&"rounded",at==="elevation"&&`elevation${rt}`]};return composeClasses(ot,getPaperUtilityClass,st)},PaperRoot=styled$1("div",{name:"MuiPaper",slot:"Root",overridesResolver:(it,tt)=>{const{ownerState:rt}=it;return[tt.root,tt[rt.variant],!rt.square&&tt.rounded,rt.variant==="elevation"&&tt[`elevation${rt.elevation}`]]}})(({theme:it,ownerState:tt})=>{var rt;return _extends({backgroundColor:(it.vars||it).palette.background.paper,color:(it.vars||it).palette.text.primary,transition:it.transitions.create("box-shadow")},!tt.square&&{borderRadius:it.shape.borderRadius},tt.variant==="outlined"&&{border:`1px solid ${(it.vars||it).palette.divider}`},tt.variant==="elevation"&&_extends({boxShadow:(it.vars||it).shadows[tt.elevation]},!it.vars&&it.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha("#fff",getOverlayAlpha$1(tt.elevation))}, ${alpha("#fff",getOverlayAlpha$1(tt.elevation))})`},it.vars&&{backgroundImage:(rt=it.vars.overlays)==null?void 0:rt[tt.elevation]}))}),Paper=react.exports.forwardRef(function it(tt,rt){const at=useThemeProps({props:tt,name:"MuiPaper"}),{className:st,component:ot="div",elevation:lt=1,square:ut=!1,variant:ht="elevation"}=at,mt=_objectWithoutPropertiesLoose(at,_excluded$5),bt=_extends({},at,{component:ot,elevation:lt,square:ut,variant:ht}),vt=useUtilityClasses$5(bt);return jsx(PaperRoot,_extends({as:ot,ownerState:bt,className:clsx$1(vt.root,st),ref:rt},mt))}),Paper$1=Paper;function getCardUtilityClass(it){return generateUtilityClass("MuiCard",it)}generateUtilityClasses("MuiCard",["root"]);const _excluded$4=["className","raised"],useUtilityClasses$4=it=>{const{classes:tt}=it;return composeClasses({root:["root"]},getCardUtilityClass,tt)},CardRoot=styled$1(Paper$1,{name:"MuiCard",slot:"Root",overridesResolver:(it,tt)=>tt.root})(()=>({overflow:"hidden"})),Card=react.exports.forwardRef(function it(tt,rt){const at=useThemeProps({props:tt,name:"MuiCard"}),{className:st,raised:ot=!1}=at,lt=_objectWithoutPropertiesLoose(at,_excluded$4),ut=_extends({},at,{raised:ot}),ht=useUtilityClasses$4(ut);return jsx(CardRoot,_extends({className:clsx$1(ht.root,st),elevation:ot?8:void 0,ref:rt,ownerState:ut},lt))}),Card$1=Card;function getCardMediaUtilityClass(it){return generateUtilityClass("MuiCardMedia",it)}generateUtilityClasses("MuiCardMedia",["root","media","img"]);const _excluded$3=["children","className","component","image","src","style"],useUtilityClasses$3=it=>{const{classes:tt,isMediaComponent:rt,isImageComponent:at}=it;return composeClasses({root:["root",rt&&"media",at&&"img"]},getCardMediaUtilityClass,tt)},CardMediaRoot=styled$1("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(it,tt)=>{const{ownerState:rt}=it,{isMediaComponent:at,isImageComponent:st}=rt;return[tt.root,at&&tt.media,st&&tt.img]}})(({ownerState:it})=>_extends({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},it.isMediaComponent&&{width:"100%"},it.isImageComponent&&{objectFit:"cover"})),MEDIA_COMPONENTS=["video","audio","picture","iframe","img"],IMAGE_COMPONENTS=["picture","img"],CardMedia=react.exports.forwardRef(function it(tt,rt){const at=useThemeProps({props:tt,name:"MuiCardMedia"}),{children:st,className:ot,component:lt="div",image:ut,src:ht,style:mt}=at,bt=_objectWithoutPropertiesLoose(at,_excluded$3),vt=MEDIA_COMPONENTS.indexOf(lt)!==-1,At=!vt&&ut?_extends({backgroundImage:`url("${ut}")`},mt):mt,xt=_extends({},at,{component:lt,isMediaComponent:vt,isImageComponent:IMAGE_COMPONENTS.indexOf(lt)!==-1}),Et=useUtilityClasses$3(xt);return jsx(CardMediaRoot,_extends({className:clsx$1(Et.root,ot),as:lt,role:!vt&&ut?"img":void 0,ref:rt,style:At,ownerState:xt,src:vt?ut||ht:void 0},bt,{children:st}))}),CardMedia$1=CardMedia;function getCardContentUtilityClass(it){return generateUtilityClass("MuiCardContent",it)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$2=["className","component"],useUtilityClasses$2=it=>{const{classes:tt}=it;return composeClasses({root:["root"]},getCardContentUtilityClass,tt)},CardContentRoot=styled$1("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(it,tt)=>tt.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=react.exports.forwardRef(function it(tt,rt){const at=useThemeProps({props:tt,name:"MuiCardContent"}),{className:st,component:ot="div"}=at,lt=_objectWithoutPropertiesLoose(at,_excluded$2),ut=_extends({},at,{component:ot}),ht=useUtilityClasses$2(ut);return jsx(CardContentRoot,_extends({as:ot,className:clsx$1(ht.root,st),ownerState:ut,ref:rt},lt))}),CardContent$1=CardContent;function getCardActionsUtilityClass(it){return generateUtilityClass("MuiCardActions",it)}generateUtilityClasses("MuiCardActions",["root","spacing"]);const _excluded$1=["disableSpacing","className"],useUtilityClasses$1=it=>{const{classes:tt,disableSpacing:rt}=it;return composeClasses({root:["root",!rt&&"spacing"]},getCardActionsUtilityClass,tt)},CardActionsRoot=styled$1("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(it,tt)=>{const{ownerState:rt}=it;return[tt.root,!rt.disableSpacing&&tt.spacing]}})(({ownerState:it})=>_extends({display:"flex",alignItems:"center",padding:8},!it.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),CardActions=react.exports.forwardRef(function it(tt,rt){const at=useThemeProps({props:tt,name:"MuiCardActions"}),{disableSpacing:st=!1,className:ot}=at,lt=_objectWithoutPropertiesLoose(at,_excluded$1),ut=_extends({},at,{disableSpacing:st}),ht=useUtilityClasses$1(ut);return jsx(CardActionsRoot,_extends({className:clsx$1(ht.root,ot),ownerState:ut,ref:rt},lt))}),CardActions$1=CardActions;function getCircularProgressUtilityClass(it){return generateUtilityClass("MuiCircularProgress",it)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _excluded=["className","color","disableShrink","size","style","thickness","value","variant"];let _$1=it=>it,_t,_t2,_t3,_t4;const SIZE=44,circularRotateKeyframe=keyframes(_t||(_t=_$1`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),circularDashKeyframe=keyframes(_t2||(_t2=_$1`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),useUtilityClasses=it=>{const{classes:tt,variant:rt,color:at,disableShrink:st}=it,ot={root:["root",rt,`color${capitalize(at)}`],svg:["svg"],circle:["circle",`circle${capitalize(rt)}`,st&&"circleDisableShrink"]};return composeClasses(ot,getCircularProgressUtilityClass,tt)},CircularProgressRoot=styled$1("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(it,tt)=>{const{ownerState:rt}=it;return[tt.root,tt[rt.variant],tt[`color${capitalize(rt.color)}`]]}})(({ownerState:it,theme:tt})=>_extends({display:"inline-block"},it.variant==="determinate"&&{transition:tt.transitions.create("transform")},it.color!=="inherit"&&{color:(tt.vars||tt).palette[it.color].main}),({ownerState:it})=>it.variant==="indeterminate"&&css(_t3||(_t3=_$1`
      animation: ${0} 1.4s linear infinite;
    `),circularRotateKeyframe)),CircularProgressSVG=styled$1("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(it,tt)=>tt.svg})({display:"block"}),CircularProgressCircle=styled$1("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(it,tt)=>{const{ownerState:rt}=it;return[tt.circle,tt[`circle${capitalize(rt.variant)}`],rt.disableShrink&&tt.circleDisableShrink]}})(({ownerState:it,theme:tt})=>_extends({stroke:"currentColor"},it.variant==="determinate"&&{transition:tt.transitions.create("stroke-dashoffset")},it.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:it})=>it.variant==="indeterminate"&&!it.disableShrink&&css(_t4||(_t4=_$1`
      animation: ${0} 1.4s ease-in-out infinite;
    `),circularDashKeyframe)),CircularProgress=react.exports.forwardRef(function it(tt,rt){const at=useThemeProps({props:tt,name:"MuiCircularProgress"}),{className:st,color:ot="primary",disableShrink:lt=!1,size:ut=40,style:ht,thickness:mt=3.6,value:bt=0,variant:vt="indeterminate"}=at,At=_objectWithoutPropertiesLoose(at,_excluded),xt=_extends({},at,{color:ot,disableShrink:lt,size:ut,thickness:mt,value:bt,variant:vt}),Et=useUtilityClasses(xt),Tt={},wt={},Ct={};if(vt==="determinate"){const It=2*Math.PI*((SIZE-mt)/2);Tt.strokeDasharray=It.toFixed(3),Ct["aria-valuenow"]=Math.round(bt),Tt.strokeDashoffset=`${((100-bt)/100*It).toFixed(3)}px`,wt.transform="rotate(-90deg)"}return jsx(CircularProgressRoot,_extends({className:clsx$1(Et.root,st),style:_extends({width:ut,height:ut},wt,ht),ownerState:xt,ref:rt,role:"progressbar"},Ct,At,{children:jsx(CircularProgressSVG,{className:Et.svg,ownerState:xt,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsx(CircularProgressCircle,{className:Et.circle,style:Tt,ownerState:xt,cx:SIZE,cy:SIZE,r:(SIZE-mt)/2,fill:"none",strokeWidth:mt})})}))}),CircularProgress$1=CircularProgress,theme=createTheme({palette:{mode:"dark",background:{default:"#0f0e12",paper:"#0f0e12"},text:{primary:"#c3c0bb"},divider:"#4d4d4d"},typography:{fontFamily:["Helvetica","sans-serif"].join(","),h3:{letterSpacing:"0.06rem",fontWeight:"inherit",textTransform:"none",marginBottom:"0"},body1:{letterSpacing:"0.06rem",fontSize:"inherit",fontWeight:"inherit",textTransform:"none"}},components:{MuiCircularProgress:{styleOverrides:{root:{outline:"none",color:"#c3c0bb"}}},MuiCard:{styleOverrides:{root:{backgroundImage:"unset",boxShadow:"0",borderRadius:0}}},MuiCardMedia:{styleOverrides:{root:{objectFit:"contain",borderRadius:0,width:"100%",height:"100%"}}},MuiCardActions:{styleOverrides:{root:{display:"block"}}}}}),styles="",allEvents=["click","touchstart","touchmove","touchend","touchcancel","wheel","mousewheel","mousedown","keydown","keyup","keypress","submit","mouseover"],clickEvents=["click","mousedown","keydown","keyup","keypress","submit"],useEventListener=({owned:it,address:tt,location:rt})=>{const[at,st]=react.exports.useState(!1),ot=document.querySelector("#MainContent"),lt=({events:ht,element:mt,callbackFn:bt})=>{ht.forEach(vt=>{mt.addEventListener(vt,bt)})},ut=({events:ht,element:mt,callbackFn:bt})=>{ht.forEach(vt=>{mt.removeEventListener(vt,bt)})};return react.exports.useEffect(()=>{console.log("location: ",rt);const ht=document.querySelector(".shopify-payment-button"),mt=document.querySelectorAll(".quick-add__submit"),bt=document.querySelector("product-form__submit"),vt=xt=>{xt.preventDefault(),xt.stopPropagation()},At=xt=>{(!tt||!it)&&(vt(xt),st(!0),ht&&(ht.style.display="none"))};if(mt&&mt.forEach(xt=>{lt({events:clickEvents,element:xt,callbackFn:At})}),bt&&lt({events:clickEvents,element:bt,callbackFn:At}),at){ot&&lt({events:allEvents,element:ot,callbackFn:vt});return}return it&&(st(!1),ht&&(ht.style.display="block"),mt&&mt.forEach(xt=>{ut({events:clickEvents,element:xt,callbackFn:At})}),bt&&ut({events:clickEvents,element:bt,callbackFn:At}),ot&&ut({events:allEvents,element:ot,callbackFn:vt})),()=>{mt&&mt.forEach(xt=>{ut({events:clickEvents,element:xt,callbackFn:At})}),bt&&ut({events:clickEvents,element:bt,callbackFn:At}),ot&&ut({events:allEvents,element:ot,callbackFn:vt}),ht&&(ht.style.display="block")}},[ot,it,tt,rt]),at},title=((Rr=document.currentScript)==null?void 0:Rr.getAttribute("data-title"))||"Smircs - The Legacy",description=(($r=document.currentScript)==null?void 0:$r.getAttribute("data-description"))||"This product is gated by an NFT. You must own this NFT to pass the gate. Connect your wallet to prove ownership.",image=((kr=document.currentScript)==null?void 0:kr.getAttribute("data-image"))||"https://i.seadn.io/gae/6hwdC3WxMBsmKT6R4_4RCP44MYnMAhYAmtIygmxUMV7_ab7vLmicsmAv5TX2P43NhBtSQeBvUx5v5twbfow4zGBz9dp5cAEFNbVp?auto=format&w=3840",contractAddress=((Pr=document.currentScript)==null?void 0:Pr.getAttribute("data-contract-address"))||"0x15fd0f20218967725e6b34a2881dc260d7e9d860";function App(){const it=useAddress(),{contract:tt}=useContract(contractAddress,"nft-drop"),[rt,at]=react.exports.useState(!1),[st,ot]=react.exports.useState(!1),lt=window.location.href,ut=useEventListener({owned:rt,address:it,location:lt});return react.exports.useEffect(()=>{it&&tt&&(ot(!0),tt.getOwned(it).then(ht=>{ht.length&&at(!0)}).catch(ht=>{console.error(ht)}).finally(()=>{ot(!1)}))},[it,tt]),jsx(ThemeProvider,{theme,children:jsx(Modal$1,{open:ut,onClose:()=>{},"aria-labelledby":"modal-title","aria-describedby":"modal-description",children:st?jsx(Box$1,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:jsx(CircularProgress$1,{size:"4rem"})}):jsx(Box$1,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,maxWidth:"90vw",bgcolor:"#0f0e12",border:"1px solid #c3c0bb",p:1},children:jsxs(Card$1,{children:[jsx(CardMedia$1,{component:"img",image,alt:"Smircs - The Legacy"}),jsxs(CardContent$1,{children:[jsx(Typography$1,{gutterBottom:!0,variant:"h3",component:"h2",id:"modal-title",children:title}),jsx(Typography$1,{variant:"body1",id:"modal-description",children:description})]}),jsx(CardActions$1,{children:jsx(ConnectWallet,{className:"wallet-btn"})})]})})})})}const activeChain=parseInt((Br=document.currentScript)==null?void 0:Br.getAttribute("data-desired-chain-id"))||"ethereum",elementId="gated-modal",container=document.createElement("div");container.setAttribute("id",elementId),document.body.appendChild(container);const root=createRoot(container);root.render(jsx(React$1.StrictMode,{children:jsx(ThirdwebProvider,{activeChain,children:jsx(App,{})})}));class EditionDrop extends StandardErc1155{constructor(tt,rt,at){var st;let ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},lt=arguments.length>4?arguments[4]:void 0,ut=arguments.length>5?arguments[5]:void 0,ht=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,lt,ot);super(ht,at,ut),st=this,_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"sales",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"royalties",void 0),_defineProperty$4(this,"claimConditions",void 0),_defineProperty$4(this,"checkout",void 0),_defineProperty$4(this,"history",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"erc1155",void 0),_defineProperty$4(this,"owner",void 0),_defineProperty$4(this,"createBatch",buildTransactionFunction(async(mt,bt)=>this.erc1155.lazyMint.prepare(mt,bt))),_defineProperty$4(this,"claimTo",buildTransactionFunction(async function(mt,bt,vt){let At=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return st.erc1155.claimTo.prepare(mt,bt,vt,{checkERC20Allowance:At})})),_defineProperty$4(this,"claim",buildTransactionFunction(async function(mt,bt){let vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const At=await st.contractWrapper.getSignerAddress();return st.claimTo.prepare(At,mt,bt,vt)})),_defineProperty$4(this,"burnTokens",buildTransactionFunction(async(mt,bt)=>this.erc1155.burn.prepare(mt,bt))),this.abi=lt,this.metadata=new ContractMetadata(this.contractWrapper,DropErc1155ContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,EditionDrop.contractRoles),this.royalties=new ContractRoyalty(this.contractWrapper,this.metadata),this.sales=new ContractPrimarySale(this.contractWrapper),this.claimConditions=new DropErc1155ClaimConditions(this.contractWrapper,this.metadata,this.storage),this.events=new ContractEvents(this.contractWrapper),this.history=new DropErc1155History(this.events),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.erc1155=new Erc1155(this.contractWrapper,this.storage,ut),this.checkout=new PaperCheckout(this.contractWrapper),this.owner=new ContractOwner(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async getAll(tt){return this.erc1155.getAll(tt)}async getOwned(tt){return this.erc1155.getOwned(tt)}async getTotalCount(){return this.erc1155.totalCount()}async isTransferRestricted(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("transfer"),AddressZero)}async getClaimTransaction(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return this.erc1155.getClaimTransaction(tt,rt,at,{checkERC20Allowance:st})}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(EditionDrop,"contractRoles",["admin","minter","transfer"]);const editionDropA4b39999_esm=Object.freeze(Object.defineProperty({__proto__:null,EditionDrop},Symbol.toStringTag,{value:"Module"})),DropERC1155=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"OperatorNotAllowed",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition[]",name:"claimConditions",type:"tuple[]"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"restriction",type:"bool"}],name:"OperatorRestriction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"saleRecipient",type:"address"}],name:"SaleRecipientForTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop1155.AllowlistProof",name:"_allowlistProof",type:"tuple"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"claimCondition",outputs:[{internalType:"uint256",name:"currentStartId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getActiveClaimConditionId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBaseURICount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"getBatchIdAtIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_conditionId",type:"uint256"}],name:"getClaimConditionById",outputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition",name:"condition",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"}],name:"getSupplyClaimedByWallet",outputs:[{internalType:"uint256",name:"supplyClaimedByWallet",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_saleRecipient",type:"address"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"},{internalType:"address",name:"_platformFeeRecipient",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"string",name:"_baseURIForTokens",type:"string"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"lazyMint",outputs:[{internalType:"uint256",name:"batchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"maxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operatorRestriction",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"saleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition[]",name:"_conditions",type:"tuple[]"},{internalType:"bool",name:"_resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_restriction",type:"bool"}],name:"setOperatorRestriction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setSaleRecipientForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop1155.AllowlistProof",name:"_allowlistProof",type:"tuple"}],name:"verifyClaim",outputs:[{internalType:"bool",name:"isOverride",type:"bool"}],stateMutability:"view",type:"function"}],DropERC1155$1=Object.freeze(Object.defineProperty({__proto__:null,default:DropERC1155},Symbol.toStringTag,{value:"Module"})),DropERC1155_V2=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"saleRecipient",type:"address"}],name:"SaleRecipientForTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!1,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"_proofs",type:"bytes32[]"},{internalType:"uint256",name:"_proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"claimCondition",outputs:[{internalType:"uint256",name:"currentStartId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getActiveClaimConditionId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_conditionId",type:"uint256"}],name:"getClaimConditionById",outputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition",name:"condition",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"}],name:"getClaimTimestamp",outputs:[{internalType:"uint256",name:"lastClaimTimestamp",type:"uint256"},{internalType:"uint256",name:"nextValidClaimTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_saleRecipient",type:"address"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"},{internalType:"address",name:"_platformFeeRecipient",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"string",name:"_baseURIForTokens",type:"string"}],name:"lazyMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"maxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"maxWalletClaimCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"saleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"_phases",type:"tuple[]"},{internalType:"bool",name:"_resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_count",type:"uint256"}],name:"setMaxWalletClaimCount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setSaleRecipientForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_count",type:"uint256"}],name:"setWalletClaimCount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"_tokenURI",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{internalType:"bool",name:"verifyMaxQuantityPerTransaction",type:"bool"}],name:"verifyClaim",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"bytes32[]",name:"_proofs",type:"bytes32[]"},{internalType:"uint256",name:"_proofMaxQuantityPerTransaction",type:"uint256"}],name:"verifyClaimMerkleProof",outputs:[{internalType:"bool",name:"validMerkleProof",type:"bool"},{internalType:"uint256",name:"merkleProofIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"walletClaimCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],DropERC1155_V2$1=Object.freeze(Object.defineProperty({__proto__:null,default:DropERC1155_V2},Symbol.toStringTag,{value:"Module"}));class Edition extends StandardErc1155{constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);super(ut,at,lt),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"sales",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"royalties",void 0),_defineProperty$4(this,"signature",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"erc1155",void 0),_defineProperty$4(this,"owner",void 0),_defineProperty$4(this,"mint",buildTransactionFunction(async ht=>this.erc1155.mint.prepare(ht))),_defineProperty$4(this,"mintTo",buildTransactionFunction(async(ht,mt)=>this.erc1155.mintTo.prepare(ht,mt))),_defineProperty$4(this,"mintAdditionalSupply",buildTransactionFunction(async(ht,mt)=>this.erc1155.mintAdditionalSupply.prepare(ht,mt))),_defineProperty$4(this,"mintAdditionalSupplyTo",buildTransactionFunction(async(ht,mt,bt)=>this.erc1155.mintAdditionalSupplyTo.prepare(ht,mt,bt))),_defineProperty$4(this,"mintBatch",buildTransactionFunction(async ht=>this.erc1155.mintBatch.prepare(ht))),_defineProperty$4(this,"mintBatchTo",buildTransactionFunction(async(ht,mt)=>this.erc1155.mintBatchTo.prepare(ht,mt))),_defineProperty$4(this,"burn",buildTransactionFunction(async(ht,mt)=>this.erc1155.burn.prepare(ht,mt))),this.abi=ot,this.metadata=new ContractMetadata(this.contractWrapper,TokenErc1155ContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,Edition.contractRoles),this.royalties=new ContractRoyalty(this.contractWrapper,this.metadata),this.sales=new ContractPrimarySale(this.contractWrapper),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.signature=new Erc1155SignatureMintable(this.contractWrapper,this.storage,this.roles),this.erc1155=new Erc1155(this.contractWrapper,this.storage,lt),this.owner=new ContractOwner(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async getAll(tt){return this.erc1155.getAll(tt)}async getOwned(tt){return this.erc1155.getOwned(tt)}async getTotalCount(){return this.erc1155.totalCount()}async isTransferRestricted(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("transfer"),AddressZero)}async getMintTransaction(tt,rt){return this.erc1155.getMintTransaction(tt,rt)}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(Edition,"contractRoles",["admin","minter","transfer"]);const editionD3c2c908_esm=Object.freeze(Object.defineProperty({__proto__:null,Edition},Symbol.toStringTag,{value:"Module"})),TokenERC1155=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"OperatorNotAllowed",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"restriction",type:"bool"}],name:"OperatorRestriction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{indexed:!1,internalType:"string",name:"uri",type:"string"},{indexed:!1,internalType:"uint256",name:"quantityMinted",type:"uint256"}],name:"TokensMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ITokenERC1155.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_primarySaleRecipient",type:"address"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"},{internalType:"address",name:"_platformFeeRecipient",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"string",name:"_uri",type:"string"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"mintTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC1155.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"mintWithSignature",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operatorRestriction",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"platformFeeRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"saleRecipientForToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_restriction",type:"bool"}],name:"setOperatorRestriction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC1155.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],TokenERC1155$1=Object.freeze(Object.defineProperty({__proto__:null,default:TokenERC1155},Symbol.toStringTag,{value:"Module"}));class Marketplace$2{get chainId(){return this._chainId}constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"direct",void 0),_defineProperty$4(this,"auction",void 0),_defineProperty$4(this,"_chainId",void 0),_defineProperty$4(this,"getAll",this.getAllListings),this._chainId=lt,this.abi=ot,this.contractWrapper=ut,this.storage=at,this.metadata=new ContractMetadata(this.contractWrapper,MarketplaceContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,Marketplace$2.contractRoles),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.direct=new MarketplaceDirect(this.contractWrapper,this.storage),this.auction=new MarketplaceAuction(this.contractWrapper,this.storage),this.events=new ContractEvents(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async getListing(tt){const rt=await this.contractWrapper.readContract.listings(tt);if(rt.assetContract===AddressZero)throw new ListingNotFoundError(this.getAddress(),tt.toString());switch(rt.listingType){case ListingType.Auction:return await this.auction.mapListing(rt);case ListingType.Direct:return await this.direct.mapListing(rt);default:throw new Error(`Unknown listing type: ${rt.listingType}`)}}async getActiveListings(tt){const rt=await this.getAllListingsNoFilter(!0),at=this.applyFilter(rt,tt),st=BigNumber.from(Math.floor(Date.now()/1e3));return at.filter(ot=>ot.type===ListingType.Auction&&BigNumber.from(ot.endTimeInEpochSeconds).gt(st)&&BigNumber.from(ot.startTimeInEpochSeconds).lte(st)||ot.type===ListingType.Direct&&ot.quantity>0)}async getAllListings(tt){const rt=await this.getAllListingsNoFilter(!1);return this.applyFilter(rt,tt)}async getTotalCount(){return await this.contractWrapper.readContract.totalListings()}async isRestrictedToListerRoleOnly(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("lister"),AddressZero)}async getBidBufferBps(){return this.contractWrapper.readContract.bidBufferBps()}async getTimeBufferInSeconds(){return this.contractWrapper.readContract.timeBuffer()}async getOffers(tt){const rt=await this.events.getEvents("NewOffer",{order:"desc",filters:{listingId:tt}});return await Promise.all(rt.map(async at=>await mapOffer(this.contractWrapper.getProvider(),BigNumber.from(tt),{quantityWanted:at.data.quantityWanted,pricePerToken:at.data.quantityWanted.gt(0)?at.data.totalOfferAmount.div(at.data.quantityWanted):at.data.totalOfferAmount,currency:at.data.currency,offeror:at.data.offeror})))}async buyoutListing(tt,rt,at){const st=await this.contractWrapper.readContract.listings(tt);if(st.listingId.toString()!==tt.toString())throw new ListingNotFoundError(this.getAddress(),tt.toString());switch(st.listingType){case ListingType.Direct:return invariant$1(rt!==void 0,"quantityDesired is required when buying out a direct listing"),await this.direct.buyoutListing(tt,rt,at);case ListingType.Auction:return await this.auction.buyoutListing(tt);default:throw Error(`Unknown listing type: ${st.listingType}`)}}async makeOffer(tt,rt,at){const st=await this.contractWrapper.readContract.listings(tt);if(st.listingId.toString()!==tt.toString())throw new ListingNotFoundError(this.getAddress(),tt.toString());const ot=await this.contractWrapper.getChainID();switch(st.listingType){case ListingType.Direct:return invariant$1(at,"quantity is required when making an offer on a direct listing"),await this.direct.makeOffer(tt,at,isNativeToken(st.currency)?NATIVE_TOKENS[ot].wrapped.address:st.currency,rt);case ListingType.Auction:return await this.auction.makeBid(tt,rt);default:throw Error(`Unknown listing type: ${st.listingType}`)}}async setBidBufferBps(tt){await this.roles.verify(["admin"],await this.contractWrapper.getSignerAddress());const rt=await this.getTimeBufferInSeconds();await this.contractWrapper.sendTransaction("setAuctionBuffers",[rt,BigNumber.from(tt)])}async setTimeBufferInSeconds(tt){await this.roles.verify(["admin"],await this.contractWrapper.getSignerAddress());const rt=await this.getBidBufferBps();await this.contractWrapper.sendTransaction("setAuctionBuffers",[BigNumber.from(tt),rt])}async allowListingFromSpecificAssetOnly(tt){const rt=[];(await this.roles.get("asset")).includes(AddressZero)&&rt.push(this.encoder.encode("revokeRole",[getRoleHash("asset"),AddressZero])),rt.push(this.encoder.encode("grantRole",[getRoleHash("asset"),tt])),await this.contractWrapper.multiCall(rt)}async allowListingFromAnyAsset(){const tt=[],rt=await this.roles.get("asset");for(const at in rt)tt.push(this.encoder.encode("revokeRole",[getRoleHash("asset"),at]));tt.push(this.encoder.encode("grantRole",[getRoleHash("asset"),AddressZero])),await this.contractWrapper.multiCall(tt)}async getAllListingsNoFilter(tt){return(await Promise.all(Array.from(Array((await this.contractWrapper.readContract.totalListings()).toNumber()).keys()).map(async at=>{let st;try{st=await this.getListing(at)}catch(ot){if(ot instanceof ListingNotFoundError)return;console.warn(`Failed to get listing ${at}' - skipping. Try 'marketplace.getListing(${at})' to get the underlying error.`);return}if(st.type===ListingType.Auction)return st;if(tt){const{valid:ot}=await this.direct.isStillValidListing(st);if(!ot)return}return st}))).filter(at=>at!==void 0)}applyFilter(tt,rt){let at=[...tt];const st=BigNumber.from((rt==null?void 0:rt.start)||0).toNumber(),ot=BigNumber.from((rt==null?void 0:rt.count)||DEFAULT_QUERY_ALL_COUNT).toNumber();return rt&&(rt.seller&&(at=at.filter(lt=>{var ut;return lt.sellerAddress.toString().toLowerCase()===((ut=rt==null?void 0:rt.seller)==null?void 0:ut.toString().toLowerCase())})),rt.tokenContract&&(at=at.filter(lt=>{var ut;return lt.assetContractAddress.toString().toLowerCase()===((ut=rt==null?void 0:rt.tokenContract)==null?void 0:ut.toString().toLowerCase())})),rt.tokenId!==void 0&&(at=at.filter(lt=>{var ut;return lt.tokenId.toString()===((ut=rt==null?void 0:rt.tokenId)==null?void 0:ut.toString())})),at=at.filter((lt,ut)=>ut>=st),at=at.slice(0,ot)),at}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(Marketplace$2,"contractRoles",["admin","lister","asset"]);const marketplaceD4dfb5b7_esm=Object.freeze(Object.defineProperty({__proto__:null,Marketplace:Marketplace$2},Symbol.toStringTag,{value:"Module"})),Marketplace=[{inputs:[{internalType:"address",name:"_nativeTokenWrapper",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"timeBuffer",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bidBufferBps",type:"uint256"}],name:"AuctionBuffersUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"closer",type:"address"},{indexed:!0,internalType:"bool",name:"cancelled",type:"bool"},{indexed:!1,internalType:"address",name:"auctionCreator",type:"address"},{indexed:!1,internalType:"address",name:"winningBidder",type:"address"}],name:"AuctionClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!0,internalType:"address",name:"lister",type:"address"},{components:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"tokenOwner",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"reservePricePerToken",type:"uint256"},{internalType:"uint256",name:"buyoutPricePerToken",type:"uint256"},{internalType:"enum IMarketplace.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IMarketplace.ListingType",name:"listingType",type:"uint8"}],indexed:!1,internalType:"struct IMarketplace.Listing",name:"listing",type:"tuple"}],name:"ListingAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"listingCreator",type:"address"}],name:"ListingRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"listingCreator",type:"address"}],name:"ListingUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"enum IMarketplace.ListingType",name:"listingType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"quantityWanted",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalOfferAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"currency",type:"address"}],name:"NewOffer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"listingId",type:"uint256"},{indexed:!0,internalType:"address",name:"assetContract",type:"address"},{indexed:!0,internalType:"address",name:"lister",type:"address"},{indexed:!1,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityBought",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalPricePaid",type:"uint256"}],name:"NewSale",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_BPS",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_offeror",type:"address"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"}],name:"acceptOffer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"bidBufferBps",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_buyFor",type:"address"},{internalType:"uint256",name:"_quantityToBuy",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_totalPrice",type:"uint256"}],name:"buy",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"}],name:"cancelDirectListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"address",name:"_closeFor",type:"address"}],name:"closeAuction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"secondsUntilEndTime",type:"uint256"},{internalType:"uint256",name:"quantityToList",type:"uint256"},{internalType:"address",name:"currencyToAccept",type:"address"},{internalType:"uint256",name:"reservePricePerToken",type:"uint256"},{internalType:"uint256",name:"buyoutPricePerToken",type:"uint256"},{internalType:"enum IMarketplace.ListingType",name:"listingType",type:"uint8"}],internalType:"struct IMarketplace.ListingParameters",name:"_params",type:"tuple"}],name:"createListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"listings",outputs:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"tokenOwner",type:"address"},{internalType:"address",name:"assetContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"reservePricePerToken",type:"uint256"},{internalType:"uint256",name:"buyoutPricePerToken",type:"uint256"},{internalType:"enum IMarketplace.TokenType",name:"tokenType",type:"uint8"},{internalType:"enum IMarketplace.ListingType",name:"listingType",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_quantityWanted",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{internalType:"uint256",name:"_expirationTimestamp",type:"uint256"}],name:"offer",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"offers",outputs:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"uint256",name:"quantityWanted",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155BatchReceived",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_timeBuffer",type:"uint256"},{internalType:"uint256",name:"_bidBufferBps",type:"uint256"}],name:"setAuctionBuffers",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"timeBuffer",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalListings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_listingId",type:"uint256"},{internalType:"uint256",name:"_quantityToList",type:"uint256"},{internalType:"uint256",name:"_reservePricePerToken",type:"uint256"},{internalType:"uint256",name:"_buyoutPricePerToken",type:"uint256"},{internalType:"address",name:"_currencyToAccept",type:"address"},{internalType:"uint256",name:"_startTime",type:"uint256"},{internalType:"uint256",name:"_secondsUntilEndTime",type:"uint256"}],name:"updateListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"winningBid",outputs:[{internalType:"uint256",name:"listingId",type:"uint256"},{internalType:"address",name:"offeror",type:"address"},{internalType:"uint256",name:"quantityWanted",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"uint256",name:"expirationTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],Marketplace$1=Object.freeze(Object.defineProperty({__proto__:null,default:Marketplace},Symbol.toStringTag,{value:"Module"}));class MarketplaceV3$2{get directListings(){return assertEnabled(this.detectDirectListings(),FEATURE_DIRECT_LISTINGS)}get englishAuctions(){return assertEnabled(this.detectEnglishAuctions(),FEATURE_ENGLISH_AUCTIONS)}get offers(){return assertEnabled(this.detectOffers(),FEATURE_OFFERS)}get chainId(){return this._chainId}constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"_chainId",void 0),this._chainId=lt,this.abi=ot,this.contractWrapper=ut,this.storage=at,this.metadata=new ContractMetadata(this.contractWrapper,MarketplaceContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,MarketplaceV3$2.contractRoles),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}detectDirectListings(){if(detectContractFeature(this.contractWrapper,"DirectListings"))return new MarketplaceV3DirectListings(this.contractWrapper,this.storage)}detectEnglishAuctions(){if(detectContractFeature(this.contractWrapper,"EnglishAuctions"))return new MarketplaceV3EnglishAuctions(this.contractWrapper,this.storage)}detectOffers(){if(detectContractFeature(this.contractWrapper,"Offers"))return new MarketplaceV3Offers(this.contractWrapper,this.storage)}}_defineProperty$4(MarketplaceV3$2,"contractRoles",["admin","lister","asset"]);const marketplacev3D3217f02_esm=Object.freeze(Object.defineProperty({__proto__:null,MarketplaceV3:MarketplaceV3$2},Symbol.toStringTag,{value:"Module"})),MarketplaceV3=[{inputs:[{internalType:"address",name:"_pluginMap",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"string",name:"functionSignature",type:"string"},{indexed:!0,internalType:"address",name:"pluginAddress",type:"address"}],name:"PluginSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes4",name:"functionSelector",type:"bytes4"},{indexed:!0,internalType:"address",name:"oldPluginAddress",type:"address"},{indexed:!0,internalType:"address",name:"newPluginAddress",type:"address"}],name:"PluginUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"_getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"_plugin",type:"tuple"}],name:"addPlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_pluginAddress",type:"address"}],name:"getAllFunctionsOfPlugin",outputs:[{internalType:"bytes4[]",name:"registered",type:"bytes4[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"getPluginForFunction",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint16",name:"_platformFeeBps",type:"uint16"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155BatchReceived",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"pluginMap",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"_selector",type:"bytes4"}],name:"removePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin",name:"_plugin",type:"tuple"}],name:"updatePlugin",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],MarketplaceV3$1=Object.freeze(Object.defineProperty({__proto__:null,default:MarketplaceV3},Symbol.toStringTag,{value:"Module"}));class Multiwrap$2 extends StandardErc721{constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);super(ut,at,lt),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"royalties",void 0),_defineProperty$4(this,"owner",void 0),this.abi=ot,this.metadata=new ContractMetadata(this.contractWrapper,MultiwrapContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,Multiwrap$2.contractRoles),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.royalties=new ContractRoyalty(this.contractWrapper,this.metadata),this.owner=new ContractOwner(this.contractWrapper)}async getWrappedContents(tt){const rt=await this.contractWrapper.readContract.getWrappedContents(tt),at=[],st=[],ot=[];for(const lt of rt)switch(lt.tokenType){case 0:{const ut=await fetchCurrencyMetadata(this.contractWrapper.getProvider(),lt.assetContract);at.push({contractAddress:lt.assetContract,quantity:formatUnits(lt.totalAmount,ut.decimals)});break}case 1:{st.push({contractAddress:lt.assetContract,tokenId:lt.tokenId});break}case 2:{ot.push({contractAddress:lt.assetContract,tokenId:lt.tokenId,quantity:lt.totalAmount.toString()});break}}return{erc20Tokens:at,erc721Tokens:st,erc1155Tokens:ot}}async wrap(tt,rt,at){const st=await uploadOrExtractURI(rt,this.storage),ot=at||await this.contractWrapper.getSignerAddress(),lt=await this.toTokenStructList(tt),ut=await this.contractWrapper.sendTransaction("wrap",[lt,st,ot]),ht=this.contractWrapper.parseLogs("TokensWrapped",ut==null?void 0:ut.logs);if(ht.length===0)throw new Error("TokensWrapped event not found");const mt=ht[0].args.tokenIdOfWrappedToken;return{id:mt,receipt:ut,data:()=>this.get(mt)}}async unwrap(tt,rt){const at=rt||await this.contractWrapper.getSignerAddress();return{receipt:await this.contractWrapper.sendTransaction("unwrap",[tt,at])}}async toTokenStructList(tt){const rt=[],at=this.contractWrapper.getProvider(),st=await this.contractWrapper.getSignerAddress();if(tt.erc20Tokens)for(const ot of tt.erc20Tokens){const lt=await normalizePriceValue(at,ot.quantity,ot.contractAddress);if(!await hasERC20Allowance(this.contractWrapper,ot.contractAddress,lt))throw new Error(`ERC20 token with contract address "${ot.contractAddress}" does not have enough allowance to transfer.

You can set allowance to the multiwrap contract to transfer these tokens by running:

await sdk.getToken("${ot.contractAddress}").setAllowance("${this.getAddress()}", ${ot.quantity});

`);rt.push({assetContract:ot.contractAddress,totalAmount:lt,tokenId:0,tokenType:0})}if(tt.erc721Tokens)for(const ot of tt.erc721Tokens){if(!await isTokenApprovedForTransfer(this.contractWrapper.getProvider(),this.getAddress(),ot.contractAddress,ot.tokenId,st))throw new Error(`ERC721 token "${ot.tokenId}" with contract address "${ot.contractAddress}" is not approved for transfer.

You can give approval the multiwrap contract to transfer this token by running:

await sdk.getNFTCollection("${ot.contractAddress}").setApprovalForToken("${this.getAddress()}", ${ot.tokenId});

`);rt.push({assetContract:ot.contractAddress,totalAmount:0,tokenId:ot.tokenId,tokenType:1})}if(tt.erc1155Tokens)for(const ot of tt.erc1155Tokens){if(!await isTokenApprovedForTransfer(this.contractWrapper.getProvider(),this.getAddress(),ot.contractAddress,ot.tokenId,st))throw new Error(`ERC1155 token "${ot.tokenId}" with contract address "${ot.contractAddress}" is not approved for transfer.

You can give approval the multiwrap contract to transfer this token by running:

await sdk.getEdition("${ot.contractAddress}").setApprovalForAll("${this.getAddress()}", true);

`);rt.push({assetContract:ot.contractAddress,totalAmount:ot.quantity,tokenId:ot.tokenId,tokenType:2})}return rt}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(Multiwrap$2,"contractRoles",["admin","transfer","minter","unwrap","asset"]);const multiwrap8bba1486_esm=Object.freeze(Object.defineProperty({__proto__:null,Multiwrap:Multiwrap$2},Symbol.toStringTag,{value:"Module"})),Multiwrap=[{inputs:[{internalType:"address",name:"_nativeTokenWrapper",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"unwrapper",type:"address"},{indexed:!0,internalType:"address",name:"recipientOfWrappedContents",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdOfWrappedToken",type:"uint256"}],name:"TokensUnwrapped",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"wrapper",type:"address"},{indexed:!0,internalType:"address",name:"recipientOfWrappedToken",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdOfWrappedToken",type:"uint256"},{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],indexed:!1,internalType:"struct ITokenBundle.Token[]",name:"wrappedContents",type:"tuple[]"}],name:"TokensWrapped",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_bundleId",type:"uint256"}],name:"getTokenCountOfBundle",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_bundleId",type:"uint256"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getTokenOfBundle",outputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_bundleId",type:"uint256"}],name:"getUriOfBundle",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getWrappedContents",outputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"contents",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155BatchReceived",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"}],name:"unwrap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"_tokensToWrap",type:"tuple[]"},{internalType:"string",name:"_uriForWrappedToken",type:"string"},{internalType:"address",name:"_recipient",type:"address"}],name:"wrap",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],Multiwrap$1=Object.freeze(Object.defineProperty({__proto__:null,default:Multiwrap},Symbol.toStringTag,{value:"Module"}));class NFTCollection extends StandardErc721{constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);super(ut,at,lt),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"sales",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"royalties",void 0),_defineProperty$4(this,"owner",void 0),_defineProperty$4(this,"signature",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"mint",buildTransactionFunction(async ht=>this.erc721.mint.prepare(ht))),_defineProperty$4(this,"mintTo",buildTransactionFunction(async(ht,mt)=>this.erc721.mintTo.prepare(ht,mt))),_defineProperty$4(this,"mintBatch",buildTransactionFunction(async ht=>this.erc721.mintBatch.prepare(ht))),_defineProperty$4(this,"mintBatchTo",buildTransactionFunction(async(ht,mt)=>this.erc721.mintBatchTo.prepare(ht,mt))),_defineProperty$4(this,"burn",buildTransactionFunction(ht=>this.erc721.burn.prepare(ht))),this.abi=ot,this.metadata=new ContractMetadata(this.contractWrapper,TokenErc721ContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,NFTCollection.contractRoles),this.royalties=new ContractRoyalty(this.contractWrapper,this.metadata),this.sales=new ContractPrimarySale(this.contractWrapper),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.erc721=new Erc721(this.contractWrapper,this.storage,lt),this.signature=new Erc721WithQuantitySignatureMintable(this.contractWrapper,this.storage),this.owner=new ContractOwner(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async isTransferRestricted(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("transfer"),AddressZero)}async getMintTransaction(tt,rt){return this.erc721.getMintTransaction(tt,rt)}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(NFTCollection,"contractRoles",["admin","minter","transfer"]);const nftCollection9c884935_esm=Object.freeze(Object.defineProperty({__proto__:null,NFTCollection},Symbol.toStringTag,{value:"Module"})),TokenERC721=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"OperatorNotAllowed",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"restriction",type:"bool"}],name:"OperatorRestriction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{indexed:!1,internalType:"string",name:"uri",type:"string"}],name:"TokensMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ITokenERC721.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_saleRecipient",type:"address"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"},{internalType:"address",name:"_platformFeeRecipient",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"string",name:"_uri",type:"string"}],name:"mintTo",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"uint256",name:"tokenIdMinted",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operatorRestriction",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"platformFeeRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_restriction",type:"bool"}],name:"setOperatorRestriction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],TokenERC721$1=Object.freeze(Object.defineProperty({__proto__:null,default:TokenERC721},Symbol.toStringTag,{value:"Module"}));class NFTDrop extends StandardErc721{constructor(tt,rt,at){var st;let ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},lt=arguments.length>4?arguments[4]:void 0,ut=arguments.length>5?arguments[5]:void 0,ht=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,lt,ot);super(ht,at,ut),st=this,_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"sales",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"royalties",void 0),_defineProperty$4(this,"claimConditions",void 0),_defineProperty$4(this,"revealer",void 0),_defineProperty$4(this,"checkout",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"owner",void 0),_defineProperty$4(this,"createBatch",buildTransactionFunction(async(mt,bt)=>this.erc721.lazyMint.prepare(mt,bt))),_defineProperty$4(this,"claimTo",buildTransactionFunction(async function(mt,bt){let vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return st.erc721.claimTo.prepare(mt,bt,{checkERC20Allowance:vt})})),_defineProperty$4(this,"claim",buildTransactionFunction(async function(mt){let bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return st.claimTo.prepare(await st.contractWrapper.getSignerAddress(),mt,bt)})),_defineProperty$4(this,"burn",buildTransactionFunction(async mt=>this.erc721.burn.prepare(mt))),_defineProperty$4(this,"transfer",buildTransactionFunction(async(mt,bt)=>this.erc721.transfer.prepare(mt,bt))),_defineProperty$4(this,"setApprovalForAll",buildTransactionFunction(async(mt,bt)=>this.erc721.setApprovalForAll.prepare(mt,bt))),_defineProperty$4(this,"setApprovalForToken",buildTransactionFunction(async(mt,bt)=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"approve",args:[mt,bt]}))),this.abi=lt,this.metadata=new ContractMetadata(this.contractWrapper,DropErc721ContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,NFTDrop.contractRoles),this.royalties=new ContractRoyalty(this.contractWrapper,this.metadata),this.sales=new ContractPrimarySale(this.contractWrapper),this.claimConditions=new DropClaimConditions(this.contractWrapper,this.metadata,this.storage),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.erc721=new Erc721(this.contractWrapper,this.storage,ut),this.revealer=new DelayedReveal(this.contractWrapper,this.storage,FEATURE_NFT_REVEALABLE.name,()=>this.erc721.nextTokenIdToMint()),this.interceptor=new ContractInterceptor(this.contractWrapper),this.owner=new ContractOwner(this.contractWrapper),this.checkout=new PaperCheckout(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async totalSupply(){const tt=await this.totalClaimedSupply(),rt=await this.totalUnclaimedSupply();return tt.add(rt)}async getAllClaimed(tt){const rt=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),at=BigNumber.from((tt==null?void 0:tt.count)||DEFAULT_QUERY_ALL_COUNT).toNumber(),st=Math.min((await this.contractWrapper.readContract.nextTokenIdToClaim()).toNumber(),rt+at);return await Promise.all(Array.from(Array(st).keys()).map(ot=>this.get(ot.toString())))}async getAllUnclaimed(tt){const rt=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),at=BigNumber.from((tt==null?void 0:tt.count)||DEFAULT_QUERY_ALL_COUNT).toNumber(),st=BigNumber.from(Math.max((await this.contractWrapper.readContract.nextTokenIdToClaim()).toNumber(),rt)),ot=BigNumber.from(Math.min((await this.contractWrapper.readContract.nextTokenIdToMint()).toNumber(),st.toNumber()+at));return await Promise.all(Array.from(Array(ot.sub(st).toNumber()).keys()).map(lt=>this.erc721.getTokenMetadata(st.add(lt).toString())))}async totalClaimedSupply(){return this.erc721.totalClaimedSupply()}async totalUnclaimedSupply(){return this.erc721.totalUnclaimedSupply()}async isTransferRestricted(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("transfer"),AddressZero)}async getClaimTransaction(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return this.erc721.getClaimTransaction(tt,rt,{checkERC20Allowance:at})}async get(tt){return this.erc721.get(tt)}async ownerOf(tt){return this.erc721.ownerOf(tt)}async balanceOf(tt){return this.erc721.balanceOf(tt)}async balance(){return this.erc721.balance()}async isApproved(tt,rt){return this.erc721.isApproved(tt,rt)}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(NFTDrop,"contractRoles",["admin","minter","transfer"]);const nftDrop8e38ae16_esm=Object.freeze(Object.defineProperty({__proto__:null,NFTDrop},Symbol.toStringTag,{value:"Module"})),DropERC721=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ApprovalCallerNotOwnerNorApproved",type:"error"},{inputs:[],name:"ApprovalQueryForNonexistentToken",type:"error"},{inputs:[],name:"ApprovalToCurrentOwner",type:"error"},{inputs:[],name:"ApproveToCaller",type:"error"},{inputs:[],name:"BalanceQueryForZeroAddress",type:"error"},{inputs:[],name:"MintToZeroAddress",type:"error"},{inputs:[],name:"MintZeroQuantity",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"OperatorNotAllowed",type:"error"},{inputs:[],name:"OwnerQueryForNonexistentToken",type:"error"},{inputs:[],name:"TransferCallerNotOwnerNorApproved",type:"error"},{inputs:[],name:"TransferFromIncorrectOwner",type:"error"},{inputs:[],name:"TransferToNonERC721ReceiverImplementer",type:"error"},{inputs:[],name:"TransferToZeroAddress",type:"error"},{inputs:[],name:"URIQueryForNonexistentToken",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition[]",name:"claimConditions",type:"tuple[]"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"restriction",type:"bool"}],name:"OperatorRestriction",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"TokenURIRevealed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop.AllowlistProof",name:"_allowlistProof",type:"tuple"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"claimCondition",outputs:[{internalType:"uint256",name:"currentStartId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bytes",name:"key",type:"bytes"}],name:"encryptDecrypt",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"encryptedData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActiveClaimConditionId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBaseURICount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"getBatchIdAtIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"}],name:"getClaimConditionById",outputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition",name:"condition",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_batchId",type:"uint256"},{internalType:"bytes",name:"_key",type:"bytes"}],name:"getRevealURI",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"}],name:"getSupplyClaimedByWallet",outputs:[{internalType:"uint256",name:"supplyClaimedByWallet",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_saleRecipient",type:"address"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"},{internalType:"address",name:"_platformFeeRecipient",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_batchId",type:"uint256"}],name:"isEncryptedBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"string",name:"_baseURIForTokens",type:"string"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"lazyMint",outputs:[{internalType:"uint256",name:"batchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"maxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToClaim",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operatorRestriction",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"},{internalType:"bytes",name:"_key",type:"bytes"}],name:"reveal",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition[]",name:"_conditions",type:"tuple[]"},{internalType:"bool",name:"_resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_restriction",type:"bool"}],name:"setOperatorRestriction",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop.AllowlistProof",name:"_allowlistProof",type:"tuple"}],name:"verifyClaim",outputs:[{internalType:"bool",name:"isOverride",type:"bool"}],stateMutability:"view",type:"function"}],DropERC721$1=Object.freeze(Object.defineProperty({__proto__:null,default:DropERC721},Symbol.toStringTag,{value:"Module"})),DropERC721_V3=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"NFTRevealed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"baseURIIndices",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"_proofs",type:"bytes32[]"},{internalType:"uint256",name:"_proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"claimCondition",outputs:[{internalType:"uint256",name:"currentStartId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bytes",name:"key",type:"bytes"}],name:"encryptDecrypt",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"encryptedData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActiveClaimConditionId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBaseURICount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"}],name:"getClaimConditionById",outputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition",name:"condition",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"}],name:"getClaimTimestamp",outputs:[{internalType:"uint256",name:"lastClaimTimestamp",type:"uint256"},{internalType:"uint256",name:"nextValidClaimTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_saleRecipient",type:"address"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"},{internalType:"address",name:"_platformFeeRecipient",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"string",name:"_baseURIForTokens",type:"string"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"lazyMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"maxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxWalletClaimCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToClaim",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"},{internalType:"bytes",name:"_key",type:"bytes"}],name:"reveal",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"_phases",type:"tuple[]"},{internalType:"bool",name:"_resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_count",type:"uint256"}],name:"setMaxWalletClaimCount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_count",type:"uint256"}],name:"setWalletClaimCount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{internalType:"bool",name:"verifyMaxQuantityPerTransaction",type:"bool"}],name:"verifyClaim",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"bytes32[]",name:"_proofs",type:"bytes32[]"},{internalType:"uint256",name:"_proofMaxQuantityPerTransaction",type:"uint256"}],name:"verifyClaimMerkleProof",outputs:[{internalType:"bool",name:"validMerkleProof",type:"bool"},{internalType:"uint256",name:"merkleProofIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"walletClaimCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],DropERC721_V3$1=Object.freeze(Object.defineProperty({__proto__:null,default:DropERC721_V3},Symbol.toStringTag,{value:"Module"})),ERC20Abi=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],CommonWrappableSchema=z$6.object({contractAddress:AddressSchema}),ERC20WrappableSchema=CommonWrappableSchema.extend({quantity:AmountSchema}),ERC721WrappableSchema=CommonWrappableSchema.extend({tokenId:BigNumberishSchema}),ERC1155WrappableSchema=CommonWrappableSchema.extend({tokenId:BigNumberishSchema,quantity:BigNumberishSchema}),ERC20RewardSchema=ERC20WrappableSchema.omit({quantity:!0}).extend({quantityPerReward:AmountSchema}),ERC721RewardSchema=ERC721WrappableSchema,ERC1155RewardSchema=ERC1155WrappableSchema.omit({quantity:!0}).extend({quantityPerReward:BigNumberishSchema}),ERC20RewardContentsSchema=ERC20RewardSchema.extend({totalRewards:BigNumberishSchema.default("1")}),ERC721RewardContentsSchema=ERC721RewardSchema,ERC1155RewardContentsSchema=ERC1155RewardSchema.extend({totalRewards:BigNumberishSchema.default("1")});z$6.object({erc20Rewards:z$6.array(ERC20RewardSchema).default([]),erc721Rewards:z$6.array(ERC721RewardSchema).default([]),erc1155Rewards:z$6.array(ERC1155RewardSchema).default([])});const PackRewardsOutputSchema=z$6.object({erc20Rewards:z$6.array(ERC20RewardContentsSchema).default([]),erc721Rewards:z$6.array(ERC721RewardContentsSchema).default([]),erc1155Rewards:z$6.array(ERC1155RewardContentsSchema).default([])}),PackMetadataInputSchema=PackRewardsOutputSchema.extend({packMetadata:NFTInputOrUriSchema,rewardsPerPack:BigNumberishSchema.default("1"),openStartTime:RawDateSchema$1.default(new Date)});class PackVRF{constructor(tt,rt,at,st,ot){let lt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:new ContractWrapper(tt,rt,IPackVRFAbi,st);_defineProperty$4(this,"featureName",FEATURE_PACK_VRF.name),_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"chainId",void 0),_defineProperty$4(this,"events",void 0),this.contractWrapper=lt,this.storage=at,this.chainId=ot,this.events=new ContractEvents(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async open(tt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const at=await this.contractWrapper.sendTransaction("openPack",[tt,rt],{gasLimit:5e5});let st=BigNumber.from(0);try{st=this.contractWrapper.parseLogs("PackOpenRequested",at==null?void 0:at.logs)[0].args.requestId}catch{}return{receipt:at,id:st}}async claimRewards(){const tt=await this.contractWrapper.sendTransaction("claimRewards",[],{gasLimit:5e5}),rt=this.contractWrapper.parseLogs("PackOpened",tt==null?void 0:tt.logs);if(rt.length===0)throw new Error("PackOpened event not found");const at=rt[0].args.rewardUnitsDistributed;return this.parseRewards(at)}async parseRewards(tt){const rt=[],at=[],st=[];for(const ot of tt)switch(ot.tokenType){case 0:{const lt=await fetchCurrencyMetadata(this.contractWrapper.getProvider(),ot.assetContract);rt.push({contractAddress:ot.assetContract,quantityPerReward:formatUnits(ot.totalAmount,lt.decimals).toString()});break}case 1:{at.push({contractAddress:ot.assetContract,tokenId:ot.tokenId.toString()});break}case 2:{st.push({contractAddress:ot.assetContract,tokenId:ot.tokenId.toString(),quantityPerReward:ot.totalAmount.toString()});break}}return{erc20Rewards:rt,erc721Rewards:at,erc1155Rewards:st}}async addPackOpenEventListener(tt){return this.events.addEventListener("PackOpened",async rt=>{tt(rt.data.packId.toString(),rt.data.opener,await this.parseRewards(rt.data.rewardUnitsDistributed))})}async canClaimRewards(tt){const rt=tt||await this.contractWrapper.getSignerAddress();return await this.contractWrapper.readContract.canClaimRewards(rt)}async openAndClaim(tt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5e5;const st=await this.contractWrapper.sendTransaction("openPackAndClaimRewards",[tt,rt,at],{gasLimit:BigNumber.from(5e5)});let ot=BigNumber.from(0);try{ot=this.contractWrapper.parseLogs("PackOpenRequested",st==null?void 0:st.logs)[0].args.requestId}catch{}return{receipt:st,id:ot}}async getLinkBalance(){return this.getLinkContract().balanceOf(this.contractWrapper.readContract.address)}async transferLink(tt){await this.getLinkContract().transfer(this.contractWrapper.readContract.address,tt)}getLinkContract(){const tt=LINK_TOKEN_ADDRESS[this.chainId];if(!tt)throw new Error(`No LINK token address found for chainId ${this.chainId}`);const rt=new ContractWrapper(this.contractWrapper.getSignerOrProvider(),tt,ERC20Abi,this.contractWrapper.options);return new Erc20(rt,this.storage,this.chainId)}}class Pack$2 extends StandardErc1155{get vrf(){return assertEnabled(this._vrf,FEATURE_PACK_VRF)}constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st.gasless&&"openzeppelin"in st.gasless?{...st,gasless:{openzeppelin:{...st.gasless.openzeppelin,useEOAForwarder:!0}}}:st);super(ut,at,lt),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"royalties",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"erc1155",void 0),_defineProperty$4(this,"owner",void 0),_defineProperty$4(this,"_vrf",void 0),this.abi=ot,this.erc1155=new Erc1155(this.contractWrapper,this.storage,lt),this.metadata=new ContractMetadata(this.contractWrapper,PackContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,Pack$2.contractRoles),this.royalties=new ContractRoyalty(this.contractWrapper,this.metadata),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.owner=new ContractOwner(this.contractWrapper),this._vrf=this.detectVrf()}onNetworkUpdated(tt){var rt;this.contractWrapper.updateSignerOrProvider(tt),(rt=this._vrf)==null||rt.onNetworkUpdated(tt)}getAddress(){return this.contractWrapper.readContract.address}async get(tt){return this.erc1155.get(tt)}async getAll(tt){return this.erc1155.getAll(tt)}async getOwned(tt){return this.erc1155.getOwned(tt)}async getTotalCount(){return this.erc1155.totalCount()}async isTransferRestricted(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("transfer"),AddressZero)}async getPackContents(tt){const{contents:rt,perUnitAmounts:at}=await this.contractWrapper.readContract.getPackContents(tt),st=[],ot=[],lt=[];for(let ut=0;ut<rt.length;ut++){const ht=rt[ut],mt=at[ut];switch(ht.tokenType){case 0:{const bt=await fetchCurrencyMetadata(this.contractWrapper.getProvider(),ht.assetContract),vt=formatUnits(ht.totalAmount,bt.decimals);st.push({contractAddress:ht.assetContract,quantityPerReward:mt.toString(),totalRewards:BigNumber.from(vt).div(mt).toString()});break}case 1:{ot.push({contractAddress:ht.assetContract,tokenId:ht.tokenId.toString()});break}case 2:{lt.push({contractAddress:ht.assetContract,tokenId:ht.tokenId.toString(),quantityPerReward:mt.toString(),totalRewards:BigNumber.from(ht.totalAmount).div(mt).toString()});break}}}return{erc20Rewards:st,erc721Rewards:ot,erc1155Rewards:lt}}async create(tt){const rt=await this.contractWrapper.getSignerAddress();return this.createTo(rt,tt)}async addPackContents(tt,rt){const at=await this.contractWrapper.getSignerAddress(),st=PackRewardsOutputSchema.parse(rt),{contents:ot,numOfRewardUnits:lt}=await this.toPackContentArgs(st),ut=await this.contractWrapper.sendTransaction("addPackContents",[tt,ot,lt,at]),ht=this.contractWrapper.parseLogs("PackUpdated",ut==null?void 0:ut.logs);if(ht.length===0)throw new Error("PackUpdated event not found");const mt=ht[0].args.packId;return{id:mt,receipt:ut,data:()=>this.erc1155.get(mt)}}async createTo(tt,rt){const at=await uploadOrExtractURI(rt.packMetadata,this.storage),st=PackMetadataInputSchema.parse(rt),{erc20Rewards:ot,erc721Rewards:lt,erc1155Rewards:ut}=st,ht={erc20Rewards:ot,erc721Rewards:lt,erc1155Rewards:ut},{contents:mt,numOfRewardUnits:bt}=await this.toPackContentArgs(ht),vt=await this.contractWrapper.sendTransaction("createPack",[mt,bt,at,st.openStartTime,st.rewardsPerPack,tt]),At=this.contractWrapper.parseLogs("PackCreated",vt==null?void 0:vt.logs);if(At.length===0)throw new Error("PackCreated event not found");const xt=At[0].args.packId;return{id:xt,receipt:vt,data:()=>this.erc1155.get(xt)}}async open(tt){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(this._vrf)throw new Error("This contract is using Chainlink VRF, use `contract.vrf.open()` or `contract.vrf.openAndClaim()` instead");const at=await this.contractWrapper.sendTransaction("openPack",[tt,rt],{gasLimit:5e5}),st=this.contractWrapper.parseLogs("PackOpened",at==null?void 0:at.logs);if(st.length===0)throw new Error("PackOpened event not found");const ot=st[0].args.rewardUnitsDistributed,lt=[],ut=[],ht=[];for(const mt of ot)switch(mt.tokenType){case 0:{const bt=await fetchCurrencyMetadata(this.contractWrapper.getProvider(),mt.assetContract);lt.push({contractAddress:mt.assetContract,quantityPerReward:formatUnits(mt.totalAmount,bt.decimals).toString()});break}case 1:{ut.push({contractAddress:mt.assetContract,tokenId:mt.tokenId.toString()});break}case 2:{ht.push({contractAddress:mt.assetContract,tokenId:mt.tokenId.toString(),quantityPerReward:mt.totalAmount.toString()});break}}return{erc20Rewards:lt,erc721Rewards:ut,erc1155Rewards:ht}}async toPackContentArgs(tt){const rt=[],at=[],{erc20Rewards:st,erc721Rewards:ot,erc1155Rewards:lt}=tt,ut=this.contractWrapper.getProvider(),ht=await this.contractWrapper.getSignerAddress();for(const mt of st){const vt=(await normalizePriceValue(ut,mt.quantityPerReward,mt.contractAddress)).mul(mt.totalRewards);if(!await hasERC20Allowance(this.contractWrapper,mt.contractAddress,vt))throw new Error(`ERC20 token with contract address "${mt.contractAddress}" does not have enough allowance to transfer.

You can set allowance to the multiwrap contract to transfer these tokens by running:

await sdk.getToken("${mt.contractAddress}").setAllowance("${this.getAddress()}", ${vt});

`);at.push(mt.totalRewards),rt.push({assetContract:mt.contractAddress,tokenType:0,totalAmount:vt,tokenId:0})}for(const mt of ot){if(!await isTokenApprovedForTransfer(this.contractWrapper.getProvider(),this.getAddress(),mt.contractAddress,mt.tokenId,ht))throw new Error(`ERC721 token "${mt.tokenId}" with contract address "${mt.contractAddress}" is not approved for transfer.

You can give approval the multiwrap contract to transfer this token by running:

await sdk.getNFTCollection("${mt.contractAddress}").setApprovalForToken("${this.getAddress()}", ${mt.tokenId});

`);at.push("1"),rt.push({assetContract:mt.contractAddress,tokenType:1,totalAmount:1,tokenId:mt.tokenId})}for(const mt of lt){if(!await isTokenApprovedForTransfer(this.contractWrapper.getProvider(),this.getAddress(),mt.contractAddress,mt.tokenId,ht))throw new Error(`ERC1155 token "${mt.tokenId}" with contract address "${mt.contractAddress}" is not approved for transfer.

You can give approval the multiwrap contract to transfer this token by running:

await sdk.getEdition("${mt.contractAddress}").setApprovalForAll("${this.getAddress()}", true);

`);at.push(mt.totalRewards),rt.push({assetContract:mt.contractAddress,tokenType:2,totalAmount:BigNumber.from(mt.quantityPerReward).mul(BigNumber.from(mt.totalRewards)),tokenId:mt.tokenId})}return{contents:rt,numOfRewardUnits:at}}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}detectVrf(){if(detectContractFeature(this.contractWrapper,"PackVRF"))return new PackVRF(this.contractWrapper.getSignerOrProvider(),this.contractWrapper.readContract.address,this.storage,this.contractWrapper.options,this.chainId)}}_defineProperty$4(Pack$2,"contractRoles",["admin","minter","asset","transfer"]);const pack0bcaca69_esm=Object.freeze(Object.defineProperty({__proto__:null,Pack:Pack$2},Symbol.toStringTag,{value:"Module"})),Pack=[{inputs:[{internalType:"address",name:"_nativeTokenWrapper",type:"address"},{internalType:"address",name:"_trustedForwarder",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"totalPacksCreated",type:"uint256"}],name:"PackCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!0,internalType:"address",name:"opener",type:"address"},{indexed:!1,internalType:"uint256",name:"numOfPacksOpened",type:"uint256"},{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],indexed:!1,internalType:"struct ITokenBundle.Token[]",name:"rewardUnitsDistributed",type:"tuple[]"}],name:"PackOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"packId",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"totalPacksCreated",type:"uint256"}],name:"PackUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_packId",type:"uint256"},{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"_contents",type:"tuple[]"},{internalType:"uint256[]",name:"_numOfRewardUnits",type:"uint256[]"},{internalType:"address",name:"_recipient",type:"address"}],name:"addPackContents",outputs:[{internalType:"uint256",name:"packTotalSupply",type:"uint256"},{internalType:"uint256",name:"newSupplyAdded",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"canUpdatePack",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"_contents",type:"tuple[]"},{internalType:"uint256[]",name:"_numOfRewardUnits",type:"uint256[]"},{internalType:"string",name:"_packUri",type:"string"},{internalType:"uint128",name:"_openStartTimestamp",type:"uint128"},{internalType:"uint128",name:"_amountDistributedPerOpen",type:"uint128"},{internalType:"address",name:"_recipient",type:"address"}],name:"createPack",outputs:[{internalType:"uint256",name:"packId",type:"uint256"},{internalType:"uint256",name:"packTotalSupply",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_packId",type:"uint256"}],name:"getPackContents",outputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"contents",type:"tuple[]"},{internalType:"uint256[]",name:"perUnitAmounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_bundleId",type:"uint256"}],name:"getTokenCountOfBundle",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_bundleId",type:"uint256"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getTokenOfBundle",outputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_bundleId",type:"uint256"}],name:"getUriOfBundle",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155BatchReceived",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_packId",type:"uint256"},{internalType:"uint256",name:"_amountToOpen",type:"uint256"}],name:"openPack",outputs:[{components:[{internalType:"address",name:"assetContract",type:"address"},{internalType:"enum ITokenBundle.TokenType",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"totalAmount",type:"uint256"}],internalType:"struct ITokenBundle.Token[]",name:"",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],Pack$1=Object.freeze(Object.defineProperty({__proto__:null,default:Pack},Symbol.toStringTag,{value:"Module"}));class SignatureDrop$2 extends StandardErc721{constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);super(ut,at,lt),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"erc721",void 0),_defineProperty$4(this,"owner",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"sales",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"royalties",void 0),_defineProperty$4(this,"claimConditions",void 0),_defineProperty$4(this,"revealer",void 0),_defineProperty$4(this,"signature",void 0),_defineProperty$4(this,"checkout",void 0),_defineProperty$4(this,"createBatch",buildTransactionFunction(async(ht,mt)=>this.erc721.lazyMint.prepare(ht,mt))),_defineProperty$4(this,"claimTo",buildTransactionFunction(async(ht,mt,bt)=>this.erc721.claimTo.prepare(ht,mt,bt))),_defineProperty$4(this,"claim",buildTransactionFunction(async(ht,mt)=>this.erc721.claim.prepare(ht,mt))),_defineProperty$4(this,"burn",buildTransactionFunction(async ht=>this.erc721.burn.prepare(ht))),this.abi=ot,this.metadata=new ContractMetadata(this.contractWrapper,DropErc721ContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,SignatureDrop$2.contractRoles),this.royalties=new ContractRoyalty(this.contractWrapper,this.metadata),this.sales=new ContractPrimarySale(this.contractWrapper),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.erc721=new Erc721(this.contractWrapper,this.storage,lt),this.claimConditions=new DropClaimConditions(this.contractWrapper,this.metadata,this.storage),this.signature=new Erc721WithQuantitySignatureMintable(this.contractWrapper,this.storage),this.revealer=new DelayedReveal(this.contractWrapper,this.storage,FEATURE_NFT_REVEALABLE.name,()=>this.erc721.nextTokenIdToMint()),this.signature=new Erc721WithQuantitySignatureMintable(this.contractWrapper,this.storage),this.owner=new ContractOwner(this.contractWrapper),this.checkout=new PaperCheckout(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async totalSupply(){const tt=await this.totalClaimedSupply(),rt=await this.totalUnclaimedSupply();return tt.add(rt)}async getAllClaimed(tt){const rt=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),at=BigNumber.from((tt==null?void 0:tt.count)||DEFAULT_QUERY_ALL_COUNT).toNumber(),st=Math.min((await this.totalClaimedSupply()).toNumber(),rt+at);return await Promise.all(Array.from(Array(st).keys()).map(ot=>this.get(ot.toString())))}async getAllUnclaimed(tt){const rt=BigNumber.from((tt==null?void 0:tt.start)||0).toNumber(),at=BigNumber.from((tt==null?void 0:tt.count)||DEFAULT_QUERY_ALL_COUNT).toNumber(),st=BigNumber.from(Math.max((await this.totalClaimedSupply()).toNumber(),rt)),ot=BigNumber.from(Math.min((await this.contractWrapper.readContract.nextTokenIdToMint()).toNumber(),st.toNumber()+at));return await Promise.all(Array.from(Array(ot.sub(st).toNumber()).keys()).map(lt=>this.erc721.getTokenMetadata(st.add(lt).toString())))}async totalClaimedSupply(){return this.erc721.totalClaimedSupply()}async totalUnclaimedSupply(){return this.erc721.totalUnclaimedSupply()}async isTransferRestricted(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("transfer"),AddressZero)}async getClaimTransaction(tt,rt,at){return this.erc721.getClaimTransaction(tt,rt,at)}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(SignatureDrop$2,"contractRoles",["admin","minter","transfer"]);const signatureDropE5f1829e_esm=Object.freeze(Object.defineProperty({__proto__:null,SignatureDrop:SignatureDrop$2},Symbol.toStringTag,{value:"Module"})),SignatureDrop=[{inputs:[],name:"ApprovalCallerNotOwnerNorApproved",type:"error"},{inputs:[],name:"ApprovalQueryForNonexistentToken",type:"error"},{inputs:[],name:"ApprovalToCurrentOwner",type:"error"},{inputs:[],name:"ApproveToCaller",type:"error"},{inputs:[],name:"BalanceQueryForZeroAddress",type:"error"},{inputs:[],name:"MintToZeroAddress",type:"error"},{inputs:[],name:"MintZeroQuantity",type:"error"},{inputs:[],name:"OwnerQueryForNonexistentToken",type:"error"},{inputs:[],name:"TransferCallerNotOwnerNorApproved",type:"error"},{inputs:[],name:"TransferFromIncorrectOwner",type:"error"},{inputs:[],name:"TransferToNonERC721ReceiverImplementer",type:"error"},{inputs:[],name:"TransferToZeroAddress",type:"error"},{inputs:[],name:"URIQueryForNonexistentToken",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"TokenURIRevealed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ISignatureMintERC721.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropSinglePhase.AllowlistProof",name:"_allowlistProof",type:"tuple"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"claimCondition",outputs:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bytes",name:"key",type:"bytes"}],name:"encryptDecrypt",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"encryptedData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBaseURICount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"getBatchIdAtIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_batchId",type:"uint256"},{internalType:"bytes",name:"_key",type:"bytes"}],name:"getRevealURI",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"}],name:"getSupplyClaimedByWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_saleRecipient",type:"address"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"},{internalType:"address",name:"_platformFeeRecipient",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_batchId",type:"uint256"}],name:"isEncryptedBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"string",name:"_baseURIForTokens",type:"string"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"lazyMint",outputs:[{internalType:"uint256",name:"batchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"address",name:"signer",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"},{internalType:"bytes",name:"_key",type:"bytes"}],name:"reveal",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition",name:"_condition",type:"tuple"},{internalType:"bool",name:"_resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"success",type:"bool"},{internalType:"address",name:"signer",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropSinglePhase.AllowlistProof",name:"_allowlistProof",type:"tuple"}],name:"verifyClaim",outputs:[{internalType:"bool",name:"isOverride",type:"bool"}],stateMutability:"view",type:"function"}],SignatureDrop$1=Object.freeze(Object.defineProperty({__proto__:null,default:SignatureDrop},Symbol.toStringTag,{value:"Module"})),SignatureDrop_V4=[{inputs:[],name:"ApprovalCallerNotOwnerNorApproved",type:"error"},{inputs:[],name:"ApprovalQueryForNonexistentToken",type:"error"},{inputs:[],name:"ApprovalToCurrentOwner",type:"error"},{inputs:[],name:"ApproveToCaller",type:"error"},{inputs:[],name:"BalanceQueryForZeroAddress",type:"error"},{inputs:[],name:"MintToZeroAddress",type:"error"},{inputs:[],name:"MintZeroQuantity",type:"error"},{inputs:[],name:"OwnerQueryForNonexistentToken",type:"error"},{inputs:[],name:"TransferCallerNotOwnerNorApproved",type:"error"},{inputs:[],name:"TransferFromIncorrectOwner",type:"error"},{inputs:[],name:"TransferToNonERC721ReceiverImplementer",type:"error"},{inputs:[],name:"TransferToZeroAddress",type:"error"},{inputs:[],name:"URIQueryForNonexistentToken",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IClaimCondition_V1.ClaimCondition",name:"condition",type:"tuple"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"string",name:"revealedURI",type:"string"}],name:"TokenURIRevealed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"},{indexed:!1,internalType:"bytes",name:"encryptedBaseURI",type:"bytes"}],name:"TokensLazyMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenIdMinted",type:"uint256"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ISignatureMintERC721.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"maxQuantityInAllowlist",type:"uint256"}],internalType:"struct IDropSinglePhase_V1.AllowlistProof",name:"_allowlistProof",type:"tuple"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"claimCondition",outputs:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"bytes",name:"key",type:"bytes"}],name:"encryptDecrypt",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"encryptedData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBaseURICount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"getBatchIdAtIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"}],name:"getClaimTimestamp",outputs:[{internalType:"uint256",name:"lastClaimedAt",type:"uint256"},{internalType:"uint256",name:"nextValidClaimTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_batchId",type:"uint256"},{internalType:"bytes",name:"_key",type:"bytes"}],name:"getRevealURI",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_saleRecipient",type:"address"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"},{internalType:"address",name:"_platformFeeRecipient",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_batchId",type:"uint256"}],name:"isEncryptedBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"string",name:"_baseURIForTokens",type:"string"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"lazyMint",outputs:[{internalType:"uint256",name:"batchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"mintWithSignature",outputs:[{internalType:"address",name:"signer",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"},{internalType:"bytes",name:"_key",type:"bytes"}],name:"reveal",outputs:[{internalType:"string",name:"revealedURI",type:"string"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IClaimCondition_V1.ClaimCondition",name:"_condition",type:"tuple"},{internalType:"bool",name:"_resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint256",name:"royaltyBps",type:"uint256"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ISignatureMintERC721.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"success",type:"bool"},{internalType:"address",name:"signer",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{internalType:"bool",name:"verifyMaxQuantityPerTransaction",type:"bool"}],name:"verifyClaim",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"maxQuantityInAllowlist",type:"uint256"}],internalType:"struct IDropSinglePhase_V1.AllowlistProof",name:"_allowlistProof",type:"tuple"}],name:"verifyClaimMerkleProof",outputs:[{internalType:"bool",name:"validMerkleProof",type:"bool"},{internalType:"uint256",name:"merkleProofIndex",type:"uint256"}],stateMutability:"view",type:"function"}],SignatureDrop_V4$1=Object.freeze(Object.defineProperty({__proto__:null,default:SignatureDrop_V4},Symbol.toStringTag,{value:"Module"}));class Split$2{get chainId(){return this._chainId}constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"_chainId",void 0),this._chainId=lt,this.abi=ot,this.contractWrapper=ut,this.storage=at,this.metadata=new ContractMetadata(this.contractWrapper,SplitsContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,Split$2.contractRoles),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async getAllRecipients(){const tt=[];let rt=BigNumber.from(0);const at=await this.contractWrapper.readContract.payeeCount();for(;rt.lt(at);)try{const st=await this.contractWrapper.readContract.payee(rt);tt.push(await this.getRecipientSplitPercentage(st)),rt=rt.add(1)}catch(st){if("method"in st&&st.method.toLowerCase().includes("payee(uint256)"))break;throw st}return tt}async balanceOfAllRecipients(){const tt=await this.getAllRecipients(),rt={};for(const at of tt)rt[at.address]=await this.balanceOf(at.address);return rt}async balanceOfTokenAllRecipients(tt){const rt=await this.getAllRecipients(),at={};for(const st of rt)at[st.address]=await this.balanceOfToken(st.address,tt);return at}async balanceOf(tt){const rt=await this.contractWrapper.readContract.provider.getBalance(this.getAddress()),at=await this.contractWrapper.readContract["totalReleased()"](),st=rt.add(at);return this._pendingPayment(tt,st,await this.contractWrapper.readContract["released(address)"](tt))}async balanceOfToken(tt,rt){const st=await new Contract(rt,ERC20Abi$1,this.contractWrapper.getProvider()).balanceOf(this.getAddress()),ot=await this.contractWrapper.readContract["totalReleased(address)"](rt),lt=st.add(ot),ut=await this._pendingPayment(tt,lt,await this.contractWrapper.readContract["released(address,address)"](rt,tt));return await fetchCurrencyValue(this.contractWrapper.getProvider(),rt,ut)}async getRecipientSplitPercentage(tt){const[rt,at]=await Promise.all([this.contractWrapper.readContract.totalShares(),this.contractWrapper.readContract.shares(tt)]);return{address:tt,splitPercentage:at.mul(BigNumber.from(1e7)).div(rt).toNumber()/1e5}}async withdraw(tt){return{receipt:await this.contractWrapper.sendTransaction("release(address)",[tt])}}async withdrawToken(tt,rt){return{receipt:await this.contractWrapper.sendTransaction("release(address,address)",[rt,tt])}}async distribute(){return{receipt:await this.contractWrapper.sendTransaction("distribute()",[])}}async distributeToken(tt){return{receipt:await this.contractWrapper.sendTransaction("distribute(address)",[tt])}}async _pendingPayment(tt,rt,at){return rt.mul(await this.contractWrapper.readContract.shares(tt)).div(await this.contractWrapper.readContract.totalShares()).sub(at)}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(Split$2,"contractRoles",["admin"]);const splitCc64330a_esm=Object.freeze(Object.defineProperty({__proto__:null,Split:Split$2},Symbol.toStringTag,{value:"Module"})),Split=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"contract IERC20Upgradeable",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"ERC20PaymentReleased",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"shares",type:"uint256"}],name:"PayeeAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"PaymentReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"PaymentReleased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"token",type:"address"}],name:"distribute",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"distribute",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address[]",name:"_payees",type:"address[]"},{internalType:"uint256[]",name:"_shares",type:"uint256[]"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"payee",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"payeeCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"releasable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"token",type:"address"},{internalType:"address",name:"account",type:"address"}],name:"releasable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address payable",name:"account",type:"address"}],name:"release",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"token",type:"address"},{internalType:"address",name:"account",type:"address"}],name:"release",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"token",type:"address"},{internalType:"address",name:"account",type:"address"}],name:"released",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"released",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"shares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"token",type:"address"}],name:"totalReleased",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalReleased",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],Split$1=Object.freeze(Object.defineProperty({__proto__:null,default:Split},Symbol.toStringTag,{value:"Module"}));class TokenDrop extends StandardErc20{constructor(tt,rt,at){var st;let ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},lt=arguments.length>4?arguments[4]:void 0,ut=arguments.length>5?arguments[5]:void 0,ht=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,lt,ot);super(ht,at,ut),st=this,_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"sales",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"claimConditions",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"claim",buildTransactionFunction(async function(mt){let bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return st.claimTo.prepare(await st.contractWrapper.getSignerAddress(),mt,bt)})),_defineProperty$4(this,"claimTo",buildTransactionFunction(async function(mt,bt){let vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return st.erc20.claimTo.prepare(mt,bt,{checkERC20Allowance:vt})})),_defineProperty$4(this,"delegateTo",buildTransactionFunction(async mt=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"delegate",args:[mt]}))),_defineProperty$4(this,"burnTokens",buildTransactionFunction(async mt=>this.erc20.burn.prepare(mt))),_defineProperty$4(this,"burnFrom",buildTransactionFunction(async(mt,bt)=>this.erc20.burnFrom.prepare(mt,bt))),this.abi=lt,this.metadata=new ContractMetadata(this.contractWrapper,DropErc20ContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,TokenDrop.contractRoles),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.sales=new ContractPrimarySale(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.claimConditions=new DropClaimConditions(this.contractWrapper,this.metadata,this.storage)}async getVoteBalance(){return await this.getVoteBalanceOf(await this.contractWrapper.getSignerAddress())}async getVoteBalanceOf(tt){return await this.erc20.getValue(await this.contractWrapper.readContract.getVotes(tt))}async getDelegation(){return await this.getDelegationOf(await this.contractWrapper.getSignerAddress())}async getDelegationOf(tt){return await this.contractWrapper.readContract.delegates(tt)}async isTransferRestricted(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("transfer"),AddressZero)}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(TokenDrop,"contractRoles",["admin","transfer"]);const tokenDrop92db4df4_esm=Object.freeze(Object.defineProperty({__proto__:null,TokenDrop},Symbol.toStringTag,{value:"Module"})),DropERC20=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],indexed:!1,internalType:"struct IClaimCondition.ClaimCondition[]",name:"claimConditions",type:"tuple[]"},{indexed:!1,internalType:"bool",name:"resetEligibility",type:"bool"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"delegator",type:"address"},{indexed:!0,internalType:"address",name:"fromDelegate",type:"address"},{indexed:!0,internalType:"address",name:"toDelegate",type:"address"}],name:"DelegateChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"delegate",type:"address"},{indexed:!1,internalType:"uint256",name:"previousBalance",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"DelegateVotesChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"startTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint32",name:"pos",type:"uint32"}],name:"checkpoints",outputs:[{components:[{internalType:"uint32",name:"fromBlock",type:"uint32"},{internalType:"uint224",name:"votes",type:"uint224"}],internalType:"struct ERC20VotesUpgradeable.Checkpoint",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop.AllowlistProof",name:"_allowlistProof",type:"tuple"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"claimCondition",outputs:[{internalType:"uint256",name:"currentStartId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"}],name:"delegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"delegateBySig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"delegates",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActiveClaimConditionId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"}],name:"getClaimConditionById",outputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition",name:"condition",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getPastTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getPastVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"member",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"}],name:"getSupplyClaimedByWallet",outputs:[{internalType:"uint256",name:"supplyClaimedByWallet",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRoleWithSwitch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_saleRecipient",type:"address"},{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint128",name:"_platformFeeBps",type:"uint128"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"numCheckpoints",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"string",name:"metadata",type:"string"}],internalType:"struct IClaimCondition.ClaimCondition[]",name:"_conditions",type:"tuple[]"},{internalType:"bool",name:"_resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{components:[{internalType:"bytes32[]",name:"proof",type:"bytes32[]"},{internalType:"uint256",name:"quantityLimitPerWallet",type:"uint256"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDrop.AllowlistProof",name:"_allowlistProof",type:"tuple"}],name:"verifyClaim",outputs:[{internalType:"bool",name:"isOverride",type:"bool"}],stateMutability:"view",type:"function"}],DropERC20$1=Object.freeze(Object.defineProperty({__proto__:null,default:DropERC20},Symbol.toStringTag,{value:"Module"})),DropERC20_V2=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],indexed:!1,internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"claimConditions",type:"tuple[]"}],name:"ClaimConditionsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"prevURI",type:"string"},{indexed:!1,internalType:"string",name:"newURI",type:"string"}],name:"ContractURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"delegator",type:"address"},{indexed:!0,internalType:"address",name:"fromDelegate",type:"address"},{indexed:!0,internalType:"address",name:"toDelegate",type:"address"}],name:"DelegateChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"delegate",type:"address"},{indexed:!1,internalType:"uint256",name:"previousBalance",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"DelegateVotesChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxTotalSupply",type:"uint256"}],name:"MaxTotalSupplyUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"MaxWalletClaimCountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"claimConditionIndex",type:"uint256"},{indexed:!0,internalType:"address",name:"claimer",type:"address"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityClaimed",type:"uint256"}],name:"TokensClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"}],name:"WalletClaimCountUpdated",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint32",name:"pos",type:"uint32"}],name:"checkpoints",outputs:[{components:[{internalType:"uint32",name:"fromBlock",type:"uint32"},{internalType:"uint224",name:"votes",type:"uint224"}],internalType:"struct ERC20VotesUpgradeable.Checkpoint",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_receiver",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{internalType:"bytes32[]",name:"_proofs",type:"bytes32[]"},{internalType:"uint256",name:"_proofMaxQuantityPerTransaction",type:"uint256"}],name:"claim",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"claimCondition",outputs:[{internalType:"uint256",name:"currentStartId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"}],name:"delegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"delegateBySig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"delegates",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActiveClaimConditionId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"}],name:"getClaimConditionById",outputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition",name:"condition",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"}],name:"getClaimTimestamp",outputs:[{internalType:"uint256",name:"lastClaimTimestamp",type:"uint256"},{internalType:"uint256",name:"nextValidClaimTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getPastTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getPastVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_primarySaleRecipient",type:"address"},{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxWalletClaimCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"numCheckpoints",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"startTimestamp",type:"uint256"},{internalType:"uint256",name:"maxClaimableSupply",type:"uint256"},{internalType:"uint256",name:"supplyClaimed",type:"uint256"},{internalType:"uint256",name:"quantityLimitPerTransaction",type:"uint256"},{internalType:"uint256",name:"waitTimeInSecondsBetweenClaims",type:"uint256"},{internalType:"bytes32",name:"merkleRoot",type:"bytes32"},{internalType:"uint256",name:"pricePerToken",type:"uint256"},{internalType:"address",name:"currency",type:"address"}],internalType:"struct IDropClaimCondition_V2.ClaimCondition[]",name:"_phases",type:"tuple[]"},{internalType:"bool",name:"_resetClaimEligibility",type:"bool"}],name:"setClaimConditions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_count",type:"uint256"}],name:"setMaxWalletClaimCount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_count",type:"uint256"}],name:"setWalletClaimCount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"address",name:"_currency",type:"address"},{internalType:"uint256",name:"_pricePerToken",type:"uint256"},{internalType:"bool",name:"verifyMaxQuantityPerTransaction",type:"bool"}],name:"verifyClaim",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_conditionId",type:"uint256"},{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_quantity",type:"uint256"},{internalType:"bytes32[]",name:"_proofs",type:"bytes32[]"},{internalType:"uint256",name:"_proofMaxQuantityPerTransaction",type:"uint256"}],name:"verifyClaimMerkleProof",outputs:[{internalType:"bool",name:"validMerkleProof",type:"bool"},{internalType:"uint256",name:"merkleProofIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"walletClaimCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],DropERC20_V2$1=Object.freeze(Object.defineProperty({__proto__:null,default:DropERC20_V2},Symbol.toStringTag,{value:"Module"}));class Token extends StandardErc20{constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);super(ut,at,lt),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"roles",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"history",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"platformFees",void 0),_defineProperty$4(this,"sales",void 0),_defineProperty$4(this,"signature",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"mint",buildTransactionFunction(async ht=>this.erc20.mint.prepare(ht))),_defineProperty$4(this,"mintTo",buildTransactionFunction(async(ht,mt)=>this.erc20.mintTo.prepare(ht,mt))),_defineProperty$4(this,"mintBatchTo",buildTransactionFunction(async ht=>this.erc20.mintBatchTo.prepare(ht))),_defineProperty$4(this,"delegateTo",buildTransactionFunction(async ht=>Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:"delegate",args:[ht]}))),_defineProperty$4(this,"burn",buildTransactionFunction(ht=>this.erc20.burn.prepare(ht))),_defineProperty$4(this,"burnFrom",buildTransactionFunction(async(ht,mt)=>this.erc20.burnFrom.prepare(ht,mt))),this.abi=ot,this.metadata=new ContractMetadata(this.contractWrapper,TokenErc20ContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.roles=new ContractRoles(this.contractWrapper,Token.contractRoles),this.sales=new ContractPrimarySale(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.history=new TokenERC20History(this.contractWrapper,this.events),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.platformFees=new ContractPlatformFee(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper),this.signature=new Erc20SignatureMintable(this.contractWrapper,this.roles)}async getVoteBalance(){return await this.getVoteBalanceOf(await this.contractWrapper.getSignerAddress())}async getVoteBalanceOf(tt){return await this.erc20.getValue(await this.contractWrapper.readContract.getVotes(tt))}async getDelegation(){return await this.getDelegationOf(await this.contractWrapper.getSignerAddress())}async getDelegationOf(tt){return await this.contractWrapper.readContract.delegates(tt)}async isTransferRestricted(){return!await this.contractWrapper.readContract.hasRole(getRoleHash("transfer"),AddressZero)}async getMintTransaction(tt,rt){return this.erc20.getMintTransaction(tt,rt)}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}_defineProperty$4(Token,"contractRoles",["admin","minter","transfer"]);const token97d07107_esm=Object.freeze(Object.defineProperty({__proto__:null,Token},Symbol.toStringTag,{value:"Module"})),TokenERC20=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"delegator",type:"address"},{indexed:!0,internalType:"address",name:"fromDelegate",type:"address"},{indexed:!0,internalType:"address",name:"toDelegate",type:"address"}],name:"DelegateChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"delegate",type:"address"},{indexed:!1,internalType:"uint256",name:"previousBalance",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"DelegateVotesChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"platformFeeRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"PlatformFeeInfoUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"PrimarySaleRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{indexed:!1,internalType:"uint256",name:"quantityMinted",type:"uint256"}],name:"TokensMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"signer",type:"address"},{indexed:!0,internalType:"address",name:"mintedTo",type:"address"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],indexed:!1,internalType:"struct ITokenERC20.MintRequest",name:"mintRequest",type:"tuple"}],name:"TokensMintedWithSignature",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint32",name:"pos",type:"uint32"}],name:"checkpoints",outputs:[{components:[{internalType:"uint32",name:"fromBlock",type:"uint32"},{internalType:"uint224",name:"votes",type:"uint224"}],internalType:"struct ERC20VotesUpgradeable.Checkpoint",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"}],name:"delegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"delegateBySig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"delegates",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getPastTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getPastVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlatformFeeInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_primarySaleRecipient",type:"address"},{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC20.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"mintWithSignature",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"numCheckpoints",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"primarySaleRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_platformFeeRecipient",type:"address"},{internalType:"uint256",name:"_platformFeeBps",type:"uint256"}],name:"setPlatformFeeInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleRecipient",type:"address"}],name:"setPrimarySaleRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"primarySaleRecipient",type:"address"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"uint128",name:"validityStartTimestamp",type:"uint128"},{internalType:"uint128",name:"validityEndTimestamp",type:"uint128"},{internalType:"bytes32",name:"uid",type:"bytes32"}],internalType:"struct ITokenERC20.MintRequest",name:"_req",type:"tuple"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"verify",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],TokenERC20$1=Object.freeze(Object.defineProperty({__proto__:null,default:TokenERC20},Symbol.toStringTag,{value:"Module"}));class Vote{get chainId(){return this._chainId}constructor(tt,rt,at){let st=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ot=arguments.length>4?arguments[4]:void 0,lt=arguments.length>5?arguments[5]:void 0,ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:new ContractWrapper(tt,rt,ot,st);_defineProperty$4(this,"contractWrapper",void 0),_defineProperty$4(this,"storage",void 0),_defineProperty$4(this,"abi",void 0),_defineProperty$4(this,"metadata",void 0),_defineProperty$4(this,"app",void 0),_defineProperty$4(this,"encoder",void 0),_defineProperty$4(this,"estimator",void 0),_defineProperty$4(this,"events",void 0),_defineProperty$4(this,"interceptor",void 0),_defineProperty$4(this,"_chainId",void 0),this._chainId=lt,this.abi=ot,this.contractWrapper=ut,this.storage=at,this.metadata=new ContractMetadata(this.contractWrapper,VoteContractSchema,this.storage),this.app=new ContractAppURI(this.contractWrapper,this.metadata,this.storage),this.encoder=new ContractEncoder(this.contractWrapper),this.estimator=new GasCostEstimator(this.contractWrapper),this.events=new ContractEvents(this.contractWrapper),this.interceptor=new ContractInterceptor(this.contractWrapper)}onNetworkUpdated(tt){this.contractWrapper.updateSignerOrProvider(tt)}getAddress(){return this.contractWrapper.readContract.address}async get(tt){const at=(await this.getAll()).filter(st=>st.proposalId.eq(BigNumber.from(tt)));if(at.length===0)throw new Error("proposal not found");return at[0]}async getAll(){return Promise.all((await this.contractWrapper.readContract.getAllProposals()).map(async tt=>({proposalId:tt.proposalId,proposer:tt.proposer,description:tt.description,startBlock:tt.startBlock,endBlock:tt.endBlock,state:await this.contractWrapper.readContract.state(tt.proposalId),votes:await this.getProposalVotes(tt.proposalId),executions:tt[3].map((rt,at)=>({toAddress:tt.targets[at],nativeTokenValue:rt,transactionData:tt.calldatas[at]}))})))}async getProposalVotes(tt){const rt=await this.contractWrapper.readContract.proposalVotes(tt);return[{type:VoteType.Against,label:"Against",count:rt.againstVotes},{type:VoteType.For,label:"For",count:rt.forVotes},{type:VoteType.Abstain,label:"Abstain",count:rt.abstainVotes}]}async hasVoted(tt,rt){return rt||(rt=await this.contractWrapper.getSignerAddress()),this.contractWrapper.readContract.hasVoted(tt,rt)}async canExecute(tt){await this.ensureExists(tt);const rt=await this.get(tt),at=rt.executions.map(ut=>ut.toAddress),st=rt.executions.map(ut=>ut.nativeTokenValue),ot=rt.executions.map(ut=>ut.transactionData),lt=id(rt.description);try{return await this.contractWrapper.callStatic().execute(at,st,ot,lt),!0}catch{return!1}}async balance(){const tt=await this.contractWrapper.readContract.provider.getBalance(this.contractWrapper.readContract.address);return{name:"",symbol:"",decimals:18,value:tt,displayValue:formatUnits(tt,18)}}async balanceOfToken(tt){const rt=new Contract(tt,ERC20Abi$1,this.contractWrapper.getProvider());return await fetchCurrencyValue(this.contractWrapper.getProvider(),tt,await rt.balanceOf(this.contractWrapper.readContract.address))}async ensureExists(tt){try{await this.contractWrapper.readContract.state(tt)}catch{throw Error(`Proposal ${tt} not found`)}}async settings(){const[tt,rt,at,st,ot]=await Promise.all([this.contractWrapper.readContract.votingDelay(),this.contractWrapper.readContract.votingPeriod(),this.contractWrapper.readContract.token(),this.contractWrapper.readContract["quorumNumerator()"](),this.contractWrapper.readContract.proposalThreshold()]),lt=await fetchCurrencyMetadata(this.contractWrapper.getProvider(),at);return{votingDelay:tt.toString(),votingPeriod:rt.toString(),votingTokenAddress:at,votingTokenMetadata:lt,votingQuorumFraction:st.toString(),proposalTokenThreshold:ot.toString()}}async propose(tt,rt){rt||(rt=[{toAddress:this.contractWrapper.readContract.address,nativeTokenValue:0,transactionData:"0x"}]);const at=rt.map(ht=>ht.toAddress),st=rt.map(ht=>ht.nativeTokenValue),ot=rt.map(ht=>ht.transactionData),lt=await this.contractWrapper.sendTransaction("propose",[at,st,ot,tt]);return{id:this.contractWrapper.parseLogs("ProposalCreated",lt==null?void 0:lt.logs)[0].args.proposalId,receipt:lt}}async vote(tt,rt){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return await this.ensureExists(tt),{receipt:await this.contractWrapper.sendTransaction("castVoteWithReason",[tt,rt,at])}}async execute(tt){await this.ensureExists(tt);const rt=await this.get(tt),at=rt.executions.map(ut=>ut.toAddress),st=rt.executions.map(ut=>ut.nativeTokenValue),ot=rt.executions.map(ut=>ut.transactionData),lt=id(rt.description);return{receipt:await this.contractWrapper.sendTransaction("execute",[at,st,ot,lt])}}async prepare(tt,rt,at){return Transaction.fromContractWrapper({contractWrapper:this.contractWrapper,method:tt,args:rt,overrides:at})}async call(tt){for(var rt=arguments.length,at=new Array(rt>1?rt-1:0),st=1;st<rt;st++)at[st-1]=arguments[st];return this.contractWrapper.call(tt,...at)}}const voteCc8908d9_esm=Object.freeze(Object.defineProperty({__proto__:null,Vote},Symbol.toStringTag,{value:"Module"})),VoteERC20=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"Empty",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"proposalId",type:"uint256"}],name:"ProposalCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"address",name:"proposer",type:"address"},{indexed:!1,internalType:"address[]",name:"targets",type:"address[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"},{indexed:!1,internalType:"string[]",name:"signatures",type:"string[]"},{indexed:!1,internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{indexed:!1,internalType:"uint256",name:"startBlock",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endBlock",type:"uint256"},{indexed:!1,internalType:"string",name:"description",type:"string"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"proposalId",type:"uint256"}],name:"ProposalExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldProposalThreshold",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newProposalThreshold",type:"uint256"}],name:"ProposalThresholdSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldQuorumNumerator",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newQuorumNumerator",type:"uint256"}],name:"QuorumNumeratorUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"uint8",name:"support",type:"uint8"},{indexed:!1,internalType:"uint256",name:"weight",type:"uint256"},{indexed:!1,internalType:"string",name:"reason",type:"string"}],name:"VoteCast",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"uint8",name:"support",type:"uint8"},{indexed:!1,internalType:"uint256",name:"weight",type:"uint256"},{indexed:!1,internalType:"string",name:"reason",type:"string"},{indexed:!1,internalType:"bytes",name:"params",type:"bytes"}],name:"VoteCastWithParams",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldVotingDelay",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newVotingDelay",type:"uint256"}],name:"VotingDelaySet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldVotingPeriod",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newVotingPeriod",type:"uint256"}],name:"VotingPeriodSet",type:"event"},{inputs:[],name:"BALLOT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"COUNTING_MODE",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"EXTENDED_BALLOT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"uint8",name:"support",type:"uint8"}],name:"castVote",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"uint8",name:"support",type:"uint8"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"castVoteBySig",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"uint8",name:"support",type:"uint8"},{internalType:"string",name:"reason",type:"string"}],name:"castVoteWithReason",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"uint8",name:"support",type:"uint8"},{internalType:"string",name:"reason",type:"string"},{internalType:"bytes",name:"params",type:"bytes"}],name:"castVoteWithReasonAndParams",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"uint8",name:"support",type:"uint8"},{internalType:"string",name:"reason",type:"string"},{internalType:"bytes",name:"params",type:"bytes"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"castVoteWithReasonAndParamsBySig",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{internalType:"bytes32",name:"descriptionHash",type:"bytes32"}],name:"execute",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getAllProposals",outputs:[{components:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"address",name:"proposer",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"string[]",name:"signatures",type:"string[]"},{internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{internalType:"uint256",name:"startBlock",type:"uint256"},{internalType:"uint256",name:"endBlock",type:"uint256"},{internalType:"string",name:"description",type:"string"}],internalType:"struct VoteERC20.Proposal[]",name:"allProposals",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"bytes",name:"params",type:"bytes"}],name:"getVotesWithParams",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"hasVoted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{internalType:"bytes32",name:"descriptionHash",type:"bytes32"}],name:"hashProposal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_initialVotingDelay",type:"uint256"},{internalType:"uint256",name:"_initialVotingPeriod",type:"uint256"},{internalType:"uint256",name:"_initialProposalThreshold",type:"uint256"},{internalType:"uint256",name:"_initialVoteQuorumFraction",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155BatchReceived",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"proposalDeadline",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposalIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"proposalSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposalThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"proposalVotes",outputs:[{internalType:"uint256",name:"againstVotes",type:"uint256"},{internalType:"uint256",name:"forVotes",type:"uint256"},{internalType:"uint256",name:"abstainVotes",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"address",name:"proposer",type:"address"},{internalType:"uint256",name:"startBlock",type:"uint256"},{internalType:"uint256",name:"endBlock",type:"uint256"},{internalType:"string",name:"description",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{internalType:"string",name:"description",type:"string"}],name:"propose",outputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"quorum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"quorumDenominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"quorumNumerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"quorumNumerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"relay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newProposalThreshold",type:"uint256"}],name:"setProposalThreshold",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newVotingDelay",type:"uint256"}],name:"setVotingDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newVotingPeriod",type:"uint256"}],name:"setVotingPeriod",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"state",outputs:[{internalType:"enum IGovernorUpgradeable.ProposalState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IVotesUpgradeable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newQuorumNumerator",type:"uint256"}],name:"updateQuorumNumerator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"votingDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"votingPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],VoteERC20$1=Object.freeze(Object.defineProperty({__proto__:null,default:VoteERC20},Symbol.toStringTag,{value:"Module"}));function _toPrimitive(it,tt){if(typeof it!="object"||it===null)return it;var rt=it[Symbol.toPrimitive];if(rt!==void 0){var at=rt.call(it,tt||"default");if(typeof at!="object")return at;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(it)}function _toPropertyKey(it){var tt=_toPrimitive(it,"string");return typeof tt=="symbol"?tt:String(tt)}function _defineProperty(it,tt,rt){return tt=_toPropertyKey(tt),tt in it?Object.defineProperty(it,tt,{value:rt,enumerable:!0,configurable:!0,writable:!0}):it[tt]=rt,it}const _abi=[{inputs:[{internalType:"address",name:"_logic",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],stateMutability:"payable",type:"constructor"},{stateMutability:"payable",type:"fallback"},{stateMutability:"payable",type:"receive"}],_bytecode="0x60806040526040516106ab3803806106ab83398101604081905261002291610261565b61004d60017f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbd61032f565b6000805160206106648339815191521461006957610069610354565b8161008e60008051602061066483398151915260001b6100d060201b6100521760201c565b80546001600160a01b0319166001600160a01b03929092169190911790558051156100c9576100c782826100d360201b6100551760201c565b505b50506103b9565b90565b60606100f88383604051806060016040528060278152602001610684602791396100ff565b9392505050565b60606001600160a01b0384163b61016c5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a2064656c65676174652063616c6c20746f206e6f6e2d636f6044820152651b9d1c9858dd60d21b60648201526084015b60405180910390fd5b600080856001600160a01b031685604051610187919061036a565b600060405180830381855af49150503d80600081146101c2576040519150601f19603f3d011682016040523d82523d6000602084013e6101c7565b606091505b5090925090506101d88282866101e2565b9695505050505050565b606083156101f15750816100f8565b8251156102015782518084602001fd5b8160405162461bcd60e51b81526004016101639190610386565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561024c578181015183820152602001610234565b8381111561025b576000848401525b50505050565b6000806040838503121561027457600080fd5b82516001600160a01b038116811461028b57600080fd5b60208401519092506001600160401b03808211156102a857600080fd5b818501915085601f8301126102bc57600080fd5b8151818111156102ce576102ce61021b565b604051601f8201601f19908116603f011681019083821181831017156102f6576102f661021b565b8160405282815288602084870101111561030f57600080fd5b610320836020830160208801610231565b80955050505050509250929050565b60008282101561034f57634e487b7160e01b600052601160045260246000fd5b500390565b634e487b7160e01b600052600160045260246000fd5b6000825161037c818460208701610231565b9190910192915050565b60208152600082518060208401526103a5816040850160208701610231565b601f01601f19169190910160400192915050565b61029c806103c86000396000f3fe60806040523661001357610011610017565b005b6100115b61005061004b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc546001600160a01b031690565b610081565b565b90565b606061007a8383604051806060016040528060278152602001610240602791396100a5565b9392505050565b3660008037600080366000845af43d6000803e8080156100a0573d6000f35b3d6000fd5b60606001600160a01b0384163b6101125760405162461bcd60e51b815260206004820152602660248201527f416464726573733a2064656c65676174652063616c6c20746f206e6f6e2d636f6044820152651b9d1c9858dd60d21b60648201526084015b60405180910390fd5b600080856001600160a01b03168560405161012d91906101f0565b600060405180830381855af49150503d8060008114610168576040519150601f19603f3d011682016040523d82523d6000602084013e61016d565b606091505b509150915061017d828286610187565b9695505050505050565b6060831561019657508161007a565b8251156101a65782518084602001fd5b8160405162461bcd60e51b8152600401610109919061020c565b60005b838110156101db5781810151838201526020016101c3565b838111156101ea576000848401525b50505050565b600082516102028184602087016101c0565b9190910192915050565b602081526000825180602084015261022b8160408501602087016101c0565b601f01601f1916919091016040019291505056fe416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c6564a26469706673582212204937a0e09cafeb6e415715660a96a2b11857f3d8a0631bca133280d3480d69a564736f6c634300080c0033360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c6564",isSuperArgs=it=>it.length>1;class TWProxy__factory extends ContractFactory$1{constructor(){for(var tt=arguments.length,rt=new Array(tt),at=0;at<tt;at++)rt[at]=arguments[at];isSuperArgs(rt)?super(...rt):super(_abi,_bytecode,rt[0])}deploy(tt,rt,at){return super.deploy(tt,rt,at||{})}getDeployTransaction(tt,rt,at){return super.getDeployTransaction(tt,rt,at||{})}attach(tt){return super.attach(tt)}connect(tt){return super.connect(tt)}static createInterface(){return new Interface(_abi)}static connect(tt,rt){return new Contract(tt,_abi,rt)}}_defineProperty(TWProxy__factory,"bytecode",_bytecode),_defineProperty(TWProxy__factory,"abi",_abi);const thirdwebDevContractsJsFactoriesTWProxy__factory_esm=Object.freeze(Object.defineProperty({__proto__:null,TWProxy__factory},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/const i$2=(it,tt)=>tt.kind==="method"&&tt.descriptor&&!("value"in tt.descriptor)?{...tt,finisher(rt){rt.createProperty(tt.key,it)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:tt.key,initializer(){typeof tt.initializer=="function"&&(this[tt.key]=tt.initializer.call(this))},finisher(rt){rt.createProperty(tt.key,it)}};function e$3(it){return(tt,rt)=>rt!==void 0?((at,st,ot)=>{st.constructor.createProperty(ot,at)})(it,tt,rt):i$2(it,tt)}/**
* @license
* Copyright 2021 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/var n$5;((n$5=window.HTMLSlotElement)===null||n$5===void 0?void 0:n$5.prototype.assignedElements)!=null;/**
* @license
* Copyright 2010-2022 Three.js Authors
* SPDX-License-Identifier: MIT
*/const REVISION="146",CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",KeepStencilOp=7680,AlwaysStencilFunc=519,StaticDrawUsage=35044,GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener(tt,rt){this._listeners===void 0&&(this._listeners={});const at=this._listeners;at[tt]===void 0&&(at[tt]=[]),at[tt].indexOf(rt)===-1&&at[tt].push(rt)}hasEventListener(tt,rt){if(this._listeners===void 0)return!1;const at=this._listeners;return at[tt]!==void 0&&at[tt].indexOf(rt)!==-1}removeEventListener(tt,rt){if(this._listeners===void 0)return;const st=this._listeners[tt];if(st!==void 0){const ot=st.indexOf(rt);ot!==-1&&st.splice(ot,1)}}dispatchEvent(tt){if(this._listeners===void 0)return;const at=this._listeners[tt.type];if(at!==void 0){tt.target=this;const st=at.slice(0);for(let ot=0,lt=st.length;ot<lt;ot++)st[ot].call(this,tt);tt.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const it=Math.random()*4294967295|0,tt=Math.random()*4294967295|0,rt=Math.random()*4294967295|0,at=Math.random()*4294967295|0;return(_lut[it&255]+_lut[it>>8&255]+_lut[it>>16&255]+_lut[it>>24&255]+"-"+_lut[tt&255]+_lut[tt>>8&255]+"-"+_lut[tt>>16&15|64]+_lut[tt>>24&255]+"-"+_lut[rt&63|128]+_lut[rt>>8&255]+"-"+_lut[rt>>16&255]+_lut[rt>>24&255]+_lut[at&255]+_lut[at>>8&255]+_lut[at>>16&255]+_lut[at>>24&255]).toLowerCase()}function clamp$1(it,tt,rt){return Math.max(tt,Math.min(rt,it))}function euclideanModulo(it,tt){return(it%tt+tt)%tt}function mapLinear(it,tt,rt,at,st){return at+(it-tt)*(st-at)/(rt-tt)}function inverseLerp(it,tt,rt){return it!==tt?(rt-it)/(tt-it):0}function lerp$1(it,tt,rt){return(1-rt)*it+rt*tt}function damp(it,tt,rt,at){return lerp$1(it,tt,1-Math.exp(-rt*at))}function pingpong(it,tt=1){return tt-Math.abs(euclideanModulo(it,tt*2)-tt)}function smoothstep(it,tt,rt){return it<=tt?0:it>=rt?1:(it=(it-tt)/(rt-tt),it*it*(3-2*it))}function smootherstep(it,tt,rt){return it<=tt?0:it>=rt?1:(it=(it-tt)/(rt-tt),it*it*it*(it*(it*6-15)+10))}function randInt(it,tt){return it+Math.floor(Math.random()*(tt-it+1))}function randFloat(it,tt){return it+Math.random()*(tt-it)}function randFloatSpread(it){return it*(.5-Math.random())}function seededRandom(it){it!==void 0&&(_seed=it);let tt=_seed+=1831565813;return tt=Math.imul(tt^tt>>>15,tt|1),tt^=tt+Math.imul(tt^tt>>>7,tt|61),((tt^tt>>>14)>>>0)/4294967296}function degToRad(it){return it*DEG2RAD}function radToDeg(it){return it*RAD2DEG}function isPowerOfTwo(it){return(it&it-1)===0&&it!==0}function ceilPowerOfTwo(it){return Math.pow(2,Math.ceil(Math.log(it)/Math.LN2))}function floorPowerOfTwo(it){return Math.pow(2,Math.floor(Math.log(it)/Math.LN2))}function setQuaternionFromProperEuler(it,tt,rt,at,st){const ot=Math.cos,lt=Math.sin,ut=ot(rt/2),ht=lt(rt/2),mt=ot((tt+at)/2),bt=lt((tt+at)/2),vt=ot((tt-at)/2),At=lt((tt-at)/2),xt=ot((at-tt)/2),Et=lt((at-tt)/2);switch(st){case"XYX":it.set(ut*bt,ht*vt,ht*At,ut*mt);break;case"YZY":it.set(ht*At,ut*bt,ht*vt,ut*mt);break;case"ZXZ":it.set(ht*vt,ht*At,ut*bt,ut*mt);break;case"XZX":it.set(ut*bt,ht*Et,ht*xt,ut*mt);break;case"YXY":it.set(ht*xt,ut*bt,ht*Et,ut*mt);break;case"ZYZ":it.set(ht*Et,ht*xt,ut*bt,ut*mt);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+st)}}function denormalize(it,tt){switch(tt.constructor){case Float32Array:return it;case Uint16Array:return it/65535;case Uint8Array:return it/255;case Int16Array:return Math.max(it/32767,-1);case Int8Array:return Math.max(it/127,-1);default:throw new Error("Invalid component type.")}}function normalize(it,tt){switch(tt.constructor){case Float32Array:return it;case Uint16Array:return Math.round(it*65535);case Uint8Array:return Math.round(it*255);case Int16Array:return Math.round(it*32767);case Int8Array:return Math.round(it*127);default:throw new Error("Invalid component type.")}}var MathUtils=Object.freeze({__proto__:null,DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp:lerp$1,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize});class Vector2{constructor(tt=0,rt=0){Vector2.prototype.isVector2=!0,this.x=tt,this.y=rt}get width(){return this.x}set width(tt){this.x=tt}get height(){return this.y}set height(tt){this.y=tt}set(tt,rt){return this.x=tt,this.y=rt,this}setScalar(tt){return this.x=tt,this.y=tt,this}setX(tt){return this.x=tt,this}setY(tt){return this.y=tt,this}setComponent(tt,rt){switch(tt){case 0:this.x=rt;break;case 1:this.y=rt;break;default:throw new Error("index is out of range: "+tt)}return this}getComponent(tt){switch(tt){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+tt)}}clone(){return new this.constructor(this.x,this.y)}copy(tt){return this.x=tt.x,this.y=tt.y,this}add(tt){return this.x+=tt.x,this.y+=tt.y,this}addScalar(tt){return this.x+=tt,this.y+=tt,this}addVectors(tt,rt){return this.x=tt.x+rt.x,this.y=tt.y+rt.y,this}addScaledVector(tt,rt){return this.x+=tt.x*rt,this.y+=tt.y*rt,this}sub(tt){return this.x-=tt.x,this.y-=tt.y,this}subScalar(tt){return this.x-=tt,this.y-=tt,this}subVectors(tt,rt){return this.x=tt.x-rt.x,this.y=tt.y-rt.y,this}multiply(tt){return this.x*=tt.x,this.y*=tt.y,this}multiplyScalar(tt){return this.x*=tt,this.y*=tt,this}divide(tt){return this.x/=tt.x,this.y/=tt.y,this}divideScalar(tt){return this.multiplyScalar(1/tt)}applyMatrix3(tt){const rt=this.x,at=this.y,st=tt.elements;return this.x=st[0]*rt+st[3]*at+st[6],this.y=st[1]*rt+st[4]*at+st[7],this}min(tt){return this.x=Math.min(this.x,tt.x),this.y=Math.min(this.y,tt.y),this}max(tt){return this.x=Math.max(this.x,tt.x),this.y=Math.max(this.y,tt.y),this}clamp(tt,rt){return this.x=Math.max(tt.x,Math.min(rt.x,this.x)),this.y=Math.max(tt.y,Math.min(rt.y,this.y)),this}clampScalar(tt,rt){return this.x=Math.max(tt,Math.min(rt,this.x)),this.y=Math.max(tt,Math.min(rt,this.y)),this}clampLength(tt,rt){const at=this.length();return this.divideScalar(at||1).multiplyScalar(Math.max(tt,Math.min(rt,at)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(tt){return this.x*tt.x+this.y*tt.y}cross(tt){return this.x*tt.y-this.y*tt.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(tt){return Math.sqrt(this.distanceToSquared(tt))}distanceToSquared(tt){const rt=this.x-tt.x,at=this.y-tt.y;return rt*rt+at*at}manhattanDistanceTo(tt){return Math.abs(this.x-tt.x)+Math.abs(this.y-tt.y)}setLength(tt){return this.normalize().multiplyScalar(tt)}lerp(tt,rt){return this.x+=(tt.x-this.x)*rt,this.y+=(tt.y-this.y)*rt,this}lerpVectors(tt,rt,at){return this.x=tt.x+(rt.x-tt.x)*at,this.y=tt.y+(rt.y-tt.y)*at,this}equals(tt){return tt.x===this.x&&tt.y===this.y}fromArray(tt,rt=0){return this.x=tt[rt],this.y=tt[rt+1],this}toArray(tt=[],rt=0){return tt[rt]=this.x,tt[rt+1]=this.y,tt}fromBufferAttribute(tt,rt){return this.x=tt.getX(rt),this.y=tt.getY(rt),this}rotateAround(tt,rt){const at=Math.cos(rt),st=Math.sin(rt),ot=this.x-tt.x,lt=this.y-tt.y;return this.x=ot*at-lt*st+tt.x,this.y=ot*st+lt*at+tt.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(tt,rt,at,st,ot,lt,ut,ht,mt){const bt=this.elements;return bt[0]=tt,bt[1]=st,bt[2]=ut,bt[3]=rt,bt[4]=ot,bt[5]=ht,bt[6]=at,bt[7]=lt,bt[8]=mt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(tt){const rt=this.elements,at=tt.elements;return rt[0]=at[0],rt[1]=at[1],rt[2]=at[2],rt[3]=at[3],rt[4]=at[4],rt[5]=at[5],rt[6]=at[6],rt[7]=at[7],rt[8]=at[8],this}extractBasis(tt,rt,at){return tt.setFromMatrix3Column(this,0),rt.setFromMatrix3Column(this,1),at.setFromMatrix3Column(this,2),this}setFromMatrix4(tt){const rt=tt.elements;return this.set(rt[0],rt[4],rt[8],rt[1],rt[5],rt[9],rt[2],rt[6],rt[10]),this}multiply(tt){return this.multiplyMatrices(this,tt)}premultiply(tt){return this.multiplyMatrices(tt,this)}multiplyMatrices(tt,rt){const at=tt.elements,st=rt.elements,ot=this.elements,lt=at[0],ut=at[3],ht=at[6],mt=at[1],bt=at[4],vt=at[7],At=at[2],xt=at[5],Et=at[8],Tt=st[0],wt=st[3],Ct=st[6],It=st[1],St=st[4],Rt=st[7],Dt=st[2],Wt=st[5],qt=st[8];return ot[0]=lt*Tt+ut*It+ht*Dt,ot[3]=lt*wt+ut*St+ht*Wt,ot[6]=lt*Ct+ut*Rt+ht*qt,ot[1]=mt*Tt+bt*It+vt*Dt,ot[4]=mt*wt+bt*St+vt*Wt,ot[7]=mt*Ct+bt*Rt+vt*qt,ot[2]=At*Tt+xt*It+Et*Dt,ot[5]=At*wt+xt*St+Et*Wt,ot[8]=At*Ct+xt*Rt+Et*qt,this}multiplyScalar(tt){const rt=this.elements;return rt[0]*=tt,rt[3]*=tt,rt[6]*=tt,rt[1]*=tt,rt[4]*=tt,rt[7]*=tt,rt[2]*=tt,rt[5]*=tt,rt[8]*=tt,this}determinant(){const tt=this.elements,rt=tt[0],at=tt[1],st=tt[2],ot=tt[3],lt=tt[4],ut=tt[5],ht=tt[6],mt=tt[7],bt=tt[8];return rt*lt*bt-rt*ut*mt-at*ot*bt+at*ut*ht+st*ot*mt-st*lt*ht}invert(){const tt=this.elements,rt=tt[0],at=tt[1],st=tt[2],ot=tt[3],lt=tt[4],ut=tt[5],ht=tt[6],mt=tt[7],bt=tt[8],vt=bt*lt-ut*mt,At=ut*ht-bt*ot,xt=mt*ot-lt*ht,Et=rt*vt+at*At+st*xt;if(Et===0)return this.set(0,0,0,0,0,0,0,0,0);const Tt=1/Et;return tt[0]=vt*Tt,tt[1]=(st*mt-bt*at)*Tt,tt[2]=(ut*at-st*lt)*Tt,tt[3]=At*Tt,tt[4]=(bt*rt-st*ht)*Tt,tt[5]=(st*ot-ut*rt)*Tt,tt[6]=xt*Tt,tt[7]=(at*ht-mt*rt)*Tt,tt[8]=(lt*rt-at*ot)*Tt,this}transpose(){let tt;const rt=this.elements;return tt=rt[1],rt[1]=rt[3],rt[3]=tt,tt=rt[2],rt[2]=rt[6],rt[6]=tt,tt=rt[5],rt[5]=rt[7],rt[7]=tt,this}getNormalMatrix(tt){return this.setFromMatrix4(tt).invert().transpose()}transposeIntoArray(tt){const rt=this.elements;return tt[0]=rt[0],tt[1]=rt[3],tt[2]=rt[6],tt[3]=rt[1],tt[4]=rt[4],tt[5]=rt[7],tt[6]=rt[2],tt[7]=rt[5],tt[8]=rt[8],this}setUvTransform(tt,rt,at,st,ot,lt,ut){const ht=Math.cos(ot),mt=Math.sin(ot);return this.set(at*ht,at*mt,-at*(ht*lt+mt*ut)+lt+tt,-st*mt,st*ht,-st*(-mt*lt+ht*ut)+ut+rt,0,0,1),this}scale(tt,rt){const at=this.elements;return at[0]*=tt,at[3]*=tt,at[6]*=tt,at[1]*=rt,at[4]*=rt,at[7]*=rt,this}rotate(tt){const rt=Math.cos(tt),at=Math.sin(tt),st=this.elements,ot=st[0],lt=st[3],ut=st[6],ht=st[1],mt=st[4],bt=st[7];return st[0]=rt*ot+at*ht,st[3]=rt*lt+at*mt,st[6]=rt*ut+at*bt,st[1]=-at*ot+rt*ht,st[4]=-at*lt+rt*mt,st[7]=-at*ut+rt*bt,this}translate(tt,rt){const at=this.elements;return at[0]+=tt*at[2],at[3]+=tt*at[5],at[6]+=tt*at[8],at[1]+=rt*at[2],at[4]+=rt*at[5],at[7]+=rt*at[8],this}equals(tt){const rt=this.elements,at=tt.elements;for(let st=0;st<9;st++)if(rt[st]!==at[st])return!1;return!0}fromArray(tt,rt=0){for(let at=0;at<9;at++)this.elements[at]=tt[at+rt];return this}toArray(tt=[],rt=0){const at=this.elements;return tt[rt]=at[0],tt[rt+1]=at[1],tt[rt+2]=at[2],tt[rt+3]=at[3],tt[rt+4]=at[4],tt[rt+5]=at[5],tt[rt+6]=at[6],tt[rt+7]=at[7],tt[rt+8]=at[8],tt}clone(){return new this.constructor().fromArray(this.elements)}}function arrayNeedsUint32(it){for(let tt=it.length-1;tt>=0;--tt)if(it[tt]>=65535)return!0;return!1}function createElementNS(it){return document.createElementNS("http://www.w3.org/1999/xhtml",it)}function SRGBToLinear(it){return it<.04045?it*.0773993808:Math.pow(it*.9478672986+.0521327014,2.4)}function LinearToSRGB(it){return it<.0031308?it*12.92:1.055*Math.pow(it,.41666)-.055}const FN={[SRGBColorSpace]:{[LinearSRGBColorSpace]:SRGBToLinear},[LinearSRGBColorSpace]:{[SRGBColorSpace]:LinearToSRGB}},ColorManagement={legacyMode:!0,get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(it){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(it,tt,rt){if(this.legacyMode||tt===rt||!tt||!rt)return it;if(FN[tt]&&FN[tt][rt]!==void 0){const at=FN[tt][rt];return it.r=at(it.r),it.g=at(it.g),it.b=at(it.b),it}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(it,tt){return this.convert(it,this.workingColorSpace,tt)},toWorkingColorSpace:function(it,tt){return this.convert(it,tt,this.workingColorSpace)}},_colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_rgb={r:0,g:0,b:0},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(it,tt,rt){return rt<0&&(rt+=1),rt>1&&(rt-=1),rt<1/6?it+(tt-it)*6*rt:rt<1/2?tt:rt<2/3?it+(tt-it)*6*(2/3-rt):it}function toComponents(it,tt){return tt.r=it.r,tt.g=it.g,tt.b=it.b,tt}class Color{constructor(tt,rt,at){return this.isColor=!0,this.r=1,this.g=1,this.b=1,rt===void 0&&at===void 0?this.set(tt):this.setRGB(tt,rt,at)}set(tt){return tt&&tt.isColor?this.copy(tt):typeof tt=="number"?this.setHex(tt):typeof tt=="string"&&this.setStyle(tt),this}setScalar(tt){return this.r=tt,this.g=tt,this.b=tt,this}setHex(tt,rt=SRGBColorSpace){return tt=Math.floor(tt),this.r=(tt>>16&255)/255,this.g=(tt>>8&255)/255,this.b=(tt&255)/255,ColorManagement.toWorkingColorSpace(this,rt),this}setRGB(tt,rt,at,st=LinearSRGBColorSpace){return this.r=tt,this.g=rt,this.b=at,ColorManagement.toWorkingColorSpace(this,st),this}setHSL(tt,rt,at,st=LinearSRGBColorSpace){if(tt=euclideanModulo(tt,1),rt=clamp$1(rt,0,1),at=clamp$1(at,0,1),rt===0)this.r=this.g=this.b=at;else{const ot=at<=.5?at*(1+rt):at+rt-at*rt,lt=2*at-ot;this.r=hue2rgb(lt,ot,tt+1/3),this.g=hue2rgb(lt,ot,tt),this.b=hue2rgb(lt,ot,tt-1/3)}return ColorManagement.toWorkingColorSpace(this,st),this}setStyle(tt,rt=SRGBColorSpace){function at(ot){ot!==void 0&&parseFloat(ot)<1&&console.warn("THREE.Color: Alpha component of "+tt+" will be ignored.")}let st;if(st=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(tt)){let ot;const lt=st[1],ut=st[2];switch(lt){case"rgb":case"rgba":if(ot=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ut))return this.r=Math.min(255,parseInt(ot[1],10))/255,this.g=Math.min(255,parseInt(ot[2],10))/255,this.b=Math.min(255,parseInt(ot[3],10))/255,ColorManagement.toWorkingColorSpace(this,rt),at(ot[4]),this;if(ot=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ut))return this.r=Math.min(100,parseInt(ot[1],10))/100,this.g=Math.min(100,parseInt(ot[2],10))/100,this.b=Math.min(100,parseInt(ot[3],10))/100,ColorManagement.toWorkingColorSpace(this,rt),at(ot[4]),this;break;case"hsl":case"hsla":if(ot=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ut)){const ht=parseFloat(ot[1])/360,mt=parseFloat(ot[2])/100,bt=parseFloat(ot[3])/100;return at(ot[4]),this.setHSL(ht,mt,bt,rt)}break}}else if(st=/^\#([A-Fa-f\d]+)$/.exec(tt)){const ot=st[1],lt=ot.length;if(lt===3)return this.r=parseInt(ot.charAt(0)+ot.charAt(0),16)/255,this.g=parseInt(ot.charAt(1)+ot.charAt(1),16)/255,this.b=parseInt(ot.charAt(2)+ot.charAt(2),16)/255,ColorManagement.toWorkingColorSpace(this,rt),this;if(lt===6)return this.r=parseInt(ot.charAt(0)+ot.charAt(1),16)/255,this.g=parseInt(ot.charAt(2)+ot.charAt(3),16)/255,this.b=parseInt(ot.charAt(4)+ot.charAt(5),16)/255,ColorManagement.toWorkingColorSpace(this,rt),this}return tt&&tt.length>0?this.setColorName(tt,rt):this}setColorName(tt,rt=SRGBColorSpace){const at=_colorKeywords[tt.toLowerCase()];return at!==void 0?this.setHex(at,rt):console.warn("THREE.Color: Unknown color "+tt),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(tt){return this.r=tt.r,this.g=tt.g,this.b=tt.b,this}copySRGBToLinear(tt){return this.r=SRGBToLinear(tt.r),this.g=SRGBToLinear(tt.g),this.b=SRGBToLinear(tt.b),this}copyLinearToSRGB(tt){return this.r=LinearToSRGB(tt.r),this.g=LinearToSRGB(tt.g),this.b=LinearToSRGB(tt.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(tt=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb),tt),clamp$1(_rgb.r*255,0,255)<<16^clamp$1(_rgb.g*255,0,255)<<8^clamp$1(_rgb.b*255,0,255)<<0}getHexString(tt=SRGBColorSpace){return("000000"+this.getHex(tt).toString(16)).slice(-6)}getHSL(tt,rt=LinearSRGBColorSpace){ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb),rt);const at=_rgb.r,st=_rgb.g,ot=_rgb.b,lt=Math.max(at,st,ot),ut=Math.min(at,st,ot);let ht,mt;const bt=(ut+lt)/2;if(ut===lt)ht=0,mt=0;else{const vt=lt-ut;switch(mt=bt<=.5?vt/(lt+ut):vt/(2-lt-ut),lt){case at:ht=(st-ot)/vt+(st<ot?6:0);break;case st:ht=(ot-at)/vt+2;break;case ot:ht=(at-st)/vt+4;break}ht/=6}return tt.h=ht,tt.s=mt,tt.l=bt,tt}getRGB(tt,rt=LinearSRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb),rt),tt.r=_rgb.r,tt.g=_rgb.g,tt.b=_rgb.b,tt}getStyle(tt=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb),tt),tt!==SRGBColorSpace?`color(${tt} ${_rgb.r} ${_rgb.g} ${_rgb.b})`:`rgb(${_rgb.r*255|0},${_rgb.g*255|0},${_rgb.b*255|0})`}offsetHSL(tt,rt,at){return this.getHSL(_hslA),_hslA.h+=tt,_hslA.s+=rt,_hslA.l+=at,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(tt){return this.r+=tt.r,this.g+=tt.g,this.b+=tt.b,this}addColors(tt,rt){return this.r=tt.r+rt.r,this.g=tt.g+rt.g,this.b=tt.b+rt.b,this}addScalar(tt){return this.r+=tt,this.g+=tt,this.b+=tt,this}sub(tt){return this.r=Math.max(0,this.r-tt.r),this.g=Math.max(0,this.g-tt.g),this.b=Math.max(0,this.b-tt.b),this}multiply(tt){return this.r*=tt.r,this.g*=tt.g,this.b*=tt.b,this}multiplyScalar(tt){return this.r*=tt,this.g*=tt,this.b*=tt,this}lerp(tt,rt){return this.r+=(tt.r-this.r)*rt,this.g+=(tt.g-this.g)*rt,this.b+=(tt.b-this.b)*rt,this}lerpColors(tt,rt,at){return this.r=tt.r+(rt.r-tt.r)*at,this.g=tt.g+(rt.g-tt.g)*at,this.b=tt.b+(rt.b-tt.b)*at,this}lerpHSL(tt,rt){this.getHSL(_hslA),tt.getHSL(_hslB);const at=lerp$1(_hslA.h,_hslB.h,rt),st=lerp$1(_hslA.s,_hslB.s,rt),ot=lerp$1(_hslA.l,_hslB.l,rt);return this.setHSL(at,st,ot),this}equals(tt){return tt.r===this.r&&tt.g===this.g&&tt.b===this.b}fromArray(tt,rt=0){return this.r=tt[rt],this.g=tt[rt+1],this.b=tt[rt+2],this}toArray(tt=[],rt=0){return tt[rt]=this.r,tt[rt+1]=this.g,tt[rt+2]=this.b,tt}fromBufferAttribute(tt,rt){return this.r=tt.getX(rt),this.g=tt.getY(rt),this.b=tt.getZ(rt),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Color.NAMES=_colorKeywords;let _canvas;class ImageUtils{static getDataURL(tt){if(/^data:/i.test(tt.src)||typeof HTMLCanvasElement>"u")return tt.src;let rt;if(tt instanceof HTMLCanvasElement)rt=tt;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=tt.width,_canvas.height=tt.height;const at=_canvas.getContext("2d");tt instanceof ImageData?at.putImageData(tt,0,0):at.drawImage(tt,0,0,tt.width,tt.height),rt=_canvas}return rt.width>2048||rt.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",tt),rt.toDataURL("image/jpeg",.6)):rt.toDataURL("image/png")}static sRGBToLinear(tt){if(typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&tt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&tt instanceof ImageBitmap){const rt=createElementNS("canvas");rt.width=tt.width,rt.height=tt.height;const at=rt.getContext("2d");at.drawImage(tt,0,0,tt.width,tt.height);const st=at.getImageData(0,0,tt.width,tt.height),ot=st.data;for(let lt=0;lt<ot.length;lt++)ot[lt]=SRGBToLinear(ot[lt]/255)*255;return at.putImageData(st,0,0),rt}else if(tt.data){const rt=tt.data.slice(0);for(let at=0;at<rt.length;at++)rt instanceof Uint8Array||rt instanceof Uint8ClampedArray?rt[at]=Math.floor(SRGBToLinear(rt[at]/255)*255):rt[at]=SRGBToLinear(rt[at]);return{data:rt,width:tt.width,height:tt.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),tt}}class Source{constructor(tt=null){this.isSource=!0,this.uuid=generateUUID(),this.data=tt,this.version=0}set needsUpdate(tt){tt===!0&&this.version++}toJSON(tt){const rt=tt===void 0||typeof tt=="string";if(!rt&&tt.images[this.uuid]!==void 0)return tt.images[this.uuid];const at={uuid:this.uuid,url:""},st=this.data;if(st!==null){let ot;if(Array.isArray(st)){ot=[];for(let lt=0,ut=st.length;lt<ut;lt++)st[lt].isDataTexture?ot.push(serializeImage(st[lt].image)):ot.push(serializeImage(st[lt]))}else ot=serializeImage(st);at.url=ot}return rt||(tt.images[this.uuid]=at),at}}function serializeImage(it){return typeof HTMLImageElement<"u"&&it instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&it instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&it instanceof ImageBitmap?ImageUtils.getDataURL(it):it.data?{data:Array.from(it.data),width:it.width,height:it.height,type:it.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture$1 extends EventDispatcher{constructor(tt=Texture$1.DEFAULT_IMAGE,rt=Texture$1.DEFAULT_MAPPING,at=ClampToEdgeWrapping,st=ClampToEdgeWrapping,ot=LinearFilter,lt=LinearMipmapLinearFilter,ut=RGBAFormat,ht=UnsignedByteType,mt=1,bt=LinearEncoding){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(tt),this.mipmaps=[],this.mapping=rt,this.wrapS=at,this.wrapT=st,this.magFilter=ot,this.minFilter=lt,this.anisotropy=mt,this.format=ut,this.internalFormat=null,this.type=ht,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=bt,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(tt){this.source.data=tt}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(tt){return this.name=tt.name,this.source=tt.source,this.mipmaps=tt.mipmaps.slice(0),this.mapping=tt.mapping,this.wrapS=tt.wrapS,this.wrapT=tt.wrapT,this.magFilter=tt.magFilter,this.minFilter=tt.minFilter,this.anisotropy=tt.anisotropy,this.format=tt.format,this.internalFormat=tt.internalFormat,this.type=tt.type,this.offset.copy(tt.offset),this.repeat.copy(tt.repeat),this.center.copy(tt.center),this.rotation=tt.rotation,this.matrixAutoUpdate=tt.matrixAutoUpdate,this.matrix.copy(tt.matrix),this.generateMipmaps=tt.generateMipmaps,this.premultiplyAlpha=tt.premultiplyAlpha,this.flipY=tt.flipY,this.unpackAlignment=tt.unpackAlignment,this.encoding=tt.encoding,this.userData=JSON.parse(JSON.stringify(tt.userData)),this.needsUpdate=!0,this}toJSON(tt){const rt=tt===void 0||typeof tt=="string";if(!rt&&tt.textures[this.uuid]!==void 0)return tt.textures[this.uuid];const at={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(tt).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(at.userData=this.userData),rt||(tt.textures[this.uuid]=at),at}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(tt){if(this.mapping!==UVMapping)return tt;if(tt.applyMatrix3(this.matrix),tt.x<0||tt.x>1)switch(this.wrapS){case RepeatWrapping:tt.x=tt.x-Math.floor(tt.x);break;case ClampToEdgeWrapping:tt.x=tt.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(tt.x)%2)===1?tt.x=Math.ceil(tt.x)-tt.x:tt.x=tt.x-Math.floor(tt.x);break}if(tt.y<0||tt.y>1)switch(this.wrapT){case RepeatWrapping:tt.y=tt.y-Math.floor(tt.y);break;case ClampToEdgeWrapping:tt.y=tt.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(tt.y)%2)===1?tt.y=Math.ceil(tt.y)-tt.y:tt.y=tt.y-Math.floor(tt.y);break}return this.flipY&&(tt.y=1-tt.y),tt}set needsUpdate(tt){tt===!0&&(this.version++,this.source.needsUpdate=!0)}}Texture$1.DEFAULT_IMAGE=null,Texture$1.DEFAULT_MAPPING=UVMapping;class Vector4{constructor(tt=0,rt=0,at=0,st=1){Vector4.prototype.isVector4=!0,this.x=tt,this.y=rt,this.z=at,this.w=st}get width(){return this.z}set width(tt){this.z=tt}get height(){return this.w}set height(tt){this.w=tt}set(tt,rt,at,st){return this.x=tt,this.y=rt,this.z=at,this.w=st,this}setScalar(tt){return this.x=tt,this.y=tt,this.z=tt,this.w=tt,this}setX(tt){return this.x=tt,this}setY(tt){return this.y=tt,this}setZ(tt){return this.z=tt,this}setW(tt){return this.w=tt,this}setComponent(tt,rt){switch(tt){case 0:this.x=rt;break;case 1:this.y=rt;break;case 2:this.z=rt;break;case 3:this.w=rt;break;default:throw new Error("index is out of range: "+tt)}return this}getComponent(tt){switch(tt){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+tt)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(tt){return this.x=tt.x,this.y=tt.y,this.z=tt.z,this.w=tt.w!==void 0?tt.w:1,this}add(tt){return this.x+=tt.x,this.y+=tt.y,this.z+=tt.z,this.w+=tt.w,this}addScalar(tt){return this.x+=tt,this.y+=tt,this.z+=tt,this.w+=tt,this}addVectors(tt,rt){return this.x=tt.x+rt.x,this.y=tt.y+rt.y,this.z=tt.z+rt.z,this.w=tt.w+rt.w,this}addScaledVector(tt,rt){return this.x+=tt.x*rt,this.y+=tt.y*rt,this.z+=tt.z*rt,this.w+=tt.w*rt,this}sub(tt){return this.x-=tt.x,this.y-=tt.y,this.z-=tt.z,this.w-=tt.w,this}subScalar(tt){return this.x-=tt,this.y-=tt,this.z-=tt,this.w-=tt,this}subVectors(tt,rt){return this.x=tt.x-rt.x,this.y=tt.y-rt.y,this.z=tt.z-rt.z,this.w=tt.w-rt.w,this}multiply(tt){return this.x*=tt.x,this.y*=tt.y,this.z*=tt.z,this.w*=tt.w,this}multiplyScalar(tt){return this.x*=tt,this.y*=tt,this.z*=tt,this.w*=tt,this}applyMatrix4(tt){const rt=this.x,at=this.y,st=this.z,ot=this.w,lt=tt.elements;return this.x=lt[0]*rt+lt[4]*at+lt[8]*st+lt[12]*ot,this.y=lt[1]*rt+lt[5]*at+lt[9]*st+lt[13]*ot,this.z=lt[2]*rt+lt[6]*at+lt[10]*st+lt[14]*ot,this.w=lt[3]*rt+lt[7]*at+lt[11]*st+lt[15]*ot,this}divideScalar(tt){return this.multiplyScalar(1/tt)}setAxisAngleFromQuaternion(tt){this.w=2*Math.acos(tt.w);const rt=Math.sqrt(1-tt.w*tt.w);return rt<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=tt.x/rt,this.y=tt.y/rt,this.z=tt.z/rt),this}setAxisAngleFromRotationMatrix(tt){let rt,at,st,ot;const ht=tt.elements,mt=ht[0],bt=ht[4],vt=ht[8],At=ht[1],xt=ht[5],Et=ht[9],Tt=ht[2],wt=ht[6],Ct=ht[10];if(Math.abs(bt-At)<.01&&Math.abs(vt-Tt)<.01&&Math.abs(Et-wt)<.01){if(Math.abs(bt+At)<.1&&Math.abs(vt+Tt)<.1&&Math.abs(Et+wt)<.1&&Math.abs(mt+xt+Ct-3)<.1)return this.set(1,0,0,0),this;rt=Math.PI;const St=(mt+1)/2,Rt=(xt+1)/2,Dt=(Ct+1)/2,Wt=(bt+At)/4,qt=(vt+Tt)/4,Vt=(Et+wt)/4;return St>Rt&&St>Dt?St<.01?(at=0,st=.707106781,ot=.707106781):(at=Math.sqrt(St),st=Wt/at,ot=qt/at):Rt>Dt?Rt<.01?(at=.707106781,st=0,ot=.707106781):(st=Math.sqrt(Rt),at=Wt/st,ot=Vt/st):Dt<.01?(at=.707106781,st=.707106781,ot=0):(ot=Math.sqrt(Dt),at=qt/ot,st=Vt/ot),this.set(at,st,ot,rt),this}let It=Math.sqrt((wt-Et)*(wt-Et)+(vt-Tt)*(vt-Tt)+(At-bt)*(At-bt));return Math.abs(It)<.001&&(It=1),this.x=(wt-Et)/It,this.y=(vt-Tt)/It,this.z=(At-bt)/It,this.w=Math.acos((mt+xt+Ct-1)/2),this}min(tt){return this.x=Math.min(this.x,tt.x),this.y=Math.min(this.y,tt.y),this.z=Math.min(this.z,tt.z),this.w=Math.min(this.w,tt.w),this}max(tt){return this.x=Math.max(this.x,tt.x),this.y=Math.max(this.y,tt.y),this.z=Math.max(this.z,tt.z),this.w=Math.max(this.w,tt.w),this}clamp(tt,rt){return this.x=Math.max(tt.x,Math.min(rt.x,this.x)),this.y=Math.max(tt.y,Math.min(rt.y,this.y)),this.z=Math.max(tt.z,Math.min(rt.z,this.z)),this.w=Math.max(tt.w,Math.min(rt.w,this.w)),this}clampScalar(tt,rt){return this.x=Math.max(tt,Math.min(rt,this.x)),this.y=Math.max(tt,Math.min(rt,this.y)),this.z=Math.max(tt,Math.min(rt,this.z)),this.w=Math.max(tt,Math.min(rt,this.w)),this}clampLength(tt,rt){const at=this.length();return this.divideScalar(at||1).multiplyScalar(Math.max(tt,Math.min(rt,at)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(tt){return this.x*tt.x+this.y*tt.y+this.z*tt.z+this.w*tt.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(tt){return this.normalize().multiplyScalar(tt)}lerp(tt,rt){return this.x+=(tt.x-this.x)*rt,this.y+=(tt.y-this.y)*rt,this.z+=(tt.z-this.z)*rt,this.w+=(tt.w-this.w)*rt,this}lerpVectors(tt,rt,at){return this.x=tt.x+(rt.x-tt.x)*at,this.y=tt.y+(rt.y-tt.y)*at,this.z=tt.z+(rt.z-tt.z)*at,this.w=tt.w+(rt.w-tt.w)*at,this}equals(tt){return tt.x===this.x&&tt.y===this.y&&tt.z===this.z&&tt.w===this.w}fromArray(tt,rt=0){return this.x=tt[rt],this.y=tt[rt+1],this.z=tt[rt+2],this.w=tt[rt+3],this}toArray(tt=[],rt=0){return tt[rt]=this.x,tt[rt+1]=this.y,tt[rt+2]=this.z,tt[rt+3]=this.w,tt}fromBufferAttribute(tt,rt){return this.x=tt.getX(rt),this.y=tt.getY(rt),this.z=tt.getZ(rt),this.w=tt.getW(rt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher{constructor(tt=1,rt=1,at={}){super(),this.isWebGLRenderTarget=!0,this.width=tt,this.height=rt,this.depth=1,this.scissor=new Vector4(0,0,tt,rt),this.scissorTest=!1,this.viewport=new Vector4(0,0,tt,rt);const st={width:tt,height:rt,depth:1};this.texture=new Texture$1(st,at.mapping,at.wrapS,at.wrapT,at.magFilter,at.minFilter,at.format,at.type,at.anisotropy,at.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=at.generateMipmaps!==void 0?at.generateMipmaps:!1,this.texture.internalFormat=at.internalFormat!==void 0?at.internalFormat:null,this.texture.minFilter=at.minFilter!==void 0?at.minFilter:LinearFilter,this.depthBuffer=at.depthBuffer!==void 0?at.depthBuffer:!0,this.stencilBuffer=at.stencilBuffer!==void 0?at.stencilBuffer:!1,this.depthTexture=at.depthTexture!==void 0?at.depthTexture:null,this.samples=at.samples!==void 0?at.samples:0}setSize(tt,rt,at=1){(this.width!==tt||this.height!==rt||this.depth!==at)&&(this.width=tt,this.height=rt,this.depth=at,this.texture.image.width=tt,this.texture.image.height=rt,this.texture.image.depth=at,this.dispose()),this.viewport.set(0,0,tt,rt),this.scissor.set(0,0,tt,rt)}clone(){return new this.constructor().copy(this)}copy(tt){this.width=tt.width,this.height=tt.height,this.depth=tt.depth,this.viewport.copy(tt.viewport),this.texture=tt.texture.clone(),this.texture.isRenderTargetTexture=!0;const rt=Object.assign({},tt.texture.image);return this.texture.source=new Source(rt),this.depthBuffer=tt.depthBuffer,this.stencilBuffer=tt.stencilBuffer,tt.depthTexture!==null&&(this.depthTexture=tt.depthTexture.clone()),this.samples=tt.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture$1{constructor(tt=null,rt=1,at=1,st=1){super(null),this.isDataArrayTexture=!0,this.image={data:tt,width:rt,height:at,depth:st},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Data3DTexture extends Texture$1{constructor(tt=null,rt=1,at=1,st=1){super(null),this.isData3DTexture=!0,this.image={data:tt,width:rt,height:at,depth:st},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(tt=0,rt=0,at=0,st=1){this.isQuaternion=!0,this._x=tt,this._y=rt,this._z=at,this._w=st}static slerpFlat(tt,rt,at,st,ot,lt,ut){let ht=at[st+0],mt=at[st+1],bt=at[st+2],vt=at[st+3];const At=ot[lt+0],xt=ot[lt+1],Et=ot[lt+2],Tt=ot[lt+3];if(ut===0){tt[rt+0]=ht,tt[rt+1]=mt,tt[rt+2]=bt,tt[rt+3]=vt;return}if(ut===1){tt[rt+0]=At,tt[rt+1]=xt,tt[rt+2]=Et,tt[rt+3]=Tt;return}if(vt!==Tt||ht!==At||mt!==xt||bt!==Et){let wt=1-ut;const Ct=ht*At+mt*xt+bt*Et+vt*Tt,It=Ct>=0?1:-1,St=1-Ct*Ct;if(St>Number.EPSILON){const Dt=Math.sqrt(St),Wt=Math.atan2(Dt,Ct*It);wt=Math.sin(wt*Wt)/Dt,ut=Math.sin(ut*Wt)/Dt}const Rt=ut*It;if(ht=ht*wt+At*Rt,mt=mt*wt+xt*Rt,bt=bt*wt+Et*Rt,vt=vt*wt+Tt*Rt,wt===1-ut){const Dt=1/Math.sqrt(ht*ht+mt*mt+bt*bt+vt*vt);ht*=Dt,mt*=Dt,bt*=Dt,vt*=Dt}}tt[rt]=ht,tt[rt+1]=mt,tt[rt+2]=bt,tt[rt+3]=vt}static multiplyQuaternionsFlat(tt,rt,at,st,ot,lt){const ut=at[st],ht=at[st+1],mt=at[st+2],bt=at[st+3],vt=ot[lt],At=ot[lt+1],xt=ot[lt+2],Et=ot[lt+3];return tt[rt]=ut*Et+bt*vt+ht*xt-mt*At,tt[rt+1]=ht*Et+bt*At+mt*vt-ut*xt,tt[rt+2]=mt*Et+bt*xt+ut*At-ht*vt,tt[rt+3]=bt*Et-ut*vt-ht*At-mt*xt,tt}get x(){return this._x}set x(tt){this._x=tt,this._onChangeCallback()}get y(){return this._y}set y(tt){this._y=tt,this._onChangeCallback()}get z(){return this._z}set z(tt){this._z=tt,this._onChangeCallback()}get w(){return this._w}set w(tt){this._w=tt,this._onChangeCallback()}set(tt,rt,at,st){return this._x=tt,this._y=rt,this._z=at,this._w=st,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(tt){return this._x=tt.x,this._y=tt.y,this._z=tt.z,this._w=tt.w,this._onChangeCallback(),this}setFromEuler(tt,rt){const at=tt._x,st=tt._y,ot=tt._z,lt=tt._order,ut=Math.cos,ht=Math.sin,mt=ut(at/2),bt=ut(st/2),vt=ut(ot/2),At=ht(at/2),xt=ht(st/2),Et=ht(ot/2);switch(lt){case"XYZ":this._x=At*bt*vt+mt*xt*Et,this._y=mt*xt*vt-At*bt*Et,this._z=mt*bt*Et+At*xt*vt,this._w=mt*bt*vt-At*xt*Et;break;case"YXZ":this._x=At*bt*vt+mt*xt*Et,this._y=mt*xt*vt-At*bt*Et,this._z=mt*bt*Et-At*xt*vt,this._w=mt*bt*vt+At*xt*Et;break;case"ZXY":this._x=At*bt*vt-mt*xt*Et,this._y=mt*xt*vt+At*bt*Et,this._z=mt*bt*Et+At*xt*vt,this._w=mt*bt*vt-At*xt*Et;break;case"ZYX":this._x=At*bt*vt-mt*xt*Et,this._y=mt*xt*vt+At*bt*Et,this._z=mt*bt*Et-At*xt*vt,this._w=mt*bt*vt+At*xt*Et;break;case"YZX":this._x=At*bt*vt+mt*xt*Et,this._y=mt*xt*vt+At*bt*Et,this._z=mt*bt*Et-At*xt*vt,this._w=mt*bt*vt-At*xt*Et;break;case"XZY":this._x=At*bt*vt-mt*xt*Et,this._y=mt*xt*vt-At*bt*Et,this._z=mt*bt*Et+At*xt*vt,this._w=mt*bt*vt+At*xt*Et;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+lt)}return rt!==!1&&this._onChangeCallback(),this}setFromAxisAngle(tt,rt){const at=rt/2,st=Math.sin(at);return this._x=tt.x*st,this._y=tt.y*st,this._z=tt.z*st,this._w=Math.cos(at),this._onChangeCallback(),this}setFromRotationMatrix(tt){const rt=tt.elements,at=rt[0],st=rt[4],ot=rt[8],lt=rt[1],ut=rt[5],ht=rt[9],mt=rt[2],bt=rt[6],vt=rt[10],At=at+ut+vt;if(At>0){const xt=.5/Math.sqrt(At+1);this._w=.25/xt,this._x=(bt-ht)*xt,this._y=(ot-mt)*xt,this._z=(lt-st)*xt}else if(at>ut&&at>vt){const xt=2*Math.sqrt(1+at-ut-vt);this._w=(bt-ht)/xt,this._x=.25*xt,this._y=(st+lt)/xt,this._z=(ot+mt)/xt}else if(ut>vt){const xt=2*Math.sqrt(1+ut-at-vt);this._w=(ot-mt)/xt,this._x=(st+lt)/xt,this._y=.25*xt,this._z=(ht+bt)/xt}else{const xt=2*Math.sqrt(1+vt-at-ut);this._w=(lt-st)/xt,this._x=(ot+mt)/xt,this._y=(ht+bt)/xt,this._z=.25*xt}return this._onChangeCallback(),this}setFromUnitVectors(tt,rt){let at=tt.dot(rt)+1;return at<Number.EPSILON?(at=0,Math.abs(tt.x)>Math.abs(tt.z)?(this._x=-tt.y,this._y=tt.x,this._z=0,this._w=at):(this._x=0,this._y=-tt.z,this._z=tt.y,this._w=at)):(this._x=tt.y*rt.z-tt.z*rt.y,this._y=tt.z*rt.x-tt.x*rt.z,this._z=tt.x*rt.y-tt.y*rt.x,this._w=at),this.normalize()}angleTo(tt){return 2*Math.acos(Math.abs(clamp$1(this.dot(tt),-1,1)))}rotateTowards(tt,rt){const at=this.angleTo(tt);if(at===0)return this;const st=Math.min(1,rt/at);return this.slerp(tt,st),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(tt){return this._x*tt._x+this._y*tt._y+this._z*tt._z+this._w*tt._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let tt=this.length();return tt===0?(this._x=0,this._y=0,this._z=0,this._w=1):(tt=1/tt,this._x=this._x*tt,this._y=this._y*tt,this._z=this._z*tt,this._w=this._w*tt),this._onChangeCallback(),this}multiply(tt){return this.multiplyQuaternions(this,tt)}premultiply(tt){return this.multiplyQuaternions(tt,this)}multiplyQuaternions(tt,rt){const at=tt._x,st=tt._y,ot=tt._z,lt=tt._w,ut=rt._x,ht=rt._y,mt=rt._z,bt=rt._w;return this._x=at*bt+lt*ut+st*mt-ot*ht,this._y=st*bt+lt*ht+ot*ut-at*mt,this._z=ot*bt+lt*mt+at*ht-st*ut,this._w=lt*bt-at*ut-st*ht-ot*mt,this._onChangeCallback(),this}slerp(tt,rt){if(rt===0)return this;if(rt===1)return this.copy(tt);const at=this._x,st=this._y,ot=this._z,lt=this._w;let ut=lt*tt._w+at*tt._x+st*tt._y+ot*tt._z;if(ut<0?(this._w=-tt._w,this._x=-tt._x,this._y=-tt._y,this._z=-tt._z,ut=-ut):this.copy(tt),ut>=1)return this._w=lt,this._x=at,this._y=st,this._z=ot,this;const ht=1-ut*ut;if(ht<=Number.EPSILON){const xt=1-rt;return this._w=xt*lt+rt*this._w,this._x=xt*at+rt*this._x,this._y=xt*st+rt*this._y,this._z=xt*ot+rt*this._z,this.normalize(),this._onChangeCallback(),this}const mt=Math.sqrt(ht),bt=Math.atan2(mt,ut),vt=Math.sin((1-rt)*bt)/mt,At=Math.sin(rt*bt)/mt;return this._w=lt*vt+this._w*At,this._x=at*vt+this._x*At,this._y=st*vt+this._y*At,this._z=ot*vt+this._z*At,this._onChangeCallback(),this}slerpQuaternions(tt,rt,at){return this.copy(tt).slerp(rt,at)}random(){const tt=Math.random(),rt=Math.sqrt(1-tt),at=Math.sqrt(tt),st=2*Math.PI*Math.random(),ot=2*Math.PI*Math.random();return this.set(rt*Math.cos(st),at*Math.sin(ot),at*Math.cos(ot),rt*Math.sin(st))}equals(tt){return tt._x===this._x&&tt._y===this._y&&tt._z===this._z&&tt._w===this._w}fromArray(tt,rt=0){return this._x=tt[rt],this._y=tt[rt+1],this._z=tt[rt+2],this._w=tt[rt+3],this._onChangeCallback(),this}toArray(tt=[],rt=0){return tt[rt]=this._x,tt[rt+1]=this._y,tt[rt+2]=this._z,tt[rt+3]=this._w,tt}fromBufferAttribute(tt,rt){return this._x=tt.getX(rt),this._y=tt.getY(rt),this._z=tt.getZ(rt),this._w=tt.getW(rt),this}_onChange(tt){return this._onChangeCallback=tt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(tt=0,rt=0,at=0){Vector3.prototype.isVector3=!0,this.x=tt,this.y=rt,this.z=at}set(tt,rt,at){return at===void 0&&(at=this.z),this.x=tt,this.y=rt,this.z=at,this}setScalar(tt){return this.x=tt,this.y=tt,this.z=tt,this}setX(tt){return this.x=tt,this}setY(tt){return this.y=tt,this}setZ(tt){return this.z=tt,this}setComponent(tt,rt){switch(tt){case 0:this.x=rt;break;case 1:this.y=rt;break;case 2:this.z=rt;break;default:throw new Error("index is out of range: "+tt)}return this}getComponent(tt){switch(tt){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+tt)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(tt){return this.x=tt.x,this.y=tt.y,this.z=tt.z,this}add(tt){return this.x+=tt.x,this.y+=tt.y,this.z+=tt.z,this}addScalar(tt){return this.x+=tt,this.y+=tt,this.z+=tt,this}addVectors(tt,rt){return this.x=tt.x+rt.x,this.y=tt.y+rt.y,this.z=tt.z+rt.z,this}addScaledVector(tt,rt){return this.x+=tt.x*rt,this.y+=tt.y*rt,this.z+=tt.z*rt,this}sub(tt){return this.x-=tt.x,this.y-=tt.y,this.z-=tt.z,this}subScalar(tt){return this.x-=tt,this.y-=tt,this.z-=tt,this}subVectors(tt,rt){return this.x=tt.x-rt.x,this.y=tt.y-rt.y,this.z=tt.z-rt.z,this}multiply(tt){return this.x*=tt.x,this.y*=tt.y,this.z*=tt.z,this}multiplyScalar(tt){return this.x*=tt,this.y*=tt,this.z*=tt,this}multiplyVectors(tt,rt){return this.x=tt.x*rt.x,this.y=tt.y*rt.y,this.z=tt.z*rt.z,this}applyEuler(tt){return this.applyQuaternion(_quaternion$4.setFromEuler(tt))}applyAxisAngle(tt,rt){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(tt,rt))}applyMatrix3(tt){const rt=this.x,at=this.y,st=this.z,ot=tt.elements;return this.x=ot[0]*rt+ot[3]*at+ot[6]*st,this.y=ot[1]*rt+ot[4]*at+ot[7]*st,this.z=ot[2]*rt+ot[5]*at+ot[8]*st,this}applyNormalMatrix(tt){return this.applyMatrix3(tt).normalize()}applyMatrix4(tt){const rt=this.x,at=this.y,st=this.z,ot=tt.elements,lt=1/(ot[3]*rt+ot[7]*at+ot[11]*st+ot[15]);return this.x=(ot[0]*rt+ot[4]*at+ot[8]*st+ot[12])*lt,this.y=(ot[1]*rt+ot[5]*at+ot[9]*st+ot[13])*lt,this.z=(ot[2]*rt+ot[6]*at+ot[10]*st+ot[14])*lt,this}applyQuaternion(tt){const rt=this.x,at=this.y,st=this.z,ot=tt.x,lt=tt.y,ut=tt.z,ht=tt.w,mt=ht*rt+lt*st-ut*at,bt=ht*at+ut*rt-ot*st,vt=ht*st+ot*at-lt*rt,At=-ot*rt-lt*at-ut*st;return this.x=mt*ht+At*-ot+bt*-ut-vt*-lt,this.y=bt*ht+At*-lt+vt*-ot-mt*-ut,this.z=vt*ht+At*-ut+mt*-lt-bt*-ot,this}project(tt){return this.applyMatrix4(tt.matrixWorldInverse).applyMatrix4(tt.projectionMatrix)}unproject(tt){return this.applyMatrix4(tt.projectionMatrixInverse).applyMatrix4(tt.matrixWorld)}transformDirection(tt){const rt=this.x,at=this.y,st=this.z,ot=tt.elements;return this.x=ot[0]*rt+ot[4]*at+ot[8]*st,this.y=ot[1]*rt+ot[5]*at+ot[9]*st,this.z=ot[2]*rt+ot[6]*at+ot[10]*st,this.normalize()}divide(tt){return this.x/=tt.x,this.y/=tt.y,this.z/=tt.z,this}divideScalar(tt){return this.multiplyScalar(1/tt)}min(tt){return this.x=Math.min(this.x,tt.x),this.y=Math.min(this.y,tt.y),this.z=Math.min(this.z,tt.z),this}max(tt){return this.x=Math.max(this.x,tt.x),this.y=Math.max(this.y,tt.y),this.z=Math.max(this.z,tt.z),this}clamp(tt,rt){return this.x=Math.max(tt.x,Math.min(rt.x,this.x)),this.y=Math.max(tt.y,Math.min(rt.y,this.y)),this.z=Math.max(tt.z,Math.min(rt.z,this.z)),this}clampScalar(tt,rt){return this.x=Math.max(tt,Math.min(rt,this.x)),this.y=Math.max(tt,Math.min(rt,this.y)),this.z=Math.max(tt,Math.min(rt,this.z)),this}clampLength(tt,rt){const at=this.length();return this.divideScalar(at||1).multiplyScalar(Math.max(tt,Math.min(rt,at)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(tt){return this.x*tt.x+this.y*tt.y+this.z*tt.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(tt){return this.normalize().multiplyScalar(tt)}lerp(tt,rt){return this.x+=(tt.x-this.x)*rt,this.y+=(tt.y-this.y)*rt,this.z+=(tt.z-this.z)*rt,this}lerpVectors(tt,rt,at){return this.x=tt.x+(rt.x-tt.x)*at,this.y=tt.y+(rt.y-tt.y)*at,this.z=tt.z+(rt.z-tt.z)*at,this}cross(tt){return this.crossVectors(this,tt)}crossVectors(tt,rt){const at=tt.x,st=tt.y,ot=tt.z,lt=rt.x,ut=rt.y,ht=rt.z;return this.x=st*ht-ot*ut,this.y=ot*lt-at*ht,this.z=at*ut-st*lt,this}projectOnVector(tt){const rt=tt.lengthSq();if(rt===0)return this.set(0,0,0);const at=tt.dot(this)/rt;return this.copy(tt).multiplyScalar(at)}projectOnPlane(tt){return _vector$c.copy(this).projectOnVector(tt),this.sub(_vector$c)}reflect(tt){return this.sub(_vector$c.copy(tt).multiplyScalar(2*this.dot(tt)))}angleTo(tt){const rt=Math.sqrt(this.lengthSq()*tt.lengthSq());if(rt===0)return Math.PI/2;const at=this.dot(tt)/rt;return Math.acos(clamp$1(at,-1,1))}distanceTo(tt){return Math.sqrt(this.distanceToSquared(tt))}distanceToSquared(tt){const rt=this.x-tt.x,at=this.y-tt.y,st=this.z-tt.z;return rt*rt+at*at+st*st}manhattanDistanceTo(tt){return Math.abs(this.x-tt.x)+Math.abs(this.y-tt.y)+Math.abs(this.z-tt.z)}setFromSpherical(tt){return this.setFromSphericalCoords(tt.radius,tt.phi,tt.theta)}setFromSphericalCoords(tt,rt,at){const st=Math.sin(rt)*tt;return this.x=st*Math.sin(at),this.y=Math.cos(rt)*tt,this.z=st*Math.cos(at),this}setFromCylindrical(tt){return this.setFromCylindricalCoords(tt.radius,tt.theta,tt.y)}setFromCylindricalCoords(tt,rt,at){return this.x=tt*Math.sin(rt),this.y=at,this.z=tt*Math.cos(rt),this}setFromMatrixPosition(tt){const rt=tt.elements;return this.x=rt[12],this.y=rt[13],this.z=rt[14],this}setFromMatrixScale(tt){const rt=this.setFromMatrixColumn(tt,0).length(),at=this.setFromMatrixColumn(tt,1).length(),st=this.setFromMatrixColumn(tt,2).length();return this.x=rt,this.y=at,this.z=st,this}setFromMatrixColumn(tt,rt){return this.fromArray(tt.elements,rt*4)}setFromMatrix3Column(tt,rt){return this.fromArray(tt.elements,rt*3)}setFromEuler(tt){return this.x=tt._x,this.y=tt._y,this.z=tt._z,this}equals(tt){return tt.x===this.x&&tt.y===this.y&&tt.z===this.z}fromArray(tt,rt=0){return this.x=tt[rt],this.y=tt[rt+1],this.z=tt[rt+2],this}toArray(tt=[],rt=0){return tt[rt]=this.x,tt[rt+1]=this.y,tt[rt+2]=this.z,tt}fromBufferAttribute(tt,rt){return this.x=tt.getX(rt),this.y=tt.getY(rt),this.z=tt.getZ(rt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const tt=(Math.random()-.5)*2,rt=Math.random()*Math.PI*2,at=Math.sqrt(1-tt**2);return this.x=at*Math.cos(rt),this.y=at*Math.sin(rt),this.z=tt,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(tt=new Vector3(1/0,1/0,1/0),rt=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=tt,this.max=rt}set(tt,rt){return this.min.copy(tt),this.max.copy(rt),this}setFromArray(tt){let rt=1/0,at=1/0,st=1/0,ot=-1/0,lt=-1/0,ut=-1/0;for(let ht=0,mt=tt.length;ht<mt;ht+=3){const bt=tt[ht],vt=tt[ht+1],At=tt[ht+2];bt<rt&&(rt=bt),vt<at&&(at=vt),At<st&&(st=At),bt>ot&&(ot=bt),vt>lt&&(lt=vt),At>ut&&(ut=At)}return this.min.set(rt,at,st),this.max.set(ot,lt,ut),this}setFromBufferAttribute(tt){let rt=1/0,at=1/0,st=1/0,ot=-1/0,lt=-1/0,ut=-1/0;for(let ht=0,mt=tt.count;ht<mt;ht++){const bt=tt.getX(ht),vt=tt.getY(ht),At=tt.getZ(ht);bt<rt&&(rt=bt),vt<at&&(at=vt),At<st&&(st=At),bt>ot&&(ot=bt),vt>lt&&(lt=vt),At>ut&&(ut=At)}return this.min.set(rt,at,st),this.max.set(ot,lt,ut),this}setFromPoints(tt){this.makeEmpty();for(let rt=0,at=tt.length;rt<at;rt++)this.expandByPoint(tt[rt]);return this}setFromCenterAndSize(tt,rt){const at=_vector$b.copy(rt).multiplyScalar(.5);return this.min.copy(tt).sub(at),this.max.copy(tt).add(at),this}setFromObject(tt,rt=!1){return this.makeEmpty(),this.expandByObject(tt,rt)}clone(){return new this.constructor().copy(this)}copy(tt){return this.min.copy(tt.min),this.max.copy(tt.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(tt){return this.isEmpty()?tt.set(0,0,0):tt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(tt){return this.isEmpty()?tt.set(0,0,0):tt.subVectors(this.max,this.min)}expandByPoint(tt){return this.min.min(tt),this.max.max(tt),this}expandByVector(tt){return this.min.sub(tt),this.max.add(tt),this}expandByScalar(tt){return this.min.addScalar(-tt),this.max.addScalar(tt),this}expandByObject(tt,rt=!1){tt.updateWorldMatrix(!1,!1);const at=tt.geometry;if(at!==void 0)if(rt&&at.attributes!=null&&at.attributes.position!==void 0){const ot=at.attributes.position;for(let lt=0,ut=ot.count;lt<ut;lt++)_vector$b.fromBufferAttribute(ot,lt).applyMatrix4(tt.matrixWorld),this.expandByPoint(_vector$b)}else at.boundingBox===null&&at.computeBoundingBox(),_box$3.copy(at.boundingBox),_box$3.applyMatrix4(tt.matrixWorld),this.union(_box$3);const st=tt.children;for(let ot=0,lt=st.length;ot<lt;ot++)this.expandByObject(st[ot],rt);return this}containsPoint(tt){return!(tt.x<this.min.x||tt.x>this.max.x||tt.y<this.min.y||tt.y>this.max.y||tt.z<this.min.z||tt.z>this.max.z)}containsBox(tt){return this.min.x<=tt.min.x&&tt.max.x<=this.max.x&&this.min.y<=tt.min.y&&tt.max.y<=this.max.y&&this.min.z<=tt.min.z&&tt.max.z<=this.max.z}getParameter(tt,rt){return rt.set((tt.x-this.min.x)/(this.max.x-this.min.x),(tt.y-this.min.y)/(this.max.y-this.min.y),(tt.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(tt){return!(tt.max.x<this.min.x||tt.min.x>this.max.x||tt.max.y<this.min.y||tt.min.y>this.max.y||tt.max.z<this.min.z||tt.min.z>this.max.z)}intersectsSphere(tt){return this.clampPoint(tt.center,_vector$b),_vector$b.distanceToSquared(tt.center)<=tt.radius*tt.radius}intersectsPlane(tt){let rt,at;return tt.normal.x>0?(rt=tt.normal.x*this.min.x,at=tt.normal.x*this.max.x):(rt=tt.normal.x*this.max.x,at=tt.normal.x*this.min.x),tt.normal.y>0?(rt+=tt.normal.y*this.min.y,at+=tt.normal.y*this.max.y):(rt+=tt.normal.y*this.max.y,at+=tt.normal.y*this.min.y),tt.normal.z>0?(rt+=tt.normal.z*this.min.z,at+=tt.normal.z*this.max.z):(rt+=tt.normal.z*this.max.z,at+=tt.normal.z*this.min.z),rt<=-tt.constant&&at>=-tt.constant}intersectsTriangle(tt){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(tt.a,_center),_v1$7.subVectors(tt.b,_center),_v2$4.subVectors(tt.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let rt=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(rt,_v0$2,_v1$7,_v2$4,_extents)||(rt=[1,0,0,0,1,0,0,0,1],!satForAxes(rt,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),rt=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(rt,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(tt,rt){return rt.copy(tt).clamp(this.min,this.max)}distanceToPoint(tt){return _vector$b.copy(tt).clamp(this.min,this.max).sub(tt).length()}getBoundingSphere(tt){return this.getCenter(tt.center),tt.radius=this.getSize(_vector$b).length()*.5,tt}intersect(tt){return this.min.max(tt.min),this.max.min(tt.max),this.isEmpty()&&this.makeEmpty(),this}union(tt){return this.min.min(tt.min),this.max.max(tt.max),this}applyMatrix4(tt){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(tt),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(tt),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(tt),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(tt),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(tt),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(tt),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(tt),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(tt),this.setFromPoints(_points),this)}translate(tt){return this.min.add(tt),this.max.add(tt),this}equals(tt){return tt.min.equals(this.min)&&tt.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(it,tt,rt,at,st){for(let ot=0,lt=it.length-3;ot<=lt;ot+=3){_testAxis.fromArray(it,ot);const ut=st.x*Math.abs(_testAxis.x)+st.y*Math.abs(_testAxis.y)+st.z*Math.abs(_testAxis.z),ht=tt.dot(_testAxis),mt=rt.dot(_testAxis),bt=at.dot(_testAxis);if(Math.max(-Math.max(ht,mt,bt),Math.min(ht,mt,bt))>ut)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(tt=new Vector3,rt=-1){this.center=tt,this.radius=rt}set(tt,rt){return this.center.copy(tt),this.radius=rt,this}setFromPoints(tt,rt){const at=this.center;rt!==void 0?at.copy(rt):_box$2.setFromPoints(tt).getCenter(at);let st=0;for(let ot=0,lt=tt.length;ot<lt;ot++)st=Math.max(st,at.distanceToSquared(tt[ot]));return this.radius=Math.sqrt(st),this}copy(tt){return this.center.copy(tt.center),this.radius=tt.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(tt){return tt.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(tt){return tt.distanceTo(this.center)-this.radius}intersectsSphere(tt){const rt=this.radius+tt.radius;return tt.center.distanceToSquared(this.center)<=rt*rt}intersectsBox(tt){return tt.intersectsSphere(this)}intersectsPlane(tt){return Math.abs(tt.distanceToPoint(this.center))<=this.radius}clampPoint(tt,rt){const at=this.center.distanceToSquared(tt);return rt.copy(tt),at>this.radius*this.radius&&(rt.sub(this.center).normalize(),rt.multiplyScalar(this.radius).add(this.center)),rt}getBoundingBox(tt){return this.isEmpty()?(tt.makeEmpty(),tt):(tt.set(this.center,this.center),tt.expandByScalar(this.radius),tt)}applyMatrix4(tt){return this.center.applyMatrix4(tt),this.radius=this.radius*tt.getMaxScaleOnAxis(),this}translate(tt){return this.center.add(tt),this}expandByPoint(tt){if(this.isEmpty())return this.center.copy(tt),this.radius=0,this;_v1$6.subVectors(tt,this.center);const rt=_v1$6.lengthSq();if(rt>this.radius*this.radius){const at=Math.sqrt(rt),st=(at-this.radius)*.5;this.center.addScaledVector(_v1$6,st/at),this.radius+=st}return this}union(tt){return tt.isEmpty()?this:this.isEmpty()?(this.copy(tt),this):(this.center.equals(tt.center)===!0?this.radius=Math.max(this.radius,tt.radius):(_v2$3.subVectors(tt.center,this.center).setLength(tt.radius),this.expandByPoint(_v1$6.copy(tt.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(tt.center).sub(_v2$3))),this)}equals(tt){return tt.center.equals(this.center)&&tt.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(tt=new Vector3,rt=new Vector3(0,0,-1)){this.origin=tt,this.direction=rt}set(tt,rt){return this.origin.copy(tt),this.direction.copy(rt),this}copy(tt){return this.origin.copy(tt.origin),this.direction.copy(tt.direction),this}at(tt,rt){return rt.copy(this.direction).multiplyScalar(tt).add(this.origin)}lookAt(tt){return this.direction.copy(tt).sub(this.origin).normalize(),this}recast(tt){return this.origin.copy(this.at(tt,_vector$a)),this}closestPointToPoint(tt,rt){rt.subVectors(tt,this.origin);const at=rt.dot(this.direction);return at<0?rt.copy(this.origin):rt.copy(this.direction).multiplyScalar(at).add(this.origin)}distanceToPoint(tt){return Math.sqrt(this.distanceSqToPoint(tt))}distanceSqToPoint(tt){const rt=_vector$a.subVectors(tt,this.origin).dot(this.direction);return rt<0?this.origin.distanceToSquared(tt):(_vector$a.copy(this.direction).multiplyScalar(rt).add(this.origin),_vector$a.distanceToSquared(tt))}distanceSqToSegment(tt,rt,at,st){_segCenter.copy(tt).add(rt).multiplyScalar(.5),_segDir.copy(rt).sub(tt).normalize(),_diff.copy(this.origin).sub(_segCenter);const ot=tt.distanceTo(rt)*.5,lt=-this.direction.dot(_segDir),ut=_diff.dot(this.direction),ht=-_diff.dot(_segDir),mt=_diff.lengthSq(),bt=Math.abs(1-lt*lt);let vt,At,xt,Et;if(bt>0)if(vt=lt*ht-ut,At=lt*ut-ht,Et=ot*bt,vt>=0)if(At>=-Et)if(At<=Et){const Tt=1/bt;vt*=Tt,At*=Tt,xt=vt*(vt+lt*At+2*ut)+At*(lt*vt+At+2*ht)+mt}else At=ot,vt=Math.max(0,-(lt*At+ut)),xt=-vt*vt+At*(At+2*ht)+mt;else At=-ot,vt=Math.max(0,-(lt*At+ut)),xt=-vt*vt+At*(At+2*ht)+mt;else At<=-Et?(vt=Math.max(0,-(-lt*ot+ut)),At=vt>0?-ot:Math.min(Math.max(-ot,-ht),ot),xt=-vt*vt+At*(At+2*ht)+mt):At<=Et?(vt=0,At=Math.min(Math.max(-ot,-ht),ot),xt=At*(At+2*ht)+mt):(vt=Math.max(0,-(lt*ot+ut)),At=vt>0?ot:Math.min(Math.max(-ot,-ht),ot),xt=-vt*vt+At*(At+2*ht)+mt);else At=lt>0?-ot:ot,vt=Math.max(0,-(lt*At+ut)),xt=-vt*vt+At*(At+2*ht)+mt;return at&&at.copy(this.direction).multiplyScalar(vt).add(this.origin),st&&st.copy(_segDir).multiplyScalar(At).add(_segCenter),xt}intersectSphere(tt,rt){_vector$a.subVectors(tt.center,this.origin);const at=_vector$a.dot(this.direction),st=_vector$a.dot(_vector$a)-at*at,ot=tt.radius*tt.radius;if(st>ot)return null;const lt=Math.sqrt(ot-st),ut=at-lt,ht=at+lt;return ut<0&&ht<0?null:ut<0?this.at(ht,rt):this.at(ut,rt)}intersectsSphere(tt){return this.distanceSqToPoint(tt.center)<=tt.radius*tt.radius}distanceToPlane(tt){const rt=tt.normal.dot(this.direction);if(rt===0)return tt.distanceToPoint(this.origin)===0?0:null;const at=-(this.origin.dot(tt.normal)+tt.constant)/rt;return at>=0?at:null}intersectPlane(tt,rt){const at=this.distanceToPlane(tt);return at===null?null:this.at(at,rt)}intersectsPlane(tt){const rt=tt.distanceToPoint(this.origin);return rt===0||tt.normal.dot(this.direction)*rt<0}intersectBox(tt,rt){let at,st,ot,lt,ut,ht;const mt=1/this.direction.x,bt=1/this.direction.y,vt=1/this.direction.z,At=this.origin;return mt>=0?(at=(tt.min.x-At.x)*mt,st=(tt.max.x-At.x)*mt):(at=(tt.max.x-At.x)*mt,st=(tt.min.x-At.x)*mt),bt>=0?(ot=(tt.min.y-At.y)*bt,lt=(tt.max.y-At.y)*bt):(ot=(tt.max.y-At.y)*bt,lt=(tt.min.y-At.y)*bt),at>lt||ot>st||((ot>at||isNaN(at))&&(at=ot),(lt<st||isNaN(st))&&(st=lt),vt>=0?(ut=(tt.min.z-At.z)*vt,ht=(tt.max.z-At.z)*vt):(ut=(tt.max.z-At.z)*vt,ht=(tt.min.z-At.z)*vt),at>ht||ut>st)||((ut>at||at!==at)&&(at=ut),(ht<st||st!==st)&&(st=ht),st<0)?null:this.at(at>=0?at:st,rt)}intersectsBox(tt){return this.intersectBox(tt,_vector$a)!==null}intersectTriangle(tt,rt,at,st,ot){_edge1.subVectors(rt,tt),_edge2.subVectors(at,tt),_normal$1.crossVectors(_edge1,_edge2);let lt=this.direction.dot(_normal$1),ut;if(lt>0){if(st)return null;ut=1}else if(lt<0)ut=-1,lt=-lt;else return null;_diff.subVectors(this.origin,tt);const ht=ut*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(ht<0)return null;const mt=ut*this.direction.dot(_edge1.cross(_diff));if(mt<0||ht+mt>lt)return null;const bt=-ut*_diff.dot(_normal$1);return bt<0?null:this.at(bt/lt,ot)}applyMatrix4(tt){return this.origin.applyMatrix4(tt),this.direction.transformDirection(tt),this}equals(tt){return tt.origin.equals(this.origin)&&tt.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt,Et,Tt,wt){const Ct=this.elements;return Ct[0]=tt,Ct[4]=rt,Ct[8]=at,Ct[12]=st,Ct[1]=ot,Ct[5]=lt,Ct[9]=ut,Ct[13]=ht,Ct[2]=mt,Ct[6]=bt,Ct[10]=vt,Ct[14]=At,Ct[3]=xt,Ct[7]=Et,Ct[11]=Tt,Ct[15]=wt,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(tt){const rt=this.elements,at=tt.elements;return rt[0]=at[0],rt[1]=at[1],rt[2]=at[2],rt[3]=at[3],rt[4]=at[4],rt[5]=at[5],rt[6]=at[6],rt[7]=at[7],rt[8]=at[8],rt[9]=at[9],rt[10]=at[10],rt[11]=at[11],rt[12]=at[12],rt[13]=at[13],rt[14]=at[14],rt[15]=at[15],this}copyPosition(tt){const rt=this.elements,at=tt.elements;return rt[12]=at[12],rt[13]=at[13],rt[14]=at[14],this}setFromMatrix3(tt){const rt=tt.elements;return this.set(rt[0],rt[3],rt[6],0,rt[1],rt[4],rt[7],0,rt[2],rt[5],rt[8],0,0,0,0,1),this}extractBasis(tt,rt,at){return tt.setFromMatrixColumn(this,0),rt.setFromMatrixColumn(this,1),at.setFromMatrixColumn(this,2),this}makeBasis(tt,rt,at){return this.set(tt.x,rt.x,at.x,0,tt.y,rt.y,at.y,0,tt.z,rt.z,at.z,0,0,0,0,1),this}extractRotation(tt){const rt=this.elements,at=tt.elements,st=1/_v1$5.setFromMatrixColumn(tt,0).length(),ot=1/_v1$5.setFromMatrixColumn(tt,1).length(),lt=1/_v1$5.setFromMatrixColumn(tt,2).length();return rt[0]=at[0]*st,rt[1]=at[1]*st,rt[2]=at[2]*st,rt[3]=0,rt[4]=at[4]*ot,rt[5]=at[5]*ot,rt[6]=at[6]*ot,rt[7]=0,rt[8]=at[8]*lt,rt[9]=at[9]*lt,rt[10]=at[10]*lt,rt[11]=0,rt[12]=0,rt[13]=0,rt[14]=0,rt[15]=1,this}makeRotationFromEuler(tt){const rt=this.elements,at=tt.x,st=tt.y,ot=tt.z,lt=Math.cos(at),ut=Math.sin(at),ht=Math.cos(st),mt=Math.sin(st),bt=Math.cos(ot),vt=Math.sin(ot);if(tt.order==="XYZ"){const At=lt*bt,xt=lt*vt,Et=ut*bt,Tt=ut*vt;rt[0]=ht*bt,rt[4]=-ht*vt,rt[8]=mt,rt[1]=xt+Et*mt,rt[5]=At-Tt*mt,rt[9]=-ut*ht,rt[2]=Tt-At*mt,rt[6]=Et+xt*mt,rt[10]=lt*ht}else if(tt.order==="YXZ"){const At=ht*bt,xt=ht*vt,Et=mt*bt,Tt=mt*vt;rt[0]=At+Tt*ut,rt[4]=Et*ut-xt,rt[8]=lt*mt,rt[1]=lt*vt,rt[5]=lt*bt,rt[9]=-ut,rt[2]=xt*ut-Et,rt[6]=Tt+At*ut,rt[10]=lt*ht}else if(tt.order==="ZXY"){const At=ht*bt,xt=ht*vt,Et=mt*bt,Tt=mt*vt;rt[0]=At-Tt*ut,rt[4]=-lt*vt,rt[8]=Et+xt*ut,rt[1]=xt+Et*ut,rt[5]=lt*bt,rt[9]=Tt-At*ut,rt[2]=-lt*mt,rt[6]=ut,rt[10]=lt*ht}else if(tt.order==="ZYX"){const At=lt*bt,xt=lt*vt,Et=ut*bt,Tt=ut*vt;rt[0]=ht*bt,rt[4]=Et*mt-xt,rt[8]=At*mt+Tt,rt[1]=ht*vt,rt[5]=Tt*mt+At,rt[9]=xt*mt-Et,rt[2]=-mt,rt[6]=ut*ht,rt[10]=lt*ht}else if(tt.order==="YZX"){const At=lt*ht,xt=lt*mt,Et=ut*ht,Tt=ut*mt;rt[0]=ht*bt,rt[4]=Tt-At*vt,rt[8]=Et*vt+xt,rt[1]=vt,rt[5]=lt*bt,rt[9]=-ut*bt,rt[2]=-mt*bt,rt[6]=xt*vt+Et,rt[10]=At-Tt*vt}else if(tt.order==="XZY"){const At=lt*ht,xt=lt*mt,Et=ut*ht,Tt=ut*mt;rt[0]=ht*bt,rt[4]=-vt,rt[8]=mt*bt,rt[1]=At*vt+Tt,rt[5]=lt*bt,rt[9]=xt*vt-Et,rt[2]=Et*vt-xt,rt[6]=ut*bt,rt[10]=Tt*vt+At}return rt[3]=0,rt[7]=0,rt[11]=0,rt[12]=0,rt[13]=0,rt[14]=0,rt[15]=1,this}makeRotationFromQuaternion(tt){return this.compose(_zero,tt,_one)}lookAt(tt,rt,at){const st=this.elements;return _z.subVectors(tt,rt),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(at,_z),_x.lengthSq()===0&&(Math.abs(at.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(at,_z)),_x.normalize(),_y.crossVectors(_z,_x),st[0]=_x.x,st[4]=_y.x,st[8]=_z.x,st[1]=_x.y,st[5]=_y.y,st[9]=_z.y,st[2]=_x.z,st[6]=_y.z,st[10]=_z.z,this}multiply(tt){return this.multiplyMatrices(this,tt)}premultiply(tt){return this.multiplyMatrices(tt,this)}multiplyMatrices(tt,rt){const at=tt.elements,st=rt.elements,ot=this.elements,lt=at[0],ut=at[4],ht=at[8],mt=at[12],bt=at[1],vt=at[5],At=at[9],xt=at[13],Et=at[2],Tt=at[6],wt=at[10],Ct=at[14],It=at[3],St=at[7],Rt=at[11],Dt=at[15],Wt=st[0],qt=st[4],Vt=st[8],Yt=st[12],jt=st[1],kt=st[5],zt=st[9],Nt=st[13],Mt=st[2],Lt=st[6],Ht=st[10],Qt=st[14],Ut=st[3],Bt=st[7],Kt=st[11],Gt=st[15];return ot[0]=lt*Wt+ut*jt+ht*Mt+mt*Ut,ot[4]=lt*qt+ut*kt+ht*Lt+mt*Bt,ot[8]=lt*Vt+ut*zt+ht*Ht+mt*Kt,ot[12]=lt*Yt+ut*Nt+ht*Qt+mt*Gt,ot[1]=bt*Wt+vt*jt+At*Mt+xt*Ut,ot[5]=bt*qt+vt*kt+At*Lt+xt*Bt,ot[9]=bt*Vt+vt*zt+At*Ht+xt*Kt,ot[13]=bt*Yt+vt*Nt+At*Qt+xt*Gt,ot[2]=Et*Wt+Tt*jt+wt*Mt+Ct*Ut,ot[6]=Et*qt+Tt*kt+wt*Lt+Ct*Bt,ot[10]=Et*Vt+Tt*zt+wt*Ht+Ct*Kt,ot[14]=Et*Yt+Tt*Nt+wt*Qt+Ct*Gt,ot[3]=It*Wt+St*jt+Rt*Mt+Dt*Ut,ot[7]=It*qt+St*kt+Rt*Lt+Dt*Bt,ot[11]=It*Vt+St*zt+Rt*Ht+Dt*Kt,ot[15]=It*Yt+St*Nt+Rt*Qt+Dt*Gt,this}multiplyScalar(tt){const rt=this.elements;return rt[0]*=tt,rt[4]*=tt,rt[8]*=tt,rt[12]*=tt,rt[1]*=tt,rt[5]*=tt,rt[9]*=tt,rt[13]*=tt,rt[2]*=tt,rt[6]*=tt,rt[10]*=tt,rt[14]*=tt,rt[3]*=tt,rt[7]*=tt,rt[11]*=tt,rt[15]*=tt,this}determinant(){const tt=this.elements,rt=tt[0],at=tt[4],st=tt[8],ot=tt[12],lt=tt[1],ut=tt[5],ht=tt[9],mt=tt[13],bt=tt[2],vt=tt[6],At=tt[10],xt=tt[14],Et=tt[3],Tt=tt[7],wt=tt[11],Ct=tt[15];return Et*(+ot*ht*vt-st*mt*vt-ot*ut*At+at*mt*At+st*ut*xt-at*ht*xt)+Tt*(+rt*ht*xt-rt*mt*At+ot*lt*At-st*lt*xt+st*mt*bt-ot*ht*bt)+wt*(+rt*mt*vt-rt*ut*xt-ot*lt*vt+at*lt*xt+ot*ut*bt-at*mt*bt)+Ct*(-st*ut*bt-rt*ht*vt+rt*ut*At+st*lt*vt-at*lt*At+at*ht*bt)}transpose(){const tt=this.elements;let rt;return rt=tt[1],tt[1]=tt[4],tt[4]=rt,rt=tt[2],tt[2]=tt[8],tt[8]=rt,rt=tt[6],tt[6]=tt[9],tt[9]=rt,rt=tt[3],tt[3]=tt[12],tt[12]=rt,rt=tt[7],tt[7]=tt[13],tt[13]=rt,rt=tt[11],tt[11]=tt[14],tt[14]=rt,this}setPosition(tt,rt,at){const st=this.elements;return tt.isVector3?(st[12]=tt.x,st[13]=tt.y,st[14]=tt.z):(st[12]=tt,st[13]=rt,st[14]=at),this}invert(){const tt=this.elements,rt=tt[0],at=tt[1],st=tt[2],ot=tt[3],lt=tt[4],ut=tt[5],ht=tt[6],mt=tt[7],bt=tt[8],vt=tt[9],At=tt[10],xt=tt[11],Et=tt[12],Tt=tt[13],wt=tt[14],Ct=tt[15],It=vt*wt*mt-Tt*At*mt+Tt*ht*xt-ut*wt*xt-vt*ht*Ct+ut*At*Ct,St=Et*At*mt-bt*wt*mt-Et*ht*xt+lt*wt*xt+bt*ht*Ct-lt*At*Ct,Rt=bt*Tt*mt-Et*vt*mt+Et*ut*xt-lt*Tt*xt-bt*ut*Ct+lt*vt*Ct,Dt=Et*vt*ht-bt*Tt*ht-Et*ut*At+lt*Tt*At+bt*ut*wt-lt*vt*wt,Wt=rt*It+at*St+st*Rt+ot*Dt;if(Wt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const qt=1/Wt;return tt[0]=It*qt,tt[1]=(Tt*At*ot-vt*wt*ot-Tt*st*xt+at*wt*xt+vt*st*Ct-at*At*Ct)*qt,tt[2]=(ut*wt*ot-Tt*ht*ot+Tt*st*mt-at*wt*mt-ut*st*Ct+at*ht*Ct)*qt,tt[3]=(vt*ht*ot-ut*At*ot-vt*st*mt+at*At*mt+ut*st*xt-at*ht*xt)*qt,tt[4]=St*qt,tt[5]=(bt*wt*ot-Et*At*ot+Et*st*xt-rt*wt*xt-bt*st*Ct+rt*At*Ct)*qt,tt[6]=(Et*ht*ot-lt*wt*ot-Et*st*mt+rt*wt*mt+lt*st*Ct-rt*ht*Ct)*qt,tt[7]=(lt*At*ot-bt*ht*ot+bt*st*mt-rt*At*mt-lt*st*xt+rt*ht*xt)*qt,tt[8]=Rt*qt,tt[9]=(Et*vt*ot-bt*Tt*ot-Et*at*xt+rt*Tt*xt+bt*at*Ct-rt*vt*Ct)*qt,tt[10]=(lt*Tt*ot-Et*ut*ot+Et*at*mt-rt*Tt*mt-lt*at*Ct+rt*ut*Ct)*qt,tt[11]=(bt*ut*ot-lt*vt*ot-bt*at*mt+rt*vt*mt+lt*at*xt-rt*ut*xt)*qt,tt[12]=Dt*qt,tt[13]=(bt*Tt*st-Et*vt*st+Et*at*At-rt*Tt*At-bt*at*wt+rt*vt*wt)*qt,tt[14]=(Et*ut*st-lt*Tt*st-Et*at*ht+rt*Tt*ht+lt*at*wt-rt*ut*wt)*qt,tt[15]=(lt*vt*st-bt*ut*st+bt*at*ht-rt*vt*ht-lt*at*At+rt*ut*At)*qt,this}scale(tt){const rt=this.elements,at=tt.x,st=tt.y,ot=tt.z;return rt[0]*=at,rt[4]*=st,rt[8]*=ot,rt[1]*=at,rt[5]*=st,rt[9]*=ot,rt[2]*=at,rt[6]*=st,rt[10]*=ot,rt[3]*=at,rt[7]*=st,rt[11]*=ot,this}getMaxScaleOnAxis(){const tt=this.elements,rt=tt[0]*tt[0]+tt[1]*tt[1]+tt[2]*tt[2],at=tt[4]*tt[4]+tt[5]*tt[5]+tt[6]*tt[6],st=tt[8]*tt[8]+tt[9]*tt[9]+tt[10]*tt[10];return Math.sqrt(Math.max(rt,at,st))}makeTranslation(tt,rt,at){return this.set(1,0,0,tt,0,1,0,rt,0,0,1,at,0,0,0,1),this}makeRotationX(tt){const rt=Math.cos(tt),at=Math.sin(tt);return this.set(1,0,0,0,0,rt,-at,0,0,at,rt,0,0,0,0,1),this}makeRotationY(tt){const rt=Math.cos(tt),at=Math.sin(tt);return this.set(rt,0,at,0,0,1,0,0,-at,0,rt,0,0,0,0,1),this}makeRotationZ(tt){const rt=Math.cos(tt),at=Math.sin(tt);return this.set(rt,-at,0,0,at,rt,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(tt,rt){const at=Math.cos(rt),st=Math.sin(rt),ot=1-at,lt=tt.x,ut=tt.y,ht=tt.z,mt=ot*lt,bt=ot*ut;return this.set(mt*lt+at,mt*ut-st*ht,mt*ht+st*ut,0,mt*ut+st*ht,bt*ut+at,bt*ht-st*lt,0,mt*ht-st*ut,bt*ht+st*lt,ot*ht*ht+at,0,0,0,0,1),this}makeScale(tt,rt,at){return this.set(tt,0,0,0,0,rt,0,0,0,0,at,0,0,0,0,1),this}makeShear(tt,rt,at,st,ot,lt){return this.set(1,at,ot,0,tt,1,lt,0,rt,st,1,0,0,0,0,1),this}compose(tt,rt,at){const st=this.elements,ot=rt._x,lt=rt._y,ut=rt._z,ht=rt._w,mt=ot+ot,bt=lt+lt,vt=ut+ut,At=ot*mt,xt=ot*bt,Et=ot*vt,Tt=lt*bt,wt=lt*vt,Ct=ut*vt,It=ht*mt,St=ht*bt,Rt=ht*vt,Dt=at.x,Wt=at.y,qt=at.z;return st[0]=(1-(Tt+Ct))*Dt,st[1]=(xt+Rt)*Dt,st[2]=(Et-St)*Dt,st[3]=0,st[4]=(xt-Rt)*Wt,st[5]=(1-(At+Ct))*Wt,st[6]=(wt+It)*Wt,st[7]=0,st[8]=(Et+St)*qt,st[9]=(wt-It)*qt,st[10]=(1-(At+Tt))*qt,st[11]=0,st[12]=tt.x,st[13]=tt.y,st[14]=tt.z,st[15]=1,this}decompose(tt,rt,at){const st=this.elements;let ot=_v1$5.set(st[0],st[1],st[2]).length();const lt=_v1$5.set(st[4],st[5],st[6]).length(),ut=_v1$5.set(st[8],st[9],st[10]).length();this.determinant()<0&&(ot=-ot),tt.x=st[12],tt.y=st[13],tt.z=st[14],_m1$2.copy(this);const mt=1/ot,bt=1/lt,vt=1/ut;return _m1$2.elements[0]*=mt,_m1$2.elements[1]*=mt,_m1$2.elements[2]*=mt,_m1$2.elements[4]*=bt,_m1$2.elements[5]*=bt,_m1$2.elements[6]*=bt,_m1$2.elements[8]*=vt,_m1$2.elements[9]*=vt,_m1$2.elements[10]*=vt,rt.setFromRotationMatrix(_m1$2),at.x=ot,at.y=lt,at.z=ut,this}makePerspective(tt,rt,at,st,ot,lt){const ut=this.elements,ht=2*ot/(rt-tt),mt=2*ot/(at-st),bt=(rt+tt)/(rt-tt),vt=(at+st)/(at-st),At=-(lt+ot)/(lt-ot),xt=-2*lt*ot/(lt-ot);return ut[0]=ht,ut[4]=0,ut[8]=bt,ut[12]=0,ut[1]=0,ut[5]=mt,ut[9]=vt,ut[13]=0,ut[2]=0,ut[6]=0,ut[10]=At,ut[14]=xt,ut[3]=0,ut[7]=0,ut[11]=-1,ut[15]=0,this}makeOrthographic(tt,rt,at,st,ot,lt){const ut=this.elements,ht=1/(rt-tt),mt=1/(at-st),bt=1/(lt-ot),vt=(rt+tt)*ht,At=(at+st)*mt,xt=(lt+ot)*bt;return ut[0]=2*ht,ut[4]=0,ut[8]=0,ut[12]=-vt,ut[1]=0,ut[5]=2*mt,ut[9]=0,ut[13]=-At,ut[2]=0,ut[6]=0,ut[10]=-2*bt,ut[14]=-xt,ut[3]=0,ut[7]=0,ut[11]=0,ut[15]=1,this}equals(tt){const rt=this.elements,at=tt.elements;for(let st=0;st<16;st++)if(rt[st]!==at[st])return!1;return!0}fromArray(tt,rt=0){for(let at=0;at<16;at++)this.elements[at]=tt[at+rt];return this}toArray(tt=[],rt=0){const at=this.elements;return tt[rt]=at[0],tt[rt+1]=at[1],tt[rt+2]=at[2],tt[rt+3]=at[3],tt[rt+4]=at[4],tt[rt+5]=at[5],tt[rt+6]=at[6],tt[rt+7]=at[7],tt[rt+8]=at[8],tt[rt+9]=at[9],tt[rt+10]=at[10],tt[rt+11]=at[11],tt[rt+12]=at[12],tt[rt+13]=at[13],tt[rt+14]=at[14],tt[rt+15]=at[15],tt}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(tt=0,rt=0,at=0,st=Euler.DefaultOrder){this.isEuler=!0,this._x=tt,this._y=rt,this._z=at,this._order=st}get x(){return this._x}set x(tt){this._x=tt,this._onChangeCallback()}get y(){return this._y}set y(tt){this._y=tt,this._onChangeCallback()}get z(){return this._z}set z(tt){this._z=tt,this._onChangeCallback()}get order(){return this._order}set order(tt){this._order=tt,this._onChangeCallback()}set(tt,rt,at,st=this._order){return this._x=tt,this._y=rt,this._z=at,this._order=st,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(tt){return this._x=tt._x,this._y=tt._y,this._z=tt._z,this._order=tt._order,this._onChangeCallback(),this}setFromRotationMatrix(tt,rt=this._order,at=!0){const st=tt.elements,ot=st[0],lt=st[4],ut=st[8],ht=st[1],mt=st[5],bt=st[9],vt=st[2],At=st[6],xt=st[10];switch(rt){case"XYZ":this._y=Math.asin(clamp$1(ut,-1,1)),Math.abs(ut)<.9999999?(this._x=Math.atan2(-bt,xt),this._z=Math.atan2(-lt,ot)):(this._x=Math.atan2(At,mt),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(bt,-1,1)),Math.abs(bt)<.9999999?(this._y=Math.atan2(ut,xt),this._z=Math.atan2(ht,mt)):(this._y=Math.atan2(-vt,ot),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(At,-1,1)),Math.abs(At)<.9999999?(this._y=Math.atan2(-vt,xt),this._z=Math.atan2(-lt,mt)):(this._y=0,this._z=Math.atan2(ht,ot));break;case"ZYX":this._y=Math.asin(-clamp$1(vt,-1,1)),Math.abs(vt)<.9999999?(this._x=Math.atan2(At,xt),this._z=Math.atan2(ht,ot)):(this._x=0,this._z=Math.atan2(-lt,mt));break;case"YZX":this._z=Math.asin(clamp$1(ht,-1,1)),Math.abs(ht)<.9999999?(this._x=Math.atan2(-bt,mt),this._y=Math.atan2(-vt,ot)):(this._x=0,this._y=Math.atan2(ut,xt));break;case"XZY":this._z=Math.asin(-clamp$1(lt,-1,1)),Math.abs(lt)<.9999999?(this._x=Math.atan2(At,mt),this._y=Math.atan2(ut,ot)):(this._x=Math.atan2(-bt,xt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+rt)}return this._order=rt,at===!0&&this._onChangeCallback(),this}setFromQuaternion(tt,rt,at){return _matrix$1.makeRotationFromQuaternion(tt),this.setFromRotationMatrix(_matrix$1,rt,at)}setFromVector3(tt,rt=this._order){return this.set(tt.x,tt.y,tt.z,rt)}reorder(tt){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,tt)}equals(tt){return tt._x===this._x&&tt._y===this._y&&tt._z===this._z&&tt._order===this._order}fromArray(tt){return this._x=tt[0],this._y=tt[1],this._z=tt[2],tt[3]!==void 0&&(this._order=tt[3]),this._onChangeCallback(),this}toArray(tt=[],rt=0){return tt[rt]=this._x,tt[rt+1]=this._y,tt[rt+2]=this._z,tt[rt+3]=this._order,tt}_onChange(tt){return this._onChangeCallback=tt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Euler.DefaultOrder="XYZ",Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Layers{constructor(){this.mask=1}set(tt){this.mask=(1<<tt|0)>>>0}enable(tt){this.mask|=1<<tt|0}enableAll(){this.mask=-1}toggle(tt){this.mask^=1<<tt|0}disable(tt){this.mask&=~(1<<tt|0)}disableAll(){this.mask=0}test(tt){return(this.mask&tt.mask)!==0}isEnabled(tt){return(this.mask&(1<<tt|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const tt=new Vector3,rt=new Euler,at=new Quaternion,st=new Vector3(1,1,1);function ot(){at.setFromEuler(rt,!1)}function lt(){rt.setFromQuaternion(at,void 0,!1)}rt._onChange(ot),at._onChange(lt),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:tt},rotation:{configurable:!0,enumerable:!0,value:rt},quaternion:{configurable:!0,enumerable:!0,value:at},scale:{configurable:!0,enumerable:!0,value:st},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DefaultMatrixWorldAutoUpdate,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(tt){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(tt),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(tt){return this.quaternion.premultiply(tt),this}setRotationFromAxisAngle(tt,rt){this.quaternion.setFromAxisAngle(tt,rt)}setRotationFromEuler(tt){this.quaternion.setFromEuler(tt,!0)}setRotationFromMatrix(tt){this.quaternion.setFromRotationMatrix(tt)}setRotationFromQuaternion(tt){this.quaternion.copy(tt)}rotateOnAxis(tt,rt){return _q1.setFromAxisAngle(tt,rt),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(tt,rt){return _q1.setFromAxisAngle(tt,rt),this.quaternion.premultiply(_q1),this}rotateX(tt){return this.rotateOnAxis(_xAxis,tt)}rotateY(tt){return this.rotateOnAxis(_yAxis,tt)}rotateZ(tt){return this.rotateOnAxis(_zAxis,tt)}translateOnAxis(tt,rt){return _v1$4.copy(tt).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(rt)),this}translateX(tt){return this.translateOnAxis(_xAxis,tt)}translateY(tt){return this.translateOnAxis(_yAxis,tt)}translateZ(tt){return this.translateOnAxis(_zAxis,tt)}localToWorld(tt){return tt.applyMatrix4(this.matrixWorld)}worldToLocal(tt){return tt.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(tt,rt,at){tt.isVector3?_target.copy(tt):_target.set(tt,rt,at);const st=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),st&&(_m1$1.extractRotation(st.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(tt){if(arguments.length>1){for(let rt=0;rt<arguments.length;rt++)this.add(arguments[rt]);return this}return tt===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",tt),this):(tt&&tt.isObject3D?(tt.parent!==null&&tt.parent.remove(tt),tt.parent=this,this.children.push(tt),tt.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",tt),this)}remove(tt){if(arguments.length>1){for(let at=0;at<arguments.length;at++)this.remove(arguments[at]);return this}const rt=this.children.indexOf(tt);return rt!==-1&&(tt.parent=null,this.children.splice(rt,1),tt.dispatchEvent(_removedEvent)),this}removeFromParent(){const tt=this.parent;return tt!==null&&tt.remove(this),this}clear(){for(let tt=0;tt<this.children.length;tt++){const rt=this.children[tt];rt.parent=null,rt.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(tt){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),tt.parent!==null&&(tt.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(tt.parent.matrixWorld)),tt.applyMatrix4(_m1$1),this.add(tt),tt.updateWorldMatrix(!1,!0),this}getObjectById(tt){return this.getObjectByProperty("id",tt)}getObjectByName(tt){return this.getObjectByProperty("name",tt)}getObjectByProperty(tt,rt){if(this[tt]===rt)return this;for(let at=0,st=this.children.length;at<st;at++){const lt=this.children[at].getObjectByProperty(tt,rt);if(lt!==void 0)return lt}}getWorldPosition(tt){return this.updateWorldMatrix(!0,!1),tt.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(tt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,tt,_scale$2),tt}getWorldScale(tt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,tt),tt}getWorldDirection(tt){this.updateWorldMatrix(!0,!1);const rt=this.matrixWorld.elements;return tt.set(rt[8],rt[9],rt[10]).normalize()}raycast(){}traverse(tt){tt(this);const rt=this.children;for(let at=0,st=rt.length;at<st;at++)rt[at].traverse(tt)}traverseVisible(tt){if(this.visible===!1)return;tt(this);const rt=this.children;for(let at=0,st=rt.length;at<st;at++)rt[at].traverseVisible(tt)}traverseAncestors(tt){const rt=this.parent;rt!==null&&(tt(rt),rt.traverseAncestors(tt))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(tt){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||tt)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,tt=!0);const rt=this.children;for(let at=0,st=rt.length;at<st;at++){const ot=rt[at];(ot.matrixWorldAutoUpdate===!0||tt===!0)&&ot.updateMatrixWorld(tt)}}updateWorldMatrix(tt,rt){const at=this.parent;if(tt===!0&&at!==null&&at.matrixWorldAutoUpdate===!0&&at.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),rt===!0){const st=this.children;for(let ot=0,lt=st.length;ot<lt;ot++){const ut=st[ot];ut.matrixWorldAutoUpdate===!0&&ut.updateWorldMatrix(!1,!0)}}}toJSON(tt){const rt=tt===void 0||typeof tt=="string",at={};rt&&(tt={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},at.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const st={};st.uuid=this.uuid,st.type=this.type,this.name!==""&&(st.name=this.name),this.castShadow===!0&&(st.castShadow=!0),this.receiveShadow===!0&&(st.receiveShadow=!0),this.visible===!1&&(st.visible=!1),this.frustumCulled===!1&&(st.frustumCulled=!1),this.renderOrder!==0&&(st.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(st.userData=this.userData),st.layers=this.layers.mask,st.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(st.matrixAutoUpdate=!1),this.isInstancedMesh&&(st.type="InstancedMesh",st.count=this.count,st.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(st.instanceColor=this.instanceColor.toJSON()));function ot(ut,ht){return ut[ht.uuid]===void 0&&(ut[ht.uuid]=ht.toJSON(tt)),ht.uuid}if(this.isScene)this.background&&(this.background.isColor?st.background=this.background.toJSON():this.background.isTexture&&(st.background=this.background.toJSON(tt).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(st.environment=this.environment.toJSON(tt).uuid);else if(this.isMesh||this.isLine||this.isPoints){st.geometry=ot(tt.geometries,this.geometry);const ut=this.geometry.parameters;if(ut!==void 0&&ut.shapes!==void 0){const ht=ut.shapes;if(Array.isArray(ht))for(let mt=0,bt=ht.length;mt<bt;mt++){const vt=ht[mt];ot(tt.shapes,vt)}else ot(tt.shapes,ht)}}if(this.isSkinnedMesh&&(st.bindMode=this.bindMode,st.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(ot(tt.skeletons,this.skeleton),st.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const ut=[];for(let ht=0,mt=this.material.length;ht<mt;ht++)ut.push(ot(tt.materials,this.material[ht]));st.material=ut}else st.material=ot(tt.materials,this.material);if(this.children.length>0){st.children=[];for(let ut=0;ut<this.children.length;ut++)st.children.push(this.children[ut].toJSON(tt).object)}if(this.animations.length>0){st.animations=[];for(let ut=0;ut<this.animations.length;ut++){const ht=this.animations[ut];st.animations.push(ot(tt.animations,ht))}}if(rt){const ut=lt(tt.geometries),ht=lt(tt.materials),mt=lt(tt.textures),bt=lt(tt.images),vt=lt(tt.shapes),At=lt(tt.skeletons),xt=lt(tt.animations),Et=lt(tt.nodes);ut.length>0&&(at.geometries=ut),ht.length>0&&(at.materials=ht),mt.length>0&&(at.textures=mt),bt.length>0&&(at.images=bt),vt.length>0&&(at.shapes=vt),At.length>0&&(at.skeletons=At),xt.length>0&&(at.animations=xt),Et.length>0&&(at.nodes=Et)}return at.object=st,at;function lt(ut){const ht=[];for(const mt in ut){const bt=ut[mt];delete bt.metadata,ht.push(bt)}return ht}}clone(tt){return new this.constructor().copy(this,tt)}copy(tt,rt=!0){if(this.name=tt.name,this.up.copy(tt.up),this.position.copy(tt.position),this.rotation.order=tt.rotation.order,this.quaternion.copy(tt.quaternion),this.scale.copy(tt.scale),this.matrix.copy(tt.matrix),this.matrixWorld.copy(tt.matrixWorld),this.matrixAutoUpdate=tt.matrixAutoUpdate,this.matrixWorldNeedsUpdate=tt.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=tt.matrixWorldAutoUpdate,this.layers.mask=tt.layers.mask,this.visible=tt.visible,this.castShadow=tt.castShadow,this.receiveShadow=tt.receiveShadow,this.frustumCulled=tt.frustumCulled,this.renderOrder=tt.renderOrder,this.userData=JSON.parse(JSON.stringify(tt.userData)),rt===!0)for(let at=0;at<tt.children.length;at++){const st=tt.children[at];this.add(st.clone())}return this}}Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.DefaultMatrixWorldAutoUpdate=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(tt=new Vector3,rt=new Vector3,at=new Vector3){this.a=tt,this.b=rt,this.c=at}static getNormal(tt,rt,at,st){st.subVectors(at,rt),_v0$1.subVectors(tt,rt),st.cross(_v0$1);const ot=st.lengthSq();return ot>0?st.multiplyScalar(1/Math.sqrt(ot)):st.set(0,0,0)}static getBarycoord(tt,rt,at,st,ot){_v0$1.subVectors(st,rt),_v1$3.subVectors(at,rt),_v2$2.subVectors(tt,rt);const lt=_v0$1.dot(_v0$1),ut=_v0$1.dot(_v1$3),ht=_v0$1.dot(_v2$2),mt=_v1$3.dot(_v1$3),bt=_v1$3.dot(_v2$2),vt=lt*mt-ut*ut;if(vt===0)return ot.set(-2,-1,-1);const At=1/vt,xt=(mt*ht-ut*bt)*At,Et=(lt*bt-ut*ht)*At;return ot.set(1-xt-Et,Et,xt)}static containsPoint(tt,rt,at,st){return this.getBarycoord(tt,rt,at,st,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(tt,rt,at,st,ot,lt,ut,ht){return this.getBarycoord(tt,rt,at,st,_v3$1),ht.set(0,0),ht.addScaledVector(ot,_v3$1.x),ht.addScaledVector(lt,_v3$1.y),ht.addScaledVector(ut,_v3$1.z),ht}static isFrontFacing(tt,rt,at,st){return _v0$1.subVectors(at,rt),_v1$3.subVectors(tt,rt),_v0$1.cross(_v1$3).dot(st)<0}set(tt,rt,at){return this.a.copy(tt),this.b.copy(rt),this.c.copy(at),this}setFromPointsAndIndices(tt,rt,at,st){return this.a.copy(tt[rt]),this.b.copy(tt[at]),this.c.copy(tt[st]),this}setFromAttributeAndIndices(tt,rt,at,st){return this.a.fromBufferAttribute(tt,rt),this.b.fromBufferAttribute(tt,at),this.c.fromBufferAttribute(tt,st),this}clone(){return new this.constructor().copy(this)}copy(tt){return this.a.copy(tt.a),this.b.copy(tt.b),this.c.copy(tt.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(tt){return tt.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(tt){return Triangle.getNormal(this.a,this.b,this.c,tt)}getPlane(tt){return tt.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(tt,rt){return Triangle.getBarycoord(tt,this.a,this.b,this.c,rt)}getUV(tt,rt,at,st,ot){return Triangle.getUV(tt,this.a,this.b,this.c,rt,at,st,ot)}containsPoint(tt){return Triangle.containsPoint(tt,this.a,this.b,this.c)}isFrontFacing(tt){return Triangle.isFrontFacing(this.a,this.b,this.c,tt)}intersectsBox(tt){return tt.intersectsTriangle(this)}closestPointToPoint(tt,rt){const at=this.a,st=this.b,ot=this.c;let lt,ut;_vab.subVectors(st,at),_vac.subVectors(ot,at),_vap.subVectors(tt,at);const ht=_vab.dot(_vap),mt=_vac.dot(_vap);if(ht<=0&&mt<=0)return rt.copy(at);_vbp.subVectors(tt,st);const bt=_vab.dot(_vbp),vt=_vac.dot(_vbp);if(bt>=0&&vt<=bt)return rt.copy(st);const At=ht*vt-bt*mt;if(At<=0&&ht>=0&&bt<=0)return lt=ht/(ht-bt),rt.copy(at).addScaledVector(_vab,lt);_vcp.subVectors(tt,ot);const xt=_vab.dot(_vcp),Et=_vac.dot(_vcp);if(Et>=0&&xt<=Et)return rt.copy(ot);const Tt=xt*mt-ht*Et;if(Tt<=0&&mt>=0&&Et<=0)return ut=mt/(mt-Et),rt.copy(at).addScaledVector(_vac,ut);const wt=bt*Et-xt*vt;if(wt<=0&&vt-bt>=0&&xt-Et>=0)return _vbc.subVectors(ot,st),ut=(vt-bt)/(vt-bt+(xt-Et)),rt.copy(st).addScaledVector(_vbc,ut);const Ct=1/(wt+Tt+At);return lt=Tt*Ct,ut=At*Ct,rt.copy(at).addScaledVector(_vab,lt).addScaledVector(_vac,ut)}equals(tt){return tt.a.equals(this.a)&&tt.b.equals(this.b)&&tt.c.equals(this.c)}}let materialId=0;class Material$1 extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(tt){this._alphaTest>0!=tt>0&&this.version++,this._alphaTest=tt}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(tt){if(tt!==void 0)for(const rt in tt){const at=tt[rt];if(at===void 0){console.warn("THREE.Material: '"+rt+"' parameter is undefined.");continue}const st=this[rt];if(st===void 0){console.warn("THREE."+this.type+": '"+rt+"' is not a property of this material.");continue}st&&st.isColor?st.set(at):st&&st.isVector3&&at&&at.isVector3?st.copy(at):this[rt]=at}}toJSON(tt){const rt=tt===void 0||typeof tt=="string";rt&&(tt={textures:{},images:{}});const at={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};at.uuid=this.uuid,at.type=this.type,this.name!==""&&(at.name=this.name),this.color&&this.color.isColor&&(at.color=this.color.getHex()),this.roughness!==void 0&&(at.roughness=this.roughness),this.metalness!==void 0&&(at.metalness=this.metalness),this.sheen!==void 0&&(at.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(at.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(at.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(at.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(at.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(at.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(at.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(at.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(at.shininess=this.shininess),this.clearcoat!==void 0&&(at.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(at.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(at.clearcoatMap=this.clearcoatMap.toJSON(tt).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(at.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(tt).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(at.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(tt).uuid,at.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(at.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(at.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(at.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(at.iridescenceMap=this.iridescenceMap.toJSON(tt).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(at.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(tt).uuid),this.map&&this.map.isTexture&&(at.map=this.map.toJSON(tt).uuid),this.matcap&&this.matcap.isTexture&&(at.matcap=this.matcap.toJSON(tt).uuid),this.alphaMap&&this.alphaMap.isTexture&&(at.alphaMap=this.alphaMap.toJSON(tt).uuid),this.lightMap&&this.lightMap.isTexture&&(at.lightMap=this.lightMap.toJSON(tt).uuid,at.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(at.aoMap=this.aoMap.toJSON(tt).uuid,at.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(at.bumpMap=this.bumpMap.toJSON(tt).uuid,at.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(at.normalMap=this.normalMap.toJSON(tt).uuid,at.normalMapType=this.normalMapType,at.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(at.displacementMap=this.displacementMap.toJSON(tt).uuid,at.displacementScale=this.displacementScale,at.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(at.roughnessMap=this.roughnessMap.toJSON(tt).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(at.metalnessMap=this.metalnessMap.toJSON(tt).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(at.emissiveMap=this.emissiveMap.toJSON(tt).uuid),this.specularMap&&this.specularMap.isTexture&&(at.specularMap=this.specularMap.toJSON(tt).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(at.specularIntensityMap=this.specularIntensityMap.toJSON(tt).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(at.specularColorMap=this.specularColorMap.toJSON(tt).uuid),this.envMap&&this.envMap.isTexture&&(at.envMap=this.envMap.toJSON(tt).uuid,this.combine!==void 0&&(at.combine=this.combine)),this.envMapIntensity!==void 0&&(at.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(at.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(at.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(at.gradientMap=this.gradientMap.toJSON(tt).uuid),this.transmission!==void 0&&(at.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(at.transmissionMap=this.transmissionMap.toJSON(tt).uuid),this.thickness!==void 0&&(at.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(at.thicknessMap=this.thicknessMap.toJSON(tt).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(at.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(at.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(at.size=this.size),this.shadowSide!==null&&(at.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(at.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(at.blending=this.blending),this.side!==FrontSide&&(at.side=this.side),this.vertexColors&&(at.vertexColors=!0),this.opacity<1&&(at.opacity=this.opacity),this.transparent===!0&&(at.transparent=this.transparent),at.depthFunc=this.depthFunc,at.depthTest=this.depthTest,at.depthWrite=this.depthWrite,at.colorWrite=this.colorWrite,at.stencilWrite=this.stencilWrite,at.stencilWriteMask=this.stencilWriteMask,at.stencilFunc=this.stencilFunc,at.stencilRef=this.stencilRef,at.stencilFuncMask=this.stencilFuncMask,at.stencilFail=this.stencilFail,at.stencilZFail=this.stencilZFail,at.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(at.rotation=this.rotation),this.polygonOffset===!0&&(at.polygonOffset=!0),this.polygonOffsetFactor!==0&&(at.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(at.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(at.linewidth=this.linewidth),this.dashSize!==void 0&&(at.dashSize=this.dashSize),this.gapSize!==void 0&&(at.gapSize=this.gapSize),this.scale!==void 0&&(at.scale=this.scale),this.dithering===!0&&(at.dithering=!0),this.alphaTest>0&&(at.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(at.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(at.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(at.wireframe=this.wireframe),this.wireframeLinewidth>1&&(at.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(at.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(at.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(at.flatShading=this.flatShading),this.visible===!1&&(at.visible=!1),this.toneMapped===!1&&(at.toneMapped=!1),this.fog===!1&&(at.fog=!1),JSON.stringify(this.userData)!=="{}"&&(at.userData=this.userData);function st(ot){const lt=[];for(const ut in ot){const ht=ot[ut];delete ht.metadata,lt.push(ht)}return lt}if(rt){const ot=st(tt.textures),lt=st(tt.images);ot.length>0&&(at.textures=ot),lt.length>0&&(at.images=lt)}return at}clone(){return new this.constructor().copy(this)}copy(tt){this.name=tt.name,this.blending=tt.blending,this.side=tt.side,this.vertexColors=tt.vertexColors,this.opacity=tt.opacity,this.transparent=tt.transparent,this.blendSrc=tt.blendSrc,this.blendDst=tt.blendDst,this.blendEquation=tt.blendEquation,this.blendSrcAlpha=tt.blendSrcAlpha,this.blendDstAlpha=tt.blendDstAlpha,this.blendEquationAlpha=tt.blendEquationAlpha,this.depthFunc=tt.depthFunc,this.depthTest=tt.depthTest,this.depthWrite=tt.depthWrite,this.stencilWriteMask=tt.stencilWriteMask,this.stencilFunc=tt.stencilFunc,this.stencilRef=tt.stencilRef,this.stencilFuncMask=tt.stencilFuncMask,this.stencilFail=tt.stencilFail,this.stencilZFail=tt.stencilZFail,this.stencilZPass=tt.stencilZPass,this.stencilWrite=tt.stencilWrite;const rt=tt.clippingPlanes;let at=null;if(rt!==null){const st=rt.length;at=new Array(st);for(let ot=0;ot!==st;++ot)at[ot]=rt[ot].clone()}return this.clippingPlanes=at,this.clipIntersection=tt.clipIntersection,this.clipShadows=tt.clipShadows,this.shadowSide=tt.shadowSide,this.colorWrite=tt.colorWrite,this.precision=tt.precision,this.polygonOffset=tt.polygonOffset,this.polygonOffsetFactor=tt.polygonOffsetFactor,this.polygonOffsetUnits=tt.polygonOffsetUnits,this.dithering=tt.dithering,this.alphaTest=tt.alphaTest,this.alphaToCoverage=tt.alphaToCoverage,this.premultipliedAlpha=tt.premultipliedAlpha,this.visible=tt.visible,this.toneMapped=tt.toneMapped,this.userData=JSON.parse(JSON.stringify(tt.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(tt){tt===!0&&this.version++}}class MeshBasicMaterial extends Material$1{constructor(tt){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.map=tt.map,this.lightMap=tt.lightMap,this.lightMapIntensity=tt.lightMapIntensity,this.aoMap=tt.aoMap,this.aoMapIntensity=tt.aoMapIntensity,this.specularMap=tt.specularMap,this.alphaMap=tt.alphaMap,this.envMap=tt.envMap,this.combine=tt.combine,this.reflectivity=tt.reflectivity,this.refractionRatio=tt.refractionRatio,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.wireframeLinecap=tt.wireframeLinecap,this.wireframeLinejoin=tt.wireframeLinejoin,this.fog=tt.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(tt,rt,at){if(Array.isArray(tt))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=tt,this.itemSize=rt,this.count=tt!==void 0?tt.length/rt:0,this.normalized=at===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(tt){tt===!0&&this.version++}setUsage(tt){return this.usage=tt,this}copy(tt){return this.name=tt.name,this.array=new tt.array.constructor(tt.array),this.itemSize=tt.itemSize,this.count=tt.count,this.normalized=tt.normalized,this.usage=tt.usage,this}copyAt(tt,rt,at){tt*=this.itemSize,at*=rt.itemSize;for(let st=0,ot=this.itemSize;st<ot;st++)this.array[tt+st]=rt.array[at+st];return this}copyArray(tt){return this.array.set(tt),this}applyMatrix3(tt){if(this.itemSize===2)for(let rt=0,at=this.count;rt<at;rt++)_vector2$1.fromBufferAttribute(this,rt),_vector2$1.applyMatrix3(tt),this.setXY(rt,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let rt=0,at=this.count;rt<at;rt++)_vector$9.fromBufferAttribute(this,rt),_vector$9.applyMatrix3(tt),this.setXYZ(rt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(tt){for(let rt=0,at=this.count;rt<at;rt++)_vector$9.fromBufferAttribute(this,rt),_vector$9.applyMatrix4(tt),this.setXYZ(rt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(tt){for(let rt=0,at=this.count;rt<at;rt++)_vector$9.fromBufferAttribute(this,rt),_vector$9.applyNormalMatrix(tt),this.setXYZ(rt,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(tt){for(let rt=0,at=this.count;rt<at;rt++)_vector$9.fromBufferAttribute(this,rt),_vector$9.transformDirection(tt),this.setXYZ(rt,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(tt,rt=0){return this.array.set(tt,rt),this}getX(tt){let rt=this.array[tt*this.itemSize];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setX(tt,rt){return this.normalized&&(rt=normalize(rt,this.array)),this.array[tt*this.itemSize]=rt,this}getY(tt){let rt=this.array[tt*this.itemSize+1];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setY(tt,rt){return this.normalized&&(rt=normalize(rt,this.array)),this.array[tt*this.itemSize+1]=rt,this}getZ(tt){let rt=this.array[tt*this.itemSize+2];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setZ(tt,rt){return this.normalized&&(rt=normalize(rt,this.array)),this.array[tt*this.itemSize+2]=rt,this}getW(tt){let rt=this.array[tt*this.itemSize+3];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setW(tt,rt){return this.normalized&&(rt=normalize(rt,this.array)),this.array[tt*this.itemSize+3]=rt,this}setXY(tt,rt,at){return tt*=this.itemSize,this.normalized&&(rt=normalize(rt,this.array),at=normalize(at,this.array)),this.array[tt+0]=rt,this.array[tt+1]=at,this}setXYZ(tt,rt,at,st){return tt*=this.itemSize,this.normalized&&(rt=normalize(rt,this.array),at=normalize(at,this.array),st=normalize(st,this.array)),this.array[tt+0]=rt,this.array[tt+1]=at,this.array[tt+2]=st,this}setXYZW(tt,rt,at,st,ot){return tt*=this.itemSize,this.normalized&&(rt=normalize(rt,this.array),at=normalize(at,this.array),st=normalize(st,this.array),ot=normalize(ot,this.array)),this.array[tt+0]=rt,this.array[tt+1]=at,this.array[tt+2]=st,this.array[tt+3]=ot,this}onUpload(tt){return this.onUploadCallback=tt,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const tt={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(tt.name=this.name),this.usage!==StaticDrawUsage&&(tt.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(tt.updateRange=this.updateRange),tt}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Uint16BufferAttribute extends BufferAttribute{constructor(tt,rt,at){super(new Uint16Array(tt),rt,at)}}class Uint32BufferAttribute extends BufferAttribute{constructor(tt,rt,at){super(new Uint32Array(tt),rt,at)}}class Float32BufferAttribute extends BufferAttribute{constructor(tt,rt,at){super(new Float32Array(tt),rt,at)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(tt){return Array.isArray(tt)?this.index=new(arrayNeedsUint32(tt)?Uint32BufferAttribute:Uint16BufferAttribute)(tt,1):this.index=tt,this}getAttribute(tt){return this.attributes[tt]}setAttribute(tt,rt){return this.attributes[tt]=rt,this}deleteAttribute(tt){return delete this.attributes[tt],this}hasAttribute(tt){return this.attributes[tt]!==void 0}addGroup(tt,rt,at=0){this.groups.push({start:tt,count:rt,materialIndex:at})}clearGroups(){this.groups=[]}setDrawRange(tt,rt){this.drawRange.start=tt,this.drawRange.count=rt}applyMatrix4(tt){const rt=this.attributes.position;rt!==void 0&&(rt.applyMatrix4(tt),rt.needsUpdate=!0);const at=this.attributes.normal;if(at!==void 0){const ot=new Matrix3().getNormalMatrix(tt);at.applyNormalMatrix(ot),at.needsUpdate=!0}const st=this.attributes.tangent;return st!==void 0&&(st.transformDirection(tt),st.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(tt){return _m1.makeRotationFromQuaternion(tt),this.applyMatrix4(_m1),this}rotateX(tt){return _m1.makeRotationX(tt),this.applyMatrix4(_m1),this}rotateY(tt){return _m1.makeRotationY(tt),this.applyMatrix4(_m1),this}rotateZ(tt){return _m1.makeRotationZ(tt),this.applyMatrix4(_m1),this}translate(tt,rt,at){return _m1.makeTranslation(tt,rt,at),this.applyMatrix4(_m1),this}scale(tt,rt,at){return _m1.makeScale(tt,rt,at),this.applyMatrix4(_m1),this}lookAt(tt){return _obj.lookAt(tt),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(tt){const rt=[];for(let at=0,st=tt.length;at<st;at++){const ot=tt[at];rt.push(ot.x,ot.y,ot.z||0)}return this.setAttribute("position",new Float32BufferAttribute(rt,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const tt=this.attributes.position,rt=this.morphAttributes.position;if(tt&&tt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(tt!==void 0){if(this.boundingBox.setFromBufferAttribute(tt),rt)for(let at=0,st=rt.length;at<st;at++){const ot=rt[at];_box$1.setFromBufferAttribute(ot),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const tt=this.attributes.position,rt=this.morphAttributes.position;if(tt&&tt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(tt){const at=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(tt),rt)for(let ot=0,lt=rt.length;ot<lt;ot++){const ut=rt[ot];_boxMorphTargets.setFromBufferAttribute(ut),this.morphTargetsRelative?(_vector$8.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$8)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(at);let st=0;for(let ot=0,lt=tt.count;ot<lt;ot++)_vector$8.fromBufferAttribute(tt,ot),st=Math.max(st,at.distanceToSquared(_vector$8));if(rt)for(let ot=0,lt=rt.length;ot<lt;ot++){const ut=rt[ot],ht=this.morphTargetsRelative;for(let mt=0,bt=ut.count;mt<bt;mt++)_vector$8.fromBufferAttribute(ut,mt),ht&&(_offset.fromBufferAttribute(tt,mt),_vector$8.add(_offset)),st=Math.max(st,at.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(st),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const tt=this.index,rt=this.attributes;if(tt===null||rt.position===void 0||rt.normal===void 0||rt.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const at=tt.array,st=rt.position.array,ot=rt.normal.array,lt=rt.uv.array,ut=st.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*ut),4));const ht=this.getAttribute("tangent").array,mt=[],bt=[];for(let jt=0;jt<ut;jt++)mt[jt]=new Vector3,bt[jt]=new Vector3;const vt=new Vector3,At=new Vector3,xt=new Vector3,Et=new Vector2,Tt=new Vector2,wt=new Vector2,Ct=new Vector3,It=new Vector3;function St(jt,kt,zt){vt.fromArray(st,jt*3),At.fromArray(st,kt*3),xt.fromArray(st,zt*3),Et.fromArray(lt,jt*2),Tt.fromArray(lt,kt*2),wt.fromArray(lt,zt*2),At.sub(vt),xt.sub(vt),Tt.sub(Et),wt.sub(Et);const Nt=1/(Tt.x*wt.y-wt.x*Tt.y);!isFinite(Nt)||(Ct.copy(At).multiplyScalar(wt.y).addScaledVector(xt,-Tt.y).multiplyScalar(Nt),It.copy(xt).multiplyScalar(Tt.x).addScaledVector(At,-wt.x).multiplyScalar(Nt),mt[jt].add(Ct),mt[kt].add(Ct),mt[zt].add(Ct),bt[jt].add(It),bt[kt].add(It),bt[zt].add(It))}let Rt=this.groups;Rt.length===0&&(Rt=[{start:0,count:at.length}]);for(let jt=0,kt=Rt.length;jt<kt;++jt){const zt=Rt[jt],Nt=zt.start,Mt=zt.count;for(let Lt=Nt,Ht=Nt+Mt;Lt<Ht;Lt+=3)St(at[Lt+0],at[Lt+1],at[Lt+2])}const Dt=new Vector3,Wt=new Vector3,qt=new Vector3,Vt=new Vector3;function Yt(jt){qt.fromArray(ot,jt*3),Vt.copy(qt);const kt=mt[jt];Dt.copy(kt),Dt.sub(qt.multiplyScalar(qt.dot(kt))).normalize(),Wt.crossVectors(Vt,kt);const Nt=Wt.dot(bt[jt])<0?-1:1;ht[jt*4]=Dt.x,ht[jt*4+1]=Dt.y,ht[jt*4+2]=Dt.z,ht[jt*4+3]=Nt}for(let jt=0,kt=Rt.length;jt<kt;++jt){const zt=Rt[jt],Nt=zt.start,Mt=zt.count;for(let Lt=Nt,Ht=Nt+Mt;Lt<Ht;Lt+=3)Yt(at[Lt+0]),Yt(at[Lt+1]),Yt(at[Lt+2])}}computeVertexNormals(){const tt=this.index,rt=this.getAttribute("position");if(rt!==void 0){let at=this.getAttribute("normal");if(at===void 0)at=new BufferAttribute(new Float32Array(rt.count*3),3),this.setAttribute("normal",at);else for(let At=0,xt=at.count;At<xt;At++)at.setXYZ(At,0,0,0);const st=new Vector3,ot=new Vector3,lt=new Vector3,ut=new Vector3,ht=new Vector3,mt=new Vector3,bt=new Vector3,vt=new Vector3;if(tt)for(let At=0,xt=tt.count;At<xt;At+=3){const Et=tt.getX(At+0),Tt=tt.getX(At+1),wt=tt.getX(At+2);st.fromBufferAttribute(rt,Et),ot.fromBufferAttribute(rt,Tt),lt.fromBufferAttribute(rt,wt),bt.subVectors(lt,ot),vt.subVectors(st,ot),bt.cross(vt),ut.fromBufferAttribute(at,Et),ht.fromBufferAttribute(at,Tt),mt.fromBufferAttribute(at,wt),ut.add(bt),ht.add(bt),mt.add(bt),at.setXYZ(Et,ut.x,ut.y,ut.z),at.setXYZ(Tt,ht.x,ht.y,ht.z),at.setXYZ(wt,mt.x,mt.y,mt.z)}else for(let At=0,xt=rt.count;At<xt;At+=3)st.fromBufferAttribute(rt,At+0),ot.fromBufferAttribute(rt,At+1),lt.fromBufferAttribute(rt,At+2),bt.subVectors(lt,ot),vt.subVectors(st,ot),bt.cross(vt),at.setXYZ(At+0,bt.x,bt.y,bt.z),at.setXYZ(At+1,bt.x,bt.y,bt.z),at.setXYZ(At+2,bt.x,bt.y,bt.z);this.normalizeNormals(),at.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const tt=this.attributes.normal;for(let rt=0,at=tt.count;rt<at;rt++)_vector$8.fromBufferAttribute(tt,rt),_vector$8.normalize(),tt.setXYZ(rt,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function tt(ut,ht){const mt=ut.array,bt=ut.itemSize,vt=ut.normalized,At=new mt.constructor(ht.length*bt);let xt=0,Et=0;for(let Tt=0,wt=ht.length;Tt<wt;Tt++){ut.isInterleavedBufferAttribute?xt=ht[Tt]*ut.data.stride+ut.offset:xt=ht[Tt]*bt;for(let Ct=0;Ct<bt;Ct++)At[Et++]=mt[xt++]}return new BufferAttribute(At,bt,vt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const rt=new BufferGeometry,at=this.index.array,st=this.attributes;for(const ut in st){const ht=st[ut],mt=tt(ht,at);rt.setAttribute(ut,mt)}const ot=this.morphAttributes;for(const ut in ot){const ht=[],mt=ot[ut];for(let bt=0,vt=mt.length;bt<vt;bt++){const At=mt[bt],xt=tt(At,at);ht.push(xt)}rt.morphAttributes[ut]=ht}rt.morphTargetsRelative=this.morphTargetsRelative;const lt=this.groups;for(let ut=0,ht=lt.length;ut<ht;ut++){const mt=lt[ut];rt.addGroup(mt.start,mt.count,mt.materialIndex)}return rt}toJSON(){const tt={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(tt.uuid=this.uuid,tt.type=this.type,this.name!==""&&(tt.name=this.name),Object.keys(this.userData).length>0&&(tt.userData=this.userData),this.parameters!==void 0){const ht=this.parameters;for(const mt in ht)ht[mt]!==void 0&&(tt[mt]=ht[mt]);return tt}tt.data={attributes:{}};const rt=this.index;rt!==null&&(tt.data.index={type:rt.array.constructor.name,array:Array.prototype.slice.call(rt.array)});const at=this.attributes;for(const ht in at){const mt=at[ht];tt.data.attributes[ht]=mt.toJSON(tt.data)}const st={};let ot=!1;for(const ht in this.morphAttributes){const mt=this.morphAttributes[ht],bt=[];for(let vt=0,At=mt.length;vt<At;vt++){const xt=mt[vt];bt.push(xt.toJSON(tt.data))}bt.length>0&&(st[ht]=bt,ot=!0)}ot&&(tt.data.morphAttributes=st,tt.data.morphTargetsRelative=this.morphTargetsRelative);const lt=this.groups;lt.length>0&&(tt.data.groups=JSON.parse(JSON.stringify(lt)));const ut=this.boundingSphere;return ut!==null&&(tt.data.boundingSphere={center:ut.center.toArray(),radius:ut.radius}),tt}clone(){return new this.constructor().copy(this)}copy(tt){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const rt={};this.name=tt.name;const at=tt.index;at!==null&&this.setIndex(at.clone(rt));const st=tt.attributes;for(const mt in st){const bt=st[mt];this.setAttribute(mt,bt.clone(rt))}const ot=tt.morphAttributes;for(const mt in ot){const bt=[],vt=ot[mt];for(let At=0,xt=vt.length;At<xt;At++)bt.push(vt[At].clone(rt));this.morphAttributes[mt]=bt}this.morphTargetsRelative=tt.morphTargetsRelative;const lt=tt.groups;for(let mt=0,bt=lt.length;mt<bt;mt++){const vt=lt[mt];this.addGroup(vt.start,vt.count,vt.materialIndex)}const ut=tt.boundingBox;ut!==null&&(this.boundingBox=ut.clone());const ht=tt.boundingSphere;return ht!==null&&(this.boundingSphere=ht.clone()),this.drawRange.start=tt.drawRange.start,this.drawRange.count=tt.drawRange.count,this.userData=tt.userData,tt.parameters!==void 0&&(this.parameters=Object.assign({},tt.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(tt=new BufferGeometry,rt=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=tt,this.material=rt,this.updateMorphTargets()}copy(tt,rt){return super.copy(tt,rt),tt.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=tt.morphTargetInfluences.slice()),tt.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},tt.morphTargetDictionary)),this.material=tt.material,this.geometry=tt.geometry,this}updateMorphTargets(){const rt=this.geometry.morphAttributes,at=Object.keys(rt);if(at.length>0){const st=rt[at[0]];if(st!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ot=0,lt=st.length;ot<lt;ot++){const ut=st[ot].name||String(ot);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ut]=ot}}}}raycast(tt,rt){const at=this.geometry,st=this.material,ot=this.matrixWorld;if(st===void 0||(at.boundingSphere===null&&at.computeBoundingSphere(),_sphere$3.copy(at.boundingSphere),_sphere$3.applyMatrix4(ot),tt.ray.intersectsSphere(_sphere$3)===!1)||(_inverseMatrix$2.copy(ot).invert(),_ray$2.copy(tt.ray).applyMatrix4(_inverseMatrix$2),at.boundingBox!==null&&_ray$2.intersectsBox(at.boundingBox)===!1))return;let lt;const ut=at.index,ht=at.attributes.position,mt=at.morphAttributes.position,bt=at.morphTargetsRelative,vt=at.attributes.uv,At=at.attributes.uv2,xt=at.groups,Et=at.drawRange;if(ut!==null)if(Array.isArray(st))for(let Tt=0,wt=xt.length;Tt<wt;Tt++){const Ct=xt[Tt],It=st[Ct.materialIndex],St=Math.max(Ct.start,Et.start),Rt=Math.min(ut.count,Math.min(Ct.start+Ct.count,Et.start+Et.count));for(let Dt=St,Wt=Rt;Dt<Wt;Dt+=3){const qt=ut.getX(Dt),Vt=ut.getX(Dt+1),Yt=ut.getX(Dt+2);lt=checkBufferGeometryIntersection(this,It,tt,_ray$2,ht,mt,bt,vt,At,qt,Vt,Yt),lt&&(lt.faceIndex=Math.floor(Dt/3),lt.face.materialIndex=Ct.materialIndex,rt.push(lt))}}else{const Tt=Math.max(0,Et.start),wt=Math.min(ut.count,Et.start+Et.count);for(let Ct=Tt,It=wt;Ct<It;Ct+=3){const St=ut.getX(Ct),Rt=ut.getX(Ct+1),Dt=ut.getX(Ct+2);lt=checkBufferGeometryIntersection(this,st,tt,_ray$2,ht,mt,bt,vt,At,St,Rt,Dt),lt&&(lt.faceIndex=Math.floor(Ct/3),rt.push(lt))}}else if(ht!==void 0)if(Array.isArray(st))for(let Tt=0,wt=xt.length;Tt<wt;Tt++){const Ct=xt[Tt],It=st[Ct.materialIndex],St=Math.max(Ct.start,Et.start),Rt=Math.min(ht.count,Math.min(Ct.start+Ct.count,Et.start+Et.count));for(let Dt=St,Wt=Rt;Dt<Wt;Dt+=3){const qt=Dt,Vt=Dt+1,Yt=Dt+2;lt=checkBufferGeometryIntersection(this,It,tt,_ray$2,ht,mt,bt,vt,At,qt,Vt,Yt),lt&&(lt.faceIndex=Math.floor(Dt/3),lt.face.materialIndex=Ct.materialIndex,rt.push(lt))}}else{const Tt=Math.max(0,Et.start),wt=Math.min(ht.count,Et.start+Et.count);for(let Ct=Tt,It=wt;Ct<It;Ct+=3){const St=Ct,Rt=Ct+1,Dt=Ct+2;lt=checkBufferGeometryIntersection(this,st,tt,_ray$2,ht,mt,bt,vt,At,St,Rt,Dt),lt&&(lt.faceIndex=Math.floor(Ct/3),rt.push(lt))}}}}function checkIntersection(it,tt,rt,at,st,ot,lt,ut){let ht;if(tt.side===BackSide?ht=at.intersectTriangle(lt,ot,st,!0,ut):ht=at.intersectTriangle(st,ot,lt,tt.side!==DoubleSide,ut),ht===null)return null;_intersectionPointWorld.copy(ut),_intersectionPointWorld.applyMatrix4(it.matrixWorld);const mt=rt.ray.origin.distanceTo(_intersectionPointWorld);return mt<rt.near||mt>rt.far?null:{distance:mt,point:_intersectionPointWorld.clone(),object:it}}function checkBufferGeometryIntersection(it,tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt){_vA$1.fromBufferAttribute(st,mt),_vB$1.fromBufferAttribute(st,bt),_vC$1.fromBufferAttribute(st,vt);const At=it.morphTargetInfluences;if(ot&&At){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(let Et=0,Tt=ot.length;Et<Tt;Et++){const wt=At[Et],Ct=ot[Et];wt!==0&&(_tempA.fromBufferAttribute(Ct,mt),_tempB.fromBufferAttribute(Ct,bt),_tempC.fromBufferAttribute(Ct,vt),lt?(_morphA.addScaledVector(_tempA,wt),_morphB.addScaledVector(_tempB,wt),_morphC.addScaledVector(_tempC,wt)):(_morphA.addScaledVector(_tempA.sub(_vA$1),wt),_morphB.addScaledVector(_tempB.sub(_vB$1),wt),_morphC.addScaledVector(_tempC.sub(_vC$1),wt)))}_vA$1.add(_morphA),_vB$1.add(_morphB),_vC$1.add(_morphC)}it.isSkinnedMesh&&(it.boneTransform(mt,_vA$1),it.boneTransform(bt,_vB$1),it.boneTransform(vt,_vC$1));const xt=checkIntersection(it,tt,rt,at,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(xt){ut&&(_uvA$1.fromBufferAttribute(ut,mt),_uvB$1.fromBufferAttribute(ut,bt),_uvC$1.fromBufferAttribute(ut,vt),xt.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),ht&&(_uvA$1.fromBufferAttribute(ht,mt),_uvB$1.fromBufferAttribute(ht,bt),_uvC$1.fromBufferAttribute(ht,vt),xt.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const Et={a:mt,b:bt,c:vt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,Et.normal),xt.face=Et}return xt}class BoxGeometry extends BufferGeometry{constructor(tt=1,rt=1,at=1,st=1,ot=1,lt=1){super(),this.type="BoxGeometry",this.parameters={width:tt,height:rt,depth:at,widthSegments:st,heightSegments:ot,depthSegments:lt};const ut=this;st=Math.floor(st),ot=Math.floor(ot),lt=Math.floor(lt);const ht=[],mt=[],bt=[],vt=[];let At=0,xt=0;Et("z","y","x",-1,-1,at,rt,tt,lt,ot,0),Et("z","y","x",1,-1,at,rt,-tt,lt,ot,1),Et("x","z","y",1,1,tt,at,rt,st,lt,2),Et("x","z","y",1,-1,tt,at,-rt,st,lt,3),Et("x","y","z",1,-1,tt,rt,at,st,ot,4),Et("x","y","z",-1,-1,tt,rt,-at,st,ot,5),this.setIndex(ht),this.setAttribute("position",new Float32BufferAttribute(mt,3)),this.setAttribute("normal",new Float32BufferAttribute(bt,3)),this.setAttribute("uv",new Float32BufferAttribute(vt,2));function Et(Tt,wt,Ct,It,St,Rt,Dt,Wt,qt,Vt,Yt){const jt=Rt/qt,kt=Dt/Vt,zt=Rt/2,Nt=Dt/2,Mt=Wt/2,Lt=qt+1,Ht=Vt+1;let Qt=0,Ut=0;const Bt=new Vector3;for(let Kt=0;Kt<Ht;Kt++){const Gt=Kt*kt-Nt;for(let Pt=0;Pt<Lt;Pt++){const Zt=Pt*jt-zt;Bt[Tt]=Zt*It,Bt[wt]=Gt*St,Bt[Ct]=Mt,mt.push(Bt.x,Bt.y,Bt.z),Bt[Tt]=0,Bt[wt]=0,Bt[Ct]=Wt>0?1:-1,bt.push(Bt.x,Bt.y,Bt.z),vt.push(Pt/qt),vt.push(1-Kt/Vt),Qt+=1}}for(let Kt=0;Kt<Vt;Kt++)for(let Gt=0;Gt<qt;Gt++){const Pt=At+Gt+Lt*Kt,Zt=At+Gt+Lt*(Kt+1),an=At+(Gt+1)+Lt*(Kt+1),Jt=At+(Gt+1)+Lt*Kt;ht.push(Pt,Zt,Jt),ht.push(Zt,an,Jt),Ut+=6}ut.addGroup(xt,Ut,Yt),xt+=Ut,At+=Qt}}static fromJSON(tt){return new BoxGeometry(tt.width,tt.height,tt.depth,tt.widthSegments,tt.heightSegments,tt.depthSegments)}}function cloneUniforms(it){const tt={};for(const rt in it){tt[rt]={};for(const at in it[rt]){const st=it[rt][at];st&&(st.isColor||st.isMatrix3||st.isMatrix4||st.isVector2||st.isVector3||st.isVector4||st.isTexture||st.isQuaternion)?tt[rt][at]=st.clone():Array.isArray(st)?tt[rt][at]=st.slice():tt[rt][at]=st}}return tt}function mergeUniforms(it){const tt={};for(let rt=0;rt<it.length;rt++){const at=cloneUniforms(it[rt]);for(const st in at)tt[st]=at[st]}return tt}function cloneUniformsGroups(it){const tt=[];for(let rt=0;rt<it.length;rt++)tt.push(it[rt].clone());return tt}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material$1{constructor(tt){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,tt!==void 0&&this.setValues(tt)}copy(tt){return super.copy(tt),this.fragmentShader=tt.fragmentShader,this.vertexShader=tt.vertexShader,this.uniforms=cloneUniforms(tt.uniforms),this.uniformsGroups=cloneUniformsGroups(tt.uniformsGroups),this.defines=Object.assign({},tt.defines),this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.fog=tt.fog,this.lights=tt.lights,this.clipping=tt.clipping,this.extensions=Object.assign({},tt.extensions),this.glslVersion=tt.glslVersion,this}toJSON(tt){const rt=super.toJSON(tt);rt.glslVersion=this.glslVersion,rt.uniforms={};for(const st in this.uniforms){const lt=this.uniforms[st].value;lt&&lt.isTexture?rt.uniforms[st]={type:"t",value:lt.toJSON(tt).uuid}:lt&&lt.isColor?rt.uniforms[st]={type:"c",value:lt.getHex()}:lt&&lt.isVector2?rt.uniforms[st]={type:"v2",value:lt.toArray()}:lt&&lt.isVector3?rt.uniforms[st]={type:"v3",value:lt.toArray()}:lt&&lt.isVector4?rt.uniforms[st]={type:"v4",value:lt.toArray()}:lt&&lt.isMatrix3?rt.uniforms[st]={type:"m3",value:lt.toArray()}:lt&&lt.isMatrix4?rt.uniforms[st]={type:"m4",value:lt.toArray()}:rt.uniforms[st]={value:lt}}Object.keys(this.defines).length>0&&(rt.defines=this.defines),rt.vertexShader=this.vertexShader,rt.fragmentShader=this.fragmentShader;const at={};for(const st in this.extensions)this.extensions[st]===!0&&(at[st]=!0);return Object.keys(at).length>0&&(rt.extensions=at),rt}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(tt,rt){return super.copy(tt,rt),this.matrixWorldInverse.copy(tt.matrixWorldInverse),this.projectionMatrix.copy(tt.projectionMatrix),this.projectionMatrixInverse.copy(tt.projectionMatrixInverse),this}getWorldDirection(tt){this.updateWorldMatrix(!0,!1);const rt=this.matrixWorld.elements;return tt.set(-rt[8],-rt[9],-rt[10]).normalize()}updateMatrixWorld(tt){super.updateMatrixWorld(tt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(tt,rt){super.updateWorldMatrix(tt,rt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor(tt=50,rt=1,at=.1,st=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=tt,this.zoom=1,this.near=at,this.far=st,this.focus=10,this.aspect=rt,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(tt,rt){return super.copy(tt,rt),this.fov=tt.fov,this.zoom=tt.zoom,this.near=tt.near,this.far=tt.far,this.focus=tt.focus,this.aspect=tt.aspect,this.view=tt.view===null?null:Object.assign({},tt.view),this.filmGauge=tt.filmGauge,this.filmOffset=tt.filmOffset,this}setFocalLength(tt){const rt=.5*this.getFilmHeight()/tt;this.fov=RAD2DEG*2*Math.atan(rt),this.updateProjectionMatrix()}getFocalLength(){const tt=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/tt}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(tt,rt,at,st,ot,lt){this.aspect=tt/rt,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=tt,this.view.fullHeight=rt,this.view.offsetX=at,this.view.offsetY=st,this.view.width=ot,this.view.height=lt,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const tt=this.near;let rt=tt*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,at=2*rt,st=this.aspect*at,ot=-.5*st;const lt=this.view;if(this.view!==null&&this.view.enabled){const ht=lt.fullWidth,mt=lt.fullHeight;ot+=lt.offsetX*st/ht,rt-=lt.offsetY*at/mt,st*=lt.width/ht,at*=lt.height/mt}const ut=this.filmOffset;ut!==0&&(ot+=tt*ut/this.getFilmWidth()),this.projectionMatrix.makePerspective(ot,ot+st,rt,rt-at,tt,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(tt){const rt=super.toJSON(tt);return rt.object.fov=this.fov,rt.object.zoom=this.zoom,rt.object.near=this.near,rt.object.far=this.far,rt.object.focus=this.focus,rt.object.aspect=this.aspect,this.view!==null&&(rt.object.view=Object.assign({},this.view)),rt.object.filmGauge=this.filmGauge,rt.object.filmOffset=this.filmOffset,rt}}const fov=90,aspect=1;class CubeCamera extends Object3D{constructor(tt,rt,at){super(),this.type="CubeCamera",this.renderTarget=at;const st=new PerspectiveCamera(fov,aspect,tt,rt);st.layers=this.layers,st.up.set(0,-1,0),st.lookAt(new Vector3(1,0,0)),this.add(st);const ot=new PerspectiveCamera(fov,aspect,tt,rt);ot.layers=this.layers,ot.up.set(0,-1,0),ot.lookAt(new Vector3(-1,0,0)),this.add(ot);const lt=new PerspectiveCamera(fov,aspect,tt,rt);lt.layers=this.layers,lt.up.set(0,0,1),lt.lookAt(new Vector3(0,1,0)),this.add(lt);const ut=new PerspectiveCamera(fov,aspect,tt,rt);ut.layers=this.layers,ut.up.set(0,0,-1),ut.lookAt(new Vector3(0,-1,0)),this.add(ut);const ht=new PerspectiveCamera(fov,aspect,tt,rt);ht.layers=this.layers,ht.up.set(0,-1,0),ht.lookAt(new Vector3(0,0,1)),this.add(ht);const mt=new PerspectiveCamera(fov,aspect,tt,rt);mt.layers=this.layers,mt.up.set(0,-1,0),mt.lookAt(new Vector3(0,0,-1)),this.add(mt)}update(tt,rt){this.parent===null&&this.updateMatrixWorld();const at=this.renderTarget,[st,ot,lt,ut,ht,mt]=this.children,bt=tt.getRenderTarget(),vt=tt.toneMapping,At=tt.xr.enabled;tt.toneMapping=NoToneMapping,tt.xr.enabled=!1;const xt=at.texture.generateMipmaps;at.texture.generateMipmaps=!1,tt.setRenderTarget(at,0),tt.render(rt,st),tt.setRenderTarget(at,1),tt.render(rt,ot),tt.setRenderTarget(at,2),tt.render(rt,lt),tt.setRenderTarget(at,3),tt.render(rt,ut),tt.setRenderTarget(at,4),tt.render(rt,ht),at.texture.generateMipmaps=xt,tt.setRenderTarget(at,5),tt.render(rt,mt),tt.setRenderTarget(bt),tt.toneMapping=vt,tt.xr.enabled=At,at.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture$1{constructor(tt,rt,at,st,ot,lt,ut,ht,mt,bt){tt=tt!==void 0?tt:[],rt=rt!==void 0?rt:CubeReflectionMapping,super(tt,rt,at,st,ot,lt,ut,ht,mt,bt),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(tt){this.image=tt}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(tt=1,rt={}){super(tt,tt,rt),this.isWebGLCubeRenderTarget=!0;const at={width:tt,height:tt,depth:1},st=[at,at,at,at,at,at];this.texture=new CubeTexture(st,rt.mapping,rt.wrapS,rt.wrapT,rt.magFilter,rt.minFilter,rt.format,rt.type,rt.anisotropy,rt.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=rt.generateMipmaps!==void 0?rt.generateMipmaps:!1,this.texture.minFilter=rt.minFilter!==void 0?rt.minFilter:LinearFilter}fromEquirectangularTexture(tt,rt){this.texture.type=rt.type,this.texture.encoding=rt.encoding,this.texture.generateMipmaps=rt.generateMipmaps,this.texture.minFilter=rt.minFilter,this.texture.magFilter=rt.magFilter;const at={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},st=new BoxGeometry(5,5,5),ot=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(at.uniforms),vertexShader:at.vertexShader,fragmentShader:at.fragmentShader,side:BackSide,blending:NoBlending});ot.uniforms.tEquirect.value=rt;const lt=new Mesh(st,ot),ut=rt.minFilter;return rt.minFilter===LinearMipmapLinearFilter&&(rt.minFilter=LinearFilter),new CubeCamera(1,10,this).update(tt,lt),rt.minFilter=ut,lt.geometry.dispose(),lt.material.dispose(),this}clear(tt,rt,at,st){const ot=tt.getRenderTarget();for(let lt=0;lt<6;lt++)tt.setRenderTarget(this,lt),tt.clear(rt,at,st);tt.setRenderTarget(ot)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(tt=new Vector3(1,0,0),rt=0){this.isPlane=!0,this.normal=tt,this.constant=rt}set(tt,rt){return this.normal.copy(tt),this.constant=rt,this}setComponents(tt,rt,at,st){return this.normal.set(tt,rt,at),this.constant=st,this}setFromNormalAndCoplanarPoint(tt,rt){return this.normal.copy(tt),this.constant=-rt.dot(this.normal),this}setFromCoplanarPoints(tt,rt,at){const st=_vector1.subVectors(at,rt).cross(_vector2.subVectors(tt,rt)).normalize();return this.setFromNormalAndCoplanarPoint(st,tt),this}copy(tt){return this.normal.copy(tt.normal),this.constant=tt.constant,this}normalize(){const tt=1/this.normal.length();return this.normal.multiplyScalar(tt),this.constant*=tt,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(tt){return this.normal.dot(tt)+this.constant}distanceToSphere(tt){return this.distanceToPoint(tt.center)-tt.radius}projectPoint(tt,rt){return rt.copy(this.normal).multiplyScalar(-this.distanceToPoint(tt)).add(tt)}intersectLine(tt,rt){const at=tt.delta(_vector1),st=this.normal.dot(at);if(st===0)return this.distanceToPoint(tt.start)===0?rt.copy(tt.start):null;const ot=-(tt.start.dot(this.normal)+this.constant)/st;return ot<0||ot>1?null:rt.copy(at).multiplyScalar(ot).add(tt.start)}intersectsLine(tt){const rt=this.distanceToPoint(tt.start),at=this.distanceToPoint(tt.end);return rt<0&&at>0||at<0&&rt>0}intersectsBox(tt){return tt.intersectsPlane(this)}intersectsSphere(tt){return tt.intersectsPlane(this)}coplanarPoint(tt){return tt.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(tt,rt){const at=rt||_normalMatrix.getNormalMatrix(tt),st=this.coplanarPoint(_vector1).applyMatrix4(tt),ot=this.normal.applyMatrix3(at).normalize();return this.constant=-st.dot(ot),this}translate(tt){return this.constant-=tt.dot(this.normal),this}equals(tt){return tt.normal.equals(this.normal)&&tt.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$2=new Sphere,_vector$7=new Vector3;class Frustum{constructor(tt=new Plane,rt=new Plane,at=new Plane,st=new Plane,ot=new Plane,lt=new Plane){this.planes=[tt,rt,at,st,ot,lt]}set(tt,rt,at,st,ot,lt){const ut=this.planes;return ut[0].copy(tt),ut[1].copy(rt),ut[2].copy(at),ut[3].copy(st),ut[4].copy(ot),ut[5].copy(lt),this}copy(tt){const rt=this.planes;for(let at=0;at<6;at++)rt[at].copy(tt.planes[at]);return this}setFromProjectionMatrix(tt){const rt=this.planes,at=tt.elements,st=at[0],ot=at[1],lt=at[2],ut=at[3],ht=at[4],mt=at[5],bt=at[6],vt=at[7],At=at[8],xt=at[9],Et=at[10],Tt=at[11],wt=at[12],Ct=at[13],It=at[14],St=at[15];return rt[0].setComponents(ut-st,vt-ht,Tt-At,St-wt).normalize(),rt[1].setComponents(ut+st,vt+ht,Tt+At,St+wt).normalize(),rt[2].setComponents(ut+ot,vt+mt,Tt+xt,St+Ct).normalize(),rt[3].setComponents(ut-ot,vt-mt,Tt-xt,St-Ct).normalize(),rt[4].setComponents(ut-lt,vt-bt,Tt-Et,St-It).normalize(),rt[5].setComponents(ut+lt,vt+bt,Tt+Et,St+It).normalize(),this}intersectsObject(tt){const rt=tt.geometry;return rt.boundingSphere===null&&rt.computeBoundingSphere(),_sphere$2.copy(rt.boundingSphere).applyMatrix4(tt.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(tt){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(tt.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(tt){const rt=this.planes,at=tt.center,st=-tt.radius;for(let ot=0;ot<6;ot++)if(rt[ot].distanceToPoint(at)<st)return!1;return!0}intersectsBox(tt){const rt=this.planes;for(let at=0;at<6;at++){const st=rt[at];if(_vector$7.x=st.normal.x>0?tt.max.x:tt.min.x,_vector$7.y=st.normal.y>0?tt.max.y:tt.min.y,_vector$7.z=st.normal.z>0?tt.max.z:tt.min.z,st.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(tt){const rt=this.planes;for(let at=0;at<6;at++)if(rt[at].distanceToPoint(tt)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let it=null,tt=!1,rt=null,at=null;function st(ot,lt){rt(ot,lt),at=it.requestAnimationFrame(st)}return{start:function(){tt!==!0&&rt!==null&&(at=it.requestAnimationFrame(st),tt=!0)},stop:function(){it.cancelAnimationFrame(at),tt=!1},setAnimationLoop:function(ot){rt=ot},setContext:function(ot){it=ot}}}function WebGLAttributes(it,tt){const rt=tt.isWebGL2,at=new WeakMap;function st(mt,bt){const vt=mt.array,At=mt.usage,xt=it.createBuffer();it.bindBuffer(bt,xt),it.bufferData(bt,vt,At),mt.onUploadCallback();let Et;if(vt instanceof Float32Array)Et=5126;else if(vt instanceof Uint16Array)if(mt.isFloat16BufferAttribute)if(rt)Et=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else Et=5123;else if(vt instanceof Int16Array)Et=5122;else if(vt instanceof Uint32Array)Et=5125;else if(vt instanceof Int32Array)Et=5124;else if(vt instanceof Int8Array)Et=5120;else if(vt instanceof Uint8Array)Et=5121;else if(vt instanceof Uint8ClampedArray)Et=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+vt);return{buffer:xt,type:Et,bytesPerElement:vt.BYTES_PER_ELEMENT,version:mt.version}}function ot(mt,bt,vt){const At=bt.array,xt=bt.updateRange;it.bindBuffer(vt,mt),xt.count===-1?it.bufferSubData(vt,0,At):(rt?it.bufferSubData(vt,xt.offset*At.BYTES_PER_ELEMENT,At,xt.offset,xt.count):it.bufferSubData(vt,xt.offset*At.BYTES_PER_ELEMENT,At.subarray(xt.offset,xt.offset+xt.count)),xt.count=-1)}function lt(mt){return mt.isInterleavedBufferAttribute&&(mt=mt.data),at.get(mt)}function ut(mt){mt.isInterleavedBufferAttribute&&(mt=mt.data);const bt=at.get(mt);bt&&(it.deleteBuffer(bt.buffer),at.delete(mt))}function ht(mt,bt){if(mt.isGLBufferAttribute){const At=at.get(mt);(!At||At.version<mt.version)&&at.set(mt,{buffer:mt.buffer,type:mt.type,bytesPerElement:mt.elementSize,version:mt.version});return}mt.isInterleavedBufferAttribute&&(mt=mt.data);const vt=at.get(mt);vt===void 0?at.set(mt,st(mt,bt)):vt.version<mt.version&&(ot(vt.buffer,mt,bt),vt.version=mt.version)}return{get:lt,remove:ut,update:ht}}class PlaneGeometry extends BufferGeometry{constructor(tt=1,rt=1,at=1,st=1){super(),this.type="PlaneGeometry",this.parameters={width:tt,height:rt,widthSegments:at,heightSegments:st};const ot=tt/2,lt=rt/2,ut=Math.floor(at),ht=Math.floor(st),mt=ut+1,bt=ht+1,vt=tt/ut,At=rt/ht,xt=[],Et=[],Tt=[],wt=[];for(let Ct=0;Ct<bt;Ct++){const It=Ct*At-lt;for(let St=0;St<mt;St++){const Rt=St*vt-ot;Et.push(Rt,-It,0),Tt.push(0,0,1),wt.push(St/ut),wt.push(1-Ct/ht)}}for(let Ct=0;Ct<ht;Ct++)for(let It=0;It<ut;It++){const St=It+mt*Ct,Rt=It+mt*(Ct+1),Dt=It+1+mt*(Ct+1),Wt=It+1+mt*Ct;xt.push(St,Rt,Wt),xt.push(Rt,Dt,Wt)}this.setIndex(xt),this.setAttribute("position",new Float32BufferAttribute(Et,3)),this.setAttribute("normal",new Float32BufferAttribute(Tt,3)),this.setAttribute("uv",new Float32BufferAttribute(wt,2))}static fromJSON(tt){return new PlaneGeometry(tt.width,tt.height,tt.widthSegments,tt.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(it,tt,rt,at,st,ot,lt){const ut=new Color(0);let ht=ot===!0?0:1,mt,bt,vt=null,At=0,xt=null;function Et(wt,Ct){let It=!1,St=Ct.isScene===!0?Ct.background:null;St&&St.isTexture&&(St=(Ct.backgroundBlurriness>0?rt:tt).get(St));const Rt=it.xr,Dt=Rt.getSession&&Rt.getSession();Dt&&Dt.environmentBlendMode==="additive"&&(St=null),St===null?Tt(ut,ht):St&&St.isColor&&(Tt(St,1),It=!0),(it.autoClear||It)&&it.clear(it.autoClearColor,it.autoClearDepth,it.autoClearStencil),St&&(St.isCubeTexture||St.mapping===CubeUVReflectionMapping)?(bt===void 0&&(bt=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),bt.geometry.deleteAttribute("normal"),bt.geometry.deleteAttribute("uv"),bt.onBeforeRender=function(Wt,qt,Vt){this.matrixWorld.copyPosition(Vt.matrixWorld)},Object.defineProperty(bt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),st.update(bt)),bt.material.uniforms.envMap.value=St,bt.material.uniforms.flipEnvMap.value=St.isCubeTexture&&St.isRenderTargetTexture===!1?-1:1,bt.material.uniforms.backgroundBlurriness.value=Ct.backgroundBlurriness,(vt!==St||At!==St.version||xt!==it.toneMapping)&&(bt.material.needsUpdate=!0,vt=St,At=St.version,xt=it.toneMapping),bt.layers.enableAll(),wt.unshift(bt,bt.geometry,bt.material,0,0,null)):St&&St.isTexture&&(mt===void 0&&(mt=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),mt.geometry.deleteAttribute("normal"),Object.defineProperty(mt.material,"map",{get:function(){return this.uniforms.t2D.value}}),st.update(mt)),mt.material.uniforms.t2D.value=St,St.matrixAutoUpdate===!0&&St.updateMatrix(),mt.material.uniforms.uvTransform.value.copy(St.matrix),(vt!==St||At!==St.version||xt!==it.toneMapping)&&(mt.material.needsUpdate=!0,vt=St,At=St.version,xt=it.toneMapping),mt.layers.enableAll(),wt.unshift(mt,mt.geometry,mt.material,0,0,null))}function Tt(wt,Ct){at.buffers.color.setClear(wt.r,wt.g,wt.b,Ct,lt)}return{getClearColor:function(){return ut},setClearColor:function(wt,Ct=1){ut.set(wt),ht=Ct,Tt(ut,ht)},getClearAlpha:function(){return ht},setClearAlpha:function(wt){ht=wt,Tt(ut,ht)},render:Et}}function WebGLBindingStates(it,tt,rt,at){const st=it.getParameter(34921),ot=at.isWebGL2?null:tt.get("OES_vertex_array_object"),lt=at.isWebGL2||ot!==null,ut={},ht=wt(null);let mt=ht,bt=!1;function vt(Mt,Lt,Ht,Qt,Ut){let Bt=!1;if(lt){const Kt=Tt(Qt,Ht,Lt);mt!==Kt&&(mt=Kt,xt(mt.object)),Bt=Ct(Mt,Qt,Ht,Ut),Bt&&It(Mt,Qt,Ht,Ut)}else{const Kt=Lt.wireframe===!0;(mt.geometry!==Qt.id||mt.program!==Ht.id||mt.wireframe!==Kt)&&(mt.geometry=Qt.id,mt.program=Ht.id,mt.wireframe=Kt,Bt=!0)}Ut!==null&&rt.update(Ut,34963),(Bt||bt)&&(bt=!1,Vt(Mt,Lt,Ht,Qt),Ut!==null&&it.bindBuffer(34963,rt.get(Ut).buffer))}function At(){return at.isWebGL2?it.createVertexArray():ot.createVertexArrayOES()}function xt(Mt){return at.isWebGL2?it.bindVertexArray(Mt):ot.bindVertexArrayOES(Mt)}function Et(Mt){return at.isWebGL2?it.deleteVertexArray(Mt):ot.deleteVertexArrayOES(Mt)}function Tt(Mt,Lt,Ht){const Qt=Ht.wireframe===!0;let Ut=ut[Mt.id];Ut===void 0&&(Ut={},ut[Mt.id]=Ut);let Bt=Ut[Lt.id];Bt===void 0&&(Bt={},Ut[Lt.id]=Bt);let Kt=Bt[Qt];return Kt===void 0&&(Kt=wt(At()),Bt[Qt]=Kt),Kt}function wt(Mt){const Lt=[],Ht=[],Qt=[];for(let Ut=0;Ut<st;Ut++)Lt[Ut]=0,Ht[Ut]=0,Qt[Ut]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Lt,enabledAttributes:Ht,attributeDivisors:Qt,object:Mt,attributes:{},index:null}}function Ct(Mt,Lt,Ht,Qt){const Ut=mt.attributes,Bt=Lt.attributes;let Kt=0;const Gt=Ht.getAttributes();for(const Pt in Gt)if(Gt[Pt].location>=0){const an=Ut[Pt];let Jt=Bt[Pt];if(Jt===void 0&&(Pt==="instanceMatrix"&&Mt.instanceMatrix&&(Jt=Mt.instanceMatrix),Pt==="instanceColor"&&Mt.instanceColor&&(Jt=Mt.instanceColor)),an===void 0||an.attribute!==Jt||Jt&&an.data!==Jt.data)return!0;Kt++}return mt.attributesNum!==Kt||mt.index!==Qt}function It(Mt,Lt,Ht,Qt){const Ut={},Bt=Lt.attributes;let Kt=0;const Gt=Ht.getAttributes();for(const Pt in Gt)if(Gt[Pt].location>=0){let an=Bt[Pt];an===void 0&&(Pt==="instanceMatrix"&&Mt.instanceMatrix&&(an=Mt.instanceMatrix),Pt==="instanceColor"&&Mt.instanceColor&&(an=Mt.instanceColor));const Jt={};Jt.attribute=an,an&&an.data&&(Jt.data=an.data),Ut[Pt]=Jt,Kt++}mt.attributes=Ut,mt.attributesNum=Kt,mt.index=Qt}function St(){const Mt=mt.newAttributes;for(let Lt=0,Ht=Mt.length;Lt<Ht;Lt++)Mt[Lt]=0}function Rt(Mt){Dt(Mt,0)}function Dt(Mt,Lt){const Ht=mt.newAttributes,Qt=mt.enabledAttributes,Ut=mt.attributeDivisors;Ht[Mt]=1,Qt[Mt]===0&&(it.enableVertexAttribArray(Mt),Qt[Mt]=1),Ut[Mt]!==Lt&&((at.isWebGL2?it:tt.get("ANGLE_instanced_arrays"))[at.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Mt,Lt),Ut[Mt]=Lt)}function Wt(){const Mt=mt.newAttributes,Lt=mt.enabledAttributes;for(let Ht=0,Qt=Lt.length;Ht<Qt;Ht++)Lt[Ht]!==Mt[Ht]&&(it.disableVertexAttribArray(Ht),Lt[Ht]=0)}function qt(Mt,Lt,Ht,Qt,Ut,Bt){at.isWebGL2===!0&&(Ht===5124||Ht===5125)?it.vertexAttribIPointer(Mt,Lt,Ht,Ut,Bt):it.vertexAttribPointer(Mt,Lt,Ht,Qt,Ut,Bt)}function Vt(Mt,Lt,Ht,Qt){if(at.isWebGL2===!1&&(Mt.isInstancedMesh||Qt.isInstancedBufferGeometry)&&tt.get("ANGLE_instanced_arrays")===null)return;St();const Ut=Qt.attributes,Bt=Ht.getAttributes(),Kt=Lt.defaultAttributeValues;for(const Gt in Bt){const Pt=Bt[Gt];if(Pt.location>=0){let Zt=Ut[Gt];if(Zt===void 0&&(Gt==="instanceMatrix"&&Mt.instanceMatrix&&(Zt=Mt.instanceMatrix),Gt==="instanceColor"&&Mt.instanceColor&&(Zt=Mt.instanceColor)),Zt!==void 0){const an=Zt.normalized,Jt=Zt.itemSize,rn=rt.get(Zt);if(rn===void 0)continue;const fn=rn.buffer,pn=rn.type,vn=rn.bytesPerElement;if(Zt.isInterleavedBufferAttribute){const En=Zt.data,dn=En.stride,cn=Zt.offset;if(En.isInstancedInterleavedBuffer){for(let _n=0;_n<Pt.locationSize;_n++)Dt(Pt.location+_n,En.meshPerAttribute);Mt.isInstancedMesh!==!0&&Qt._maxInstanceCount===void 0&&(Qt._maxInstanceCount=En.meshPerAttribute*En.count)}else for(let _n=0;_n<Pt.locationSize;_n++)Rt(Pt.location+_n);it.bindBuffer(34962,fn);for(let _n=0;_n<Pt.locationSize;_n++)qt(Pt.location+_n,Jt/Pt.locationSize,pn,an,dn*vn,(cn+Jt/Pt.locationSize*_n)*vn)}else{if(Zt.isInstancedBufferAttribute){for(let En=0;En<Pt.locationSize;En++)Dt(Pt.location+En,Zt.meshPerAttribute);Mt.isInstancedMesh!==!0&&Qt._maxInstanceCount===void 0&&(Qt._maxInstanceCount=Zt.meshPerAttribute*Zt.count)}else for(let En=0;En<Pt.locationSize;En++)Rt(Pt.location+En);it.bindBuffer(34962,fn);for(let En=0;En<Pt.locationSize;En++)qt(Pt.location+En,Jt/Pt.locationSize,pn,an,Jt*vn,Jt/Pt.locationSize*En*vn)}}else if(Kt!==void 0){const an=Kt[Gt];if(an!==void 0)switch(an.length){case 2:it.vertexAttrib2fv(Pt.location,an);break;case 3:it.vertexAttrib3fv(Pt.location,an);break;case 4:it.vertexAttrib4fv(Pt.location,an);break;default:it.vertexAttrib1fv(Pt.location,an)}}}}Wt()}function Yt(){zt();for(const Mt in ut){const Lt=ut[Mt];for(const Ht in Lt){const Qt=Lt[Ht];for(const Ut in Qt)Et(Qt[Ut].object),delete Qt[Ut];delete Lt[Ht]}delete ut[Mt]}}function jt(Mt){if(ut[Mt.id]===void 0)return;const Lt=ut[Mt.id];for(const Ht in Lt){const Qt=Lt[Ht];for(const Ut in Qt)Et(Qt[Ut].object),delete Qt[Ut];delete Lt[Ht]}delete ut[Mt.id]}function kt(Mt){for(const Lt in ut){const Ht=ut[Lt];if(Ht[Mt.id]===void 0)continue;const Qt=Ht[Mt.id];for(const Ut in Qt)Et(Qt[Ut].object),delete Qt[Ut];delete Ht[Mt.id]}}function zt(){Nt(),bt=!0,mt!==ht&&(mt=ht,xt(mt.object))}function Nt(){ht.geometry=null,ht.program=null,ht.wireframe=!1}return{setup:vt,reset:zt,resetDefaultState:Nt,dispose:Yt,releaseStatesOfGeometry:jt,releaseStatesOfProgram:kt,initAttributes:St,enableAttribute:Rt,disableUnusedAttributes:Wt}}function WebGLBufferRenderer(it,tt,rt,at){const st=at.isWebGL2;let ot;function lt(mt){ot=mt}function ut(mt,bt){it.drawArrays(ot,mt,bt),rt.update(bt,ot,1)}function ht(mt,bt,vt){if(vt===0)return;let At,xt;if(st)At=it,xt="drawArraysInstanced";else if(At=tt.get("ANGLE_instanced_arrays"),xt="drawArraysInstancedANGLE",At===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}At[xt](ot,mt,bt,vt),rt.update(bt,ot,vt)}this.setMode=lt,this.render=ut,this.renderInstances=ht}function WebGLCapabilities(it,tt,rt){let at;function st(){if(at!==void 0)return at;if(tt.has("EXT_texture_filter_anisotropic")===!0){const qt=tt.get("EXT_texture_filter_anisotropic");at=it.getParameter(qt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else at=0;return at}function ot(qt){if(qt==="highp"){if(it.getShaderPrecisionFormat(35633,36338).precision>0&&it.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";qt="mediump"}return qt==="mediump"&&it.getShaderPrecisionFormat(35633,36337).precision>0&&it.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const lt=typeof WebGL2RenderingContext<"u"&&it instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&it instanceof WebGL2ComputeRenderingContext;let ut=rt.precision!==void 0?rt.precision:"highp";const ht=ot(ut);ht!==ut&&(console.warn("THREE.WebGLRenderer:",ut,"not supported, using",ht,"instead."),ut=ht);const mt=lt||tt.has("WEBGL_draw_buffers"),bt=rt.logarithmicDepthBuffer===!0,vt=it.getParameter(34930),At=it.getParameter(35660),xt=it.getParameter(3379),Et=it.getParameter(34076),Tt=it.getParameter(34921),wt=it.getParameter(36347),Ct=it.getParameter(36348),It=it.getParameter(36349),St=At>0,Rt=lt||tt.has("OES_texture_float"),Dt=St&&Rt,Wt=lt?it.getParameter(36183):0;return{isWebGL2:lt,drawBuffers:mt,getMaxAnisotropy:st,getMaxPrecision:ot,precision:ut,logarithmicDepthBuffer:bt,maxTextures:vt,maxVertexTextures:At,maxTextureSize:xt,maxCubemapSize:Et,maxAttributes:Tt,maxVertexUniforms:wt,maxVaryings:Ct,maxFragmentUniforms:It,vertexTextures:St,floatFragmentTextures:Rt,floatVertexTextures:Dt,maxSamples:Wt}}function WebGLClipping(it){const tt=this;let rt=null,at=0,st=!1,ot=!1;const lt=new Plane,ut=new Matrix3,ht={value:null,needsUpdate:!1};this.uniform=ht,this.numPlanes=0,this.numIntersection=0,this.init=function(vt,At,xt){const Et=vt.length!==0||At||at!==0||st;return st=At,rt=bt(vt,xt,0),at=vt.length,Et},this.beginShadows=function(){ot=!0,bt(null)},this.endShadows=function(){ot=!1,mt()},this.setState=function(vt,At,xt){const Et=vt.clippingPlanes,Tt=vt.clipIntersection,wt=vt.clipShadows,Ct=it.get(vt);if(!st||Et===null||Et.length===0||ot&&!wt)ot?bt(null):mt();else{const It=ot?0:at,St=It*4;let Rt=Ct.clippingState||null;ht.value=Rt,Rt=bt(Et,At,St,xt);for(let Dt=0;Dt!==St;++Dt)Rt[Dt]=rt[Dt];Ct.clippingState=Rt,this.numIntersection=Tt?this.numPlanes:0,this.numPlanes+=It}};function mt(){ht.value!==rt&&(ht.value=rt,ht.needsUpdate=at>0),tt.numPlanes=at,tt.numIntersection=0}function bt(vt,At,xt,Et){const Tt=vt!==null?vt.length:0;let wt=null;if(Tt!==0){if(wt=ht.value,Et!==!0||wt===null){const Ct=xt+Tt*4,It=At.matrixWorldInverse;ut.getNormalMatrix(It),(wt===null||wt.length<Ct)&&(wt=new Float32Array(Ct));for(let St=0,Rt=xt;St!==Tt;++St,Rt+=4)lt.copy(vt[St]).applyMatrix4(It,ut),lt.normal.toArray(wt,Rt),wt[Rt+3]=lt.constant}ht.value=wt,ht.needsUpdate=!0}return tt.numPlanes=Tt,tt.numIntersection=0,wt}}function WebGLCubeMaps(it){let tt=new WeakMap;function rt(lt,ut){return ut===EquirectangularReflectionMapping?lt.mapping=CubeReflectionMapping:ut===EquirectangularRefractionMapping&&(lt.mapping=CubeRefractionMapping),lt}function at(lt){if(lt&&lt.isTexture&&lt.isRenderTargetTexture===!1){const ut=lt.mapping;if(ut===EquirectangularReflectionMapping||ut===EquirectangularRefractionMapping)if(tt.has(lt)){const ht=tt.get(lt).texture;return rt(ht,lt.mapping)}else{const ht=lt.image;if(ht&&ht.height>0){const mt=new WebGLCubeRenderTarget(ht.height/2);return mt.fromEquirectangularTexture(it,lt),tt.set(lt,mt),lt.addEventListener("dispose",st),rt(mt.texture,lt.mapping)}else return null}}return lt}function st(lt){const ut=lt.target;ut.removeEventListener("dispose",st);const ht=tt.get(ut);ht!==void 0&&(tt.delete(ut),ht.dispose())}function ot(){tt=new WeakMap}return{get:at,dispose:ot}}class OrthographicCamera extends Camera{constructor(tt=-1,rt=1,at=1,st=-1,ot=.1,lt=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=tt,this.right=rt,this.top=at,this.bottom=st,this.near=ot,this.far=lt,this.updateProjectionMatrix()}copy(tt,rt){return super.copy(tt,rt),this.left=tt.left,this.right=tt.right,this.top=tt.top,this.bottom=tt.bottom,this.near=tt.near,this.far=tt.far,this.zoom=tt.zoom,this.view=tt.view===null?null:Object.assign({},tt.view),this}setViewOffset(tt,rt,at,st,ot,lt){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=tt,this.view.fullHeight=rt,this.view.offsetX=at,this.view.offsetY=st,this.view.width=ot,this.view.height=lt,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const tt=(this.right-this.left)/(2*this.zoom),rt=(this.top-this.bottom)/(2*this.zoom),at=(this.right+this.left)/2,st=(this.top+this.bottom)/2;let ot=at-tt,lt=at+tt,ut=st+rt,ht=st-rt;if(this.view!==null&&this.view.enabled){const mt=(this.right-this.left)/this.view.fullWidth/this.zoom,bt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;ot+=mt*this.view.offsetX,lt=ot+mt*this.view.width,ut-=bt*this.view.offsetY,ht=ut-bt*this.view.height}this.projectionMatrix.makeOrthographic(ot,lt,ut,ht,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(tt){const rt=super.toJSON(tt);return rt.object.zoom=this.zoom,rt.object.left=this.left,rt.object.right=this.right,rt.object.top=this.top,rt.object.bottom=this.bottom,rt.object.near=this.near,rt.object.far=this.far,this.view!==null&&(rt.object.view=Object.assign({},this.view)),rt}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES$1=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(tt){this._renderer=tt,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(tt,rt=0,at=.1,st=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const ot=this._allocateTargets();return ot.depthBuffer=!0,this._sceneToCubeUV(tt,at,st,ot),rt>0&&this._blur(ot,0,0,rt),this._applyPMREM(ot),this._cleanup(ot),ot}fromEquirectangular(tt,rt=null){return this._fromTexture(tt,rt)}fromCubemap(tt,rt=null){return this._fromTexture(tt,rt)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(tt){this._lodMax=Math.floor(Math.log2(tt)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let tt=0;tt<this._lodPlanes.length;tt++)this._lodPlanes[tt].dispose()}_cleanup(tt){this._renderer.setRenderTarget(_oldTarget),tt.scissorTest=!1,_setViewport(tt,0,0,tt.width,tt.height)}_fromTexture(tt,rt){tt.mapping===CubeReflectionMapping||tt.mapping===CubeRefractionMapping?this._setSize(tt.image.length===0?16:tt.image[0].width||tt.image[0].image.width):this._setSize(tt.image.width/4),_oldTarget=this._renderer.getRenderTarget();const at=rt||this._allocateTargets();return this._textureToCubeUV(tt,at),this._applyPMREM(at),this._cleanup(at),at}_allocateTargets(){const tt=3*Math.max(this._cubeSize,112),rt=4*this._cubeSize,at={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},st=_createRenderTarget(tt,rt,at);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==tt){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(tt,rt,at);const{_lodMax:ot}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(ot)),this._blurMaterial=_getBlurShader(ot,tt,rt)}return st}_compileMaterial(tt){const rt=new Mesh(this._lodPlanes[0],tt);this._renderer.compile(rt,_flatCamera)}_sceneToCubeUV(tt,rt,at,st){const ut=new PerspectiveCamera(90,1,rt,at),ht=[1,-1,1,1,1,1],mt=[1,1,1,-1,-1,-1],bt=this._renderer,vt=bt.autoClear,At=bt.toneMapping;bt.getClearColor(_clearColor),bt.toneMapping=NoToneMapping,bt.autoClear=!1;const xt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),Et=new Mesh(new BoxGeometry,xt);let Tt=!1;const wt=tt.background;wt?wt.isColor&&(xt.color.copy(wt),tt.background=null,Tt=!0):(xt.color.copy(_clearColor),Tt=!0);for(let Ct=0;Ct<6;Ct++){const It=Ct%3;It===0?(ut.up.set(0,ht[Ct],0),ut.lookAt(mt[Ct],0,0)):It===1?(ut.up.set(0,0,ht[Ct]),ut.lookAt(0,mt[Ct],0)):(ut.up.set(0,ht[Ct],0),ut.lookAt(0,0,mt[Ct]));const St=this._cubeSize;_setViewport(st,It*St,Ct>2?St:0,St,St),bt.setRenderTarget(st),Tt&&bt.render(Et,ut),bt.render(tt,ut)}Et.geometry.dispose(),Et.material.dispose(),bt.toneMapping=At,bt.autoClear=vt,tt.background=wt}_textureToCubeUV(tt,rt){const at=this._renderer,st=tt.mapping===CubeReflectionMapping||tt.mapping===CubeRefractionMapping;st?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=tt.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const ot=st?this._cubemapMaterial:this._equirectMaterial,lt=new Mesh(this._lodPlanes[0],ot),ut=ot.uniforms;ut.envMap.value=tt;const ht=this._cubeSize;_setViewport(rt,0,0,3*ht,2*ht),at.setRenderTarget(rt),at.render(lt,_flatCamera)}_applyPMREM(tt){const rt=this._renderer,at=rt.autoClear;rt.autoClear=!1;for(let st=1;st<this._lodPlanes.length;st++){const ot=Math.sqrt(this._sigmas[st]*this._sigmas[st]-this._sigmas[st-1]*this._sigmas[st-1]),lt=_axisDirections[(st-1)%_axisDirections.length];this._blur(tt,st-1,st,ot,lt)}rt.autoClear=at}_blur(tt,rt,at,st,ot){const lt=this._pingPongRenderTarget;this._halfBlur(tt,lt,rt,at,st,"latitudinal",ot),this._halfBlur(lt,tt,at,at,st,"longitudinal",ot)}_halfBlur(tt,rt,at,st,ot,lt,ut){const ht=this._renderer,mt=this._blurMaterial;lt!=="latitudinal"&&lt!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const bt=3,vt=new Mesh(this._lodPlanes[st],mt),At=mt.uniforms,xt=this._sizeLods[at]-1,Et=isFinite(ot)?Math.PI/(2*xt):2*Math.PI/(2*MAX_SAMPLES$1-1),Tt=ot/Et,wt=isFinite(ot)?1+Math.floor(bt*Tt):MAX_SAMPLES$1;wt>MAX_SAMPLES$1&&console.warn(`sigmaRadians, ${ot}, is too large and will clip, as it requested ${wt} samples when the maximum is set to ${MAX_SAMPLES$1}`);const Ct=[];let It=0;for(let qt=0;qt<MAX_SAMPLES$1;++qt){const Vt=qt/Tt,Yt=Math.exp(-Vt*Vt/2);Ct.push(Yt),qt===0?It+=Yt:qt<wt&&(It+=2*Yt)}for(let qt=0;qt<Ct.length;qt++)Ct[qt]=Ct[qt]/It;At.envMap.value=tt.texture,At.samples.value=wt,At.weights.value=Ct,At.latitudinal.value=lt==="latitudinal",ut&&(At.poleAxis.value=ut);const{_lodMax:St}=this;At.dTheta.value=Et,At.mipInt.value=St-at;const Rt=this._sizeLods[st],Dt=3*Rt*(st>St-LOD_MIN?st-St+LOD_MIN:0),Wt=4*(this._cubeSize-Rt);_setViewport(rt,Dt,Wt,3*Rt,2*Rt),ht.setRenderTarget(rt),ht.render(vt,_flatCamera)}}function _createPlanes(it){const tt=[],rt=[],at=[];let st=it;const ot=it-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let lt=0;lt<ot;lt++){const ut=Math.pow(2,st);rt.push(ut);let ht=1/ut;lt>it-LOD_MIN?ht=EXTRA_LOD_SIGMA[lt-it+LOD_MIN-1]:lt===0&&(ht=0),at.push(ht);const mt=1/(ut-2),bt=-mt,vt=1+mt,At=[bt,bt,vt,bt,vt,vt,bt,bt,vt,vt,bt,vt],xt=6,Et=6,Tt=3,wt=2,Ct=1,It=new Float32Array(Tt*Et*xt),St=new Float32Array(wt*Et*xt),Rt=new Float32Array(Ct*Et*xt);for(let Wt=0;Wt<xt;Wt++){const qt=Wt%3*2/3-1,Vt=Wt>2?0:-1,Yt=[qt,Vt,0,qt+2/3,Vt,0,qt+2/3,Vt+1,0,qt,Vt,0,qt+2/3,Vt+1,0,qt,Vt+1,0];It.set(Yt,Tt*Et*Wt),St.set(At,wt*Et*Wt);const jt=[Wt,Wt,Wt,Wt,Wt,Wt];Rt.set(jt,Ct*Et*Wt)}const Dt=new BufferGeometry;Dt.setAttribute("position",new BufferAttribute(It,Tt)),Dt.setAttribute("uv",new BufferAttribute(St,wt)),Dt.setAttribute("faceIndex",new BufferAttribute(Rt,Ct)),tt.push(Dt),st>LOD_MIN&&st--}return{lodPlanes:tt,sizeLods:rt,sigmas:at}}function _createRenderTarget(it,tt,rt){const at=new WebGLRenderTarget(it,tt,rt);return at.texture.mapping=CubeUVReflectionMapping,at.texture.name="PMREM.cubeUv",at.scissorTest=!0,at}function _setViewport(it,tt,rt,at,st){it.viewport.set(tt,rt,at,st),it.scissor.set(tt,rt,at,st)}function _getBlurShader(it,tt,rt){const at=new Float32Array(MAX_SAMPLES$1),st=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES$1,CUBEUV_TEXEL_WIDTH:1/tt,CUBEUV_TEXEL_HEIGHT:1/rt,CUBEUV_MAX_MIP:`${it}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:at},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:st}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(it){let tt=new WeakMap,rt=null;function at(ut){if(ut&&ut.isTexture){const ht=ut.mapping,mt=ht===EquirectangularReflectionMapping||ht===EquirectangularRefractionMapping,bt=ht===CubeReflectionMapping||ht===CubeRefractionMapping;if(mt||bt)if(ut.isRenderTargetTexture&&ut.needsPMREMUpdate===!0){ut.needsPMREMUpdate=!1;let vt=tt.get(ut);return rt===null&&(rt=new PMREMGenerator(it)),vt=mt?rt.fromEquirectangular(ut,vt):rt.fromCubemap(ut,vt),tt.set(ut,vt),vt.texture}else{if(tt.has(ut))return tt.get(ut).texture;{const vt=ut.image;if(mt&&vt&&vt.height>0||bt&&vt&&st(vt)){rt===null&&(rt=new PMREMGenerator(it));const At=mt?rt.fromEquirectangular(ut):rt.fromCubemap(ut);return tt.set(ut,At),ut.addEventListener("dispose",ot),At.texture}else return null}}}return ut}function st(ut){let ht=0;const mt=6;for(let bt=0;bt<mt;bt++)ut[bt]!==void 0&&ht++;return ht===mt}function ot(ut){const ht=ut.target;ht.removeEventListener("dispose",ot);const mt=tt.get(ht);mt!==void 0&&(tt.delete(ht),mt.dispose())}function lt(){tt=new WeakMap,rt!==null&&(rt.dispose(),rt=null)}return{get:at,dispose:lt}}function WebGLExtensions(it){const tt={};function rt(at){if(tt[at]!==void 0)return tt[at];let st;switch(at){case"WEBGL_depth_texture":st=it.getExtension("WEBGL_depth_texture")||it.getExtension("MOZ_WEBGL_depth_texture")||it.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":st=it.getExtension("EXT_texture_filter_anisotropic")||it.getExtension("MOZ_EXT_texture_filter_anisotropic")||it.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":st=it.getExtension("WEBGL_compressed_texture_s3tc")||it.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||it.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":st=it.getExtension("WEBGL_compressed_texture_pvrtc")||it.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:st=it.getExtension(at)}return tt[at]=st,st}return{has:function(at){return rt(at)!==null},init:function(at){at.isWebGL2?rt("EXT_color_buffer_float"):(rt("WEBGL_depth_texture"),rt("OES_texture_float"),rt("OES_texture_half_float"),rt("OES_texture_half_float_linear"),rt("OES_standard_derivatives"),rt("OES_element_index_uint"),rt("OES_vertex_array_object"),rt("ANGLE_instanced_arrays")),rt("OES_texture_float_linear"),rt("EXT_color_buffer_half_float"),rt("WEBGL_multisampled_render_to_texture")},get:function(at){const st=rt(at);return st===null&&console.warn("THREE.WebGLRenderer: "+at+" extension not supported."),st}}}function WebGLGeometries(it,tt,rt,at){const st={},ot=new WeakMap;function lt(vt){const At=vt.target;At.index!==null&&tt.remove(At.index);for(const Et in At.attributes)tt.remove(At.attributes[Et]);At.removeEventListener("dispose",lt),delete st[At.id];const xt=ot.get(At);xt&&(tt.remove(xt),ot.delete(At)),at.releaseStatesOfGeometry(At),At.isInstancedBufferGeometry===!0&&delete At._maxInstanceCount,rt.memory.geometries--}function ut(vt,At){return st[At.id]===!0||(At.addEventListener("dispose",lt),st[At.id]=!0,rt.memory.geometries++),At}function ht(vt){const At=vt.attributes;for(const Et in At)tt.update(At[Et],34962);const xt=vt.morphAttributes;for(const Et in xt){const Tt=xt[Et];for(let wt=0,Ct=Tt.length;wt<Ct;wt++)tt.update(Tt[wt],34962)}}function mt(vt){const At=[],xt=vt.index,Et=vt.attributes.position;let Tt=0;if(xt!==null){const It=xt.array;Tt=xt.version;for(let St=0,Rt=It.length;St<Rt;St+=3){const Dt=It[St+0],Wt=It[St+1],qt=It[St+2];At.push(Dt,Wt,Wt,qt,qt,Dt)}}else{const It=Et.array;Tt=Et.version;for(let St=0,Rt=It.length/3-1;St<Rt;St+=3){const Dt=St+0,Wt=St+1,qt=St+2;At.push(Dt,Wt,Wt,qt,qt,Dt)}}const wt=new(arrayNeedsUint32(At)?Uint32BufferAttribute:Uint16BufferAttribute)(At,1);wt.version=Tt;const Ct=ot.get(vt);Ct&&tt.remove(Ct),ot.set(vt,wt)}function bt(vt){const At=ot.get(vt);if(At){const xt=vt.index;xt!==null&&At.version<xt.version&&mt(vt)}else mt(vt);return ot.get(vt)}return{get:ut,update:ht,getWireframeAttribute:bt}}function WebGLIndexedBufferRenderer(it,tt,rt,at){const st=at.isWebGL2;let ot;function lt(At){ot=At}let ut,ht;function mt(At){ut=At.type,ht=At.bytesPerElement}function bt(At,xt){it.drawElements(ot,xt,ut,At*ht),rt.update(xt,ot,1)}function vt(At,xt,Et){if(Et===0)return;let Tt,wt;if(st)Tt=it,wt="drawElementsInstanced";else if(Tt=tt.get("ANGLE_instanced_arrays"),wt="drawElementsInstancedANGLE",Tt===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Tt[wt](ot,xt,ut,At*ht,Et),rt.update(xt,ot,Et)}this.setMode=lt,this.setIndex=mt,this.render=bt,this.renderInstances=vt}function WebGLInfo(it){const tt={geometries:0,textures:0},rt={frame:0,calls:0,triangles:0,points:0,lines:0};function at(ot,lt,ut){switch(rt.calls++,lt){case 4:rt.triangles+=ut*(ot/3);break;case 1:rt.lines+=ut*(ot/2);break;case 3:rt.lines+=ut*(ot-1);break;case 2:rt.lines+=ut*ot;break;case 0:rt.points+=ut*ot;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",lt);break}}function st(){rt.frame++,rt.calls=0,rt.triangles=0,rt.points=0,rt.lines=0}return{memory:tt,render:rt,programs:null,autoReset:!0,reset:st,update:at}}function numericalSort(it,tt){return it[0]-tt[0]}function absNumericalSort(it,tt){return Math.abs(tt[1])-Math.abs(it[1])}function WebGLMorphtargets(it,tt,rt){const at={},st=new Float32Array(8),ot=new WeakMap,lt=new Vector4,ut=[];for(let mt=0;mt<8;mt++)ut[mt]=[mt,0];function ht(mt,bt,vt,At){const xt=mt.morphTargetInfluences;if(tt.isWebGL2===!0){const Et=bt.morphAttributes.position||bt.morphAttributes.normal||bt.morphAttributes.color,Tt=Et!==void 0?Et.length:0;let wt=ot.get(bt);if(wt===void 0||wt.count!==Tt){let Lt=function(){Nt.dispose(),ot.delete(bt),bt.removeEventListener("dispose",Lt)};wt!==void 0&&wt.texture.dispose();const St=bt.morphAttributes.position!==void 0,Rt=bt.morphAttributes.normal!==void 0,Dt=bt.morphAttributes.color!==void 0,Wt=bt.morphAttributes.position||[],qt=bt.morphAttributes.normal||[],Vt=bt.morphAttributes.color||[];let Yt=0;St===!0&&(Yt=1),Rt===!0&&(Yt=2),Dt===!0&&(Yt=3);let jt=bt.attributes.position.count*Yt,kt=1;jt>tt.maxTextureSize&&(kt=Math.ceil(jt/tt.maxTextureSize),jt=tt.maxTextureSize);const zt=new Float32Array(jt*kt*4*Tt),Nt=new DataArrayTexture(zt,jt,kt,Tt);Nt.type=FloatType,Nt.needsUpdate=!0;const Mt=Yt*4;for(let Ht=0;Ht<Tt;Ht++){const Qt=Wt[Ht],Ut=qt[Ht],Bt=Vt[Ht],Kt=jt*kt*4*Ht;for(let Gt=0;Gt<Qt.count;Gt++){const Pt=Gt*Mt;St===!0&&(lt.fromBufferAttribute(Qt,Gt),zt[Kt+Pt+0]=lt.x,zt[Kt+Pt+1]=lt.y,zt[Kt+Pt+2]=lt.z,zt[Kt+Pt+3]=0),Rt===!0&&(lt.fromBufferAttribute(Ut,Gt),zt[Kt+Pt+4]=lt.x,zt[Kt+Pt+5]=lt.y,zt[Kt+Pt+6]=lt.z,zt[Kt+Pt+7]=0),Dt===!0&&(lt.fromBufferAttribute(Bt,Gt),zt[Kt+Pt+8]=lt.x,zt[Kt+Pt+9]=lt.y,zt[Kt+Pt+10]=lt.z,zt[Kt+Pt+11]=Bt.itemSize===4?lt.w:1)}}wt={count:Tt,texture:Nt,size:new Vector2(jt,kt)},ot.set(bt,wt),bt.addEventListener("dispose",Lt)}let Ct=0;for(let St=0;St<xt.length;St++)Ct+=xt[St];const It=bt.morphTargetsRelative?1:1-Ct;At.getUniforms().setValue(it,"morphTargetBaseInfluence",It),At.getUniforms().setValue(it,"morphTargetInfluences",xt),At.getUniforms().setValue(it,"morphTargetsTexture",wt.texture,rt),At.getUniforms().setValue(it,"morphTargetsTextureSize",wt.size)}else{const Et=xt===void 0?0:xt.length;let Tt=at[bt.id];if(Tt===void 0||Tt.length!==Et){Tt=[];for(let Rt=0;Rt<Et;Rt++)Tt[Rt]=[Rt,0];at[bt.id]=Tt}for(let Rt=0;Rt<Et;Rt++){const Dt=Tt[Rt];Dt[0]=Rt,Dt[1]=xt[Rt]}Tt.sort(absNumericalSort);for(let Rt=0;Rt<8;Rt++)Rt<Et&&Tt[Rt][1]?(ut[Rt][0]=Tt[Rt][0],ut[Rt][1]=Tt[Rt][1]):(ut[Rt][0]=Number.MAX_SAFE_INTEGER,ut[Rt][1]=0);ut.sort(numericalSort);const wt=bt.morphAttributes.position,Ct=bt.morphAttributes.normal;let It=0;for(let Rt=0;Rt<8;Rt++){const Dt=ut[Rt],Wt=Dt[0],qt=Dt[1];Wt!==Number.MAX_SAFE_INTEGER&&qt?(wt&&bt.getAttribute("morphTarget"+Rt)!==wt[Wt]&&bt.setAttribute("morphTarget"+Rt,wt[Wt]),Ct&&bt.getAttribute("morphNormal"+Rt)!==Ct[Wt]&&bt.setAttribute("morphNormal"+Rt,Ct[Wt]),st[Rt]=qt,It+=qt):(wt&&bt.hasAttribute("morphTarget"+Rt)===!0&&bt.deleteAttribute("morphTarget"+Rt),Ct&&bt.hasAttribute("morphNormal"+Rt)===!0&&bt.deleteAttribute("morphNormal"+Rt),st[Rt]=0)}const St=bt.morphTargetsRelative?1:1-It;At.getUniforms().setValue(it,"morphTargetBaseInfluence",St),At.getUniforms().setValue(it,"morphTargetInfluences",st)}}return{update:ht}}function WebGLObjects(it,tt,rt,at){let st=new WeakMap;function ot(ht){const mt=at.render.frame,bt=ht.geometry,vt=tt.get(ht,bt);return st.get(vt)!==mt&&(tt.update(vt),st.set(vt,mt)),ht.isInstancedMesh&&(ht.hasEventListener("dispose",ut)===!1&&ht.addEventListener("dispose",ut),rt.update(ht.instanceMatrix,34962),ht.instanceColor!==null&&rt.update(ht.instanceColor,34962)),vt}function lt(){st=new WeakMap}function ut(ht){const mt=ht.target;mt.removeEventListener("dispose",ut),rt.remove(mt.instanceMatrix),mt.instanceColor!==null&&rt.remove(mt.instanceColor)}return{update:ot,dispose:lt}}const emptyTexture=new Texture$1,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(it,tt,rt){const at=it[0];if(at<=0||at>0)return it;const st=tt*rt;let ot=arrayCacheF32[st];if(ot===void 0&&(ot=new Float32Array(st),arrayCacheF32[st]=ot),tt!==0){at.toArray(ot,0);for(let lt=1,ut=0;lt!==tt;++lt)ut+=rt,it[lt].toArray(ot,ut)}return ot}function arraysEqual(it,tt){if(it.length!==tt.length)return!1;for(let rt=0,at=it.length;rt<at;rt++)if(it[rt]!==tt[rt])return!1;return!0}function copyArray(it,tt){for(let rt=0,at=tt.length;rt<at;rt++)it[rt]=tt[rt]}function allocTexUnits(it,tt){let rt=arrayCacheI32[tt];rt===void 0&&(rt=new Int32Array(tt),arrayCacheI32[tt]=rt);for(let at=0;at!==tt;++at)rt[at]=it.allocateTextureUnit();return rt}function setValueV1f(it,tt){const rt=this.cache;rt[0]!==tt&&(it.uniform1f(this.addr,tt),rt[0]=tt)}function setValueV2f(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y)&&(it.uniform2f(this.addr,tt.x,tt.y),rt[0]=tt.x,rt[1]=tt.y);else{if(arraysEqual(rt,tt))return;it.uniform2fv(this.addr,tt),copyArray(rt,tt)}}function setValueV3f(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z)&&(it.uniform3f(this.addr,tt.x,tt.y,tt.z),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z);else if(tt.r!==void 0)(rt[0]!==tt.r||rt[1]!==tt.g||rt[2]!==tt.b)&&(it.uniform3f(this.addr,tt.r,tt.g,tt.b),rt[0]=tt.r,rt[1]=tt.g,rt[2]=tt.b);else{if(arraysEqual(rt,tt))return;it.uniform3fv(this.addr,tt),copyArray(rt,tt)}}function setValueV4f(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z||rt[3]!==tt.w)&&(it.uniform4f(this.addr,tt.x,tt.y,tt.z,tt.w),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z,rt[3]=tt.w);else{if(arraysEqual(rt,tt))return;it.uniform4fv(this.addr,tt),copyArray(rt,tt)}}function setValueM2(it,tt){const rt=this.cache,at=tt.elements;if(at===void 0){if(arraysEqual(rt,tt))return;it.uniformMatrix2fv(this.addr,!1,tt),copyArray(rt,tt)}else{if(arraysEqual(rt,at))return;mat2array.set(at),it.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(rt,at)}}function setValueM3(it,tt){const rt=this.cache,at=tt.elements;if(at===void 0){if(arraysEqual(rt,tt))return;it.uniformMatrix3fv(this.addr,!1,tt),copyArray(rt,tt)}else{if(arraysEqual(rt,at))return;mat3array.set(at),it.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(rt,at)}}function setValueM4(it,tt){const rt=this.cache,at=tt.elements;if(at===void 0){if(arraysEqual(rt,tt))return;it.uniformMatrix4fv(this.addr,!1,tt),copyArray(rt,tt)}else{if(arraysEqual(rt,at))return;mat4array.set(at),it.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(rt,at)}}function setValueV1i(it,tt){const rt=this.cache;rt[0]!==tt&&(it.uniform1i(this.addr,tt),rt[0]=tt)}function setValueV2i(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y)&&(it.uniform2i(this.addr,tt.x,tt.y),rt[0]=tt.x,rt[1]=tt.y);else{if(arraysEqual(rt,tt))return;it.uniform2iv(this.addr,tt),copyArray(rt,tt)}}function setValueV3i(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z)&&(it.uniform3i(this.addr,tt.x,tt.y,tt.z),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z);else{if(arraysEqual(rt,tt))return;it.uniform3iv(this.addr,tt),copyArray(rt,tt)}}function setValueV4i(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z||rt[3]!==tt.w)&&(it.uniform4i(this.addr,tt.x,tt.y,tt.z,tt.w),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z,rt[3]=tt.w);else{if(arraysEqual(rt,tt))return;it.uniform4iv(this.addr,tt),copyArray(rt,tt)}}function setValueV1ui(it,tt){const rt=this.cache;rt[0]!==tt&&(it.uniform1ui(this.addr,tt),rt[0]=tt)}function setValueV2ui(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y)&&(it.uniform2ui(this.addr,tt.x,tt.y),rt[0]=tt.x,rt[1]=tt.y);else{if(arraysEqual(rt,tt))return;it.uniform2uiv(this.addr,tt),copyArray(rt,tt)}}function setValueV3ui(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z)&&(it.uniform3ui(this.addr,tt.x,tt.y,tt.z),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z);else{if(arraysEqual(rt,tt))return;it.uniform3uiv(this.addr,tt),copyArray(rt,tt)}}function setValueV4ui(it,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z||rt[3]!==tt.w)&&(it.uniform4ui(this.addr,tt.x,tt.y,tt.z,tt.w),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z,rt[3]=tt.w);else{if(arraysEqual(rt,tt))return;it.uniform4uiv(this.addr,tt),copyArray(rt,tt)}}function setValueT1(it,tt,rt){const at=this.cache,st=rt.allocateTextureUnit();at[0]!==st&&(it.uniform1i(this.addr,st),at[0]=st),rt.setTexture2D(tt||emptyTexture,st)}function setValueT3D1(it,tt,rt){const at=this.cache,st=rt.allocateTextureUnit();at[0]!==st&&(it.uniform1i(this.addr,st),at[0]=st),rt.setTexture3D(tt||empty3dTexture,st)}function setValueT6(it,tt,rt){const at=this.cache,st=rt.allocateTextureUnit();at[0]!==st&&(it.uniform1i(this.addr,st),at[0]=st),rt.setTextureCube(tt||emptyCubeTexture,st)}function setValueT2DArray1(it,tt,rt){const at=this.cache,st=rt.allocateTextureUnit();at[0]!==st&&(it.uniform1i(this.addr,st),at[0]=st),rt.setTexture2DArray(tt||emptyArrayTexture,st)}function getSingularSetter(it){switch(it){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(it,tt){it.uniform1fv(this.addr,tt)}function setValueV2fArray(it,tt){const rt=flatten(tt,this.size,2);it.uniform2fv(this.addr,rt)}function setValueV3fArray(it,tt){const rt=flatten(tt,this.size,3);it.uniform3fv(this.addr,rt)}function setValueV4fArray(it,tt){const rt=flatten(tt,this.size,4);it.uniform4fv(this.addr,rt)}function setValueM2Array(it,tt){const rt=flatten(tt,this.size,4);it.uniformMatrix2fv(this.addr,!1,rt)}function setValueM3Array(it,tt){const rt=flatten(tt,this.size,9);it.uniformMatrix3fv(this.addr,!1,rt)}function setValueM4Array(it,tt){const rt=flatten(tt,this.size,16);it.uniformMatrix4fv(this.addr,!1,rt)}function setValueV1iArray(it,tt){it.uniform1iv(this.addr,tt)}function setValueV2iArray(it,tt){it.uniform2iv(this.addr,tt)}function setValueV3iArray(it,tt){it.uniform3iv(this.addr,tt)}function setValueV4iArray(it,tt){it.uniform4iv(this.addr,tt)}function setValueV1uiArray(it,tt){it.uniform1uiv(this.addr,tt)}function setValueV2uiArray(it,tt){it.uniform2uiv(this.addr,tt)}function setValueV3uiArray(it,tt){it.uniform3uiv(this.addr,tt)}function setValueV4uiArray(it,tt){it.uniform4uiv(this.addr,tt)}function setValueT1Array(it,tt,rt){const at=this.cache,st=tt.length,ot=allocTexUnits(rt,st);arraysEqual(at,ot)||(it.uniform1iv(this.addr,ot),copyArray(at,ot));for(let lt=0;lt!==st;++lt)rt.setTexture2D(tt[lt]||emptyTexture,ot[lt])}function setValueT3DArray(it,tt,rt){const at=this.cache,st=tt.length,ot=allocTexUnits(rt,st);arraysEqual(at,ot)||(it.uniform1iv(this.addr,ot),copyArray(at,ot));for(let lt=0;lt!==st;++lt)rt.setTexture3D(tt[lt]||empty3dTexture,ot[lt])}function setValueT6Array(it,tt,rt){const at=this.cache,st=tt.length,ot=allocTexUnits(rt,st);arraysEqual(at,ot)||(it.uniform1iv(this.addr,ot),copyArray(at,ot));for(let lt=0;lt!==st;++lt)rt.setTextureCube(tt[lt]||emptyCubeTexture,ot[lt])}function setValueT2DArrayArray(it,tt,rt){const at=this.cache,st=tt.length,ot=allocTexUnits(rt,st);arraysEqual(at,ot)||(it.uniform1iv(this.addr,ot),copyArray(at,ot));for(let lt=0;lt!==st;++lt)rt.setTexture2DArray(tt[lt]||emptyArrayTexture,ot[lt])}function getPureArraySetter(it){switch(it){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(tt,rt,at){this.id=tt,this.addr=at,this.cache=[],this.setValue=getSingularSetter(rt.type)}}class PureArrayUniform{constructor(tt,rt,at){this.id=tt,this.addr=at,this.cache=[],this.size=rt.size,this.setValue=getPureArraySetter(rt.type)}}class StructuredUniform{constructor(tt){this.id=tt,this.seq=[],this.map={}}setValue(tt,rt,at){const st=this.seq;for(let ot=0,lt=st.length;ot!==lt;++ot){const ut=st[ot];ut.setValue(tt,rt[ut.id],at)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(it,tt){it.seq.push(tt),it.map[tt.id]=tt}function parseUniform(it,tt,rt){const at=it.name,st=at.length;for(RePathPart.lastIndex=0;;){const ot=RePathPart.exec(at),lt=RePathPart.lastIndex;let ut=ot[1];const ht=ot[2]==="]",mt=ot[3];if(ht&&(ut=ut|0),mt===void 0||mt==="["&&lt+2===st){addUniform(rt,mt===void 0?new SingleUniform(ut,it,tt):new PureArrayUniform(ut,it,tt));break}else{let vt=rt.map[ut];vt===void 0&&(vt=new StructuredUniform(ut),addUniform(rt,vt)),rt=vt}}}class WebGLUniforms{constructor(tt,rt){this.seq=[],this.map={};const at=tt.getProgramParameter(rt,35718);for(let st=0;st<at;++st){const ot=tt.getActiveUniform(rt,st),lt=tt.getUniformLocation(rt,ot.name);parseUniform(ot,lt,this)}}setValue(tt,rt,at,st){const ot=this.map[rt];ot!==void 0&&ot.setValue(tt,at,st)}setOptional(tt,rt,at){const st=rt[at];st!==void 0&&this.setValue(tt,at,st)}static upload(tt,rt,at,st){for(let ot=0,lt=rt.length;ot!==lt;++ot){const ut=rt[ot],ht=at[ut.id];ht.needsUpdate!==!1&&ut.setValue(tt,ht.value,st)}}static seqWithValue(tt,rt){const at=[];for(let st=0,ot=tt.length;st!==ot;++st){const lt=tt[st];lt.id in rt&&at.push(lt)}return at}}function WebGLShader(it,tt,rt){const at=it.createShader(tt);return it.shaderSource(at,rt),it.compileShader(at),at}let programIdCount=0;function handleSource(it,tt){const rt=it.split(`
`),at=[],st=Math.max(tt-6,0),ot=Math.min(tt+6,rt.length);for(let lt=st;lt<ot;lt++){const ut=lt+1;at.push(`${ut===tt?">":" "} ${ut}: ${rt[lt]}`)}return at.join(`
`)}function getEncodingComponents(it){switch(it){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",it),["Linear","( value )"]}}function getShaderErrors(it,tt,rt){const at=it.getShaderParameter(tt,35713),st=it.getShaderInfoLog(tt).trim();if(at&&st==="")return"";const ot=/ERROR: 0:(\d+)/.exec(st);if(ot){const lt=parseInt(ot[1]);return rt.toUpperCase()+`

`+st+`

`+handleSource(it.getShaderSource(tt),lt)}else return st}function getTexelEncodingFunction(it,tt){const rt=getEncodingComponents(tt);return"vec4 "+it+"( vec4 value ) { return LinearTo"+rt[0]+rt[1]+"; }"}function getToneMappingFunction(it,tt){let rt;switch(tt){case LinearToneMapping:rt="Linear";break;case ReinhardToneMapping:rt="Reinhard";break;case CineonToneMapping:rt="OptimizedCineon";break;case ACESFilmicToneMapping:rt="ACESFilmic";break;case CustomToneMapping:rt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",tt),rt="Linear"}return"vec3 "+it+"( vec3 color ) { return "+rt+"ToneMapping( color ); }"}function generateExtensions(it){return[it.extensionDerivatives||!!it.envMapCubeUVHeight||it.bumpMap||it.tangentSpaceNormalMap||it.clearcoatNormalMap||it.flatShading||it.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(it.extensionFragDepth||it.logarithmicDepthBuffer)&&it.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",it.extensionDrawBuffers&&it.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(it.extensionShaderTextureLOD||it.envMap||it.transmission)&&it.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(it){const tt=[];for(const rt in it){const at=it[rt];at!==!1&&tt.push("#define "+rt+" "+at)}return tt.join(`
`)}function fetchAttributeLocations(it,tt){const rt={},at=it.getProgramParameter(tt,35721);for(let st=0;st<at;st++){const ot=it.getActiveAttrib(tt,st),lt=ot.name;let ut=1;ot.type===35674&&(ut=2),ot.type===35675&&(ut=3),ot.type===35676&&(ut=4),rt[lt]={type:ot.type,location:it.getAttribLocation(tt,lt),locationSize:ut}}return rt}function filterEmptyLine(it){return it!==""}function replaceLightNums(it,tt){const rt=tt.numSpotLightShadows+tt.numSpotLightMaps-tt.numSpotLightShadowsWithMaps;return it.replace(/NUM_DIR_LIGHTS/g,tt.numDirLights).replace(/NUM_SPOT_LIGHTS/g,tt.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,tt.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,rt).replace(/NUM_RECT_AREA_LIGHTS/g,tt.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,tt.numPointLights).replace(/NUM_HEMI_LIGHTS/g,tt.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,tt.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,tt.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,tt.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,tt.numPointLightShadows)}function replaceClippingPlaneNums(it,tt){return it.replace(/NUM_CLIPPING_PLANES/g,tt.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,tt.numClippingPlanes-tt.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(it){return it.replace(includePattern,includeReplacer)}function includeReplacer(it,tt){const rt=ShaderChunk[tt];if(rt===void 0)throw new Error("Can not resolve #include <"+tt+">");return resolveIncludes(rt)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(it){return it.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(it,tt,rt,at){let st="";for(let ot=parseInt(tt);ot<parseInt(rt);ot++)st+=at.replace(/\[\s*i\s*\]/g,"[ "+ot+" ]").replace(/UNROLLED_LOOP_INDEX/g,ot);return st}function generatePrecision(it){let tt="precision "+it.precision+` float;
precision `+it.precision+" int;";return it.precision==="highp"?tt+=`
#define HIGH_PRECISION`:it.precision==="mediump"?tt+=`
#define MEDIUM_PRECISION`:it.precision==="lowp"&&(tt+=`
#define LOW_PRECISION`),tt}function generateShadowMapTypeDefine(it){let tt="SHADOWMAP_TYPE_BASIC";return it.shadowMapType===PCFShadowMap?tt="SHADOWMAP_TYPE_PCF":it.shadowMapType===PCFSoftShadowMap?tt="SHADOWMAP_TYPE_PCF_SOFT":it.shadowMapType===VSMShadowMap&&(tt="SHADOWMAP_TYPE_VSM"),tt}function generateEnvMapTypeDefine(it){let tt="ENVMAP_TYPE_CUBE";if(it.envMap)switch(it.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:tt="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:tt="ENVMAP_TYPE_CUBE_UV";break}return tt}function generateEnvMapModeDefine(it){let tt="ENVMAP_MODE_REFLECTION";if(it.envMap)switch(it.envMapMode){case CubeRefractionMapping:tt="ENVMAP_MODE_REFRACTION";break}return tt}function generateEnvMapBlendingDefine(it){let tt="ENVMAP_BLENDING_NONE";if(it.envMap)switch(it.combine){case MultiplyOperation:tt="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:tt="ENVMAP_BLENDING_MIX";break;case AddOperation:tt="ENVMAP_BLENDING_ADD";break}return tt}function generateCubeUVSize(it){const tt=it.envMapCubeUVHeight;if(tt===null)return null;const rt=Math.log2(tt)-2,at=1/tt;return{texelWidth:1/(3*Math.max(Math.pow(2,rt),7*16)),texelHeight:at,maxMip:rt}}function WebGLProgram(it,tt,rt,at){const st=it.getContext(),ot=rt.defines;let lt=rt.vertexShader,ut=rt.fragmentShader;const ht=generateShadowMapTypeDefine(rt),mt=generateEnvMapTypeDefine(rt),bt=generateEnvMapModeDefine(rt),vt=generateEnvMapBlendingDefine(rt),At=generateCubeUVSize(rt),xt=rt.isWebGL2?"":generateExtensions(rt),Et=generateDefines(ot),Tt=st.createProgram();let wt,Ct,It=rt.glslVersion?"#version "+rt.glslVersion+`
`:"";rt.isRawShaderMaterial?(wt=[Et].filter(filterEmptyLine).join(`
`),wt.length>0&&(wt+=`
`),Ct=[xt,Et].filter(filterEmptyLine).join(`
`),Ct.length>0&&(Ct+=`
`)):(wt=[generatePrecision(rt),"#define SHADER_NAME "+rt.shaderName,Et,rt.instancing?"#define USE_INSTANCING":"",rt.instancingColor?"#define USE_INSTANCING_COLOR":"",rt.supportsVertexTextures?"#define VERTEX_TEXTURES":"",rt.useFog&&rt.fog?"#define USE_FOG":"",rt.useFog&&rt.fogExp2?"#define FOG_EXP2":"",rt.map?"#define USE_MAP":"",rt.envMap?"#define USE_ENVMAP":"",rt.envMap?"#define "+bt:"",rt.lightMap?"#define USE_LIGHTMAP":"",rt.aoMap?"#define USE_AOMAP":"",rt.emissiveMap?"#define USE_EMISSIVEMAP":"",rt.bumpMap?"#define USE_BUMPMAP":"",rt.normalMap?"#define USE_NORMALMAP":"",rt.normalMap&&rt.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",rt.normalMap&&rt.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",rt.clearcoatMap?"#define USE_CLEARCOATMAP":"",rt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",rt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",rt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",rt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",rt.displacementMap&&rt.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",rt.specularMap?"#define USE_SPECULARMAP":"",rt.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",rt.specularColorMap?"#define USE_SPECULARCOLORMAP":"",rt.roughnessMap?"#define USE_ROUGHNESSMAP":"",rt.metalnessMap?"#define USE_METALNESSMAP":"",rt.alphaMap?"#define USE_ALPHAMAP":"",rt.transmission?"#define USE_TRANSMISSION":"",rt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",rt.thicknessMap?"#define USE_THICKNESSMAP":"",rt.sheenColorMap?"#define USE_SHEENCOLORMAP":"",rt.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",rt.vertexTangents?"#define USE_TANGENT":"",rt.vertexColors?"#define USE_COLOR":"",rt.vertexAlphas?"#define USE_COLOR_ALPHA":"",rt.vertexUvs?"#define USE_UV":"",rt.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",rt.flatShading?"#define FLAT_SHADED":"",rt.skinning?"#define USE_SKINNING":"",rt.morphTargets?"#define USE_MORPHTARGETS":"",rt.morphNormals&&rt.flatShading===!1?"#define USE_MORPHNORMALS":"",rt.morphColors&&rt.isWebGL2?"#define USE_MORPHCOLORS":"",rt.morphTargetsCount>0&&rt.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",rt.morphTargetsCount>0&&rt.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+rt.morphTextureStride:"",rt.morphTargetsCount>0&&rt.isWebGL2?"#define MORPHTARGETS_COUNT "+rt.morphTargetsCount:"",rt.doubleSided?"#define DOUBLE_SIDED":"",rt.flipSided?"#define FLIP_SIDED":"",rt.shadowMapEnabled?"#define USE_SHADOWMAP":"",rt.shadowMapEnabled?"#define "+ht:"",rt.sizeAttenuation?"#define USE_SIZEATTENUATION":"",rt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",rt.logarithmicDepthBuffer&&rt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Ct=[xt,generatePrecision(rt),"#define SHADER_NAME "+rt.shaderName,Et,rt.useFog&&rt.fog?"#define USE_FOG":"",rt.useFog&&rt.fogExp2?"#define FOG_EXP2":"",rt.map?"#define USE_MAP":"",rt.matcap?"#define USE_MATCAP":"",rt.envMap?"#define USE_ENVMAP":"",rt.envMap?"#define "+mt:"",rt.envMap?"#define "+bt:"",rt.envMap?"#define "+vt:"",At?"#define CUBEUV_TEXEL_WIDTH "+At.texelWidth:"",At?"#define CUBEUV_TEXEL_HEIGHT "+At.texelHeight:"",At?"#define CUBEUV_MAX_MIP "+At.maxMip+".0":"",rt.lightMap?"#define USE_LIGHTMAP":"",rt.aoMap?"#define USE_AOMAP":"",rt.emissiveMap?"#define USE_EMISSIVEMAP":"",rt.bumpMap?"#define USE_BUMPMAP":"",rt.normalMap?"#define USE_NORMALMAP":"",rt.normalMap&&rt.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",rt.normalMap&&rt.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",rt.clearcoat?"#define USE_CLEARCOAT":"",rt.clearcoatMap?"#define USE_CLEARCOATMAP":"",rt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",rt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",rt.iridescence?"#define USE_IRIDESCENCE":"",rt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",rt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",rt.specularMap?"#define USE_SPECULARMAP":"",rt.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",rt.specularColorMap?"#define USE_SPECULARCOLORMAP":"",rt.roughnessMap?"#define USE_ROUGHNESSMAP":"",rt.metalnessMap?"#define USE_METALNESSMAP":"",rt.alphaMap?"#define USE_ALPHAMAP":"",rt.alphaTest?"#define USE_ALPHATEST":"",rt.sheen?"#define USE_SHEEN":"",rt.sheenColorMap?"#define USE_SHEENCOLORMAP":"",rt.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",rt.transmission?"#define USE_TRANSMISSION":"",rt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",rt.thicknessMap?"#define USE_THICKNESSMAP":"",rt.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",rt.vertexTangents?"#define USE_TANGENT":"",rt.vertexColors||rt.instancingColor?"#define USE_COLOR":"",rt.vertexAlphas?"#define USE_COLOR_ALPHA":"",rt.vertexUvs?"#define USE_UV":"",rt.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",rt.gradientMap?"#define USE_GRADIENTMAP":"",rt.flatShading?"#define FLAT_SHADED":"",rt.doubleSided?"#define DOUBLE_SIDED":"",rt.flipSided?"#define FLIP_SIDED":"",rt.shadowMapEnabled?"#define USE_SHADOWMAP":"",rt.shadowMapEnabled?"#define "+ht:"",rt.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",rt.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",rt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",rt.logarithmicDepthBuffer&&rt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",rt.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",rt.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",rt.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",rt.toneMapping):"",rt.dithering?"#define DITHERING":"",rt.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",rt.outputEncoding),rt.useDepthPacking?"#define DEPTH_PACKING "+rt.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),lt=resolveIncludes(lt),lt=replaceLightNums(lt,rt),lt=replaceClippingPlaneNums(lt,rt),ut=resolveIncludes(ut),ut=replaceLightNums(ut,rt),ut=replaceClippingPlaneNums(ut,rt),lt=unrollLoops(lt),ut=unrollLoops(ut),rt.isWebGL2&&rt.isRawShaderMaterial!==!0&&(It=`#version 300 es
`,wt=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+wt,Ct=["#define varying in",rt.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",rt.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ct);const St=It+wt+lt,Rt=It+Ct+ut,Dt=WebGLShader(st,35633,St),Wt=WebGLShader(st,35632,Rt);if(st.attachShader(Tt,Dt),st.attachShader(Tt,Wt),rt.index0AttributeName!==void 0?st.bindAttribLocation(Tt,0,rt.index0AttributeName):rt.morphTargets===!0&&st.bindAttribLocation(Tt,0,"position"),st.linkProgram(Tt),it.debug.checkShaderErrors){const Yt=st.getProgramInfoLog(Tt).trim(),jt=st.getShaderInfoLog(Dt).trim(),kt=st.getShaderInfoLog(Wt).trim();let zt=!0,Nt=!0;if(st.getProgramParameter(Tt,35714)===!1){zt=!1;const Mt=getShaderErrors(st,Dt,"vertex"),Lt=getShaderErrors(st,Wt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+st.getError()+" - VALIDATE_STATUS "+st.getProgramParameter(Tt,35715)+`

Program Info Log: `+Yt+`
`+Mt+`
`+Lt)}else Yt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Yt):(jt===""||kt==="")&&(Nt=!1);Nt&&(this.diagnostics={runnable:zt,programLog:Yt,vertexShader:{log:jt,prefix:wt},fragmentShader:{log:kt,prefix:Ct}})}st.deleteShader(Dt),st.deleteShader(Wt);let qt;this.getUniforms=function(){return qt===void 0&&(qt=new WebGLUniforms(st,Tt)),qt};let Vt;return this.getAttributes=function(){return Vt===void 0&&(Vt=fetchAttributeLocations(st,Tt)),Vt},this.destroy=function(){at.releaseStatesOfProgram(this),st.deleteProgram(Tt),this.program=void 0},this.name=rt.shaderName,this.id=programIdCount++,this.cacheKey=tt,this.usedTimes=1,this.program=Tt,this.vertexShader=Dt,this.fragmentShader=Wt,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(tt){const rt=tt.vertexShader,at=tt.fragmentShader,st=this._getShaderStage(rt),ot=this._getShaderStage(at),lt=this._getShaderCacheForMaterial(tt);return lt.has(st)===!1&&(lt.add(st),st.usedTimes++),lt.has(ot)===!1&&(lt.add(ot),ot.usedTimes++),this}remove(tt){const rt=this.materialCache.get(tt);for(const at of rt)at.usedTimes--,at.usedTimes===0&&this.shaderCache.delete(at.code);return this.materialCache.delete(tt),this}getVertexShaderID(tt){return this._getShaderStage(tt.vertexShader).id}getFragmentShaderID(tt){return this._getShaderStage(tt.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(tt){const rt=this.materialCache;let at=rt.get(tt);return at===void 0&&(at=new Set,rt.set(tt,at)),at}_getShaderStage(tt){const rt=this.shaderCache;let at=rt.get(tt);return at===void 0&&(at=new WebGLShaderStage(tt),rt.set(tt,at)),at}}class WebGLShaderStage{constructor(tt){this.id=_id++,this.code=tt,this.usedTimes=0}}function WebGLPrograms(it,tt,rt,at,st,ot,lt){const ut=new Layers,ht=new WebGLShaderCache,mt=[],bt=st.isWebGL2,vt=st.logarithmicDepthBuffer,At=st.vertexTextures;let xt=st.precision;const Et={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Tt(Vt,Yt,jt,kt,zt){const Nt=kt.fog,Mt=zt.geometry,Lt=Vt.isMeshStandardMaterial?kt.environment:null,Ht=(Vt.isMeshStandardMaterial?rt:tt).get(Vt.envMap||Lt),Qt=!!Ht&&Ht.mapping===CubeUVReflectionMapping?Ht.image.height:null,Ut=Et[Vt.type];Vt.precision!==null&&(xt=st.getMaxPrecision(Vt.precision),xt!==Vt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Vt.precision,"not supported, using",xt,"instead."));const Bt=Mt.morphAttributes.position||Mt.morphAttributes.normal||Mt.morphAttributes.color,Kt=Bt!==void 0?Bt.length:0;let Gt=0;Mt.morphAttributes.position!==void 0&&(Gt=1),Mt.morphAttributes.normal!==void 0&&(Gt=2),Mt.morphAttributes.color!==void 0&&(Gt=3);let Pt,Zt,an,Jt;if(Ut){const dn=ShaderLib[Ut];Pt=dn.vertexShader,Zt=dn.fragmentShader}else Pt=Vt.vertexShader,Zt=Vt.fragmentShader,ht.update(Vt),an=ht.getVertexShaderID(Vt),Jt=ht.getFragmentShaderID(Vt);const rn=it.getRenderTarget(),fn=Vt.alphaTest>0,pn=Vt.clearcoat>0,vn=Vt.iridescence>0;return{isWebGL2:bt,shaderID:Ut,shaderName:Vt.type,vertexShader:Pt,fragmentShader:Zt,defines:Vt.defines,customVertexShaderID:an,customFragmentShaderID:Jt,isRawShaderMaterial:Vt.isRawShaderMaterial===!0,glslVersion:Vt.glslVersion,precision:xt,instancing:zt.isInstancedMesh===!0,instancingColor:zt.isInstancedMesh===!0&&zt.instanceColor!==null,supportsVertexTextures:At,outputEncoding:rn===null?it.outputEncoding:rn.isXRRenderTarget===!0?rn.texture.encoding:LinearEncoding,map:!!Vt.map,matcap:!!Vt.matcap,envMap:!!Ht,envMapMode:Ht&&Ht.mapping,envMapCubeUVHeight:Qt,lightMap:!!Vt.lightMap,aoMap:!!Vt.aoMap,emissiveMap:!!Vt.emissiveMap,bumpMap:!!Vt.bumpMap,normalMap:!!Vt.normalMap,objectSpaceNormalMap:Vt.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Vt.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!Vt.map&&Vt.map.isVideoTexture===!0&&Vt.map.encoding===sRGBEncoding,clearcoat:pn,clearcoatMap:pn&&!!Vt.clearcoatMap,clearcoatRoughnessMap:pn&&!!Vt.clearcoatRoughnessMap,clearcoatNormalMap:pn&&!!Vt.clearcoatNormalMap,iridescence:vn,iridescenceMap:vn&&!!Vt.iridescenceMap,iridescenceThicknessMap:vn&&!!Vt.iridescenceThicknessMap,displacementMap:!!Vt.displacementMap,roughnessMap:!!Vt.roughnessMap,metalnessMap:!!Vt.metalnessMap,specularMap:!!Vt.specularMap,specularIntensityMap:!!Vt.specularIntensityMap,specularColorMap:!!Vt.specularColorMap,opaque:Vt.transparent===!1&&Vt.blending===NormalBlending,alphaMap:!!Vt.alphaMap,alphaTest:fn,gradientMap:!!Vt.gradientMap,sheen:Vt.sheen>0,sheenColorMap:!!Vt.sheenColorMap,sheenRoughnessMap:!!Vt.sheenRoughnessMap,transmission:Vt.transmission>0,transmissionMap:!!Vt.transmissionMap,thicknessMap:!!Vt.thicknessMap,combine:Vt.combine,vertexTangents:!!Vt.normalMap&&!!Mt.attributes.tangent,vertexColors:Vt.vertexColors,vertexAlphas:Vt.vertexColors===!0&&!!Mt.attributes.color&&Mt.attributes.color.itemSize===4,vertexUvs:!!Vt.map||!!Vt.bumpMap||!!Vt.normalMap||!!Vt.specularMap||!!Vt.alphaMap||!!Vt.emissiveMap||!!Vt.roughnessMap||!!Vt.metalnessMap||!!Vt.clearcoatMap||!!Vt.clearcoatRoughnessMap||!!Vt.clearcoatNormalMap||!!Vt.iridescenceMap||!!Vt.iridescenceThicknessMap||!!Vt.displacementMap||!!Vt.transmissionMap||!!Vt.thicknessMap||!!Vt.specularIntensityMap||!!Vt.specularColorMap||!!Vt.sheenColorMap||!!Vt.sheenRoughnessMap,uvsVertexOnly:!(!!Vt.map||!!Vt.bumpMap||!!Vt.normalMap||!!Vt.specularMap||!!Vt.alphaMap||!!Vt.emissiveMap||!!Vt.roughnessMap||!!Vt.metalnessMap||!!Vt.clearcoatNormalMap||!!Vt.iridescenceMap||!!Vt.iridescenceThicknessMap||Vt.transmission>0||!!Vt.transmissionMap||!!Vt.thicknessMap||!!Vt.specularIntensityMap||!!Vt.specularColorMap||Vt.sheen>0||!!Vt.sheenColorMap||!!Vt.sheenRoughnessMap)&&!!Vt.displacementMap,fog:!!Nt,useFog:Vt.fog===!0,fogExp2:Nt&&Nt.isFogExp2,flatShading:!!Vt.flatShading,sizeAttenuation:Vt.sizeAttenuation,logarithmicDepthBuffer:vt,skinning:zt.isSkinnedMesh===!0,morphTargets:Mt.morphAttributes.position!==void 0,morphNormals:Mt.morphAttributes.normal!==void 0,morphColors:Mt.morphAttributes.color!==void 0,morphTargetsCount:Kt,morphTextureStride:Gt,numDirLights:Yt.directional.length,numPointLights:Yt.point.length,numSpotLights:Yt.spot.length,numSpotLightMaps:Yt.spotLightMap.length,numRectAreaLights:Yt.rectArea.length,numHemiLights:Yt.hemi.length,numDirLightShadows:Yt.directionalShadowMap.length,numPointLightShadows:Yt.pointShadowMap.length,numSpotLightShadows:Yt.spotShadowMap.length,numSpotLightShadowsWithMaps:Yt.numSpotLightShadowsWithMaps,numClippingPlanes:lt.numPlanes,numClipIntersection:lt.numIntersection,dithering:Vt.dithering,shadowMapEnabled:it.shadowMap.enabled&&jt.length>0,shadowMapType:it.shadowMap.type,toneMapping:Vt.toneMapped?it.toneMapping:NoToneMapping,physicallyCorrectLights:it.physicallyCorrectLights,premultipliedAlpha:Vt.premultipliedAlpha,doubleSided:Vt.side===DoubleSide,flipSided:Vt.side===BackSide,useDepthPacking:!!Vt.depthPacking,depthPacking:Vt.depthPacking||0,index0AttributeName:Vt.index0AttributeName,extensionDerivatives:Vt.extensions&&Vt.extensions.derivatives,extensionFragDepth:Vt.extensions&&Vt.extensions.fragDepth,extensionDrawBuffers:Vt.extensions&&Vt.extensions.drawBuffers,extensionShaderTextureLOD:Vt.extensions&&Vt.extensions.shaderTextureLOD,rendererExtensionFragDepth:bt||at.has("EXT_frag_depth"),rendererExtensionDrawBuffers:bt||at.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:bt||at.has("EXT_shader_texture_lod"),customProgramCacheKey:Vt.customProgramCacheKey()}}function wt(Vt){const Yt=[];if(Vt.shaderID?Yt.push(Vt.shaderID):(Yt.push(Vt.customVertexShaderID),Yt.push(Vt.customFragmentShaderID)),Vt.defines!==void 0)for(const jt in Vt.defines)Yt.push(jt),Yt.push(Vt.defines[jt]);return Vt.isRawShaderMaterial===!1&&(Ct(Yt,Vt),It(Yt,Vt),Yt.push(it.outputEncoding)),Yt.push(Vt.customProgramCacheKey),Yt.join()}function Ct(Vt,Yt){Vt.push(Yt.precision),Vt.push(Yt.outputEncoding),Vt.push(Yt.envMapMode),Vt.push(Yt.envMapCubeUVHeight),Vt.push(Yt.combine),Vt.push(Yt.vertexUvs),Vt.push(Yt.fogExp2),Vt.push(Yt.sizeAttenuation),Vt.push(Yt.morphTargetsCount),Vt.push(Yt.morphAttributeCount),Vt.push(Yt.numDirLights),Vt.push(Yt.numPointLights),Vt.push(Yt.numSpotLights),Vt.push(Yt.numSpotLightMaps),Vt.push(Yt.numHemiLights),Vt.push(Yt.numRectAreaLights),Vt.push(Yt.numDirLightShadows),Vt.push(Yt.numPointLightShadows),Vt.push(Yt.numSpotLightShadows),Vt.push(Yt.numSpotLightShadowsWithMaps),Vt.push(Yt.shadowMapType),Vt.push(Yt.toneMapping),Vt.push(Yt.numClippingPlanes),Vt.push(Yt.numClipIntersection),Vt.push(Yt.depthPacking)}function It(Vt,Yt){ut.disableAll(),Yt.isWebGL2&&ut.enable(0),Yt.supportsVertexTextures&&ut.enable(1),Yt.instancing&&ut.enable(2),Yt.instancingColor&&ut.enable(3),Yt.map&&ut.enable(4),Yt.matcap&&ut.enable(5),Yt.envMap&&ut.enable(6),Yt.lightMap&&ut.enable(7),Yt.aoMap&&ut.enable(8),Yt.emissiveMap&&ut.enable(9),Yt.bumpMap&&ut.enable(10),Yt.normalMap&&ut.enable(11),Yt.objectSpaceNormalMap&&ut.enable(12),Yt.tangentSpaceNormalMap&&ut.enable(13),Yt.clearcoat&&ut.enable(14),Yt.clearcoatMap&&ut.enable(15),Yt.clearcoatRoughnessMap&&ut.enable(16),Yt.clearcoatNormalMap&&ut.enable(17),Yt.iridescence&&ut.enable(18),Yt.iridescenceMap&&ut.enable(19),Yt.iridescenceThicknessMap&&ut.enable(20),Yt.displacementMap&&ut.enable(21),Yt.specularMap&&ut.enable(22),Yt.roughnessMap&&ut.enable(23),Yt.metalnessMap&&ut.enable(24),Yt.gradientMap&&ut.enable(25),Yt.alphaMap&&ut.enable(26),Yt.alphaTest&&ut.enable(27),Yt.vertexColors&&ut.enable(28),Yt.vertexAlphas&&ut.enable(29),Yt.vertexUvs&&ut.enable(30),Yt.vertexTangents&&ut.enable(31),Yt.uvsVertexOnly&&ut.enable(32),Vt.push(ut.mask),ut.disableAll(),Yt.fog&&ut.enable(0),Yt.useFog&&ut.enable(1),Yt.flatShading&&ut.enable(2),Yt.logarithmicDepthBuffer&&ut.enable(3),Yt.skinning&&ut.enable(4),Yt.morphTargets&&ut.enable(5),Yt.morphNormals&&ut.enable(6),Yt.morphColors&&ut.enable(7),Yt.premultipliedAlpha&&ut.enable(8),Yt.shadowMapEnabled&&ut.enable(9),Yt.physicallyCorrectLights&&ut.enable(10),Yt.doubleSided&&ut.enable(11),Yt.flipSided&&ut.enable(12),Yt.useDepthPacking&&ut.enable(13),Yt.dithering&&ut.enable(14),Yt.specularIntensityMap&&ut.enable(15),Yt.specularColorMap&&ut.enable(16),Yt.transmission&&ut.enable(17),Yt.transmissionMap&&ut.enable(18),Yt.thicknessMap&&ut.enable(19),Yt.sheen&&ut.enable(20),Yt.sheenColorMap&&ut.enable(21),Yt.sheenRoughnessMap&&ut.enable(22),Yt.decodeVideoTexture&&ut.enable(23),Yt.opaque&&ut.enable(24),Vt.push(ut.mask)}function St(Vt){const Yt=Et[Vt.type];let jt;if(Yt){const kt=ShaderLib[Yt];jt=UniformsUtils.clone(kt.uniforms)}else jt=Vt.uniforms;return jt}function Rt(Vt,Yt){let jt;for(let kt=0,zt=mt.length;kt<zt;kt++){const Nt=mt[kt];if(Nt.cacheKey===Yt){jt=Nt,++jt.usedTimes;break}}return jt===void 0&&(jt=new WebGLProgram(it,Yt,Vt,ot),mt.push(jt)),jt}function Dt(Vt){if(--Vt.usedTimes===0){const Yt=mt.indexOf(Vt);mt[Yt]=mt[mt.length-1],mt.pop(),Vt.destroy()}}function Wt(Vt){ht.remove(Vt)}function qt(){ht.dispose()}return{getParameters:Tt,getProgramCacheKey:wt,getUniforms:St,acquireProgram:Rt,releaseProgram:Dt,releaseShaderCache:Wt,programs:mt,dispose:qt}}function WebGLProperties(){let it=new WeakMap;function tt(ot){let lt=it.get(ot);return lt===void 0&&(lt={},it.set(ot,lt)),lt}function rt(ot){it.delete(ot)}function at(ot,lt,ut){it.get(ot)[lt]=ut}function st(){it=new WeakMap}return{get:tt,remove:rt,update:at,dispose:st}}function painterSortStable(it,tt){return it.groupOrder!==tt.groupOrder?it.groupOrder-tt.groupOrder:it.renderOrder!==tt.renderOrder?it.renderOrder-tt.renderOrder:it.material.id!==tt.material.id?it.material.id-tt.material.id:it.z!==tt.z?it.z-tt.z:it.id-tt.id}function reversePainterSortStable(it,tt){return it.groupOrder!==tt.groupOrder?it.groupOrder-tt.groupOrder:it.renderOrder!==tt.renderOrder?it.renderOrder-tt.renderOrder:it.z!==tt.z?tt.z-it.z:it.id-tt.id}function WebGLRenderList(){const it=[];let tt=0;const rt=[],at=[],st=[];function ot(){tt=0,rt.length=0,at.length=0,st.length=0}function lt(vt,At,xt,Et,Tt,wt){let Ct=it[tt];return Ct===void 0?(Ct={id:vt.id,object:vt,geometry:At,material:xt,groupOrder:Et,renderOrder:vt.renderOrder,z:Tt,group:wt},it[tt]=Ct):(Ct.id=vt.id,Ct.object=vt,Ct.geometry=At,Ct.material=xt,Ct.groupOrder=Et,Ct.renderOrder=vt.renderOrder,Ct.z=Tt,Ct.group=wt),tt++,Ct}function ut(vt,At,xt,Et,Tt,wt){const Ct=lt(vt,At,xt,Et,Tt,wt);xt.transmission>0?at.push(Ct):xt.transparent===!0?st.push(Ct):rt.push(Ct)}function ht(vt,At,xt,Et,Tt,wt){const Ct=lt(vt,At,xt,Et,Tt,wt);xt.transmission>0?at.unshift(Ct):xt.transparent===!0?st.unshift(Ct):rt.unshift(Ct)}function mt(vt,At){rt.length>1&&rt.sort(vt||painterSortStable),at.length>1&&at.sort(At||reversePainterSortStable),st.length>1&&st.sort(At||reversePainterSortStable)}function bt(){for(let vt=tt,At=it.length;vt<At;vt++){const xt=it[vt];if(xt.id===null)break;xt.id=null,xt.object=null,xt.geometry=null,xt.material=null,xt.group=null}}return{opaque:rt,transmissive:at,transparent:st,init:ot,push:ut,unshift:ht,finish:bt,sort:mt}}function WebGLRenderLists(){let it=new WeakMap;function tt(at,st){const ot=it.get(at);let lt;return ot===void 0?(lt=new WebGLRenderList,it.set(at,[lt])):st>=ot.length?(lt=new WebGLRenderList,ot.push(lt)):lt=ot[st],lt}function rt(){it=new WeakMap}return{get:tt,dispose:rt}}function UniformsCache(){const it={};return{get:function(tt){if(it[tt.id]!==void 0)return it[tt.id];let rt;switch(tt.type){case"DirectionalLight":rt={direction:new Vector3,color:new Color};break;case"SpotLight":rt={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":rt={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":rt={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":rt={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return it[tt.id]=rt,rt}}}function ShadowUniformsCache(){const it={};return{get:function(tt){if(it[tt.id]!==void 0)return it[tt.id];let rt;switch(tt.type){case"DirectionalLight":rt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":rt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":rt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return it[tt.id]=rt,rt}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(it,tt){return(tt.castShadow?2:0)-(it.castShadow?2:0)+(tt.map?1:0)-(it.map?1:0)}function WebGLLights(it,tt){const rt=new UniformsCache,at=ShadowUniformsCache(),st={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let bt=0;bt<9;bt++)st.probe.push(new Vector3);const ot=new Vector3,lt=new Matrix4,ut=new Matrix4;function ht(bt,vt){let At=0,xt=0,Et=0;for(let kt=0;kt<9;kt++)st.probe[kt].set(0,0,0);let Tt=0,wt=0,Ct=0,It=0,St=0,Rt=0,Dt=0,Wt=0,qt=0,Vt=0;bt.sort(shadowCastingAndTexturingLightsFirst);const Yt=vt!==!0?Math.PI:1;for(let kt=0,zt=bt.length;kt<zt;kt++){const Nt=bt[kt],Mt=Nt.color,Lt=Nt.intensity,Ht=Nt.distance,Qt=Nt.shadow&&Nt.shadow.map?Nt.shadow.map.texture:null;if(Nt.isAmbientLight)At+=Mt.r*Lt*Yt,xt+=Mt.g*Lt*Yt,Et+=Mt.b*Lt*Yt;else if(Nt.isLightProbe)for(let Ut=0;Ut<9;Ut++)st.probe[Ut].addScaledVector(Nt.sh.coefficients[Ut],Lt);else if(Nt.isDirectionalLight){const Ut=rt.get(Nt);if(Ut.color.copy(Nt.color).multiplyScalar(Nt.intensity*Yt),Nt.castShadow){const Bt=Nt.shadow,Kt=at.get(Nt);Kt.shadowBias=Bt.bias,Kt.shadowNormalBias=Bt.normalBias,Kt.shadowRadius=Bt.radius,Kt.shadowMapSize=Bt.mapSize,st.directionalShadow[Tt]=Kt,st.directionalShadowMap[Tt]=Qt,st.directionalShadowMatrix[Tt]=Nt.shadow.matrix,Rt++}st.directional[Tt]=Ut,Tt++}else if(Nt.isSpotLight){const Ut=rt.get(Nt);Ut.position.setFromMatrixPosition(Nt.matrixWorld),Ut.color.copy(Mt).multiplyScalar(Lt*Yt),Ut.distance=Ht,Ut.coneCos=Math.cos(Nt.angle),Ut.penumbraCos=Math.cos(Nt.angle*(1-Nt.penumbra)),Ut.decay=Nt.decay,st.spot[Ct]=Ut;const Bt=Nt.shadow;if(Nt.map&&(st.spotLightMap[qt]=Nt.map,qt++,Bt.updateMatrices(Nt),Nt.castShadow&&Vt++),st.spotLightMatrix[Ct]=Bt.matrix,Nt.castShadow){const Kt=at.get(Nt);Kt.shadowBias=Bt.bias,Kt.shadowNormalBias=Bt.normalBias,Kt.shadowRadius=Bt.radius,Kt.shadowMapSize=Bt.mapSize,st.spotShadow[Ct]=Kt,st.spotShadowMap[Ct]=Qt,Wt++}Ct++}else if(Nt.isRectAreaLight){const Ut=rt.get(Nt);Ut.color.copy(Mt).multiplyScalar(Lt),Ut.halfWidth.set(Nt.width*.5,0,0),Ut.halfHeight.set(0,Nt.height*.5,0),st.rectArea[It]=Ut,It++}else if(Nt.isPointLight){const Ut=rt.get(Nt);if(Ut.color.copy(Nt.color).multiplyScalar(Nt.intensity*Yt),Ut.distance=Nt.distance,Ut.decay=Nt.decay,Nt.castShadow){const Bt=Nt.shadow,Kt=at.get(Nt);Kt.shadowBias=Bt.bias,Kt.shadowNormalBias=Bt.normalBias,Kt.shadowRadius=Bt.radius,Kt.shadowMapSize=Bt.mapSize,Kt.shadowCameraNear=Bt.camera.near,Kt.shadowCameraFar=Bt.camera.far,st.pointShadow[wt]=Kt,st.pointShadowMap[wt]=Qt,st.pointShadowMatrix[wt]=Nt.shadow.matrix,Dt++}st.point[wt]=Ut,wt++}else if(Nt.isHemisphereLight){const Ut=rt.get(Nt);Ut.skyColor.copy(Nt.color).multiplyScalar(Lt*Yt),Ut.groundColor.copy(Nt.groundColor).multiplyScalar(Lt*Yt),st.hemi[St]=Ut,St++}}It>0&&(tt.isWebGL2||it.has("OES_texture_float_linear")===!0?(st.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,st.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):it.has("OES_texture_half_float_linear")===!0?(st.rectAreaLTC1=UniformsLib.LTC_HALF_1,st.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),st.ambient[0]=At,st.ambient[1]=xt,st.ambient[2]=Et;const jt=st.hash;(jt.directionalLength!==Tt||jt.pointLength!==wt||jt.spotLength!==Ct||jt.rectAreaLength!==It||jt.hemiLength!==St||jt.numDirectionalShadows!==Rt||jt.numPointShadows!==Dt||jt.numSpotShadows!==Wt||jt.numSpotMaps!==qt)&&(st.directional.length=Tt,st.spot.length=Ct,st.rectArea.length=It,st.point.length=wt,st.hemi.length=St,st.directionalShadow.length=Rt,st.directionalShadowMap.length=Rt,st.pointShadow.length=Dt,st.pointShadowMap.length=Dt,st.spotShadow.length=Wt,st.spotShadowMap.length=Wt,st.directionalShadowMatrix.length=Rt,st.pointShadowMatrix.length=Dt,st.spotLightMatrix.length=Wt+qt-Vt,st.spotLightMap.length=qt,st.numSpotLightShadowsWithMaps=Vt,jt.directionalLength=Tt,jt.pointLength=wt,jt.spotLength=Ct,jt.rectAreaLength=It,jt.hemiLength=St,jt.numDirectionalShadows=Rt,jt.numPointShadows=Dt,jt.numSpotShadows=Wt,jt.numSpotMaps=qt,st.version=nextVersion++)}function mt(bt,vt){let At=0,xt=0,Et=0,Tt=0,wt=0;const Ct=vt.matrixWorldInverse;for(let It=0,St=bt.length;It<St;It++){const Rt=bt[It];if(Rt.isDirectionalLight){const Dt=st.directional[At];Dt.direction.setFromMatrixPosition(Rt.matrixWorld),ot.setFromMatrixPosition(Rt.target.matrixWorld),Dt.direction.sub(ot),Dt.direction.transformDirection(Ct),At++}else if(Rt.isSpotLight){const Dt=st.spot[Et];Dt.position.setFromMatrixPosition(Rt.matrixWorld),Dt.position.applyMatrix4(Ct),Dt.direction.setFromMatrixPosition(Rt.matrixWorld),ot.setFromMatrixPosition(Rt.target.matrixWorld),Dt.direction.sub(ot),Dt.direction.transformDirection(Ct),Et++}else if(Rt.isRectAreaLight){const Dt=st.rectArea[Tt];Dt.position.setFromMatrixPosition(Rt.matrixWorld),Dt.position.applyMatrix4(Ct),ut.identity(),lt.copy(Rt.matrixWorld),lt.premultiply(Ct),ut.extractRotation(lt),Dt.halfWidth.set(Rt.width*.5,0,0),Dt.halfHeight.set(0,Rt.height*.5,0),Dt.halfWidth.applyMatrix4(ut),Dt.halfHeight.applyMatrix4(ut),Tt++}else if(Rt.isPointLight){const Dt=st.point[xt];Dt.position.setFromMatrixPosition(Rt.matrixWorld),Dt.position.applyMatrix4(Ct),xt++}else if(Rt.isHemisphereLight){const Dt=st.hemi[wt];Dt.direction.setFromMatrixPosition(Rt.matrixWorld),Dt.direction.transformDirection(Ct),wt++}}}return{setup:ht,setupView:mt,state:st}}function WebGLRenderState(it,tt){const rt=new WebGLLights(it,tt),at=[],st=[];function ot(){at.length=0,st.length=0}function lt(vt){at.push(vt)}function ut(vt){st.push(vt)}function ht(vt){rt.setup(at,vt)}function mt(vt){rt.setupView(at,vt)}return{init:ot,state:{lightsArray:at,shadowsArray:st,lights:rt},setupLights:ht,setupLightsView:mt,pushLight:lt,pushShadow:ut}}function WebGLRenderStates(it,tt){let rt=new WeakMap;function at(ot,lt=0){const ut=rt.get(ot);let ht;return ut===void 0?(ht=new WebGLRenderState(it,tt),rt.set(ot,[ht])):lt>=ut.length?(ht=new WebGLRenderState(it,tt),ut.push(ht)):ht=ut[lt],ht}function st(){rt=new WeakMap}return{get:at,dispose:st}}class MeshDepthMaterial extends Material$1{constructor(tt){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(tt)}copy(tt){return super.copy(tt),this.depthPacking=tt.depthPacking,this.map=tt.map,this.alphaMap=tt.alphaMap,this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material$1{constructor(tt){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(tt)}copy(tt){return super.copy(tt),this.referencePosition.copy(tt.referencePosition),this.nearDistance=tt.nearDistance,this.farDistance=tt.farDistance,this.map=tt.map,this.alphaMap=tt.alphaMap,this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(it,tt,rt){let at=new Frustum;const st=new Vector2,ot=new Vector2,lt=new Vector4,ut=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),ht=new MeshDistanceMaterial,mt={},bt=rt.maxTextureSize,vt={0:BackSide,1:FrontSide,2:DoubleSide},At=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),xt=At.clone();xt.defines.HORIZONTAL_PASS=1;const Et=new BufferGeometry;Et.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Tt=new Mesh(Et,At),wt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(Rt,Dt,Wt){if(wt.enabled===!1||wt.autoUpdate===!1&&wt.needsUpdate===!1||Rt.length===0)return;const qt=it.getRenderTarget(),Vt=it.getActiveCubeFace(),Yt=it.getActiveMipmapLevel(),jt=it.state;jt.setBlending(NoBlending),jt.buffers.color.setClear(1,1,1,1),jt.buffers.depth.setTest(!0),jt.setScissorTest(!1);for(let kt=0,zt=Rt.length;kt<zt;kt++){const Nt=Rt[kt],Mt=Nt.shadow;if(Mt===void 0){console.warn("THREE.WebGLShadowMap:",Nt,"has no shadow.");continue}if(Mt.autoUpdate===!1&&Mt.needsUpdate===!1)continue;st.copy(Mt.mapSize);const Lt=Mt.getFrameExtents();if(st.multiply(Lt),ot.copy(Mt.mapSize),(st.x>bt||st.y>bt)&&(st.x>bt&&(ot.x=Math.floor(bt/Lt.x),st.x=ot.x*Lt.x,Mt.mapSize.x=ot.x),st.y>bt&&(ot.y=Math.floor(bt/Lt.y),st.y=ot.y*Lt.y,Mt.mapSize.y=ot.y)),Mt.map===null){const Qt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Mt.map=new WebGLRenderTarget(st.x,st.y,Qt),Mt.map.texture.name=Nt.name+".shadowMap",Mt.camera.updateProjectionMatrix()}it.setRenderTarget(Mt.map),it.clear();const Ht=Mt.getViewportCount();for(let Qt=0;Qt<Ht;Qt++){const Ut=Mt.getViewport(Qt);lt.set(ot.x*Ut.x,ot.y*Ut.y,ot.x*Ut.z,ot.y*Ut.w),jt.viewport(lt),Mt.updateMatrices(Nt,Qt),at=Mt.getFrustum(),St(Dt,Wt,Mt.camera,Nt,this.type)}Mt.isPointLightShadow!==!0&&this.type===VSMShadowMap&&Ct(Mt,Wt),Mt.needsUpdate=!1}wt.needsUpdate=!1,it.setRenderTarget(qt,Vt,Yt)};function Ct(Rt,Dt){const Wt=tt.update(Tt);At.defines.VSM_SAMPLES!==Rt.blurSamples&&(At.defines.VSM_SAMPLES=Rt.blurSamples,xt.defines.VSM_SAMPLES=Rt.blurSamples,At.needsUpdate=!0,xt.needsUpdate=!0),Rt.mapPass===null&&(Rt.mapPass=new WebGLRenderTarget(st.x,st.y)),At.uniforms.shadow_pass.value=Rt.map.texture,At.uniforms.resolution.value=Rt.mapSize,At.uniforms.radius.value=Rt.radius,it.setRenderTarget(Rt.mapPass),it.clear(),it.renderBufferDirect(Dt,null,Wt,At,Tt,null),xt.uniforms.shadow_pass.value=Rt.mapPass.texture,xt.uniforms.resolution.value=Rt.mapSize,xt.uniforms.radius.value=Rt.radius,it.setRenderTarget(Rt.map),it.clear(),it.renderBufferDirect(Dt,null,Wt,xt,Tt,null)}function It(Rt,Dt,Wt,qt,Vt,Yt){let jt=null;const kt=Wt.isPointLight===!0?Rt.customDistanceMaterial:Rt.customDepthMaterial;if(kt!==void 0?jt=kt:jt=Wt.isPointLight===!0?ht:ut,it.localClippingEnabled&&Dt.clipShadows===!0&&Array.isArray(Dt.clippingPlanes)&&Dt.clippingPlanes.length!==0||Dt.displacementMap&&Dt.displacementScale!==0||Dt.alphaMap&&Dt.alphaTest>0){const zt=jt.uuid,Nt=Dt.uuid;let Mt=mt[zt];Mt===void 0&&(Mt={},mt[zt]=Mt);let Lt=Mt[Nt];Lt===void 0&&(Lt=jt.clone(),Mt[Nt]=Lt),jt=Lt}return jt.visible=Dt.visible,jt.wireframe=Dt.wireframe,Yt===VSMShadowMap?jt.side=Dt.shadowSide!==null?Dt.shadowSide:Dt.side:jt.side=Dt.shadowSide!==null?Dt.shadowSide:vt[Dt.side],jt.alphaMap=Dt.alphaMap,jt.alphaTest=Dt.alphaTest,jt.clipShadows=Dt.clipShadows,jt.clippingPlanes=Dt.clippingPlanes,jt.clipIntersection=Dt.clipIntersection,jt.displacementMap=Dt.displacementMap,jt.displacementScale=Dt.displacementScale,jt.displacementBias=Dt.displacementBias,jt.wireframeLinewidth=Dt.wireframeLinewidth,jt.linewidth=Dt.linewidth,Wt.isPointLight===!0&&jt.isMeshDistanceMaterial===!0&&(jt.referencePosition.setFromMatrixPosition(Wt.matrixWorld),jt.nearDistance=qt,jt.farDistance=Vt),jt}function St(Rt,Dt,Wt,qt,Vt){if(Rt.visible===!1)return;if(Rt.layers.test(Dt.layers)&&(Rt.isMesh||Rt.isLine||Rt.isPoints)&&(Rt.castShadow||Rt.receiveShadow&&Vt===VSMShadowMap)&&(!Rt.frustumCulled||at.intersectsObject(Rt))){Rt.modelViewMatrix.multiplyMatrices(Wt.matrixWorldInverse,Rt.matrixWorld);const kt=tt.update(Rt),zt=Rt.material;if(Array.isArray(zt)){const Nt=kt.groups;for(let Mt=0,Lt=Nt.length;Mt<Lt;Mt++){const Ht=Nt[Mt],Qt=zt[Ht.materialIndex];if(Qt&&Qt.visible){const Ut=It(Rt,Qt,qt,Wt.near,Wt.far,Vt);it.renderBufferDirect(Wt,null,kt,Ut,Rt,Ht)}}}else if(zt.visible){const Nt=It(Rt,zt,qt,Wt.near,Wt.far,Vt);it.renderBufferDirect(Wt,null,kt,Nt,Rt,null)}}const jt=Rt.children;for(let kt=0,zt=jt.length;kt<zt;kt++)St(jt[kt],Dt,Wt,qt,Vt)}}function WebGLState(it,tt,rt){const at=rt.isWebGL2;function st(){let Sn=!1;const Fn=new Vector4;let Nn=null;const Wn=new Vector4(0,0,0,0);return{setMask:function(Kn){Nn!==Kn&&!Sn&&(it.colorMask(Kn,Kn,Kn,Kn),Nn=Kn)},setLocked:function(Kn){Sn=Kn},setClear:function(Kn,Hn,Yn,dr,tr){tr===!0&&(Kn*=dr,Hn*=dr,Yn*=dr),Fn.set(Kn,Hn,Yn,dr),Wn.equals(Fn)===!1&&(it.clearColor(Kn,Hn,Yn,dr),Wn.copy(Fn))},reset:function(){Sn=!1,Nn=null,Wn.set(-1,0,0,0)}}}function ot(){let Sn=!1,Fn=null,Nn=null,Wn=null;return{setTest:function(Kn){Kn?fn(2929):pn(2929)},setMask:function(Kn){Fn!==Kn&&!Sn&&(it.depthMask(Kn),Fn=Kn)},setFunc:function(Kn){if(Nn!==Kn){switch(Kn){case NeverDepth:it.depthFunc(512);break;case AlwaysDepth:it.depthFunc(519);break;case LessDepth:it.depthFunc(513);break;case LessEqualDepth:it.depthFunc(515);break;case EqualDepth:it.depthFunc(514);break;case GreaterEqualDepth:it.depthFunc(518);break;case GreaterDepth:it.depthFunc(516);break;case NotEqualDepth:it.depthFunc(517);break;default:it.depthFunc(515)}Nn=Kn}},setLocked:function(Kn){Sn=Kn},setClear:function(Kn){Wn!==Kn&&(it.clearDepth(Kn),Wn=Kn)},reset:function(){Sn=!1,Fn=null,Nn=null,Wn=null}}}function lt(){let Sn=!1,Fn=null,Nn=null,Wn=null,Kn=null,Hn=null,Yn=null,dr=null,tr=null;return{setTest:function(Qn){Sn||(Qn?fn(2960):pn(2960))},setMask:function(Qn){Fn!==Qn&&!Sn&&(it.stencilMask(Qn),Fn=Qn)},setFunc:function(Qn,mr,Jn){(Nn!==Qn||Wn!==mr||Kn!==Jn)&&(it.stencilFunc(Qn,mr,Jn),Nn=Qn,Wn=mr,Kn=Jn)},setOp:function(Qn,mr,Jn){(Hn!==Qn||Yn!==mr||dr!==Jn)&&(it.stencilOp(Qn,mr,Jn),Hn=Qn,Yn=mr,dr=Jn)},setLocked:function(Qn){Sn=Qn},setClear:function(Qn){tr!==Qn&&(it.clearStencil(Qn),tr=Qn)},reset:function(){Sn=!1,Fn=null,Nn=null,Wn=null,Kn=null,Hn=null,Yn=null,dr=null,tr=null}}}const ut=new st,ht=new ot,mt=new lt,bt=new WeakMap,vt=new WeakMap;let At={},xt={},Et=new WeakMap,Tt=[],wt=null,Ct=!1,It=null,St=null,Rt=null,Dt=null,Wt=null,qt=null,Vt=null,Yt=!1,jt=null,kt=null,zt=null,Nt=null,Mt=null;const Lt=it.getParameter(35661);let Ht=!1,Qt=0;const Ut=it.getParameter(7938);Ut.indexOf("WebGL")!==-1?(Qt=parseFloat(/^WebGL (\d)/.exec(Ut)[1]),Ht=Qt>=1):Ut.indexOf("OpenGL ES")!==-1&&(Qt=parseFloat(/^OpenGL ES (\d)/.exec(Ut)[1]),Ht=Qt>=2);let Bt=null,Kt={};const Gt=it.getParameter(3088),Pt=it.getParameter(2978),Zt=new Vector4().fromArray(Gt),an=new Vector4().fromArray(Pt);function Jt(Sn,Fn,Nn){const Wn=new Uint8Array(4),Kn=it.createTexture();it.bindTexture(Sn,Kn),it.texParameteri(Sn,10241,9728),it.texParameteri(Sn,10240,9728);for(let Hn=0;Hn<Nn;Hn++)it.texImage2D(Fn+Hn,0,6408,1,1,0,6408,5121,Wn);return Kn}const rn={};rn[3553]=Jt(3553,3553,1),rn[34067]=Jt(34067,34069,6),ut.setClear(0,0,0,1),ht.setClear(1),mt.setClear(0),fn(2929),ht.setFunc(LessEqualDepth),yn(!1),nn(CullFaceBack),fn(2884),wn(NoBlending);function fn(Sn){At[Sn]!==!0&&(it.enable(Sn),At[Sn]=!0)}function pn(Sn){At[Sn]!==!1&&(it.disable(Sn),At[Sn]=!1)}function vn(Sn,Fn){return xt[Sn]!==Fn?(it.bindFramebuffer(Sn,Fn),xt[Sn]=Fn,at&&(Sn===36009&&(xt[36160]=Fn),Sn===36160&&(xt[36009]=Fn)),!0):!1}function En(Sn,Fn){let Nn=Tt,Wn=!1;if(Sn)if(Nn=Et.get(Fn),Nn===void 0&&(Nn=[],Et.set(Fn,Nn)),Sn.isWebGLMultipleRenderTargets){const Kn=Sn.texture;if(Nn.length!==Kn.length||Nn[0]!==36064){for(let Hn=0,Yn=Kn.length;Hn<Yn;Hn++)Nn[Hn]=36064+Hn;Nn.length=Kn.length,Wn=!0}}else Nn[0]!==36064&&(Nn[0]=36064,Wn=!0);else Nn[0]!==1029&&(Nn[0]=1029,Wn=!0);Wn&&(rt.isWebGL2?it.drawBuffers(Nn):tt.get("WEBGL_draw_buffers").drawBuffersWEBGL(Nn))}function dn(Sn){return wt!==Sn?(it.useProgram(Sn),wt=Sn,!0):!1}const cn={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(at)cn[MinEquation]=32775,cn[MaxEquation]=32776;else{const Sn=tt.get("EXT_blend_minmax");Sn!==null&&(cn[MinEquation]=Sn.MIN_EXT,cn[MaxEquation]=Sn.MAX_EXT)}const _n={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function wn(Sn,Fn,Nn,Wn,Kn,Hn,Yn,dr){if(Sn===NoBlending){Ct===!0&&(pn(3042),Ct=!1);return}if(Ct===!1&&(fn(3042),Ct=!0),Sn!==CustomBlending){if(Sn!==It||dr!==Yt){if((St!==AddEquation||Wt!==AddEquation)&&(it.blendEquation(32774),St=AddEquation,Wt=AddEquation),dr)switch(Sn){case NormalBlending:it.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:it.blendFunc(1,1);break;case SubtractiveBlending:it.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:it.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Sn);break}else switch(Sn){case NormalBlending:it.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:it.blendFunc(770,1);break;case SubtractiveBlending:it.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:it.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Sn);break}Rt=null,Dt=null,qt=null,Vt=null,It=Sn,Yt=dr}return}Kn=Kn||Fn,Hn=Hn||Nn,Yn=Yn||Wn,(Fn!==St||Kn!==Wt)&&(it.blendEquationSeparate(cn[Fn],cn[Kn]),St=Fn,Wt=Kn),(Nn!==Rt||Wn!==Dt||Hn!==qt||Yn!==Vt)&&(it.blendFuncSeparate(_n[Nn],_n[Wn],_n[Hn],_n[Yn]),Rt=Nn,Dt=Wn,qt=Hn,Vt=Yn),It=Sn,Yt=null}function Ln(Sn,Fn){Sn.side===DoubleSide?pn(2884):fn(2884);let Nn=Sn.side===BackSide;Fn&&(Nn=!Nn),yn(Nn),Sn.blending===NormalBlending&&Sn.transparent===!1?wn(NoBlending):wn(Sn.blending,Sn.blendEquation,Sn.blendSrc,Sn.blendDst,Sn.blendEquationAlpha,Sn.blendSrcAlpha,Sn.blendDstAlpha,Sn.premultipliedAlpha),ht.setFunc(Sn.depthFunc),ht.setTest(Sn.depthTest),ht.setMask(Sn.depthWrite),ut.setMask(Sn.colorWrite);const Wn=Sn.stencilWrite;mt.setTest(Wn),Wn&&(mt.setMask(Sn.stencilWriteMask),mt.setFunc(Sn.stencilFunc,Sn.stencilRef,Sn.stencilFuncMask),mt.setOp(Sn.stencilFail,Sn.stencilZFail,Sn.stencilZPass)),hn(Sn.polygonOffset,Sn.polygonOffsetFactor,Sn.polygonOffsetUnits),Sn.alphaToCoverage===!0?fn(32926):pn(32926)}function yn(Sn){jt!==Sn&&(Sn?it.frontFace(2304):it.frontFace(2305),jt=Sn)}function nn(Sn){Sn!==CullFaceNone?(fn(2884),Sn!==kt&&(Sn===CullFaceBack?it.cullFace(1029):Sn===CullFaceFront?it.cullFace(1028):it.cullFace(1032))):pn(2884),kt=Sn}function sn(Sn){Sn!==zt&&(Ht&&it.lineWidth(Sn),zt=Sn)}function hn(Sn,Fn,Nn){Sn?(fn(32823),(Nt!==Fn||Mt!==Nn)&&(it.polygonOffset(Fn,Nn),Nt=Fn,Mt=Nn)):pn(32823)}function Cn(Sn){Sn?fn(3089):pn(3089)}function $n(Sn){Sn===void 0&&(Sn=33984+Lt-1),Bt!==Sn&&(it.activeTexture(Sn),Bt=Sn)}function gn(Sn,Fn,Nn){Nn===void 0&&(Bt===null?Nn=33984+Lt-1:Nn=Bt);let Wn=Kt[Nn];Wn===void 0&&(Wn={type:void 0,texture:void 0},Kt[Nn]=Wn),(Wn.type!==Sn||Wn.texture!==Fn)&&(Bt!==Nn&&(it.activeTexture(Nn),Bt=Nn),it.bindTexture(Sn,Fn||rn[Sn]),Wn.type=Sn,Wn.texture=Fn)}function mn(){const Sn=Kt[Bt];Sn!==void 0&&Sn.type!==void 0&&(it.bindTexture(Sn.type,null),Sn.type=void 0,Sn.texture=void 0)}function Mn(){try{it.compressedTexImage2D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function On(){try{it.compressedTexImage3D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function Dn(){try{it.texSubImage2D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function on(){try{it.texSubImage3D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function Xt(){try{it.compressedTexSubImage2D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function tn(){try{it.compressedTexSubImage3D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function un(){try{it.texStorage2D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function xn(){try{it.texStorage3D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function Tn(){try{it.texImage2D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function In(){try{it.texImage3D.apply(it,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}}function jn(Sn){Zt.equals(Sn)===!1&&(it.scissor(Sn.x,Sn.y,Sn.z,Sn.w),Zt.copy(Sn))}function Un(Sn){an.equals(Sn)===!1&&(it.viewport(Sn.x,Sn.y,Sn.z,Sn.w),an.copy(Sn))}function zn(Sn,Fn){let Nn=vt.get(Fn);Nn===void 0&&(Nn=new WeakMap,vt.set(Fn,Nn));let Wn=Nn.get(Sn);Wn===void 0&&(Wn=it.getUniformBlockIndex(Fn,Sn.name),Nn.set(Sn,Wn))}function Xn(Sn,Fn){const Wn=vt.get(Fn).get(Sn);bt.get(Sn)!==Wn&&(it.uniformBlockBinding(Fn,Wn,Sn.__bindingPointIndex),bt.set(Sn,Wn))}function Gn(){it.disable(3042),it.disable(2884),it.disable(2929),it.disable(32823),it.disable(3089),it.disable(2960),it.disable(32926),it.blendEquation(32774),it.blendFunc(1,0),it.blendFuncSeparate(1,0,1,0),it.colorMask(!0,!0,!0,!0),it.clearColor(0,0,0,0),it.depthMask(!0),it.depthFunc(513),it.clearDepth(1),it.stencilMask(4294967295),it.stencilFunc(519,0,4294967295),it.stencilOp(7680,7680,7680),it.clearStencil(0),it.cullFace(1029),it.frontFace(2305),it.polygonOffset(0,0),it.activeTexture(33984),it.bindFramebuffer(36160,null),at===!0&&(it.bindFramebuffer(36009,null),it.bindFramebuffer(36008,null)),it.useProgram(null),it.lineWidth(1),it.scissor(0,0,it.canvas.width,it.canvas.height),it.viewport(0,0,it.canvas.width,it.canvas.height),At={},Bt=null,Kt={},xt={},Et=new WeakMap,Tt=[],wt=null,Ct=!1,It=null,St=null,Rt=null,Dt=null,Wt=null,qt=null,Vt=null,Yt=!1,jt=null,kt=null,zt=null,Nt=null,Mt=null,Zt.set(0,0,it.canvas.width,it.canvas.height),an.set(0,0,it.canvas.width,it.canvas.height),ut.reset(),ht.reset(),mt.reset()}return{buffers:{color:ut,depth:ht,stencil:mt},enable:fn,disable:pn,bindFramebuffer:vn,drawBuffers:En,useProgram:dn,setBlending:wn,setMaterial:Ln,setFlipSided:yn,setCullFace:nn,setLineWidth:sn,setPolygonOffset:hn,setScissorTest:Cn,activeTexture:$n,bindTexture:gn,unbindTexture:mn,compressedTexImage2D:Mn,compressedTexImage3D:On,texImage2D:Tn,texImage3D:In,updateUBOMapping:zn,uniformBlockBinding:Xn,texStorage2D:un,texStorage3D:xn,texSubImage2D:Dn,texSubImage3D:on,compressedTexSubImage2D:Xt,compressedTexSubImage3D:tn,scissor:jn,viewport:Un,reset:Gn}}function WebGLTextures(it,tt,rt,at,st,ot,lt){const ut=st.isWebGL2,ht=st.maxTextures,mt=st.maxCubemapSize,bt=st.maxTextureSize,vt=st.maxSamples,At=tt.has("WEBGL_multisampled_render_to_texture")?tt.get("WEBGL_multisampled_render_to_texture"):null,xt=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),Et=new WeakMap;let Tt;const wt=new WeakMap;let Ct=!1;try{Ct=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function It(gn,mn){return Ct?new OffscreenCanvas(gn,mn):createElementNS("canvas")}function St(gn,mn,Mn,On){let Dn=1;if((gn.width>On||gn.height>On)&&(Dn=On/Math.max(gn.width,gn.height)),Dn<1||mn===!0)if(typeof HTMLImageElement<"u"&&gn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&gn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&gn instanceof ImageBitmap){const on=mn?floorPowerOfTwo:Math.floor,Xt=on(Dn*gn.width),tn=on(Dn*gn.height);Tt===void 0&&(Tt=It(Xt,tn));const un=Mn?It(Xt,tn):Tt;return un.width=Xt,un.height=tn,un.getContext("2d").drawImage(gn,0,0,Xt,tn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+gn.width+"x"+gn.height+") to ("+Xt+"x"+tn+")."),un}else return"data"in gn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+gn.width+"x"+gn.height+")."),gn;return gn}function Rt(gn){return isPowerOfTwo(gn.width)&&isPowerOfTwo(gn.height)}function Dt(gn){return ut?!1:gn.wrapS!==ClampToEdgeWrapping||gn.wrapT!==ClampToEdgeWrapping||gn.minFilter!==NearestFilter&&gn.minFilter!==LinearFilter}function Wt(gn,mn){return gn.generateMipmaps&&mn&&gn.minFilter!==NearestFilter&&gn.minFilter!==LinearFilter}function qt(gn){it.generateMipmap(gn)}function Vt(gn,mn,Mn,On,Dn=!1){if(ut===!1)return mn;if(gn!==null){if(it[gn]!==void 0)return it[gn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+gn+"'")}let on=mn;return mn===6403&&(Mn===5126&&(on=33326),Mn===5131&&(on=33325),Mn===5121&&(on=33321)),mn===33319&&(Mn===5126&&(on=33328),Mn===5131&&(on=33327),Mn===5121&&(on=33323)),mn===6408&&(Mn===5126&&(on=34836),Mn===5131&&(on=34842),Mn===5121&&(on=On===sRGBEncoding&&Dn===!1?35907:32856),Mn===32819&&(on=32854),Mn===32820&&(on=32855)),(on===33325||on===33326||on===33327||on===33328||on===34842||on===34836)&&tt.get("EXT_color_buffer_float"),on}function Yt(gn,mn,Mn){return Wt(gn,Mn)===!0||gn.isFramebufferTexture&&gn.minFilter!==NearestFilter&&gn.minFilter!==LinearFilter?Math.log2(Math.max(mn.width,mn.height))+1:gn.mipmaps!==void 0&&gn.mipmaps.length>0?gn.mipmaps.length:gn.isCompressedTexture&&Array.isArray(gn.image)?mn.mipmaps.length:1}function jt(gn){return gn===NearestFilter||gn===NearestMipmapNearestFilter||gn===NearestMipmapLinearFilter?9728:9729}function kt(gn){const mn=gn.target;mn.removeEventListener("dispose",kt),Nt(mn),mn.isVideoTexture&&Et.delete(mn)}function zt(gn){const mn=gn.target;mn.removeEventListener("dispose",zt),Lt(mn)}function Nt(gn){const mn=at.get(gn);if(mn.__webglInit===void 0)return;const Mn=gn.source,On=wt.get(Mn);if(On){const Dn=On[mn.__cacheKey];Dn.usedTimes--,Dn.usedTimes===0&&Mt(gn),Object.keys(On).length===0&&wt.delete(Mn)}at.remove(gn)}function Mt(gn){const mn=at.get(gn);it.deleteTexture(mn.__webglTexture);const Mn=gn.source,On=wt.get(Mn);delete On[mn.__cacheKey],lt.memory.textures--}function Lt(gn){const mn=gn.texture,Mn=at.get(gn),On=at.get(mn);if(On.__webglTexture!==void 0&&(it.deleteTexture(On.__webglTexture),lt.memory.textures--),gn.depthTexture&&gn.depthTexture.dispose(),gn.isWebGLCubeRenderTarget)for(let Dn=0;Dn<6;Dn++)it.deleteFramebuffer(Mn.__webglFramebuffer[Dn]),Mn.__webglDepthbuffer&&it.deleteRenderbuffer(Mn.__webglDepthbuffer[Dn]);else{if(it.deleteFramebuffer(Mn.__webglFramebuffer),Mn.__webglDepthbuffer&&it.deleteRenderbuffer(Mn.__webglDepthbuffer),Mn.__webglMultisampledFramebuffer&&it.deleteFramebuffer(Mn.__webglMultisampledFramebuffer),Mn.__webglColorRenderbuffer)for(let Dn=0;Dn<Mn.__webglColorRenderbuffer.length;Dn++)Mn.__webglColorRenderbuffer[Dn]&&it.deleteRenderbuffer(Mn.__webglColorRenderbuffer[Dn]);Mn.__webglDepthRenderbuffer&&it.deleteRenderbuffer(Mn.__webglDepthRenderbuffer)}if(gn.isWebGLMultipleRenderTargets)for(let Dn=0,on=mn.length;Dn<on;Dn++){const Xt=at.get(mn[Dn]);Xt.__webglTexture&&(it.deleteTexture(Xt.__webglTexture),lt.memory.textures--),at.remove(mn[Dn])}at.remove(mn),at.remove(gn)}let Ht=0;function Qt(){Ht=0}function Ut(){const gn=Ht;return gn>=ht&&console.warn("THREE.WebGLTextures: Trying to use "+gn+" texture units while this GPU supports only "+ht),Ht+=1,gn}function Bt(gn){const mn=[];return mn.push(gn.wrapS),mn.push(gn.wrapT),mn.push(gn.wrapR||0),mn.push(gn.magFilter),mn.push(gn.minFilter),mn.push(gn.anisotropy),mn.push(gn.internalFormat),mn.push(gn.format),mn.push(gn.type),mn.push(gn.generateMipmaps),mn.push(gn.premultiplyAlpha),mn.push(gn.flipY),mn.push(gn.unpackAlignment),mn.push(gn.encoding),mn.join()}function Kt(gn,mn){const Mn=at.get(gn);if(gn.isVideoTexture&&Cn(gn),gn.isRenderTargetTexture===!1&&gn.version>0&&Mn.__version!==gn.version){const On=gn.image;if(On===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(On.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{pn(Mn,gn,mn);return}}rt.bindTexture(3553,Mn.__webglTexture,33984+mn)}function Gt(gn,mn){const Mn=at.get(gn);if(gn.version>0&&Mn.__version!==gn.version){pn(Mn,gn,mn);return}rt.bindTexture(35866,Mn.__webglTexture,33984+mn)}function Pt(gn,mn){const Mn=at.get(gn);if(gn.version>0&&Mn.__version!==gn.version){pn(Mn,gn,mn);return}rt.bindTexture(32879,Mn.__webglTexture,33984+mn)}function Zt(gn,mn){const Mn=at.get(gn);if(gn.version>0&&Mn.__version!==gn.version){vn(Mn,gn,mn);return}rt.bindTexture(34067,Mn.__webglTexture,33984+mn)}const an={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},Jt={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function rn(gn,mn,Mn){if(Mn?(it.texParameteri(gn,10242,an[mn.wrapS]),it.texParameteri(gn,10243,an[mn.wrapT]),(gn===32879||gn===35866)&&it.texParameteri(gn,32882,an[mn.wrapR]),it.texParameteri(gn,10240,Jt[mn.magFilter]),it.texParameteri(gn,10241,Jt[mn.minFilter])):(it.texParameteri(gn,10242,33071),it.texParameteri(gn,10243,33071),(gn===32879||gn===35866)&&it.texParameteri(gn,32882,33071),(mn.wrapS!==ClampToEdgeWrapping||mn.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),it.texParameteri(gn,10240,jt(mn.magFilter)),it.texParameteri(gn,10241,jt(mn.minFilter)),mn.minFilter!==NearestFilter&&mn.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),tt.has("EXT_texture_filter_anisotropic")===!0){const On=tt.get("EXT_texture_filter_anisotropic");if(mn.type===FloatType&&tt.has("OES_texture_float_linear")===!1||ut===!1&&mn.type===HalfFloatType&&tt.has("OES_texture_half_float_linear")===!1)return;(mn.anisotropy>1||at.get(mn).__currentAnisotropy)&&(it.texParameterf(gn,On.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(mn.anisotropy,st.getMaxAnisotropy())),at.get(mn).__currentAnisotropy=mn.anisotropy)}}function fn(gn,mn){let Mn=!1;gn.__webglInit===void 0&&(gn.__webglInit=!0,mn.addEventListener("dispose",kt));const On=mn.source;let Dn=wt.get(On);Dn===void 0&&(Dn={},wt.set(On,Dn));const on=Bt(mn);if(on!==gn.__cacheKey){Dn[on]===void 0&&(Dn[on]={texture:it.createTexture(),usedTimes:0},lt.memory.textures++,Mn=!0),Dn[on].usedTimes++;const Xt=Dn[gn.__cacheKey];Xt!==void 0&&(Dn[gn.__cacheKey].usedTimes--,Xt.usedTimes===0&&Mt(mn)),gn.__cacheKey=on,gn.__webglTexture=Dn[on].texture}return Mn}function pn(gn,mn,Mn){let On=3553;(mn.isDataArrayTexture||mn.isCompressedArrayTexture)&&(On=35866),mn.isData3DTexture&&(On=32879);const Dn=fn(gn,mn),on=mn.source;rt.bindTexture(On,gn.__webglTexture,33984+Mn);const Xt=at.get(on);if(on.version!==Xt.__version||Dn===!0){rt.activeTexture(33984+Mn),it.pixelStorei(37440,mn.flipY),it.pixelStorei(37441,mn.premultiplyAlpha),it.pixelStorei(3317,mn.unpackAlignment),it.pixelStorei(37443,0);const tn=Dt(mn)&&Rt(mn.image)===!1;let un=St(mn.image,tn,!1,bt);un=$n(mn,un);const xn=Rt(un)||ut,Tn=ot.convert(mn.format,mn.encoding);let In=ot.convert(mn.type),jn=Vt(mn.internalFormat,Tn,In,mn.encoding,mn.isVideoTexture);rn(On,mn,xn);let Un;const zn=mn.mipmaps,Xn=ut&&mn.isVideoTexture!==!0,Gn=Xt.__version===void 0||Dn===!0,Sn=Yt(mn,un,xn);if(mn.isDepthTexture)jn=6402,ut?mn.type===FloatType?jn=36012:mn.type===UnsignedIntType?jn=33190:mn.type===UnsignedInt248Type?jn=35056:jn=33189:mn.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),mn.format===DepthFormat&&jn===6402&&mn.type!==UnsignedShortType&&mn.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),mn.type=UnsignedIntType,In=ot.convert(mn.type)),mn.format===DepthStencilFormat&&jn===6402&&(jn=34041,mn.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),mn.type=UnsignedInt248Type,In=ot.convert(mn.type))),Gn&&(Xn?rt.texStorage2D(3553,1,jn,un.width,un.height):rt.texImage2D(3553,0,jn,un.width,un.height,0,Tn,In,null));else if(mn.isDataTexture)if(zn.length>0&&xn){Xn&&Gn&&rt.texStorage2D(3553,Sn,jn,zn[0].width,zn[0].height);for(let Fn=0,Nn=zn.length;Fn<Nn;Fn++)Un=zn[Fn],Xn?rt.texSubImage2D(3553,Fn,0,0,Un.width,Un.height,Tn,In,Un.data):rt.texImage2D(3553,Fn,jn,Un.width,Un.height,0,Tn,In,Un.data);mn.generateMipmaps=!1}else Xn?(Gn&&rt.texStorage2D(3553,Sn,jn,un.width,un.height),rt.texSubImage2D(3553,0,0,0,un.width,un.height,Tn,In,un.data)):rt.texImage2D(3553,0,jn,un.width,un.height,0,Tn,In,un.data);else if(mn.isCompressedTexture)if(mn.isCompressedArrayTexture){Xn&&Gn&&rt.texStorage3D(35866,Sn,jn,zn[0].width,zn[0].height,un.depth);for(let Fn=0,Nn=zn.length;Fn<Nn;Fn++)Un=zn[Fn],mn.format!==RGBAFormat?Tn!==null?Xn?rt.compressedTexSubImage3D(35866,Fn,0,0,0,Un.width,Un.height,un.depth,Tn,Un.data,0,0):rt.compressedTexImage3D(35866,Fn,jn,Un.width,Un.height,un.depth,0,Un.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xn?rt.texSubImage3D(35866,Fn,0,0,0,Un.width,Un.height,un.depth,Tn,In,Un.data):rt.texImage3D(35866,Fn,jn,Un.width,Un.height,un.depth,0,Tn,In,Un.data)}else{Xn&&Gn&&rt.texStorage2D(3553,Sn,jn,zn[0].width,zn[0].height);for(let Fn=0,Nn=zn.length;Fn<Nn;Fn++)Un=zn[Fn],mn.format!==RGBAFormat?Tn!==null?Xn?rt.compressedTexSubImage2D(3553,Fn,0,0,Un.width,Un.height,Tn,Un.data):rt.compressedTexImage2D(3553,Fn,jn,Un.width,Un.height,0,Un.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xn?rt.texSubImage2D(3553,Fn,0,0,Un.width,Un.height,Tn,In,Un.data):rt.texImage2D(3553,Fn,jn,Un.width,Un.height,0,Tn,In,Un.data)}else if(mn.isDataArrayTexture)Xn?(Gn&&rt.texStorage3D(35866,Sn,jn,un.width,un.height,un.depth),rt.texSubImage3D(35866,0,0,0,0,un.width,un.height,un.depth,Tn,In,un.data)):rt.texImage3D(35866,0,jn,un.width,un.height,un.depth,0,Tn,In,un.data);else if(mn.isData3DTexture)Xn?(Gn&&rt.texStorage3D(32879,Sn,jn,un.width,un.height,un.depth),rt.texSubImage3D(32879,0,0,0,0,un.width,un.height,un.depth,Tn,In,un.data)):rt.texImage3D(32879,0,jn,un.width,un.height,un.depth,0,Tn,In,un.data);else if(mn.isFramebufferTexture){if(Gn)if(Xn)rt.texStorage2D(3553,Sn,jn,un.width,un.height);else{let Fn=un.width,Nn=un.height;for(let Wn=0;Wn<Sn;Wn++)rt.texImage2D(3553,Wn,jn,Fn,Nn,0,Tn,In,null),Fn>>=1,Nn>>=1}}else if(zn.length>0&&xn){Xn&&Gn&&rt.texStorage2D(3553,Sn,jn,zn[0].width,zn[0].height);for(let Fn=0,Nn=zn.length;Fn<Nn;Fn++)Un=zn[Fn],Xn?rt.texSubImage2D(3553,Fn,0,0,Tn,In,Un):rt.texImage2D(3553,Fn,jn,Tn,In,Un);mn.generateMipmaps=!1}else Xn?(Gn&&rt.texStorage2D(3553,Sn,jn,un.width,un.height),rt.texSubImage2D(3553,0,0,0,Tn,In,un)):rt.texImage2D(3553,0,jn,Tn,In,un);Wt(mn,xn)&&qt(On),Xt.__version=on.version,mn.onUpdate&&mn.onUpdate(mn)}gn.__version=mn.version}function vn(gn,mn,Mn){if(mn.image.length!==6)return;const On=fn(gn,mn),Dn=mn.source;rt.bindTexture(34067,gn.__webglTexture,33984+Mn);const on=at.get(Dn);if(Dn.version!==on.__version||On===!0){rt.activeTexture(33984+Mn),it.pixelStorei(37440,mn.flipY),it.pixelStorei(37441,mn.premultiplyAlpha),it.pixelStorei(3317,mn.unpackAlignment),it.pixelStorei(37443,0);const Xt=mn.isCompressedTexture||mn.image[0].isCompressedTexture,tn=mn.image[0]&&mn.image[0].isDataTexture,un=[];for(let Fn=0;Fn<6;Fn++)!Xt&&!tn?un[Fn]=St(mn.image[Fn],!1,!0,mt):un[Fn]=tn?mn.image[Fn].image:mn.image[Fn],un[Fn]=$n(mn,un[Fn]);const xn=un[0],Tn=Rt(xn)||ut,In=ot.convert(mn.format,mn.encoding),jn=ot.convert(mn.type),Un=Vt(mn.internalFormat,In,jn,mn.encoding),zn=ut&&mn.isVideoTexture!==!0,Xn=on.__version===void 0||On===!0;let Gn=Yt(mn,xn,Tn);rn(34067,mn,Tn);let Sn;if(Xt){zn&&Xn&&rt.texStorage2D(34067,Gn,Un,xn.width,xn.height);for(let Fn=0;Fn<6;Fn++){Sn=un[Fn].mipmaps;for(let Nn=0;Nn<Sn.length;Nn++){const Wn=Sn[Nn];mn.format!==RGBAFormat?In!==null?zn?rt.compressedTexSubImage2D(34069+Fn,Nn,0,0,Wn.width,Wn.height,In,Wn.data):rt.compressedTexImage2D(34069+Fn,Nn,Un,Wn.width,Wn.height,0,Wn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):zn?rt.texSubImage2D(34069+Fn,Nn,0,0,Wn.width,Wn.height,In,jn,Wn.data):rt.texImage2D(34069+Fn,Nn,Un,Wn.width,Wn.height,0,In,jn,Wn.data)}}}else{Sn=mn.mipmaps,zn&&Xn&&(Sn.length>0&&Gn++,rt.texStorage2D(34067,Gn,Un,un[0].width,un[0].height));for(let Fn=0;Fn<6;Fn++)if(tn){zn?rt.texSubImage2D(34069+Fn,0,0,0,un[Fn].width,un[Fn].height,In,jn,un[Fn].data):rt.texImage2D(34069+Fn,0,Un,un[Fn].width,un[Fn].height,0,In,jn,un[Fn].data);for(let Nn=0;Nn<Sn.length;Nn++){const Kn=Sn[Nn].image[Fn].image;zn?rt.texSubImage2D(34069+Fn,Nn+1,0,0,Kn.width,Kn.height,In,jn,Kn.data):rt.texImage2D(34069+Fn,Nn+1,Un,Kn.width,Kn.height,0,In,jn,Kn.data)}}else{zn?rt.texSubImage2D(34069+Fn,0,0,0,In,jn,un[Fn]):rt.texImage2D(34069+Fn,0,Un,In,jn,un[Fn]);for(let Nn=0;Nn<Sn.length;Nn++){const Wn=Sn[Nn];zn?rt.texSubImage2D(34069+Fn,Nn+1,0,0,In,jn,Wn.image[Fn]):rt.texImage2D(34069+Fn,Nn+1,Un,In,jn,Wn.image[Fn])}}}Wt(mn,Tn)&&qt(34067),on.__version=Dn.version,mn.onUpdate&&mn.onUpdate(mn)}gn.__version=mn.version}function En(gn,mn,Mn,On,Dn){const on=ot.convert(Mn.format,Mn.encoding),Xt=ot.convert(Mn.type),tn=Vt(Mn.internalFormat,on,Xt,Mn.encoding);at.get(mn).__hasExternalTextures||(Dn===32879||Dn===35866?rt.texImage3D(Dn,0,tn,mn.width,mn.height,mn.depth,0,on,Xt,null):rt.texImage2D(Dn,0,tn,mn.width,mn.height,0,on,Xt,null)),rt.bindFramebuffer(36160,gn),hn(mn)?At.framebufferTexture2DMultisampleEXT(36160,On,Dn,at.get(Mn).__webglTexture,0,sn(mn)):(Dn===3553||Dn>=34069&&Dn<=34074)&&it.framebufferTexture2D(36160,On,Dn,at.get(Mn).__webglTexture,0),rt.bindFramebuffer(36160,null)}function dn(gn,mn,Mn){if(it.bindRenderbuffer(36161,gn),mn.depthBuffer&&!mn.stencilBuffer){let On=33189;if(Mn||hn(mn)){const Dn=mn.depthTexture;Dn&&Dn.isDepthTexture&&(Dn.type===FloatType?On=36012:Dn.type===UnsignedIntType&&(On=33190));const on=sn(mn);hn(mn)?At.renderbufferStorageMultisampleEXT(36161,on,On,mn.width,mn.height):it.renderbufferStorageMultisample(36161,on,On,mn.width,mn.height)}else it.renderbufferStorage(36161,On,mn.width,mn.height);it.framebufferRenderbuffer(36160,36096,36161,gn)}else if(mn.depthBuffer&&mn.stencilBuffer){const On=sn(mn);Mn&&hn(mn)===!1?it.renderbufferStorageMultisample(36161,On,35056,mn.width,mn.height):hn(mn)?At.renderbufferStorageMultisampleEXT(36161,On,35056,mn.width,mn.height):it.renderbufferStorage(36161,34041,mn.width,mn.height),it.framebufferRenderbuffer(36160,33306,36161,gn)}else{const On=mn.isWebGLMultipleRenderTargets===!0?mn.texture:[mn.texture];for(let Dn=0;Dn<On.length;Dn++){const on=On[Dn],Xt=ot.convert(on.format,on.encoding),tn=ot.convert(on.type),un=Vt(on.internalFormat,Xt,tn,on.encoding),xn=sn(mn);Mn&&hn(mn)===!1?it.renderbufferStorageMultisample(36161,xn,un,mn.width,mn.height):hn(mn)?At.renderbufferStorageMultisampleEXT(36161,xn,un,mn.width,mn.height):it.renderbufferStorage(36161,un,mn.width,mn.height)}}it.bindRenderbuffer(36161,null)}function cn(gn,mn){if(mn&&mn.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(rt.bindFramebuffer(36160,gn),!(mn.depthTexture&&mn.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!at.get(mn.depthTexture).__webglTexture||mn.depthTexture.image.width!==mn.width||mn.depthTexture.image.height!==mn.height)&&(mn.depthTexture.image.width=mn.width,mn.depthTexture.image.height=mn.height,mn.depthTexture.needsUpdate=!0),Kt(mn.depthTexture,0);const On=at.get(mn.depthTexture).__webglTexture,Dn=sn(mn);if(mn.depthTexture.format===DepthFormat)hn(mn)?At.framebufferTexture2DMultisampleEXT(36160,36096,3553,On,0,Dn):it.framebufferTexture2D(36160,36096,3553,On,0);else if(mn.depthTexture.format===DepthStencilFormat)hn(mn)?At.framebufferTexture2DMultisampleEXT(36160,33306,3553,On,0,Dn):it.framebufferTexture2D(36160,33306,3553,On,0);else throw new Error("Unknown depthTexture format")}function _n(gn){const mn=at.get(gn),Mn=gn.isWebGLCubeRenderTarget===!0;if(gn.depthTexture&&!mn.__autoAllocateDepthBuffer){if(Mn)throw new Error("target.depthTexture not supported in Cube render targets");cn(mn.__webglFramebuffer,gn)}else if(Mn){mn.__webglDepthbuffer=[];for(let On=0;On<6;On++)rt.bindFramebuffer(36160,mn.__webglFramebuffer[On]),mn.__webglDepthbuffer[On]=it.createRenderbuffer(),dn(mn.__webglDepthbuffer[On],gn,!1)}else rt.bindFramebuffer(36160,mn.__webglFramebuffer),mn.__webglDepthbuffer=it.createRenderbuffer(),dn(mn.__webglDepthbuffer,gn,!1);rt.bindFramebuffer(36160,null)}function wn(gn,mn,Mn){const On=at.get(gn);mn!==void 0&&En(On.__webglFramebuffer,gn,gn.texture,36064,3553),Mn!==void 0&&_n(gn)}function Ln(gn){const mn=gn.texture,Mn=at.get(gn),On=at.get(mn);gn.addEventListener("dispose",zt),gn.isWebGLMultipleRenderTargets!==!0&&(On.__webglTexture===void 0&&(On.__webglTexture=it.createTexture()),On.__version=mn.version,lt.memory.textures++);const Dn=gn.isWebGLCubeRenderTarget===!0,on=gn.isWebGLMultipleRenderTargets===!0,Xt=Rt(gn)||ut;if(Dn){Mn.__webglFramebuffer=[];for(let tn=0;tn<6;tn++)Mn.__webglFramebuffer[tn]=it.createFramebuffer()}else{if(Mn.__webglFramebuffer=it.createFramebuffer(),on)if(st.drawBuffers){const tn=gn.texture;for(let un=0,xn=tn.length;un<xn;un++){const Tn=at.get(tn[un]);Tn.__webglTexture===void 0&&(Tn.__webglTexture=it.createTexture(),lt.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(ut&&gn.samples>0&&hn(gn)===!1){const tn=on?mn:[mn];Mn.__webglMultisampledFramebuffer=it.createFramebuffer(),Mn.__webglColorRenderbuffer=[],rt.bindFramebuffer(36160,Mn.__webglMultisampledFramebuffer);for(let un=0;un<tn.length;un++){const xn=tn[un];Mn.__webglColorRenderbuffer[un]=it.createRenderbuffer(),it.bindRenderbuffer(36161,Mn.__webglColorRenderbuffer[un]);const Tn=ot.convert(xn.format,xn.encoding),In=ot.convert(xn.type),jn=Vt(xn.internalFormat,Tn,In,xn.encoding,gn.isXRRenderTarget===!0),Un=sn(gn);it.renderbufferStorageMultisample(36161,Un,jn,gn.width,gn.height),it.framebufferRenderbuffer(36160,36064+un,36161,Mn.__webglColorRenderbuffer[un])}it.bindRenderbuffer(36161,null),gn.depthBuffer&&(Mn.__webglDepthRenderbuffer=it.createRenderbuffer(),dn(Mn.__webglDepthRenderbuffer,gn,!0)),rt.bindFramebuffer(36160,null)}}if(Dn){rt.bindTexture(34067,On.__webglTexture),rn(34067,mn,Xt);for(let tn=0;tn<6;tn++)En(Mn.__webglFramebuffer[tn],gn,mn,36064,34069+tn);Wt(mn,Xt)&&qt(34067),rt.unbindTexture()}else if(on){const tn=gn.texture;for(let un=0,xn=tn.length;un<xn;un++){const Tn=tn[un],In=at.get(Tn);rt.bindTexture(3553,In.__webglTexture),rn(3553,Tn,Xt),En(Mn.__webglFramebuffer,gn,Tn,36064+un,3553),Wt(Tn,Xt)&&qt(3553)}rt.unbindTexture()}else{let tn=3553;(gn.isWebGL3DRenderTarget||gn.isWebGLArrayRenderTarget)&&(ut?tn=gn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),rt.bindTexture(tn,On.__webglTexture),rn(tn,mn,Xt),En(Mn.__webglFramebuffer,gn,mn,36064,tn),Wt(mn,Xt)&&qt(tn),rt.unbindTexture()}gn.depthBuffer&&_n(gn)}function yn(gn){const mn=Rt(gn)||ut,Mn=gn.isWebGLMultipleRenderTargets===!0?gn.texture:[gn.texture];for(let On=0,Dn=Mn.length;On<Dn;On++){const on=Mn[On];if(Wt(on,mn)){const Xt=gn.isWebGLCubeRenderTarget?34067:3553,tn=at.get(on).__webglTexture;rt.bindTexture(Xt,tn),qt(Xt),rt.unbindTexture()}}}function nn(gn){if(ut&&gn.samples>0&&hn(gn)===!1){const mn=gn.isWebGLMultipleRenderTargets?gn.texture:[gn.texture],Mn=gn.width,On=gn.height;let Dn=16384;const on=[],Xt=gn.stencilBuffer?33306:36096,tn=at.get(gn),un=gn.isWebGLMultipleRenderTargets===!0;if(un)for(let xn=0;xn<mn.length;xn++)rt.bindFramebuffer(36160,tn.__webglMultisampledFramebuffer),it.framebufferRenderbuffer(36160,36064+xn,36161,null),rt.bindFramebuffer(36160,tn.__webglFramebuffer),it.framebufferTexture2D(36009,36064+xn,3553,null,0);rt.bindFramebuffer(36008,tn.__webglMultisampledFramebuffer),rt.bindFramebuffer(36009,tn.__webglFramebuffer);for(let xn=0;xn<mn.length;xn++){on.push(36064+xn),gn.depthBuffer&&on.push(Xt);const Tn=tn.__ignoreDepthValues!==void 0?tn.__ignoreDepthValues:!1;if(Tn===!1&&(gn.depthBuffer&&(Dn|=256),gn.stencilBuffer&&(Dn|=1024)),un&&it.framebufferRenderbuffer(36008,36064,36161,tn.__webglColorRenderbuffer[xn]),Tn===!0&&(it.invalidateFramebuffer(36008,[Xt]),it.invalidateFramebuffer(36009,[Xt])),un){const In=at.get(mn[xn]).__webglTexture;it.framebufferTexture2D(36009,36064,3553,In,0)}it.blitFramebuffer(0,0,Mn,On,0,0,Mn,On,Dn,9728),xt&&it.invalidateFramebuffer(36008,on)}if(rt.bindFramebuffer(36008,null),rt.bindFramebuffer(36009,null),un)for(let xn=0;xn<mn.length;xn++){rt.bindFramebuffer(36160,tn.__webglMultisampledFramebuffer),it.framebufferRenderbuffer(36160,36064+xn,36161,tn.__webglColorRenderbuffer[xn]);const Tn=at.get(mn[xn]).__webglTexture;rt.bindFramebuffer(36160,tn.__webglFramebuffer),it.framebufferTexture2D(36009,36064+xn,3553,Tn,0)}rt.bindFramebuffer(36009,tn.__webglMultisampledFramebuffer)}}function sn(gn){return Math.min(vt,gn.samples)}function hn(gn){const mn=at.get(gn);return ut&&gn.samples>0&&tt.has("WEBGL_multisampled_render_to_texture")===!0&&mn.__useRenderToTexture!==!1}function Cn(gn){const mn=lt.render.frame;Et.get(gn)!==mn&&(Et.set(gn,mn),gn.update())}function $n(gn,mn){const Mn=gn.encoding,On=gn.format,Dn=gn.type;return gn.isCompressedTexture===!0||gn.isVideoTexture===!0||gn.format===_SRGBAFormat||Mn!==LinearEncoding&&(Mn===sRGBEncoding?ut===!1?tt.has("EXT_sRGB")===!0&&On===RGBAFormat?(gn.format=_SRGBAFormat,gn.minFilter=LinearFilter,gn.generateMipmaps=!1):mn=ImageUtils.sRGBToLinear(mn):(On!==RGBAFormat||Dn!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Mn)),mn}this.allocateTextureUnit=Ut,this.resetTextureUnits=Qt,this.setTexture2D=Kt,this.setTexture2DArray=Gt,this.setTexture3D=Pt,this.setTextureCube=Zt,this.rebindTextures=wn,this.setupRenderTarget=Ln,this.updateRenderTargetMipmap=yn,this.updateMultisampleRenderTarget=nn,this.setupDepthRenderbuffer=_n,this.setupFrameBufferTexture=En,this.useMultisampledRTT=hn}function WebGLUtils(it,tt,rt){const at=rt.isWebGL2;function st(ot,lt=null){let ut;if(ot===UnsignedByteType)return 5121;if(ot===UnsignedShort4444Type)return 32819;if(ot===UnsignedShort5551Type)return 32820;if(ot===ByteType)return 5120;if(ot===ShortType)return 5122;if(ot===UnsignedShortType)return 5123;if(ot===IntType)return 5124;if(ot===UnsignedIntType)return 5125;if(ot===FloatType)return 5126;if(ot===HalfFloatType)return at?5131:(ut=tt.get("OES_texture_half_float"),ut!==null?ut.HALF_FLOAT_OES:null);if(ot===AlphaFormat)return 6406;if(ot===RGBAFormat)return 6408;if(ot===LuminanceFormat)return 6409;if(ot===LuminanceAlphaFormat)return 6410;if(ot===DepthFormat)return 6402;if(ot===DepthStencilFormat)return 34041;if(ot===RedFormat)return 6403;if(ot===RGBFormat)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(ot===_SRGBAFormat)return ut=tt.get("EXT_sRGB"),ut!==null?ut.SRGB_ALPHA_EXT:null;if(ot===RedIntegerFormat)return 36244;if(ot===RGFormat)return 33319;if(ot===RGIntegerFormat)return 33320;if(ot===RGBAIntegerFormat)return 36249;if(ot===RGB_S3TC_DXT1_Format||ot===RGBA_S3TC_DXT1_Format||ot===RGBA_S3TC_DXT3_Format||ot===RGBA_S3TC_DXT5_Format)if(lt===sRGBEncoding)if(ut=tt.get("WEBGL_compressed_texture_s3tc_srgb"),ut!==null){if(ot===RGB_S3TC_DXT1_Format)return ut.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(ot===RGBA_S3TC_DXT1_Format)return ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(ot===RGBA_S3TC_DXT3_Format)return ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(ot===RGBA_S3TC_DXT5_Format)return ut.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(ut=tt.get("WEBGL_compressed_texture_s3tc"),ut!==null){if(ot===RGB_S3TC_DXT1_Format)return ut.COMPRESSED_RGB_S3TC_DXT1_EXT;if(ot===RGBA_S3TC_DXT1_Format)return ut.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(ot===RGBA_S3TC_DXT3_Format)return ut.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(ot===RGBA_S3TC_DXT5_Format)return ut.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(ot===RGB_PVRTC_4BPPV1_Format||ot===RGB_PVRTC_2BPPV1_Format||ot===RGBA_PVRTC_4BPPV1_Format||ot===RGBA_PVRTC_2BPPV1_Format)if(ut=tt.get("WEBGL_compressed_texture_pvrtc"),ut!==null){if(ot===RGB_PVRTC_4BPPV1_Format)return ut.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(ot===RGB_PVRTC_2BPPV1_Format)return ut.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(ot===RGBA_PVRTC_4BPPV1_Format)return ut.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(ot===RGBA_PVRTC_2BPPV1_Format)return ut.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(ot===RGB_ETC1_Format)return ut=tt.get("WEBGL_compressed_texture_etc1"),ut!==null?ut.COMPRESSED_RGB_ETC1_WEBGL:null;if(ot===RGB_ETC2_Format||ot===RGBA_ETC2_EAC_Format)if(ut=tt.get("WEBGL_compressed_texture_etc"),ut!==null){if(ot===RGB_ETC2_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ETC2:ut.COMPRESSED_RGB8_ETC2;if(ot===RGBA_ETC2_EAC_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:ut.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(ot===RGBA_ASTC_4x4_Format||ot===RGBA_ASTC_5x4_Format||ot===RGBA_ASTC_5x5_Format||ot===RGBA_ASTC_6x5_Format||ot===RGBA_ASTC_6x6_Format||ot===RGBA_ASTC_8x5_Format||ot===RGBA_ASTC_8x6_Format||ot===RGBA_ASTC_8x8_Format||ot===RGBA_ASTC_10x5_Format||ot===RGBA_ASTC_10x6_Format||ot===RGBA_ASTC_10x8_Format||ot===RGBA_ASTC_10x10_Format||ot===RGBA_ASTC_12x10_Format||ot===RGBA_ASTC_12x12_Format)if(ut=tt.get("WEBGL_compressed_texture_astc"),ut!==null){if(ot===RGBA_ASTC_4x4_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:ut.COMPRESSED_RGBA_ASTC_4x4_KHR;if(ot===RGBA_ASTC_5x4_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:ut.COMPRESSED_RGBA_ASTC_5x4_KHR;if(ot===RGBA_ASTC_5x5_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:ut.COMPRESSED_RGBA_ASTC_5x5_KHR;if(ot===RGBA_ASTC_6x5_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:ut.COMPRESSED_RGBA_ASTC_6x5_KHR;if(ot===RGBA_ASTC_6x6_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:ut.COMPRESSED_RGBA_ASTC_6x6_KHR;if(ot===RGBA_ASTC_8x5_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:ut.COMPRESSED_RGBA_ASTC_8x5_KHR;if(ot===RGBA_ASTC_8x6_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:ut.COMPRESSED_RGBA_ASTC_8x6_KHR;if(ot===RGBA_ASTC_8x8_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:ut.COMPRESSED_RGBA_ASTC_8x8_KHR;if(ot===RGBA_ASTC_10x5_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:ut.COMPRESSED_RGBA_ASTC_10x5_KHR;if(ot===RGBA_ASTC_10x6_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:ut.COMPRESSED_RGBA_ASTC_10x6_KHR;if(ot===RGBA_ASTC_10x8_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:ut.COMPRESSED_RGBA_ASTC_10x8_KHR;if(ot===RGBA_ASTC_10x10_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:ut.COMPRESSED_RGBA_ASTC_10x10_KHR;if(ot===RGBA_ASTC_12x10_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:ut.COMPRESSED_RGBA_ASTC_12x10_KHR;if(ot===RGBA_ASTC_12x12_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:ut.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(ot===RGBA_BPTC_Format)if(ut=tt.get("EXT_texture_compression_bptc"),ut!==null){if(ot===RGBA_BPTC_Format)return lt===sRGBEncoding?ut.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:ut.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return ot===UnsignedInt248Type?at?34042:(ut=tt.get("WEBGL_depth_texture"),ut!==null?ut.UNSIGNED_INT_24_8_WEBGL:null):it[ot]!==void 0?it[ot]:null}return{convert:st}}class ArrayCamera extends PerspectiveCamera{constructor(tt=[]){super(),this.isArrayCamera=!0,this.cameras=tt}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(tt){return this._targetRay!==null&&this._targetRay.dispatchEvent(tt),this._grip!==null&&this._grip.dispatchEvent(tt),this._hand!==null&&this._hand.dispatchEvent(tt),this}disconnect(tt){return this.dispatchEvent({type:"disconnected",data:tt}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(tt,rt,at){let st=null,ot=null,lt=null;const ut=this._targetRay,ht=this._grip,mt=this._hand;if(tt&&rt.session.visibilityState!=="visible-blurred"){if(mt&&tt.hand){lt=!0;for(const Tt of tt.hand.values()){const wt=rt.getJointPose(Tt,at);if(mt.joints[Tt.jointName]===void 0){const It=new Group;It.matrixAutoUpdate=!1,It.visible=!1,mt.joints[Tt.jointName]=It,mt.add(It)}const Ct=mt.joints[Tt.jointName];wt!==null&&(Ct.matrix.fromArray(wt.transform.matrix),Ct.matrix.decompose(Ct.position,Ct.rotation,Ct.scale),Ct.jointRadius=wt.radius),Ct.visible=wt!==null}const bt=mt.joints["index-finger-tip"],vt=mt.joints["thumb-tip"],At=bt.position.distanceTo(vt.position),xt=.02,Et=.005;mt.inputState.pinching&&At>xt+Et?(mt.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:tt.handedness,target:this})):!mt.inputState.pinching&&At<=xt-Et&&(mt.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:tt.handedness,target:this}))}else ht!==null&&tt.gripSpace&&(ot=rt.getPose(tt.gripSpace,at),ot!==null&&(ht.matrix.fromArray(ot.transform.matrix),ht.matrix.decompose(ht.position,ht.rotation,ht.scale),ot.linearVelocity?(ht.hasLinearVelocity=!0,ht.linearVelocity.copy(ot.linearVelocity)):ht.hasLinearVelocity=!1,ot.angularVelocity?(ht.hasAngularVelocity=!0,ht.angularVelocity.copy(ot.angularVelocity)):ht.hasAngularVelocity=!1));ut!==null&&(st=rt.getPose(tt.targetRaySpace,at),st===null&&ot!==null&&(st=ot),st!==null&&(ut.matrix.fromArray(st.transform.matrix),ut.matrix.decompose(ut.position,ut.rotation,ut.scale),st.linearVelocity?(ut.hasLinearVelocity=!0,ut.linearVelocity.copy(st.linearVelocity)):ut.hasLinearVelocity=!1,st.angularVelocity?(ut.hasAngularVelocity=!0,ut.angularVelocity.copy(st.angularVelocity)):ut.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return ut!==null&&(ut.visible=st!==null),ht!==null&&(ht.visible=ot!==null),mt!==null&&(mt.visible=lt!==null),this}}class DepthTexture extends Texture$1{constructor(tt,rt,at,st,ot,lt,ut,ht,mt,bt){if(bt=bt!==void 0?bt:DepthFormat,bt!==DepthFormat&&bt!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");at===void 0&&bt===DepthFormat&&(at=UnsignedIntType),at===void 0&&bt===DepthStencilFormat&&(at=UnsignedInt248Type),super(null,st,ot,lt,ut,ht,bt,at,mt),this.isDepthTexture=!0,this.image={width:tt,height:rt},this.magFilter=ut!==void 0?ut:NearestFilter,this.minFilter=ht!==void 0?ht:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}class WebXRManager extends EventDispatcher{constructor(tt,rt){super();const at=this;let st=null,ot=1,lt=null,ut="local-floor",ht=null,mt=null,bt=null,vt=null,At=null,xt=null;const Et=rt.getContextAttributes();let Tt=null,wt=null;const Ct=[],It=[],St=new PerspectiveCamera;St.layers.enable(1),St.viewport=new Vector4;const Rt=new PerspectiveCamera;Rt.layers.enable(2),Rt.viewport=new Vector4;const Dt=[St,Rt],Wt=new ArrayCamera;Wt.layers.enable(1),Wt.layers.enable(2);let qt=null,Vt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Bt){let Kt=Ct[Bt];return Kt===void 0&&(Kt=new WebXRController,Ct[Bt]=Kt),Kt.getTargetRaySpace()},this.getControllerGrip=function(Bt){let Kt=Ct[Bt];return Kt===void 0&&(Kt=new WebXRController,Ct[Bt]=Kt),Kt.getGripSpace()},this.getHand=function(Bt){let Kt=Ct[Bt];return Kt===void 0&&(Kt=new WebXRController,Ct[Bt]=Kt),Kt.getHandSpace()};function Yt(Bt){const Kt=It.indexOf(Bt.inputSource);if(Kt===-1)return;const Gt=Ct[Kt];Gt!==void 0&&Gt.dispatchEvent({type:Bt.type,data:Bt.inputSource})}function jt(){st.removeEventListener("select",Yt),st.removeEventListener("selectstart",Yt),st.removeEventListener("selectend",Yt),st.removeEventListener("squeeze",Yt),st.removeEventListener("squeezestart",Yt),st.removeEventListener("squeezeend",Yt),st.removeEventListener("end",jt),st.removeEventListener("inputsourceschange",kt);for(let Bt=0;Bt<Ct.length;Bt++){const Kt=It[Bt];Kt!==null&&(It[Bt]=null,Ct[Bt].disconnect(Kt))}qt=null,Vt=null,tt.setRenderTarget(Tt),At=null,vt=null,bt=null,st=null,wt=null,Ut.stop(),at.isPresenting=!1,at.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Bt){ot=Bt,at.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Bt){ut=Bt,at.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return ht||lt},this.setReferenceSpace=function(Bt){ht=Bt},this.getBaseLayer=function(){return vt!==null?vt:At},this.getBinding=function(){return bt},this.getFrame=function(){return xt},this.getSession=function(){return st},this.setSession=async function(Bt){if(st=Bt,st!==null){if(Tt=tt.getRenderTarget(),st.addEventListener("select",Yt),st.addEventListener("selectstart",Yt),st.addEventListener("selectend",Yt),st.addEventListener("squeeze",Yt),st.addEventListener("squeezestart",Yt),st.addEventListener("squeezeend",Yt),st.addEventListener("end",jt),st.addEventListener("inputsourceschange",kt),Et.xrCompatible!==!0&&await rt.makeXRCompatible(),st.renderState.layers===void 0||tt.capabilities.isWebGL2===!1){const Kt={antialias:st.renderState.layers===void 0?Et.antialias:!0,alpha:Et.alpha,depth:Et.depth,stencil:Et.stencil,framebufferScaleFactor:ot};At=new XRWebGLLayer(st,rt,Kt),st.updateRenderState({baseLayer:At}),wt=new WebGLRenderTarget(At.framebufferWidth,At.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:tt.outputEncoding,stencilBuffer:Et.stencil})}else{let Kt=null,Gt=null,Pt=null;Et.depth&&(Pt=Et.stencil?35056:33190,Kt=Et.stencil?DepthStencilFormat:DepthFormat,Gt=Et.stencil?UnsignedInt248Type:UnsignedIntType);const Zt={colorFormat:32856,depthFormat:Pt,scaleFactor:ot};bt=new XRWebGLBinding(st,rt),vt=bt.createProjectionLayer(Zt),st.updateRenderState({layers:[vt]}),wt=new WebGLRenderTarget(vt.textureWidth,vt.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(vt.textureWidth,vt.textureHeight,Gt,void 0,void 0,void 0,void 0,void 0,void 0,Kt),stencilBuffer:Et.stencil,encoding:tt.outputEncoding,samples:Et.antialias?4:0});const an=tt.properties.get(wt);an.__ignoreDepthValues=vt.ignoreDepthValues}wt.isXRRenderTarget=!0,this.setFoveation(1),ht=null,lt=await st.requestReferenceSpace(ut),Ut.setContext(st),Ut.start(),at.isPresenting=!0,at.dispatchEvent({type:"sessionstart"})}};function kt(Bt){for(let Kt=0;Kt<Bt.removed.length;Kt++){const Gt=Bt.removed[Kt],Pt=It.indexOf(Gt);Pt>=0&&(It[Pt]=null,Ct[Pt].dispatchEvent({type:"disconnected",data:Gt}))}for(let Kt=0;Kt<Bt.added.length;Kt++){const Gt=Bt.added[Kt];let Pt=It.indexOf(Gt);if(Pt===-1){for(let an=0;an<Ct.length;an++)if(an>=It.length){It.push(Gt),Pt=an;break}else if(It[an]===null){It[an]=Gt,Pt=an;break}if(Pt===-1)break}const Zt=Ct[Pt];Zt&&Zt.dispatchEvent({type:"connected",data:Gt})}}const zt=new Vector3,Nt=new Vector3;function Mt(Bt,Kt,Gt){zt.setFromMatrixPosition(Kt.matrixWorld),Nt.setFromMatrixPosition(Gt.matrixWorld);const Pt=zt.distanceTo(Nt),Zt=Kt.projectionMatrix.elements,an=Gt.projectionMatrix.elements,Jt=Zt[14]/(Zt[10]-1),rn=Zt[14]/(Zt[10]+1),fn=(Zt[9]+1)/Zt[5],pn=(Zt[9]-1)/Zt[5],vn=(Zt[8]-1)/Zt[0],En=(an[8]+1)/an[0],dn=Jt*vn,cn=Jt*En,_n=Pt/(-vn+En),wn=_n*-vn;Kt.matrixWorld.decompose(Bt.position,Bt.quaternion,Bt.scale),Bt.translateX(wn),Bt.translateZ(_n),Bt.matrixWorld.compose(Bt.position,Bt.quaternion,Bt.scale),Bt.matrixWorldInverse.copy(Bt.matrixWorld).invert();const Ln=Jt+_n,yn=rn+_n,nn=dn-wn,sn=cn+(Pt-wn),hn=fn*rn/yn*Ln,Cn=pn*rn/yn*Ln;Bt.projectionMatrix.makePerspective(nn,sn,hn,Cn,Ln,yn)}function Lt(Bt,Kt){Kt===null?Bt.matrixWorld.copy(Bt.matrix):Bt.matrixWorld.multiplyMatrices(Kt.matrixWorld,Bt.matrix),Bt.matrixWorldInverse.copy(Bt.matrixWorld).invert()}this.updateCamera=function(Bt){if(st===null)return;Wt.near=Rt.near=St.near=Bt.near,Wt.far=Rt.far=St.far=Bt.far,(qt!==Wt.near||Vt!==Wt.far)&&(st.updateRenderState({depthNear:Wt.near,depthFar:Wt.far}),qt=Wt.near,Vt=Wt.far);const Kt=Bt.parent,Gt=Wt.cameras;Lt(Wt,Kt);for(let Zt=0;Zt<Gt.length;Zt++)Lt(Gt[Zt],Kt);Wt.matrixWorld.decompose(Wt.position,Wt.quaternion,Wt.scale),Bt.matrix.copy(Wt.matrix),Bt.matrix.decompose(Bt.position,Bt.quaternion,Bt.scale);const Pt=Bt.children;for(let Zt=0,an=Pt.length;Zt<an;Zt++)Pt[Zt].updateMatrixWorld(!0);Gt.length===2?Mt(Wt,St,Rt):Wt.projectionMatrix.copy(St.projectionMatrix)},this.getCamera=function(){return Wt},this.getFoveation=function(){if(vt!==null)return vt.fixedFoveation;if(At!==null)return At.fixedFoveation},this.setFoveation=function(Bt){vt!==null&&(vt.fixedFoveation=Bt),At!==null&&At.fixedFoveation!==void 0&&(At.fixedFoveation=Bt)};let Ht=null;function Qt(Bt,Kt){if(mt=Kt.getViewerPose(ht||lt),xt=Kt,mt!==null){const Gt=mt.views;At!==null&&(tt.setRenderTargetFramebuffer(wt,At.framebuffer),tt.setRenderTarget(wt));let Pt=!1;Gt.length!==Wt.cameras.length&&(Wt.cameras.length=0,Pt=!0);for(let Zt=0;Zt<Gt.length;Zt++){const an=Gt[Zt];let Jt=null;if(At!==null)Jt=At.getViewport(an);else{const fn=bt.getViewSubImage(vt,an);Jt=fn.viewport,Zt===0&&(tt.setRenderTargetTextures(wt,fn.colorTexture,vt.ignoreDepthValues?void 0:fn.depthStencilTexture),tt.setRenderTarget(wt))}let rn=Dt[Zt];rn===void 0&&(rn=new PerspectiveCamera,rn.layers.enable(Zt),rn.viewport=new Vector4,Dt[Zt]=rn),rn.matrix.fromArray(an.transform.matrix),rn.projectionMatrix.fromArray(an.projectionMatrix),rn.viewport.set(Jt.x,Jt.y,Jt.width,Jt.height),Zt===0&&Wt.matrix.copy(rn.matrix),Pt===!0&&Wt.cameras.push(rn)}}for(let Gt=0;Gt<Ct.length;Gt++){const Pt=It[Gt],Zt=Ct[Gt];Pt!==null&&Zt!==void 0&&Zt.update(Pt,Kt,ht||lt)}Ht&&Ht(Bt,Kt),xt=null}const Ut=new WebGLAnimation;Ut.setAnimationLoop(Qt),this.setAnimationLoop=function(Bt){Ht=Bt},this.dispose=function(){}}}function WebGLMaterials(it,tt){function rt(Tt,wt){Tt.fogColor.value.copy(wt.color),wt.isFog?(Tt.fogNear.value=wt.near,Tt.fogFar.value=wt.far):wt.isFogExp2&&(Tt.fogDensity.value=wt.density)}function at(Tt,wt,Ct,It,St){wt.isMeshBasicMaterial||wt.isMeshLambertMaterial?st(Tt,wt):wt.isMeshToonMaterial?(st(Tt,wt),bt(Tt,wt)):wt.isMeshPhongMaterial?(st(Tt,wt),mt(Tt,wt)):wt.isMeshStandardMaterial?(st(Tt,wt),vt(Tt,wt),wt.isMeshPhysicalMaterial&&At(Tt,wt,St)):wt.isMeshMatcapMaterial?(st(Tt,wt),xt(Tt,wt)):wt.isMeshDepthMaterial?st(Tt,wt):wt.isMeshDistanceMaterial?(st(Tt,wt),Et(Tt,wt)):wt.isMeshNormalMaterial?st(Tt,wt):wt.isLineBasicMaterial?(ot(Tt,wt),wt.isLineDashedMaterial&&lt(Tt,wt)):wt.isPointsMaterial?ut(Tt,wt,Ct,It):wt.isSpriteMaterial?ht(Tt,wt):wt.isShadowMaterial?(Tt.color.value.copy(wt.color),Tt.opacity.value=wt.opacity):wt.isShaderMaterial&&(wt.uniformsNeedUpdate=!1)}function st(Tt,wt){Tt.opacity.value=wt.opacity,wt.color&&Tt.diffuse.value.copy(wt.color),wt.emissive&&Tt.emissive.value.copy(wt.emissive).multiplyScalar(wt.emissiveIntensity),wt.map&&(Tt.map.value=wt.map),wt.alphaMap&&(Tt.alphaMap.value=wt.alphaMap),wt.bumpMap&&(Tt.bumpMap.value=wt.bumpMap,Tt.bumpScale.value=wt.bumpScale,wt.side===BackSide&&(Tt.bumpScale.value*=-1)),wt.displacementMap&&(Tt.displacementMap.value=wt.displacementMap,Tt.displacementScale.value=wt.displacementScale,Tt.displacementBias.value=wt.displacementBias),wt.emissiveMap&&(Tt.emissiveMap.value=wt.emissiveMap),wt.normalMap&&(Tt.normalMap.value=wt.normalMap,Tt.normalScale.value.copy(wt.normalScale),wt.side===BackSide&&Tt.normalScale.value.negate()),wt.specularMap&&(Tt.specularMap.value=wt.specularMap),wt.alphaTest>0&&(Tt.alphaTest.value=wt.alphaTest);const Ct=tt.get(wt).envMap;if(Ct&&(Tt.envMap.value=Ct,Tt.flipEnvMap.value=Ct.isCubeTexture&&Ct.isRenderTargetTexture===!1?-1:1,Tt.reflectivity.value=wt.reflectivity,Tt.ior.value=wt.ior,Tt.refractionRatio.value=wt.refractionRatio),wt.lightMap){Tt.lightMap.value=wt.lightMap;const Rt=it.physicallyCorrectLights!==!0?Math.PI:1;Tt.lightMapIntensity.value=wt.lightMapIntensity*Rt}wt.aoMap&&(Tt.aoMap.value=wt.aoMap,Tt.aoMapIntensity.value=wt.aoMapIntensity);let It;wt.map?It=wt.map:wt.specularMap?It=wt.specularMap:wt.displacementMap?It=wt.displacementMap:wt.normalMap?It=wt.normalMap:wt.bumpMap?It=wt.bumpMap:wt.roughnessMap?It=wt.roughnessMap:wt.metalnessMap?It=wt.metalnessMap:wt.alphaMap?It=wt.alphaMap:wt.emissiveMap?It=wt.emissiveMap:wt.clearcoatMap?It=wt.clearcoatMap:wt.clearcoatNormalMap?It=wt.clearcoatNormalMap:wt.clearcoatRoughnessMap?It=wt.clearcoatRoughnessMap:wt.iridescenceMap?It=wt.iridescenceMap:wt.iridescenceThicknessMap?It=wt.iridescenceThicknessMap:wt.specularIntensityMap?It=wt.specularIntensityMap:wt.specularColorMap?It=wt.specularColorMap:wt.transmissionMap?It=wt.transmissionMap:wt.thicknessMap?It=wt.thicknessMap:wt.sheenColorMap?It=wt.sheenColorMap:wt.sheenRoughnessMap&&(It=wt.sheenRoughnessMap),It!==void 0&&(It.isWebGLRenderTarget&&(It=It.texture),It.matrixAutoUpdate===!0&&It.updateMatrix(),Tt.uvTransform.value.copy(It.matrix));let St;wt.aoMap?St=wt.aoMap:wt.lightMap&&(St=wt.lightMap),St!==void 0&&(St.isWebGLRenderTarget&&(St=St.texture),St.matrixAutoUpdate===!0&&St.updateMatrix(),Tt.uv2Transform.value.copy(St.matrix))}function ot(Tt,wt){Tt.diffuse.value.copy(wt.color),Tt.opacity.value=wt.opacity}function lt(Tt,wt){Tt.dashSize.value=wt.dashSize,Tt.totalSize.value=wt.dashSize+wt.gapSize,Tt.scale.value=wt.scale}function ut(Tt,wt,Ct,It){Tt.diffuse.value.copy(wt.color),Tt.opacity.value=wt.opacity,Tt.size.value=wt.size*Ct,Tt.scale.value=It*.5,wt.map&&(Tt.map.value=wt.map),wt.alphaMap&&(Tt.alphaMap.value=wt.alphaMap),wt.alphaTest>0&&(Tt.alphaTest.value=wt.alphaTest);let St;wt.map?St=wt.map:wt.alphaMap&&(St=wt.alphaMap),St!==void 0&&(St.matrixAutoUpdate===!0&&St.updateMatrix(),Tt.uvTransform.value.copy(St.matrix))}function ht(Tt,wt){Tt.diffuse.value.copy(wt.color),Tt.opacity.value=wt.opacity,Tt.rotation.value=wt.rotation,wt.map&&(Tt.map.value=wt.map),wt.alphaMap&&(Tt.alphaMap.value=wt.alphaMap),wt.alphaTest>0&&(Tt.alphaTest.value=wt.alphaTest);let Ct;wt.map?Ct=wt.map:wt.alphaMap&&(Ct=wt.alphaMap),Ct!==void 0&&(Ct.matrixAutoUpdate===!0&&Ct.updateMatrix(),Tt.uvTransform.value.copy(Ct.matrix))}function mt(Tt,wt){Tt.specular.value.copy(wt.specular),Tt.shininess.value=Math.max(wt.shininess,1e-4)}function bt(Tt,wt){wt.gradientMap&&(Tt.gradientMap.value=wt.gradientMap)}function vt(Tt,wt){Tt.roughness.value=wt.roughness,Tt.metalness.value=wt.metalness,wt.roughnessMap&&(Tt.roughnessMap.value=wt.roughnessMap),wt.metalnessMap&&(Tt.metalnessMap.value=wt.metalnessMap),tt.get(wt).envMap&&(Tt.envMapIntensity.value=wt.envMapIntensity)}function At(Tt,wt,Ct){Tt.ior.value=wt.ior,wt.sheen>0&&(Tt.sheenColor.value.copy(wt.sheenColor).multiplyScalar(wt.sheen),Tt.sheenRoughness.value=wt.sheenRoughness,wt.sheenColorMap&&(Tt.sheenColorMap.value=wt.sheenColorMap),wt.sheenRoughnessMap&&(Tt.sheenRoughnessMap.value=wt.sheenRoughnessMap)),wt.clearcoat>0&&(Tt.clearcoat.value=wt.clearcoat,Tt.clearcoatRoughness.value=wt.clearcoatRoughness,wt.clearcoatMap&&(Tt.clearcoatMap.value=wt.clearcoatMap),wt.clearcoatRoughnessMap&&(Tt.clearcoatRoughnessMap.value=wt.clearcoatRoughnessMap),wt.clearcoatNormalMap&&(Tt.clearcoatNormalScale.value.copy(wt.clearcoatNormalScale),Tt.clearcoatNormalMap.value=wt.clearcoatNormalMap,wt.side===BackSide&&Tt.clearcoatNormalScale.value.negate())),wt.iridescence>0&&(Tt.iridescence.value=wt.iridescence,Tt.iridescenceIOR.value=wt.iridescenceIOR,Tt.iridescenceThicknessMinimum.value=wt.iridescenceThicknessRange[0],Tt.iridescenceThicknessMaximum.value=wt.iridescenceThicknessRange[1],wt.iridescenceMap&&(Tt.iridescenceMap.value=wt.iridescenceMap),wt.iridescenceThicknessMap&&(Tt.iridescenceThicknessMap.value=wt.iridescenceThicknessMap)),wt.transmission>0&&(Tt.transmission.value=wt.transmission,Tt.transmissionSamplerMap.value=Ct.texture,Tt.transmissionSamplerSize.value.set(Ct.width,Ct.height),wt.transmissionMap&&(Tt.transmissionMap.value=wt.transmissionMap),Tt.thickness.value=wt.thickness,wt.thicknessMap&&(Tt.thicknessMap.value=wt.thicknessMap),Tt.attenuationDistance.value=wt.attenuationDistance,Tt.attenuationColor.value.copy(wt.attenuationColor)),Tt.specularIntensity.value=wt.specularIntensity,Tt.specularColor.value.copy(wt.specularColor),wt.specularIntensityMap&&(Tt.specularIntensityMap.value=wt.specularIntensityMap),wt.specularColorMap&&(Tt.specularColorMap.value=wt.specularColorMap)}function xt(Tt,wt){wt.matcap&&(Tt.matcap.value=wt.matcap)}function Et(Tt,wt){Tt.referencePosition.value.copy(wt.referencePosition),Tt.nearDistance.value=wt.nearDistance,Tt.farDistance.value=wt.farDistance}return{refreshFogUniforms:rt,refreshMaterialUniforms:at}}function WebGLUniformsGroups(it,tt,rt,at){let st={},ot={},lt=[];const ut=rt.isWebGL2?it.getParameter(35375):0;function ht(It,St){const Rt=St.program;at.uniformBlockBinding(It,Rt)}function mt(It,St){let Rt=st[It.id];Rt===void 0&&(Et(It),Rt=bt(It),st[It.id]=Rt,It.addEventListener("dispose",wt));const Dt=St.program;at.updateUBOMapping(It,Dt);const Wt=tt.render.frame;ot[It.id]!==Wt&&(At(It),ot[It.id]=Wt)}function bt(It){const St=vt();It.__bindingPointIndex=St;const Rt=it.createBuffer(),Dt=It.__size,Wt=It.usage;return it.bindBuffer(35345,Rt),it.bufferData(35345,Dt,Wt),it.bindBuffer(35345,null),it.bindBufferBase(35345,St,Rt),Rt}function vt(){for(let It=0;It<ut;It++)if(lt.indexOf(It)===-1)return lt.push(It),It;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function At(It){const St=st[It.id],Rt=It.uniforms,Dt=It.__cache;it.bindBuffer(35345,St);for(let Wt=0,qt=Rt.length;Wt<qt;Wt++){const Vt=Rt[Wt];if(xt(Vt,Wt,Dt)===!0){const Yt=Vt.value,jt=Vt.__offset;typeof Yt=="number"?(Vt.__data[0]=Yt,it.bufferSubData(35345,jt,Vt.__data)):(Vt.value.isMatrix3?(Vt.__data[0]=Vt.value.elements[0],Vt.__data[1]=Vt.value.elements[1],Vt.__data[2]=Vt.value.elements[2],Vt.__data[3]=Vt.value.elements[0],Vt.__data[4]=Vt.value.elements[3],Vt.__data[5]=Vt.value.elements[4],Vt.__data[6]=Vt.value.elements[5],Vt.__data[7]=Vt.value.elements[0],Vt.__data[8]=Vt.value.elements[6],Vt.__data[9]=Vt.value.elements[7],Vt.__data[10]=Vt.value.elements[8],Vt.__data[11]=Vt.value.elements[0]):Yt.toArray(Vt.__data),it.bufferSubData(35345,jt,Vt.__data))}}it.bindBuffer(35345,null)}function xt(It,St,Rt){const Dt=It.value;if(Rt[St]===void 0)return typeof Dt=="number"?Rt[St]=Dt:Rt[St]=Dt.clone(),!0;if(typeof Dt=="number"){if(Rt[St]!==Dt)return Rt[St]=Dt,!0}else{const Wt=Rt[St];if(Wt.equals(Dt)===!1)return Wt.copy(Dt),!0}return!1}function Et(It){const St=It.uniforms;let Rt=0;const Dt=16;let Wt=0;for(let qt=0,Vt=St.length;qt<Vt;qt++){const Yt=St[qt],jt=Tt(Yt);if(Yt.__data=new Float32Array(jt.storage/Float32Array.BYTES_PER_ELEMENT),Yt.__offset=Rt,qt>0){Wt=Rt%Dt;const kt=Dt-Wt;Wt!==0&&kt-jt.boundary<0&&(Rt+=Dt-Wt,Yt.__offset=Rt)}Rt+=jt.storage}return Wt=Rt%Dt,Wt>0&&(Rt+=Dt-Wt),It.__size=Rt,It.__cache={},this}function Tt(It){const St=It.value,Rt={boundary:0,storage:0};return typeof St=="number"?(Rt.boundary=4,Rt.storage=4):St.isVector2?(Rt.boundary=8,Rt.storage=8):St.isVector3||St.isColor?(Rt.boundary=16,Rt.storage=12):St.isVector4?(Rt.boundary=16,Rt.storage=16):St.isMatrix3?(Rt.boundary=48,Rt.storage=48):St.isMatrix4?(Rt.boundary=64,Rt.storage=64):St.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",St),Rt}function wt(It){const St=It.target;St.removeEventListener("dispose",wt);const Rt=lt.indexOf(St.__bindingPointIndex);lt.splice(Rt,1),it.deleteBuffer(st[St.id]),delete st[St.id],delete ot[St.id]}function Ct(){for(const It in st)it.deleteBuffer(st[It]);lt=[],st={},ot={}}return{bind:ht,update:mt,dispose:Ct}}function createCanvasElement(){const it=createElementNS("canvas");return it.style.display="block",it}function WebGLRenderer(it={}){this.isWebGLRenderer=!0;const tt=it.canvas!==void 0?it.canvas:createCanvasElement(),rt=it.context!==void 0?it.context:null,at=it.depth!==void 0?it.depth:!0,st=it.stencil!==void 0?it.stencil:!0,ot=it.antialias!==void 0?it.antialias:!1,lt=it.premultipliedAlpha!==void 0?it.premultipliedAlpha:!0,ut=it.preserveDrawingBuffer!==void 0?it.preserveDrawingBuffer:!1,ht=it.powerPreference!==void 0?it.powerPreference:"default",mt=it.failIfMajorPerformanceCaveat!==void 0?it.failIfMajorPerformanceCaveat:!1;let bt;rt!==null?bt=rt.getContextAttributes().alpha:bt=it.alpha!==void 0?it.alpha:!1;let vt=null,At=null;const xt=[],Et=[];this.domElement=tt,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const Tt=this;let wt=!1,Ct=0,It=0,St=null,Rt=-1,Dt=null;const Wt=new Vector4,qt=new Vector4;let Vt=null,Yt=tt.width,jt=tt.height,kt=1,zt=null,Nt=null;const Mt=new Vector4(0,0,Yt,jt),Lt=new Vector4(0,0,Yt,jt);let Ht=!1;const Qt=new Frustum;let Ut=!1,Bt=!1,Kt=null;const Gt=new Matrix4,Pt=new Vector2,Zt=new Vector3,an={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Jt(){return St===null?kt:1}let rn=rt;function fn(An,Rn){for(let Pn=0;Pn<An.length;Pn++){const kn=An[Pn],Bn=tt.getContext(kn,Rn);if(Bn!==null)return Bn}return null}try{const An={alpha:!0,depth:at,stencil:st,antialias:ot,premultipliedAlpha:lt,preserveDrawingBuffer:ut,powerPreference:ht,failIfMajorPerformanceCaveat:mt};if("setAttribute"in tt&&tt.setAttribute("data-engine",`three.js r${REVISION}`),tt.addEventListener("webglcontextlost",jn,!1),tt.addEventListener("webglcontextrestored",Un,!1),tt.addEventListener("webglcontextcreationerror",zn,!1),rn===null){const Rn=["webgl2","webgl","experimental-webgl"];if(Tt.isWebGL1Renderer===!0&&Rn.shift(),rn=fn(Rn,An),rn===null)throw fn(Rn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}rn.getShaderPrecisionFormat===void 0&&(rn.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(An){throw console.error("THREE.WebGLRenderer: "+An.message),An}let pn,vn,En,dn,cn,_n,wn,Ln,yn,nn,sn,hn,Cn,$n,gn,mn,Mn,On,Dn,on,Xt,tn,un,xn;function Tn(){pn=new WebGLExtensions(rn),vn=new WebGLCapabilities(rn,pn,it),pn.init(vn),tn=new WebGLUtils(rn,pn,vn),En=new WebGLState(rn,pn,vn),dn=new WebGLInfo,cn=new WebGLProperties,_n=new WebGLTextures(rn,pn,En,cn,vn,tn,dn),wn=new WebGLCubeMaps(Tt),Ln=new WebGLCubeUVMaps(Tt),yn=new WebGLAttributes(rn,vn),un=new WebGLBindingStates(rn,pn,yn,vn),nn=new WebGLGeometries(rn,yn,dn,un),sn=new WebGLObjects(rn,nn,yn,dn),Dn=new WebGLMorphtargets(rn,vn,_n),mn=new WebGLClipping(cn),hn=new WebGLPrograms(Tt,wn,Ln,pn,vn,un,mn),Cn=new WebGLMaterials(Tt,cn),$n=new WebGLRenderLists,gn=new WebGLRenderStates(pn,vn),On=new WebGLBackground(Tt,wn,Ln,En,sn,bt,lt),Mn=new WebGLShadowMap(Tt,sn,vn),xn=new WebGLUniformsGroups(rn,dn,vn,En),on=new WebGLBufferRenderer(rn,pn,dn,vn),Xt=new WebGLIndexedBufferRenderer(rn,pn,dn,vn),dn.programs=hn.programs,Tt.capabilities=vn,Tt.extensions=pn,Tt.properties=cn,Tt.renderLists=$n,Tt.shadowMap=Mn,Tt.state=En,Tt.info=dn}Tn();const In=new WebXRManager(Tt,rn);this.xr=In,this.getContext=function(){return rn},this.getContextAttributes=function(){return rn.getContextAttributes()},this.forceContextLoss=function(){const An=pn.get("WEBGL_lose_context");An&&An.loseContext()},this.forceContextRestore=function(){const An=pn.get("WEBGL_lose_context");An&&An.restoreContext()},this.getPixelRatio=function(){return kt},this.setPixelRatio=function(An){An!==void 0&&(kt=An,this.setSize(Yt,jt,!1))},this.getSize=function(An){return An.set(Yt,jt)},this.setSize=function(An,Rn,Pn){if(In.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Yt=An,jt=Rn,tt.width=Math.floor(An*kt),tt.height=Math.floor(Rn*kt),Pn!==!1&&(tt.style.width=An+"px",tt.style.height=Rn+"px"),this.setViewport(0,0,An,Rn)},this.getDrawingBufferSize=function(An){return An.set(Yt*kt,jt*kt).floor()},this.setDrawingBufferSize=function(An,Rn,Pn){Yt=An,jt=Rn,kt=Pn,tt.width=Math.floor(An*Pn),tt.height=Math.floor(Rn*Pn),this.setViewport(0,0,An,Rn)},this.getCurrentViewport=function(An){return An.copy(Wt)},this.getViewport=function(An){return An.copy(Mt)},this.setViewport=function(An,Rn,Pn,kn){An.isVector4?Mt.set(An.x,An.y,An.z,An.w):Mt.set(An,Rn,Pn,kn),En.viewport(Wt.copy(Mt).multiplyScalar(kt).floor())},this.getScissor=function(An){return An.copy(Lt)},this.setScissor=function(An,Rn,Pn,kn){An.isVector4?Lt.set(An.x,An.y,An.z,An.w):Lt.set(An,Rn,Pn,kn),En.scissor(qt.copy(Lt).multiplyScalar(kt).floor())},this.getScissorTest=function(){return Ht},this.setScissorTest=function(An){En.setScissorTest(Ht=An)},this.setOpaqueSort=function(An){zt=An},this.setTransparentSort=function(An){Nt=An},this.getClearColor=function(An){return An.copy(On.getClearColor())},this.setClearColor=function(){On.setClearColor.apply(On,arguments)},this.getClearAlpha=function(){return On.getClearAlpha()},this.setClearAlpha=function(){On.setClearAlpha.apply(On,arguments)},this.clear=function(An=!0,Rn=!0,Pn=!0){let kn=0;An&&(kn|=16384),Rn&&(kn|=256),Pn&&(kn|=1024),rn.clear(kn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){tt.removeEventListener("webglcontextlost",jn,!1),tt.removeEventListener("webglcontextrestored",Un,!1),tt.removeEventListener("webglcontextcreationerror",zn,!1),$n.dispose(),gn.dispose(),cn.dispose(),wn.dispose(),Ln.dispose(),sn.dispose(),un.dispose(),xn.dispose(),hn.dispose(),In.dispose(),In.removeEventListener("sessionstart",Wn),In.removeEventListener("sessionend",Kn),Kt&&(Kt.dispose(),Kt=null),Hn.stop()};function jn(An){An.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),wt=!0}function Un(){console.log("THREE.WebGLRenderer: Context Restored."),wt=!1;const An=dn.autoReset,Rn=Mn.enabled,Pn=Mn.autoUpdate,kn=Mn.needsUpdate,Bn=Mn.type;Tn(),dn.autoReset=An,Mn.enabled=Rn,Mn.autoUpdate=Pn,Mn.needsUpdate=kn,Mn.type=Bn}function zn(An){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",An.statusMessage)}function Xn(An){const Rn=An.target;Rn.removeEventListener("dispose",Xn),Gn(Rn)}function Gn(An){Sn(An),cn.remove(An)}function Sn(An){const Rn=cn.get(An).programs;Rn!==void 0&&(Rn.forEach(function(Pn){hn.releaseProgram(Pn)}),An.isShaderMaterial&&hn.releaseShaderCache(An))}this.renderBufferDirect=function(An,Rn,Pn,kn,Bn,Vn){Rn===null&&(Rn=an);const nr=Bn.isMesh&&Bn.matrixWorld.determinant()<0,Zn=hr(An,Rn,Pn,kn,Bn);En.setMaterial(kn,nr);let qn=Pn.index;const cr=Pn.attributes.position;if(qn===null){if(cr===void 0||cr.count===0)return}else if(qn.count===0)return;let ar=1;kn.wireframe===!0&&(qn=nn.getWireframeAttribute(Pn),ar=2),un.setup(Bn,kn,Zn,Pn,qn);let sr,ur=on;qn!==null&&(sr=yn.get(qn),ur=Xt,ur.setIndex(sr));const yr=qn!==null?qn.count:cr.count,_r=Pn.drawRange.start*ar,xr=Pn.drawRange.count*ar,vr=Vn!==null?Vn.start*ar:0,lr=Vn!==null?Vn.count*ar:1/0,wr=Math.max(_r,vr),pr=Math.min(yr,_r+xr,vr+lr)-1,gr=Math.max(0,pr-wr+1);if(gr!==0){if(Bn.isMesh)kn.wireframe===!0?(En.setLineWidth(kn.wireframeLinewidth*Jt()),ur.setMode(1)):ur.setMode(4);else if(Bn.isLine){let Ar=kn.linewidth;Ar===void 0&&(Ar=1),En.setLineWidth(Ar*Jt()),Bn.isLineSegments?ur.setMode(1):Bn.isLineLoop?ur.setMode(2):ur.setMode(3)}else Bn.isPoints?ur.setMode(0):Bn.isSprite&&ur.setMode(4);if(Bn.isInstancedMesh)ur.renderInstances(wr,gr,Bn.count);else if(Pn.isInstancedBufferGeometry){const Ar=Math.min(Pn.instanceCount,Pn._maxInstanceCount);ur.renderInstances(wr,gr,Ar)}else ur.render(wr,gr)}},this.compile=function(An,Rn){function Pn(kn,Bn,Vn){kn.transparent===!0&&kn.side===DoubleSide?(kn.side=BackSide,kn.needsUpdate=!0,Jn(kn,Bn,Vn),kn.side=FrontSide,kn.needsUpdate=!0,Jn(kn,Bn,Vn),kn.side=DoubleSide):Jn(kn,Bn,Vn)}At=gn.get(An),At.init(),Et.push(At),An.traverseVisible(function(kn){kn.isLight&&kn.layers.test(Rn.layers)&&(At.pushLight(kn),kn.castShadow&&At.pushShadow(kn))}),At.setupLights(Tt.physicallyCorrectLights),An.traverse(function(kn){const Bn=kn.material;if(Bn)if(Array.isArray(Bn))for(let Vn=0;Vn<Bn.length;Vn++){const nr=Bn[Vn];Pn(nr,An,kn)}else Pn(Bn,An,kn)}),Et.pop(),At=null};let Fn=null;function Nn(An){Fn&&Fn(An)}function Wn(){Hn.stop()}function Kn(){Hn.start()}const Hn=new WebGLAnimation;Hn.setAnimationLoop(Nn),typeof self<"u"&&Hn.setContext(self),this.setAnimationLoop=function(An){Fn=An,In.setAnimationLoop(An),An===null?Hn.stop():Hn.start()},In.addEventListener("sessionstart",Wn),In.addEventListener("sessionend",Kn),this.render=function(An,Rn){if(Rn!==void 0&&Rn.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(wt===!0)return;An.matrixWorldAutoUpdate===!0&&An.updateMatrixWorld(),Rn.parent===null&&Rn.matrixWorldAutoUpdate===!0&&Rn.updateMatrixWorld(),In.enabled===!0&&In.isPresenting===!0&&(In.cameraAutoUpdate===!0&&In.updateCamera(Rn),Rn=In.getCamera()),An.isScene===!0&&An.onBeforeRender(Tt,An,Rn,St),At=gn.get(An,Et.length),At.init(),Et.push(At),Gt.multiplyMatrices(Rn.projectionMatrix,Rn.matrixWorldInverse),Qt.setFromProjectionMatrix(Gt),Bt=this.localClippingEnabled,Ut=mn.init(this.clippingPlanes,Bt,Rn),vt=$n.get(An,xt.length),vt.init(),xt.push(vt),Yn(An,Rn,0,Tt.sortObjects),vt.finish(),Tt.sortObjects===!0&&vt.sort(zt,Nt),Ut===!0&&mn.beginShadows();const Pn=At.state.shadowsArray;if(Mn.render(Pn,An,Rn),Ut===!0&&mn.endShadows(),this.info.autoReset===!0&&this.info.reset(),On.render(vt,An),At.setupLights(Tt.physicallyCorrectLights),Rn.isArrayCamera){const kn=Rn.cameras;for(let Bn=0,Vn=kn.length;Bn<Vn;Bn++){const nr=kn[Bn];dr(vt,An,nr,nr.viewport)}}else dr(vt,An,Rn);St!==null&&(_n.updateMultisampleRenderTarget(St),_n.updateRenderTargetMipmap(St)),An.isScene===!0&&An.onAfterRender(Tt,An,Rn),un.resetDefaultState(),Rt=-1,Dt=null,Et.pop(),Et.length>0?At=Et[Et.length-1]:At=null,xt.pop(),xt.length>0?vt=xt[xt.length-1]:vt=null};function Yn(An,Rn,Pn,kn){if(An.visible===!1)return;if(An.layers.test(Rn.layers)){if(An.isGroup)Pn=An.renderOrder;else if(An.isLOD)An.autoUpdate===!0&&An.update(Rn);else if(An.isLight)At.pushLight(An),An.castShadow&&At.pushShadow(An);else if(An.isSprite){if(!An.frustumCulled||Qt.intersectsSprite(An)){kn&&Zt.setFromMatrixPosition(An.matrixWorld).applyMatrix4(Gt);const nr=sn.update(An),Zn=An.material;Zn.visible&&vt.push(An,nr,Zn,Pn,Zt.z,null)}}else if((An.isMesh||An.isLine||An.isPoints)&&(An.isSkinnedMesh&&An.skeleton.frame!==dn.render.frame&&(An.skeleton.update(),An.skeleton.frame=dn.render.frame),!An.frustumCulled||Qt.intersectsObject(An))){kn&&Zt.setFromMatrixPosition(An.matrixWorld).applyMatrix4(Gt);const nr=sn.update(An),Zn=An.material;if(Array.isArray(Zn)){const qn=nr.groups;for(let cr=0,ar=qn.length;cr<ar;cr++){const sr=qn[cr],ur=Zn[sr.materialIndex];ur&&ur.visible&&vt.push(An,nr,ur,Pn,Zt.z,sr)}}else Zn.visible&&vt.push(An,nr,Zn,Pn,Zt.z,null)}}const Vn=An.children;for(let nr=0,Zn=Vn.length;nr<Zn;nr++)Yn(Vn[nr],Rn,Pn,kn)}function dr(An,Rn,Pn,kn){const Bn=An.opaque,Vn=An.transmissive,nr=An.transparent;At.setupLightsView(Pn),Vn.length>0&&tr(Bn,Rn,Pn),kn&&En.viewport(Wt.copy(kn)),Bn.length>0&&Qn(Bn,Rn,Pn),Vn.length>0&&Qn(Vn,Rn,Pn),nr.length>0&&Qn(nr,Rn,Pn),En.buffers.depth.setTest(!0),En.buffers.depth.setMask(!0),En.buffers.color.setMask(!0),En.setPolygonOffset(!1)}function tr(An,Rn,Pn){const kn=vn.isWebGL2;Kt===null&&(Kt=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:pn.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:kn&&ot===!0?4:0})),Tt.getDrawingBufferSize(Pt),kn?Kt.setSize(Pt.x,Pt.y):Kt.setSize(floorPowerOfTwo(Pt.x),floorPowerOfTwo(Pt.y));const Bn=Tt.getRenderTarget();Tt.setRenderTarget(Kt),Tt.clear();const Vn=Tt.toneMapping;Tt.toneMapping=NoToneMapping,Qn(An,Rn,Pn),Tt.toneMapping=Vn,_n.updateMultisampleRenderTarget(Kt),_n.updateRenderTargetMipmap(Kt),Tt.setRenderTarget(Bn)}function Qn(An,Rn,Pn){const kn=Rn.isScene===!0?Rn.overrideMaterial:null;for(let Bn=0,Vn=An.length;Bn<Vn;Bn++){const nr=An[Bn],Zn=nr.object,qn=nr.geometry,cr=kn===null?nr.material:kn,ar=nr.group;Zn.layers.test(Pn.layers)&&mr(Zn,Rn,Pn,qn,cr,ar)}}function mr(An,Rn,Pn,kn,Bn,Vn){An.onBeforeRender(Tt,Rn,Pn,kn,Bn,Vn),An.modelViewMatrix.multiplyMatrices(Pn.matrixWorldInverse,An.matrixWorld),An.normalMatrix.getNormalMatrix(An.modelViewMatrix),Bn.onBeforeRender(Tt,Rn,Pn,kn,An,Vn),Bn.transparent===!0&&Bn.side===DoubleSide?(Bn.side=BackSide,Bn.needsUpdate=!0,Tt.renderBufferDirect(Pn,Rn,kn,Bn,An,Vn),Bn.side=FrontSide,Bn.needsUpdate=!0,Tt.renderBufferDirect(Pn,Rn,kn,Bn,An,Vn),Bn.side=DoubleSide):Tt.renderBufferDirect(Pn,Rn,kn,Bn,An,Vn),An.onAfterRender(Tt,Rn,Pn,kn,Bn,Vn)}function Jn(An,Rn,Pn){Rn.isScene!==!0&&(Rn=an);const kn=cn.get(An),Bn=At.state.lights,Vn=At.state.shadowsArray,nr=Bn.state.version,Zn=hn.getParameters(An,Bn.state,Vn,Rn,Pn),qn=hn.getProgramCacheKey(Zn);let cr=kn.programs;kn.environment=An.isMeshStandardMaterial?Rn.environment:null,kn.fog=Rn.fog,kn.envMap=(An.isMeshStandardMaterial?Ln:wn).get(An.envMap||kn.environment),cr===void 0&&(An.addEventListener("dispose",Xn),cr=new Map,kn.programs=cr);let ar=cr.get(qn);if(ar!==void 0){if(kn.currentProgram===ar&&kn.lightsStateVersion===nr)return rr(An,Zn),ar}else Zn.uniforms=hn.getUniforms(An),An.onBuild(Pn,Zn,Tt),An.onBeforeCompile(Zn,Tt),ar=hn.acquireProgram(Zn,qn),cr.set(qn,ar),kn.uniforms=Zn.uniforms;const sr=kn.uniforms;(!An.isShaderMaterial&&!An.isRawShaderMaterial||An.clipping===!0)&&(sr.clippingPlanes=mn.uniform),rr(An,Zn),kn.needsLights=ir(An),kn.lightsStateVersion=nr,kn.needsLights&&(sr.ambientLightColor.value=Bn.state.ambient,sr.lightProbe.value=Bn.state.probe,sr.directionalLights.value=Bn.state.directional,sr.directionalLightShadows.value=Bn.state.directionalShadow,sr.spotLights.value=Bn.state.spot,sr.spotLightShadows.value=Bn.state.spotShadow,sr.rectAreaLights.value=Bn.state.rectArea,sr.ltc_1.value=Bn.state.rectAreaLTC1,sr.ltc_2.value=Bn.state.rectAreaLTC2,sr.pointLights.value=Bn.state.point,sr.pointLightShadows.value=Bn.state.pointShadow,sr.hemisphereLights.value=Bn.state.hemi,sr.directionalShadowMap.value=Bn.state.directionalShadowMap,sr.directionalShadowMatrix.value=Bn.state.directionalShadowMatrix,sr.spotShadowMap.value=Bn.state.spotShadowMap,sr.spotLightMatrix.value=Bn.state.spotLightMatrix,sr.spotLightMap.value=Bn.state.spotLightMap,sr.pointShadowMap.value=Bn.state.pointShadowMap,sr.pointShadowMatrix.value=Bn.state.pointShadowMatrix);const ur=ar.getUniforms(),yr=WebGLUniforms.seqWithValue(ur.seq,sr);return kn.currentProgram=ar,kn.uniformsList=yr,ar}function rr(An,Rn){const Pn=cn.get(An);Pn.outputEncoding=Rn.outputEncoding,Pn.instancing=Rn.instancing,Pn.skinning=Rn.skinning,Pn.morphTargets=Rn.morphTargets,Pn.morphNormals=Rn.morphNormals,Pn.morphColors=Rn.morphColors,Pn.morphTargetsCount=Rn.morphTargetsCount,Pn.numClippingPlanes=Rn.numClippingPlanes,Pn.numIntersection=Rn.numClipIntersection,Pn.vertexAlphas=Rn.vertexAlphas,Pn.vertexTangents=Rn.vertexTangents,Pn.toneMapping=Rn.toneMapping}function hr(An,Rn,Pn,kn,Bn){Rn.isScene!==!0&&(Rn=an),_n.resetTextureUnits();const Vn=Rn.fog,nr=kn.isMeshStandardMaterial?Rn.environment:null,Zn=St===null?Tt.outputEncoding:St.isXRRenderTarget===!0?St.texture.encoding:LinearEncoding,qn=(kn.isMeshStandardMaterial?Ln:wn).get(kn.envMap||nr),cr=kn.vertexColors===!0&&!!Pn.attributes.color&&Pn.attributes.color.itemSize===4,ar=!!kn.normalMap&&!!Pn.attributes.tangent,sr=!!Pn.morphAttributes.position,ur=!!Pn.morphAttributes.normal,yr=!!Pn.morphAttributes.color,_r=kn.toneMapped?Tt.toneMapping:NoToneMapping,xr=Pn.morphAttributes.position||Pn.morphAttributes.normal||Pn.morphAttributes.color,vr=xr!==void 0?xr.length:0,lr=cn.get(kn),wr=At.state.lights;if(Ut===!0&&(Bt===!0||An!==Dt)){const Er=An===Dt&&kn.id===Rt;mn.setState(kn,An,Er)}let pr=!1;kn.version===lr.__version?(lr.needsLights&&lr.lightsStateVersion!==wr.state.version||lr.outputEncoding!==Zn||Bn.isInstancedMesh&&lr.instancing===!1||!Bn.isInstancedMesh&&lr.instancing===!0||Bn.isSkinnedMesh&&lr.skinning===!1||!Bn.isSkinnedMesh&&lr.skinning===!0||lr.envMap!==qn||kn.fog===!0&&lr.fog!==Vn||lr.numClippingPlanes!==void 0&&(lr.numClippingPlanes!==mn.numPlanes||lr.numIntersection!==mn.numIntersection)||lr.vertexAlphas!==cr||lr.vertexTangents!==ar||lr.morphTargets!==sr||lr.morphNormals!==ur||lr.morphColors!==yr||lr.toneMapping!==_r||vn.isWebGL2===!0&&lr.morphTargetsCount!==vr)&&(pr=!0):(pr=!0,lr.__version=kn.version);let gr=lr.currentProgram;pr===!0&&(gr=Jn(kn,Rn,Bn));let Ar=!1,Tr=!1,Cr=!1;const br=gr.getUniforms(),Sr=lr.uniforms;if(En.useProgram(gr.program)&&(Ar=!0,Tr=!0,Cr=!0),kn.id!==Rt&&(Rt=kn.id,Tr=!0),Ar||Dt!==An){if(br.setValue(rn,"projectionMatrix",An.projectionMatrix),vn.logarithmicDepthBuffer&&br.setValue(rn,"logDepthBufFC",2/(Math.log(An.far+1)/Math.LN2)),Dt!==An&&(Dt=An,Tr=!0,Cr=!0),kn.isShaderMaterial||kn.isMeshPhongMaterial||kn.isMeshToonMaterial||kn.isMeshStandardMaterial||kn.envMap){const Er=br.map.cameraPosition;Er!==void 0&&Er.setValue(rn,Zt.setFromMatrixPosition(An.matrixWorld))}(kn.isMeshPhongMaterial||kn.isMeshToonMaterial||kn.isMeshLambertMaterial||kn.isMeshBasicMaterial||kn.isMeshStandardMaterial||kn.isShaderMaterial)&&br.setValue(rn,"isOrthographic",An.isOrthographicCamera===!0),(kn.isMeshPhongMaterial||kn.isMeshToonMaterial||kn.isMeshLambertMaterial||kn.isMeshBasicMaterial||kn.isMeshStandardMaterial||kn.isShaderMaterial||kn.isShadowMaterial||Bn.isSkinnedMesh)&&br.setValue(rn,"viewMatrix",An.matrixWorldInverse)}if(Bn.isSkinnedMesh){br.setOptional(rn,Bn,"bindMatrix"),br.setOptional(rn,Bn,"bindMatrixInverse");const Er=Bn.skeleton;Er&&(vn.floatVertexTextures?(Er.boneTexture===null&&Er.computeBoneTexture(),br.setValue(rn,"boneTexture",Er.boneTexture,_n),br.setValue(rn,"boneTextureSize",Er.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ir=Pn.morphAttributes;if((Ir.position!==void 0||Ir.normal!==void 0||Ir.color!==void 0&&vn.isWebGL2===!0)&&Dn.update(Bn,Pn,kn,gr),(Tr||lr.receiveShadow!==Bn.receiveShadow)&&(lr.receiveShadow=Bn.receiveShadow,br.setValue(rn,"receiveShadow",Bn.receiveShadow)),kn.isMeshGouraudMaterial&&kn.envMap!==null&&(Sr.envMap.value=qn,Sr.flipEnvMap.value=qn.isCubeTexture&&qn.isRenderTargetTexture===!1?-1:1),Tr&&(br.setValue(rn,"toneMappingExposure",Tt.toneMappingExposure),lr.needsLights&&er(Sr,Cr),Vn&&kn.fog===!0&&Cn.refreshFogUniforms(Sr,Vn),Cn.refreshMaterialUniforms(Sr,kn,kt,jt,Kt),WebGLUniforms.upload(rn,lr.uniformsList,Sr,_n)),kn.isShaderMaterial&&kn.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(rn,lr.uniformsList,Sr,_n),kn.uniformsNeedUpdate=!1),kn.isSpriteMaterial&&br.setValue(rn,"center",Bn.center),br.setValue(rn,"modelViewMatrix",Bn.modelViewMatrix),br.setValue(rn,"normalMatrix",Bn.normalMatrix),br.setValue(rn,"modelMatrix",Bn.matrixWorld),kn.isShaderMaterial||kn.isRawShaderMaterial){const Er=kn.uniformsGroups;for(let Mr=0,Or=Er.length;Mr<Or;Mr++)if(vn.isWebGL2){const Dr=Er[Mr];xn.update(Dr,gr),xn.bind(Dr,gr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return gr}function er(An,Rn){An.ambientLightColor.needsUpdate=Rn,An.lightProbe.needsUpdate=Rn,An.directionalLights.needsUpdate=Rn,An.directionalLightShadows.needsUpdate=Rn,An.pointLights.needsUpdate=Rn,An.pointLightShadows.needsUpdate=Rn,An.spotLights.needsUpdate=Rn,An.spotLightShadows.needsUpdate=Rn,An.rectAreaLights.needsUpdate=Rn,An.hemisphereLights.needsUpdate=Rn}function ir(An){return An.isMeshLambertMaterial||An.isMeshToonMaterial||An.isMeshPhongMaterial||An.isMeshStandardMaterial||An.isShadowMaterial||An.isShaderMaterial&&An.lights===!0}this.getActiveCubeFace=function(){return Ct},this.getActiveMipmapLevel=function(){return It},this.getRenderTarget=function(){return St},this.setRenderTargetTextures=function(An,Rn,Pn){cn.get(An.texture).__webglTexture=Rn,cn.get(An.depthTexture).__webglTexture=Pn;const kn=cn.get(An);kn.__hasExternalTextures=!0,kn.__hasExternalTextures&&(kn.__autoAllocateDepthBuffer=Pn===void 0,kn.__autoAllocateDepthBuffer||pn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),kn.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(An,Rn){const Pn=cn.get(An);Pn.__webglFramebuffer=Rn,Pn.__useDefaultFramebuffer=Rn===void 0},this.setRenderTarget=function(An,Rn=0,Pn=0){St=An,Ct=Rn,It=Pn;let kn=!0,Bn=null,Vn=!1,nr=!1;if(An){const qn=cn.get(An);qn.__useDefaultFramebuffer!==void 0?(En.bindFramebuffer(36160,null),kn=!1):qn.__webglFramebuffer===void 0?_n.setupRenderTarget(An):qn.__hasExternalTextures&&_n.rebindTextures(An,cn.get(An.texture).__webglTexture,cn.get(An.depthTexture).__webglTexture);const cr=An.texture;(cr.isData3DTexture||cr.isDataArrayTexture||cr.isCompressedArrayTexture)&&(nr=!0);const ar=cn.get(An).__webglFramebuffer;An.isWebGLCubeRenderTarget?(Bn=ar[Rn],Vn=!0):vn.isWebGL2&&An.samples>0&&_n.useMultisampledRTT(An)===!1?Bn=cn.get(An).__webglMultisampledFramebuffer:Bn=ar,Wt.copy(An.viewport),qt.copy(An.scissor),Vt=An.scissorTest}else Wt.copy(Mt).multiplyScalar(kt).floor(),qt.copy(Lt).multiplyScalar(kt).floor(),Vt=Ht;if(En.bindFramebuffer(36160,Bn)&&vn.drawBuffers&&kn&&En.drawBuffers(An,Bn),En.viewport(Wt),En.scissor(qt),En.setScissorTest(Vt),Vn){const qn=cn.get(An.texture);rn.framebufferTexture2D(36160,36064,34069+Rn,qn.__webglTexture,Pn)}else if(nr){const qn=cn.get(An.texture),cr=Rn||0;rn.framebufferTextureLayer(36160,36064,qn.__webglTexture,Pn||0,cr)}Rt=-1},this.readRenderTargetPixels=function(An,Rn,Pn,kn,Bn,Vn,nr){if(!(An&&An.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Zn=cn.get(An).__webglFramebuffer;if(An.isWebGLCubeRenderTarget&&nr!==void 0&&(Zn=Zn[nr]),Zn){En.bindFramebuffer(36160,Zn);try{const qn=An.texture,cr=qn.format,ar=qn.type;if(cr!==RGBAFormat&&tn.convert(cr)!==rn.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const sr=ar===HalfFloatType&&(pn.has("EXT_color_buffer_half_float")||vn.isWebGL2&&pn.has("EXT_color_buffer_float"));if(ar!==UnsignedByteType&&tn.convert(ar)!==rn.getParameter(35738)&&!(ar===FloatType&&(vn.isWebGL2||pn.has("OES_texture_float")||pn.has("WEBGL_color_buffer_float")))&&!sr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Rn>=0&&Rn<=An.width-kn&&Pn>=0&&Pn<=An.height-Bn&&rn.readPixels(Rn,Pn,kn,Bn,tn.convert(cr),tn.convert(ar),Vn)}finally{const qn=St!==null?cn.get(St).__webglFramebuffer:null;En.bindFramebuffer(36160,qn)}}},this.copyFramebufferToTexture=function(An,Rn,Pn=0){const kn=Math.pow(2,-Pn),Bn=Math.floor(Rn.image.width*kn),Vn=Math.floor(Rn.image.height*kn);_n.setTexture2D(Rn,0),rn.copyTexSubImage2D(3553,Pn,0,0,An.x,An.y,Bn,Vn),En.unbindTexture()},this.copyTextureToTexture=function(An,Rn,Pn,kn=0){const Bn=Rn.image.width,Vn=Rn.image.height,nr=tn.convert(Pn.format),Zn=tn.convert(Pn.type);_n.setTexture2D(Pn,0),rn.pixelStorei(37440,Pn.flipY),rn.pixelStorei(37441,Pn.premultiplyAlpha),rn.pixelStorei(3317,Pn.unpackAlignment),Rn.isDataTexture?rn.texSubImage2D(3553,kn,An.x,An.y,Bn,Vn,nr,Zn,Rn.image.data):Rn.isCompressedTexture?rn.compressedTexSubImage2D(3553,kn,An.x,An.y,Rn.mipmaps[0].width,Rn.mipmaps[0].height,nr,Rn.mipmaps[0].data):rn.texSubImage2D(3553,kn,An.x,An.y,nr,Zn,Rn.image),kn===0&&Pn.generateMipmaps&&rn.generateMipmap(3553),En.unbindTexture()},this.copyTextureToTexture3D=function(An,Rn,Pn,kn,Bn=0){if(Tt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Vn=An.max.x-An.min.x+1,nr=An.max.y-An.min.y+1,Zn=An.max.z-An.min.z+1,qn=tn.convert(kn.format),cr=tn.convert(kn.type);let ar;if(kn.isData3DTexture)_n.setTexture3D(kn,0),ar=32879;else if(kn.isDataArrayTexture)_n.setTexture2DArray(kn,0),ar=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}rn.pixelStorei(37440,kn.flipY),rn.pixelStorei(37441,kn.premultiplyAlpha),rn.pixelStorei(3317,kn.unpackAlignment);const sr=rn.getParameter(3314),ur=rn.getParameter(32878),yr=rn.getParameter(3316),_r=rn.getParameter(3315),xr=rn.getParameter(32877),vr=Pn.isCompressedTexture?Pn.mipmaps[0]:Pn.image;rn.pixelStorei(3314,vr.width),rn.pixelStorei(32878,vr.height),rn.pixelStorei(3316,An.min.x),rn.pixelStorei(3315,An.min.y),rn.pixelStorei(32877,An.min.z),Pn.isDataTexture||Pn.isData3DTexture?rn.texSubImage3D(ar,Bn,Rn.x,Rn.y,Rn.z,Vn,nr,Zn,qn,cr,vr.data):Pn.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),rn.compressedTexSubImage3D(ar,Bn,Rn.x,Rn.y,Rn.z,Vn,nr,Zn,qn,vr.data)):rn.texSubImage3D(ar,Bn,Rn.x,Rn.y,Rn.z,Vn,nr,Zn,qn,cr,vr),rn.pixelStorei(3314,sr),rn.pixelStorei(32878,ur),rn.pixelStorei(3316,yr),rn.pixelStorei(3315,_r),rn.pixelStorei(32877,xr),Bn===0&&kn.generateMipmaps&&rn.generateMipmap(ar),En.unbindTexture()},this.initTexture=function(An){An.isCubeTexture?_n.setTextureCube(An,0):An.isData3DTexture?_n.setTexture3D(An,0):An.isDataArrayTexture||An.isCompressedArrayTexture?_n.setTexture2DArray(An,0):_n.setTexture2D(An,0),En.unbindTexture()},this.resetState=function(){Ct=0,It=0,St=null,En.reset(),un.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(tt,rt){return super.copy(tt,rt),tt.background!==null&&(this.background=tt.background.clone()),tt.environment!==null&&(this.environment=tt.environment.clone()),tt.fog!==null&&(this.fog=tt.fog.clone()),this.backgroundBlurriness=tt.backgroundBlurriness,tt.overrideMaterial!==null&&(this.overrideMaterial=tt.overrideMaterial.clone()),this.matrixAutoUpdate=tt.matrixAutoUpdate,this}toJSON(tt){const rt=super.toJSON(tt);return this.fog!==null&&(rt.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(rt.backgroundBlurriness=this.backgroundBlurriness),rt}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(tt){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=tt}}class InterleavedBuffer{constructor(tt,rt){this.isInterleavedBuffer=!0,this.array=tt,this.stride=rt,this.count=tt!==void 0?tt.length/rt:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(tt){tt===!0&&this.version++}setUsage(tt){return this.usage=tt,this}copy(tt){return this.array=new tt.array.constructor(tt.array),this.count=tt.count,this.stride=tt.stride,this.usage=tt.usage,this}copyAt(tt,rt,at){tt*=this.stride,at*=rt.stride;for(let st=0,ot=this.stride;st<ot;st++)this.array[tt+st]=rt.array[at+st];return this}set(tt,rt=0){return this.array.set(tt,rt),this}clone(tt){tt.arrayBuffers===void 0&&(tt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),tt.arrayBuffers[this.array.buffer._uuid]===void 0&&(tt.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const rt=new this.array.constructor(tt.arrayBuffers[this.array.buffer._uuid]),at=new this.constructor(rt,this.stride);return at.setUsage(this.usage),at}onUpload(tt){return this.onUploadCallback=tt,this}toJSON(tt){return tt.arrayBuffers===void 0&&(tt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),tt.arrayBuffers[this.array.buffer._uuid]===void 0&&(tt.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(tt,rt,at,st=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=tt,this.itemSize=rt,this.offset=at,this.normalized=st===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(tt){this.data.needsUpdate=tt}applyMatrix4(tt){for(let rt=0,at=this.data.count;rt<at;rt++)_vector$6.fromBufferAttribute(this,rt),_vector$6.applyMatrix4(tt),this.setXYZ(rt,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(tt){for(let rt=0,at=this.count;rt<at;rt++)_vector$6.fromBufferAttribute(this,rt),_vector$6.applyNormalMatrix(tt),this.setXYZ(rt,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(tt){for(let rt=0,at=this.count;rt<at;rt++)_vector$6.fromBufferAttribute(this,rt),_vector$6.transformDirection(tt),this.setXYZ(rt,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(tt,rt){return this.normalized&&(rt=normalize(rt,this.array)),this.data.array[tt*this.data.stride+this.offset]=rt,this}setY(tt,rt){return this.normalized&&(rt=normalize(rt,this.array)),this.data.array[tt*this.data.stride+this.offset+1]=rt,this}setZ(tt,rt){return this.normalized&&(rt=normalize(rt,this.array)),this.data.array[tt*this.data.stride+this.offset+2]=rt,this}setW(tt,rt){return this.normalized&&(rt=normalize(rt,this.array)),this.data.array[tt*this.data.stride+this.offset+3]=rt,this}getX(tt){let rt=this.data.array[tt*this.data.stride+this.offset];return this.normalized&&(rt=denormalize(rt,this.array)),rt}getY(tt){let rt=this.data.array[tt*this.data.stride+this.offset+1];return this.normalized&&(rt=denormalize(rt,this.array)),rt}getZ(tt){let rt=this.data.array[tt*this.data.stride+this.offset+2];return this.normalized&&(rt=denormalize(rt,this.array)),rt}getW(tt){let rt=this.data.array[tt*this.data.stride+this.offset+3];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setXY(tt,rt,at){return tt=tt*this.data.stride+this.offset,this.normalized&&(rt=normalize(rt,this.array),at=normalize(at,this.array)),this.data.array[tt+0]=rt,this.data.array[tt+1]=at,this}setXYZ(tt,rt,at,st){return tt=tt*this.data.stride+this.offset,this.normalized&&(rt=normalize(rt,this.array),at=normalize(at,this.array),st=normalize(st,this.array)),this.data.array[tt+0]=rt,this.data.array[tt+1]=at,this.data.array[tt+2]=st,this}setXYZW(tt,rt,at,st,ot){return tt=tt*this.data.stride+this.offset,this.normalized&&(rt=normalize(rt,this.array),at=normalize(at,this.array),st=normalize(st,this.array),ot=normalize(ot,this.array)),this.data.array[tt+0]=rt,this.data.array[tt+1]=at,this.data.array[tt+2]=st,this.data.array[tt+3]=ot,this}clone(tt){if(tt===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const rt=[];for(let at=0;at<this.count;at++){const st=at*this.data.stride+this.offset;for(let ot=0;ot<this.itemSize;ot++)rt.push(this.data.array[st+ot])}return new BufferAttribute(new this.array.constructor(rt),this.itemSize,this.normalized)}else return tt.interleavedBuffers===void 0&&(tt.interleavedBuffers={}),tt.interleavedBuffers[this.data.uuid]===void 0&&(tt.interleavedBuffers[this.data.uuid]=this.data.clone(tt)),new InterleavedBufferAttribute(tt.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(tt){if(tt===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const rt=[];for(let at=0;at<this.count;at++){const st=at*this.data.stride+this.offset;for(let ot=0;ot<this.itemSize;ot++)rt.push(this.data.array[st+ot])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:rt,normalized:this.normalized}}else return tt.interleavedBuffers===void 0&&(tt.interleavedBuffers={}),tt.interleavedBuffers[this.data.uuid]===void 0&&(tt.interleavedBuffers[this.data.uuid]=this.data.toJSON(tt)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh{constructor(tt,rt){super(tt,rt),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(tt,rt){return super.copy(tt,rt),this.bindMode=tt.bindMode,this.bindMatrix.copy(tt.bindMatrix),this.bindMatrixInverse.copy(tt.bindMatrixInverse),this.skeleton=tt.skeleton,this}bind(tt,rt){this.skeleton=tt,rt===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),rt=this.matrixWorld),this.bindMatrix.copy(rt),this.bindMatrixInverse.copy(rt).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const tt=new Vector4,rt=this.geometry.attributes.skinWeight;for(let at=0,st=rt.count;at<st;at++){tt.fromBufferAttribute(rt,at);const ot=1/tt.manhattanLength();ot!==1/0?tt.multiplyScalar(ot):tt.set(1,0,0,0),rt.setXYZW(at,tt.x,tt.y,tt.z,tt.w)}}updateMatrixWorld(tt){super.updateMatrixWorld(tt),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(tt,rt){const at=this.skeleton,st=this.geometry;_skinIndex.fromBufferAttribute(st.attributes.skinIndex,tt),_skinWeight.fromBufferAttribute(st.attributes.skinWeight,tt),_basePosition.copy(rt).applyMatrix4(this.bindMatrix),rt.set(0,0,0);for(let ot=0;ot<4;ot++){const lt=_skinWeight.getComponent(ot);if(lt!==0){const ut=_skinIndex.getComponent(ot);_matrix.multiplyMatrices(at.bones[ut].matrixWorld,at.boneInverses[ut]),rt.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),lt)}}return rt.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture$1{constructor(tt=null,rt=1,at=1,st,ot,lt,ut,ht,mt=NearestFilter,bt=NearestFilter,vt,At){super(null,lt,ut,ht,mt,bt,st,ot,vt,At),this.isDataTexture=!0,this.image={data:tt,width:rt,height:at},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(tt=[],rt=[]){this.uuid=generateUUID(),this.bones=tt.slice(0),this.boneInverses=rt,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const tt=this.bones,rt=this.boneInverses;if(this.boneMatrices=new Float32Array(tt.length*16),rt.length===0)this.calculateInverses();else if(tt.length!==rt.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let at=0,st=this.bones.length;at<st;at++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let tt=0,rt=this.bones.length;tt<rt;tt++){const at=new Matrix4;this.bones[tt]&&at.copy(this.bones[tt].matrixWorld).invert(),this.boneInverses.push(at)}}pose(){for(let tt=0,rt=this.bones.length;tt<rt;tt++){const at=this.bones[tt];at&&at.matrixWorld.copy(this.boneInverses[tt]).invert()}for(let tt=0,rt=this.bones.length;tt<rt;tt++){const at=this.bones[tt];at&&(at.parent&&at.parent.isBone?(at.matrix.copy(at.parent.matrixWorld).invert(),at.matrix.multiply(at.matrixWorld)):at.matrix.copy(at.matrixWorld),at.matrix.decompose(at.position,at.quaternion,at.scale))}}update(){const tt=this.bones,rt=this.boneInverses,at=this.boneMatrices,st=this.boneTexture;for(let ot=0,lt=tt.length;ot<lt;ot++){const ut=tt[ot]?tt[ot].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(ut,rt[ot]),_offsetMatrix.toArray(at,ot*16)}st!==null&&(st.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let tt=Math.sqrt(this.bones.length*4);tt=ceilPowerOfTwo(tt),tt=Math.max(tt,4);const rt=new Float32Array(tt*tt*4);rt.set(this.boneMatrices);const at=new DataTexture(rt,tt,tt,RGBAFormat,FloatType);return at.needsUpdate=!0,this.boneMatrices=rt,this.boneTexture=at,this.boneTextureSize=tt,this}getBoneByName(tt){for(let rt=0,at=this.bones.length;rt<at;rt++){const st=this.bones[rt];if(st.name===tt)return st}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(tt,rt){this.uuid=tt.uuid;for(let at=0,st=tt.bones.length;at<st;at++){const ot=tt.bones[at];let lt=rt[ot];lt===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",ot),lt=new Bone),this.bones.push(lt),this.boneInverses.push(new Matrix4().fromArray(tt.boneInverses[at]))}return this.init(),this}toJSON(){const tt={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};tt.uuid=this.uuid;const rt=this.bones,at=this.boneInverses;for(let st=0,ot=rt.length;st<ot;st++){const lt=rt[st];tt.bones.push(lt.uuid);const ut=at[st];tt.boneInverses.push(ut.toArray())}return tt}}class InstancedBufferAttribute extends BufferAttribute{constructor(tt,rt,at,st=1){super(tt,rt,at),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=st}copy(tt){return super.copy(tt),this.meshPerAttribute=tt.meshPerAttribute,this}toJSON(){const tt=super.toJSON();return tt.meshPerAttribute=this.meshPerAttribute,tt.isInstancedBufferAttribute=!0,tt}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_identity=new Matrix4,_mesh=new Mesh;class InstancedMesh extends Mesh{constructor(tt,rt,at){super(tt,rt),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(at*16),16),this.instanceColor=null,this.count=at,this.frustumCulled=!1;for(let st=0;st<at;st++)this.setMatrixAt(st,_identity)}copy(tt,rt){return super.copy(tt,rt),this.instanceMatrix.copy(tt.instanceMatrix),tt.instanceColor!==null&&(this.instanceColor=tt.instanceColor.clone()),this.count=tt.count,this}getColorAt(tt,rt){rt.fromArray(this.instanceColor.array,tt*3)}getMatrixAt(tt,rt){rt.fromArray(this.instanceMatrix.array,tt*16)}raycast(tt,rt){const at=this.matrixWorld,st=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(let ot=0;ot<st;ot++){this.getMatrixAt(ot,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(at,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(tt,_instanceIntersects);for(let lt=0,ut=_instanceIntersects.length;lt<ut;lt++){const ht=_instanceIntersects[lt];ht.instanceId=ot,ht.object=this,rt.push(ht)}_instanceIntersects.length=0}}setColorAt(tt,rt){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),rt.toArray(this.instanceColor.array,tt*3)}setMatrixAt(tt,rt){rt.toArray(this.instanceMatrix.array,tt*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material$1{constructor(tt){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.linewidth=tt.linewidth,this.linecap=tt.linecap,this.linejoin=tt.linejoin,this.fog=tt.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(tt=new BufferGeometry,rt=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=tt,this.material=rt,this.updateMorphTargets()}copy(tt,rt){return super.copy(tt,rt),this.material=tt.material,this.geometry=tt.geometry,this}computeLineDistances(){const tt=this.geometry;if(tt.index===null){const rt=tt.attributes.position,at=[0];for(let st=1,ot=rt.count;st<ot;st++)_start$1.fromBufferAttribute(rt,st-1),_end$1.fromBufferAttribute(rt,st),at[st]=at[st-1],at[st]+=_start$1.distanceTo(_end$1);tt.setAttribute("lineDistance",new Float32BufferAttribute(at,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(tt,rt){const at=this.geometry,st=this.matrixWorld,ot=tt.params.Line.threshold,lt=at.drawRange;if(at.boundingSphere===null&&at.computeBoundingSphere(),_sphere$1.copy(at.boundingSphere),_sphere$1.applyMatrix4(st),_sphere$1.radius+=ot,tt.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(st).invert(),_ray$1.copy(tt.ray).applyMatrix4(_inverseMatrix$1);const ut=ot/((this.scale.x+this.scale.y+this.scale.z)/3),ht=ut*ut,mt=new Vector3,bt=new Vector3,vt=new Vector3,At=new Vector3,xt=this.isLineSegments?2:1,Et=at.index,wt=at.attributes.position;if(Et!==null){const Ct=Math.max(0,lt.start),It=Math.min(Et.count,lt.start+lt.count);for(let St=Ct,Rt=It-1;St<Rt;St+=xt){const Dt=Et.getX(St),Wt=Et.getX(St+1);if(mt.fromBufferAttribute(wt,Dt),bt.fromBufferAttribute(wt,Wt),_ray$1.distanceSqToSegment(mt,bt,At,vt)>ht)continue;At.applyMatrix4(this.matrixWorld);const Vt=tt.ray.origin.distanceTo(At);Vt<tt.near||Vt>tt.far||rt.push({distance:Vt,point:vt.clone().applyMatrix4(this.matrixWorld),index:St,face:null,faceIndex:null,object:this})}}else{const Ct=Math.max(0,lt.start),It=Math.min(wt.count,lt.start+lt.count);for(let St=Ct,Rt=It-1;St<Rt;St+=xt){if(mt.fromBufferAttribute(wt,St),bt.fromBufferAttribute(wt,St+1),_ray$1.distanceSqToSegment(mt,bt,At,vt)>ht)continue;At.applyMatrix4(this.matrixWorld);const Wt=tt.ray.origin.distanceTo(At);Wt<tt.near||Wt>tt.far||rt.push({distance:Wt,point:vt.clone().applyMatrix4(this.matrixWorld),index:St,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const rt=this.geometry.morphAttributes,at=Object.keys(rt);if(at.length>0){const st=rt[at[0]];if(st!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ot=0,lt=st.length;ot<lt;ot++){const ut=st[ot].name||String(ot);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ut]=ot}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(tt,rt){super(tt,rt),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const tt=this.geometry;if(tt.index===null){const rt=tt.attributes.position,at=[];for(let st=0,ot=rt.count;st<ot;st+=2)_start.fromBufferAttribute(rt,st),_end.fromBufferAttribute(rt,st+1),at[st]=st===0?0:at[st-1],at[st+1]=at[st]+_start.distanceTo(_end);tt.setAttribute("lineDistance",new Float32BufferAttribute(at,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(tt,rt){super(tt,rt),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material$1{constructor(tt){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.map=tt.map,this.alphaMap=tt.alphaMap,this.size=tt.size,this.sizeAttenuation=tt.sizeAttenuation,this.fog=tt.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(tt=new BufferGeometry,rt=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=tt,this.material=rt,this.updateMorphTargets()}copy(tt,rt){return super.copy(tt,rt),this.material=tt.material,this.geometry=tt.geometry,this}raycast(tt,rt){const at=this.geometry,st=this.matrixWorld,ot=tt.params.Points.threshold,lt=at.drawRange;if(at.boundingSphere===null&&at.computeBoundingSphere(),_sphere.copy(at.boundingSphere),_sphere.applyMatrix4(st),_sphere.radius+=ot,tt.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(st).invert(),_ray.copy(tt.ray).applyMatrix4(_inverseMatrix);const ut=ot/((this.scale.x+this.scale.y+this.scale.z)/3),ht=ut*ut,mt=at.index,vt=at.attributes.position;if(mt!==null){const At=Math.max(0,lt.start),xt=Math.min(mt.count,lt.start+lt.count);for(let Et=At,Tt=xt;Et<Tt;Et++){const wt=mt.getX(Et);_position$2.fromBufferAttribute(vt,wt),testPoint(_position$2,wt,ht,st,tt,rt,this)}}else{const At=Math.max(0,lt.start),xt=Math.min(vt.count,lt.start+lt.count);for(let Et=At,Tt=xt;Et<Tt;Et++)_position$2.fromBufferAttribute(vt,Et),testPoint(_position$2,Et,ht,st,tt,rt,this)}}updateMorphTargets(){const rt=this.geometry.morphAttributes,at=Object.keys(rt);if(at.length>0){const st=rt[at[0]];if(st!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ot=0,lt=st.length;ot<lt;ot++){const ut=st[ot].name||String(ot);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ut]=ot}}}}}function testPoint(it,tt,rt,at,st,ot,lt){const ut=_ray.distanceSqToPoint(it);if(ut<rt){const ht=new Vector3;_ray.closestPointToPoint(it,ht),ht.applyMatrix4(at);const mt=st.ray.origin.distanceTo(ht);if(mt<st.near||mt>st.far)return;ot.push({distance:mt,distanceToRay:Math.sqrt(ut),point:ht,index:tt,face:null,object:lt})}}class CompressedTexture extends Texture$1{constructor(tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At){super(null,lt,ut,ht,mt,bt,st,ot,vt,At),this.isCompressedTexture=!0,this.image={width:rt,height:at},this.mipmaps=tt,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(tt,rt,at,st,ot,lt){super(tt,rt,at,ot,lt),this.isCompressedArrayTexture=!0,this.image.depth=st,this.wrapR=ClampToEdgeWrapping}}class MeshStandardMaterial extends Material$1{constructor(tt){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.defines={STANDARD:""},this.color.copy(tt.color),this.roughness=tt.roughness,this.metalness=tt.metalness,this.map=tt.map,this.lightMap=tt.lightMap,this.lightMapIntensity=tt.lightMapIntensity,this.aoMap=tt.aoMap,this.aoMapIntensity=tt.aoMapIntensity,this.emissive.copy(tt.emissive),this.emissiveMap=tt.emissiveMap,this.emissiveIntensity=tt.emissiveIntensity,this.bumpMap=tt.bumpMap,this.bumpScale=tt.bumpScale,this.normalMap=tt.normalMap,this.normalMapType=tt.normalMapType,this.normalScale.copy(tt.normalScale),this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.roughnessMap=tt.roughnessMap,this.metalnessMap=tt.metalnessMap,this.alphaMap=tt.alphaMap,this.envMap=tt.envMap,this.envMapIntensity=tt.envMapIntensity,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.wireframeLinecap=tt.wireframeLinecap,this.wireframeLinejoin=tt.wireframeLinejoin,this.flatShading=tt.flatShading,this.fog=tt.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(tt){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(rt){this.ior=(1+.4*rt)/(1-.4*rt)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(tt)}get sheen(){return this._sheen}set sheen(tt){this._sheen>0!=tt>0&&this.version++,this._sheen=tt}get clearcoat(){return this._clearcoat}set clearcoat(tt){this._clearcoat>0!=tt>0&&this.version++,this._clearcoat=tt}get iridescence(){return this._iridescence}set iridescence(tt){this._iridescence>0!=tt>0&&this.version++,this._iridescence=tt}get transmission(){return this._transmission}set transmission(tt){this._transmission>0!=tt>0&&this.version++,this._transmission=tt}copy(tt){return super.copy(tt),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=tt.clearcoat,this.clearcoatMap=tt.clearcoatMap,this.clearcoatRoughness=tt.clearcoatRoughness,this.clearcoatRoughnessMap=tt.clearcoatRoughnessMap,this.clearcoatNormalMap=tt.clearcoatNormalMap,this.clearcoatNormalScale.copy(tt.clearcoatNormalScale),this.ior=tt.ior,this.iridescence=tt.iridescence,this.iridescenceMap=tt.iridescenceMap,this.iridescenceIOR=tt.iridescenceIOR,this.iridescenceThicknessRange=[...tt.iridescenceThicknessRange],this.iridescenceThicknessMap=tt.iridescenceThicknessMap,this.sheen=tt.sheen,this.sheenColor.copy(tt.sheenColor),this.sheenColorMap=tt.sheenColorMap,this.sheenRoughness=tt.sheenRoughness,this.sheenRoughnessMap=tt.sheenRoughnessMap,this.transmission=tt.transmission,this.transmissionMap=tt.transmissionMap,this.thickness=tt.thickness,this.thicknessMap=tt.thicknessMap,this.attenuationDistance=tt.attenuationDistance,this.attenuationColor.copy(tt.attenuationColor),this.specularIntensity=tt.specularIntensity,this.specularIntensityMap=tt.specularIntensityMap,this.specularColor.copy(tt.specularColor),this.specularColorMap=tt.specularColorMap,this}}function arraySlice(it,tt,rt){return isTypedArray(it)?new it.constructor(it.subarray(tt,rt!==void 0?rt:it.length)):it.slice(tt,rt)}function convertArray(it,tt,rt){return!it||!rt&&it.constructor===tt?it:typeof tt.BYTES_PER_ELEMENT=="number"?new tt(it):Array.prototype.slice.call(it)}function isTypedArray(it){return ArrayBuffer.isView(it)&&!(it instanceof DataView)}function getKeyframeOrder(it){function tt(st,ot){return it[st]-it[ot]}const rt=it.length,at=new Array(rt);for(let st=0;st!==rt;++st)at[st]=st;return at.sort(tt),at}function sortedArray(it,tt,rt){const at=it.length,st=new it.constructor(at);for(let ot=0,lt=0;lt!==at;++ot){const ut=rt[ot]*tt;for(let ht=0;ht!==tt;++ht)st[lt++]=it[ut+ht]}return st}function flattenJSON(it,tt,rt,at){let st=1,ot=it[0];for(;ot!==void 0&&ot[at]===void 0;)ot=it[st++];if(ot===void 0)return;let lt=ot[at];if(lt!==void 0)if(Array.isArray(lt))do lt=ot[at],lt!==void 0&&(tt.push(ot.time),rt.push.apply(rt,lt)),ot=it[st++];while(ot!==void 0);else if(lt.toArray!==void 0)do lt=ot[at],lt!==void 0&&(tt.push(ot.time),lt.toArray(rt,rt.length)),ot=it[st++];while(ot!==void 0);else do lt=ot[at],lt!==void 0&&(tt.push(ot.time),rt.push(lt)),ot=it[st++];while(ot!==void 0)}class Interpolant{constructor(tt,rt,at,st){this.parameterPositions=tt,this._cachedIndex=0,this.resultBuffer=st!==void 0?st:new rt.constructor(at),this.sampleValues=rt,this.valueSize=at,this.settings=null,this.DefaultSettings_={}}evaluate(tt){const rt=this.parameterPositions;let at=this._cachedIndex,st=rt[at],ot=rt[at-1];e:{t:{let lt;n:{r:if(!(tt<st)){for(let ut=at+2;;){if(st===void 0){if(tt<ot)break r;return at=rt.length,this._cachedIndex=at,this.copySampleValue_(at-1)}if(at===ut)break;if(ot=st,st=rt[++at],tt<st)break t}lt=rt.length;break n}if(!(tt>=ot)){const ut=rt[1];tt<ut&&(at=2,ot=ut);for(let ht=at-2;;){if(ot===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(at===ht)break;if(st=ot,ot=rt[--at-1],tt>=ot)break t}lt=at,at=0;break n}break e}for(;at<lt;){const ut=at+lt>>>1;tt<rt[ut]?lt=ut:at=ut+1}if(st=rt[at],ot=rt[at-1],ot===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(st===void 0)return at=rt.length,this._cachedIndex=at,this.copySampleValue_(at-1)}this._cachedIndex=at,this.intervalChanged_(at,ot,st)}return this.interpolate_(at,ot,tt,st)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(tt){const rt=this.resultBuffer,at=this.sampleValues,st=this.valueSize,ot=tt*st;for(let lt=0;lt!==st;++lt)rt[lt]=at[ot+lt];return rt}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(tt,rt,at,st){super(tt,rt,at,st),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(tt,rt,at){const st=this.parameterPositions;let ot=tt-2,lt=tt+1,ut=st[ot],ht=st[lt];if(ut===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:ot=tt,ut=2*rt-at;break;case WrapAroundEnding:ot=st.length-2,ut=rt+st[ot]-st[ot+1];break;default:ot=tt,ut=at}if(ht===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:lt=tt,ht=2*at-rt;break;case WrapAroundEnding:lt=1,ht=at+st[1]-st[0];break;default:lt=tt-1,ht=rt}const mt=(at-rt)*.5,bt=this.valueSize;this._weightPrev=mt/(rt-ut),this._weightNext=mt/(ht-at),this._offsetPrev=ot*bt,this._offsetNext=lt*bt}interpolate_(tt,rt,at,st){const ot=this.resultBuffer,lt=this.sampleValues,ut=this.valueSize,ht=tt*ut,mt=ht-ut,bt=this._offsetPrev,vt=this._offsetNext,At=this._weightPrev,xt=this._weightNext,Et=(at-rt)/(st-rt),Tt=Et*Et,wt=Tt*Et,Ct=-At*wt+2*At*Tt-At*Et,It=(1+At)*wt+(-1.5-2*At)*Tt+(-.5+At)*Et+1,St=(-1-xt)*wt+(1.5+xt)*Tt+.5*Et,Rt=xt*wt-xt*Tt;for(let Dt=0;Dt!==ut;++Dt)ot[Dt]=Ct*lt[bt+Dt]+It*lt[mt+Dt]+St*lt[ht+Dt]+Rt*lt[vt+Dt];return ot}}class LinearInterpolant extends Interpolant{constructor(tt,rt,at,st){super(tt,rt,at,st)}interpolate_(tt,rt,at,st){const ot=this.resultBuffer,lt=this.sampleValues,ut=this.valueSize,ht=tt*ut,mt=ht-ut,bt=(at-rt)/(st-rt),vt=1-bt;for(let At=0;At!==ut;++At)ot[At]=lt[mt+At]*vt+lt[ht+At]*bt;return ot}}class DiscreteInterpolant extends Interpolant{constructor(tt,rt,at,st){super(tt,rt,at,st)}interpolate_(tt){return this.copySampleValue_(tt-1)}}class KeyframeTrack{constructor(tt,rt,at,st){if(tt===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(rt===void 0||rt.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+tt);this.name=tt,this.times=convertArray(rt,this.TimeBufferType),this.values=convertArray(at,this.ValueBufferType),this.setInterpolation(st||this.DefaultInterpolation)}static toJSON(tt){const rt=tt.constructor;let at;if(rt.toJSON!==this.toJSON)at=rt.toJSON(tt);else{at={name:tt.name,times:convertArray(tt.times,Array),values:convertArray(tt.values,Array)};const st=tt.getInterpolation();st!==tt.DefaultInterpolation&&(at.interpolation=st)}return at.type=tt.ValueTypeName,at}InterpolantFactoryMethodDiscrete(tt){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),tt)}InterpolantFactoryMethodLinear(tt){return new LinearInterpolant(this.times,this.values,this.getValueSize(),tt)}InterpolantFactoryMethodSmooth(tt){return new CubicInterpolant(this.times,this.values,this.getValueSize(),tt)}setInterpolation(tt){let rt;switch(tt){case InterpolateDiscrete:rt=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:rt=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:rt=this.InterpolantFactoryMethodSmooth;break}if(rt===void 0){const at="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(tt!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(at);return console.warn("THREE.KeyframeTrack:",at),this}return this.createInterpolant=rt,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(tt){if(tt!==0){const rt=this.times;for(let at=0,st=rt.length;at!==st;++at)rt[at]+=tt}return this}scale(tt){if(tt!==1){const rt=this.times;for(let at=0,st=rt.length;at!==st;++at)rt[at]*=tt}return this}trim(tt,rt){const at=this.times,st=at.length;let ot=0,lt=st-1;for(;ot!==st&&at[ot]<tt;)++ot;for(;lt!==-1&&at[lt]>rt;)--lt;if(++lt,ot!==0||lt!==st){ot>=lt&&(lt=Math.max(lt,1),ot=lt-1);const ut=this.getValueSize();this.times=arraySlice(at,ot,lt),this.values=arraySlice(this.values,ot*ut,lt*ut)}return this}validate(){let tt=!0;const rt=this.getValueSize();rt-Math.floor(rt)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),tt=!1);const at=this.times,st=this.values,ot=at.length;ot===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),tt=!1);let lt=null;for(let ut=0;ut!==ot;ut++){const ht=at[ut];if(typeof ht=="number"&&isNaN(ht)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,ut,ht),tt=!1;break}if(lt!==null&&lt>ht){console.error("THREE.KeyframeTrack: Out of order keys.",this,ut,ht,lt),tt=!1;break}lt=ht}if(st!==void 0&&isTypedArray(st))for(let ut=0,ht=st.length;ut!==ht;++ut){const mt=st[ut];if(isNaN(mt)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,ut,mt),tt=!1;break}}return tt}optimize(){const tt=arraySlice(this.times),rt=arraySlice(this.values),at=this.getValueSize(),st=this.getInterpolation()===InterpolateSmooth,ot=tt.length-1;let lt=1;for(let ut=1;ut<ot;++ut){let ht=!1;const mt=tt[ut],bt=tt[ut+1];if(mt!==bt&&(ut!==1||mt!==tt[0]))if(st)ht=!0;else{const vt=ut*at,At=vt-at,xt=vt+at;for(let Et=0;Et!==at;++Et){const Tt=rt[vt+Et];if(Tt!==rt[At+Et]||Tt!==rt[xt+Et]){ht=!0;break}}}if(ht){if(ut!==lt){tt[lt]=tt[ut];const vt=ut*at,At=lt*at;for(let xt=0;xt!==at;++xt)rt[At+xt]=rt[vt+xt]}++lt}}if(ot>0){tt[lt]=tt[ot];for(let ut=ot*at,ht=lt*at,mt=0;mt!==at;++mt)rt[ht+mt]=rt[ut+mt];++lt}return lt!==tt.length?(this.times=arraySlice(tt,0,lt),this.values=arraySlice(rt,0,lt*at)):(this.times=tt,this.values=rt),this}clone(){const tt=arraySlice(this.times,0),rt=arraySlice(this.values,0),at=this.constructor,st=new at(this.name,tt,rt);return st.createInterpolant=this.createInterpolant,st}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(tt,rt,at,st){super(tt,rt,at,st)}interpolate_(tt,rt,at,st){const ot=this.resultBuffer,lt=this.sampleValues,ut=this.valueSize,ht=(at-rt)/(st-rt);let mt=tt*ut;for(let bt=mt+ut;mt!==bt;mt+=4)Quaternion.slerpFlat(ot,0,lt,mt-ut,lt,mt,ht);return ot}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(tt){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),tt)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(tt,rt=-1,at,st=NormalAnimationBlendMode){this.name=tt,this.tracks=at,this.duration=rt,this.blendMode=st,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(tt){const rt=[],at=tt.tracks,st=1/(tt.fps||1);for(let lt=0,ut=at.length;lt!==ut;++lt)rt.push(parseKeyframeTrack(at[lt]).scale(st));const ot=new this(tt.name,tt.duration,rt,tt.blendMode);return ot.uuid=tt.uuid,ot}static toJSON(tt){const rt=[],at=tt.tracks,st={name:tt.name,duration:tt.duration,tracks:rt,uuid:tt.uuid,blendMode:tt.blendMode};for(let ot=0,lt=at.length;ot!==lt;++ot)rt.push(KeyframeTrack.toJSON(at[ot]));return st}static CreateFromMorphTargetSequence(tt,rt,at,st){const ot=rt.length,lt=[];for(let ut=0;ut<ot;ut++){let ht=[],mt=[];ht.push((ut+ot-1)%ot,ut,(ut+1)%ot),mt.push(0,1,0);const bt=getKeyframeOrder(ht);ht=sortedArray(ht,1,bt),mt=sortedArray(mt,1,bt),!st&&ht[0]===0&&(ht.push(ot),mt.push(mt[0])),lt.push(new NumberKeyframeTrack(".morphTargetInfluences["+rt[ut].name+"]",ht,mt).scale(1/at))}return new this(tt,-1,lt)}static findByName(tt,rt){let at=tt;if(!Array.isArray(tt)){const st=tt;at=st.geometry&&st.geometry.animations||st.animations}for(let st=0;st<at.length;st++)if(at[st].name===rt)return at[st];return null}static CreateClipsFromMorphTargetSequences(tt,rt,at){const st={},ot=/^([\w-]*?)([\d]+)$/;for(let ut=0,ht=tt.length;ut<ht;ut++){const mt=tt[ut],bt=mt.name.match(ot);if(bt&&bt.length>1){const vt=bt[1];let At=st[vt];At||(st[vt]=At=[]),At.push(mt)}}const lt=[];for(const ut in st)lt.push(this.CreateFromMorphTargetSequence(ut,st[ut],rt,at));return lt}static parseAnimation(tt,rt){if(!tt)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const at=function(vt,At,xt,Et,Tt){if(xt.length!==0){const wt=[],Ct=[];flattenJSON(xt,wt,Ct,Et),wt.length!==0&&Tt.push(new vt(At,wt,Ct))}},st=[],ot=tt.name||"default",lt=tt.fps||30,ut=tt.blendMode;let ht=tt.length||-1;const mt=tt.hierarchy||[];for(let vt=0;vt<mt.length;vt++){const At=mt[vt].keys;if(!(!At||At.length===0))if(At[0].morphTargets){const xt={};let Et;for(Et=0;Et<At.length;Et++)if(At[Et].morphTargets)for(let Tt=0;Tt<At[Et].morphTargets.length;Tt++)xt[At[Et].morphTargets[Tt]]=-1;for(const Tt in xt){const wt=[],Ct=[];for(let It=0;It!==At[Et].morphTargets.length;++It){const St=At[Et];wt.push(St.time),Ct.push(St.morphTarget===Tt?1:0)}st.push(new NumberKeyframeTrack(".morphTargetInfluence["+Tt+"]",wt,Ct))}ht=xt.length*lt}else{const xt=".bones["+rt[vt].name+"]";at(VectorKeyframeTrack,xt+".position",At,"pos",st),at(QuaternionKeyframeTrack,xt+".quaternion",At,"rot",st),at(VectorKeyframeTrack,xt+".scale",At,"scl",st)}}return st.length===0?null:new this(ot,ht,st,ut)}resetDuration(){const tt=this.tracks;let rt=0;for(let at=0,st=tt.length;at!==st;++at){const ot=this.tracks[at];rt=Math.max(rt,ot.times[ot.times.length-1])}return this.duration=rt,this}trim(){for(let tt=0;tt<this.tracks.length;tt++)this.tracks[tt].trim(0,this.duration);return this}validate(){let tt=!0;for(let rt=0;rt<this.tracks.length;rt++)tt=tt&&this.tracks[rt].validate();return tt}optimize(){for(let tt=0;tt<this.tracks.length;tt++)this.tracks[tt].optimize();return this}clone(){const tt=[];for(let rt=0;rt<this.tracks.length;rt++)tt.push(this.tracks[rt].clone());return new this.constructor(this.name,this.duration,tt,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(it){switch(it.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+it)}function parseKeyframeTrack(it){if(it.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const tt=getTrackTypeForValueTypeName(it.type);if(it.times===void 0){const rt=[],at=[];flattenJSON(it.keys,rt,at,"value"),it.times=rt,it.values=at}return tt.parse!==void 0?tt.parse(it):new tt(it.name,it.times,it.values,it.interpolation)}const Cache={enabled:!1,files:{},add:function(it,tt){this.enabled!==!1&&(this.files[it]=tt)},get:function(it){if(this.enabled!==!1)return this.files[it]},remove:function(it){delete this.files[it]},clear:function(){this.files={}}};class LoadingManager{constructor(tt,rt,at){const st=this;let ot=!1,lt=0,ut=0,ht;const mt=[];this.onStart=void 0,this.onLoad=tt,this.onProgress=rt,this.onError=at,this.itemStart=function(bt){ut++,ot===!1&&st.onStart!==void 0&&st.onStart(bt,lt,ut),ot=!0},this.itemEnd=function(bt){lt++,st.onProgress!==void 0&&st.onProgress(bt,lt,ut),lt===ut&&(ot=!1,st.onLoad!==void 0&&st.onLoad())},this.itemError=function(bt){st.onError!==void 0&&st.onError(bt)},this.resolveURL=function(bt){return ht?ht(bt):bt},this.setURLModifier=function(bt){return ht=bt,this},this.addHandler=function(bt,vt){return mt.push(bt,vt),this},this.removeHandler=function(bt){const vt=mt.indexOf(bt);return vt!==-1&&mt.splice(vt,2),this},this.getHandler=function(bt){for(let vt=0,At=mt.length;vt<At;vt+=2){const xt=mt[vt],Et=mt[vt+1];if(xt.global&&(xt.lastIndex=0),xt.test(bt))return Et}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(tt){this.manager=tt!==void 0?tt:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(tt,rt){const at=this;return new Promise(function(st,ot){at.load(tt,st,rt,ot)})}parse(){}setCrossOrigin(tt){return this.crossOrigin=tt,this}setWithCredentials(tt){return this.withCredentials=tt,this}setPath(tt){return this.path=tt,this}setResourcePath(tt){return this.resourcePath=tt,this}setRequestHeader(tt){return this.requestHeader=tt,this}}const loading={};class HttpError extends Error{constructor(tt,rt){super(tt),this.response=rt}}class FileLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,at,st){tt===void 0&&(tt=""),this.path!==void 0&&(tt=this.path+tt),tt=this.manager.resolveURL(tt);const ot=Cache.get(tt);if(ot!==void 0)return this.manager.itemStart(tt),setTimeout(()=>{rt&&rt(ot),this.manager.itemEnd(tt)},0),ot;if(loading[tt]!==void 0){loading[tt].push({onLoad:rt,onProgress:at,onError:st});return}loading[tt]=[],loading[tt].push({onLoad:rt,onProgress:at,onError:st});const lt=new Request(tt,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),ut=this.mimeType,ht=this.responseType;fetch(lt).then(mt=>{if(mt.status===200||mt.status===0){if(mt.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||mt.body===void 0||mt.body.getReader===void 0)return mt;const bt=loading[tt],vt=mt.body.getReader(),At=mt.headers.get("Content-Length"),xt=At?parseInt(At):0,Et=xt!==0;let Tt=0;const wt=new ReadableStream({start(Ct){It();function It(){vt.read().then(({done:St,value:Rt})=>{if(St)Ct.close();else{Tt+=Rt.byteLength;const Dt=new ProgressEvent("progress",{lengthComputable:Et,loaded:Tt,total:xt});for(let Wt=0,qt=bt.length;Wt<qt;Wt++){const Vt=bt[Wt];Vt.onProgress&&Vt.onProgress(Dt)}Ct.enqueue(Rt),It()}})}}});return new Response(wt)}else throw new HttpError(`fetch for "${mt.url}" responded with ${mt.status}: ${mt.statusText}`,mt)}).then(mt=>{switch(ht){case"arraybuffer":return mt.arrayBuffer();case"blob":return mt.blob();case"document":return mt.text().then(bt=>new DOMParser().parseFromString(bt,ut));case"json":return mt.json();default:if(ut===void 0)return mt.text();{const vt=/charset="?([^;"\s]*)"?/i.exec(ut),At=vt&&vt[1]?vt[1].toLowerCase():void 0,xt=new TextDecoder(At);return mt.arrayBuffer().then(Et=>xt.decode(Et))}}}).then(mt=>{Cache.add(tt,mt);const bt=loading[tt];delete loading[tt];for(let vt=0,At=bt.length;vt<At;vt++){const xt=bt[vt];xt.onLoad&&xt.onLoad(mt)}}).catch(mt=>{const bt=loading[tt];if(bt===void 0)throw this.manager.itemError(tt),mt;delete loading[tt];for(let vt=0,At=bt.length;vt<At;vt++){const xt=bt[vt];xt.onError&&xt.onError(mt)}this.manager.itemError(tt)}).finally(()=>{this.manager.itemEnd(tt)}),this.manager.itemStart(tt)}setResponseType(tt){return this.responseType=tt,this}setMimeType(tt){return this.mimeType=tt,this}}class ImageLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,at,st){this.path!==void 0&&(tt=this.path+tt),tt=this.manager.resolveURL(tt);const ot=this,lt=Cache.get(tt);if(lt!==void 0)return ot.manager.itemStart(tt),setTimeout(function(){rt&&rt(lt),ot.manager.itemEnd(tt)},0),lt;const ut=createElementNS("img");function ht(){bt(),Cache.add(tt,this),rt&&rt(this),ot.manager.itemEnd(tt)}function mt(vt){bt(),st&&st(vt),ot.manager.itemError(tt),ot.manager.itemEnd(tt)}function bt(){ut.removeEventListener("load",ht,!1),ut.removeEventListener("error",mt,!1)}return ut.addEventListener("load",ht,!1),ut.addEventListener("error",mt,!1),tt.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(ut.crossOrigin=this.crossOrigin),ot.manager.itemStart(tt),ut.src=tt,ut}}class DataTextureLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,at,st){const ot=this,lt=new DataTexture,ut=new FileLoader(this.manager);return ut.setResponseType("arraybuffer"),ut.setRequestHeader(this.requestHeader),ut.setPath(this.path),ut.setWithCredentials(ot.withCredentials),ut.load(tt,function(ht){const mt=ot.parse(ht);!mt||(mt.image!==void 0?lt.image=mt.image:mt.data!==void 0&&(lt.image.width=mt.width,lt.image.height=mt.height,lt.image.data=mt.data),lt.wrapS=mt.wrapS!==void 0?mt.wrapS:ClampToEdgeWrapping,lt.wrapT=mt.wrapT!==void 0?mt.wrapT:ClampToEdgeWrapping,lt.magFilter=mt.magFilter!==void 0?mt.magFilter:LinearFilter,lt.minFilter=mt.minFilter!==void 0?mt.minFilter:LinearFilter,lt.anisotropy=mt.anisotropy!==void 0?mt.anisotropy:1,mt.encoding!==void 0&&(lt.encoding=mt.encoding),mt.flipY!==void 0&&(lt.flipY=mt.flipY),mt.format!==void 0&&(lt.format=mt.format),mt.type!==void 0&&(lt.type=mt.type),mt.mipmaps!==void 0&&(lt.mipmaps=mt.mipmaps,lt.minFilter=LinearMipmapLinearFilter),mt.mipmapCount===1&&(lt.minFilter=LinearFilter),mt.generateMipmaps!==void 0&&(lt.generateMipmaps=mt.generateMipmaps),lt.needsUpdate=!0,rt&&rt(lt,mt))},at,st),lt}}class TextureLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,at,st){const ot=new Texture$1,lt=new ImageLoader(this.manager);return lt.setCrossOrigin(this.crossOrigin),lt.setPath(this.path),lt.load(tt,function(ut){ot.image=ut,ot.needsUpdate=!0,rt!==void 0&&rt(ot)},at,st),ot}}class Light extends Object3D{constructor(tt,rt=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(tt),this.intensity=rt}dispose(){}copy(tt,rt){return super.copy(tt,rt),this.color.copy(tt.color),this.intensity=tt.intensity,this}toJSON(tt){const rt=super.toJSON(tt);return rt.object.color=this.color.getHex(),rt.object.intensity=this.intensity,this.groundColor!==void 0&&(rt.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(rt.object.distance=this.distance),this.angle!==void 0&&(rt.object.angle=this.angle),this.decay!==void 0&&(rt.object.decay=this.decay),this.penumbra!==void 0&&(rt.object.penumbra=this.penumbra),this.shadow!==void 0&&(rt.object.shadow=this.shadow.toJSON()),rt}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(tt){this.camera=tt,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(tt){const rt=this.camera,at=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(tt.matrixWorld),rt.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(tt.target.matrixWorld),rt.lookAt(_lookTarget$1),rt.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(rt.projectionMatrix,rt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),at.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),at.multiply(_projScreenMatrix$1)}getViewport(tt){return this._viewports[tt]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(tt){return this.camera=tt.camera.clone(),this.bias=tt.bias,this.radius=tt.radius,this.mapSize.copy(tt.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const tt={};return this.bias!==0&&(tt.bias=this.bias),this.normalBias!==0&&(tt.normalBias=this.normalBias),this.radius!==1&&(tt.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(tt.mapSize=this.mapSize.toArray()),tt.camera=this.camera.toJSON(!1).object,delete tt.camera.matrix,tt}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(tt){const rt=this.camera,at=RAD2DEG*2*tt.angle*this.focus,st=this.mapSize.width/this.mapSize.height,ot=tt.distance||rt.far;(at!==rt.fov||st!==rt.aspect||ot!==rt.far)&&(rt.fov=at,rt.aspect=st,rt.far=ot,rt.updateProjectionMatrix()),super.updateMatrices(tt)}copy(tt){return super.copy(tt),this.focus=tt.focus,this}}class SpotLight extends Light{constructor(tt,rt,at=0,st=Math.PI/3,ot=0,lt=1){super(tt,rt),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=at,this.angle=st,this.penumbra=ot,this.decay=lt,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(tt){this.intensity=tt/Math.PI}dispose(){this.shadow.dispose()}copy(tt,rt){return super.copy(tt,rt),this.distance=tt.distance,this.angle=tt.angle,this.penumbra=tt.penumbra,this.decay=tt.decay,this.target=tt.target.clone(),this.shadow=tt.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(tt,rt=0){const at=this.camera,st=this.matrix,ot=tt.distance||at.far;ot!==at.far&&(at.far=ot,at.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(tt.matrixWorld),at.position.copy(_lightPositionWorld),_lookTarget.copy(at.position),_lookTarget.add(this._cubeDirections[rt]),at.up.copy(this._cubeUps[rt]),at.lookAt(_lookTarget),at.updateMatrixWorld(),st.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(at.projectionMatrix,at.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(tt,rt,at=0,st=1){super(tt,rt),this.isPointLight=!0,this.type="PointLight",this.distance=at,this.decay=st,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(tt){this.intensity=tt/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(tt,rt){return super.copy(tt,rt),this.distance=tt.distance,this.decay=tt.decay,this.shadow=tt.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(tt,rt){super(tt,rt),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(tt){return super.copy(tt),this.target=tt.target.clone(),this.shadow=tt.shadow.clone(),this}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let tt=0;tt<9;tt++)this.coefficients.push(new Vector3)}set(tt){for(let rt=0;rt<9;rt++)this.coefficients[rt].copy(tt[rt]);return this}zero(){for(let tt=0;tt<9;tt++)this.coefficients[tt].set(0,0,0);return this}getAt(tt,rt){const at=tt.x,st=tt.y,ot=tt.z,lt=this.coefficients;return rt.copy(lt[0]).multiplyScalar(.282095),rt.addScaledVector(lt[1],.488603*st),rt.addScaledVector(lt[2],.488603*ot),rt.addScaledVector(lt[3],.488603*at),rt.addScaledVector(lt[4],1.092548*(at*st)),rt.addScaledVector(lt[5],1.092548*(st*ot)),rt.addScaledVector(lt[6],.315392*(3*ot*ot-1)),rt.addScaledVector(lt[7],1.092548*(at*ot)),rt.addScaledVector(lt[8],.546274*(at*at-st*st)),rt}getIrradianceAt(tt,rt){const at=tt.x,st=tt.y,ot=tt.z,lt=this.coefficients;return rt.copy(lt[0]).multiplyScalar(.886227),rt.addScaledVector(lt[1],2*.511664*st),rt.addScaledVector(lt[2],2*.511664*ot),rt.addScaledVector(lt[3],2*.511664*at),rt.addScaledVector(lt[4],2*.429043*at*st),rt.addScaledVector(lt[5],2*.429043*st*ot),rt.addScaledVector(lt[6],.743125*ot*ot-.247708),rt.addScaledVector(lt[7],2*.429043*at*ot),rt.addScaledVector(lt[8],.429043*(at*at-st*st)),rt}add(tt){for(let rt=0;rt<9;rt++)this.coefficients[rt].add(tt.coefficients[rt]);return this}addScaledSH(tt,rt){for(let at=0;at<9;at++)this.coefficients[at].addScaledVector(tt.coefficients[at],rt);return this}scale(tt){for(let rt=0;rt<9;rt++)this.coefficients[rt].multiplyScalar(tt);return this}lerp(tt,rt){for(let at=0;at<9;at++)this.coefficients[at].lerp(tt.coefficients[at],rt);return this}equals(tt){for(let rt=0;rt<9;rt++)if(!this.coefficients[rt].equals(tt.coefficients[rt]))return!1;return!0}copy(tt){return this.set(tt.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(tt,rt=0){const at=this.coefficients;for(let st=0;st<9;st++)at[st].fromArray(tt,rt+st*3);return this}toArray(tt=[],rt=0){const at=this.coefficients;for(let st=0;st<9;st++)at[st].toArray(tt,rt+st*3);return tt}static getBasisAt(tt,rt){const at=tt.x,st=tt.y,ot=tt.z;rt[0]=.282095,rt[1]=.488603*st,rt[2]=.488603*ot,rt[3]=.488603*at,rt[4]=1.092548*at*st,rt[5]=1.092548*st*ot,rt[6]=.315392*(3*ot*ot-1),rt[7]=1.092548*at*ot,rt[8]=.546274*(at*at-st*st)}}class LightProbe extends Light{constructor(tt=new SphericalHarmonics3,rt=1){super(void 0,rt),this.isLightProbe=!0,this.sh=tt}copy(tt){return super.copy(tt),this.sh.copy(tt.sh),this}fromJSON(tt){return this.intensity=tt.intensity,this.sh.fromArray(tt.sh),this}toJSON(tt){const rt=super.toJSON(tt);return rt.object.sh=this.sh.toArray(),rt}}class LoaderUtils{static decodeText(tt){if(typeof TextDecoder<"u")return new TextDecoder().decode(tt);let rt="";for(let at=0,st=tt.length;at<st;at++)rt+=String.fromCharCode(tt[at]);try{return decodeURIComponent(escape(rt))}catch{return rt}}static extractUrlBase(tt){const rt=tt.lastIndexOf("/");return rt===-1?"./":tt.slice(0,rt+1)}static resolveURL(tt,rt){return typeof tt!="string"||tt===""?"":(/^https?:\/\//i.test(rt)&&/^\//.test(tt)&&(rt=rt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(tt)||/^data:.*,.*$/i.test(tt)||/^blob:.*$/i.test(tt)?tt:rt+tt)}}class ImageBitmapLoader extends Loader{constructor(tt){super(tt),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(tt){return this.options=tt,this}load(tt,rt,at,st){tt===void 0&&(tt=""),this.path!==void 0&&(tt=this.path+tt),tt=this.manager.resolveURL(tt);const ot=this,lt=Cache.get(tt);if(lt!==void 0)return ot.manager.itemStart(tt),setTimeout(function(){rt&&rt(lt),ot.manager.itemEnd(tt)},0),lt;const ut={};ut.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",ut.headers=this.requestHeader,fetch(tt,ut).then(function(ht){return ht.blob()}).then(function(ht){return createImageBitmap(ht,Object.assign(ot.options,{colorSpaceConversion:"none"}))}).then(function(ht){Cache.add(tt,ht),rt&&rt(ht),ot.manager.itemEnd(tt)}).catch(function(ht){st&&st(ht),ot.manager.itemError(tt),ot.manager.itemEnd(tt)}),ot.manager.itemStart(tt)}}class PropertyMixer{constructor(tt,rt,at){this.binding=tt,this.valueSize=at;let st,ot,lt;switch(rt){case"quaternion":st=this._slerp,ot=this._slerpAdditive,lt=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(at*6),this._workIndex=5;break;case"string":case"bool":st=this._select,ot=this._select,lt=this._setAdditiveIdentityOther,this.buffer=new Array(at*5);break;default:st=this._lerp,ot=this._lerpAdditive,lt=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(at*5)}this._mixBufferRegion=st,this._mixBufferRegionAdditive=ot,this._setIdentity=lt,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(tt,rt){const at=this.buffer,st=this.valueSize,ot=tt*st+st;let lt=this.cumulativeWeight;if(lt===0){for(let ut=0;ut!==st;++ut)at[ot+ut]=at[ut];lt=rt}else{lt+=rt;const ut=rt/lt;this._mixBufferRegion(at,ot,0,ut,st)}this.cumulativeWeight=lt}accumulateAdditive(tt){const rt=this.buffer,at=this.valueSize,st=at*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(rt,st,0,tt,at),this.cumulativeWeightAdditive+=tt}apply(tt){const rt=this.valueSize,at=this.buffer,st=tt*rt+rt,ot=this.cumulativeWeight,lt=this.cumulativeWeightAdditive,ut=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ot<1){const ht=rt*this._origIndex;this._mixBufferRegion(at,st,ht,1-ot,rt)}lt>0&&this._mixBufferRegionAdditive(at,st,this._addIndex*rt,1,rt);for(let ht=rt,mt=rt+rt;ht!==mt;++ht)if(at[ht]!==at[ht+rt]){ut.setValue(at,st);break}}saveOriginalState(){const tt=this.binding,rt=this.buffer,at=this.valueSize,st=at*this._origIndex;tt.getValue(rt,st);for(let ot=at,lt=st;ot!==lt;++ot)rt[ot]=rt[st+ot%at];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const tt=this.valueSize*3;this.binding.setValue(this.buffer,tt)}_setAdditiveIdentityNumeric(){const tt=this._addIndex*this.valueSize,rt=tt+this.valueSize;for(let at=tt;at<rt;at++)this.buffer[at]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const tt=this._origIndex*this.valueSize,rt=this._addIndex*this.valueSize;for(let at=0;at<this.valueSize;at++)this.buffer[rt+at]=this.buffer[tt+at]}_select(tt,rt,at,st,ot){if(st>=.5)for(let lt=0;lt!==ot;++lt)tt[rt+lt]=tt[at+lt]}_slerp(tt,rt,at,st){Quaternion.slerpFlat(tt,rt,tt,rt,tt,at,st)}_slerpAdditive(tt,rt,at,st,ot){const lt=this._workIndex*ot;Quaternion.multiplyQuaternionsFlat(tt,lt,tt,rt,tt,at),Quaternion.slerpFlat(tt,rt,tt,rt,tt,lt,st)}_lerp(tt,rt,at,st,ot){const lt=1-st;for(let ut=0;ut!==ot;++ut){const ht=rt+ut;tt[ht]=tt[ht]*lt+tt[at+ut]*st}}_lerpAdditive(tt,rt,at,st,ot){for(let lt=0;lt!==ot;++lt){const ut=rt+lt;tt[ut]=tt[ut]+tt[at+lt]*st}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(tt,rt,at){const st=at||PropertyBinding.parseTrackName(rt);this._targetGroup=tt,this._bindings=tt.subscribe_(rt,st)}getValue(tt,rt){this.bind();const at=this._targetGroup.nCachedObjects_,st=this._bindings[at];st!==void 0&&st.getValue(tt,rt)}setValue(tt,rt){const at=this._bindings;for(let st=this._targetGroup.nCachedObjects_,ot=at.length;st!==ot;++st)at[st].setValue(tt,rt)}bind(){const tt=this._bindings;for(let rt=this._targetGroup.nCachedObjects_,at=tt.length;rt!==at;++rt)tt[rt].bind()}unbind(){const tt=this._bindings;for(let rt=this._targetGroup.nCachedObjects_,at=tt.length;rt!==at;++rt)tt[rt].unbind()}}class PropertyBinding{constructor(tt,rt,at){this.path=rt,this.parsedPath=at||PropertyBinding.parseTrackName(rt),this.node=PropertyBinding.findNode(tt,this.parsedPath.nodeName)||tt,this.rootNode=tt,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(tt,rt,at){return tt&&tt.isAnimationObjectGroup?new PropertyBinding.Composite(tt,rt,at):new PropertyBinding(tt,rt,at)}static sanitizeNodeName(tt){return tt.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(tt){const rt=_trackRe.exec(tt);if(rt===null)throw new Error("PropertyBinding: Cannot parse trackName: "+tt);const at={nodeName:rt[2],objectName:rt[3],objectIndex:rt[4],propertyName:rt[5],propertyIndex:rt[6]},st=at.nodeName&&at.nodeName.lastIndexOf(".");if(st!==void 0&&st!==-1){const ot=at.nodeName.substring(st+1);_supportedObjectNames.indexOf(ot)!==-1&&(at.nodeName=at.nodeName.substring(0,st),at.objectName=ot)}if(at.propertyName===null||at.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+tt);return at}static findNode(tt,rt){if(rt===void 0||rt===""||rt==="."||rt===-1||rt===tt.name||rt===tt.uuid)return tt;if(tt.skeleton){const at=tt.skeleton.getBoneByName(rt);if(at!==void 0)return at}if(tt.children){const at=function(ot){for(let lt=0;lt<ot.length;lt++){const ut=ot[lt];if(ut.name===rt||ut.uuid===rt)return ut;const ht=at(ut.children);if(ht)return ht}return null},st=at(tt.children);if(st)return st}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(tt,rt){tt[rt]=this.targetObject[this.propertyName]}_getValue_array(tt,rt){const at=this.resolvedProperty;for(let st=0,ot=at.length;st!==ot;++st)tt[rt++]=at[st]}_getValue_arrayElement(tt,rt){tt[rt]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(tt,rt){this.resolvedProperty.toArray(tt,rt)}_setValue_direct(tt,rt){this.targetObject[this.propertyName]=tt[rt]}_setValue_direct_setNeedsUpdate(tt,rt){this.targetObject[this.propertyName]=tt[rt],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(tt,rt){this.targetObject[this.propertyName]=tt[rt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(tt,rt){const at=this.resolvedProperty;for(let st=0,ot=at.length;st!==ot;++st)at[st]=tt[rt++]}_setValue_array_setNeedsUpdate(tt,rt){const at=this.resolvedProperty;for(let st=0,ot=at.length;st!==ot;++st)at[st]=tt[rt++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(tt,rt){const at=this.resolvedProperty;for(let st=0,ot=at.length;st!==ot;++st)at[st]=tt[rt++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(tt,rt){this.resolvedProperty[this.propertyIndex]=tt[rt]}_setValue_arrayElement_setNeedsUpdate(tt,rt){this.resolvedProperty[this.propertyIndex]=tt[rt],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(tt,rt){this.resolvedProperty[this.propertyIndex]=tt[rt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(tt,rt){this.resolvedProperty.fromArray(tt,rt)}_setValue_fromArray_setNeedsUpdate(tt,rt){this.resolvedProperty.fromArray(tt,rt),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(tt,rt){this.resolvedProperty.fromArray(tt,rt),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(tt,rt){this.bind(),this.getValue(tt,rt)}_setValue_unbound(tt,rt){this.bind(),this.setValue(tt,rt)}bind(){let tt=this.node;const rt=this.parsedPath,at=rt.objectName,st=rt.propertyName;let ot=rt.propertyIndex;if(tt||(tt=PropertyBinding.findNode(this.rootNode,rt.nodeName)||this.rootNode,this.node=tt),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!tt){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(at){let mt=rt.objectIndex;switch(at){case"materials":if(!tt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!tt.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}tt=tt.material.materials;break;case"bones":if(!tt.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}tt=tt.skeleton.bones;for(let bt=0;bt<tt.length;bt++)if(tt[bt].name===mt){mt=bt;break}break;case"map":if("map"in tt){tt=tt.map;break}if(!tt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!tt.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}tt=tt.material.map;break;default:if(tt[at]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}tt=tt[at]}if(mt!==void 0){if(tt[mt]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,tt);return}tt=tt[mt]}}const lt=tt[st];if(lt===void 0){const mt=rt.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+mt+"."+st+" but it wasn't found.",tt);return}let ut=this.Versioning.None;this.targetObject=tt,tt.needsUpdate!==void 0?ut=this.Versioning.NeedsUpdate:tt.matrixWorldNeedsUpdate!==void 0&&(ut=this.Versioning.MatrixWorldNeedsUpdate);let ht=this.BindingType.Direct;if(ot!==void 0){if(st==="morphTargetInfluences"){if(!tt.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!tt.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}tt.morphTargetDictionary[ot]!==void 0&&(ot=tt.morphTargetDictionary[ot])}ht=this.BindingType.ArrayElement,this.resolvedProperty=lt,this.propertyIndex=ot}else lt.fromArray!==void 0&&lt.toArray!==void 0?(ht=this.BindingType.HasFromToArray,this.resolvedProperty=lt):Array.isArray(lt)?(ht=this.BindingType.EntireArray,this.resolvedProperty=lt):this.propertyName=st;this.getValue=this.GetterByBindingType[ht],this.setValue=this.SetterByBindingTypeAndVersioning[ht][ut]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite,PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationAction{constructor(tt,rt,at=null,st=rt.blendMode){this._mixer=tt,this._clip=rt,this._localRoot=at,this.blendMode=st;const ot=rt.tracks,lt=ot.length,ut=new Array(lt),ht={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let mt=0;mt!==lt;++mt){const bt=ot[mt].createInterpolant(null);ut[mt]=bt,bt.settings=ht}this._interpolantSettings=ht,this._interpolants=ut,this._propertyBindings=new Array(lt),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(tt){return this._startTime=tt,this}setLoop(tt,rt){return this.loop=tt,this.repetitions=rt,this}setEffectiveWeight(tt){return this.weight=tt,this._effectiveWeight=this.enabled?tt:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(tt){return this._scheduleFading(tt,0,1)}fadeOut(tt){return this._scheduleFading(tt,1,0)}crossFadeFrom(tt,rt,at){if(tt.fadeOut(rt),this.fadeIn(rt),at){const st=this._clip.duration,ot=tt._clip.duration,lt=ot/st,ut=st/ot;tt.warp(1,lt,rt),this.warp(ut,1,rt)}return this}crossFadeTo(tt,rt,at){return tt.crossFadeFrom(this,rt,at)}stopFading(){const tt=this._weightInterpolant;return tt!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(tt)),this}setEffectiveTimeScale(tt){return this.timeScale=tt,this._effectiveTimeScale=this.paused?0:tt,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(tt){return this.timeScale=this._clip.duration/tt,this.stopWarping()}syncWith(tt){return this.time=tt.time,this.timeScale=tt.timeScale,this.stopWarping()}halt(tt){return this.warp(this._effectiveTimeScale,0,tt)}warp(tt,rt,at){const st=this._mixer,ot=st.time,lt=this.timeScale;let ut=this._timeScaleInterpolant;ut===null&&(ut=st._lendControlInterpolant(),this._timeScaleInterpolant=ut);const ht=ut.parameterPositions,mt=ut.sampleValues;return ht[0]=ot,ht[1]=ot+at,mt[0]=tt/lt,mt[1]=rt/lt,this}stopWarping(){const tt=this._timeScaleInterpolant;return tt!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(tt)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(tt,rt,at,st){if(!this.enabled){this._updateWeight(tt);return}const ot=this._startTime;if(ot!==null){const ht=(tt-ot)*at;ht<0||at===0?rt=0:(this._startTime=null,rt=at*ht)}rt*=this._updateTimeScale(tt);const lt=this._updateTime(rt),ut=this._updateWeight(tt);if(ut>0){const ht=this._interpolants,mt=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let bt=0,vt=ht.length;bt!==vt;++bt)ht[bt].evaluate(lt),mt[bt].accumulateAdditive(ut);break;case NormalAnimationBlendMode:default:for(let bt=0,vt=ht.length;bt!==vt;++bt)ht[bt].evaluate(lt),mt[bt].accumulate(st,ut)}}}_updateWeight(tt){let rt=0;if(this.enabled){rt=this.weight;const at=this._weightInterpolant;if(at!==null){const st=at.evaluate(tt)[0];rt*=st,tt>at.parameterPositions[1]&&(this.stopFading(),st===0&&(this.enabled=!1))}}return this._effectiveWeight=rt,rt}_updateTimeScale(tt){let rt=0;if(!this.paused){rt=this.timeScale;const at=this._timeScaleInterpolant;if(at!==null){const st=at.evaluate(tt)[0];rt*=st,tt>at.parameterPositions[1]&&(this.stopWarping(),rt===0?this.paused=!0:this.timeScale=rt)}}return this._effectiveTimeScale=rt,rt}_updateTime(tt){const rt=this._clip.duration,at=this.loop;let st=this.time+tt,ot=this._loopCount;const lt=at===LoopPingPong;if(tt===0)return ot===-1?st:lt&&(ot&1)===1?rt-st:st;if(at===LoopOnce){ot===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(st>=rt)st=rt;else if(st<0)st=0;else{this.time=st;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=st,this._mixer.dispatchEvent({type:"finished",action:this,direction:tt<0?-1:1})}}else{if(ot===-1&&(tt>=0?(ot=0,this._setEndings(!0,this.repetitions===0,lt)):this._setEndings(this.repetitions===0,!0,lt)),st>=rt||st<0){const ut=Math.floor(st/rt);st-=rt*ut,ot+=Math.abs(ut);const ht=this.repetitions-ot;if(ht<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,st=tt>0?rt:0,this.time=st,this._mixer.dispatchEvent({type:"finished",action:this,direction:tt>0?1:-1});else{if(ht===1){const mt=tt<0;this._setEndings(mt,!mt,lt)}else this._setEndings(!1,!1,lt);this._loopCount=ot,this.time=st,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:ut})}}else this.time=st;if(lt&&(ot&1)===1)return rt-st}return st}_setEndings(tt,rt,at){const st=this._interpolantSettings;at?(st.endingStart=ZeroSlopeEnding,st.endingEnd=ZeroSlopeEnding):(tt?st.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:st.endingStart=WrapAroundEnding,rt?st.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:st.endingEnd=WrapAroundEnding)}_scheduleFading(tt,rt,at){const st=this._mixer,ot=st.time;let lt=this._weightInterpolant;lt===null&&(lt=st._lendControlInterpolant(),this._weightInterpolant=lt);const ut=lt.parameterPositions,ht=lt.sampleValues;return ut[0]=ot,ht[0]=rt,ut[1]=ot+tt,ht[1]=at,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(tt){super(),this._root=tt,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(tt,rt){const at=tt._localRoot||this._root,st=tt._clip.tracks,ot=st.length,lt=tt._propertyBindings,ut=tt._interpolants,ht=at.uuid,mt=this._bindingsByRootAndName;let bt=mt[ht];bt===void 0&&(bt={},mt[ht]=bt);for(let vt=0;vt!==ot;++vt){const At=st[vt],xt=At.name;let Et=bt[xt];if(Et!==void 0)++Et.referenceCount,lt[vt]=Et;else{if(Et=lt[vt],Et!==void 0){Et._cacheIndex===null&&(++Et.referenceCount,this._addInactiveBinding(Et,ht,xt));continue}const Tt=rt&&rt._propertyBindings[vt].binding.parsedPath;Et=new PropertyMixer(PropertyBinding.create(at,xt,Tt),At.ValueTypeName,At.getValueSize()),++Et.referenceCount,this._addInactiveBinding(Et,ht,xt),lt[vt]=Et}ut[vt].resultBuffer=Et.buffer}}_activateAction(tt){if(!this._isActiveAction(tt)){if(tt._cacheIndex===null){const at=(tt._localRoot||this._root).uuid,st=tt._clip.uuid,ot=this._actionsByClip[st];this._bindAction(tt,ot&&ot.knownActions[0]),this._addInactiveAction(tt,st,at)}const rt=tt._propertyBindings;for(let at=0,st=rt.length;at!==st;++at){const ot=rt[at];ot.useCount++===0&&(this._lendBinding(ot),ot.saveOriginalState())}this._lendAction(tt)}}_deactivateAction(tt){if(this._isActiveAction(tt)){const rt=tt._propertyBindings;for(let at=0,st=rt.length;at!==st;++at){const ot=rt[at];--ot.useCount===0&&(ot.restoreOriginalState(),this._takeBackBinding(ot))}this._takeBackAction(tt)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const tt=this;this.stats={actions:{get total(){return tt._actions.length},get inUse(){return tt._nActiveActions}},bindings:{get total(){return tt._bindings.length},get inUse(){return tt._nActiveBindings}},controlInterpolants:{get total(){return tt._controlInterpolants.length},get inUse(){return tt._nActiveControlInterpolants}}}}_isActiveAction(tt){const rt=tt._cacheIndex;return rt!==null&&rt<this._nActiveActions}_addInactiveAction(tt,rt,at){const st=this._actions,ot=this._actionsByClip;let lt=ot[rt];if(lt===void 0)lt={knownActions:[tt],actionByRoot:{}},tt._byClipCacheIndex=0,ot[rt]=lt;else{const ut=lt.knownActions;tt._byClipCacheIndex=ut.length,ut.push(tt)}tt._cacheIndex=st.length,st.push(tt),lt.actionByRoot[at]=tt}_removeInactiveAction(tt){const rt=this._actions,at=rt[rt.length-1],st=tt._cacheIndex;at._cacheIndex=st,rt[st]=at,rt.pop(),tt._cacheIndex=null;const ot=tt._clip.uuid,lt=this._actionsByClip,ut=lt[ot],ht=ut.knownActions,mt=ht[ht.length-1],bt=tt._byClipCacheIndex;mt._byClipCacheIndex=bt,ht[bt]=mt,ht.pop(),tt._byClipCacheIndex=null;const vt=ut.actionByRoot,At=(tt._localRoot||this._root).uuid;delete vt[At],ht.length===0&&delete lt[ot],this._removeInactiveBindingsForAction(tt)}_removeInactiveBindingsForAction(tt){const rt=tt._propertyBindings;for(let at=0,st=rt.length;at!==st;++at){const ot=rt[at];--ot.referenceCount===0&&this._removeInactiveBinding(ot)}}_lendAction(tt){const rt=this._actions,at=tt._cacheIndex,st=this._nActiveActions++,ot=rt[st];tt._cacheIndex=st,rt[st]=tt,ot._cacheIndex=at,rt[at]=ot}_takeBackAction(tt){const rt=this._actions,at=tt._cacheIndex,st=--this._nActiveActions,ot=rt[st];tt._cacheIndex=st,rt[st]=tt,ot._cacheIndex=at,rt[at]=ot}_addInactiveBinding(tt,rt,at){const st=this._bindingsByRootAndName,ot=this._bindings;let lt=st[rt];lt===void 0&&(lt={},st[rt]=lt),lt[at]=tt,tt._cacheIndex=ot.length,ot.push(tt)}_removeInactiveBinding(tt){const rt=this._bindings,at=tt.binding,st=at.rootNode.uuid,ot=at.path,lt=this._bindingsByRootAndName,ut=lt[st],ht=rt[rt.length-1],mt=tt._cacheIndex;ht._cacheIndex=mt,rt[mt]=ht,rt.pop(),delete ut[ot],Object.keys(ut).length===0&&delete lt[st]}_lendBinding(tt){const rt=this._bindings,at=tt._cacheIndex,st=this._nActiveBindings++,ot=rt[st];tt._cacheIndex=st,rt[st]=tt,ot._cacheIndex=at,rt[at]=ot}_takeBackBinding(tt){const rt=this._bindings,at=tt._cacheIndex,st=--this._nActiveBindings,ot=rt[st];tt._cacheIndex=st,rt[st]=tt,ot._cacheIndex=at,rt[at]=ot}_lendControlInterpolant(){const tt=this._controlInterpolants,rt=this._nActiveControlInterpolants++;let at=tt[rt];return at===void 0&&(at=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),at.__cacheIndex=rt,tt[rt]=at),at}_takeBackControlInterpolant(tt){const rt=this._controlInterpolants,at=tt.__cacheIndex,st=--this._nActiveControlInterpolants,ot=rt[st];tt.__cacheIndex=st,rt[st]=tt,ot.__cacheIndex=at,rt[at]=ot}clipAction(tt,rt,at){const st=rt||this._root,ot=st.uuid;let lt=typeof tt=="string"?AnimationClip.findByName(st,tt):tt;const ut=lt!==null?lt.uuid:tt,ht=this._actionsByClip[ut];let mt=null;if(at===void 0&&(lt!==null?at=lt.blendMode:at=NormalAnimationBlendMode),ht!==void 0){const vt=ht.actionByRoot[ot];if(vt!==void 0&&vt.blendMode===at)return vt;mt=ht.knownActions[0],lt===null&&(lt=mt._clip)}if(lt===null)return null;const bt=new AnimationAction(this,lt,rt,at);return this._bindAction(bt,mt),this._addInactiveAction(bt,ut,ot),bt}existingAction(tt,rt){const at=rt||this._root,st=at.uuid,ot=typeof tt=="string"?AnimationClip.findByName(at,tt):tt,lt=ot?ot.uuid:tt,ut=this._actionsByClip[lt];return ut!==void 0&&ut.actionByRoot[st]||null}stopAllAction(){const tt=this._actions,rt=this._nActiveActions;for(let at=rt-1;at>=0;--at)tt[at].stop();return this}update(tt){tt*=this.timeScale;const rt=this._actions,at=this._nActiveActions,st=this.time+=tt,ot=Math.sign(tt),lt=this._accuIndex^=1;for(let mt=0;mt!==at;++mt)rt[mt]._update(st,tt,ot,lt);const ut=this._bindings,ht=this._nActiveBindings;for(let mt=0;mt!==ht;++mt)ut[mt].apply(lt);return this}setTime(tt){this.time=0;for(let rt=0;rt<this._actions.length;rt++)this._actions[rt].time=0;return this.update(tt)}getRoot(){return this._root}uncacheClip(tt){const rt=this._actions,at=tt.uuid,st=this._actionsByClip,ot=st[at];if(ot!==void 0){const lt=ot.knownActions;for(let ut=0,ht=lt.length;ut!==ht;++ut){const mt=lt[ut];this._deactivateAction(mt);const bt=mt._cacheIndex,vt=rt[rt.length-1];mt._cacheIndex=null,mt._byClipCacheIndex=null,vt._cacheIndex=bt,rt[bt]=vt,rt.pop(),this._removeInactiveBindingsForAction(mt)}delete st[at]}}uncacheRoot(tt){const rt=tt.uuid,at=this._actionsByClip;for(const lt in at){const ut=at[lt].actionByRoot,ht=ut[rt];ht!==void 0&&(this._deactivateAction(ht),this._removeInactiveAction(ht))}const st=this._bindingsByRootAndName,ot=st[rt];if(ot!==void 0)for(const lt in ot){const ut=ot[lt];ut.restoreOriginalState(),this._removeInactiveBinding(ut)}}uncacheAction(tt,rt){const at=this.existingAction(tt,rt);at!==null&&(this._deactivateAction(at),this._removeInactiveAction(at))}}class Raycaster{constructor(tt,rt,at=0,st=1/0){this.ray=new Ray(tt,rt),this.near=at,this.far=st,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(tt,rt){this.ray.set(tt,rt)}setFromCamera(tt,rt){rt.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(rt.matrixWorld),this.ray.direction.set(tt.x,tt.y,.5).unproject(rt).sub(this.ray.origin).normalize(),this.camera=rt):rt.isOrthographicCamera?(this.ray.origin.set(tt.x,tt.y,(rt.near+rt.far)/(rt.near-rt.far)).unproject(rt),this.ray.direction.set(0,0,-1).transformDirection(rt.matrixWorld),this.camera=rt):console.error("THREE.Raycaster: Unsupported camera type: "+rt.type)}intersectObject(tt,rt=!0,at=[]){return intersectObject(tt,this,at,rt),at.sort(ascSort),at}intersectObjects(tt,rt=!0,at=[]){for(let st=0,ot=tt.length;st<ot;st++)intersectObject(tt[st],this,at,rt);return at.sort(ascSort),at}}function ascSort(it,tt){return it.distance-tt.distance}function intersectObject(it,tt,rt,at){if(it.layers.test(tt.layers)&&it.raycast(tt,rt),at===!0){const st=it.children;for(let ot=0,lt=st.length;ot<lt;ot++)intersectObject(st[ot],tt,rt,!0)}}class Spherical{constructor(tt=1,rt=0,at=0){return this.radius=tt,this.phi=rt,this.theta=at,this}set(tt,rt,at){return this.radius=tt,this.phi=rt,this.theta=at,this}copy(tt){return this.radius=tt.radius,this.phi=tt.phi,this.theta=tt.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(tt){return this.setFromCartesianCoords(tt.x,tt.y,tt.z)}setFromCartesianCoords(tt,rt,at){return this.radius=Math.sqrt(tt*tt+rt*rt+at*at),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(tt,at),this.phi=Math.acos(clamp$1(rt/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const _tables=_generateTables();function _generateTables(){const it=new ArrayBuffer(4),tt=new Float32Array(it),rt=new Uint32Array(it),at=new Uint32Array(512),st=new Uint32Array(512);for(let ht=0;ht<256;++ht){const mt=ht-127;mt<-27?(at[ht]=0,at[ht|256]=32768,st[ht]=24,st[ht|256]=24):mt<-14?(at[ht]=1024>>-mt-14,at[ht|256]=1024>>-mt-14|32768,st[ht]=-mt-1,st[ht|256]=-mt-1):mt<=15?(at[ht]=mt+15<<10,at[ht|256]=mt+15<<10|32768,st[ht]=13,st[ht|256]=13):mt<128?(at[ht]=31744,at[ht|256]=64512,st[ht]=24,st[ht|256]=24):(at[ht]=31744,at[ht|256]=64512,st[ht]=13,st[ht|256]=13)}const ot=new Uint32Array(2048),lt=new Uint32Array(64),ut=new Uint32Array(64);for(let ht=1;ht<1024;++ht){let mt=ht<<13,bt=0;for(;(mt&8388608)===0;)mt<<=1,bt-=8388608;mt&=-8388609,bt+=947912704,ot[ht]=mt|bt}for(let ht=1024;ht<2048;++ht)ot[ht]=939524096+(ht-1024<<13);for(let ht=1;ht<31;++ht)lt[ht]=ht<<23;lt[31]=1199570944,lt[32]=2147483648;for(let ht=33;ht<63;++ht)lt[ht]=2147483648+(ht-32<<23);lt[63]=3347054592;for(let ht=1;ht<64;++ht)ht!==32&&(ut[ht]=1024);return{floatView:tt,uint32View:rt,baseTable:at,shiftTable:st,mantissaTable:ot,exponentTable:lt,offsetTable:ut}}function toHalfFloat(it){Math.abs(it)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),it=clamp$1(it,-65504,65504),_tables.floatView[0]=it;const tt=_tables.uint32View[0],rt=tt>>23&511;return _tables.baseTable[rt]+((tt&8388607)>>_tables.shiftTable[rt])}function fromHalfFloat(it){const tt=it>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[tt]+(it&1023)]+_tables.exponentTable[tt],_tables.floatView[0]}var DataUtils=Object.freeze({__proto__:null,toHalfFloat,fromHalfFloat});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);/**
* @license
* Copyright 2019 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/const t$2=window,e$2=t$2.ShadowRoot&&(t$2.ShadyCSS===void 0||t$2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$3=Symbol(),n$4=new WeakMap;class o$3{constructor(tt,rt,at){if(this._$cssResult$=!0,at!==s$3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=tt,this.t=rt}get styleSheet(){let tt=this.o;const rt=this.t;if(e$2&&tt===void 0){const at=rt!==void 0&&rt.length===1;at&&(tt=n$4.get(rt)),tt===void 0&&((this.o=tt=new CSSStyleSheet).replaceSync(this.cssText),at&&n$4.set(rt,tt))}return tt}toString(){return this.cssText}}const r$2=it=>new o$3(typeof it=="string"?it:it+"",void 0,s$3),S$1=(it,tt)=>{e$2?it.adoptedStyleSheets=tt.map(rt=>rt instanceof CSSStyleSheet?rt:rt.styleSheet):tt.forEach(rt=>{const at=document.createElement("style"),st=t$2.litNonce;st!==void 0&&at.setAttribute("nonce",st),at.textContent=rt.cssText,it.appendChild(at)})},c$1=e$2?it=>it:it=>it instanceof CSSStyleSheet?(tt=>{let rt="";for(const at of tt.cssRules)rt+=at.cssText;return r$2(rt)})(it):it;/**
* @license
* Copyright 2017 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/var s$2;const e$1=window,r$1=e$1.trustedTypes,h$1=r$1?r$1.emptyScript:"",o$2=e$1.reactiveElementPolyfillSupport,n$3={toAttribute(it,tt){switch(tt){case Boolean:it=it?h$1:null;break;case Object:case Array:it=it==null?it:JSON.stringify(it)}return it},fromAttribute(it,tt){let rt=it;switch(tt){case Boolean:rt=it!==null;break;case Number:rt=it===null?null:Number(it);break;case Object:case Array:try{rt=JSON.parse(it)}catch{rt=null}}return rt}},a$1=(it,tt)=>tt!==it&&(tt==tt||it==it),l$2={attribute:!0,type:String,converter:n$3,reflect:!1,hasChanged:a$1};class d$1 extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(tt){var rt;this.finalize(),((rt=this.h)!==null&&rt!==void 0?rt:this.h=[]).push(tt)}static get observedAttributes(){this.finalize();const tt=[];return this.elementProperties.forEach((rt,at)=>{const st=this._$Ep(at,rt);st!==void 0&&(this._$Ev.set(st,at),tt.push(st))}),tt}static createProperty(tt,rt=l$2){if(rt.state&&(rt.attribute=!1),this.finalize(),this.elementProperties.set(tt,rt),!rt.noAccessor&&!this.prototype.hasOwnProperty(tt)){const at=typeof tt=="symbol"?Symbol():"__"+tt,st=this.getPropertyDescriptor(tt,at,rt);st!==void 0&&Object.defineProperty(this.prototype,tt,st)}}static getPropertyDescriptor(tt,rt,at){return{get(){return this[rt]},set(st){const ot=this[tt];this[rt]=st,this.requestUpdate(tt,ot,at)},configurable:!0,enumerable:!0}}static getPropertyOptions(tt){return this.elementProperties.get(tt)||l$2}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const tt=Object.getPrototypeOf(this);if(tt.finalize(),tt.h!==void 0&&(this.h=[...tt.h]),this.elementProperties=new Map(tt.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const rt=this.properties,at=[...Object.getOwnPropertyNames(rt),...Object.getOwnPropertySymbols(rt)];for(const st of at)this.createProperty(st,rt[st])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(tt){const rt=[];if(Array.isArray(tt)){const at=new Set(tt.flat(1/0).reverse());for(const st of at)rt.unshift(c$1(st))}else tt!==void 0&&rt.push(c$1(tt));return rt}static _$Ep(tt,rt){const at=rt.attribute;return at===!1?void 0:typeof at=="string"?at:typeof tt=="string"?tt.toLowerCase():void 0}u(){var tt;this._$E_=new Promise(rt=>this.enableUpdating=rt),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(tt=this.constructor.h)===null||tt===void 0||tt.forEach(rt=>rt(this))}addController(tt){var rt,at;((rt=this._$ES)!==null&&rt!==void 0?rt:this._$ES=[]).push(tt),this.renderRoot!==void 0&&this.isConnected&&((at=tt.hostConnected)===null||at===void 0||at.call(tt))}removeController(tt){var rt;(rt=this._$ES)===null||rt===void 0||rt.splice(this._$ES.indexOf(tt)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((tt,rt)=>{this.hasOwnProperty(rt)&&(this._$Ei.set(rt,this[rt]),delete this[rt])})}createRenderRoot(){var tt;const rt=(tt=this.shadowRoot)!==null&&tt!==void 0?tt:this.attachShadow(this.constructor.shadowRootOptions);return S$1(rt,this.constructor.elementStyles),rt}connectedCallback(){var tt;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(tt=this._$ES)===null||tt===void 0||tt.forEach(rt=>{var at;return(at=rt.hostConnected)===null||at===void 0?void 0:at.call(rt)})}enableUpdating(tt){}disconnectedCallback(){var tt;(tt=this._$ES)===null||tt===void 0||tt.forEach(rt=>{var at;return(at=rt.hostDisconnected)===null||at===void 0?void 0:at.call(rt)})}attributeChangedCallback(tt,rt,at){this._$AK(tt,at)}_$EO(tt,rt,at=l$2){var st;const ot=this.constructor._$Ep(tt,at);if(ot!==void 0&&at.reflect===!0){const lt=(((st=at.converter)===null||st===void 0?void 0:st.toAttribute)!==void 0?at.converter:n$3).toAttribute(rt,at.type);this._$El=tt,lt==null?this.removeAttribute(ot):this.setAttribute(ot,lt),this._$El=null}}_$AK(tt,rt){var at;const st=this.constructor,ot=st._$Ev.get(tt);if(ot!==void 0&&this._$El!==ot){const lt=st.getPropertyOptions(ot),ut=typeof lt.converter=="function"?{fromAttribute:lt.converter}:((at=lt.converter)===null||at===void 0?void 0:at.fromAttribute)!==void 0?lt.converter:n$3;this._$El=ot,this[ot]=ut.fromAttribute(rt,lt.type),this._$El=null}}requestUpdate(tt,rt,at){let st=!0;tt!==void 0&&(((at=at||this.constructor.getPropertyOptions(tt)).hasChanged||a$1)(this[tt],rt)?(this._$AL.has(tt)||this._$AL.set(tt,rt),at.reflect===!0&&this._$El!==tt&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(tt,at))):st=!1),!this.isUpdatePending&&st&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(rt){Promise.reject(rt)}const tt=this.scheduleUpdate();return tt!=null&&await tt,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var tt;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((st,ot)=>this[ot]=st),this._$Ei=void 0);let rt=!1;const at=this._$AL;try{rt=this.shouldUpdate(at),rt?(this.willUpdate(at),(tt=this._$ES)===null||tt===void 0||tt.forEach(st=>{var ot;return(ot=st.hostUpdate)===null||ot===void 0?void 0:ot.call(st)}),this.update(at)):this._$Ek()}catch(st){throw rt=!1,this._$Ek(),st}rt&&this._$AE(at)}willUpdate(tt){}_$AE(tt){var rt;(rt=this._$ES)===null||rt===void 0||rt.forEach(at=>{var st;return(st=at.hostUpdated)===null||st===void 0?void 0:st.call(at)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(tt)),this.updated(tt)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(tt){return!0}update(tt){this._$EC!==void 0&&(this._$EC.forEach((rt,at)=>this._$EO(at,this[at],rt)),this._$EC=void 0),this._$Ek()}updated(tt){}firstUpdated(tt){}}d$1.finalized=!0,d$1.elementProperties=new Map,d$1.elementStyles=[],d$1.shadowRootOptions={mode:"open"},o$2==null||o$2({ReactiveElement:d$1}),((s$2=e$1.reactiveElementVersions)!==null&&s$2!==void 0?s$2:e$1.reactiveElementVersions=[]).push("1.6.1");/**
* @license
* Copyright 2017 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/var t$1;const i$1=window,s$1=i$1.trustedTypes,e=s$1?s$1.createPolicy("lit-html",{createHTML:it=>it}):void 0,o$1="$lit$",n$2=`lit$${(Math.random()+"").slice(9)}$`,l$1="?"+n$2,h=`<${l$1}>`,r=document,d=()=>r.createComment(""),u=it=>it===null||typeof it!="object"&&typeof it!="function",c=Array.isArray,v=it=>c(it)||typeof(it==null?void 0:it[Symbol.iterator])=="function",a=`[ 	
\f\r]`,f=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_=/-->/g,m=/>/g,p$1=RegExp(`>|${a}(?:([^\\s"'>=/]+)(${a}*=${a}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),g$1=/'/g,$=/"/g,y=/^(?:script|style|textarea|title)$/i,w=it=>(tt,...rt)=>({_$litType$:it,strings:tt,values:rt}),x$2=w(1),T=Symbol.for("lit-noChange"),A$1=Symbol.for("lit-nothing"),E=new WeakMap,C$1=r.createTreeWalker(r,129,null,!1),P=(it,tt)=>{const rt=it.length-1,at=[];let st,ot=tt===2?"<svg>":"",lt=f;for(let ht=0;ht<rt;ht++){const mt=it[ht];let bt,vt,At=-1,xt=0;for(;xt<mt.length&&(lt.lastIndex=xt,vt=lt.exec(mt),vt!==null);)xt=lt.lastIndex,lt===f?vt[1]==="!--"?lt=_:vt[1]!==void 0?lt=m:vt[2]!==void 0?(y.test(vt[2])&&(st=RegExp("</"+vt[2],"g")),lt=p$1):vt[3]!==void 0&&(lt=p$1):lt===p$1?vt[0]===">"?(lt=st!=null?st:f,At=-1):vt[1]===void 0?At=-2:(At=lt.lastIndex-vt[2].length,bt=vt[1],lt=vt[3]===void 0?p$1:vt[3]==='"'?$:g$1):lt===$||lt===g$1?lt=p$1:lt===_||lt===m?lt=f:(lt=p$1,st=void 0);const Et=lt===p$1&&it[ht+1].startsWith("/>")?" ":"";ot+=lt===f?mt+h:At>=0?(at.push(bt),mt.slice(0,At)+o$1+mt.slice(At)+n$2+Et):mt+n$2+(At===-2?(at.push(void 0),ht):Et)}const ut=ot+(it[rt]||"<?>")+(tt===2?"</svg>":"");if(!Array.isArray(it)||!it.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e!==void 0?e.createHTML(ut):ut,at]};class V{constructor({strings:tt,_$litType$:rt},at){let st;this.parts=[];let ot=0,lt=0;const ut=tt.length-1,ht=this.parts,[mt,bt]=P(tt,rt);if(this.el=V.createElement(mt,at),C$1.currentNode=this.el.content,rt===2){const vt=this.el.content,At=vt.firstChild;At.remove(),vt.append(...At.childNodes)}for(;(st=C$1.nextNode())!==null&&ht.length<ut;){if(st.nodeType===1){if(st.hasAttributes()){const vt=[];for(const At of st.getAttributeNames())if(At.endsWith(o$1)||At.startsWith(n$2)){const xt=bt[lt++];if(vt.push(At),xt!==void 0){const Et=st.getAttribute(xt.toLowerCase()+o$1).split(n$2),Tt=/([.?@])?(.*)/.exec(xt);ht.push({type:1,index:ot,name:Tt[2],strings:Et,ctor:Tt[1]==="."?k:Tt[1]==="?"?I$1:Tt[1]==="@"?L:R})}else ht.push({type:6,index:ot})}for(const At of vt)st.removeAttribute(At)}if(y.test(st.tagName)){const vt=st.textContent.split(n$2),At=vt.length-1;if(At>0){st.textContent=s$1?s$1.emptyScript:"";for(let xt=0;xt<At;xt++)st.append(vt[xt],d()),C$1.nextNode(),ht.push({type:2,index:++ot});st.append(vt[At],d())}}}else if(st.nodeType===8)if(st.data===l$1)ht.push({type:2,index:ot});else{let vt=-1;for(;(vt=st.data.indexOf(n$2,vt+1))!==-1;)ht.push({type:7,index:ot}),vt+=n$2.length-1}ot++}}static createElement(tt,rt){const at=r.createElement("template");return at.innerHTML=tt,at}}function N(it,tt,rt=it,at){var st,ot,lt,ut;if(tt===T)return tt;let ht=at!==void 0?(st=rt._$Co)===null||st===void 0?void 0:st[at]:rt._$Cl;const mt=u(tt)?void 0:tt._$litDirective$;return(ht==null?void 0:ht.constructor)!==mt&&((ot=ht==null?void 0:ht._$AO)===null||ot===void 0||ot.call(ht,!1),mt===void 0?ht=void 0:(ht=new mt(it),ht._$AT(it,rt,at)),at!==void 0?((lt=(ut=rt)._$Co)!==null&&lt!==void 0?lt:ut._$Co=[])[at]=ht:rt._$Cl=ht),ht!==void 0&&(tt=N(it,ht._$AS(it,tt.values),ht,at)),tt}class S{constructor(tt,rt){this.u=[],this._$AN=void 0,this._$AD=tt,this._$AM=rt}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(tt){var rt;const{el:{content:at},parts:st}=this._$AD,ot=((rt=tt==null?void 0:tt.creationScope)!==null&&rt!==void 0?rt:r).importNode(at,!0);C$1.currentNode=ot;let lt=C$1.nextNode(),ut=0,ht=0,mt=st[0];for(;mt!==void 0;){if(ut===mt.index){let bt;mt.type===2?bt=new M(lt,lt.nextSibling,this,tt):mt.type===1?bt=new mt.ctor(lt,mt.name,mt.strings,this,tt):mt.type===6&&(bt=new z(lt,this,tt)),this.u.push(bt),mt=st[++ht]}ut!==(mt==null?void 0:mt.index)&&(lt=C$1.nextNode(),ut++)}return ot}p(tt){let rt=0;for(const at of this.u)at!==void 0&&(at.strings!==void 0?(at._$AI(tt,at,rt),rt+=at.strings.length-2):at._$AI(tt[rt])),rt++}}class M{constructor(tt,rt,at,st){var ot;this.type=2,this._$AH=A$1,this._$AN=void 0,this._$AA=tt,this._$AB=rt,this._$AM=at,this.options=st,this._$Cm=(ot=st==null?void 0:st.isConnected)===null||ot===void 0||ot}get _$AU(){var tt,rt;return(rt=(tt=this._$AM)===null||tt===void 0?void 0:tt._$AU)!==null&&rt!==void 0?rt:this._$Cm}get parentNode(){let tt=this._$AA.parentNode;const rt=this._$AM;return rt!==void 0&&(tt==null?void 0:tt.nodeType)===11&&(tt=rt.parentNode),tt}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(tt,rt=this){tt=N(this,tt,rt),u(tt)?tt===A$1||tt==null||tt===""?(this._$AH!==A$1&&this._$AR(),this._$AH=A$1):tt!==this._$AH&&tt!==T&&this.g(tt):tt._$litType$!==void 0?this.$(tt):tt.nodeType!==void 0?this.T(tt):v(tt)?this.k(tt):this.g(tt)}S(tt){return this._$AA.parentNode.insertBefore(tt,this._$AB)}T(tt){this._$AH!==tt&&(this._$AR(),this._$AH=this.S(tt))}g(tt){this._$AH!==A$1&&u(this._$AH)?this._$AA.nextSibling.data=tt:this.T(r.createTextNode(tt)),this._$AH=tt}$(tt){var rt;const{values:at,_$litType$:st}=tt,ot=typeof st=="number"?this._$AC(tt):(st.el===void 0&&(st.el=V.createElement(st.h,this.options)),st);if(((rt=this._$AH)===null||rt===void 0?void 0:rt._$AD)===ot)this._$AH.p(at);else{const lt=new S(ot,this),ut=lt.v(this.options);lt.p(at),this.T(ut),this._$AH=lt}}_$AC(tt){let rt=E.get(tt.strings);return rt===void 0&&E.set(tt.strings,rt=new V(tt)),rt}k(tt){c(this._$AH)||(this._$AH=[],this._$AR());const rt=this._$AH;let at,st=0;for(const ot of tt)st===rt.length?rt.push(at=new M(this.S(d()),this.S(d()),this,this.options)):at=rt[st],at._$AI(ot),st++;st<rt.length&&(this._$AR(at&&at._$AB.nextSibling,st),rt.length=st)}_$AR(tt=this._$AA.nextSibling,rt){var at;for((at=this._$AP)===null||at===void 0||at.call(this,!1,!0,rt);tt&&tt!==this._$AB;){const st=tt.nextSibling;tt.remove(),tt=st}}setConnected(tt){var rt;this._$AM===void 0&&(this._$Cm=tt,(rt=this._$AP)===null||rt===void 0||rt.call(this,tt))}}class R{constructor(tt,rt,at,st,ot){this.type=1,this._$AH=A$1,this._$AN=void 0,this.element=tt,this.name=rt,this._$AM=st,this.options=ot,at.length>2||at[0]!==""||at[1]!==""?(this._$AH=Array(at.length-1).fill(new String),this.strings=at):this._$AH=A$1}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(tt,rt=this,at,st){const ot=this.strings;let lt=!1;if(ot===void 0)tt=N(this,tt,rt,0),lt=!u(tt)||tt!==this._$AH&&tt!==T,lt&&(this._$AH=tt);else{const ut=tt;let ht,mt;for(tt=ot[0],ht=0;ht<ot.length-1;ht++)mt=N(this,ut[at+ht],rt,ht),mt===T&&(mt=this._$AH[ht]),lt||(lt=!u(mt)||mt!==this._$AH[ht]),mt===A$1?tt=A$1:tt!==A$1&&(tt+=(mt!=null?mt:"")+ot[ht+1]),this._$AH[ht]=mt}lt&&!st&&this.j(tt)}j(tt){tt===A$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,tt!=null?tt:"")}}class k extends R{constructor(){super(...arguments),this.type=3}j(tt){this.element[this.name]=tt===A$1?void 0:tt}}const H=s$1?s$1.emptyScript:"";class I$1 extends R{constructor(){super(...arguments),this.type=4}j(tt){tt&&tt!==A$1?this.element.setAttribute(this.name,H):this.element.removeAttribute(this.name)}}class L extends R{constructor(tt,rt,at,st,ot){super(tt,rt,at,st,ot),this.type=5}_$AI(tt,rt=this){var at;if((tt=(at=N(this,tt,rt,0))!==null&&at!==void 0?at:A$1)===T)return;const st=this._$AH,ot=tt===A$1&&st!==A$1||tt.capture!==st.capture||tt.once!==st.once||tt.passive!==st.passive,lt=tt!==A$1&&(st===A$1||ot);ot&&this.element.removeEventListener(this.name,this,st),lt&&this.element.addEventListener(this.name,this,tt),this._$AH=tt}handleEvent(tt){var rt,at;typeof this._$AH=="function"?this._$AH.call((at=(rt=this.options)===null||rt===void 0?void 0:rt.host)!==null&&at!==void 0?at:this.element,tt):this._$AH.handleEvent(tt)}}class z{constructor(tt,rt,at){this.element=tt,this.type=6,this._$AN=void 0,this._$AM=rt,this.options=at}get _$AU(){return this._$AM._$AU}_$AI(tt){N(this,tt)}}const j=i$1.litHtmlPolyfillSupport;j==null||j(V,M),((t$1=i$1.litHtmlVersions)!==null&&t$1!==void 0?t$1:i$1.litHtmlVersions=[]).push("2.7.0");const B$1=(it,tt,rt)=>{var at,st;const ot=(at=rt==null?void 0:rt.renderBefore)!==null&&at!==void 0?at:tt;let lt=ot._$litPart$;if(lt===void 0){const ut=(st=rt==null?void 0:rt.renderBefore)!==null&&st!==void 0?st:null;ot._$litPart$=lt=new M(tt.insertBefore(d(),ut),ut,void 0,rt!=null?rt:{})}return lt._$AI(it),lt};/**
* @license
* Copyright 2017 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/var l,o;class s extends d$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var tt,rt;const at=super.createRenderRoot();return(tt=(rt=this.renderOptions).renderBefore)!==null&&tt!==void 0||(rt.renderBefore=at.firstChild),at}update(tt){const rt=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(tt),this._$Do=B$1(rt,this.renderRoot,this.renderOptions)}connectedCallback(){var tt;super.connectedCallback(),(tt=this._$Do)===null||tt===void 0||tt.setConnected(!0)}disconnectedCallback(){var tt;super.disconnectedCallback(),(tt=this._$Do)===null||tt===void 0||tt.setConnected(!1)}render(){return T}}s.finalized=!0,s._$litElement$=!0,(l=globalThis.litElementHydrateSupport)===null||l===void 0||l.call(globalThis,{LitElement:s});const n$1=globalThis.litElementPolyfillSupport;n$1==null||n$1({LitElement:s}),((o=globalThis.litElementVersions)!==null&&o!==void 0?o:globalThis.litElementVersions=[]).push("3.3.0");/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HAS_WEBXR_DEVICE_API=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,HAS_WEBXR_HIT_TEST_API=HAS_WEBXR_DEVICE_API&&self.XRSession.prototype.requestHitTestSource!=null,HAS_RESIZE_OBSERVER=self.ResizeObserver!=null,HAS_INTERSECTION_OBSERVER=self.IntersectionObserver!=null,IS_WEBXR_AR_CANDIDATE=HAS_WEBXR_HIT_TEST_API;(()=>{const it=navigator.userAgent||navigator.vendor||self.opera;let tt=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(it)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(it.substr(0,4)))&&(tt=!0),tt})(),/\bCrOS\b/.test(navigator.userAgent);const IS_ANDROID=/android/i.test(navigator.userAgent),IS_IOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;/Safari\//.test(navigator.userAgent);const IS_FIREFOX=/firefox/i.test(navigator.userAgent),IS_OCULUS=/OculusBrowser/.test(navigator.userAgent);IS_IOS&&/CriOS\//.test(navigator.userAgent);const IS_SCENEVIEWER_CANDIDATE=IS_ANDROID&&!IS_FIREFOX&&!IS_OCULUS,IS_WKWEBVIEW=Boolean(window.webkit&&window.webkit.messageHandlers),IS_AR_QUICKLOOK_CANDIDATE=(()=>{if(IS_IOS){if(IS_WKWEBVIEW)return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));{const it=document.createElement("a");return Boolean(it.relList&&it.relList.supports&&it.relList.supports("ar"))}}else return!1})();/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const deserializeUrl=it=>!!it&&it!=="null"?toFullUrl(it):null,assertIsArCandidate=()=>{if(IS_WEBXR_AR_CANDIDATE)return;const it=[];throw HAS_WEBXR_DEVICE_API||it.push("WebXR Device API"),HAS_WEBXR_HIT_TEST_API||it.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${it.join(", ")}`)},toFullUrl=it=>new URL(it,window.location.toString()).toString(),throttle=(it,tt)=>{let rt=null;const at=(...st)=>{rt==null&&(it(...st),rt=self.setTimeout(()=>rt=null,tt))};return at.flush=()=>{rt!=null&&(self.clearTimeout(rt),rt=null)},at},debounce=(it,tt)=>{let rt=null;return(...at)=>{rt!=null&&self.clearTimeout(rt),rt=self.setTimeout(()=>{rt=null,it(...at)},tt)}},clamp=(it,tt,rt)=>Math.max(tt,Math.min(rt,it)),CAPPED_DEVICE_PIXEL_RATIO=1,resolveDpr=(()=>{const it=(()=>{var tt;if(!((tt=document.documentElement.getAttribute("itemtype"))===null||tt===void 0)&&tt.includes("schema.org/SearchResultsPage"))return!0;const rt=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(const at of rt)if(at.name==="viewport")return!0;return!1})();return it||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>it?window.devicePixelRatio:CAPPED_DEVICE_PIXEL_RATIO})(),isDebugMode=(()=>{const it="model-viewer-debug-mode",tt=new RegExp(`[?&]${it}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(tt)})(),timePasses=(it=0)=>new Promise(tt=>setTimeout(tt,it)),waitForEvent=(it,tt,rt=null)=>new Promise(at=>{function st(ot){(!rt||rt(ot))&&(at(ot),it.removeEventListener(tt,st))}it.addEventListener(tt,st)});/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var __decorate$7=globalThis&&globalThis.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot};const BASE_OPACITY=.5,DEFAULT_SHADOW_INTENSITY=0,DEFAULT_SHADOW_SOFTNESS=1,DEFAULT_EXPOSURE=1,$currentEnvironmentMap=Symbol("currentEnvironmentMap"),$currentBackground=Symbol("currentBackground"),$updateEnvironment=Symbol("updateEnvironment"),$cancelEnvironmentUpdate=Symbol("cancelEnvironmentUpdate"),EnvironmentMixin=it=>{var tt,rt,at;class st extends it{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=DEFAULT_SHADOW_INTENSITY,this.shadowSoftness=DEFAULT_SHADOW_SOFTNESS,this.exposure=DEFAULT_EXPOSURE,this[tt]=null,this[rt]=null,this[at]=null}updated(lt){super.updated(lt),lt.has("shadowIntensity")&&(this[$scene].setShadowIntensity(this.shadowIntensity*BASE_OPACITY),this[$needsRender]()),lt.has("shadowSoftness")&&(this[$scene].setShadowSoftness(this.shadowSoftness),this[$needsRender]()),lt.has("exposure")&&(this[$scene].exposure=this.exposure,this[$needsRender]()),(lt.has("environmentImage")||lt.has("skyboxImage"))&&this[$shouldAttemptPreload]()&&this[$updateEnvironment]()}hasBakedShadow(){return this[$scene].bakedShadows.size>0}async[(tt=$currentEnvironmentMap,rt=$currentBackground,at=$cancelEnvironmentUpdate,$updateEnvironment)](){const{skyboxImage:lt,environmentImage:ut}=this;this[$cancelEnvironmentUpdate]!=null&&(this[$cancelEnvironmentUpdate](),this[$cancelEnvironmentUpdate]=null);const{textureUtils:ht}=this[$renderer];if(ht==null)return;const mt=this[$progressTracker].beginActivity();try{const{environmentMap:bt,skybox:vt}=await ht.generateEnvironmentMapAndSkybox(deserializeUrl(lt),ut,At=>mt(clamp(At,0,1)));this[$currentEnvironmentMap]!==bt&&(this[$currentEnvironmentMap]=bt,this.dispatchEvent(new CustomEvent("environment-change"))),vt!=null?this[$currentBackground]=vt.name===bt.name?bt:vt:this[$currentBackground]=null,this[$scene].setEnvironmentAndSkybox(this[$currentEnvironmentMap],this[$currentBackground]),this[$scene].dispatchEvent({type:"envmap-update"})}catch(bt){if(bt instanceof Error)throw this[$scene].setEnvironmentAndSkybox(null,null),bt}finally{mt(1)}}}return __decorate$7([e$3({type:String,attribute:"environment-image"})],st.prototype,"environmentImage",void 0),__decorate$7([e$3({type:String,attribute:"skybox-image"})],st.prototype,"skyboxImage",void 0),__decorate$7([e$3({type:Number,attribute:"shadow-intensity"})],st.prototype,"shadowIntensity",void 0),__decorate$7([e$3({type:Number,attribute:"shadow-softness"})],st.prototype,"shadowSoftness",void 0),__decorate$7([e$3({type:Number})],st.prototype,"exposure",void 0),st};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CloseIcon=x$2`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ControlsPrompt=x$2`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ARGlyph=x$2`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const templateResult=x$2`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This rule set is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${ARGlyph}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${ControlsPrompt}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${CloseIcon}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,makeTemplate=it=>{B$1(templateResult,it)},_taskCache$1=new WeakMap;class DRACOLoader extends Loader{constructor(tt){super(tt),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(tt){return this.decoderPath=tt,this}setDecoderConfig(tt){return this.decoderConfig=tt,this}setWorkerLimit(tt){return this.workerLimit=tt,this}load(tt,rt,at,st){const ot=new FileLoader(this.manager);ot.setPath(this.path),ot.setResponseType("arraybuffer"),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(this.withCredentials),ot.load(tt,lt=>{this.decodeDracoFile(lt,rt).catch(st)},at,st)}decodeDracoFile(tt,rt,at,st){const ot={attributeIDs:at||this.defaultAttributeIDs,attributeTypes:st||this.defaultAttributeTypes,useUniqueIDs:!!at};return this.decodeGeometry(tt,ot).then(rt)}decodeGeometry(tt,rt){const at=JSON.stringify(rt);if(_taskCache$1.has(tt)){const ht=_taskCache$1.get(tt);if(ht.key===at)return ht.promise;if(tt.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let st;const ot=this.workerNextTaskID++,lt=tt.byteLength,ut=this._getWorker(ot,lt).then(ht=>(st=ht,new Promise((mt,bt)=>{st._callbacks[ot]={resolve:mt,reject:bt},st.postMessage({type:"decode",id:ot,taskConfig:rt,buffer:tt},[tt])}))).then(ht=>this._createGeometry(ht.geometry));return ut.catch(()=>!0).then(()=>{st&&ot&&this._releaseTask(st,ot)}),_taskCache$1.set(tt,{key:at,promise:ut}),ut}_createGeometry(tt){const rt=new BufferGeometry;tt.index&&rt.setIndex(new BufferAttribute(tt.index.array,1));for(let at=0;at<tt.attributes.length;at++){const st=tt.attributes[at],ot=st.name,lt=st.array,ut=st.itemSize;rt.setAttribute(ot,new BufferAttribute(lt,ut))}return rt}_loadLibrary(tt,rt){const at=new FileLoader(this.manager);return at.setPath(this.decoderPath),at.setResponseType(rt),at.setWithCredentials(this.withCredentials),new Promise((st,ot)=>{at.load(tt,st,void 0,ot)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const tt=typeof WebAssembly!="object"||this.decoderConfig.type==="js",rt=[];return tt?rt.push(this._loadLibrary("draco_decoder.js","text")):(rt.push(this._loadLibrary("draco_wasm_wrapper.js","text")),rt.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(rt).then(at=>{const st=at[0];tt||(this.decoderConfig.wasmBinary=at[1]);const ot=DRACOWorker.toString(),lt=["/* draco decoder */",st,"","/* worker */",ot.substring(ot.indexOf("{")+1,ot.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([lt]))}),this.decoderPending}_getWorker(tt,rt){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const st=new Worker(this.workerSourceURL);st._callbacks={},st._taskCosts={},st._taskLoad=0,st.postMessage({type:"init",decoderConfig:this.decoderConfig}),st.onmessage=function(ot){const lt=ot.data;switch(lt.type){case"decode":st._callbacks[lt.id].resolve(lt);break;case"error":st._callbacks[lt.id].reject(lt);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+lt.type+'"')}},this.workerPool.push(st)}else this.workerPool.sort(function(st,ot){return st._taskLoad>ot._taskLoad?-1:1});const at=this.workerPool[this.workerPool.length-1];return at._taskCosts[tt]=rt,at._taskLoad+=rt,at})}_releaseTask(tt,rt){tt._taskLoad-=tt._taskCosts[rt],delete tt._callbacks[rt],delete tt._taskCosts[rt]}debug(){console.log("Task load: ",this.workerPool.map(tt=>tt._taskLoad))}dispose(){for(let tt=0;tt<this.workerPool.length;++tt)this.workerPool[tt].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let it,tt;onmessage=function(lt){const ut=lt.data;switch(ut.type){case"init":it=ut.decoderConfig,tt=new Promise(function(bt){it.onModuleLoaded=function(vt){bt({draco:vt})},DracoDecoderModule(it)});break;case"decode":const ht=ut.buffer,mt=ut.taskConfig;tt.then(bt=>{const vt=bt.draco,At=new vt.Decoder,xt=new vt.DecoderBuffer;xt.Init(new Int8Array(ht),ht.byteLength);try{const Et=rt(vt,At,xt,mt),Tt=Et.attributes.map(wt=>wt.array.buffer);Et.index&&Tt.push(Et.index.array.buffer),self.postMessage({type:"decode",id:ut.id,geometry:Et},Tt)}catch(Et){console.error(Et),self.postMessage({type:"error",id:ut.id,error:Et.message})}finally{vt.destroy(xt),vt.destroy(At)}});break}};function rt(lt,ut,ht,mt){const bt=mt.attributeIDs,vt=mt.attributeTypes;let At,xt;const Et=ut.GetEncodedGeometryType(ht);if(Et===lt.TRIANGULAR_MESH)At=new lt.Mesh,xt=ut.DecodeBufferToMesh(ht,At);else if(Et===lt.POINT_CLOUD)At=new lt.PointCloud,xt=ut.DecodeBufferToPointCloud(ht,At);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!xt.ok()||At.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+xt.error_msg());const Tt={index:null,attributes:[]};for(const wt in bt){const Ct=self[vt[wt]];let It,St;if(mt.useUniqueIDs)St=bt[wt],It=ut.GetAttributeByUniqueId(At,St);else{if(St=ut.GetAttributeId(At,lt[bt[wt]]),St===-1)continue;It=ut.GetAttribute(At,St)}Tt.attributes.push(st(lt,ut,At,wt,Ct,It))}return Et===lt.TRIANGULAR_MESH&&(Tt.index=at(lt,ut,At)),lt.destroy(At),Tt}function at(lt,ut,ht){const bt=ht.num_faces()*3,vt=bt*4,At=lt._malloc(vt);ut.GetTrianglesUInt32Array(ht,vt,At);const xt=new Uint32Array(lt.HEAPF32.buffer,At,bt).slice();return lt._free(At),{array:xt,itemSize:1}}function st(lt,ut,ht,mt,bt,vt){const At=vt.num_components(),Et=ht.num_points()*At,Tt=Et*bt.BYTES_PER_ELEMENT,wt=ot(lt,bt),Ct=lt._malloc(Tt);ut.GetAttributeDataArrayForAllPoints(ht,vt,wt,Tt,Ct);const It=new bt(lt.HEAPF32.buffer,Ct,Et).slice();return lt._free(Ct),{name:mt,array:It,itemSize:At}}function ot(lt,ut){switch(ut){case Float32Array:return lt.DT_FLOAT32;case Int8Array:return lt.DT_INT8;case Int16Array:return lt.DT_INT16;case Int32Array:return lt.DT_INT32;case Uint8Array:return lt.DT_UINT8;case Uint16Array:return lt.DT_UINT16;case Uint32Array:return lt.DT_UINT32}}}class GLTFLoader extends Loader{constructor(tt){super(tt),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(rt){return new GLTFMaterialsClearcoatExtension$1(rt)}),this.register(function(rt){return new GLTFTextureBasisUExtension(rt)}),this.register(function(rt){return new GLTFTextureWebPExtension(rt)}),this.register(function(rt){return new GLTFMaterialsSheenExtension(rt)}),this.register(function(rt){return new GLTFMaterialsTransmissionExtension$1(rt)}),this.register(function(rt){return new GLTFMaterialsVolumeExtension$1(rt)}),this.register(function(rt){return new GLTFMaterialsIorExtension(rt)}),this.register(function(rt){return new GLTFMaterialsEmissiveStrengthExtension(rt)}),this.register(function(rt){return new GLTFMaterialsSpecularExtension(rt)}),this.register(function(rt){return new GLTFMaterialsIridescenceExtension$1(rt)}),this.register(function(rt){return new GLTFLightsExtension(rt)}),this.register(function(rt){return new GLTFMeshoptCompression(rt)}),this.register(function(rt){return new GLTFMeshGpuInstancing(rt)})}load(tt,rt,at,st){const ot=this;let lt;this.resourcePath!==""?lt=this.resourcePath:this.path!==""?lt=this.path:lt=LoaderUtils.extractUrlBase(tt),this.manager.itemStart(tt);const ut=function(mt){st?st(mt):console.error(mt),ot.manager.itemError(tt),ot.manager.itemEnd(tt)},ht=new FileLoader(this.manager);ht.setPath(this.path),ht.setResponseType("arraybuffer"),ht.setRequestHeader(this.requestHeader),ht.setWithCredentials(this.withCredentials),ht.load(tt,function(mt){try{ot.parse(mt,lt,function(bt){rt(bt),ot.manager.itemEnd(tt)},ut)}catch(bt){ut(bt)}},at,ut)}setDRACOLoader(tt){return this.dracoLoader=tt,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(tt){return this.ktx2Loader=tt,this}setMeshoptDecoder(tt){return this.meshoptDecoder=tt,this}register(tt){return this.pluginCallbacks.indexOf(tt)===-1&&this.pluginCallbacks.push(tt),this}unregister(tt){return this.pluginCallbacks.indexOf(tt)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(tt),1),this}parse(tt,rt,at,st){let ot;const lt={},ut={};if(typeof tt=="string")ot=JSON.parse(tt);else if(tt instanceof ArrayBuffer)if(LoaderUtils.decodeText(new Uint8Array(tt,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{lt[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(tt)}catch(bt){st&&st(bt);return}ot=JSON.parse(lt[EXTENSIONS.KHR_BINARY_GLTF].content)}else ot=JSON.parse(LoaderUtils.decodeText(new Uint8Array(tt)));else ot=tt;if(ot.asset===void 0||ot.asset.version[0]<2){st&&st(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const ht=new GLTFParser(ot,{path:rt||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});ht.fileLoader.setRequestHeader(this.requestHeader);for(let mt=0;mt<this.pluginCallbacks.length;mt++){const bt=this.pluginCallbacks[mt](ht);ut[bt.name]=bt,lt[bt.name]=!0}if(ot.extensionsUsed)for(let mt=0;mt<ot.extensionsUsed.length;++mt){const bt=ot.extensionsUsed[mt],vt=ot.extensionsRequired||[];switch(bt){case EXTENSIONS.KHR_MATERIALS_UNLIT:lt[bt]=new GLTFMaterialsUnlitExtension$1;break;case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:lt[bt]=new GLTFMaterialsPbrSpecularGlossinessExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:lt[bt]=new GLTFDracoMeshCompressionExtension(ot,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:lt[bt]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:lt[bt]=new GLTFMeshQuantizationExtension;break;default:vt.indexOf(bt)>=0&&ut[bt]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+bt+'".')}}ht.setExtensions(lt),ht.setPlugins(ut),ht.parse(at,st)}parseAsync(tt,rt){const at=this;return new Promise(function(st,ot){at.parse(tt,rt,st,ot)})}}function GLTFRegistry(){let it={};return{get:function(tt){return it[tt]},add:function(tt,rt){it[tt]=rt},remove:function(tt){delete it[tt]},removeAll:function(){it={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const tt=this.parser,rt=this.parser.json.nodes||[];for(let at=0,st=rt.length;at<st;at++){const ot=rt[at];ot.extensions&&ot.extensions[this.name]&&ot.extensions[this.name].light!==void 0&&tt._addNodeRef(this.cache,ot.extensions[this.name].light)}}_loadLight(tt){const rt=this.parser,at="light:"+tt;let st=rt.cache.get(at);if(st)return st;const ot=rt.json,ht=((ot.extensions&&ot.extensions[this.name]||{}).lights||[])[tt];let mt;const bt=new Color(16777215);ht.color!==void 0&&bt.fromArray(ht.color);const vt=ht.range!==void 0?ht.range:0;switch(ht.type){case"directional":mt=new DirectionalLight(bt),mt.target.position.set(0,0,-1),mt.add(mt.target);break;case"point":mt=new PointLight(bt),mt.distance=vt;break;case"spot":mt=new SpotLight(bt),mt.distance=vt,ht.spot=ht.spot||{},ht.spot.innerConeAngle=ht.spot.innerConeAngle!==void 0?ht.spot.innerConeAngle:0,ht.spot.outerConeAngle=ht.spot.outerConeAngle!==void 0?ht.spot.outerConeAngle:Math.PI/4,mt.angle=ht.spot.outerConeAngle,mt.penumbra=1-ht.spot.innerConeAngle/ht.spot.outerConeAngle,mt.target.position.set(0,0,-1),mt.add(mt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ht.type)}return mt.position.set(0,0,0),mt.decay=2,ht.intensity!==void 0&&(mt.intensity=ht.intensity),mt.name=rt.createUniqueName(ht.name||"light_"+tt),st=Promise.resolve(mt),rt.cache.add(at,st),st}createNodeAttachment(tt){const rt=this,at=this.parser,ot=at.json.nodes[tt],ut=(ot.extensions&&ot.extensions[this.name]||{}).light;return ut===void 0?null:this._loadLight(ut).then(function(ht){return at._getNodeRef(rt.cache,ut,ht)})}}class GLTFMaterialsUnlitExtension$1{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(tt,rt,at){const st=[];tt.color=new Color(1,1,1),tt.opacity=1;const ot=rt.pbrMetallicRoughness;if(ot){if(Array.isArray(ot.baseColorFactor)){const lt=ot.baseColorFactor;tt.color.fromArray(lt),tt.opacity=lt[3]}ot.baseColorTexture!==void 0&&st.push(at.assignTexture(tt,"map",ot.baseColorTexture,sRGBEncoding))}return Promise.all(st)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(tt,rt){const st=this.parser.json.materials[tt];if(!st.extensions||!st.extensions[this.name])return Promise.resolve();const ot=st.extensions[this.name].emissiveStrength;return ot!==void 0&&(rt.emissiveIntensity=ot),Promise.resolve()}}class GLTFMaterialsClearcoatExtension$1{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(tt){const at=this.parser.json.materials[tt];return!at.extensions||!at.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(tt,rt){const at=this.parser,st=at.json.materials[tt];if(!st.extensions||!st.extensions[this.name])return Promise.resolve();const ot=[],lt=st.extensions[this.name];if(lt.clearcoatFactor!==void 0&&(rt.clearcoat=lt.clearcoatFactor),lt.clearcoatTexture!==void 0&&ot.push(at.assignTexture(rt,"clearcoatMap",lt.clearcoatTexture)),lt.clearcoatRoughnessFactor!==void 0&&(rt.clearcoatRoughness=lt.clearcoatRoughnessFactor),lt.clearcoatRoughnessTexture!==void 0&&ot.push(at.assignTexture(rt,"clearcoatRoughnessMap",lt.clearcoatRoughnessTexture)),lt.clearcoatNormalTexture!==void 0&&(ot.push(at.assignTexture(rt,"clearcoatNormalMap",lt.clearcoatNormalTexture)),lt.clearcoatNormalTexture.scale!==void 0)){const ut=lt.clearcoatNormalTexture.scale;rt.clearcoatNormalScale=new Vector2(ut,ut)}return Promise.all(ot)}}class GLTFMaterialsIridescenceExtension$1{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(tt){const at=this.parser.json.materials[tt];return!at.extensions||!at.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(tt,rt){const at=this.parser,st=at.json.materials[tt];if(!st.extensions||!st.extensions[this.name])return Promise.resolve();const ot=[],lt=st.extensions[this.name];return lt.iridescenceFactor!==void 0&&(rt.iridescence=lt.iridescenceFactor),lt.iridescenceTexture!==void 0&&ot.push(at.assignTexture(rt,"iridescenceMap",lt.iridescenceTexture)),lt.iridescenceIor!==void 0&&(rt.iridescenceIOR=lt.iridescenceIor),rt.iridescenceThicknessRange===void 0&&(rt.iridescenceThicknessRange=[100,400]),lt.iridescenceThicknessMinimum!==void 0&&(rt.iridescenceThicknessRange[0]=lt.iridescenceThicknessMinimum),lt.iridescenceThicknessMaximum!==void 0&&(rt.iridescenceThicknessRange[1]=lt.iridescenceThicknessMaximum),lt.iridescenceThicknessTexture!==void 0&&ot.push(at.assignTexture(rt,"iridescenceThicknessMap",lt.iridescenceThicknessTexture)),Promise.all(ot)}}class GLTFMaterialsSheenExtension{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(tt){const at=this.parser.json.materials[tt];return!at.extensions||!at.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(tt,rt){const at=this.parser,st=at.json.materials[tt];if(!st.extensions||!st.extensions[this.name])return Promise.resolve();const ot=[];rt.sheenColor=new Color(0,0,0),rt.sheenRoughness=0,rt.sheen=1;const lt=st.extensions[this.name];return lt.sheenColorFactor!==void 0&&rt.sheenColor.fromArray(lt.sheenColorFactor),lt.sheenRoughnessFactor!==void 0&&(rt.sheenRoughness=lt.sheenRoughnessFactor),lt.sheenColorTexture!==void 0&&ot.push(at.assignTexture(rt,"sheenColorMap",lt.sheenColorTexture,sRGBEncoding)),lt.sheenRoughnessTexture!==void 0&&ot.push(at.assignTexture(rt,"sheenRoughnessMap",lt.sheenRoughnessTexture)),Promise.all(ot)}}class GLTFMaterialsTransmissionExtension$1{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(tt){const at=this.parser.json.materials[tt];return!at.extensions||!at.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(tt,rt){const at=this.parser,st=at.json.materials[tt];if(!st.extensions||!st.extensions[this.name])return Promise.resolve();const ot=[],lt=st.extensions[this.name];return lt.transmissionFactor!==void 0&&(rt.transmission=lt.transmissionFactor),lt.transmissionTexture!==void 0&&ot.push(at.assignTexture(rt,"transmissionMap",lt.transmissionTexture)),Promise.all(ot)}}class GLTFMaterialsVolumeExtension$1{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(tt){const at=this.parser.json.materials[tt];return!at.extensions||!at.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(tt,rt){const at=this.parser,st=at.json.materials[tt];if(!st.extensions||!st.extensions[this.name])return Promise.resolve();const ot=[],lt=st.extensions[this.name];rt.thickness=lt.thicknessFactor!==void 0?lt.thicknessFactor:0,lt.thicknessTexture!==void 0&&ot.push(at.assignTexture(rt,"thicknessMap",lt.thicknessTexture)),rt.attenuationDistance=lt.attenuationDistance||1/0;const ut=lt.attenuationColor||[1,1,1];return rt.attenuationColor=new Color(ut[0],ut[1],ut[2]),Promise.all(ot)}}class GLTFMaterialsIorExtension{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(tt){const at=this.parser.json.materials[tt];return!at.extensions||!at.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(tt,rt){const st=this.parser.json.materials[tt];if(!st.extensions||!st.extensions[this.name])return Promise.resolve();const ot=st.extensions[this.name];return rt.ior=ot.ior!==void 0?ot.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(tt){const at=this.parser.json.materials[tt];return!at.extensions||!at.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(tt,rt){const at=this.parser,st=at.json.materials[tt];if(!st.extensions||!st.extensions[this.name])return Promise.resolve();const ot=[],lt=st.extensions[this.name];rt.specularIntensity=lt.specularFactor!==void 0?lt.specularFactor:1,lt.specularTexture!==void 0&&ot.push(at.assignTexture(rt,"specularIntensityMap",lt.specularTexture));const ut=lt.specularColorFactor||[1,1,1];return rt.specularColor=new Color(ut[0],ut[1],ut[2]),lt.specularColorTexture!==void 0&&ot.push(at.assignTexture(rt,"specularColorMap",lt.specularColorTexture,sRGBEncoding)),Promise.all(ot)}}class GLTFTextureBasisUExtension{constructor(tt){this.parser=tt,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(tt){const rt=this.parser,at=rt.json,st=at.textures[tt];if(!st.extensions||!st.extensions[this.name])return null;const ot=st.extensions[this.name],lt=rt.options.ktx2Loader;if(!lt){if(at.extensionsRequired&&at.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return rt.loadTextureImage(tt,ot.source,lt)}}class GLTFTextureWebPExtension{constructor(tt){this.parser=tt,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(tt){const rt=this.name,at=this.parser,st=at.json,ot=st.textures[tt];if(!ot.extensions||!ot.extensions[rt])return null;const lt=ot.extensions[rt],ut=st.images[lt.source];let ht=at.textureLoader;if(ut.uri){const mt=at.options.manager.getHandler(ut.uri);mt!==null&&(ht=mt)}return this.detectSupport().then(function(mt){if(mt)return at.loadTextureImage(tt,lt.source,ht);if(st.extensionsRequired&&st.extensionsRequired.indexOf(rt)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return at.loadTexture(tt)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(tt){const rt=new Image;rt.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",rt.onload=rt.onerror=function(){tt(rt.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(tt){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=tt}loadBufferView(tt){const rt=this.parser.json,at=rt.bufferViews[tt];if(at.extensions&&at.extensions[this.name]){const st=at.extensions[this.name],ot=this.parser.getDependency("buffer",st.buffer),lt=this.parser.options.meshoptDecoder;if(!lt||!lt.supported){if(rt.extensionsRequired&&rt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return ot.then(function(ut){const ht=st.byteOffset||0,mt=st.byteLength||0,bt=st.count,vt=st.byteStride,At=new Uint8Array(ut,ht,mt);return lt.decodeGltfBufferAsync?lt.decodeGltfBufferAsync(bt,vt,At,st.mode,st.filter).then(function(xt){return xt.buffer}):lt.ready.then(function(){const xt=new ArrayBuffer(bt*vt);return lt.decodeGltfBuffer(new Uint8Array(xt),bt,vt,At,st.mode,st.filter),xt})})}else return null}}class GLTFMeshGpuInstancing{constructor(tt){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=tt}createNodeMesh(tt){const rt=this.parser.json,at=rt.nodes[tt];if(!at.extensions||!at.extensions[this.name]||at.mesh===void 0)return null;const st=rt.meshes[at.mesh];for(const mt of st.primitives)if(mt.mode!==WEBGL_CONSTANTS$1.TRIANGLES&&mt.mode!==WEBGL_CONSTANTS$1.TRIANGLE_STRIP&&mt.mode!==WEBGL_CONSTANTS$1.TRIANGLE_FAN&&mt.mode!==void 0)return null;const lt=at.extensions[this.name].attributes,ut=[],ht={};for(const mt in lt)ut.push(this.parser.getDependency("accessor",lt[mt]).then(bt=>(ht[mt]=bt,ht[mt])));return ut.length<1?null:(ut.push(this.parser.createNodeMesh(tt)),Promise.all(ut).then(mt=>{const bt=mt.pop(),vt=bt.isGroup?bt.children:[bt],At=mt[0].count,xt=[];for(const Et of vt){const Tt=new Matrix4,wt=new Vector3,Ct=new Quaternion,It=new Vector3(1,1,1),St=new InstancedMesh(Et.geometry,Et.material,At);for(let Rt=0;Rt<At;Rt++)ht.TRANSLATION&&wt.fromBufferAttribute(ht.TRANSLATION,Rt),ht.ROTATION&&Ct.fromBufferAttribute(ht.ROTATION,Rt),ht.SCALE&&It.fromBufferAttribute(ht.SCALE,Rt),St.setMatrixAt(Rt,Tt.compose(wt,Ct,It));for(const Rt in ht)Rt!=="TRANSLATION"&&Rt!=="ROTATION"&&Rt!=="SCALE"&&Et.geometry.setAttribute(Rt,ht[Rt]);Object3D.prototype.copy.call(St,Et),St.frustumCulled=!1,this.parser.assignFinalMaterial(St),xt.push(St)}return bt.isGroup?(bt.clear(),bt.add(...xt),bt):xt[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(tt){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const rt=new DataView(tt,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(tt.slice(0,4))),version:rt.getUint32(4,!0),length:rt.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const at=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,st=new DataView(tt,BINARY_EXTENSION_HEADER_LENGTH);let ot=0;for(;ot<at;){const lt=st.getUint32(ot,!0);ot+=4;const ut=st.getUint32(ot,!0);if(ot+=4,ut===BINARY_EXTENSION_CHUNK_TYPES.JSON){const ht=new Uint8Array(tt,BINARY_EXTENSION_HEADER_LENGTH+ot,lt);this.content=LoaderUtils.decodeText(ht)}else if(ut===BINARY_EXTENSION_CHUNK_TYPES.BIN){const ht=BINARY_EXTENSION_HEADER_LENGTH+ot;this.body=tt.slice(ht,ht+lt)}ot+=lt}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(tt,rt){if(!rt)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=tt,this.dracoLoader=rt,this.dracoLoader.preload()}decodePrimitive(tt,rt){const at=this.json,st=this.dracoLoader,ot=tt.extensions[this.name].bufferView,lt=tt.extensions[this.name].attributes,ut={},ht={},mt={};for(const bt in lt){const vt=ATTRIBUTES[bt]||bt.toLowerCase();ut[vt]=lt[bt]}for(const bt in tt.attributes){const vt=ATTRIBUTES[bt]||bt.toLowerCase();if(lt[bt]!==void 0){const At=at.accessors[tt.attributes[bt]],xt=WEBGL_COMPONENT_TYPES[At.componentType];mt[vt]=xt.name,ht[vt]=At.normalized===!0}}return rt.getDependency("bufferView",ot).then(function(bt){return new Promise(function(vt){st.decodeDracoFile(bt,function(At){for(const xt in At.attributes){const Et=At.attributes[xt],Tt=ht[xt];Tt!==void 0&&(Et.normalized=Tt)}vt(At)},ut,mt)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(tt,rt){return rt.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),rt.offset===void 0&&rt.rotation===void 0&&rt.scale===void 0||(tt=tt.clone(),rt.offset!==void 0&&tt.offset.fromArray(rt.offset),rt.rotation!==void 0&&(tt.rotation=rt.rotation),rt.scale!==void 0&&tt.repeat.fromArray(rt.scale),tt.needsUpdate=!0),tt}}class GLTFMeshStandardSGMaterial extends MeshStandardMaterial{constructor(tt){super(),this.isGLTFSpecularGlossinessMaterial=!0;const rt=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),at=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),st=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),ot=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),lt=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),ut={specular:{value:new Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=ut,this.onBeforeCompile=function(ht){for(const mt in ut)ht.uniforms[mt]=ut[mt];ht.fragmentShader=ht.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",rt).replace("#include <metalnessmap_pars_fragment>",at).replace("#include <roughnessmap_fragment>",st).replace("#include <metalnessmap_fragment>",ot).replace("#include <lights_physical_fragment>",lt)},Object.defineProperties(this,{specular:{get:function(){return ut.specular.value},set:function(ht){ut.specular.value=ht}},specularMap:{get:function(){return ut.specularMap.value},set:function(ht){ut.specularMap.value=ht,ht?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return ut.glossiness.value},set:function(ht){ut.glossiness.value=ht}},glossinessMap:{get:function(){return ut.glossinessMap.value},set:function(ht){ut.glossinessMap.value=ht,ht?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(tt)}copy(tt){return super.copy(tt),this.specularMap=tt.specularMap,this.specular.copy(tt.specular),this.glossinessMap=tt.glossinessMap,this.glossiness=tt.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class GLTFMaterialsPbrSpecularGlossinessExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return GLTFMeshStandardSGMaterial}extendParams(tt,rt,at){const st=rt.extensions[this.name];tt.color=new Color(1,1,1),tt.opacity=1;const ot=[];if(Array.isArray(st.diffuseFactor)){const lt=st.diffuseFactor;tt.color.fromArray(lt),tt.opacity=lt[3]}if(st.diffuseTexture!==void 0&&ot.push(at.assignTexture(tt,"map",st.diffuseTexture,sRGBEncoding)),tt.emissive=new Color(0,0,0),tt.glossiness=st.glossinessFactor!==void 0?st.glossinessFactor:1,tt.specular=new Color(1,1,1),Array.isArray(st.specularFactor)&&tt.specular.fromArray(st.specularFactor),st.specularGlossinessTexture!==void 0){const lt=st.specularGlossinessTexture;ot.push(at.assignTexture(tt,"glossinessMap",lt)),ot.push(at.assignTexture(tt,"specularMap",lt,sRGBEncoding))}return Promise.all(ot)}createMaterial(tt){const rt=new GLTFMeshStandardSGMaterial(tt);return rt.fog=!0,rt.color=tt.color,rt.map=tt.map===void 0?null:tt.map,rt.lightMap=null,rt.lightMapIntensity=1,rt.aoMap=tt.aoMap===void 0?null:tt.aoMap,rt.aoMapIntensity=1,rt.emissive=tt.emissive,rt.emissiveIntensity=tt.emissiveIntensity===void 0?1:tt.emissiveIntensity,rt.emissiveMap=tt.emissiveMap===void 0?null:tt.emissiveMap,rt.bumpMap=tt.bumpMap===void 0?null:tt.bumpMap,rt.bumpScale=1,rt.normalMap=tt.normalMap===void 0?null:tt.normalMap,rt.normalMapType=TangentSpaceNormalMap,tt.normalScale&&(rt.normalScale=tt.normalScale),rt.displacementMap=null,rt.displacementScale=1,rt.displacementBias=0,rt.specularMap=tt.specularMap===void 0?null:tt.specularMap,rt.specular=tt.specular,rt.glossinessMap=tt.glossinessMap===void 0?null:tt.glossinessMap,rt.glossiness=tt.glossiness,rt.alphaMap=null,rt.envMap=tt.envMap===void 0?null:tt.envMap,rt.envMapIntensity=1,rt}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(tt,rt,at,st){super(tt,rt,at,st)}copySampleValue_(tt){const rt=this.resultBuffer,at=this.sampleValues,st=this.valueSize,ot=tt*st*3+st;for(let lt=0;lt!==st;lt++)rt[lt]=at[ot+lt];return rt}interpolate_(tt,rt,at,st){const ot=this.resultBuffer,lt=this.sampleValues,ut=this.valueSize,ht=ut*2,mt=ut*3,bt=st-rt,vt=(at-rt)/bt,At=vt*vt,xt=At*vt,Et=tt*mt,Tt=Et-mt,wt=-2*xt+3*At,Ct=xt-At,It=1-wt,St=Ct-At+vt;for(let Rt=0;Rt!==ut;Rt++){const Dt=lt[Tt+Rt+ut],Wt=lt[Tt+Rt+ht]*bt,qt=lt[Et+Rt+ut],Vt=lt[Et+Rt]*bt;ot[Rt]=It*Dt+St*Wt+wt*qt+Ct*Vt}return ot}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(tt,rt,at,st){const ot=super.interpolate_(tt,rt,at,st);return _q.fromArray(ot).normalize().toArray(ot),ot}}const WEBGL_CONSTANTS$1={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES$1={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(it){return it.DefaultMaterial===void 0&&(it.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),it.DefaultMaterial}function addUnknownExtensionsToUserData(it,tt,rt){for(const at in rt.extensions)it[at]===void 0&&(tt.userData.gltfExtensions=tt.userData.gltfExtensions||{},tt.userData.gltfExtensions[at]=rt.extensions[at])}function assignExtrasToUserData(it,tt){tt.extras!==void 0&&(typeof tt.extras=="object"?Object.assign(it.userData,tt.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+tt.extras))}function addMorphTargets(it,tt,rt){let at=!1,st=!1,ot=!1;for(let mt=0,bt=tt.length;mt<bt;mt++){const vt=tt[mt];if(vt.POSITION!==void 0&&(at=!0),vt.NORMAL!==void 0&&(st=!0),vt.COLOR_0!==void 0&&(ot=!0),at&&st&&ot)break}if(!at&&!st&&!ot)return Promise.resolve(it);const lt=[],ut=[],ht=[];for(let mt=0,bt=tt.length;mt<bt;mt++){const vt=tt[mt];if(at){const At=vt.POSITION!==void 0?rt.getDependency("accessor",vt.POSITION):it.attributes.position;lt.push(At)}if(st){const At=vt.NORMAL!==void 0?rt.getDependency("accessor",vt.NORMAL):it.attributes.normal;ut.push(At)}if(ot){const At=vt.COLOR_0!==void 0?rt.getDependency("accessor",vt.COLOR_0):it.attributes.color;ht.push(At)}}return Promise.all([Promise.all(lt),Promise.all(ut),Promise.all(ht)]).then(function(mt){const bt=mt[0],vt=mt[1],At=mt[2];return at&&(it.morphAttributes.position=bt),st&&(it.morphAttributes.normal=vt),ot&&(it.morphAttributes.color=At),it.morphTargetsRelative=!0,it})}function updateMorphTargets(it,tt){if(it.updateMorphTargets(),tt.weights!==void 0)for(let rt=0,at=tt.weights.length;rt<at;rt++)it.morphTargetInfluences[rt]=tt.weights[rt];if(tt.extras&&Array.isArray(tt.extras.targetNames)){const rt=tt.extras.targetNames;if(it.morphTargetInfluences.length===rt.length){it.morphTargetDictionary={};for(let at=0,st=rt.length;at<st;at++)it.morphTargetDictionary[rt[at]]=at}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(it){const tt=it.extensions&&it.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let rt;return tt?rt="draco:"+tt.bufferView+":"+tt.indices+":"+createAttributesKey(tt.attributes):rt=it.indices+":"+createAttributesKey(it.attributes)+":"+it.mode,rt}function createAttributesKey(it){let tt="";const rt=Object.keys(it).sort();for(let at=0,st=rt.length;at<st;at++)tt+=rt[at]+":"+it[rt[at]]+";";return tt}function getNormalizedComponentScale(it){switch(it){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(it){return it.search(/\.jpe?g($|\?)/i)>0||it.search(/^data\:image\/jpeg/)===0?"image/jpeg":it.search(/\.webp($|\?)/i)>0||it.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class GLTFParser{constructor(tt={},rt={}){this.json=tt,this.extensions={},this.plugins={},this.options=rt,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const at=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,st=navigator.userAgent.indexOf("Firefox")>-1,ot=st?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||at||st&&ot<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(tt){this.extensions=tt}setPlugins(tt){this.plugins=tt}parse(tt,rt){const at=this,st=this.json,ot=this.extensions;this.cache.removeAll(),this._invokeAll(function(lt){return lt._markDefs&&lt._markDefs()}),Promise.all(this._invokeAll(function(lt){return lt.beforeRoot&&lt.beforeRoot()})).then(function(){return Promise.all([at.getDependencies("scene"),at.getDependencies("animation"),at.getDependencies("camera")])}).then(function(lt){const ut={scene:lt[0][st.scene||0],scenes:lt[0],animations:lt[1],cameras:lt[2],asset:st.asset,parser:at,userData:{}};addUnknownExtensionsToUserData(ot,ut,st),assignExtrasToUserData(ut,st),Promise.all(at._invokeAll(function(ht){return ht.afterRoot&&ht.afterRoot(ut)})).then(function(){tt(ut)})}).catch(rt)}_markDefs(){const tt=this.json.nodes||[],rt=this.json.skins||[],at=this.json.meshes||[];for(let st=0,ot=rt.length;st<ot;st++){const lt=rt[st].joints;for(let ut=0,ht=lt.length;ut<ht;ut++)tt[lt[ut]].isBone=!0}for(let st=0,ot=tt.length;st<ot;st++){const lt=tt[st];lt.mesh!==void 0&&(this._addNodeRef(this.meshCache,lt.mesh),lt.skin!==void 0&&(at[lt.mesh].isSkinnedMesh=!0)),lt.camera!==void 0&&this._addNodeRef(this.cameraCache,lt.camera)}}_addNodeRef(tt,rt){rt!==void 0&&(tt.refs[rt]===void 0&&(tt.refs[rt]=tt.uses[rt]=0),tt.refs[rt]++)}_getNodeRef(tt,rt,at){if(tt.refs[rt]<=1)return at;const st=at.clone(),ot=(lt,ut)=>{const ht=this.associations.get(lt);ht!=null&&this.associations.set(ut,ht);for(const[mt,bt]of lt.children.entries())ot(bt,ut.children[mt])};return ot(at,st),st.name+="_instance_"+tt.uses[rt]++,st}_invokeOne(tt){const rt=Object.values(this.plugins);rt.push(this);for(let at=0;at<rt.length;at++){const st=tt(rt[at]);if(st)return st}return null}_invokeAll(tt){const rt=Object.values(this.plugins);rt.unshift(this);const at=[];for(let st=0;st<rt.length;st++){const ot=tt(rt[st]);ot&&at.push(ot)}return at}getDependency(tt,rt){const at=tt+":"+rt;let st=this.cache.get(at);if(!st){switch(tt){case"scene":st=this.loadScene(rt);break;case"node":st=this.loadNode(rt);break;case"mesh":st=this._invokeOne(function(ot){return ot.loadMesh&&ot.loadMesh(rt)});break;case"accessor":st=this.loadAccessor(rt);break;case"bufferView":st=this._invokeOne(function(ot){return ot.loadBufferView&&ot.loadBufferView(rt)});break;case"buffer":st=this.loadBuffer(rt);break;case"material":st=this._invokeOne(function(ot){return ot.loadMaterial&&ot.loadMaterial(rt)});break;case"texture":st=this._invokeOne(function(ot){return ot.loadTexture&&ot.loadTexture(rt)});break;case"skin":st=this.loadSkin(rt);break;case"animation":st=this._invokeOne(function(ot){return ot.loadAnimation&&ot.loadAnimation(rt)});break;case"camera":st=this.loadCamera(rt);break;default:throw new Error("Unknown type: "+tt)}this.cache.add(at,st)}return st}getDependencies(tt){let rt=this.cache.get(tt);if(!rt){const at=this,st=this.json[tt+(tt==="mesh"?"es":"s")]||[];rt=Promise.all(st.map(function(ot,lt){return at.getDependency(tt,lt)})),this.cache.add(tt,rt)}return rt}loadBuffer(tt){const rt=this.json.buffers[tt],at=this.fileLoader;if(rt.type&&rt.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+rt.type+" buffer type is not supported.");if(rt.uri===void 0&&tt===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const st=this.options;return new Promise(function(ot,lt){at.load(LoaderUtils.resolveURL(rt.uri,st.path),ot,void 0,function(){lt(new Error('THREE.GLTFLoader: Failed to load buffer "'+rt.uri+'".'))})})}loadBufferView(tt){const rt=this.json.bufferViews[tt];return this.getDependency("buffer",rt.buffer).then(function(at){const st=rt.byteLength||0,ot=rt.byteOffset||0;return at.slice(ot,ot+st)})}loadAccessor(tt){const rt=this,at=this.json,st=this.json.accessors[tt];if(st.bufferView===void 0&&st.sparse===void 0)return Promise.resolve(null);const ot=[];return st.bufferView!==void 0?ot.push(this.getDependency("bufferView",st.bufferView)):ot.push(null),st.sparse!==void 0&&(ot.push(this.getDependency("bufferView",st.sparse.indices.bufferView)),ot.push(this.getDependency("bufferView",st.sparse.values.bufferView))),Promise.all(ot).then(function(lt){const ut=lt[0],ht=WEBGL_TYPE_SIZES[st.type],mt=WEBGL_COMPONENT_TYPES[st.componentType],bt=mt.BYTES_PER_ELEMENT,vt=bt*ht,At=st.byteOffset||0,xt=st.bufferView!==void 0?at.bufferViews[st.bufferView].byteStride:void 0,Et=st.normalized===!0;let Tt,wt;if(xt&&xt!==vt){const Ct=Math.floor(At/xt),It="InterleavedBuffer:"+st.bufferView+":"+st.componentType+":"+Ct+":"+st.count;let St=rt.cache.get(It);St||(Tt=new mt(ut,Ct*xt,st.count*xt/bt),St=new InterleavedBuffer(Tt,xt/bt),rt.cache.add(It,St)),wt=new InterleavedBufferAttribute(St,ht,At%xt/bt,Et)}else ut===null?Tt=new mt(st.count*ht):Tt=new mt(ut,At,st.count*ht),wt=new BufferAttribute(Tt,ht,Et);if(st.sparse!==void 0){const Ct=WEBGL_TYPE_SIZES.SCALAR,It=WEBGL_COMPONENT_TYPES[st.sparse.indices.componentType],St=st.sparse.indices.byteOffset||0,Rt=st.sparse.values.byteOffset||0,Dt=new It(lt[1],St,st.sparse.count*Ct),Wt=new mt(lt[2],Rt,st.sparse.count*ht);ut!==null&&(wt=new BufferAttribute(wt.array.slice(),wt.itemSize,wt.normalized));for(let qt=0,Vt=Dt.length;qt<Vt;qt++){const Yt=Dt[qt];if(wt.setX(Yt,Wt[qt*ht]),ht>=2&&wt.setY(Yt,Wt[qt*ht+1]),ht>=3&&wt.setZ(Yt,Wt[qt*ht+2]),ht>=4&&wt.setW(Yt,Wt[qt*ht+3]),ht>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return wt})}loadTexture(tt){const rt=this.json,at=this.options,ot=rt.textures[tt].source,lt=rt.images[ot];let ut=this.textureLoader;if(lt.uri){const ht=at.manager.getHandler(lt.uri);ht!==null&&(ut=ht)}return this.loadTextureImage(tt,ot,ut)}loadTextureImage(tt,rt,at){const st=this,ot=this.json,lt=ot.textures[tt],ut=ot.images[rt],ht=(ut.uri||ut.bufferView)+":"+lt.sampler;if(this.textureCache[ht])return this.textureCache[ht];const mt=this.loadImageSource(rt,at).then(function(bt){bt.flipY=!1,bt.name=lt.name||ut.name||"";const At=(ot.samplers||{})[lt.sampler]||{};return bt.magFilter=WEBGL_FILTERS[At.magFilter]||LinearFilter,bt.minFilter=WEBGL_FILTERS[At.minFilter]||LinearMipmapLinearFilter,bt.wrapS=WEBGL_WRAPPINGS[At.wrapS]||RepeatWrapping,bt.wrapT=WEBGL_WRAPPINGS[At.wrapT]||RepeatWrapping,st.associations.set(bt,{textures:tt}),bt}).catch(function(){return null});return this.textureCache[ht]=mt,mt}loadImageSource(tt,rt){const at=this,st=this.json,ot=this.options;if(this.sourceCache[tt]!==void 0)return this.sourceCache[tt].then(vt=>vt.clone());const lt=st.images[tt],ut=self.URL||self.webkitURL;let ht=lt.uri||"",mt=!1;if(lt.bufferView!==void 0)ht=at.getDependency("bufferView",lt.bufferView).then(function(vt){mt=!0;const At=new Blob([vt],{type:lt.mimeType});return ht=ut.createObjectURL(At),ht});else if(lt.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+tt+" is missing URI and bufferView");const bt=Promise.resolve(ht).then(function(vt){return new Promise(function(At,xt){let Et=At;rt.isImageBitmapLoader===!0&&(Et=function(Tt){const wt=new Texture$1(Tt);wt.needsUpdate=!0,At(wt)}),rt.load(LoaderUtils.resolveURL(vt,ot.path),Et,void 0,xt)})}).then(function(vt){return mt===!0&&ut.revokeObjectURL(ht),vt.userData.mimeType=lt.mimeType||getImageURIMimeType(lt.uri),vt}).catch(function(vt){throw console.error("THREE.GLTFLoader: Couldn't load texture",ht),vt});return this.sourceCache[tt]=bt,bt}assignTexture(tt,rt,at,st){const ot=this;return this.getDependency("texture",at.index).then(function(lt){if(at.texCoord!==void 0&&at.texCoord!=0&&!(rt==="aoMap"&&at.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+at.texCoord+" for texture "+rt+" not yet supported."),ot.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const ut=at.extensions!==void 0?at.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(ut){const ht=ot.associations.get(lt);lt=ot.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(lt,ut),ot.associations.set(lt,ht)}}return st!==void 0&&(lt.encoding=st),tt[rt]=lt,lt})}assignFinalMaterial(tt){const rt=tt.geometry;let at=tt.material;const st=rt.attributes.tangent===void 0,ot=rt.attributes.color!==void 0,lt=rt.attributes.normal===void 0;if(tt.isPoints){const ut="PointsMaterial:"+at.uuid;let ht=this.cache.get(ut);ht||(ht=new PointsMaterial,Material$1.prototype.copy.call(ht,at),ht.color.copy(at.color),ht.map=at.map,ht.sizeAttenuation=!1,this.cache.add(ut,ht)),at=ht}else if(tt.isLine){const ut="LineBasicMaterial:"+at.uuid;let ht=this.cache.get(ut);ht||(ht=new LineBasicMaterial,Material$1.prototype.copy.call(ht,at),ht.color.copy(at.color),this.cache.add(ut,ht)),at=ht}if(st||ot||lt){let ut="ClonedMaterial:"+at.uuid+":";at.isGLTFSpecularGlossinessMaterial&&(ut+="specular-glossiness:"),st&&(ut+="derivative-tangents:"),ot&&(ut+="vertex-colors:"),lt&&(ut+="flat-shading:");let ht=this.cache.get(ut);ht||(ht=at.clone(),ot&&(ht.vertexColors=!0),lt&&(ht.flatShading=!0),st&&(ht.normalScale&&(ht.normalScale.y*=-1),ht.clearcoatNormalScale&&(ht.clearcoatNormalScale.y*=-1)),this.cache.add(ut,ht),this.associations.set(ht,this.associations.get(at))),at=ht}at.aoMap&&rt.attributes.uv2===void 0&&rt.attributes.uv!==void 0&&rt.setAttribute("uv2",rt.attributes.uv),tt.material=at}getMaterialType(){return MeshStandardMaterial}loadMaterial(tt){const rt=this,at=this.json,st=this.extensions,ot=at.materials[tt];let lt;const ut={},ht=ot.extensions||{},mt=[];if(ht[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const vt=st[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];lt=vt.getMaterialType(),mt.push(vt.extendParams(ut,ot,rt))}else if(ht[EXTENSIONS.KHR_MATERIALS_UNLIT]){const vt=st[EXTENSIONS.KHR_MATERIALS_UNLIT];lt=vt.getMaterialType(),mt.push(vt.extendParams(ut,ot,rt))}else{const vt=ot.pbrMetallicRoughness||{};if(ut.color=new Color(1,1,1),ut.opacity=1,Array.isArray(vt.baseColorFactor)){const At=vt.baseColorFactor;ut.color.fromArray(At),ut.opacity=At[3]}vt.baseColorTexture!==void 0&&mt.push(rt.assignTexture(ut,"map",vt.baseColorTexture,sRGBEncoding)),ut.metalness=vt.metallicFactor!==void 0?vt.metallicFactor:1,ut.roughness=vt.roughnessFactor!==void 0?vt.roughnessFactor:1,vt.metallicRoughnessTexture!==void 0&&(mt.push(rt.assignTexture(ut,"metalnessMap",vt.metallicRoughnessTexture)),mt.push(rt.assignTexture(ut,"roughnessMap",vt.metallicRoughnessTexture))),lt=this._invokeOne(function(At){return At.getMaterialType&&At.getMaterialType(tt)}),mt.push(Promise.all(this._invokeAll(function(At){return At.extendMaterialParams&&At.extendMaterialParams(tt,ut)})))}ot.doubleSided===!0&&(ut.side=DoubleSide);const bt=ot.alphaMode||ALPHA_MODES.OPAQUE;if(bt===ALPHA_MODES.BLEND?(ut.transparent=!0,ut.depthWrite=!1):(ut.transparent=!1,bt===ALPHA_MODES.MASK&&(ut.alphaTest=ot.alphaCutoff!==void 0?ot.alphaCutoff:.5)),ot.normalTexture!==void 0&&lt!==MeshBasicMaterial&&(mt.push(rt.assignTexture(ut,"normalMap",ot.normalTexture)),ut.normalScale=new Vector2(1,1),ot.normalTexture.scale!==void 0)){const vt=ot.normalTexture.scale;ut.normalScale.set(vt,vt)}return ot.occlusionTexture!==void 0&&lt!==MeshBasicMaterial&&(mt.push(rt.assignTexture(ut,"aoMap",ot.occlusionTexture)),ot.occlusionTexture.strength!==void 0&&(ut.aoMapIntensity=ot.occlusionTexture.strength)),ot.emissiveFactor!==void 0&&lt!==MeshBasicMaterial&&(ut.emissive=new Color().fromArray(ot.emissiveFactor)),ot.emissiveTexture!==void 0&&lt!==MeshBasicMaterial&&mt.push(rt.assignTexture(ut,"emissiveMap",ot.emissiveTexture,sRGBEncoding)),Promise.all(mt).then(function(){let vt;return lt===GLTFMeshStandardSGMaterial?vt=st[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(ut):vt=new lt(ut),ot.name&&(vt.name=ot.name),assignExtrasToUserData(vt,ot),rt.associations.set(vt,{materials:tt}),ot.extensions&&addUnknownExtensionsToUserData(st,vt,ot),vt})}createUniqueName(tt){const rt=PropertyBinding.sanitizeNodeName(tt||"");let at=rt;for(let st=1;this.nodeNamesUsed[at];++st)at=rt+"_"+st;return this.nodeNamesUsed[at]=!0,at}loadGeometries(tt){const rt=this,at=this.extensions,st=this.primitiveCache;function ot(ut){return at[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(ut,rt).then(function(ht){return addPrimitiveAttributes(ht,ut,rt)})}const lt=[];for(let ut=0,ht=tt.length;ut<ht;ut++){const mt=tt[ut],bt=createPrimitiveKey(mt),vt=st[bt];if(vt)lt.push(vt.promise);else{let At;mt.extensions&&mt.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?At=ot(mt):At=addPrimitiveAttributes(new BufferGeometry,mt,rt),st[bt]={primitive:mt,promise:At},lt.push(At)}}return Promise.all(lt)}loadMesh(tt){const rt=this,at=this.json,st=this.extensions,ot=at.meshes[tt],lt=ot.primitives,ut=[];for(let ht=0,mt=lt.length;ht<mt;ht++){const bt=lt[ht].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",lt[ht].material);ut.push(bt)}return ut.push(rt.loadGeometries(lt)),Promise.all(ut).then(function(ht){const mt=ht.slice(0,ht.length-1),bt=ht[ht.length-1],vt=[];for(let xt=0,Et=bt.length;xt<Et;xt++){const Tt=bt[xt],wt=lt[xt];let Ct;const It=mt[xt];if(wt.mode===WEBGL_CONSTANTS$1.TRIANGLES||wt.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP||wt.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN||wt.mode===void 0)Ct=ot.isSkinnedMesh===!0?new SkinnedMesh(Tt,It):new Mesh(Tt,It),Ct.isSkinnedMesh===!0&&!Ct.geometry.attributes.skinWeight.normalized&&Ct.normalizeSkinWeights(),wt.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP?Ct.geometry=toTrianglesDrawMode(Ct.geometry,TriangleStripDrawMode):wt.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN&&(Ct.geometry=toTrianglesDrawMode(Ct.geometry,TriangleFanDrawMode));else if(wt.mode===WEBGL_CONSTANTS$1.LINES)Ct=new LineSegments(Tt,It);else if(wt.mode===WEBGL_CONSTANTS$1.LINE_STRIP)Ct=new Line(Tt,It);else if(wt.mode===WEBGL_CONSTANTS$1.LINE_LOOP)Ct=new LineLoop(Tt,It);else if(wt.mode===WEBGL_CONSTANTS$1.POINTS)Ct=new Points(Tt,It);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+wt.mode);Object.keys(Ct.geometry.morphAttributes).length>0&&updateMorphTargets(Ct,ot),Ct.name=rt.createUniqueName(ot.name||"mesh_"+tt),assignExtrasToUserData(Ct,ot),wt.extensions&&addUnknownExtensionsToUserData(st,Ct,wt),rt.assignFinalMaterial(Ct),vt.push(Ct)}for(let xt=0,Et=vt.length;xt<Et;xt++)rt.associations.set(vt[xt],{meshes:tt,primitives:xt});if(vt.length===1)return vt[0];const At=new Group;rt.associations.set(At,{meshes:tt});for(let xt=0,Et=vt.length;xt<Et;xt++)At.add(vt[xt]);return At})}loadCamera(tt){let rt;const at=this.json.cameras[tt],st=at[at.type];if(!st){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return at.type==="perspective"?rt=new PerspectiveCamera(MathUtils.radToDeg(st.yfov),st.aspectRatio||1,st.znear||1,st.zfar||2e6):at.type==="orthographic"&&(rt=new OrthographicCamera(-st.xmag,st.xmag,st.ymag,-st.ymag,st.znear,st.zfar)),at.name&&(rt.name=this.createUniqueName(at.name)),assignExtrasToUserData(rt,at),Promise.resolve(rt)}loadSkin(tt){const rt=this.json.skins[tt],at={joints:rt.joints};return rt.inverseBindMatrices===void 0?Promise.resolve(at):this.getDependency("accessor",rt.inverseBindMatrices).then(function(st){return at.inverseBindMatrices=st,at})}loadAnimation(tt){const at=this.json.animations[tt],st=[],ot=[],lt=[],ut=[],ht=[];for(let mt=0,bt=at.channels.length;mt<bt;mt++){const vt=at.channels[mt],At=at.samplers[vt.sampler],xt=vt.target,Et=xt.node,Tt=at.parameters!==void 0?at.parameters[At.input]:At.input,wt=at.parameters!==void 0?at.parameters[At.output]:At.output;st.push(this.getDependency("node",Et)),ot.push(this.getDependency("accessor",Tt)),lt.push(this.getDependency("accessor",wt)),ut.push(At),ht.push(xt)}return Promise.all([Promise.all(st),Promise.all(ot),Promise.all(lt),Promise.all(ut),Promise.all(ht)]).then(function(mt){const bt=mt[0],vt=mt[1],At=mt[2],xt=mt[3],Et=mt[4],Tt=[];for(let Ct=0,It=bt.length;Ct<It;Ct++){const St=bt[Ct],Rt=vt[Ct],Dt=At[Ct],Wt=xt[Ct],qt=Et[Ct];if(St===void 0)continue;St.updateMatrix();let Vt;switch(PATH_PROPERTIES$1[qt.path]){case PATH_PROPERTIES$1.weights:Vt=NumberKeyframeTrack;break;case PATH_PROPERTIES$1.rotation:Vt=QuaternionKeyframeTrack;break;case PATH_PROPERTIES$1.position:case PATH_PROPERTIES$1.scale:default:Vt=VectorKeyframeTrack;break}const Yt=St.name?St.name:St.uuid,jt=Wt.interpolation!==void 0?INTERPOLATION[Wt.interpolation]:InterpolateLinear,kt=[];PATH_PROPERTIES$1[qt.path]===PATH_PROPERTIES$1.weights?St.traverse(function(Nt){Nt.morphTargetInfluences&&kt.push(Nt.name?Nt.name:Nt.uuid)}):kt.push(Yt);let zt=Dt.array;if(Dt.normalized){const Nt=getNormalizedComponentScale(zt.constructor),Mt=new Float32Array(zt.length);for(let Lt=0,Ht=zt.length;Lt<Ht;Lt++)Mt[Lt]=zt[Lt]*Nt;zt=Mt}for(let Nt=0,Mt=kt.length;Nt<Mt;Nt++){const Lt=new Vt(kt[Nt]+"."+PATH_PROPERTIES$1[qt.path],Rt.array,zt,jt);Wt.interpolation==="CUBICSPLINE"&&(Lt.createInterpolant=function(Qt){const Ut=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new Ut(this.times,this.values,this.getValueSize()/3,Qt)},Lt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Tt.push(Lt)}}const wt=at.name?at.name:"animation_"+tt;return new AnimationClip(wt,void 0,Tt)})}createNodeMesh(tt){const rt=this.json,at=this,st=rt.nodes[tt];return st.mesh===void 0?null:at.getDependency("mesh",st.mesh).then(function(ot){const lt=at._getNodeRef(at.meshCache,st.mesh,ot);return st.weights!==void 0&&lt.traverse(function(ut){if(!!ut.isMesh)for(let ht=0,mt=st.weights.length;ht<mt;ht++)ut.morphTargetInfluences[ht]=st.weights[ht]}),lt})}loadNode(tt){const rt=this.json,at=this.extensions,st=this,ot=rt.nodes[tt],lt=ot.name?st.createUniqueName(ot.name):"";return function(){const ut=[],ht=st._invokeOne(function(mt){return mt.createNodeMesh&&mt.createNodeMesh(tt)});return ht&&ut.push(ht),ot.camera!==void 0&&ut.push(st.getDependency("camera",ot.camera).then(function(mt){return st._getNodeRef(st.cameraCache,ot.camera,mt)})),st._invokeAll(function(mt){return mt.createNodeAttachment&&mt.createNodeAttachment(tt)}).forEach(function(mt){ut.push(mt)}),Promise.all(ut)}().then(function(ut){let ht;if(ot.isBone===!0?ht=new Bone:ut.length>1?ht=new Group:ut.length===1?ht=ut[0]:ht=new Object3D,ht!==ut[0])for(let mt=0,bt=ut.length;mt<bt;mt++)ht.add(ut[mt]);if(ot.name&&(ht.userData.name=ot.name,ht.name=lt),assignExtrasToUserData(ht,ot),ot.extensions&&addUnknownExtensionsToUserData(at,ht,ot),ot.matrix!==void 0){const mt=new Matrix4;mt.fromArray(ot.matrix),ht.applyMatrix4(mt)}else ot.translation!==void 0&&ht.position.fromArray(ot.translation),ot.rotation!==void 0&&ht.quaternion.fromArray(ot.rotation),ot.scale!==void 0&&ht.scale.fromArray(ot.scale);return st.associations.has(ht)||st.associations.set(ht,{}),st.associations.get(ht).nodes=tt,ht})}loadScene(tt){const rt=this.json,at=this.extensions,st=this.json.scenes[tt],ot=this,lt=new Group;st.name&&(lt.name=ot.createUniqueName(st.name)),assignExtrasToUserData(lt,st),st.extensions&&addUnknownExtensionsToUserData(at,lt,st);const ut=st.nodes||[],ht=[];for(let mt=0,bt=ut.length;mt<bt;mt++)ht.push(buildNodeHierarchy(ut[mt],lt,rt,ot));return Promise.all(ht).then(function(){const mt=bt=>{const vt=new Map;for(const[At,xt]of ot.associations)(At instanceof Material$1||At instanceof Texture$1)&&vt.set(At,xt);return bt.traverse(At=>{const xt=ot.associations.get(At);xt!=null&&vt.set(At,xt)}),vt};return ot.associations=mt(lt),lt})}}function buildNodeHierarchy(it,tt,rt,at){const st=rt.nodes[it];return at.getDependency("node",it).then(function(ot){if(st.skin===void 0)return ot;let lt;return at.getDependency("skin",st.skin).then(function(ut){lt=ut;const ht=[];for(let mt=0,bt=lt.joints.length;mt<bt;mt++)ht.push(at.getDependency("node",lt.joints[mt]));return Promise.all(ht)}).then(function(ut){return ot.traverse(function(ht){if(!ht.isMesh)return;const mt=[],bt=[];for(let vt=0,At=ut.length;vt<At;vt++){const xt=ut[vt];if(xt){mt.push(xt);const Et=new Matrix4;lt.inverseBindMatrices!==void 0&&Et.fromArray(lt.inverseBindMatrices.array,vt*16),bt.push(Et)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',lt.joints[vt])}ht.bind(new Skeleton(mt,bt),ht.matrixWorld)}),ot})}).then(function(ot){tt.add(ot);const lt=[];if(st.children){const ut=st.children;for(let ht=0,mt=ut.length;ht<mt;ht++){const bt=ut[ht];lt.push(buildNodeHierarchy(bt,ot,rt,at))}}return Promise.all(lt)})}function computeBounds(it,tt,rt){const at=tt.attributes,st=new Box3;if(at.POSITION!==void 0){const ut=rt.json.accessors[at.POSITION],ht=ut.min,mt=ut.max;if(ht!==void 0&&mt!==void 0){if(st.set(new Vector3(ht[0],ht[1],ht[2]),new Vector3(mt[0],mt[1],mt[2])),ut.normalized){const bt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[ut.componentType]);st.min.multiplyScalar(bt),st.max.multiplyScalar(bt)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const ot=tt.targets;if(ot!==void 0){const ut=new Vector3,ht=new Vector3;for(let mt=0,bt=ot.length;mt<bt;mt++){const vt=ot[mt];if(vt.POSITION!==void 0){const At=rt.json.accessors[vt.POSITION],xt=At.min,Et=At.max;if(xt!==void 0&&Et!==void 0){if(ht.setX(Math.max(Math.abs(xt[0]),Math.abs(Et[0]))),ht.setY(Math.max(Math.abs(xt[1]),Math.abs(Et[1]))),ht.setZ(Math.max(Math.abs(xt[2]),Math.abs(Et[2]))),At.normalized){const Tt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[At.componentType]);ht.multiplyScalar(Tt)}ut.max(ht)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}st.expandByVector(ut)}it.boundingBox=st;const lt=new Sphere;st.getCenter(lt.center),lt.radius=st.min.distanceTo(st.max)/2,it.boundingSphere=lt}function addPrimitiveAttributes(it,tt,rt){const at=tt.attributes,st=[];function ot(lt,ut){return rt.getDependency("accessor",lt).then(function(ht){it.setAttribute(ut,ht)})}for(const lt in at){const ut=ATTRIBUTES[lt]||lt.toLowerCase();ut in it.attributes||st.push(ot(at[lt],ut))}if(tt.indices!==void 0&&!it.index){const lt=rt.getDependency("accessor",tt.indices).then(function(ut){it.setIndex(ut)});st.push(lt)}return assignExtrasToUserData(it,tt),computeBounds(it,tt,rt),Promise.all(st).then(function(){return tt.targets!==void 0?addMorphTargets(it,tt.targets,rt):it})}function toTrianglesDrawMode(it,tt){let rt=it.getIndex();if(rt===null){const lt=[],ut=it.getAttribute("position");if(ut!==void 0){for(let ht=0;ht<ut.count;ht++)lt.push(ht);it.setIndex(lt),rt=it.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),it}const at=rt.count-2,st=[];if(tt===TriangleFanDrawMode)for(let lt=1;lt<=at;lt++)st.push(rt.getX(0)),st.push(rt.getX(lt)),st.push(rt.getX(lt+1));else for(let lt=0;lt<at;lt++)lt%2===0?(st.push(rt.getX(lt)),st.push(rt.getX(lt+1)),st.push(rt.getX(lt+2))):(st.push(rt.getX(lt+2)),st.push(rt.getX(lt+1)),st.push(rt.getX(lt)));st.length/3!==at&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const ot=it.clone();return ot.setIndex(st),ot}class WorkerPool{constructor(tt=4){this.pool=tt,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(tt){if(!this.workers[tt]){const rt=this.workerCreator();rt.addEventListener("message",this._onMessage.bind(this,tt)),this.workers[tt]=rt}}_getIdleWorker(){for(let tt=0;tt<this.pool;tt++)if(!(this.workerStatus&1<<tt))return tt;return-1}_onMessage(tt,rt){const at=this.workersResolve[tt];if(at&&at(rt),this.queue.length){const{resolve:st,msg:ot,transfer:lt}=this.queue.shift();this.workersResolve[tt]=st,this.workers[tt].postMessage(ot,lt)}else this.workerStatus^=1<<tt}setWorkerCreator(tt){this.workerCreator=tt}setWorkerLimit(tt){this.pool=tt}postMessage(tt,rt){return new Promise(at=>{const st=this._getIdleWorker();st!==-1?(this._initWorker(st),this.workerStatus|=1<<st,this.workersResolve[st]=at,this.workers[st].postMessage(tt,rt)):this.queue.push({resolve:at,msg:tt,transfer:rt})})}dispose(){this.workers.forEach(tt=>tt.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const t=0,n=2,p=1,x$1=2,nt=0,ct=9,gt=15,yt=16,dt=22,Ot=37,Ft=43,$t=76,se=83,pe=97,xe=100,de=103,Ae=109;class Si{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Ii{constructor(tt,rt,at,st){this._dataView=new DataView(tt.buffer,tt.byteOffset+rt,at),this._littleEndian=st,this._offset=0}_nextUint8(){const tt=this._dataView.getUint8(this._offset);return this._offset+=1,tt}_nextUint16(){const tt=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,tt}_nextUint32(){const tt=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,tt}_nextUint64(){const tt=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,tt}_nextInt32(){const tt=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,tt}_skip(tt){return this._offset+=tt,this}_scan(tt,rt=0){const at=this._offset;let st=0;for(;this._dataView.getUint8(this._offset)!==rt&&st<tt;)st++,this._offset++;return st<tt&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+at,st)}}const Ti=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(it){return typeof TextDecoder<"u"?new TextDecoder().decode(it):Buffer.from(it).toString("utf8")}function Pi(it){const tt=new Uint8Array(it.buffer,it.byteOffset,Ti.length);if(tt[0]!==Ti[0]||tt[1]!==Ti[1]||tt[2]!==Ti[2]||tt[3]!==Ti[3]||tt[4]!==Ti[4]||tt[5]!==Ti[5]||tt[6]!==Ti[6]||tt[7]!==Ti[7]||tt[8]!==Ti[8]||tt[9]!==Ti[9]||tt[10]!==Ti[10]||tt[11]!==Ti[11])throw new Error("Missing KTX 2.0 identifier.");const rt=new Si,at=17*Uint32Array.BYTES_PER_ELEMENT,st=new Ii(it,Ti.length,at,!0);rt.vkFormat=st._nextUint32(),rt.typeSize=st._nextUint32(),rt.pixelWidth=st._nextUint32(),rt.pixelHeight=st._nextUint32(),rt.pixelDepth=st._nextUint32(),rt.layerCount=st._nextUint32(),rt.faceCount=st._nextUint32();const ot=st._nextUint32();rt.supercompressionScheme=st._nextUint32();const lt=st._nextUint32(),ut=st._nextUint32(),ht=st._nextUint32(),mt=st._nextUint32(),bt=st._nextUint64(),vt=st._nextUint64(),At=new Ii(it,Ti.length+at,3*ot*8,!0);for(let Qt=0;Qt<ot;Qt++)rt.levels.push({levelData:new Uint8Array(it.buffer,it.byteOffset+At._nextUint64(),At._nextUint64()),uncompressedByteLength:At._nextUint64()});const xt=new Ii(it,lt,ut,!0),Et={vendorId:xt._skip(4)._nextUint16(),descriptorType:xt._nextUint16(),versionNumber:xt._nextUint16(),descriptorBlockSize:xt._nextUint16(),colorModel:xt._nextUint8(),colorPrimaries:xt._nextUint8(),transferFunction:xt._nextUint8(),flags:xt._nextUint8(),texelBlockDimension:[xt._nextUint8(),xt._nextUint8(),xt._nextUint8(),xt._nextUint8()],bytesPlane:[xt._nextUint8(),xt._nextUint8(),xt._nextUint8(),xt._nextUint8(),xt._nextUint8(),xt._nextUint8(),xt._nextUint8(),xt._nextUint8()],samples:[]},Tt=(Et.descriptorBlockSize/4-6)/4;for(let Qt=0;Qt<Tt;Qt++){const Ut={bitOffset:xt._nextUint16(),bitLength:xt._nextUint8(),channelType:xt._nextUint8(),samplePosition:[xt._nextUint8(),xt._nextUint8(),xt._nextUint8(),xt._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Ut.channelType?(Ut.sampleLower=xt._nextInt32(),Ut.sampleUpper=xt._nextInt32()):(Ut.sampleLower=xt._nextUint32(),Ut.sampleUpper=xt._nextUint32()),Et.samples[Qt]=Ut}rt.dataFormatDescriptor.length=0,rt.dataFormatDescriptor.push(Et);const wt=new Ii(it,ht,mt,!0);for(;wt._offset<mt;){const Qt=wt._nextUint32(),Ut=wt._scan(Qt),Bt=Ei(Ut),Kt=wt._scan(Qt-Ut.byteLength);rt.keyValue[Bt]=Bt.match(/^ktx/i)?Ei(Kt):Kt,wt._offset%4&&wt._skip(4-wt._offset%4)}if(vt<=0)return rt;const Ct=new Ii(it,bt,vt,!0),It=Ct._nextUint16(),St=Ct._nextUint16(),Rt=Ct._nextUint32(),Dt=Ct._nextUint32(),Wt=Ct._nextUint32(),qt=Ct._nextUint32(),Vt=[];for(let Qt=0;Qt<ot;Qt++)Vt.push({imageFlags:Ct._nextUint32(),rgbSliceByteOffset:Ct._nextUint32(),rgbSliceByteLength:Ct._nextUint32(),alphaSliceByteOffset:Ct._nextUint32(),alphaSliceByteLength:Ct._nextUint32()});const Yt=bt+Ct._offset,jt=Yt+Rt,kt=jt+Dt,zt=kt+Wt,Nt=new Uint8Array(it.buffer,it.byteOffset+Yt,Rt),Mt=new Uint8Array(it.buffer,it.byteOffset+jt,Dt),Lt=new Uint8Array(it.buffer,it.byteOffset+kt,Wt),Ht=new Uint8Array(it.buffer,it.byteOffset+zt,qt);return rt.globalData={endpointCount:It,selectorCount:St,imageDescs:Vt,endpointsData:Nt,selectorsData:Mt,tablesData:Lt,extendedData:Ht},rt}let A,I,B;const g={env:{emscripten_notify_memory_growth:function(it){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A||(A=typeof fetch<"u"?fetch("data:application/wasm;base64,"+C).then(tt=>tt.arrayBuffer()).then(tt=>WebAssembly.instantiate(tt,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,"base64"),g).then(this._init),A)}_init(tt){I=tt.instance,g.env.emscripten_notify_memory_growth(0)}decode(tt,rt=0){if(!I)throw new Error("ZSTDDecoder: Await .init() before decoding.");const at=tt.byteLength,st=I.exports.malloc(at);B.set(tt,st),rt=rt||Number(I.exports.ZSTD_findDecompressedSize(st,at));const ot=I.exports.malloc(rt),lt=I.exports.ZSTD_decompress(ot,rt,st,at),ut=B.slice(ot,ot+lt);return I.exports.free(st),I.exports.free(ot),ut}}const C="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",_taskCache=new WeakMap;let _activeLoaders=0,_zstd;class KTX2Loader extends Loader{constructor(tt){super(tt),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(tt){return this.transcoderPath=tt,this}setWorkerLimit(tt){return this.workerPool.setWorkerLimit(tt),this}detectSupport(tt){return this.workerConfig={astcSupported:tt.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:tt.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:tt.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:tt.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:tt.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:tt.extensions.has("WEBGL_compressed_texture_pvrtc")||tt.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},tt.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const tt=new FileLoader(this.manager);tt.setPath(this.transcoderPath),tt.setWithCredentials(this.withCredentials);const rt=tt.loadAsync("basis_transcoder.js"),at=new FileLoader(this.manager);at.setPath(this.transcoderPath),at.setResponseType("arraybuffer"),at.setWithCredentials(this.withCredentials);const st=at.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([rt,st]).then(([ot,lt])=>{const ut=KTX2Loader.BasisWorker.toString(),ht=["/* constants */","let _EngineFormat = "+JSON.stringify(KTX2Loader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(KTX2Loader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(KTX2Loader.BasisFormat),"/* basis_transcoder.js */",ot,"/* worker */",ut.substring(ut.indexOf("{")+1,ut.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ht])),this.transcoderBinary=lt,this.workerPool.setWorkerCreator(()=>{const mt=new Worker(this.workerSourceURL),bt=this.transcoderBinary.slice(0);return mt.postMessage({type:"init",config:this.workerConfig,transcoderBinary:bt},[bt]),mt})}),_activeLoaders>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_activeLoaders++}return this.transcoderPending}load(tt,rt,at,st){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const ot=new FileLoader(this.manager);ot.setResponseType("arraybuffer"),ot.setWithCredentials(this.withCredentials),ot.load(tt,lt=>{if(_taskCache.has(lt))return _taskCache.get(lt).promise.then(rt).catch(st);this._createTexture(lt).then(ut=>rt?rt(ut):null).catch(st)},at,st)}_createTextureFrom(tt,rt){const{mipmaps:at,width:st,height:ot,format:lt,type:ut,error:ht,dfdTransferFn:mt,dfdFlags:bt}=tt;if(ut==="error")return Promise.reject(ht);const vt=rt.layerCount>1?new CompressedArrayTexture(at,st,ot,rt.layerCount,lt,UnsignedByteType):new CompressedTexture(at,st,ot,lt,UnsignedByteType);return vt.minFilter=at.length===1?LinearFilter:LinearMipmapLinearFilter,vt.magFilter=LinearFilter,vt.generateMipmaps=!1,vt.needsUpdate=!0,vt.encoding=mt===x$1?sRGBEncoding:LinearEncoding,vt.premultiplyAlpha=!!(bt&p),vt}async _createTexture(tt,rt={}){const at=Pi(new Uint8Array(tt));if(at.vkFormat!==nt)return createDataTexture(at);const st=rt,ot=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:tt,taskConfig:st},[tt])).then(lt=>this._createTextureFrom(lt.data,at));return _taskCache.set(tt,{promise:ot}),ot}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_activeLoaders--,this}}KTX2Loader.BasisFormat={ETC1S:0,UASTC_4x4:1},KTX2Loader.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},KTX2Loader.EngineFormat={RGBAFormat,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format},KTX2Loader.BasisWorker=function(){let it,tt,rt;const at=_EngineFormat,st=_TranscoderFormat,ot=_BasisFormat;self.addEventListener("message",function(Et){const Tt=Et.data;switch(Tt.type){case"init":it=Tt.config,lt(Tt.transcoderBinary);break;case"transcode":tt.then(()=>{try{const{width:wt,height:Ct,hasAlpha:It,mipmaps:St,format:Rt,dfdTransferFn:Dt,dfdFlags:Wt}=ut(Tt.buffer),qt=[];for(let Vt=0;Vt<St.length;++Vt)qt.push(St[Vt].data.buffer);self.postMessage({type:"transcode",id:Tt.id,width:wt,height:Ct,hasAlpha:It,mipmaps:St,format:Rt,dfdTransferFn:Dt,dfdFlags:Wt},qt)}catch(wt){console.error(wt),self.postMessage({type:"error",id:Tt.id,error:wt.message})}});break}});function lt(Et){tt=new Promise(Tt=>{rt={wasmBinary:Et,onRuntimeInitialized:Tt},BASIS(rt)}).then(()=>{rt.initializeBasis(),rt.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function ut(Et){const Tt=new rt.KTX2File(new Uint8Array(Et));function wt(){Tt.close(),Tt.delete()}if(!Tt.isValid())throw wt(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const Ct=Tt.isUASTC()?ot.UASTC_4x4:ot.ETC1S,It=Tt.getWidth(),St=Tt.getHeight(),Rt=Tt.getLayers()||1,Dt=Tt.getLevels(),Wt=Tt.getHasAlpha(),qt=Tt.getDFDTransferFunc(),Vt=Tt.getDFDFlags(),{transcoderFormat:Yt,engineFormat:jt}=vt(Ct,It,St,Wt);if(!It||!St||!Dt)throw wt(),new Error("THREE.KTX2Loader:	Invalid texture");if(!Tt.startTranscoding())throw wt(),new Error("THREE.KTX2Loader: .startTranscoding failed");const kt=[];for(let zt=0;zt<Dt;zt++){const Nt=[];let Mt,Lt;for(let Ht=0;Ht<Rt;Ht++){const Qt=Tt.getImageLevelInfo(zt,Ht,0);Mt=Qt.origWidth,Lt=Qt.origHeight;const Ut=new Uint8Array(Tt.getImageTranscodedSizeInBytes(zt,Ht,0,Yt));if(!Tt.transcodeImage(Ut,zt,Ht,0,Yt,0,-1,-1))throw wt(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Nt.push(Ut)}kt.push({data:xt(Nt),width:Mt,height:Lt})}return wt(),{width:It,height:St,hasAlpha:Wt,mipmaps:kt,format:jt,dfdTransferFn:qt,dfdFlags:Vt}}const ht=[{if:"astcSupported",basisFormat:[ot.UASTC_4x4],transcoderFormat:[st.ASTC_4x4,st.ASTC_4x4],engineFormat:[at.RGBA_ASTC_4x4_Format,at.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[ot.ETC1S,ot.UASTC_4x4],transcoderFormat:[st.BC7_M5,st.BC7_M5],engineFormat:[at.RGBA_BPTC_Format,at.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[ot.ETC1S,ot.UASTC_4x4],transcoderFormat:[st.BC1,st.BC3],engineFormat:[at.RGB_S3TC_DXT1_Format,at.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[ot.ETC1S,ot.UASTC_4x4],transcoderFormat:[st.ETC1,st.ETC2],engineFormat:[at.RGB_ETC2_Format,at.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[ot.ETC1S,ot.UASTC_4x4],transcoderFormat:[st.ETC1],engineFormat:[at.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[ot.ETC1S,ot.UASTC_4x4],transcoderFormat:[st.PVRTC1_4_RGB,st.PVRTC1_4_RGBA],engineFormat:[at.RGB_PVRTC_4BPPV1_Format,at.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],mt=ht.sort(function(Et,Tt){return Et.priorityETC1S-Tt.priorityETC1S}),bt=ht.sort(function(Et,Tt){return Et.priorityUASTC-Tt.priorityUASTC});function vt(Et,Tt,wt,Ct){let It,St;const Rt=Et===ot.ETC1S?mt:bt;for(let Dt=0;Dt<Rt.length;Dt++){const Wt=Rt[Dt];if(!!it[Wt.if]&&!!Wt.basisFormat.includes(Et)&&!(Ct&&Wt.transcoderFormat.length<2)&&!(Wt.needsPowerOfTwo&&!(At(Tt)&&At(wt))))return It=Wt.transcoderFormat[Ct?1:0],St=Wt.engineFormat[Ct?1:0],{transcoderFormat:It,engineFormat:St}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),It=st.RGBA32,St=at.RGBAFormat,{transcoderFormat:It,engineFormat:St}}function At(Et){return Et<=2?!0:(Et&Et-1)===0&&Et!==0}function xt(Et){let Tt=0;for(const It of Et)Tt+=It.byteLength;const wt=new Uint8Array(Tt);let Ct=0;for(const It of Et)wt.set(It,Ct),Ct+=It.byteLength;return wt}};const FORMAT_MAP={[Ae]:RGBAFormat,[pe]:RGBAFormat,[Ot]:RGBAFormat,[Ft]:RGBAFormat,[de]:RGFormat,[se]:RGFormat,[yt]:RGFormat,[dt]:RGFormat,[xe]:RedFormat,[$t]:RedFormat,[gt]:RedFormat,[ct]:RedFormat},TYPE_MAP={[Ae]:FloatType,[pe]:HalfFloatType,[Ot]:UnsignedByteType,[Ft]:UnsignedByteType,[de]:FloatType,[se]:HalfFloatType,[yt]:UnsignedByteType,[dt]:UnsignedByteType,[xe]:FloatType,[$t]:HalfFloatType,[gt]:UnsignedByteType,[ct]:UnsignedByteType},ENCODING_MAP={[Ft]:sRGBEncoding,[dt]:sRGBEncoding,[gt]:sRGBEncoding};async function createDataTexture(it){const{vkFormat:tt,pixelWidth:rt,pixelHeight:at,pixelDepth:st}=it;if(FORMAT_MAP[tt]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const ot=it.levels[0];let lt,ut;if(it.supercompressionScheme===t)lt=ot.levelData;else if(it.supercompressionScheme===n)_zstd||(_zstd=new Promise(async mt=>{const bt=new Q;await bt.init(),mt(bt)})),lt=(await _zstd).decode(ot.levelData,ot.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");TYPE_MAP[tt]===FloatType?ut=new Float32Array(lt.buffer,lt.byteOffset,lt.byteLength/Float32Array.BYTES_PER_ELEMENT):TYPE_MAP[tt]===HalfFloatType?ut=new Uint16Array(lt.buffer,lt.byteOffset,lt.byteLength/Uint16Array.BYTES_PER_ELEMENT):ut=lt;const ht=st===0?new DataTexture(ut,rt,at):new Data3DTexture(ut,rt,at,st);return ht.type=TYPE_MAP[tt],ht.format=FORMAT_MAP[tt],ht.encoding=ENCODING_MAP[tt]||LinearEncoding,ht.needsUpdate=!0,Promise.resolve(ht)}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _a$a,_b$9;const $retainerCount=Symbol("retainerCount"),$recentlyUsed=Symbol("recentlyUsed"),$evict=Symbol("evict"),$evictionThreshold=Symbol("evictionThreshold"),$cache=Symbol("cache");class CacheEvictionPolicy{constructor(tt,rt=5){this[_a$a]=new Map,this[_b$9]=[],this[$cache]=tt,this[$evictionThreshold]=rt}set evictionThreshold(tt){this[$evictionThreshold]=tt,this[$evict]()}get evictionThreshold(){return this[$evictionThreshold]}get cache(){return this[$cache]}retainerCount(tt){return this[$retainerCount].get(tt)||0}reset(){this[$retainerCount].clear(),this[$recentlyUsed]=[]}retain(tt){this[$retainerCount].has(tt)||this[$retainerCount].set(tt,0),this[$retainerCount].set(tt,this[$retainerCount].get(tt)+1);const rt=this[$recentlyUsed].indexOf(tt);rt!==-1&&this[$recentlyUsed].splice(rt,1),this[$recentlyUsed].unshift(tt),this[$evict]()}release(tt){this[$retainerCount].has(tt)&&this[$retainerCount].set(tt,Math.max(this[$retainerCount].get(tt)-1,0)),this[$evict]()}[(_a$a=$retainerCount,_b$9=$recentlyUsed,$evict)](){if(!(this[$recentlyUsed].length<this[$evictionThreshold]))for(let tt=this[$recentlyUsed].length-1;tt>=this[$evictionThreshold];--tt){const rt=this[$recentlyUsed][tt];this[$retainerCount].get(rt)===0&&(this[$cache].delete(rt),this[$recentlyUsed].splice(tt,1))}}}/* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ensureUniqueNames=it=>{const tt=[],rt=new Set;for(const at of it){let st=at,ot=0;for(;rt.has(st);)st=at+"."+ ++ot;rt.add(st),tt.push(st)}return tt},mappingsArrayToTable=it=>{const tt=new Map;for(const rt of it.mappings)for(const at of rt.variants)tt.set(at,{material:null,gltfMaterialIndex:rt.material});return tt};class GLTFMaterialsVariantsExtension{constructor(tt){this.parser=tt,this.name="KHR_materials_variants"}afterRoot(tt){const rt=this.parser,at=rt.json;if(at.extensions===void 0||at.extensions[this.name]===void 0)return null;const ot=at.extensions[this.name].variants||[],lt=ensureUniqueNames(ot.map(ut=>ut.name));for(const ut of tt.scenes)ut.traverse(ht=>{const mt=ht;if(!mt.isMesh)return;const bt=rt.associations.get(mt);if(bt==null||bt.meshes==null||bt.primitives==null)return;const Et=at.meshes[bt.meshes].primitives[bt.primitives].extensions;!Et||!Et[this.name]||(mt.userData.variantMaterials=mappingsArrayToTable(Et[this.name]))});return tt.userData.variants=lt,Promise.resolve()}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _a$9,_b$8;const loadWithLoader=(it,tt,rt=()=>{})=>{const at=st=>{const ot=st.loaded/st.total;rt(Math.max(0,Math.min(1,isFinite(ot)?ot:1)))};return new Promise((st,ot)=>{tt.load(it,st,at,ot)})},fetchScript=it=>new Promise((tt,rt)=>{const at=document.createElement("script");document.body.appendChild(at),at.onload=tt,at.onerror=rt,at.async=!0,at.src=it}),cache=new Map,preloaded=new Map;let dracoDecoderLocation;const dracoLoader=new DRACOLoader;let ktx2TranscoderLocation;const ktx2Loader=new KTX2Loader;let meshoptDecoderLocation,meshoptDecoder;const $loader=Symbol("loader"),$evictionPolicy=Symbol("evictionPolicy"),$GLTFInstance=Symbol("GLTFInstance");class CachingGLTFLoader extends EventDispatcher{constructor(tt){super(),this[_b$8]=new GLTFLoader().register(rt=>new GLTFMaterialsVariantsExtension(rt)),this[$GLTFInstance]=tt,this[$loader].setDRACOLoader(dracoLoader),this[$loader].setKTX2Loader(ktx2Loader)}static setDRACODecoderLocation(tt){dracoDecoderLocation=tt,dracoLoader.setDecoderPath(tt)}static getDRACODecoderLocation(){return dracoDecoderLocation}static setKTX2TranscoderLocation(tt){ktx2TranscoderLocation=tt,ktx2Loader.setTranscoderPath(tt)}static getKTX2TranscoderLocation(){return ktx2TranscoderLocation}static setMeshoptDecoderLocation(tt){meshoptDecoderLocation!==tt&&(meshoptDecoderLocation=tt,meshoptDecoder=fetchScript(tt).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return meshoptDecoderLocation}static initializeKTX2Loader(tt){ktx2Loader.detectSupport(tt)}static get cache(){return cache}static clearCache(){cache.forEach((tt,rt)=>{this.delete(rt)}),this[$evictionPolicy].reset()}static has(tt){return cache.has(tt)}static async delete(tt){if(!this.has(tt))return;const rt=cache.get(tt);preloaded.delete(tt),cache.delete(tt),(await rt).dispose()}static hasFinishedLoading(tt){return!!preloaded.get(tt)}get[(_a$9=$evictionPolicy,_b$8=$loader,$evictionPolicy)](){return this.constructor[$evictionPolicy]}async preload(tt,rt,at=()=>{}){if(this[$loader].setWithCredentials(CachingGLTFLoader.withCredentials),this.dispatchEvent({type:"preload",element:rt,src:tt}),!cache.has(tt)){meshoptDecoder!=null&&this[$loader].setMeshoptDecoder(await meshoptDecoder);const st=loadWithLoader(tt,this[$loader],ut=>{at(ut*.8)}),ot=this[$GLTFInstance],lt=st.then(ut=>ot.prepare(ut)).then(ut=>(at(.9),new ot(ut))).catch(ut=>(console.error(ut),new ot));cache.set(tt,lt)}await cache.get(tt),preloaded.set(tt,!0),at&&at(1)}async load(tt,rt,at=()=>{}){await this.preload(tt,rt,at);const ot=await(await cache.get(tt)).clone();return this[$evictionPolicy].retain(tt),ot.dispose=()=>{this[$evictionPolicy].release(tt)},ot}}CachingGLTFLoader[_a$9]=new CacheEvictionPolicy(CachingGLTFLoader);class CSS2DObject extends Object3D{constructor(tt=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=tt,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(rt){rt.element instanceof Element&&rt.element.parentNode!==null&&rt.element.parentNode.removeChild(rt.element)})})}copy(tt,rt){return super.copy(tt,rt),this.element=tt.element.cloneNode(!0),this}}const _vector=new Vector3,_viewMatrix=new Matrix4,_viewProjectionMatrix=new Matrix4,_a$8=new Vector3,_b$7=new Vector3;class CSS2DRenderer{constructor(tt={}){const rt=this;let at,st,ot,lt;const ut={objects:new WeakMap},ht=tt.element!==void 0?tt.element:document.createElement("div");ht.style.overflow="hidden",this.domElement=ht,this.getSize=function(){return{width:at,height:st}},this.render=function(xt,Et){xt.matrixWorldAutoUpdate===!0&&xt.updateMatrixWorld(),Et.parent===null&&Et.matrixWorldAutoUpdate===!0&&Et.updateMatrixWorld(),_viewMatrix.copy(Et.matrixWorldInverse),_viewProjectionMatrix.multiplyMatrices(Et.projectionMatrix,_viewMatrix),mt(xt,xt,Et),At(xt)},this.setSize=function(xt,Et){at=xt,st=Et,ot=at/2,lt=st/2,ht.style.width=xt+"px",ht.style.height=Et+"px"};function mt(xt,Et,Tt){if(xt.isCSS2DObject){_vector.setFromMatrixPosition(xt.matrixWorld),_vector.applyMatrix4(_viewProjectionMatrix);const wt=xt.visible===!0&&_vector.z>=-1&&_vector.z<=1&&xt.layers.test(Tt.layers)===!0;if(xt.element.style.display=wt===!0?"":"none",wt===!0){xt.onBeforeRender(rt,Et,Tt);const It=xt.element;It.style.transform="translate(-50%,-50%) translate("+(_vector.x*ot+ot)+"px,"+(-_vector.y*lt+lt)+"px)",It.parentNode!==ht&&ht.appendChild(It),xt.onAfterRender(rt,Et,Tt)}const Ct={distanceToCameraSquared:bt(Tt,xt)};ut.objects.set(xt,Ct)}for(let wt=0,Ct=xt.children.length;wt<Ct;wt++)mt(xt.children[wt],Et,Tt)}function bt(xt,Et){return _a$8.setFromMatrixPosition(xt.matrixWorld),_b$7.setFromMatrixPosition(Et.matrixWorld),_a$8.distanceToSquared(_b$7)}function vt(xt){const Et=[];return xt.traverse(function(Tt){Tt.isCSS2DObject&&Et.push(Tt)}),Et}function At(xt){const Et=vt(xt).sort(function(wt,Ct){if(wt.renderOrder!==Ct.renderOrder)return Ct.renderOrder-wt.renderOrder;const It=ut.objects.get(wt).distanceToCameraSquared,St=ut.objects.get(Ct).distanceToCameraSquared;return It-St}),Tt=Et.length;for(let wt=0,Ct=Et.length;wt<Ct;wt++)Et[wt].element.style.zIndex=Tt-wt}}}class GLTFExporter{constructor(){this.pluginCallbacks=[],this.register(function(tt){return new GLTFLightExtension(tt)}),this.register(function(tt){return new GLTFMaterialsUnlitExtension(tt)}),this.register(function(tt){return new GLTFMaterialsPBRSpecularGlossiness(tt)}),this.register(function(tt){return new GLTFMaterialsTransmissionExtension(tt)}),this.register(function(tt){return new GLTFMaterialsVolumeExtension(tt)}),this.register(function(tt){return new GLTFMaterialsClearcoatExtension(tt)}),this.register(function(tt){return new GLTFMaterialsIridescenceExtension(tt)})}register(tt){return this.pluginCallbacks.indexOf(tt)===-1&&this.pluginCallbacks.push(tt),this}unregister(tt){return this.pluginCallbacks.indexOf(tt)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(tt),1),this}parse(tt,rt,at,st){const ot=new GLTFWriter,lt=[];for(let ut=0,ht=this.pluginCallbacks.length;ut<ht;ut++)lt.push(this.pluginCallbacks[ut](ot));ot.setPlugins(lt),ot.write(tt,rt,st).catch(at)}parseAsync(tt,rt){const at=this;return new Promise(function(st,ot){at.parse(tt,st,ot,rt)})}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},THREE_TO_WEBGL={};THREE_TO_WEBGL[NearestFilter]=WEBGL_CONSTANTS.NEAREST,THREE_TO_WEBGL[NearestMipmapNearestFilter]=WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST,THREE_TO_WEBGL[NearestMipmapLinearFilter]=WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR,THREE_TO_WEBGL[LinearFilter]=WEBGL_CONSTANTS.LINEAR,THREE_TO_WEBGL[LinearMipmapNearestFilter]=WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST,THREE_TO_WEBGL[LinearMipmapLinearFilter]=WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR,THREE_TO_WEBGL[ClampToEdgeWrapping]=WEBGL_CONSTANTS.CLAMP_TO_EDGE,THREE_TO_WEBGL[RepeatWrapping]=WEBGL_CONSTANTS.REPEAT,THREE_TO_WEBGL[MirroredRepeatWrapping]=WEBGL_CONSTANTS.MIRRORED_REPEAT;const PATH_PROPERTIES={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},GLB_HEADER_BYTES=12,GLB_HEADER_MAGIC=1179937895,GLB_VERSION=2,GLB_CHUNK_PREFIX_BYTES=8,GLB_CHUNK_TYPE_JSON=1313821514,GLB_CHUNK_TYPE_BIN=5130562;function equalArray(it,tt){return it.length===tt.length&&it.every(function(rt,at){return rt===tt[at]})}function stringToArrayBuffer(it){return new TextEncoder().encode(it).buffer}function isIdentityMatrix(it){return equalArray(it.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function getMinMax(it,tt,rt){const at={min:new Array(it.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(it.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let st=tt;st<tt+rt;st++)for(let ot=0;ot<it.itemSize;ot++){let lt;it.itemSize>4?lt=it.array[st*it.itemSize+ot]:ot===0?lt=it.getX(st):ot===1?lt=it.getY(st):ot===2?lt=it.getZ(st):ot===3&&(lt=it.getW(st)),at.min[ot]=Math.min(at.min[ot],lt),at.max[ot]=Math.max(at.max[ot],lt)}return at}function getPaddedBufferSize(it){return Math.ceil(it/4)*4}function getPaddedArrayBuffer(it,tt=0){const rt=getPaddedBufferSize(it.byteLength);if(rt!==it.byteLength){const at=new Uint8Array(rt);if(at.set(new Uint8Array(it)),tt!==0)for(let st=it.byteLength;st<rt;st++)at[st]=tt;return at.buffer}return it}function getCanvas(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function getToBlobPromise(it,tt){if(it.toBlob!==void 0)return new Promise(at=>it.toBlob(at,tt));let rt;return tt==="image/jpeg"?rt=.92:tt==="image/webp"&&(rt=.8),it.convertToBlob({type:tt,quality:rt})}class GLTFWriter{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(tt){this.plugins=tt}async write(tt,rt,at){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},at),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(tt),await Promise.all(this.pending);const st=this,ot=st.buffers,lt=st.json;at=st.options;const ut=st.extensionsUsed,ht=new Blob(ot,{type:"application/octet-stream"}),mt=Object.keys(ut);if(mt.length>0&&(lt.extensionsUsed=mt),lt.buffers&&lt.buffers.length>0&&(lt.buffers[0].byteLength=ht.size),at.binary===!0){const bt=new FileReader;bt.readAsArrayBuffer(ht),bt.onloadend=function(){const vt=getPaddedArrayBuffer(bt.result),At=new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));At.setUint32(0,vt.byteLength,!0),At.setUint32(4,GLB_CHUNK_TYPE_BIN,!0);const xt=getPaddedArrayBuffer(stringToArrayBuffer(JSON.stringify(lt)),32),Et=new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));Et.setUint32(0,xt.byteLength,!0),Et.setUint32(4,GLB_CHUNK_TYPE_JSON,!0);const Tt=new ArrayBuffer(GLB_HEADER_BYTES),wt=new DataView(Tt);wt.setUint32(0,GLB_HEADER_MAGIC,!0),wt.setUint32(4,GLB_VERSION,!0);const Ct=GLB_HEADER_BYTES+Et.byteLength+xt.byteLength+At.byteLength+vt.byteLength;wt.setUint32(8,Ct,!0);const It=new Blob([Tt,Et,xt,At,vt],{type:"application/octet-stream"}),St=new FileReader;St.readAsArrayBuffer(It),St.onloadend=function(){rt(St.result)}}}else if(lt.buffers&&lt.buffers.length>0){const bt=new FileReader;bt.readAsDataURL(ht),bt.onloadend=function(){const vt=bt.result;lt.buffers[0].uri=vt,rt(lt)}}else rt(lt)}serializeUserData(tt,rt){if(Object.keys(tt.userData).length===0)return;const at=this.options,st=this.extensionsUsed;try{const ot=JSON.parse(JSON.stringify(tt.userData));if(at.includeCustomExtensions&&ot.gltfExtensions){rt.extensions===void 0&&(rt.extensions={});for(const lt in ot.gltfExtensions)rt.extensions[lt]=ot.gltfExtensions[lt],st[lt]=!0;delete ot.gltfExtensions}Object.keys(ot).length>0&&(rt.extras=ot)}catch(ot){console.warn("THREE.GLTFExporter: userData of '"+tt.name+"' won't be serialized because of JSON.stringify error - "+ot.message)}}getUID(tt,rt=!1){if(this.uids.has(tt)===!1){const st=new Map;st.set(!0,this.uid++),st.set(!1,this.uid++),this.uids.set(tt,st)}return this.uids.get(tt).get(rt)}isNormalizedNormalAttribute(tt){if(this.cache.attributesNormalized.has(tt))return!1;const at=new Vector3;for(let st=0,ot=tt.count;st<ot;st++)if(Math.abs(at.fromBufferAttribute(tt,st).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(tt){const rt=this.cache;if(rt.attributesNormalized.has(tt))return rt.attributesNormalized.get(tt);const at=tt.clone(),st=new Vector3;for(let ot=0,lt=at.count;ot<lt;ot++)st.fromBufferAttribute(at,ot),st.x===0&&st.y===0&&st.z===0?st.setX(1):st.normalize(),at.setXYZ(ot,st.x,st.y,st.z);return rt.attributesNormalized.set(tt,at),at}applyTextureTransform(tt,rt){let at=!1;const st={};(rt.offset.x!==0||rt.offset.y!==0)&&(st.offset=rt.offset.toArray(),at=!0),rt.rotation!==0&&(st.rotation=rt.rotation,at=!0),(rt.repeat.x!==1||rt.repeat.y!==1)&&(st.scale=rt.repeat.toArray(),at=!0),at&&(tt.extensions=tt.extensions||{},tt.extensions.KHR_texture_transform=st,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(tt,rt){if(tt===rt)return tt;function at(xt){return xt.encoding===sRGBEncoding?function(Tt){return Tt<.04045?Tt*.0773993808:Math.pow(Tt*.9478672986+.0521327014,2.4)}:function(Tt){return Tt}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const st=tt==null?void 0:tt.image,ot=rt==null?void 0:rt.image,lt=Math.max((st==null?void 0:st.width)||0,(ot==null?void 0:ot.width)||0),ut=Math.max((st==null?void 0:st.height)||0,(ot==null?void 0:ot.height)||0),ht=getCanvas();ht.width=lt,ht.height=ut;const mt=ht.getContext("2d");mt.fillStyle="#00ffff",mt.fillRect(0,0,lt,ut);const bt=mt.getImageData(0,0,lt,ut);if(st){mt.drawImage(st,0,0,lt,ut);const xt=at(tt),Et=mt.getImageData(0,0,lt,ut).data;for(let Tt=2;Tt<Et.length;Tt+=4)bt.data[Tt]=xt(Et[Tt]/256)*256}if(ot){mt.drawImage(ot,0,0,lt,ut);const xt=at(rt),Et=mt.getImageData(0,0,lt,ut).data;for(let Tt=1;Tt<Et.length;Tt+=4)bt.data[Tt]=xt(Et[Tt]/256)*256}mt.putImageData(bt,0,0);const At=(tt||rt).clone();return At.source=new Source(ht),At.encoding=LinearEncoding,At}processBuffer(tt){const rt=this.json,at=this.buffers;return rt.buffers||(rt.buffers=[{byteLength:0}]),at.push(tt),0}processBufferView(tt,rt,at,st,ot){const lt=this.json;lt.bufferViews||(lt.bufferViews=[]);let ut;rt===WEBGL_CONSTANTS.UNSIGNED_BYTE?ut=1:rt===WEBGL_CONSTANTS.UNSIGNED_SHORT?ut=2:ut=4;const ht=getPaddedBufferSize(st*tt.itemSize*ut),mt=new DataView(new ArrayBuffer(ht));let bt=0;for(let xt=at;xt<at+st;xt++)for(let Et=0;Et<tt.itemSize;Et++){let Tt;tt.itemSize>4?Tt=tt.array[xt*tt.itemSize+Et]:Et===0?Tt=tt.getX(xt):Et===1?Tt=tt.getY(xt):Et===2?Tt=tt.getZ(xt):Et===3&&(Tt=tt.getW(xt)),rt===WEBGL_CONSTANTS.FLOAT?mt.setFloat32(bt,Tt,!0):rt===WEBGL_CONSTANTS.UNSIGNED_INT?mt.setUint32(bt,Tt,!0):rt===WEBGL_CONSTANTS.UNSIGNED_SHORT?mt.setUint16(bt,Tt,!0):rt===WEBGL_CONSTANTS.UNSIGNED_BYTE&&mt.setUint8(bt,Tt),bt+=ut}const vt={buffer:this.processBuffer(mt.buffer),byteOffset:this.byteOffset,byteLength:ht};return ot!==void 0&&(vt.target=ot),ot===WEBGL_CONSTANTS.ARRAY_BUFFER&&(vt.byteStride=tt.itemSize*ut),this.byteOffset+=ht,lt.bufferViews.push(vt),{id:lt.bufferViews.length-1,byteLength:0}}processBufferViewImage(tt){const rt=this,at=rt.json;return at.bufferViews||(at.bufferViews=[]),new Promise(function(st){const ot=new FileReader;ot.readAsArrayBuffer(tt),ot.onloadend=function(){const lt=getPaddedArrayBuffer(ot.result),ut={buffer:rt.processBuffer(lt),byteOffset:rt.byteOffset,byteLength:lt.byteLength};rt.byteOffset+=lt.byteLength,st(at.bufferViews.push(ut)-1)}})}processAccessor(tt,rt,at,st){const ot=this.json,lt={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let ut;if(tt.array.constructor===Float32Array)ut=WEBGL_CONSTANTS.FLOAT;else if(tt.array.constructor===Uint32Array)ut=WEBGL_CONSTANTS.UNSIGNED_INT;else if(tt.array.constructor===Uint16Array)ut=WEBGL_CONSTANTS.UNSIGNED_SHORT;else if(tt.array.constructor===Uint8Array)ut=WEBGL_CONSTANTS.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(at===void 0&&(at=0),st===void 0&&(st=tt.count),st===0)return null;const ht=getMinMax(tt,at,st);let mt;rt!==void 0&&(mt=tt===rt.index?WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER:WEBGL_CONSTANTS.ARRAY_BUFFER);const bt=this.processBufferView(tt,ut,at,st,mt),vt={bufferView:bt.id,byteOffset:bt.byteOffset,componentType:ut,count:st,max:ht.max,min:ht.min,type:lt[tt.itemSize]};return tt.normalized===!0&&(vt.normalized=!0),ot.accessors||(ot.accessors=[]),ot.accessors.push(vt)-1}processImage(tt,rt,at,st="image/png"){const ot=this,lt=ot.cache,ut=ot.json,ht=ot.options,mt=ot.pending;lt.images.has(tt)||lt.images.set(tt,{});const bt=lt.images.get(tt),vt=st+":flipY/"+at.toString();if(bt[vt]!==void 0)return bt[vt];ut.images||(ut.images=[]);const At={mimeType:st},xt=getCanvas();xt.width=Math.min(tt.width,ht.maxTextureSize),xt.height=Math.min(tt.height,ht.maxTextureSize);const Et=xt.getContext("2d");if(at===!0&&(Et.translate(0,xt.height),Et.scale(1,-1)),tt.data!==void 0){rt!==RGBAFormat&&console.error("GLTFExporter: Only RGBAFormat is supported."),(tt.width>ht.maxTextureSize||tt.height>ht.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",tt);const wt=new Uint8ClampedArray(tt.height*tt.width*4);for(let Ct=0;Ct<wt.length;Ct+=4)wt[Ct+0]=tt.data[Ct+0],wt[Ct+1]=tt.data[Ct+1],wt[Ct+2]=tt.data[Ct+2],wt[Ct+3]=tt.data[Ct+3];Et.putImageData(new ImageData(wt,tt.width,tt.height),0,0)}else Et.drawImage(tt,0,0,xt.width,xt.height);ht.binary===!0?mt.push(getToBlobPromise(xt,st).then(wt=>ot.processBufferViewImage(wt)).then(wt=>{At.bufferView=wt})):xt.toDataURL!==void 0?At.uri=xt.toDataURL(st):mt.push(getToBlobPromise(xt,st).then(wt=>new FileReader().readAsDataURL(wt)).then(wt=>{At.uri=wt}));const Tt=ut.images.push(At)-1;return bt[vt]=Tt,Tt}processSampler(tt){const rt=this.json;rt.samplers||(rt.samplers=[]);const at={magFilter:THREE_TO_WEBGL[tt.magFilter],minFilter:THREE_TO_WEBGL[tt.minFilter],wrapS:THREE_TO_WEBGL[tt.wrapS],wrapT:THREE_TO_WEBGL[tt.wrapT]};return rt.samplers.push(at)-1}processTexture(tt){const rt=this.cache,at=this.json;if(rt.textures.has(tt))return rt.textures.get(tt);at.textures||(at.textures=[]);let st=tt.userData.mimeType;st==="image/webp"&&(st="image/png");const ot={sampler:this.processSampler(tt),source:this.processImage(tt.image,tt.format,tt.flipY,st)};tt.name&&(ot.name=tt.name),this._invokeAll(function(ut){ut.writeTexture&&ut.writeTexture(tt,ot)});const lt=at.textures.push(ot)-1;return rt.textures.set(tt,lt),lt}processMaterial(tt){const rt=this.cache,at=this.json;if(rt.materials.has(tt))return rt.materials.get(tt);if(tt.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;at.materials||(at.materials=[]);const st={pbrMetallicRoughness:{}};tt.isMeshStandardMaterial!==!0&&tt.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const ot=tt.color.toArray().concat([tt.opacity]);if(equalArray(ot,[1,1,1,1])||(st.pbrMetallicRoughness.baseColorFactor=ot),tt.isMeshStandardMaterial?(st.pbrMetallicRoughness.metallicFactor=tt.metalness,st.pbrMetallicRoughness.roughnessFactor=tt.roughness):(st.pbrMetallicRoughness.metallicFactor=.5,st.pbrMetallicRoughness.roughnessFactor=.5),tt.metalnessMap||tt.roughnessMap){const ut=this.buildMetalRoughTexture(tt.metalnessMap,tt.roughnessMap),ht={index:this.processTexture(ut)};this.applyTextureTransform(ht,ut),st.pbrMetallicRoughness.metallicRoughnessTexture=ht}if(tt.map){const ut={index:this.processTexture(tt.map)};this.applyTextureTransform(ut,tt.map),st.pbrMetallicRoughness.baseColorTexture=ut}if(tt.emissive){const ut=tt.emissive.clone().multiplyScalar(tt.emissiveIntensity),ht=Math.max(ut.r,ut.g,ut.b);if(ht>1&&(ut.multiplyScalar(1/ht),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),ht>0&&(st.emissiveFactor=ut.toArray()),tt.emissiveMap){const mt={index:this.processTexture(tt.emissiveMap)};this.applyTextureTransform(mt,tt.emissiveMap),st.emissiveTexture=mt}}if(tt.normalMap){const ut={index:this.processTexture(tt.normalMap)};tt.normalScale&&tt.normalScale.x!==1&&(ut.scale=tt.normalScale.x),this.applyTextureTransform(ut,tt.normalMap),st.normalTexture=ut}if(tt.aoMap){const ut={index:this.processTexture(tt.aoMap),texCoord:1};tt.aoMapIntensity!==1&&(ut.strength=tt.aoMapIntensity),this.applyTextureTransform(ut,tt.aoMap),st.occlusionTexture=ut}tt.transparent?st.alphaMode="BLEND":tt.alphaTest>0&&(st.alphaMode="MASK",st.alphaCutoff=tt.alphaTest),tt.side===DoubleSide&&(st.doubleSided=!0),tt.name!==""&&(st.name=tt.name),this.serializeUserData(tt,st),this._invokeAll(function(ut){ut.writeMaterial&&ut.writeMaterial(tt,st)});const lt=at.materials.push(st)-1;return rt.materials.set(tt,lt),lt}processMesh(tt){const rt=this.cache,at=this.json,st=[tt.geometry.uuid];if(Array.isArray(tt.material))for(let St=0,Rt=tt.material.length;St<Rt;St++)st.push(tt.material[St].uuid);else st.push(tt.material.uuid);const ot=st.join(":");if(rt.meshes.has(ot))return rt.meshes.get(ot);const lt=tt.geometry;let ut;tt.isLineSegments?ut=WEBGL_CONSTANTS.LINES:tt.isLineLoop?ut=WEBGL_CONSTANTS.LINE_LOOP:tt.isLine?ut=WEBGL_CONSTANTS.LINE_STRIP:tt.isPoints?ut=WEBGL_CONSTANTS.POINTS:ut=tt.material.wireframe?WEBGL_CONSTANTS.LINES:WEBGL_CONSTANTS.TRIANGLES;const ht={},mt={},bt=[],vt=[],At={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},xt=lt.getAttribute("normal");xt!==void 0&&!this.isNormalizedNormalAttribute(xt)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),lt.setAttribute("normal",this.createNormalizedNormalAttribute(xt)));let Et=null;for(let St in lt.attributes){if(St.slice(0,5)==="morph")continue;const Rt=lt.attributes[St];if(St=At[St]||St.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(St)||(St="_"+St),rt.attributes.has(this.getUID(Rt))){mt[St]=rt.attributes.get(this.getUID(Rt));continue}Et=null;const Wt=Rt.array;St==="JOINTS_0"&&!(Wt instanceof Uint16Array)&&!(Wt instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),Et=new BufferAttribute(new Uint16Array(Wt),Rt.itemSize,Rt.normalized));const qt=this.processAccessor(Et||Rt,lt);qt!==null&&(mt[St]=qt,rt.attributes.set(this.getUID(Rt),qt))}if(xt!==void 0&&lt.setAttribute("normal",xt),Object.keys(mt).length===0)return null;if(tt.morphTargetInfluences!==void 0&&tt.morphTargetInfluences.length>0){const St=[],Rt=[],Dt={};if(tt.morphTargetDictionary!==void 0)for(const Wt in tt.morphTargetDictionary)Dt[tt.morphTargetDictionary[Wt]]=Wt;for(let Wt=0;Wt<tt.morphTargetInfluences.length;++Wt){const qt={};let Vt=!1;for(const Yt in lt.morphAttributes){if(Yt!=="position"&&Yt!=="normal"){Vt||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),Vt=!0);continue}const jt=lt.morphAttributes[Yt][Wt],kt=Yt.toUpperCase(),zt=lt.attributes[Yt];if(rt.attributes.has(this.getUID(jt,!0))){qt[kt]=rt.attributes.get(this.getUID(jt,!0));continue}const Nt=jt.clone();if(!lt.morphTargetsRelative)for(let Mt=0,Lt=jt.count;Mt<Lt;Mt++)Nt.setXYZ(Mt,jt.getX(Mt)-zt.getX(Mt),jt.getY(Mt)-zt.getY(Mt),jt.getZ(Mt)-zt.getZ(Mt));qt[kt]=this.processAccessor(Nt,lt),rt.attributes.set(this.getUID(zt,!0),qt[kt])}vt.push(qt),St.push(tt.morphTargetInfluences[Wt]),tt.morphTargetDictionary!==void 0&&Rt.push(Dt[Wt])}ht.weights=St,Rt.length>0&&(ht.extras={},ht.extras.targetNames=Rt)}const Tt=Array.isArray(tt.material);if(Tt&&lt.groups.length===0)return null;const wt=Tt?tt.material:[tt.material],Ct=Tt?lt.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let St=0,Rt=Ct.length;St<Rt;St++){const Dt={mode:ut,attributes:mt};if(this.serializeUserData(lt,Dt),vt.length>0&&(Dt.targets=vt),lt.index!==null){let qt=this.getUID(lt.index);(Ct[St].start!==void 0||Ct[St].count!==void 0)&&(qt+=":"+Ct[St].start+":"+Ct[St].count),rt.attributes.has(qt)?Dt.indices=rt.attributes.get(qt):(Dt.indices=this.processAccessor(lt.index,lt,Ct[St].start,Ct[St].count),rt.attributes.set(qt,Dt.indices)),Dt.indices===null&&delete Dt.indices}const Wt=this.processMaterial(wt[Ct[St].materialIndex]);Wt!==null&&(Dt.material=Wt),bt.push(Dt)}ht.primitives=bt,at.meshes||(at.meshes=[]),this._invokeAll(function(St){St.writeMesh&&St.writeMesh(tt,ht)});const It=at.meshes.push(ht)-1;return rt.meshes.set(ot,It),It}processCamera(tt){const rt=this.json;rt.cameras||(rt.cameras=[]);const at=tt.isOrthographicCamera,st={type:at?"orthographic":"perspective"};return at?st.orthographic={xmag:tt.right*2,ymag:tt.top*2,zfar:tt.far<=0?.001:tt.far,znear:tt.near<0?0:tt.near}:st.perspective={aspectRatio:tt.aspect,yfov:MathUtils.degToRad(tt.fov),zfar:tt.far<=0?.001:tt.far,znear:tt.near<0?0:tt.near},tt.name!==""&&(st.name=tt.type),rt.cameras.push(st)-1}processAnimation(tt,rt){const at=this.json,st=this.nodeMap;at.animations||(at.animations=[]),tt=GLTFExporter.Utils.mergeMorphTargetTracks(tt.clone(),rt);const ot=tt.tracks,lt=[],ut=[];for(let ht=0;ht<ot.length;++ht){const mt=ot[ht],bt=PropertyBinding.parseTrackName(mt.name);let vt=PropertyBinding.findNode(rt,bt.nodeName);const At=PATH_PROPERTIES[bt.propertyName];if(bt.objectName==="bones"&&(vt.isSkinnedMesh===!0?vt=vt.skeleton.getBoneByName(bt.objectIndex):vt=void 0),!vt||!At)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',mt.name),null;const xt=1;let Et=mt.values.length/mt.times.length;At===PATH_PROPERTIES.morphTargetInfluences&&(Et/=vt.morphTargetInfluences.length);let Tt;mt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(Tt="CUBICSPLINE",Et/=3):mt.getInterpolation()===InterpolateDiscrete?Tt="STEP":Tt="LINEAR",ut.push({input:this.processAccessor(new BufferAttribute(mt.times,xt)),output:this.processAccessor(new BufferAttribute(mt.values,Et)),interpolation:Tt}),lt.push({sampler:ut.length-1,target:{node:st.get(vt),path:At}})}return at.animations.push({name:tt.name||"clip_"+at.animations.length,samplers:ut,channels:lt}),at.animations.length-1}processSkin(tt){const rt=this.json,at=this.nodeMap,st=rt.nodes[at.get(tt)],ot=tt.skeleton;if(ot===void 0)return null;const lt=tt.skeleton.bones[0];if(lt===void 0)return null;const ut=[],ht=new Float32Array(ot.bones.length*16),mt=new Matrix4;for(let vt=0;vt<ot.bones.length;++vt)ut.push(at.get(ot.bones[vt])),mt.copy(ot.boneInverses[vt]),mt.multiply(tt.bindMatrix).toArray(ht,vt*16);return rt.skins===void 0&&(rt.skins=[]),rt.skins.push({inverseBindMatrices:this.processAccessor(new BufferAttribute(ht,16)),joints:ut,skeleton:at.get(lt)}),st.skin=rt.skins.length-1}processNode(tt){const rt=this.json,at=this.options,st=this.nodeMap;rt.nodes||(rt.nodes=[]);const ot={};if(at.trs){const ut=tt.quaternion.toArray(),ht=tt.position.toArray(),mt=tt.scale.toArray();equalArray(ut,[0,0,0,1])||(ot.rotation=ut),equalArray(ht,[0,0,0])||(ot.translation=ht),equalArray(mt,[1,1,1])||(ot.scale=mt)}else tt.matrixAutoUpdate&&tt.updateMatrix(),isIdentityMatrix(tt.matrix)===!1&&(ot.matrix=tt.matrix.elements);if(tt.name!==""&&(ot.name=String(tt.name)),this.serializeUserData(tt,ot),tt.isMesh||tt.isLine||tt.isPoints){const ut=this.processMesh(tt);ut!==null&&(ot.mesh=ut)}else tt.isCamera&&(ot.camera=this.processCamera(tt));if(tt.isSkinnedMesh&&this.skins.push(tt),tt.children.length>0){const ut=[];for(let ht=0,mt=tt.children.length;ht<mt;ht++){const bt=tt.children[ht];if(bt.visible||at.onlyVisible===!1){const vt=this.processNode(bt);vt!==null&&ut.push(vt)}}ut.length>0&&(ot.children=ut)}this._invokeAll(function(ut){ut.writeNode&&ut.writeNode(tt,ot)});const lt=rt.nodes.push(ot)-1;return st.set(tt,lt),lt}processScene(tt){const rt=this.json,at=this.options;rt.scenes||(rt.scenes=[],rt.scene=0);const st={};tt.name!==""&&(st.name=tt.name),rt.scenes.push(st);const ot=[];for(let lt=0,ut=tt.children.length;lt<ut;lt++){const ht=tt.children[lt];if(ht.visible||at.onlyVisible===!1){const mt=this.processNode(ht);mt!==null&&ot.push(mt)}}ot.length>0&&(st.nodes=ot),this.serializeUserData(tt,st)}processObjects(tt){const rt=new Scene;rt.name="AuxScene";for(let at=0;at<tt.length;at++)rt.children.push(tt[at]);this.processScene(rt)}processInput(tt){const rt=this.options;tt=tt instanceof Array?tt:[tt],this._invokeAll(function(st){st.beforeParse&&st.beforeParse(tt)});const at=[];for(let st=0;st<tt.length;st++)tt[st]instanceof Scene?this.processScene(tt[st]):at.push(tt[st]);at.length>0&&this.processObjects(at);for(let st=0;st<this.skins.length;++st)this.processSkin(this.skins[st]);for(let st=0;st<rt.animations.length;++st)this.processAnimation(rt.animations[st],tt[0]);this._invokeAll(function(st){st.afterParse&&st.afterParse(tt)})}_invokeAll(tt){for(let rt=0,at=this.plugins.length;rt<at;rt++)tt(this.plugins[rt])}}class GLTFLightExtension{constructor(tt){this.writer=tt,this.name="KHR_lights_punctual"}writeNode(tt,rt){if(!tt.isLight)return;if(!tt.isDirectionalLight&&!tt.isPointLight&&!tt.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",tt);return}const at=this.writer,st=at.json,ot=at.extensionsUsed,lt={};tt.name&&(lt.name=tt.name),lt.color=tt.color.toArray(),lt.intensity=tt.intensity,tt.isDirectionalLight?lt.type="directional":tt.isPointLight?(lt.type="point",tt.distance>0&&(lt.range=tt.distance)):tt.isSpotLight&&(lt.type="spot",tt.distance>0&&(lt.range=tt.distance),lt.spot={},lt.spot.innerConeAngle=(tt.penumbra-1)*tt.angle*-1,lt.spot.outerConeAngle=tt.angle),tt.decay!==void 0&&tt.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),tt.target&&(tt.target.parent!==tt||tt.target.position.x!==0||tt.target.position.y!==0||tt.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),ot[this.name]||(st.extensions=st.extensions||{},st.extensions[this.name]={lights:[]},ot[this.name]=!0);const ut=st.extensions[this.name].lights;ut.push(lt),rt.extensions=rt.extensions||{},rt.extensions[this.name]={light:ut.length-1}}}class GLTFMaterialsUnlitExtension{constructor(tt){this.writer=tt,this.name="KHR_materials_unlit"}writeMaterial(tt,rt){if(!tt.isMeshBasicMaterial)return;const st=this.writer.extensionsUsed;rt.extensions=rt.extensions||{},rt.extensions[this.name]={},st[this.name]=!0,rt.pbrMetallicRoughness.metallicFactor=0,rt.pbrMetallicRoughness.roughnessFactor=.9}}class GLTFMaterialsPBRSpecularGlossiness{constructor(tt){this.writer=tt,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(tt,rt){if(!tt.isGLTFSpecularGlossinessMaterial)return;const at=this.writer,st=at.extensionsUsed,ot={};rt.pbrMetallicRoughness.baseColorFactor&&(ot.diffuseFactor=rt.pbrMetallicRoughness.baseColorFactor);const lt=[1,1,1];if(tt.specular.toArray(lt,0),ot.specularFactor=lt,ot.glossinessFactor=tt.glossiness,rt.pbrMetallicRoughness.baseColorTexture&&(ot.diffuseTexture=rt.pbrMetallicRoughness.baseColorTexture),tt.specularMap){const ut={index:at.processTexture(tt.specularMap)};at.applyTextureTransform(ut,tt.specularMap),ot.specularGlossinessTexture=ut}rt.extensions=rt.extensions||{},rt.extensions[this.name]=ot,st[this.name]=!0}}class GLTFMaterialsClearcoatExtension{constructor(tt){this.writer=tt,this.name="KHR_materials_clearcoat"}writeMaterial(tt,rt){if(!tt.isMeshPhysicalMaterial)return;const at=this.writer,st=at.extensionsUsed,ot={};if(ot.clearcoatFactor=tt.clearcoat,tt.clearcoatMap){const lt={index:at.processTexture(tt.clearcoatMap)};at.applyTextureTransform(lt,tt.clearcoatMap),ot.clearcoatTexture=lt}if(ot.clearcoatRoughnessFactor=tt.clearcoatRoughness,tt.clearcoatRoughnessMap){const lt={index:at.processTexture(tt.clearcoatRoughnessMap)};at.applyTextureTransform(lt,tt.clearcoatRoughnessMap),ot.clearcoatRoughnessTexture=lt}if(tt.clearcoatNormalMap){const lt={index:at.processTexture(tt.clearcoatNormalMap)};at.applyTextureTransform(lt,tt.clearcoatNormalMap),ot.clearcoatNormalTexture=lt}rt.extensions=rt.extensions||{},rt.extensions[this.name]=ot,st[this.name]=!0}}class GLTFMaterialsIridescenceExtension{constructor(tt){this.writer=tt,this.name="KHR_materials_iridescence"}writeMaterial(tt,rt){if(!tt.isMeshPhysicalMaterial)return;const at=this.writer,st=at.extensionsUsed,ot={};if(ot.iridescenceFactor=tt.iridescence,tt.iridescenceMap){const lt={index:at.processTexture(tt.iridescenceMap)};at.applyTextureTransform(lt,tt.iridescenceMap),ot.iridescenceTexture=lt}if(ot.iridescenceIor=tt.iridescenceIOR,ot.iridescenceThicknessMinimum=tt.iridescenceThicknessRange[0],ot.iridescenceThicknessMaximum=tt.iridescenceThicknessRange[1],tt.iridescenceThicknessMap){const lt={index:at.processTexture(tt.iridescenceThicknessMap)};at.applyTextureTransform(lt,tt.iridescenceThicknessMap),ot.iridescenceThicknessTexture=lt}rt.extensions=rt.extensions||{},rt.extensions[this.name]=ot,st[this.name]=!0}}class GLTFMaterialsTransmissionExtension{constructor(tt){this.writer=tt,this.name="KHR_materials_transmission"}writeMaterial(tt,rt){if(!tt.isMeshPhysicalMaterial||tt.transmission===0)return;const at=this.writer,st=at.extensionsUsed,ot={};if(ot.transmissionFactor=tt.transmission,tt.transmissionMap){const lt={index:at.processTexture(tt.transmissionMap)};at.applyTextureTransform(lt,tt.transmissionMap),ot.transmissionTexture=lt}rt.extensions=rt.extensions||{},rt.extensions[this.name]=ot,st[this.name]=!0}}class GLTFMaterialsVolumeExtension{constructor(tt){this.writer=tt,this.name="KHR_materials_volume"}writeMaterial(tt,rt){if(!tt.isMeshPhysicalMaterial||tt.transmission===0)return;const at=this.writer,st=at.extensionsUsed,ot={};if(ot.thicknessFactor=tt.thickness,tt.thicknessMap){const lt={index:at.processTexture(tt.thicknessMap)};at.applyTextureTransform(lt,tt.thicknessMap),ot.thicknessTexture=lt}ot.attenuationDistance=tt.attenuationDistance,ot.attenuationColor=tt.attenuationColor.toArray(),rt.extensions=rt.extensions||{},rt.extensions[this.name]=ot,st[this.name]=!0}}GLTFExporter.Utils={insertKeyframe:function(it,tt){const at=it.getValueSize(),st=new it.TimeBufferType(it.times.length+1),ot=new it.ValueBufferType(it.values.length+at),lt=it.createInterpolant(new it.ValueBufferType(at));let ut;if(it.times.length===0){st[0]=tt;for(let ht=0;ht<at;ht++)ot[ht]=0;ut=0}else if(tt<it.times[0]){if(Math.abs(it.times[0]-tt)<.001)return 0;st[0]=tt,st.set(it.times,1),ot.set(lt.evaluate(tt),0),ot.set(it.values,at),ut=0}else if(tt>it.times[it.times.length-1]){if(Math.abs(it.times[it.times.length-1]-tt)<.001)return it.times.length-1;st[st.length-1]=tt,st.set(it.times,0),ot.set(it.values,0),ot.set(lt.evaluate(tt),it.values.length),ut=st.length-1}else for(let ht=0;ht<it.times.length;ht++){if(Math.abs(it.times[ht]-tt)<.001)return ht;if(it.times[ht]<tt&&it.times[ht+1]>tt){st.set(it.times.slice(0,ht+1),0),st[ht+1]=tt,st.set(it.times.slice(ht+1),ht+2),ot.set(it.values.slice(0,(ht+1)*at),0),ot.set(lt.evaluate(tt),(ht+1)*at),ot.set(it.values.slice((ht+1)*at),(ht+2)*at),ut=ht+1;break}}return it.times=st,it.values=ot,ut},mergeMorphTargetTracks:function(it,tt){const rt=[],at={},st=it.tracks;for(let ot=0;ot<st.length;++ot){let lt=st[ot];const ut=PropertyBinding.parseTrackName(lt.name),ht=PropertyBinding.findNode(tt,ut.nodeName);if(ut.propertyName!=="morphTargetInfluences"||ut.propertyIndex===void 0){rt.push(lt);continue}if(lt.createInterpolant!==lt.InterpolantFactoryMethodDiscrete&&lt.createInterpolant!==lt.InterpolantFactoryMethodLinear){if(lt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),lt=lt.clone(),lt.setInterpolation(InterpolateLinear)}const mt=ht.morphTargetInfluences.length,bt=ht.morphTargetDictionary[ut.propertyIndex];if(bt===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+ut.propertyIndex);let vt;if(at[ht.uuid]===void 0){vt=lt.clone();const xt=new vt.ValueBufferType(mt*vt.times.length);for(let Et=0;Et<vt.times.length;Et++)xt[Et*mt+bt]=vt.values[Et];vt.name=(ut.nodeName||"")+".morphTargetInfluences",vt.values=xt,at[ht.uuid]=vt,rt.push(vt);continue}const At=lt.createInterpolant(new lt.ValueBufferType(1));vt=at[ht.uuid];for(let xt=0;xt<vt.times.length;xt++)vt.values[xt*mt+bt]=At.evaluate(vt.times[xt]);for(let xt=0;xt<lt.times.length;xt++){const Et=this.insertKeyframe(vt,lt.times[xt]);vt.values[Et*mt+bt]=lt.values[xt]}}return it.tracks=rt,it}};/* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const compatibleObject=it=>it.material!==void 0&&it.userData&&it.userData.variantMaterials&&!!Array.from(it.userData.variantMaterials.values()).filter(tt=>compatibleMaterial(tt.material)),compatibleMaterial=it=>it&&it.isMaterial&&!Array.isArray(it);class GLTFExporterMaterialsVariantsExtension{constructor(tt){this.writer=tt,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(tt){const rt=new Set;for(const at of tt)at.traverse(st=>{if(!compatibleObject(st))return;const ot=st.userData.variantMaterials,lt=st.userData.variantData;for(const[ut,ht]of lt){const mt=ot.get(ht.index);mt&&compatibleMaterial(mt.material)&&rt.add(ut)}});rt.forEach(at=>this.variantNames.push(at))}writeMesh(tt,rt){if(!compatibleObject(tt))return;const at=tt.userData,st=at.variantMaterials,ot=at.variantData,lt=new Map,ut=new Map,ht=Array.from(ot.values()).sort((vt,At)=>vt.index-At.index);for(const[vt,At]of ht.entries())ut.set(At.index,vt);for(const vt of ot.values()){const At=st.get(vt.index);if(!At||!compatibleMaterial(At.material))continue;const xt=this.writer.processMaterial(At.material);lt.has(xt)||lt.set(xt,{material:xt,variants:[]}),lt.get(xt).variants.push(ut.get(vt.index))}const mt=Array.from(lt.values()).map(vt=>vt.variants.sort((At,xt)=>At-xt)&&vt).sort((vt,At)=>vt.material-At.material);if(mt.length===0)return;const bt=compatibleMaterial(at.originalMaterial)?this.writer.processMaterial(at.originalMaterial):-1;for(const vt of rt.primitives)bt>=0&&(vt.material=bt),vt.extensions=vt.extensions||{},vt.extensions[this.name]={mappings:mt}}afterParse(){if(this.variantNames.length===0)return;const tt=this.writer.json;tt.extensions=tt.extensions||{};const rt=this.variantNames.map(at=>({name:at}));tt.extensions[this.name]={variants:rt},this.writer.extensionsUsed[this.name]=!0}}class SessionLightProbe{constructor(tt,rt,at,st,ot){this.xrLight=tt,this.renderer=rt,this.lightProbe=at,this.xrWebGLBinding=null,this.estimationStartCallback=ot,this.frameCallback=this.onXRFrame.bind(this);const lt=rt.xr.getSession();if(st&&"XRWebGLBinding"in window){const ut=new WebGLCubeRenderTarget(16);tt.environment=ut.texture;const ht=rt.getContext();switch(lt.preferredReflectionFormat){case"srgba8":ht.getExtension("EXT_sRGB");break;case"rgba16f":ht.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(lt,ht),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}lt.requestAnimationFrame(this.frameCallback)}updateReflection(){const tt=this.renderer.properties.get(this.xrLight.environment);if(tt){const rt=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);rt&&(tt.__webglTexture=rt,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(tt,rt){if(!this.xrLight)return;rt.session.requestAnimationFrame(this.frameCallback);const st=rt.getLightEstimate(this.lightProbe);if(st){this.xrLight.lightProbe.sh.fromArray(st.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const ot=Math.max(1,Math.max(st.primaryLightIntensity.x,Math.max(st.primaryLightIntensity.y,st.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(st.primaryLightIntensity.x/ot,st.primaryLightIntensity.y/ot,st.primaryLightIntensity.z/ot),this.xrLight.directionalLight.intensity=ot,this.xrLight.directionalLight.position.copy(st.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class XREstimatedLight extends Group{constructor(tt,rt=!0){super(),this.lightProbe=new LightProbe,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new DirectionalLight,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let at=null,st=!1;tt.xr.addEventListener("sessionstart",()=>{const ot=tt.xr.getSession();"requestLightProbe"in ot&&ot.requestLightProbe({reflectionFormat:ot.preferredReflectionFormat}).then(lt=>{at=new SessionLightProbe(this,tt,lt,rt,()=>{st=!0,this.dispatchEvent({type:"estimationstart"})})})}),tt.xr.addEventListener("sessionend",()=>{at&&(at.dispose(),at=null),st&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{at&&(at.dispose(),at=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const SETTLING_TIME=1e4,MIN_DECAY_MILLISECONDS=.001,DECAY_MILLISECONDS=50;class Damper{constructor(tt=DECAY_MILLISECONDS){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(tt)}setDecayTime(tt){this.naturalFrequency=1/Math.max(MIN_DECAY_MILLISECONDS,tt)}update(tt,rt,at,st){const ot=2e-4*this.naturalFrequency;if(tt==null||st===0||tt===rt&&this.velocity===0)return rt;if(at<0)return tt;const lt=tt-rt,ut=this.velocity+this.naturalFrequency*lt,ht=lt+at*ut,mt=Math.exp(-this.naturalFrequency*at),bt=(ut-this.naturalFrequency*ht)*mt,vt=-this.naturalFrequency*(bt+ut*mt);return Math.abs(bt)<ot*Math.abs(st)&&vt*lt>=0?(this.velocity=0,rt):(this.velocity=bt,rt+ht*mt)}}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const RADIUS=.2,LINE_WIDTH=.03,MAX_OPACITY=.75,SEGMENTS=12,DELTA_PHI=Math.PI/(2*SEGMENTS),vector2$1=new Vector2,addCorner=(it,tt,rt)=>{let at=tt>0?rt>0?0:-Math.PI/2:rt>0?Math.PI/2:Math.PI;for(let st=0;st<=SEGMENTS;++st)it.push(tt+(RADIUS-LINE_WIDTH)*Math.cos(at),rt+(RADIUS-LINE_WIDTH)*Math.sin(at),0,tt+RADIUS*Math.cos(at),rt+RADIUS*Math.sin(at),0),at+=DELTA_PHI};class PlacementBox extends Mesh{constructor(tt,rt){const at=new BufferGeometry,st=[],ot=[],{size:lt,boundingBox:ut}=tt,ht=lt.x/2,mt=(rt==="back"?lt.y:lt.z)/2;addCorner(ot,ht,mt),addCorner(ot,-ht,mt),addCorner(ot,-ht,-mt),addCorner(ot,ht,-mt);const bt=ot.length/3;for(let xt=0;xt<bt-2;xt+=2)st.push(xt,xt+1,xt+3,xt,xt+3,xt+2);const vt=bt-2;st.push(vt,vt+1,1,vt,1,0),at.setAttribute("position",new Float32BufferAttribute(ot,3)),at.setIndex(st),super(at),this.side=rt;const At=this.material;switch(At.side=DoubleSide,At.transparent=!0,At.opacity=0,this.goalOpacity=0,this.opacityDamper=new Damper,this.hitPlane=new Mesh(new PlaneGeometry(2*(ht+RADIUS),2*(mt+RADIUS))),this.hitPlane.visible=!1,this.hitPlane.material.side=DoubleSide,this.add(this.hitPlane),ut.getCenter(this.position),rt){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=ut.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=ut.min.z,this.position.z=this.shadowHeight}tt.target.add(this),this.offsetHeight=0}getHit(tt,rt,at){vector2$1.set(rt,-at),this.hitPlane.visible=!0;const st=tt.positionAndNormalFromPoint(vector2$1,this.hitPlane);return this.hitPlane.visible=!1,st==null?null:st.position}getExpandedHit(tt,rt,at){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const st=this.getHit(tt,rt,at);return this.hitPlane.scale.set(1,1,1),st}set offsetHeight(tt){tt-=.001,this.side==="back"?this.position.z=this.shadowHeight+tt:this.position.y=this.shadowHeight+tt}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(tt){this.goalOpacity=tt?MAX_OPACITY:0}updateOpacity(tt){const rt=this.material;rt.opacity=this.opacityDamper.update(rt.opacity,this.goalOpacity,tt,1),this.visible=rt.opacity>0}dispose(){var tt;const{geometry:rt,material:at}=this.hitPlane;rt.dispose(),at.dispose(),this.geometry.dispose(),this.material.dispose(),(tt=this.parent)===null||tt===void 0||tt.remove(this)}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const INIT_FRAMES=30,AR_SHADOW_INTENSITY=.8,ROTATION_RATE=1.5,HIT_ANGLE_DEG=20,SCALE_SNAP_HIGH=1.3,SCALE_SNAP_LOW=1/SCALE_SNAP_HIGH,MIN_VIEWPORT_SCALE=.25,MAX_DISTANCE=10,ARStatus={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},ARTracking={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},vector3$2=new Vector3,matrix4=new Matrix4,hitPosition=new Vector3,camera=new PerspectiveCamera(45,1,.1,100);class ARRenderer extends EventDispatcher{constructor(tt){super(),this.renderer=tt,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new Vector3,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new Vector3,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new Vector3,this.goalYaw=0,this.goalScale=1,this.xDamper=new Damper,this.yDamper=new Damper,this.zDamper=new Damper,this.yawDamper=new Damper,this.scaleDamper=new Damper,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new PlacementBox(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=rt=>{const at=this.transientHitTestSource;if(at==null)return;const st=this.frame.getHitTestResultsForTransientInput(at),ot=this.presentedScene,lt=this.placementBox;if(st.length===1){this.inputSource=rt.inputSource;const{axes:ut}=this.inputSource.gamepad,ht=lt.getHit(this.presentedScene,ut[0],ut[1]);lt.show=!0,ht!=null?(this.isTranslating=!0,this.lastDragPosition.copy(ht)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=ut[0]*ROTATION_RATE)}else if(st.length===2){lt.show=!0,this.isTwoFingering=!0;const{separation:ut}=this.fingerPolar(st);this.firstRatio=ut/ot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=tt.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){assertIsArCandidate();const tt=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(tt),this.threeRenderer.xr.cameraAutoUpdate=!1,tt}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return assertIsArCandidate(),await navigator.xr.isSessionSupported("immersive-ar")}catch(tt){return console.warn("Request to present in WebXR denied:"),console.warn(tt),console.warn("Falling back to next ar-mode"),!1}}async present(tt,rt=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let at=new Promise((mt,bt)=>{requestAnimationFrame(()=>mt())});tt.setHotspotsVisibility(!1),tt.queueRender(),await at,this._presentedScene=tt,this.overlay=tt.element.shadowRoot.querySelector("div.default"),rt===!0&&(this.xrLight=new XREstimatedLight(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const mt=this.presentedScene;mt.add(this.xrLight),mt.environment=this.xrLight.environment}));const st=await this.resolveARSession();st.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const ot=tt.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");ot.classList.add("enabled"),ot.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=ot;const lt=await st.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=tt.yaw,this.goalYaw=tt.yaw,this.goalScale=1,tt.background=null,this.oldShadowIntensity=tt.shadowIntensity,tt.setShadowIntensity(.01),this.oldTarget.copy(tt.getTarget()),tt.element.addEventListener("load",this.onUpdateScene);const ut=HIT_ANGLE_DEG*Math.PI/180,ht=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(ut),z:-Math.cos(ut)});st.requestHitTestSource({space:lt,offsetRay:ht}).then(mt=>{this.initialHitSource=mt}),this.currentSession=st,this.placementBox=new PlacementBox(tt,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:ARStatus.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;const tt=new Promise(rt=>{this.resolveCleanup=rt});try{await this.currentSession.end(),await tt}catch(rt){console.warn("Error while trying to end WebXR AR session"),console.warn(rt),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const tt=this.presentedScene;if(tt!=null){const rt=tt.getTarget();this.oldTarget.copy(rt),this.placeOnWall?rt.z=tt.boundingBox.min.z:rt.y=tt.boundingBox.min.y,tt.setTarget(rt.x,rt.y,rt.z)}}postSessionCleanup(){const tt=this.currentSession;tt!=null&&(tt.removeEventListener("selectstart",this.onSelectStart),tt.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const rt=this.presentedScene;if(this._presentedScene=null,rt!=null){const{element:lt}=rt;this.xrLight!=null&&(rt.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),rt.position.set(0,0,0),rt.scale.set(1,1,1),rt.setShadowOffset(0);const ut=this.turntableRotation;ut!=null&&(rt.yaw=ut);const ht=this.oldShadowIntensity;ht!=null&&rt.setShadowIntensity(ht),rt.setEnvironmentAndSkybox(lt[$currentEnvironmentMap],lt[$currentBackground]);const mt=this.oldTarget;rt.setTarget(mt.x,mt.y,mt.z),rt.xrCamera=null,rt.element.removeEventListener("load",this.onUpdateScene),rt.orientHotspots(0),lt.requestUpdate("cameraTarget"),lt.requestUpdate("maxCameraOrbit"),lt[$onResize](lt.getBoundingClientRect())}this.renderer.height=0;const at=this.exitWebXRButtonContainer;at!=null&&(at.classList.remove("enabled"),at.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const st=this.transientHitTestSource;st!=null&&(st.cancel(),this.transientHitTestSource=null);const ot=this.initialHitSource;ot!=null&&(ot.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:ARStatus.NOT_PRESENTING})}updateView(tt){const rt=this.presentedScene,at=this.threeRenderer.xr;at.updateCamera(camera),rt.xrCamera=at.getCamera();const{elements:st}=rt.getCamera().matrixWorld;if(rt.orientHotspots(Math.atan2(st[1],st[5])),this.initialized||(this.placeInitially(),this.initialized=!0),tt.requestViewportScale&&tt.recommendedViewportScale){const ut=tt.recommendedViewportScale;tt.requestViewportScale(Math.max(ut,MIN_VIEWPORT_SCALE))}const lt=this.currentSession.renderState.baseLayer.getViewport(tt);this.threeRenderer.setViewport(lt.x,lt.y,lt.width,lt.height)}placeInitially(){const tt=this.presentedScene,{position:rt,element:at}=tt,st=tt.getCamera(),{width:ot,height:lt}=this.overlay.getBoundingClientRect();tt.setSize(ot,lt),st.projectionMatrixInverse.copy(st.projectionMatrix).invert();const{theta:ut,radius:ht}=at.getCameraOrbit(),mt=st.getWorldDirection(vector3$2);tt.yaw=Math.atan2(-mt.x,-mt.z)-ut,this.goalYaw=tt.yaw,rt.copy(st.position).add(mt.multiplyScalar(ht)),this.updateTarget();const bt=tt.getTarget();rt.add(bt).sub(this.oldTarget),this.goalPosition.copy(rt),tt.setHotspotsVisibility(!0);const{session:vt}=this.frame;vt.addEventListener("selectstart",this.onSelectStart),vt.addEventListener("selectend",this.onSelectEnd),vt.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(At=>{this.transientHitTestSource=At})}getTouchLocation(){const{axes:tt}=this.inputSource.gamepad;let rt=this.placementBox.getExpandedHit(this.presentedScene,tt[0],tt[1]);return rt!=null&&(vector3$2.copy(rt).sub(this.presentedScene.getCamera().position),vector3$2.length()>MAX_DISTANCE)?null:rt}getHitPoint(tt){const rt=this.threeRenderer.xr.getReferenceSpace(),at=tt.getPose(rt);if(at==null)return null;const st=matrix4.fromArray(at.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(st.elements[4],st.elements[6])),st.elements[5]>.75!==this.placeOnWall?hitPosition.setFromMatrixPosition(st):null}moveToFloor(tt){const rt=this.initialHitSource;if(rt==null)return;const at=tt.getHitTestResults(rt);if(at.length==0)return;const st=at[0],ot=this.getHitPoint(st);ot!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(ot):this.goalPosition.y=ot.y),rt.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:ARStatus.OBJECT_PLACED}))}fingerPolar(tt){const rt=tt[0].inputSource.gamepad.axes,at=tt[1].inputSource.gamepad.axes,st=at[0]-rt[0],ot=at[1]-rt[1],lt=Math.atan2(ot,st);let ut=this.lastAngle-lt;return ut>Math.PI?ut-=2*Math.PI:ut<-Math.PI&&(ut+=2*Math.PI),this.lastAngle=lt,{separation:Math.sqrt(st*st+ot*ot),deltaYaw:ut}}processInput(tt){const rt=this.transientHitTestSource;if(rt==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const at=tt.getHitTestResultsForTransientInput(rt),st=this.presentedScene,ot=st.scale.x;if(this.isTwoFingering){if(at.length<2)this.isTwoFingering=!1;else{const{separation:lt,deltaYaw:ut}=this.fingerPolar(at);if(this.placeOnWall===!1&&(this.goalYaw+=ut),st.canScale){const ht=lt/this.firstRatio;this.goalScale=ht<SCALE_SNAP_HIGH&&ht>SCALE_SNAP_LOW?1:ht}}return}else if(at.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:lt}=this.fingerPolar(at);this.firstRatio=lt/ot;return}if(this.isRotating){const lt=this.inputSource.gamepad.axes[0]*ROTATION_RATE;this.goalYaw+=lt-this.lastAngle,this.lastAngle=lt}else this.isTranslating&&at.forEach(lt=>{if(lt.inputSource!==this.inputSource)return;let ut=null;if(lt.results.length>0&&(ut=this.getHitPoint(lt.results[0])),ut==null&&(ut=this.getTouchLocation()),ut!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const ht=ut.y-this.lastDragPosition.y;if(ht<0){this.placementBox.offsetHeight=ht/ot,this.presentedScene.setShadowOffset(ht);const mt=vector3$2.copy(st.getCamera().position),bt=-ht/(mt.y-ut.y);mt.multiplyScalar(bt),ut.multiplyScalar(1-bt).add(mt)}}this.goalPosition.add(ut),this.lastDragPosition.copy(ut)}})}moveScene(tt){const rt=this.presentedScene,{position:at,yaw:st}=rt,ot=rt.boundingSphere.radius,lt=this.goalPosition,ut=rt.scale.x,ht=this.placementBox;if(!lt.equals(at)||this.goalScale!==ut){let{x:mt,y:bt,z:vt}=at;mt=this.xDamper.update(mt,lt.x,tt,ot),bt=this.yDamper.update(bt,lt.y,tt,ot),vt=this.zDamper.update(vt,lt.z,tt,ot),at.set(mt,bt,vt);const At=this.scaleDamper.update(ut,this.goalScale,tt,1);if(rt.scale.set(At,At,At),!this.isTranslating){const xt=lt.y-bt;this.placementComplete&&this.placeOnWall===!1?(ht.offsetHeight=xt/At,rt.setShadowOffset(xt)):xt===0&&(this.placementComplete=!0,ht.show=!1,rt.setShadowIntensity(AR_SHADOW_INTENSITY))}}ht.updateOpacity(tt),rt.updateTarget(tt),rt.yaw=this.yawDamper.update(st,this.goalYaw,tt,Math.PI)}onWebXRFrame(tt,rt){this.frame=rt,++this.frames;const at=this.threeRenderer.xr.getReferenceSpace(),st=rt.getViewerPose(at);st==null&&this.tracking===!0&&this.frames>INIT_FRAMES&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:ARTracking.NOT_TRACKING}));const ot=this.presentedScene;if(st==null||ot==null||!ot.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:ARTracking.TRACKING}));let lt=!0;for(const ut of st.views){if(this.updateView(ut),lt){this.moveToFloor(rt),this.processInput(rt);const ht=tt-this.lastTick;this.moveScene(ht),this.renderer.preRender(ot,tt,ht),this.lastTick=tt,ot.renderShadow(this.threeRenderer)}this.threeRenderer.render(ot,ot.getCamera()),lt=!1}}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Debugger{constructor(tt){tt.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:tt,THREE:{ShaderMaterial,Texture:Texture$1,Mesh,Scene,PlaneGeometry,OrthographicCamera,WebGLRenderTarget}}}))})}addScene(tt){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:tt}}))}removeScene(tt){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:tt}}))}}function clone(it){const tt=new Map,rt=new Map,at=it.clone();return parallelTraverse(it,at,function(st,ot){tt.set(ot,st),rt.set(st,ot)}),at.traverse(function(st){if(!st.isSkinnedMesh)return;const ot=st,lt=tt.get(st),ut=lt.skeleton.bones;ot.skeleton=lt.skeleton.clone(),ot.bindMatrix.copy(lt.bindMatrix),ot.skeleton.bones=ut.map(function(ht){return rt.get(ht)}),ot.bind(ot.skeleton,ot.bindMatrix)}),at}function parallelTraverse(it,tt,rt){rt(it,tt);for(let at=0;at<it.children.length;at++)parallelTraverse(it.children[at],tt.children[at],rt)}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $prepared=Symbol("prepared"),$prepare=Symbol("prepare"),$preparedGLTF=Symbol("preparedGLTF"),$clone=Symbol("clone");class GLTFInstance{constructor(tt){this[$preparedGLTF]=tt}static prepare(tt){if(tt.scene==null)throw new Error("Model does not have a scene");if(tt[$prepared])return tt;const rt=this[$prepare](tt);return rt[$prepared]=!0,rt}static[$prepare](tt){const{scene:rt}=tt,at=[rt];return Object.assign(Object.assign({},tt),{scene:rt,scenes:at})}get parser(){return this[$preparedGLTF].parser}get animations(){return this[$preparedGLTF].animations}get scene(){return this[$preparedGLTF].scene}get scenes(){return this[$preparedGLTF].scenes}get cameras(){return this[$preparedGLTF].cameras}get asset(){return this[$preparedGLTF].asset}get userData(){return this[$preparedGLTF].userData}clone(){const tt=this.constructor,rt=this[$clone]();return new tt(rt)}dispose(){this.scenes.forEach(tt=>{tt.traverse(rt=>{if(!rt.isMesh)return;const at=rt;(Array.isArray(at.material)?at.material:[at.material]).forEach(ot=>{for(const lt in ot){const ut=ot[lt];if(ut instanceof Texture$1){const ht=ut.source.data;ht.close!=null&&ht.close(),ut.dispose()}}ot.dispose()}),at.geometry.dispose()})})}[$clone](){const tt=this[$preparedGLTF],rt=clone(this.scene);cloneVariantMaterials(rt,this.scene);const at=[rt],st=tt.userData?Object.assign({},tt.userData):{};return Object.assign(Object.assign({},tt),{scene:rt,scenes:at,userData:st})}}const cloneVariantMaterials=(it,tt)=>{traversePair(it,tt,(rt,at)=>{at.userData.variantMaterials!==void 0&&(rt.userData.variantMaterials=new Map(at.userData.variantMaterials)),at.userData.variantData!==void 0&&(rt.userData.variantData=at.userData.variantData),at.userData.originalMaterial!==void 0&&(rt.userData.originalMaterial=at.userData.originalMaterial)})},traversePair=(it,tt,rt)=>{rt(it,tt);for(let at=0;at<it.children.length;at++)traversePair(it.children[at],tt.children[at],rt)},$threeGLTF=Symbol("threeGLTF"),$gltf=Symbol("gltf"),$gltfElementMap=Symbol("gltfElementMap"),$threeObjectMap=Symbol("threeObjectMap"),$parallelTraverseThreeScene=Symbol("parallelTraverseThreeScene"),$correlateOriginalThreeGLTF=Symbol("correlateOriginalThreeGLTF"),$correlateCloneThreeGLTF=Symbol("correlateCloneThreeGLTF");class CorrelatedSceneGraph{constructor(tt,rt,at,st){this[$threeGLTF]=tt,this[$gltf]=rt,this[$gltfElementMap]=st,this[$threeObjectMap]=at}static from(tt,rt){return rt!=null?this[$correlateCloneThreeGLTF](tt,rt):this[$correlateOriginalThreeGLTF](tt)}static[$correlateOriginalThreeGLTF](tt){const rt=tt.parser.json,at=tt.parser.associations,st=new Map,ot={name:"Default"},lt={type:"materials",index:-1};for(const ut of at.keys())ut instanceof Material$1&&at.get(ut)==null&&(lt.index<0&&(rt.materials==null&&(rt.materials=[]),lt.index=rt.materials.length,rt.materials.push(ot)),ut.name=ot.name,at.set(ut,{materials:lt.index}));for(const[ut,ht]of at){if(ht){const mt=ut;mt.userData=mt.userData||{},mt.userData.associations=ht}for(const mt in ht)if(mt!=null&&mt!=="primitives"){const bt=mt,At=(rt[bt]||[])[ht[bt]];if(At==null)continue;let xt=st.get(At);xt==null&&(xt=new Set,st.set(At,xt)),xt.add(ut)}}return new CorrelatedSceneGraph(tt,rt,at,st)}static[$correlateCloneThreeGLTF](tt,rt){const at=rt.threeGLTF,st=rt.gltf,ot=JSON.parse(JSON.stringify(st)),lt=new Map,ut=new Map;for(let ht=0;ht<at.scenes.length;ht++)this[$parallelTraverseThreeScene](at.scenes[ht],tt.scenes[ht],(mt,bt)=>{const vt=rt.threeObjectMap.get(mt);if(vt!=null){for(const At in vt)if(At!=null&&At!=="primitives"){const xt=At,Et=vt[xt],Tt=ot[xt][Et],wt=lt.get(bt)||{};wt[xt]=Et,lt.set(bt,wt);const Ct=ut.get(Tt)||new Set;Ct.add(bt),ut.set(Tt,Ct)}}});return new CorrelatedSceneGraph(tt,ot,lt,ut)}static[$parallelTraverseThreeScene](tt,rt,at){const st=lt=>lt.isMesh,ot=(lt,ut)=>{if(at(lt,ut),lt.isObject3D){if(st(lt))if(Array.isArray(lt.material))for(let ht=0;ht<lt.material.length;++ht)ot(lt.material[ht],ut.material[ht]);else ot(lt.material,ut.material);for(let ht=0;ht<lt.children.length;++ht)ot(lt.children[ht],ut.children[ht])}};ot(tt,rt)}get threeGLTF(){return this[$threeGLTF]}get gltf(){return this[$gltf]}get gltfElementMap(){return this[$gltfElementMap]}get threeObjectMap(){return this[$threeObjectMap]}}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $correlatedSceneGraph$1=Symbol("correlatedSceneGraph");class ModelViewerGLTFInstance extends GLTFInstance{static[$prepare](tt){const rt=super[$prepare](tt);rt[$correlatedSceneGraph$1]==null&&(rt[$correlatedSceneGraph$1]=CorrelatedSceneGraph.from(rt));const{scene:at}=rt,st=new Sphere(void 0,1/0);return at.traverse(ot=>{ot.renderOrder=1e3,ot.frustumCulled=!1,ot.name||(ot.name=ot.uuid);const lt=ot;if(lt.isMesh){const{geometry:ut}=lt;lt.castShadow=!0,lt.isSkinnedMesh&&(ut.boundingSphere=st,ut.boundingBox=null);const ht=lt.material;if(ht.isMeshBasicMaterial===!0&&(ht.toneMapped=!1),ht.shadowSide=FrontSide,ht.aoMap){const{gltf:mt,threeObjectMap:bt}=rt[$correlatedSceneGraph$1],vt=bt.get(ht);if(mt.materials!=null&&vt!=null&&vt.materials!=null){const At=mt.materials[vt.materials];At.occlusionTexture&&At.occlusionTexture.texCoord===0&&ut.attributes.uv!=null&&ut.setAttribute("uv2",ut.attributes.uv)}}}}),rt}get correlatedSceneGraph(){return this[$preparedGLTF][$correlatedSceneGraph$1]}[$clone](){const tt=super[$clone](),rt=new Map;return tt.scene.traverse(at=>{if(at.isMesh){const st=at,ot=st.material;if(ot!=null){if(rt.has(ot.uuid)){st.material=rt.get(ot.uuid);return}st.material=ot.clone(),rt.set(ot.uuid,st.material)}}}),tt[$correlatedSceneGraph$1]=CorrelatedSceneGraph.from(tt,this.correlatedSceneGraph),tt}}class RGBELoader extends DataTextureLoader{constructor(tt){super(tt),this.type=HalfFloatType}parse(tt){const ut=function(St,Rt){switch(St){case 1:console.error("THREE.RGBELoader Read Error: "+(Rt||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(Rt||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(Rt||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(Rt||""))}return-1},vt=`
`,At=function(St,Rt,Dt){Rt=Rt||1024;let qt=St.pos,Vt=-1,Yt=0,jt="",kt=String.fromCharCode.apply(null,new Uint16Array(St.subarray(qt,qt+128)));for(;0>(Vt=kt.indexOf(vt))&&Yt<Rt&&qt<St.byteLength;)jt+=kt,Yt+=kt.length,qt+=128,kt+=String.fromCharCode.apply(null,new Uint16Array(St.subarray(qt,qt+128)));return-1<Vt?(Dt!==!1&&(St.pos+=Yt+Vt+1),jt+kt.slice(0,Vt)):!1},xt=function(St){const Rt=/^#\?(\S+)/,Dt=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Wt=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,qt=/^\s*FORMAT=(\S+)\s*$/,Vt=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Yt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let jt,kt;if(St.pos>=St.byteLength||!(jt=At(St)))return ut(1,"no header found");if(!(kt=jt.match(Rt)))return ut(3,"bad initial token");for(Yt.valid|=1,Yt.programtype=kt[1],Yt.string+=jt+`
`;jt=At(St),jt!==!1;){if(Yt.string+=jt+`
`,jt.charAt(0)==="#"){Yt.comments+=jt+`
`;continue}if((kt=jt.match(Dt))&&(Yt.gamma=parseFloat(kt[1])),(kt=jt.match(Wt))&&(Yt.exposure=parseFloat(kt[1])),(kt=jt.match(qt))&&(Yt.valid|=2,Yt.format=kt[1]),(kt=jt.match(Vt))&&(Yt.valid|=4,Yt.height=parseInt(kt[1],10),Yt.width=parseInt(kt[2],10)),Yt.valid&2&&Yt.valid&4)break}return Yt.valid&2?Yt.valid&4?Yt:ut(3,"missing image size specifier"):ut(3,"missing format specifier")},Et=function(St,Rt,Dt){const Wt=Rt;if(Wt<8||Wt>32767||St[0]!==2||St[1]!==2||St[2]&128)return new Uint8Array(St);if(Wt!==(St[2]<<8|St[3]))return ut(3,"wrong scanline width");const qt=new Uint8Array(4*Rt*Dt);if(!qt.length)return ut(4,"unable to allocate buffer space");let Vt=0,Yt=0;const jt=4*Wt,kt=new Uint8Array(4),zt=new Uint8Array(jt);let Nt=Dt;for(;Nt>0&&Yt<St.byteLength;){if(Yt+4>St.byteLength)return ut(1);if(kt[0]=St[Yt++],kt[1]=St[Yt++],kt[2]=St[Yt++],kt[3]=St[Yt++],kt[0]!=2||kt[1]!=2||(kt[2]<<8|kt[3])!=Wt)return ut(3,"bad rgbe scanline format");let Mt=0,Lt;for(;Mt<jt&&Yt<St.byteLength;){Lt=St[Yt++];const Qt=Lt>128;if(Qt&&(Lt-=128),Lt===0||Mt+Lt>jt)return ut(3,"bad scanline data");if(Qt){const Ut=St[Yt++];for(let Bt=0;Bt<Lt;Bt++)zt[Mt++]=Ut}else zt.set(St.subarray(Yt,Yt+Lt),Mt),Mt+=Lt,Yt+=Lt}const Ht=Wt;for(let Qt=0;Qt<Ht;Qt++){let Ut=0;qt[Vt]=zt[Qt+Ut],Ut+=Wt,qt[Vt+1]=zt[Qt+Ut],Ut+=Wt,qt[Vt+2]=zt[Qt+Ut],Ut+=Wt,qt[Vt+3]=zt[Qt+Ut],Vt+=4}Nt--}return qt},Tt=function(St,Rt,Dt,Wt){const qt=St[Rt+3],Vt=Math.pow(2,qt-128)/255;Dt[Wt+0]=St[Rt+0]*Vt,Dt[Wt+1]=St[Rt+1]*Vt,Dt[Wt+2]=St[Rt+2]*Vt,Dt[Wt+3]=1},wt=function(St,Rt,Dt,Wt){const qt=St[Rt+3],Vt=Math.pow(2,qt-128)/255;Dt[Wt+0]=DataUtils.toHalfFloat(Math.min(St[Rt+0]*Vt,65504)),Dt[Wt+1]=DataUtils.toHalfFloat(Math.min(St[Rt+1]*Vt,65504)),Dt[Wt+2]=DataUtils.toHalfFloat(Math.min(St[Rt+2]*Vt,65504)),Dt[Wt+3]=DataUtils.toHalfFloat(1)},Ct=new Uint8Array(tt);Ct.pos=0;const It=xt(Ct);if(It!==-1){const St=It.width,Rt=It.height,Dt=Et(Ct.subarray(Ct.pos),St,Rt);if(Dt!==-1){let Wt,qt,Vt;switch(this.type){case FloatType:Vt=Dt.length/4;const Yt=new Float32Array(Vt*4);for(let kt=0;kt<Vt;kt++)Tt(Dt,kt*4,Yt,kt*4);Wt=Yt,qt=FloatType;break;case HalfFloatType:Vt=Dt.length/4;const jt=new Uint16Array(Vt*4);for(let kt=0;kt<Vt;kt++)wt(Dt,kt*4,jt,kt*4);Wt=jt,qt=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:St,height:Rt,data:Wt,header:It.string,gamma:It.gamma,exposure:It.exposure,type:qt}}}return null}setDataType(tt){return this.type=tt,this}load(tt,rt,at,st){function ot(lt,ut){switch(lt.type){case FloatType:case HalfFloatType:lt.encoding=LinearEncoding,lt.minFilter=LinearFilter,lt.magFilter=LinearFilter,lt.generateMipmaps=!1,lt.flipY=!0;break}rt&&rt(lt,ut)}return super.load(tt,ot,at,st)}}/* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class EnvironmentScene extends Scene{constructor(){super(),this.position.y=-3.5;const tt=new BoxGeometry;tt.deleteAttribute("uv");const rt=new MeshStandardMaterial({metalness:0,side:BackSide}),at=new MeshStandardMaterial({metalness:0}),st=new PointLight(16777215,500,28,2);st.position.set(.418,16.199,.3),this.add(st);const ot=new Mesh(tt,rt);ot.position.set(-.757,13.219,.717),ot.scale.set(31.713,28.305,28.591),this.add(ot);const lt=new Mesh(tt,at);lt.position.set(-10.906,2.009,1.846),lt.rotation.set(0,-.195,0),lt.scale.set(2.328,7.905,4.651),this.add(lt);const ut=new Mesh(tt,at);ut.position.set(-5.607,-.754,-.758),ut.rotation.set(0,.994,0),ut.scale.set(1.97,1.534,3.955),this.add(ut);const ht=new Mesh(tt,at);ht.position.set(6.167,.857,7.803),ht.rotation.set(0,.561,0),ht.scale.set(3.927,6.285,3.687),this.add(ht);const mt=new Mesh(tt,at);mt.position.set(-2.017,.018,6.124),mt.rotation.set(0,.333,0),mt.scale.set(2.002,4.566,2.064),this.add(mt);const bt=new Mesh(tt,at);bt.position.set(2.291,-.756,-2.621),bt.rotation.set(0,-.286,0),bt.scale.set(1.546,1.552,1.496),this.add(bt);const vt=new Mesh(tt,at);vt.position.set(-2.193,-.369,-5.547),vt.rotation.set(0,.516,0),vt.scale.set(3.875,3.487,2.986),this.add(vt);const At=new Mesh(tt,this.createAreaLightMaterial(50));At.position.set(-16.116,14.37,8.208),At.scale.set(.1,2.428,2.739),this.add(At);const xt=new Mesh(tt,this.createAreaLightMaterial(50));xt.position.set(-16.109,18.021,-8.207),xt.scale.set(.1,2.425,2.751),this.add(xt);const Et=new Mesh(tt,this.createAreaLightMaterial(17));Et.position.set(14.904,12.198,-1.832),Et.scale.set(.15,4.265,6.331),this.add(Et);const Tt=new Mesh(tt,this.createAreaLightMaterial(43));Tt.position.set(-.462,8.89,14.52),Tt.scale.set(4.38,5.441,.088),this.add(Tt);const wt=new Mesh(tt,this.createAreaLightMaterial(20));wt.position.set(3.235,11.486,-12.541),wt.scale.set(2.5,2,.1),this.add(wt);const Ct=new Mesh(tt,this.createAreaLightMaterial(100));Ct.position.set(0,20,0),Ct.scale.set(1,.1,1),this.add(Ct)}createAreaLightMaterial(tt){const rt=new MeshBasicMaterial;return rt.color.setScalar(tt),rt}}/* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class EnvironmentSceneAlt extends Scene{constructor(){super(),this.position.y=-3.5;const tt=new BoxGeometry;tt.deleteAttribute("uv");const rt=new MeshStandardMaterial({metalness:0,side:BackSide}),at=new MeshStandardMaterial({metalness:0}),st=new PointLight(16777215,400,28,2);st.position.set(.5,14,.5),this.add(st);const ot=new Mesh(tt,rt);ot.position.set(0,13.2,0),ot.scale.set(31.5,28.5,31.5),this.add(ot);const lt=new Mesh(tt,at);lt.position.set(-10.906,-1,1.846),lt.rotation.set(0,-.195,0),lt.scale.set(2.328,7.905,4.651),this.add(lt);const ut=new Mesh(tt,at);ut.position.set(-5.607,-.754,-.758),ut.rotation.set(0,.994,0),ut.scale.set(1.97,1.534,3.955),this.add(ut);const ht=new Mesh(tt,at);ht.position.set(6.167,-.16,7.803),ht.rotation.set(0,.561,0),ht.scale.set(3.927,6.285,3.687),this.add(ht);const mt=new Mesh(tt,at);mt.position.set(-2.017,.018,6.124),mt.rotation.set(0,.333,0),mt.scale.set(2.002,4.566,2.064),this.add(mt);const bt=new Mesh(tt,at);bt.position.set(2.291,-.756,-2.621),bt.rotation.set(0,-.286,0),bt.scale.set(1.546,1.552,1.496),this.add(bt);const vt=new Mesh(tt,at);vt.position.set(-2.193,-.369,-5.547),vt.rotation.set(0,.516,0),vt.scale.set(3.875,3.487,2.986),this.add(vt);const At=new Mesh(tt,this.createAreaLightMaterial(80));At.position.set(-14,10,8),At.scale.set(.1,2.5,2.5),this.add(At);const xt=new Mesh(tt,this.createAreaLightMaterial(80));xt.position.set(-14,14,-4),xt.scale.set(.1,2.5,2.5),this.add(xt);const Et=new Mesh(tt,this.createAreaLightMaterial(23));Et.position.set(14,12,0),Et.scale.set(.1,5,5),this.add(Et);const Tt=new Mesh(tt,this.createAreaLightMaterial(16));Tt.position.set(0,9,14),Tt.scale.set(5,5,.1),this.add(Tt);const wt=new Mesh(tt,this.createAreaLightMaterial(80));wt.position.set(7,8,-14),wt.scale.set(2.5,2.5,.1),this.add(wt);const Ct=new Mesh(tt,this.createAreaLightMaterial(80));Ct.position.set(-7,16,-14),Ct.scale.set(2.5,2.5,.1),this.add(Ct);const It=new Mesh(tt,this.createAreaLightMaterial(1));It.position.set(0,20,0),It.scale.set(.1,.1,.1),this.add(It)}createAreaLightMaterial(tt){const rt=new MeshBasicMaterial;return rt.color.setScalar(tt),rt}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GENERATED_SIGMA=.04,MAX_SAMPLES=20,HDR_FILE_RE=/\.hdr(\.js)?$/,ldrLoader=new TextureLoader,hdrLoader=new RGBELoader;hdrLoader.setDataType(HalfFloatType);class TextureUtils extends EventDispatcher{constructor(tt){super(),this.threeRenderer=tt,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}async load(tt,rt=()=>{}){try{const at=HDR_FILE_RE.test(tt),st=at?hdrLoader:ldrLoader,ot=await new Promise((lt,ut)=>st.load(tt,lt,ht=>{rt(ht.loaded/ht.total*.9)},ut));return rt(1),ot.name=tt,ot.mapping=EquirectangularReflectionMapping,at||(ot.encoding=sRGBEncoding),ot}finally{rt&&rt(1)}}async generateEnvironmentMapAndSkybox(tt=null,rt=null,at=()=>{}){const st=rt!=="legacy";(rt==="legacy"||rt==="neutral")&&(rt=null),rt=deserializeUrl(rt);let ot=Promise.resolve(null),lt;tt&&(ot=this.loadEquirectFromUrl(tt,at)),rt?lt=this.loadEquirectFromUrl(rt,at):tt?lt=this.loadEquirectFromUrl(tt,at):lt=st?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[ut,ht]=await Promise.all([lt,ot]);if(ut==null)throw new Error("Failed to load environment map.");return{environmentMap:ut,skybox:ht}}async loadEquirectFromUrl(tt,rt){if(!this.skyboxCache.has(tt)){const at=this.load(tt,rt);this.skyboxCache.set(tt,at)}return this.skyboxCache.get(tt)}async GenerateEnvironmentMap(tt,rt){await timePasses();const at=this.threeRenderer,st=new WebGLCubeRenderTarget(256,{generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!0}),ot=new CubeCamera(.1,100,st),lt=ot.renderTarget.texture;lt.name=rt;const ut=at.outputEncoding,ht=at.toneMapping;return at.toneMapping=NoToneMapping,at.outputEncoding=LinearEncoding,ot.update(at,tt),this.blurCubemap(st,GENERATED_SIGMA),at.toneMapping=ht,at.outputEncoding=ut,lt}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new EnvironmentScene,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new EnvironmentSceneAlt,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(tt,rt){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(MAX_SAMPLES);const st=new BoxGeometry,ot=new Mesh(st,this.blurMaterial);this.blurScene=new Scene,this.blurScene.add(ot)}const at=tt.clone();this.halfblur(tt,at,rt,"latitudinal"),this.halfblur(at,tt,rt,"longitudinal")}halfblur(tt,rt,at,st){const lt=tt.width,ut=isFinite(at)?Math.PI/(2*lt):2*Math.PI/(2*MAX_SAMPLES-1),ht=at/ut,mt=isFinite(at)?1+Math.floor(3*ht):MAX_SAMPLES;mt>MAX_SAMPLES&&console.warn(`sigmaRadians, ${at}, is too large and will clip, as it requested ${mt} samples when the maximum is set to ${MAX_SAMPLES}`);const bt=[];let vt=0;for(let Et=0;Et<MAX_SAMPLES;++Et){const Tt=Et/ht,wt=Math.exp(-Tt*Tt/2);bt.push(wt),Et==0?vt+=wt:Et<mt&&(vt+=2*wt)}for(let Et=0;Et<bt.length;Et++)bt[Et]=bt[Et]/vt;const At=this.blurMaterial.uniforms;At.envMap.value=tt.texture,At.samples.value=mt,At.weights.value=bt,At.latitudinal.value=st==="latitudinal",At.dTheta.value=ut,new CubeCamera(.1,100,rt).update(this.threeRenderer,this.blurScene)}getBlurShader(tt){const rt=new Float32Array(tt),at=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:tt},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:rt},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:at}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:NoBlending,depthTest:!1,depthWrite:!1,side:BackSide})}async dispose(){for(const[,tt]of this.skyboxCache)(await tt).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DURATION_DECAY=.2,LOW_FRAME_DURATION_MS=40,HIGH_FRAME_DURATION_MS=60,MAX_AVG_CHANGE_MS=5,SCALE_STEPS=[1,.79,.62,.5,.4,.31,.25],DEFAULT_LAST_STEP=3,DEFAULT_POWER_PREFERENCE="high-performance";class Renderer extends EventDispatcher{constructor(tt){super(),this.loader=new CachingGLTFLoader(ModelViewerGLTFInstance),this.width=0,this.height=0,this.dpr=1,this.debugger=null,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=DEFAULT_LAST_STEP,this.avgFrameDuration=(HIGH_FRAME_DURATION_MS+LOW_FRAME_DURATION_MS)/2,this.onWebGLContextLost=rt=>{this.dispatchEvent({type:"contextlost",sourceEvent:rt})},this.onWebGLContextRestored=()=>{var rt;(rt=this.textureUtils)===null||rt===void 0||rt.dispose(),this.textureUtils=new TextureUtils(this.threeRenderer);for(const at of this.scenes)at.element[$updateEnvironment]()},this.dpr=resolveDpr(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new WebGLRenderer({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:tt.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=sRGBEncoding,this.threeRenderer.physicallyCorrectLights=!0,this.threeRenderer.setPixelRatio(1),this.debugger=tt.debug?new Debugger(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=ACESFilmicToneMapping}catch(rt){console.warn(rt)}this.arRenderer=new ARRenderer(this),this.textureUtils=this.canRender?new TextureUtils(this.threeRenderer):null,CachingGLTFLoader.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){const tt=this._singleton.dispose();for(const rt of tt)rt.disconnectedCallback();this._singleton=new Renderer({powerPreference:(self.ModelViewerElement||{}).powerPreference||DEFAULT_POWER_PREFERENCE,debug:isDebugMode()});for(const rt of tt)rt.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return SCALE_STEPS[this.scaleStep]}set minScale(tt){let rt=1;for(;rt<SCALE_STEPS.length&&!(SCALE_STEPS[rt]<tt);)++rt;this.lastStep=rt-1}registerScene(tt){this.scenes.add(tt),tt.forceRescale();const rt=new Vector2;this.threeRenderer.getSize(rt),tt.canvas.width=rt.x,tt.canvas.height=rt.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((at,st)=>this.render(at,st)),this.debugger!=null&&this.debugger.addScene(tt)}unregisterScene(tt){this.scenes.delete(tt),this.canvas3D.parentElement===tt.canvas.parentElement&&tt.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null),this.debugger!=null&&this.debugger.removeScene(tt)}displayCanvas(tt){return this.multipleScenesVisible?tt.element[$canvas]:this.canvas3D}countVisibleScenes(){const{canvas3D:tt}=this;let rt=0,at=null;for(const ot of this.scenes){const{element:lt}=ot;lt.modelIsVisible&&ot.externalRenderer==null&&++rt,tt.parentElement===ot.canvas.parentElement&&(at=ot)}const st=rt>1;if(at!=null){const ot=st&&!this.multipleScenesVisible,lt=!at.element.modelIsVisible;if(ot||lt){const{width:ut,height:ht}=this.sceneSize(at);this.copyPixels(at,ut,ht),tt.parentElement.removeChild(tt)}}this.multipleScenesVisible=st}updateRendererSize(){const tt=resolveDpr();if(tt!==this.dpr)for(const st of this.scenes){const{element:ot}=st;ot[$updateSize](ot.getBoundingClientRect())}let rt=0,at=0;for(const st of this.scenes)rt=Math.max(rt,st.width),at=Math.max(at,st.height);if(!(rt===this.width&&at===this.height&&tt===this.dpr)){this.width=rt,this.height=at,this.dpr=tt,rt=Math.ceil(rt*tt),at=Math.ceil(at*tt),this.canRender&&this.threeRenderer.setSize(rt,at,!1);for(const st of this.scenes){const{canvas:ot}=st;ot.width=rt,ot.height=at,st.forceRescale()}}}updateRendererScale(tt){const rt=this.scaleStep;this.avgFrameDuration+=clamp(DURATION_DECAY*(tt-this.avgFrameDuration),-MAX_AVG_CHANGE_MS,MAX_AVG_CHANGE_MS),this.avgFrameDuration>HIGH_FRAME_DURATION_MS?++this.scaleStep:this.avgFrameDuration<LOW_FRAME_DURATION_MS&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),rt!==this.scaleStep&&(this.avgFrameDuration=(HIGH_FRAME_DURATION_MS+LOW_FRAME_DURATION_MS)/2)}shouldRender(tt){if(tt.shouldRender())tt.scaleStep!=this.scaleStep&&(tt.scaleStep=this.scaleStep,this.rescaleCanvas(tt));else if(tt.scaleStep!=0)tt.scaleStep=0,this.rescaleCanvas(tt);else return!1;return!0}rescaleCanvas(tt){const rt=SCALE_STEPS[tt.scaleStep],at=Math.ceil(this.width/rt),st=Math.ceil(this.height/rt),{style:ot}=tt.canvas;ot.width=`${at}px`,ot.height=`${st}px`,this.canvas3D.style.width=`${at}px`,this.canvas3D.style.height=`${st}px`;const lt=this.dpr*rt,ut=rt<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";tt.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:lt,minimumDpr:this.dpr*SCALE_STEPS[this.lastStep],pixelWidth:Math.ceil(tt.width*lt),pixelHeight:Math.ceil(tt.height*lt),reason:ut}}))}sceneSize(tt){const{dpr:rt}=this,at=SCALE_STEPS[tt.scaleStep],st=Math.min(Math.ceil(tt.width*at*rt),this.canvas3D.width),ot=Math.min(Math.ceil(tt.height*at*rt),this.canvas3D.height);return{width:st,height:ot}}copyPixels(tt,rt,at){const st=tt.context;if(st==null){console.log("could not acquire 2d context");return}st.clearRect(0,0,rt,at),st.drawImage(this.canvas3D,0,0,rt,at,0,0,rt,at),tt.canvas.classList.add("show")}orderedScenes(){const tt=[];for(const rt of[!1,!0])for(const at of this.scenes)at.element.modelIsVisible===rt&&tt.push(at);return tt}get isPresenting(){return this.arRenderer.isPresenting}preRender(tt,rt,at){const{element:st,exposure:ot}=tt;st[$tick](rt,at);const lt=typeof ot=="number"&&!Number.isNaN(ot);this.threeRenderer.toneMappingExposure=lt?ot:1}render(tt,rt){if(rt!=null){this.arRenderer.onWebXRFrame(tt,rt);return}const at=tt-this.lastTick;if(this.lastTick=tt,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(at),this.renderedLastFrame=!1);const{canvas3D:st}=this;for(const ot of this.orderedScenes()){const{element:lt}=ot;if(!lt.loaded||!lt.modelIsVisible&&ot.renderCount>0||(this.preRender(ot,tt,at),!this.shouldRender(ot)))continue;if(ot.externalRenderer!=null){const mt=ot.getCamera();mt.updateMatrix();const{matrix:bt,projectionMatrix:vt}=mt,At=bt.elements.slice(),xt=ot.getTarget();At[12]+=xt.x,At[13]+=xt.y,At[14]+=xt.z,ot.externalRenderer.render({viewMatrix:At,projectionMatrix:vt.elements});continue}if(!lt.modelIsVisible&&!this.multipleScenesVisible)for(const mt of this.scenes)mt.element.modelIsVisible&&mt.queueRender();const{width:ut,height:ht}=this.sceneSize(ot);ot.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-ht,ut,ht),this.threeRenderer.render(ot,ot.camera),this.multipleScenesVisible||ot.renderCount===0?this.copyPixels(ot,ut,ht):st.parentElement!==ot.canvas.parentElement&&(ot.canvas.parentElement.appendChild(st),ot.canvas.classList.remove("show")),ot.hasRendered(),++ot.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const tt=[];for(const rt of this.scenes)tt.push(rt.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),tt}}Renderer._singleton=new Renderer({powerPreference:(self.ModelViewerElement||{}).powerPreference||DEFAULT_POWER_PREFERENCE,debug:isDebugMode()});/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $correlatedObjects=Symbol("correlatedObjects"),$sourceObject=Symbol("sourceObject"),$onUpdate=Symbol("onUpdate");class ThreeDOMElement{constructor(tt,rt,at=null){this[$onUpdate]=tt,this[$sourceObject]=rt,this[$correlatedObjects]=at}}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const quadMaterial=new MeshBasicMaterial,quad=new PlaneGeometry(2,2);let adhocNum=0;const $threeTexture=Symbol("threeTexture");class Image$1 extends ThreeDOMElement{get[$threeTexture](){var tt;return console.assert(this[$correlatedObjects]!=null&&this[$correlatedObjects].size>0,"Image correlated object is undefined"),(tt=this[$correlatedObjects])===null||tt===void 0?void 0:tt.values().next().value}constructor(tt,rt,at){at=at!=null?at:{name:rt&&rt.image&&rt.image.src?rt.image.src.split("/").pop():"adhoc_image",uri:rt&&rt.image&&rt.image.src?rt.image.src:"adhoc_image"+adhocNum++},super(tt,at,new Set(rt?[rt]:[]))}get name(){return this[$sourceObject].name||""}get uri(){return this[$sourceObject].uri}get bufferView(){return this[$sourceObject].bufferView}get type(){return this.uri!=null?"external":"embedded"}set name(tt){this[$sourceObject].name=tt}async createThumbnail(tt,rt){const at=new Scene;quadMaterial.map=this[$threeTexture];const st=new Mesh(quad,quadMaterial);at.add(st);const ot=new OrthographicCamera(-1,1,1,-1,0,1),{threeRenderer:lt}=Renderer.singleton,ut=new WebGLRenderTarget(tt,rt);lt.setRenderTarget(ut),lt.render(at,ot),lt.setRenderTarget(null);const ht=new Uint8Array(tt*rt*4);lt.readRenderTargetPixels(ut,0,0,tt,rt,ht),blobCanvas.width=tt,blobCanvas.height=rt;const mt=blobCanvas.getContext("2d"),bt=mt.createImageData(tt,rt);return bt.data.set(ht),mt.putImageData(bt,0,0),new Promise(async(vt,At)=>{blobCanvas.toBlob(xt=>{if(!xt)return At("Failed to capture thumbnail.");vt(URL.createObjectURL(xt))},"image/png")})}}var Filter;(function(it){it[it.Nearest=9728]="Nearest",it[it.Linear=9729]="Linear",it[it.NearestMipmapNearest=9984]="NearestMipmapNearest",it[it.LinearMipmapNearest=9985]="LinearMipmapNearest",it[it.NearestMipmapLinear=9986]="NearestMipmapLinear",it[it.LinearMipmapLinear=9987]="LinearMipmapLinear"})(Filter||(Filter={}));var Wrap;(function(it){it[it.ClampToEdge=33071]="ClampToEdge",it[it.MirroredRepeat=33648]="MirroredRepeat",it[it.Repeat=10497]="Repeat"})(Wrap||(Wrap={}));/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const isMinFilter=(()=>{const it=[Filter.Nearest,Filter.Linear,Filter.NearestMipmapNearest,Filter.LinearMipmapLinear,Filter.NearestMipmapLinear,Filter.LinearMipmapLinear];return tt=>it.indexOf(tt)>-1})(),isMagFilter=(()=>{const it=[Filter.Nearest,Filter.Linear];return tt=>it.indexOf(tt)>-1})(),isWrapMode=(()=>{const it=[Wrap.ClampToEdge,Wrap.MirroredRepeat,Wrap.Repeat];return tt=>it.indexOf(tt)>-1})(),isValidSamplerValue=(it,tt)=>{switch(it){case"minFilter":return isMinFilter(tt);case"magFilter":return isMagFilter(tt);case"wrapS":case"wrapT":return isWrapMode(tt);default:throw new Error(`Cannot configure property "${it}" on Sampler`)}},$threeTextures=Symbol("threeTextures"),$setProperty=Symbol("setProperty"),$sourceSampler=Symbol("sourceSampler");class Sampler extends ThreeDOMElement{get[$threeTextures](){return console.assert(this[$correlatedObjects]!=null&&this[$correlatedObjects].size>0,"Sampler correlated object is undefined"),this[$correlatedObjects]}get[$sourceSampler](){return console.assert(this[$sourceObject]!=null,"Sampler source is undefined"),this[$sourceObject]}constructor(tt,rt,at){at=at!=null?at:{},at.minFilter==null&&(at.minFilter=rt?rt.minFilter:Filter.LinearMipmapLinear),at.magFilter==null&&(at.magFilter=rt?rt.magFilter:Filter.Linear),at.wrapS==null&&(at.wrapS=rt?rt.wrapS:Wrap.Repeat),at.wrapT==null&&(at.wrapT=rt?rt.wrapT:Wrap.Repeat),super(tt,at,new Set(rt?[rt]:[]))}get name(){return this[$sourceObject].name||""}get minFilter(){return this[$sourceSampler].minFilter}get magFilter(){return this[$sourceSampler].magFilter}get wrapS(){return this[$sourceSampler].wrapS}get wrapT(){return this[$sourceSampler].wrapT}setMinFilter(tt){this[$setProperty]("minFilter",tt)}setMagFilter(tt){this[$setProperty]("magFilter",tt)}setWrapS(tt){this[$setProperty]("wrapS",tt)}setWrapT(tt){this[$setProperty]("wrapT",tt)}[$setProperty](tt,rt){const at=this[$sourceSampler];if(at!=null){if(isValidSamplerValue(tt,rt)){at[tt]=rt;for(const st of this[$threeTextures])st[tt]=rt,st.needsUpdate=!0}this[$onUpdate]()}}}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $image=Symbol("image"),$sampler=Symbol("sampler");class Texture extends ThreeDOMElement{constructor(tt,rt,at=null,st=null,ot=null){super(tt,at||{},new Set(rt?[rt]:[])),this[$sampler]=new Sampler(tt,rt,st),this[$image]=new Image$1(tt,rt,ot)}get name(){return this[$sourceObject].name||""}set name(tt){this[$sourceObject].name=tt}get sampler(){return this[$sampler]}get source(){return this[$image]}}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _a$7,_b$6;const $texture=Symbol("texture"),$transform=Symbol("transform"),$materials$2=Symbol("materials"),$usage=Symbol("usage");var TextureUsage;(function(it){it[it.Base=0]="Base",it[it.MetallicRoughness=1]="MetallicRoughness",it[it.Normal=2]="Normal",it[it.Occlusion=3]="Occlusion",it[it.Emissive=4]="Emissive"})(TextureUsage||(TextureUsage={}));class TextureInfo{constructor(tt,rt,at,st,ot,lt){if(this[_a$7]=null,this[_b$6]={rotation:0,scale:new Vector2(1,1),offset:new Vector2(0,0)},lt&&at){const ut=ot.textures?ot.textures[lt.index]:null,ht=ut&&ot.samplers?ot.samplers[ut.sampler]:null,mt=ut&&ot.images?ot.images[ut.source]:null;this[$transform].rotation=at.rotation,this[$transform].scale.copy(at.repeat),this[$transform].offset.copy(at.offset),this[$texture]=new Texture(tt,at,ut,ht,mt)}this.onUpdate=tt,this[$materials$2]=st,this[$usage]=rt}get texture(){return this[$texture]}setTexture(tt){const rt=tt!=null?tt.source[$threeTexture]:null;let at=sRGBEncoding;if(this[$texture]=tt,this[$materials$2])for(const st of this[$materials$2]){switch(this[$usage]){case TextureUsage.Base:st.map=rt;break;case TextureUsage.MetallicRoughness:at=LinearEncoding,st.metalnessMap=rt,st.roughnessMap=rt;break;case TextureUsage.Normal:at=LinearEncoding,st.normalMap=rt;break;case TextureUsage.Occlusion:at=LinearEncoding,st.aoMap=rt;break;case TextureUsage.Emissive:st.emissiveMap=rt;break}st.needsUpdate=!0}rt&&(rt.encoding=at,rt.rotation=this[$transform].rotation,rt.repeat=this[$transform].scale,rt.offset=this[$transform].offset),this.onUpdate()}}_a$7=$texture,_b$6=$transform;/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $threeMaterials=Symbol("threeMaterials"),$baseColorTexture=Symbol("baseColorTexture"),$metallicRoughnessTexture=Symbol("metallicRoughnessTexture");class PBRMetallicRoughness extends ThreeDOMElement{constructor(tt,rt,at,st){super(tt,at,st),at.baseColorFactor==null&&(at.baseColorFactor=[1,1,1,1]),at.roughnessFactor==null&&(at.roughnessFactor=1),at.metallicFactor==null&&(at.metallicFactor=1);const{baseColorTexture:ot,metallicRoughnessTexture:lt}=at,{map:ut,metalnessMap:ht}=st.values().next().value;this[$baseColorTexture]=new TextureInfo(tt,TextureUsage.Base,ut,st,rt,ot||null),this[$metallicRoughnessTexture]=new TextureInfo(tt,TextureUsage.MetallicRoughness,ht,st,rt,lt||null)}get[$threeMaterials](){return this[$correlatedObjects]}get baseColorFactor(){return this[$sourceObject].baseColorFactor}get metallicFactor(){return this[$sourceObject].metallicFactor}get roughnessFactor(){return this[$sourceObject].roughnessFactor}get baseColorTexture(){return this[$baseColorTexture]}get metallicRoughnessTexture(){return this[$metallicRoughnessTexture]}setBaseColorFactor(tt){const rt=new Color;tt instanceof Array?rt.fromArray(tt):rt.set(tt).convertSRGBToLinear();for(const st of this[$threeMaterials])st.color.set(rt),tt instanceof Array?st.opacity=tt[3]:(tt=[0,0,0,st.opacity],rt.toArray(tt));const at=this[$sourceObject];at.baseColorFactor=tt,this[$onUpdate]()}setMetallicFactor(tt){for(const at of this[$threeMaterials])at.metalness=tt;const rt=this[$sourceObject];rt.metallicFactor=tt,this[$onUpdate]()}setRoughnessFactor(tt){for(const at of this[$threeMaterials])at.roughness=tt;const rt=this[$sourceObject];rt.roughnessFactor=tt,this[$onUpdate]()}}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _a$6;const $pbrMetallicRoughness=Symbol("pbrMetallicRoughness"),$normalTexture=Symbol("normalTexture"),$occlusionTexture=Symbol("occlusionTexture"),$emissiveTexture=Symbol("emissiveTexture"),$backingThreeMaterial=Symbol("backingThreeMaterial"),$applyAlphaCutoff=Symbol("applyAlphaCutoff"),$lazyLoadGLTFInfo=Symbol("lazyLoadGLTFInfo"),$initialize=Symbol("initialize"),$getLoadedMaterial=Symbol("getLoadedMaterial"),$ensureMaterialIsLoaded=Symbol("ensureMaterialIsLoaded"),$gltfIndex=Symbol("gltfIndex"),$setActive=Symbol("setActive"),$variantIndices=Symbol("variantIndices"),$isActive=Symbol("isActive"),$variantSet=Symbol("variantSet"),$modelVariants$1=Symbol("modelVariants");class Material extends ThreeDOMElement{constructor(tt,rt,at,st,ot,lt,ut,ht=void 0){super(tt,at,ut),this[_a$6]=new Set,this[$gltfIndex]=st,this[$isActive]=ot,this[$modelVariants$1]=lt,ht==null?this[$initialize](rt):this[$lazyLoadGLTFInfo]=ht}get[(_a$6=$variantSet,$backingThreeMaterial)](){return this[$correlatedObjects].values().next().value}[$initialize](tt){const rt=this[$onUpdate],at=this[$sourceObject],st=this[$correlatedObjects];at.extensions&&at.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn(`Material ${at.name} uses a deprecated extension
          "KHR_materials_pbrSpecularGlossiness", please use
          "pbrMetallicRoughness" instead. Specular Glossiness materials are
          currently supported for rendering, but not for our scene-graph API,
          nor for auto-generation of USDZ for Quick Look.`),at.pbrMetallicRoughness==null&&(at.pbrMetallicRoughness={}),this[$pbrMetallicRoughness]=new PBRMetallicRoughness(rt,tt,at.pbrMetallicRoughness,st),at.emissiveFactor==null&&(at.emissiveFactor=[0,0,0]),at.doubleSided==null&&(at.doubleSided=!1),at.alphaMode==null&&(at.alphaMode="OPAQUE"),at.alphaCutoff==null&&(at.alphaCutoff=.5);const{normalTexture:ot,occlusionTexture:lt,emissiveTexture:ut}=at,{normalMap:ht,aoMap:mt,emissiveMap:bt}=st.values().next().value;this[$normalTexture]=new TextureInfo(rt,TextureUsage.Normal,ht,st,tt,ot||null),this[$occlusionTexture]=new TextureInfo(rt,TextureUsage.Occlusion,mt,st,tt,lt||null),this[$emissiveTexture]=new TextureInfo(rt,TextureUsage.Emissive,bt,st,tt,ut||null)}async[$getLoadedMaterial](){if(this[$lazyLoadGLTFInfo]!=null){const{set:tt,material:rt}=await this[$lazyLoadGLTFInfo].doLazyLoad();return this[$correlatedObjects]=tt,this[$initialize](this[$lazyLoadGLTFInfo].gltf),this[$lazyLoadGLTFInfo]=void 0,this.ensureLoaded=async()=>{},rt}return this[$correlatedObjects].values().next().value}[$ensureMaterialIsLoaded](){if(this[$lazyLoadGLTFInfo]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[$getLoadedMaterial]()}get isLoaded(){return this[$lazyLoadGLTFInfo]==null}get isActive(){return this[$isActive]}[$setActive](tt){this[$isActive]=tt}get name(){return this[$sourceObject].name}set name(tt){const rt=this[$sourceObject];if(rt!=null&&(rt.name=tt),this[$correlatedObjects]!=null)for(const at of this[$correlatedObjects])at.name=tt}get pbrMetallicRoughness(){return this[$ensureMaterialIsLoaded](),this[$pbrMetallicRoughness]}get normalTexture(){return this[$ensureMaterialIsLoaded](),this[$normalTexture]}get occlusionTexture(){return this[$ensureMaterialIsLoaded](),this[$occlusionTexture]}get emissiveTexture(){return this[$ensureMaterialIsLoaded](),this[$emissiveTexture]}get emissiveFactor(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].emissiveFactor}get index(){return this[$gltfIndex]}[$variantIndices](){return this[$variantSet]}hasVariant(tt){const rt=this[$modelVariants$1].get(tt);return rt!=null&&this[$variantSet].has(rt.index)}setEmissiveFactor(tt){this[$ensureMaterialIsLoaded]();const rt=new Color;tt instanceof Array?rt.fromArray(tt):rt.set(tt).convertSRGBToLinear();for(const at of this[$correlatedObjects])at.emissive.set(rt);this[$sourceObject].emissiveFactor=rt.toArray(),this[$onUpdate]()}[$applyAlphaCutoff](){this[$ensureMaterialIsLoaded]();const tt=this[$sourceObject];for(const rt of this[$correlatedObjects])this[$sourceObject].alphaMode==="MASK"?rt.alphaTest=tt.alphaCutoff:rt.alphaTest=void 0,rt.needsUpdate=!0}setAlphaCutoff(tt){this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaCutoff=tt,this[$applyAlphaCutoff](),this[$onUpdate]()}getAlphaCutoff(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaCutoff}setDoubleSided(tt){this[$ensureMaterialIsLoaded]();for(const rt of this[$correlatedObjects])rt.side=tt?DoubleSide:FrontSide,rt.needsUpdate=!0;this[$sourceObject].doubleSided=tt,this[$onUpdate]()}getDoubleSided(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].doubleSided}setAlphaMode(tt){this[$ensureMaterialIsLoaded]();const rt=(at,st)=>{at.transparent=st,at.depthWrite=!st};this[$sourceObject].alphaMode=tt;for(const at of this[$correlatedObjects])rt(at,tt==="BLEND"),this[$applyAlphaCutoff](),at.needsUpdate=!0;this[$onUpdate]()}getAlphaMode(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaMode}}var _a$5,_b$5,_c$4,_d$3,_e$2;const $materials$1=Symbol("materials"),$variantToMaterialMap=Symbol("variantToMaterialMap"),$modelVariants=Symbol("modelVariants"),$mesh=Symbol("mesh"),$children=Symbol("children"),$initialMaterialIdx=Symbol("initialMaterialIdx"),$activeMaterialIdx=Symbol("activeMaterialIdx");class Node$1{constructor(tt){this.name="",this[_a$5]=new Array,this.name=tt}}_a$5=$children;class PrimitiveNode extends Node$1{constructor(tt,rt,at,st){super(tt.name),this[_b$5]=new Map,this[_c$4]=new Map,this[_d$3]=0,this[_e$2]=0,this[$mesh]=tt;const{gltf:ot,threeGLTF:lt,threeObjectMap:ut}=st;this[$modelVariants]=at,this.mesh.userData.variantData=at;const ht=ut.get(tt.material);ht.materials!=null?this[$initialMaterialIdx]=this[$activeMaterialIdx]=ht.materials:console.error(`Primitive (${tt.name}) missing initial material reference.`);const mt=tt.userData.associations||{};if(mt.meshes==null){console.error("Mesh is missing primitive index association");return}const At=((ot.meshes||[])[mt.meshes].primitives||[])[mt.primitives];if(At==null){console.error("Mesh primitive definition is missing.");return}if(At.material!=null)this[$materials$1].set(At.material,rt[At.material]);else{const xt=rt.findIndex(Et=>Et.name==="Default");xt>=0?this[$materials$1].set(xt,rt[xt]):console.warn("gltfPrimitive has no material!")}if(At.extensions&&At.extensions.KHR_materials_variants){const xt=At.extensions.KHR_materials_variants,Tt=lt.parser.json.extensions.KHR_materials_variants.variants;for(const wt of xt.mappings){const Ct=rt[wt.material];this[$materials$1].set(wt.material,Ct);for(const It of wt.variants){const{name:St}=Tt[It];this[$variantToMaterialMap].set(It,Ct),Ct[$variantIndices]().add(It),at.has(St)||at.set(St,{name:St,index:It})}}}}get mesh(){return this[$mesh]}async setActiveMaterial(tt){const rt=this[$materials$1].get(tt);return rt!=null&&(this.mesh.material=await rt[$getLoadedMaterial](),this[$activeMaterialIdx]=tt),this.mesh.material}getActiveMaterial(){return this[$materials$1].get(this[$activeMaterialIdx])}getMaterial(tt){return this[$materials$1].get(tt)}async enableVariant(tt){if(tt==null)return this.setActiveMaterial(this[$initialMaterialIdx]);if(this[$variantToMaterialMap]!=null&&this[$modelVariants].has(tt)){const rt=this[$modelVariants].get(tt);return this.enableVariantHelper(rt.index)}return null}async enableVariantHelper(tt){if(this[$variantToMaterialMap]!=null&&tt!=null){const rt=this[$variantToMaterialMap].get(tt);if(rt!=null)return this.setActiveMaterial(rt.index)}return null}async instantiateVariants(){if(this[$variantToMaterialMap]!=null)for(const tt of this[$variantToMaterialMap].keys()){const rt=this.mesh.userData.variantMaterials.get(tt);if(rt.material!=null)continue;const at=await this.enableVariantHelper(tt);at!=null&&(rt.material=at)}}get variantInfo(){return this[$variantToMaterialMap]}addVariant(tt,rt){if(!this.ensureVariantIsUnused(rt))return!1;this[$modelVariants].has(rt)||this[$modelVariants].set(rt,{name:rt,index:this[$modelVariants].size});const st=this[$modelVariants].get(rt).index;return tt[$variantIndices]().add(st),this[$variantToMaterialMap].set(st,tt),this[$materials$1].set(tt.index,tt),this.updateVariantUserData(st,tt),!0}deleteVariant(tt){if(this.variantInfo.has(tt)){this.variantInfo.delete(tt);const rt=this.mesh.userData.variantMaterials;rt!=null&&rt.delete(tt)}}updateVariantUserData(tt,rt){rt[$variantIndices]().add(tt),this.mesh.userData.variantData=this[$modelVariants],this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(tt,{material:rt[$correlatedObjects].values().next().value,gltfMaterialIndex:rt.index})}ensureVariantIsUnused(tt){const rt=this[$modelVariants].get(tt);return rt!=null&&this.variantInfo.has(rt.index)?(console.warn(`Primitive cannot add variant '${tt}' for this material, it already exists.`),!1):!0}}_b$5=$materials$1,_c$4=$variantToMaterialMap,_d$3=$initialMaterialIdx,_e$2=$activeMaterialIdx;/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _a$4,_b$4,_c$3,_d$2,_e$1,_f$1;const $materials=Symbol("materials"),$hierarchy=Symbol("hierarchy"),$roots=Symbol("roots"),$primitivesList=Symbol("primitives"),$correlatedSceneGraph=Symbol("correlatedSceneGraph"),$prepareVariantsForExport=Symbol("prepareVariantsForExport"),$switchVariant=Symbol("switchVariant"),$threeScene=Symbol("threeScene"),$materialsFromPoint=Symbol("materialsFromPoint"),$materialFromPoint=Symbol("materialFromPoint"),$variantData=Symbol("variantData"),$availableVariants=Symbol("availableVariants"),$modelOnUpdate=Symbol("modelOnUpdate"),$cloneMaterial=Symbol("cloneMaterial");class LazyLoader{constructor(tt,rt,at,st){this.gltf=tt,this.gltfElementMap=rt,this.mapKey=at,this.doLazyLoad=st}}class Model{constructor(tt,rt=()=>{}){this[_a$4]=new Array,this[_b$4]=new Array,this[_c$3]=new Array,this[_d$2]=new Array,this[_e$1]=()=>{},this[_f$1]=new Map,this[$modelOnUpdate]=rt,this[$correlatedSceneGraph]=tt;const{gltf:at,threeGLTF:st,gltfElementMap:ot}=tt;this[$threeScene]=st.scene;for(const[ht,mt]of at.materials.entries()){const bt=ot.get(mt);if(bt!=null)this[$materials].push(new Material(rt,at,mt,ht,!0,this[$variantData],bt));else{const At=(at.materials||[])[ht],xt=ht,Et=async()=>{const Tt=await st.parser.getDependency("material",xt),wt=new Set;return ot.set(At,wt),wt.add(Tt),{set:wt,material:Tt}};this[$materials].push(new Material(rt,at,At,ht,!1,this[$variantData],bt,new LazyLoader(at,ot,At,Et)))}}const lt=new Map,ut=new Array;for(const ht of st.scene.children)ut.push(ht);for(;ut.length>0;){const ht=ut.pop();let mt=null;ht instanceof Mesh?(mt=new PrimitiveNode(ht,this.materials,this[$variantData],tt),this[$primitivesList].push(mt)):mt=new Node$1(ht.name);const bt=lt.get(ht);bt!=null?bt[$children].push(mt):this[$roots].push(mt),this[$hierarchy].push(mt);for(const vt of ht.children)ut.push(vt),lt.set(ht,mt)}}get materials(){return this[$materials]}[(_a$4=$materials,_b$4=$hierarchy,_c$3=$roots,_d$2=$primitivesList,_e$1=$modelOnUpdate,_f$1=$variantData,$availableVariants)](){const tt=Array.from(this[$variantData].values());return tt.sort((rt,at)=>rt.index-at.index),tt.map(rt=>rt.name)}getMaterialByName(tt){const rt=this[$materials].filter(at=>at.name===tt);return rt.length>0?rt[0]:null}[$materialsFromPoint](tt){return tt.intersectObject(this[$threeScene],!0).map(at=>{const st=this[$hierarchy].find(ot=>ot instanceof PrimitiveNode&&ot.mesh===at.object);return st!=null?st.getActiveMaterial():null})}[$materialFromPoint](tt){const rt=this[$materialsFromPoint](tt);return rt.length>0?rt[0]:null}async[$switchVariant](tt){for(const rt of this[$primitivesList])await rt.enableVariant(tt);for(const rt of this.materials)rt[$setActive](!1);for(const rt of this[$primitivesList])this.materials[rt.getActiveMaterial().index][$setActive](!0)}async[$prepareVariantsForExport](){const tt=new Array;for(const rt of this[$primitivesList])tt.push(rt.instantiateVariants());await Promise.all(tt)}[$cloneMaterial](tt,rt){const at=this.materials[tt];at.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const st=at[$correlatedObjects],ot=JSON.parse(JSON.stringify(at[$sourceObject]));ot.name=rt,this[$correlatedSceneGraph].gltf.materials.push(ot);const ut=new Set;for(const[mt,bt]of st.entries()){const vt=bt.clone();vt.name=rt+(st.size>1?"_inst"+mt:""),ut.add(vt)}const ht=new Material(this[$modelOnUpdate],this[$correlatedSceneGraph].gltf,ot,this[$materials].length,!1,this[$variantData],ut);return this[$materials].push(ht),ht}createMaterialInstanceForVariant(tt,rt,at,st=!0){let ot=null;for(const lt of this[$primitivesList]){const ut=this[$variantData].get(at);ut!=null&&lt.variantInfo.has(ut.index)||lt.getMaterial(tt)!=null&&(this.hasVariant(at)||this.createVariant(at),ot==null&&(ot=this[$cloneMaterial](tt,rt)),lt.addVariant(ot,at))}if(st&&ot!=null){ot[$setActive](!0),this.materials[tt][$setActive](!1);for(const lt of this[$primitivesList])lt.enableVariant(at)}return ot}createVariant(tt){this[$variantData].has(tt)?console.warn(`Variant '${tt}'' already exists`):this[$variantData].set(tt,{name:tt,index:this[$variantData].size})}hasVariant(tt){return this[$variantData].has(tt)}setMaterialToVariant(tt,rt){if(this[$availableVariants]().find(at=>at===rt)==null){console.warn(`Can't add material to '${rt}', the variant does not exist.'`);return}if(tt<0||tt>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const at of this[$primitivesList]){const st=at.getMaterial(tt);st!=null&&at.addVariant(st,rt)}}updateVariantName(tt,rt){const at=this[$variantData].get(tt);at!=null&&(at.name=rt,this[$variantData].set(rt,at),this[$variantData].delete(tt))}deleteVariant(tt){const rt=this[$variantData].get(tt);if(rt!=null){for(const at of this.materials)at.hasVariant(tt)&&at[$variantSet].delete(rt.index);for(const at of this[$primitivesList])at.deleteVariant(rt.index);this[$variantData].delete(tt)}}}/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var __decorate$6=globalThis&&globalThis.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot};const $currentGLTF=Symbol("currentGLTF"),$originalGltfJson=Symbol("originalGltfJson"),$model=Symbol("model"),$getOnUpdateMethod=Symbol("getOnUpdateMethod"),$textureLoader=Symbol("textureLoader"),SceneGraphMixin=it=>{var tt,rt,at,st;class ot extends it{constructor(){super(...arguments),this[tt]=void 0,this[rt]=null,this[at]=new TextureLoader,this[st]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[$model]}get availableVariants(){return this.model?this.model[$availableVariants]():[]}get originalGltfJson(){return this[$originalGltfJson]}[(tt=$model,rt=$currentGLTF,at=$textureLoader,st=$originalGltfJson,$getOnUpdateMethod)](){return()=>{this[$needsRender]()}}async createTexture(ut,ht="image/png"){const mt=this[$currentGLTF],bt=await new Promise(vt=>this[$textureLoader].load(ut,vt));return!mt||!bt?null:(bt.encoding=sRGBEncoding,bt.wrapS=RepeatWrapping,bt.wrapT=RepeatWrapping,bt.flipY=!1,bt.userData.mimeType=ht,new Texture(this[$getOnUpdateMethod](),bt))}async updated(ut){if(super.updated(ut),ut.has("variantName")){const ht=this[$progressTracker].beginActivity();ht(.1);const mt=this[$model],{variantName:bt}=this;mt!=null&&(await mt[$switchVariant](bt),this[$needsRender](),this.dispatchEvent(new CustomEvent("variant-applied"))),ht(1)}if(ut.has("orientation")||ut.has("scale")){if(!this.loaded)return;const ht=this[$scene];ht.applyTransform(),ht.updateBoundingBox(),ht.updateShadow(),this[$renderer].arRenderer.onUpdateScene(),this[$needsRender]()}}[$onModelLoad](){super[$onModelLoad]();const{currentGLTF:ut}=this[$scene];if(ut!=null){const{correlatedSceneGraph:ht}=ut;ht!=null&&ut!==this[$currentGLTF]&&(this[$model]=new Model(ht,this[$getOnUpdateMethod]()),this[$originalGltfJson]=JSON.parse(JSON.stringify(ht.gltf))),"variants"in ut.userData&&this.requestUpdate("variantName")}this[$currentGLTF]=ut}async exportScene(ut){const ht=this[$scene];return new Promise(async(mt,bt)=>{const vt={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(vt,ut),vt.animations=ht.animations,vt.truncateDrawRange=!0;const At=ht.shadow;let xt=!1;At!=null&&(xt=At.visible,At.visible=!1),await this[$model][$prepareVariantsForExport](),new GLTFExporter().register(Tt=>new GLTFExporterMaterialsVariantsExtension(Tt)).parse(ht.model,Tt=>mt(new Blob([vt.binary?Tt:JSON.stringify(Tt)],{type:vt.binary?"application/octet-stream":"application/json"})),()=>bt("glTF export failed"),vt),At!=null&&(At.visible=xt)})}materialFromPoint(ut,ht){const mt=this[$scene],bt=mt.getNDC(ut,ht);return mt.raycaster.setFromCamera(bt,mt.getCamera()),this[$model][$materialFromPoint](mt.raycaster)}}return __decorate$6([e$3({type:String,attribute:"variant-name"})],ot.prototype,"variantName",void 0),__decorate$6([e$3({type:String,attribute:"orientation"})],ot.prototype,"orientation",void 0),__decorate$6([e$3({type:String,attribute:"scale"})],ot.prototype,"scale",void 0),ot};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const numberNode=(it,tt)=>({type:"number",number:it,unit:tt}),parseExpressions=(()=>{const it={};return rt=>{const at=rt;if(at in it)return it[at];const st=[];let ot=0;for(;rt;){if(++ot>1e3){rt="";break}const lt=parseExpression(rt),ut=lt.nodes[0];if(ut==null||ut.terms.length===0)break;st.push(ut),rt=lt.remainingInput}return it[at]=st}})(),parseExpression=(()=>{const it=/^(\-\-|[a-z\u0240-\uffff])/i,tt=/^([\*\+\/]|[\-]\s)/i,rt=/^[\),]/,at="(",st="#";return ot=>{const lt=[];for(;ot.length&&(ot=ot.trim(),!rt.test(ot));)if(ot[0]===at){const{nodes:ut,remainingInput:ht}=parseFunctionArguments(ot);ot=ht,lt.push({type:"function",name:{type:"ident",value:"calc"},arguments:ut})}else if(it.test(ot)){const ut=parseIdent(ot),ht=ut.nodes[0];if(ot=ut.remainingInput,ot[0]===at){const{nodes:mt,remainingInput:bt}=parseFunctionArguments(ot);lt.push({type:"function",name:ht,arguments:mt}),ot=bt}else lt.push(ht)}else if(tt.test(ot))lt.push({type:"operator",value:ot[0]}),ot=ot.slice(1);else{const{nodes:ut,remainingInput:ht}=ot[0]===st?parseHex(ot):parseNumber(ot);if(ut.length===0)break;lt.push(ut[0]),ot=ht}return{nodes:[{type:"expression",terms:lt}],remainingInput:ot}}})(),parseIdent=(()=>{const it=/[^a-z0-9_\-\u0240-\uffff]/i;return tt=>{const rt=tt.match(it),at=rt==null?tt:tt.substr(0,rt.index),st=rt==null?"":tt.substr(rt.index);return{nodes:[{type:"ident",value:at}],remainingInput:st}}})(),parseNumber=(()=>{const it=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,tt=/^[a-z%]+/i,rt=/^(m|mm|cm|rad|deg|[%])$/;return at=>{const st=at.match(it),ot=st==null?"0":st[0];at=ot==null?at:at.slice(ot.length);const lt=at.match(tt);let ut=lt!=null&&lt[0]!==""?lt[0]:null;const ht=lt==null?at:at.slice(ut.length);return ut!=null&&!rt.test(ut)&&(ut=null),{nodes:[{type:"number",number:parseFloat(ot)||0,unit:ut}],remainingInput:ht}}})(),parseHex=(()=>{const it=/^[a-f0-9]*/i;return tt=>{tt=tt.slice(1).trim();const rt=tt.match(it);return{nodes:rt==null?[]:[{type:"hex",value:rt[0]}],remainingInput:rt==null?tt:tt.slice(rt[0].length)}}})(),parseFunctionArguments=it=>{const tt=[];for(it=it.slice(1).trim();it.length;){const rt=parseExpression(it);if(tt.push(rt.nodes[0]),it=rt.remainingInput.trim(),it[0]===",")it=it.slice(1).trim();else if(it[0]===")"){it=it.slice(1);break}}return{nodes:tt,remainingInput:it}},$visitedTypes=Symbol("visitedTypes");class ASTWalker{constructor(tt){this[$visitedTypes]=tt}walk(tt,rt){const at=tt.slice();for(;at.length;){const st=at.shift();switch(this[$visitedTypes].indexOf(st.type)>-1&&rt(st),st.type){case"expression":at.unshift(...st.terms);break;case"function":at.unshift(st.name,...st.arguments);break}}}}const ZERO=Object.freeze({type:"number",number:0,unit:null});/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const degreesToRadians=(it,tt=0)=>{let{number:rt,unit:at}=it;if(!isFinite(rt))rt=tt,at="rad";else if(it.unit==="rad"||it.unit==null)return it;return{type:"number",number:(at==="deg"&&rt!=null?rt:0)*Math.PI/180,unit:"rad"}},lengthToBaseMeters=(it,tt=0)=>{let{number:rt,unit:at}=it;if(!isFinite(rt))rt=tt,at="m";else if(it.unit==="m")return it;let st;switch(at){default:st=1;break;case"cm":st=1/100;break;case"mm":st=1/1e3;break}return{type:"number",number:st*rt,unit:"m"}},normalizeUnit=(()=>{const it=rt=>rt,tt={rad:it,deg:degreesToRadians,m:it,mm:lengthToBaseMeters,cm:lengthToBaseMeters};return(rt,at=ZERO)=>{isFinite(rt.number)||(rt.number=at.number,rt.unit=at.unit);const{unit:st}=rt;if(st==null)return rt;const ot=tt[st];return ot==null?at:ot(rt)}})();/* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hotspot extends CSS2DObject{constructor(tt){super(document.createElement("div")),this.normal=new Vector3(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=tt.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(tt.position),this.updateNormal(tt.normal)}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(tt){if(tt==null)return;const rt=parseExpressions(tt)[0].terms;for(let at=0;at<3;++at)this.position.setComponent(at,normalizeUnit(rt[at]).number);this.updateMatrixWorld()}updateNormal(tt){if(tt==null)return;const rt=parseExpressions(tt)[0].terms;for(let at=0;at<3;++at)this.normal.setComponent(at,normalizeUnit(rt[at]).number)}orient(tt){this.pivot.style.transform=`rotate(${tt}rad)`}updateVisibility(tt){tt?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(rt=>{if(rt.nodeType!==Node.ELEMENT_NODE)return;const at=rt,st=at.dataset.visibilityAttribute;if(st!=null){const ot=`data-${st}`;tt?at.setAttribute(ot,""):at.removeAttribute(ot)}at.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:tt}}))}),this.initialized=!0}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const reduceVertices=(it,tt,rt)=>{let at=rt;const st=new Vector3;return it.traverseVisible(ot=>{let lt,ut;ot.updateWorldMatrix(!1,!1);const ht=ot.geometry;if(ht!==void 0){if(ht.isGeometry){const mt=ht.vertices;for(lt=0,ut=mt.length;lt<ut;lt++)st.copy(mt[lt]),ot.isSkinnedMesh?ot.boneTransform(lt,st):st.applyMatrix4(ot.matrixWorld),at=tt(at,st)}else if(ht.isBufferGeometry){const{position:mt}=ht.attributes;if(mt!==void 0)for(lt=0,ut=mt.count;lt<ut;lt++)st.fromBufferAttribute(mt,lt),ot.isSkinnedMesh?ot.boneTransform(lt,st):st.applyMatrix4(ot.matrixWorld),at=tt(at,st)}}}),at},HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function lerp(it,tt,rt){return(1-rt)*it+rt*tt}/* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const LOG_MAX_RESOLUTION=9,LOG_MIN_RESOLUTION=6,ANIMATION_SCALING=2,DEFAULT_HARD_INTENSITY=.3;class Shadow extends Object3D{constructor(tt,rt,at){super(),this.camera=new OrthographicCamera,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new MeshDepthMaterial,this.horizontalBlurMaterial=new ShaderMaterial(HorizontalBlurShader),this.verticalBlurMaterial=new ShaderMaterial(VerticalBlurShader),this.intensity=0,this.softness=1,this.boundingBox=new Box3,this.size=new Vector3,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:st}=this;st.rotation.x=Math.PI/2,st.left=-.5,st.right=.5,st.bottom=-.5,st.top=.5,this.add(st);const ot=new PlaneGeometry,lt=new MeshBasicMaterial({opacity:1,transparent:!0,side:BackSide});this.floor=new Mesh(ot,lt),this.floor.userData.shadow=!0,st.add(this.floor),this.blurPlane=new Mesh(ot),this.blurPlane.visible=!1,st.add(this.blurPlane),tt.target.add(this),this.depthMaterial.onBeforeCompile=function(ut){ut.fragmentShader=ut.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(tt,rt,at)}setScene(tt,rt,at){const{boundingBox:st,size:ot,rotation:lt,position:ut}=this;if(this.isAnimated=tt.animationNames.length>0,this.boundingBox.copy(tt.boundingBox),this.size.copy(tt.size),this.maxDimension=Math.max(ot.x,ot.y,ot.z)*(this.isAnimated?ANIMATION_SCALING:1),this.boundingBox.getCenter(ut),at==="back"){const{min:ht,max:mt}=st;[ht.y,ht.z]=[ht.z,ht.y],[mt.y,mt.z]=[mt.z,mt.y],[ot.y,ot.z]=[ot.z,ot.y],lt.x=Math.PI/2,lt.y=Math.PI}else lt.x=0,lt.y=0;if(this.isAnimated){const ht=st.min.y,mt=st.max.y;ot.y=this.maxDimension,st.expandByVector(ot.subScalar(this.maxDimension).multiplyScalar(-.5)),st.min.y=ht,st.max.y=mt,ot.set(this.maxDimension,mt-ht,this.maxDimension)}at==="bottom"?ut.y=st.min.y:ut.z=st.min.y,this.setSoftness(rt)}setSoftness(tt){this.softness=tt;const{size:rt,camera:at}=this,st=this.isAnimated?ANIMATION_SCALING:1,ot=st*Math.pow(2,LOG_MAX_RESOLUTION-tt*(LOG_MAX_RESOLUTION-LOG_MIN_RESOLUTION));this.setMapSize(ot);const lt=rt.y/2,ut=rt.y*st;at.near=0,at.far=lerp(ut,lt,tt),this.depthMaterial.opacity=1/tt,at.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(tt){const{size:rt}=this;this.isAnimated&&(tt*=ANIMATION_SCALING);const at=Math.floor(rt.x>rt.z?tt:tt*rt.x/rt.z),st=Math.floor(rt.x>rt.z?tt*rt.z/rt.x:tt),ot=10,lt=ot+at,ut=ot+st;if(this.renderTarget!=null&&(this.renderTarget.width!==lt||this.renderTarget.height!==ut)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const ht={format:RGBAFormat};this.renderTarget=new WebGLRenderTarget(lt,ut,ht),this.renderTargetBlur=new WebGLRenderTarget(lt,ut,ht),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(rt.x*(1+ot/at),rt.z*(1+ot/st),1),this.needsUpdate=!0}setIntensity(tt){this.intensity=tt,tt>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=tt*lerp(DEFAULT_HARD_INTENSITY,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(tt){this.floor.position.z=-tt+.001*this.maxDimension}render(tt,rt){rt.overrideMaterial=this.depthMaterial;const at=tt.getClearAlpha();tt.setClearAlpha(0),this.floor.visible=!1;const st=tt.xr.enabled;tt.xr.enabled=!1;const ot=tt.getRenderTarget();tt.setRenderTarget(this.renderTarget),tt.render(rt,this.camera),rt.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(tt),tt.xr.enabled=st,tt.setRenderTarget(ot),tt.setClearAlpha(at)}blurShadow(tt){const{camera:rt,horizontalBlurMaterial:at,verticalBlurMaterial:st,renderTarget:ot,renderTargetBlur:lt,blurPlane:ut}=this;ut.visible=!0,ut.material=at,at.uniforms.h.value=1/this.renderTarget.width,at.uniforms.tDiffuse.value=this.renderTarget.texture,tt.setRenderTarget(lt),tt.render(ut,rt),ut.material=st,st.uniforms.v.value=1/this.renderTarget.height,st.uniforms.tDiffuse.value=this.renderTargetBlur.texture,tt.setRenderTarget(ot),tt.render(ut,rt),ut.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MIN_SHADOW_RATIO=100,view=new Vector3,target=new Vector3,normalWorld=new Vector3,raycaster=new Raycaster,vector3$1=new Vector3,ndc=new Vector2;class ModelScene extends Scene{constructor({canvas:tt,element:rt,width:at,height:st}){super(),this.annotationRenderer=new CSS2DRenderer,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new PerspectiveCamera(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new Object3D,this.animationNames=[],this.boundingBox=new Box3,this.boundingSphere=new Sphere,this.size=new Vector3,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new Vector3,this.targetDamperX=new Damper,this.targetDamperY=new Damper,this.targetDamperZ=new Damper,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=rt,this.canvas=tt,this.camera=new PerspectiveCamera(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(at,st),this.target.name="Target",this.mixer=new AnimationMixer(this.target);const{domElement:ot}=this.annotationRenderer,{style:lt}=ot;lt.display="none",lt.pointerEvents="none",lt.position="absolute",lt.top="0",this.element.shadowRoot.querySelector(".default").appendChild(ot),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(tt){this.reset(),this._model=tt,this.target.add(tt),await this.setupScene()}async setSource(tt,rt=()=>{}){if(!tt||tt===this.url){rt(1);return}if(this.reset(),this.url=tt,this.externalRenderer!=null){const ut=await this.externalRenderer.load(rt);this.boundingSphere.radius=ut.framedRadius,this.idealAspect=ut.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let at;try{at=await new Promise(async(ut,ht)=>{this.cancelPendingSourceChange=()=>ht();try{const mt=await this.element[$renderer].loader.load(tt,this.element,rt);ut(mt)}catch(mt){ht(mt)}})}catch(ut){if(ut==null)return;throw ut}this.cancelPendingSourceChange=null,this.reset(),this.url=tt,this._currentGLTF=at,at!=null&&(this._model=at.scene,this.target.add(at.scene));const{animations:st}=at,ot=new Map,lt=[];for(const ut of st)ot.set(ut.name,ut),lt.push(ut.name);this.animations=st,this.animationsByName=ot,this.animationNames=lt,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:tt}=this;tt!=null&&(tt.removeFromParent(),this._model=null);const rt=this._currentGLTF;rt!=null&&(rt.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[$currentGLTF]=null,this.element[$originalGltfJson]=null,this.element[$model]=null}get currentGLTF(){return this._currentGLTF}setSize(tt,rt){if(!(this.width===tt&&this.height===rt)){if(this.width=Math.max(tt,1),this.height=Math.max(rt,1),this.annotationRenderer.setSize(tt,rt),this.aspect=this.width/this.height,this.externalRenderer!=null){const at=resolveDpr();this.externalRenderer.resize(tt*at,rt*at)}this.queueRender()}}markBakedShadow(tt){tt.userData.shadow=!0,this.bakedShadows.add(tt)}unmarkBakedShadow(tt){tt.userData.shadow=!1,tt.visible=!0,this.bakedShadows.delete(tt),this.boundingBox.expandByObject(tt)}findBakedShadows(tt){const rt=new Box3;tt.traverse(at=>{const st=at;if(!st.isMesh||!st.material.transparent)return;rt.setFromObject(st);const lt=rt.getSize(vector3$1),ut=Math.min(lt.x,lt.y,lt.z);Math.max(lt.x,lt.y,lt.z)<MIN_SHADOW_RATIO*ut||this.markBakedShadow(st)})}checkBakedShadows(){const{min:tt,max:rt}=this.boundingBox,at=new Box3;this.boundingBox.getSize(this.size);for(const st of this.bakedShadows)at.setFromObject(st),!(at.min.y<tt.y+this.size.y/MIN_SHADOW_RATIO&&at.min.x<=tt.x&&at.max.x>=rt.x&&at.min.z<=tt.z&&at.max.z>=rt.z)&&(at.min.z<tt.z+this.size.z/MIN_SHADOW_RATIO&&at.min.x<=tt.x&&at.max.x>=rt.x&&at.min.y<=tt.y&&at.max.y>=rt.y||this.unmarkBakedShadow(st))}applyTransform(){const{model:tt}=this;if(tt==null)return;const rt=parseExpressions(this.element.orientation)[0].terms,at=normalizeUnit(rt[0]).number,st=normalizeUnit(rt[1]).number,ot=normalizeUnit(rt[2]).number;tt.quaternion.setFromEuler(new Euler(st,ot,at,"YXZ"));const lt=parseExpressions(this.element.scale)[0].terms;tt.scale.set(lt[0].number,lt[1].number,lt[2].number)}updateBoundingBox(){const{model:tt}=this;if(tt==null)return;this.target.remove(tt),this.findBakedShadows(tt);const rt=(at,st)=>at.expandByPoint(st);this.setBakedShadowVisibility(!1),this.boundingBox=reduceVertices(tt,rt,new Box3),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(at=>this.unmarkBakedShadow(at)),this.boundingBox=reduceVertices(tt,rt,new Box3)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(tt)}async updateFraming(){const{model:tt}=this;if(tt==null)return;this.target.remove(tt),this.setBakedShadowVisibility(!1);const{center:rt}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,rt.copy(this.getTarget());const at=(ot,lt)=>Math.max(ot,rt.distanceToSquared(lt));this.boundingSphere.radius=Math.sqrt(reduceVertices(tt,at,0));const st=(ot,lt)=>{lt.sub(rt);const ut=Math.sqrt(lt.x*lt.x+lt.z*lt.z);return Math.max(ot,ut/(this.idealCameraDistance()-Math.abs(lt.y)))};this.idealAspect=reduceVertices(tt,st,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(tt)}setBakedShadowVisibility(tt=this.shadowIntensity<=0){for(const rt of this.bakedShadows)rt.visible=tt}idealCameraDistance(){const tt=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(tt)}adjustedFoV(tt){const rt=Math.tan(tt/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(rt)*180/Math.PI}getNDC(tt,rt){if(this.xrCamera!=null)ndc.set(tt/window.screen.width,rt/window.screen.height);else{const at=this.element.getBoundingClientRect();ndc.set((tt-at.x)/this.width,(rt-at.y)/this.height)}return ndc.multiplyScalar(2).subScalar(1),ndc.y*=-1,ndc}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(tt,rt){this.element[$renderer].arRenderer.presentedScene!==this&&(this.environment=tt,this.background=rt,this.queueRender())}setTarget(tt,rt,at){this.goalTarget.set(-tt,-rt,-at)}setTargetDamperDecayTime(tt){this.targetDamperX.setDecayTime(tt),this.targetDamperY.setDecayTime(tt),this.targetDamperZ.setDecayTime(tt)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(SETTLING_TIME)}updateTarget(tt){const rt=this.goalTarget,at=this.target.position;if(rt.equals(at))return!1;{const st=this.boundingSphere.radius/10;let{x:ot,y:lt,z:ut}=at;return ot=this.targetDamperX.update(ot,rt.x,tt,st),lt=this.targetDamperY.update(lt,rt.y,tt,st),ut=this.targetDamperZ.update(ut,rt.z,tt,st),this.target.position.set(ot,lt,ut),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(tt,rt){const{x:at,z:st}=this.position;this.yaw=Math.atan2(tt-at,rt-st)}get model(){return this._model}set yaw(tt){this.rotation.y=tt,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(tt){this.mixer.setTime(tt),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const tt=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===LoopPingPong&&(tt&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(tt){this.mixer.timeScale=tt}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(tt=null,rt=0,at=LoopRepeat,st=1/0){if(this._currentGLTF==null)return;const{animations:ot}=this;if(ot==null||ot.length===0){console.warn("Cannot play animation (model does not have any animations)");return}let lt=null;if(tt!=null&&(lt=this.animationsByName.get(tt),lt==null)){const ut=parseInt(tt);!isNaN(ut)&&ut>=0&&ut<ot.length&&(lt=ot[ut])}lt==null&&(lt=ot[0]);try{const{currentAnimationAction:ut}=this,ht=this.mixer.clipAction(lt,this);this.currentAnimationAction=ht,this.element.paused?this.mixer.stopAllAction():(ht.paused=!1,ut!=null&&ht!==ut?ht.crossFadeFrom(ut,rt,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),ht.setLoop(at,st),ht.enabled=!0,ht.clampWhenFinished=!0,ht.play()}catch(ut){console.error(ut)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(tt){this.mixer.update(tt),this.queueShadowRender()}subscribeMixerEvent(tt,rt){this.mixer.addEventListener(tt,rt)}updateShadow(){const tt=this.shadow;if(tt!=null){const rt=this.element.arPlacement==="wall"?"back":"bottom";tt.setScene(this,this.shadowSoftness,rt),tt.needsUpdate=!0}}renderShadow(tt){const rt=this.shadow;rt!=null&&rt.needsUpdate==!0&&(rt.render(tt,this),rt.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(tt){if(this.shadowIntensity=tt,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(tt<=0&&this.shadow==null))){if(this.shadow==null){const rt=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new Shadow(this,this.shadowSoftness,rt)}this.shadow.setIntensity(tt)}}setShadowSoftness(tt){this.shadowSoftness=tt;const rt=this.shadow;rt!=null&&rt.setSoftness(tt)}setShadowOffset(tt){const rt=this.shadow;rt!=null&&rt.setOffset(tt)}get raycaster(){return raycaster}positionAndNormalFromPoint(tt,rt=this){this.raycaster.setFromCamera(tt,this.getCamera());const st=this.raycaster.intersectObject(rt,!0).find(ot=>ot.object.visible&&!ot.object.userData.shadow);return st==null||st.face==null?null:st.uv==null?{position:st.point,normal:st.face.normal,uv:null}:(st.face.normal.applyNormalMatrix(new Matrix3().getNormalMatrix(st.object.matrixWorld)),{position:st.point,normal:st.face.normal,uv:st.uv})}addHotspot(tt){this.target.add(tt),this.annotationRenderer.domElement.appendChild(tt.element)}removeHotspot(tt){this.target.remove(tt)}forHotspots(tt){const{children:rt}=this.target;for(let at=0,st=rt.length;at<st;at++){const ot=rt[at];ot instanceof Hotspot&&tt(ot)}}updateHotspots(tt){this.forHotspots(rt=>{view.copy(tt),target.setFromMatrixPosition(rt.matrixWorld),view.sub(target),normalWorld.copy(rt.normal).transformDirection(this.target.matrixWorld),view.dot(normalWorld)<0?rt.hide():rt.show()})}orientHotspots(tt){this.forHotspots(rt=>{rt.orient(tt)})}setHotspotsVisibility(tt){this.forHotspots(rt=>{rt.visible=tt})}updateSchema(tt){var rt;const{schemaElement:at,element:st}=this,{alt:ot,poster:lt,iosSrc:ut}=st;if(tt!=null){const ht=[{"@type":"MediaObject",contentUrl:tt,encodingFormat:((rt=tt.split(".").pop())===null||rt===void 0?void 0:rt.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];ut&&ht.push({"@type":"MediaObject",contentUrl:ut,encodingFormat:"model/vnd.usdz+zip"});const mt={"@context":"http://schema.org/","@type":"3DModel",image:lt!=null?lt:void 0,name:ot!=null?ot:void 0,encoding:ht};at.textContent=JSON.stringify(mt),document.head.appendChild(at)}else at.parentElement!=null&&at.parentElement.removeChild(at)}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dataUrlToBlob=async it=>new Promise((tt,rt)=>{const st=it.match(/data:(.*);/);if(!st)return rt(new Error(`${it} is not a valid data Url`));const ot=st[1],lt=it.replace(/data:image\/\w+;base64,/,""),ut=atob(lt),ht=[];for(let mt=0;mt<ut.length;mt+=512){const bt=ut.slice(mt,mt+512),vt=new Array(bt.length);for(let xt=0;xt<bt.length;xt++)vt[xt]=bt.charCodeAt(xt);const At=new Uint8Array(vt);ht.push(At)}tt(new Blob(ht,{type:ot}))});/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ProgressTracker extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){const tt={progress:0,completed:!1};return this.ongoingActivities.add(tt),this.ongoingActivityCount===1&&this.announceTotalProgress(tt,0),rt=>{let at;return at=Math.max(clamp(rt,0,1),tt.progress),at!==tt.progress&&this.announceTotalProgress(tt,at),tt.progress}}announceTotalProgress(tt,rt){let at=0,st=0;rt==1&&(tt.completed=!0);for(const ut of this.ongoingActivities){const{progress:ht}=ut;at+=1-ht,ut.completed===!0&&st++}const ot=tt.progress;tt.progress=rt,this.totalProgress+=(rt-ot)*(1-this.totalProgress)/at;const lt=st===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:lt}})),st===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var __decorate$5=globalThis&&globalThis.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot},_a$3,_b$3,_c$2,_d$1,_e,_f,_g,_h,_j,_k,_l,_m,_o;const CLEAR_MODEL_TIMEOUT_MS=1e3,FALLBACK_SIZE_UPDATE_THRESHOLD_MS=50,ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD=0,UNSIZED_MEDIA_WIDTH=300,UNSIZED_MEDIA_HEIGHT=150,blobCanvas=document.createElement("canvas"),$fallbackResizeHandler=Symbol("fallbackResizeHandler"),$defaultAriaLabel=Symbol("defaultAriaLabel"),$resizeObserver=Symbol("resizeObserver"),$clearModelTimeout=Symbol("clearModelTimeout"),$onContextLost=Symbol("onContextLost"),$loaded=Symbol("loaded"),$status=Symbol("status"),$onFocus=Symbol("onFocus"),$onBlur=Symbol("onBlur"),$updateSize=Symbol("updateSize"),$intersectionObserver=Symbol("intersectionObserver"),$isElementInViewport=Symbol("isElementInViewport"),$announceModelVisibility=Symbol("announceModelVisibility"),$ariaLabel=Symbol("ariaLabel"),$altDefaulted=Symbol("altDefaulted"),$statusElement=Symbol("statusElement"),$updateStatus=Symbol("updateStatus"),$loadedTime=Symbol("loadedTime"),$updateSource=Symbol("updateSource"),$markLoaded=Symbol("markLoaded"),$container=Symbol("container"),$userInputElement=Symbol("input"),$canvas=Symbol("canvas"),$scene=Symbol("scene"),$needsRender=Symbol("needsRender"),$tick=Symbol("tick"),$onModelLoad=Symbol("onModelLoad"),$onResize=Symbol("onResize"),$renderer=Symbol("renderer"),$progressTracker=Symbol("progressTracker"),$getLoaded=Symbol("getLoaded"),$getModelIsVisible=Symbol("getModelIsVisible"),$shouldAttemptPreload=Symbol("shouldAttemptPreload"),toVector3D=it=>({x:it.x,y:it.y,z:it.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),toVector2D=it=>({u:it.x,v:it.y,toString(){return`${this.u} ${this.v}`}});class ModelViewerElementBase extends d$1{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[_a$3]=!1,this[_b$3]=!1,this[_c$2]=0,this[_d$1]="",this[_e]=null,this[_f]=debounce(()=>{const st=this.getBoundingClientRect();this[$updateSize](st)},FALLBACK_SIZE_UPDATE_THRESHOLD_MS),this[_g]=debounce(st=>{const ot=this.modelIsVisible;ot!==st&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:ot}}))},ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD),this[_h]=null,this[_j]=null,this[_k]=new ProgressTracker,this[_l]=()=>{this[$statusElement].textContent=this[$status]},this[_m]=()=>{this[$statusElement].textContent=""},this[_o]=st=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:st.sourceEvent}}))},this.attachShadow({mode:"open"});const tt=this.shadowRoot;makeTemplate(tt),this[$container]=tt.querySelector(".container"),this[$userInputElement]=tt.querySelector(".userInput"),this[$canvas]=tt.querySelector("canvas"),this[$statusElement]=tt.querySelector("#status"),this[$defaultAriaLabel]=this[$userInputElement].getAttribute("aria-label");let rt,at;if(this.isConnected){const st=this.getBoundingClientRect();rt=st.width,at=st.height}else rt=UNSIZED_MEDIA_WIDTH,at=UNSIZED_MEDIA_HEIGHT;this[$scene]=new ModelScene({canvas:this[$canvas],element:this,width:rt,height:at}),Promise.resolve().then(()=>{this[$updateSize](this.getBoundingClientRect())}),HAS_RESIZE_OBSERVER&&(this[$resizeObserver]=new ResizeObserver(st=>{if(!this[$renderer].isPresenting)for(let ot of st)ot.target===this&&this[$updateSize](ot.contentRect)})),HAS_INTERSECTION_OBSERVER?this[$intersectionObserver]=new IntersectionObserver(st=>{for(let ot of st)if(ot.target===this){const lt=this.modelIsVisible;this[$isElementInViewport]=ot.isIntersecting,this[$announceModelVisibility](lt),this[$isElementInViewport]&&!this.loaded&&this[$updateSource]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[$isElementInViewport]=!0}static get is(){return"model-viewer"}static set modelCacheSize(tt){CachingGLTFLoader[$evictionPolicy].evictionThreshold=tt}static get modelCacheSize(){return CachingGLTFLoader[$evictionPolicy].evictionThreshold}static set minimumRenderScale(tt){tt>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),tt<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),Renderer.singleton.minScale=tt}static get minimumRenderScale(){return Renderer.singleton.minScale}get loaded(){return this[$getLoaded]()}get[(_a$3=$isElementInViewport,_b$3=$loaded,_c$2=$loadedTime,_d$1=$status,_e=$clearModelTimeout,_f=$fallbackResizeHandler,_g=$announceModelVisibility,_h=$resizeObserver,_j=$intersectionObserver,_k=$progressTracker,$renderer)](){return Renderer.singleton}get modelIsVisible(){return this[$getModelIsVisible]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),HAS_RESIZE_OBSERVER?this[$resizeObserver].observe(this):self.addEventListener("resize",this[$fallbackResizeHandler]),HAS_INTERSECTION_OBSERVER&&this[$intersectionObserver].observe(this),this.addEventListener("focus",this[$onFocus]),this.addEventListener("blur",this[$onBlur]);const tt=this[$renderer];tt.addEventListener("contextlost",this[$onContextLost]),tt.registerScene(this[$scene]),this[$clearModelTimeout]!=null&&(self.clearTimeout(this[$clearModelTimeout]),this[$clearModelTimeout]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),HAS_RESIZE_OBSERVER?this[$resizeObserver].unobserve(this):self.removeEventListener("resize",this[$fallbackResizeHandler]),HAS_INTERSECTION_OBSERVER&&this[$intersectionObserver].unobserve(this),this.removeEventListener("focus",this[$onFocus]),this.removeEventListener("blur",this[$onBlur]);const tt=this[$renderer];tt.removeEventListener("contextlost",this[$onContextLost]),tt.unregisterScene(this[$scene]),this[$clearModelTimeout]=self.setTimeout(()=>{this[$scene].dispose(),this[$clearModelTimeout]=null},CLEAR_MODEL_TIMEOUT_MS)}updated(tt){super.updated(tt),tt.has("src")&&(this.src==null?(this[$loaded]=!1,this[$loadedTime]=0,this[$scene].reset()):this.src!==this[$scene].url&&(this[$loaded]=!1,this[$loadedTime]=0,this[$updateSource]())),tt.has("alt")&&this[$userInputElement].setAttribute("aria-label",this[$ariaLabel]),tt.has("withCredentials")&&(CachingGLTFLoader.withCredentials=this.withCredentials),tt.has("generateSchema")&&(this.generateSchema?this[$scene].updateSchema(this.src):this[$scene].updateSchema(null))}toDataURL(tt,rt){return this[$renderer].displayCanvas(this[$scene]).toDataURL(tt,rt)}async toBlob(tt){const rt=tt?tt.mimeType:void 0,at=tt?tt.qualityArgument:void 0,st=tt?tt.idealAspect:void 0,{width:ot,height:lt,idealAspect:ut,aspect:ht}=this[$scene],{dpr:mt,scaleFactor:bt}=this[$renderer];let vt=ot*bt*mt,At=lt*bt*mt,xt=0,Et=0;if(st===!0)if(ut>ht){const Tt=At;At=Math.round(vt/ut),Et=(Tt-At)/2}else{const Tt=vt;vt=Math.round(At*ut),xt=(Tt-vt)/2}blobCanvas.width=vt,blobCanvas.height=At;try{return new Promise(async(Tt,wt)=>{if(blobCanvas.getContext("2d").drawImage(this[$renderer].displayCanvas(this[$scene]),xt,Et,vt,At,0,0,vt,At),blobCanvas.msToBlob&&(!rt||rt==="image/png"))return Tt(blobCanvas.msToBlob());if(!blobCanvas.toBlob)return Tt(await dataUrlToBlob(blobCanvas.toDataURL(rt,at)));blobCanvas.toBlob(Ct=>{if(!Ct)return wt(new Error("Unable to retrieve canvas blob"));Tt(Ct)},rt,at)})}finally{this[$updateSize]({width:ot,height:lt})}}registerRenderer(tt){this[$scene].externalRenderer=tt}unregisterRenderer(){this[$scene].externalRenderer=null}get[$ariaLabel](){return this[$altDefaulted]}get[$altDefaulted](){return this.alt==null||this.alt==="null"?this[$defaultAriaLabel]:this.alt}[$getLoaded](){return this[$loaded]}[$getModelIsVisible](){return this.loaded&&this[$isElementInViewport]}[$shouldAttemptPreload](){return!!this.src&&this[$isElementInViewport]}[$updateSize]({width:tt,height:rt}){this[$container].style.width=`${tt}px`,this[$container].style.height=`${rt}px`,this[$onResize]({width:parseFloat(tt),height:parseFloat(rt)})}[$tick](tt,rt){}[$markLoaded](){this[$loaded]||(this[$loaded]=!0,this[$loadedTime]=performance.now())}[$needsRender](){this[$scene].queueRender()}[$onModelLoad](){}[$updateStatus](tt){this[$status]=tt;const rt=this.getRootNode();rt!=null&&rt.activeElement===this&&this[$statusElement].textContent!=tt&&(this[$statusElement].textContent=tt)}[(_l=$onFocus,_m=$onBlur,$onResize)](tt){this[$scene].setSize(tt.width,tt.height)}async[(_o=$onContextLost,$updateSource)](){const tt=this[$scene];if(this.loaded||!this[$shouldAttemptPreload]()||this.src===tt.url)return;this.generateSchema&&tt.updateSchema(this.src),this[$updateStatus]("Loading"),tt.stopAnimation();const rt=this[$progressTracker].beginActivity(),at=this.src;try{const st=tt.setSource(at,lt=>rt(clamp(lt,0,1)*.95)),ot=this[$updateEnvironment]();await Promise.all([st,ot]),this[$markLoaded](),this[$onModelLoad](),await new Promise(lt=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:at}})),lt()})})})}catch(st){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:st}}))}finally{rt(1)}}}__decorate$5([e$3({type:String})],ModelViewerElementBase.prototype,"alt",void 0),__decorate$5([e$3({type:String})],ModelViewerElementBase.prototype,"src",void 0),__decorate$5([e$3({type:Boolean,attribute:"with-credentials"})],ModelViewerElementBase.prototype,"withCredentials",void 0),__decorate$5([e$3({type:Boolean,attribute:"generate-schema"})],ModelViewerElementBase.prototype,"generateSchema",void 0);/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var __decorate$4=globalThis&&globalThis.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot};const MILLISECONDS_PER_SECOND=1e3,$changeAnimation=Symbol("changeAnimation"),$paused=Symbol("paused"),DEFAULT_PLAY_OPTIONS={repetitions:1/0,pingpong:!1},AnimationMixin=it=>{var tt;class rt extends it{constructor(...st){super(st),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[tt]=!0,this[$scene].subscribeMixerEvent("loop",ot=>{const lt=ot.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:lt}}))}),this[$scene].subscribeMixerEvent("finished",()=>{this[$paused]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[$scene].animationNames:[]}get duration(){return this[$scene].duration}get paused(){return this[$paused]}get currentTime(){return this[$scene].animationTime}set currentTime(st){this[$scene].animationTime=st,this[$needsRender]()}get timeScale(){return this[$scene].animationTimeScale}set timeScale(st){this[$scene].animationTimeScale=st}pause(){this[$paused]||(this[$paused]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(st){this.availableAnimations.length>0&&(this[$paused]=!1,this[$changeAnimation](st),this.dispatchEvent(new CustomEvent("play")))}[(tt=$paused,$onModelLoad)](){super[$onModelLoad](),this[$paused]=!0,this.autoplay&&this.play()}[$tick](st,ot){super[$tick](st,ot),!(this[$paused]||!this[$getModelIsVisible]()&&!this[$renderer].isPresenting)&&(this[$scene].updateAnimation(ot/MILLISECONDS_PER_SECOND),this[$needsRender]())}updated(st){super.updated(st),st.has("autoplay")&&this.autoplay&&this.play(),st.has("animationName")&&this[$changeAnimation]()}[$changeAnimation](st=DEFAULT_PLAY_OPTIONS){var ot;const lt=(ot=st.repetitions)!==null&&ot!==void 0?ot:1/0,ut=st.pingpong?LoopPingPong:lt===1?LoopOnce:LoopRepeat;this[$scene].playAnimation(this.animationName,this.animationCrossfadeDuration/MILLISECONDS_PER_SECOND,ut,lt),this[$paused]&&(this[$scene].updateAnimation(0),this[$needsRender]())}}return __decorate$4([e$3({type:Boolean})],rt.prototype,"autoplay",void 0),__decorate$4([e$3({type:String,attribute:"animation-name"})],rt.prototype,"animationName",void 0),__decorate$4([e$3({type:Number,attribute:"animation-crossfade-duration"})],rt.prototype,"animationCrossfadeDuration",void 0),rt};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $hotspotMap=Symbol("hotspotMap"),$mutationCallback=Symbol("mutationCallback"),$observer=Symbol("observer"),$addHotspot=Symbol("addHotspot"),$removeHotspot=Symbol("removeHotspot"),worldToModel=new Matrix4,worldToModelNormal=new Matrix3,AnnotationMixin=it=>{var tt,rt,at;class st extends it{constructor(){super(...arguments),this[tt]=new Map,this[rt]=lt=>{lt.forEach(ut=>{(!(ut instanceof MutationRecord)||ut.type==="childList")&&(ut.addedNodes.forEach(ht=>{this[$addHotspot](ht)}),ut.removedNodes.forEach(ht=>{this[$removeHotspot](ht)}),this[$needsRender]())})},this[at]=new MutationObserver(this[$mutationCallback])}connectedCallback(){super.connectedCallback();for(let ut=0;ut<this.children.length;++ut)this[$addHotspot](this.children[ut]);const{ShadyDOM:lt}=self;lt==null?this[$observer].observe(this,{childList:!0}):this[$observer]=lt.observeChildren(this,this[$mutationCallback])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:lt}=self;lt==null?this[$observer].disconnect():lt.unobserveChildren(this[$observer])}[(tt=$hotspotMap,rt=$mutationCallback,at=$observer,$tick)](lt,ut){super[$tick](lt,ut);const ht=this[$scene],{annotationRenderer:mt}=ht,bt=ht.getCamera();ht.shouldRender()&&(ht.updateHotspots(bt.position),mt.domElement.style.display="",mt.render(ht,bt))}updateHotspot(lt){const ut=this[$hotspotMap].get(lt.name);ut!=null&&(ut.updatePosition(lt.position),ut.updateNormal(lt.normal),this[$needsRender]())}queryHotspot(lt){const ut=this[$hotspotMap].get(lt);if(ut==null)return null;const ht=toVector3D(ut.position),mt=toVector3D(ut.normal),bt=ut.facingCamera,vt=this[$scene],At=vt.getCamera(),xt=new Vector3;xt.setFromMatrixPosition(ut.matrixWorld),xt.project(At);const Et=vt.width/2,Tt=vt.height/2;xt.x=xt.x*Et+Et,xt.y=-(xt.y*Tt)+Tt;const wt=toVector3D(new Vector3(xt.x,xt.y,xt.z));return!Number.isFinite(wt.x)||!Number.isFinite(wt.y)?null:{position:ht,normal:mt,canvasPosition:wt,facingCamera:bt}}positionAndNormalFromPoint(lt,ut){const ht=this[$scene],mt=ht.getNDC(lt,ut),bt=ht.positionAndNormalFromPoint(mt);if(bt==null)return null;worldToModel.copy(ht.target.matrixWorld).invert();const vt=toVector3D(bt.position.applyMatrix4(worldToModel));worldToModelNormal.getNormalMatrix(worldToModel);const At=toVector3D(bt.normal.applyNormalMatrix(worldToModelNormal));let xt=null;return bt.uv!=null&&(xt=toVector2D(bt.uv)),{position:vt,normal:At,uv:xt}}[$addHotspot](lt){if(!(lt instanceof HTMLElement&&lt.slot.indexOf("hotspot")===0))return;let ut=this[$hotspotMap].get(lt.slot);ut!=null?ut.increment():(ut=new Hotspot({name:lt.slot,position:lt.dataset.position,normal:lt.dataset.normal}),this[$hotspotMap].set(lt.slot,ut),this[$scene].addHotspot(ut)),this[$scene].queueRender()}[$removeHotspot](lt){if(!(lt instanceof HTMLElement))return;const ut=this[$hotspotMap].get(lt.slot);!ut||(ut.decrement()&&(this[$scene].removeHotspot(ut),this[$hotspotMap].delete(lt.slot)),this[$scene].queueRender())}}return st};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var durl=function(it){return URL.createObjectURL(new Blob([it],{type:"text/javascript"}))};try{URL.revokeObjectURL(durl(""))}catch(it){durl=function(tt){return"data:application/javascript;charset=UTF-8,"+encodeURI(tt)}}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(it,tt){for(var rt=new u16(31),at=0;at<31;++at)rt[at]=tt+=1<<it[at-1];for(var st=new u32(rt[30]),at=1;at<30;++at)for(var ot=rt[at];ot<rt[at+1];++ot)st[ot]=ot-rt[at]<<5|at;return[rt,st]},_a$2=freb(fleb,2),fl=_a$2[0],revfl=_a$2[1];fl[28]=258,revfl[258]=28;for(var _b$2=freb(fdeb,0),revfd=_b$2[1],rev=new u16(32768),i=0;i<32768;++i){var x=(i&43690)>>>1|(i&21845)<<1;x=(x&52428)>>>2|(x&13107)<<2,x=(x&61680)>>>4|(x&3855)<<4,rev[i]=((x&65280)>>>8|(x&255)<<8)>>>1}for(var hMap=function(it,tt,rt){for(var at=it.length,st=0,ot=new u16(tt);st<at;++st)++ot[it[st]-1];var lt=new u16(tt);for(st=0;st<tt;++st)lt[st]=lt[st-1]+ot[st-1]<<1;var ut;if(rt){ut=new u16(1<<tt);var ht=15-tt;for(st=0;st<at;++st)if(it[st])for(var mt=st<<4|it[st],bt=tt-it[st],vt=lt[it[st]-1]++<<bt,At=vt|(1<<bt)-1;vt<=At;++vt)ut[rev[vt]>>>ht]=mt}else for(ut=new u16(at),st=0;st<at;++st)it[st]&&(ut[st]=rev[lt[it[st]-1]++]>>>15-it[st]);return ut},flt=new u8(288),i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;for(var fdt=new u8(32),i=0;i<32;++i)fdt[i]=5;var flm=hMap(flt,9,0),fdm=hMap(fdt,5,0),shft=function(it){return(it/8|0)+(it&7&&1)},slc=function(it,tt,rt){(tt==null||tt<0)&&(tt=0),(rt==null||rt>it.length)&&(rt=it.length);var at=new(it instanceof u16?u16:it instanceof u32?u32:u8)(rt-tt);return at.set(it.subarray(tt,rt)),at},wbits=function(it,tt,rt){rt<<=tt&7;var at=tt/8|0;it[at]|=rt,it[at+1]|=rt>>>8},wbits16=function(it,tt,rt){rt<<=tt&7;var at=tt/8|0;it[at]|=rt,it[at+1]|=rt>>>8,it[at+2]|=rt>>>16},hTree=function(it,tt){for(var rt=[],at=0;at<it.length;++at)it[at]&&rt.push({s:at,f:it[at]});var st=rt.length,ot=rt.slice();if(!st)return[et,0];if(st==1){var lt=new u8(rt[0].s+1);return lt[rt[0].s]=1,[lt,1]}rt.sort(function(Dt,Wt){return Dt.f-Wt.f}),rt.push({s:-1,f:25001});var ut=rt[0],ht=rt[1],mt=0,bt=1,vt=2;for(rt[0]={s:-1,f:ut.f+ht.f,l:ut,r:ht};bt!=st-1;)ut=rt[rt[mt].f<rt[vt].f?mt++:vt++],ht=rt[mt!=bt&&rt[mt].f<rt[vt].f?mt++:vt++],rt[bt++]={s:-1,f:ut.f+ht.f,l:ut,r:ht};for(var At=ot[0].s,at=1;at<st;++at)ot[at].s>At&&(At=ot[at].s);var xt=new u16(At+1),Et=ln(rt[bt-1],xt,0);if(Et>tt){var at=0,Tt=0,wt=Et-tt,Ct=1<<wt;for(ot.sort(function(Wt,qt){return xt[qt.s]-xt[Wt.s]||Wt.f-qt.f});at<st;++at){var It=ot[at].s;if(xt[It]>tt)Tt+=Ct-(1<<Et-xt[It]),xt[It]=tt;else break}for(Tt>>>=wt;Tt>0;){var St=ot[at].s;xt[St]<tt?Tt-=1<<tt-xt[St]++-1:++at}for(;at>=0&&Tt;--at){var Rt=ot[at].s;xt[Rt]==tt&&(--xt[Rt],++Tt)}Et=tt}return[new u8(xt),Et]},ln=function(it,tt,rt){return it.s==-1?Math.max(ln(it.l,tt,rt+1),ln(it.r,tt,rt+1)):tt[it.s]=rt},lc=function(it){for(var tt=it.length;tt&&!it[--tt];);for(var rt=new u16(++tt),at=0,st=it[0],ot=1,lt=function(ht){rt[at++]=ht},ut=1;ut<=tt;++ut)if(it[ut]==st&&ut!=tt)++ot;else{if(!st&&ot>2){for(;ot>138;ot-=138)lt(32754);ot>2&&(lt(ot>10?ot-11<<5|28690:ot-3<<5|12305),ot=0)}else if(ot>3){for(lt(st),--ot;ot>6;ot-=6)lt(8304);ot>2&&(lt(ot-3<<5|8208),ot=0)}for(;ot--;)lt(st);ot=1,st=it[ut]}return[rt.subarray(0,at),tt]},clen=function(it,tt){for(var rt=0,at=0;at<tt.length;++at)rt+=it[at]*tt[at];return rt},wfblk=function(it,tt,rt){var at=rt.length,st=shft(tt+2);it[st]=at&255,it[st+1]=at>>>8,it[st+2]=it[st]^255,it[st+3]=it[st+1]^255;for(var ot=0;ot<at;++ot)it[st+ot+4]=rt[ot];return(st+4+at)*8},wblk=function(it,tt,rt,at,st,ot,lt,ut,ht,mt,bt){wbits(tt,bt++,rt),++st[256];for(var vt=hTree(st,15),At=vt[0],xt=vt[1],Et=hTree(ot,15),Tt=Et[0],wt=Et[1],Ct=lc(At),It=Ct[0],St=Ct[1],Rt=lc(Tt),Dt=Rt[0],Wt=Rt[1],qt=new u16(19),Vt=0;Vt<It.length;++Vt)qt[It[Vt]&31]++;for(var Vt=0;Vt<Dt.length;++Vt)qt[Dt[Vt]&31]++;for(var Yt=hTree(qt,7),jt=Yt[0],kt=Yt[1],zt=19;zt>4&&!jt[clim[zt-1]];--zt);var Nt=mt+5<<3,Mt=clen(st,flt)+clen(ot,fdt)+lt,Lt=clen(st,At)+clen(ot,Tt)+lt+14+3*zt+clen(qt,jt)+(2*qt[16]+3*qt[17]+7*qt[18]);if(Nt<=Mt&&Nt<=Lt)return wfblk(tt,bt,it.subarray(ht,ht+mt));var Ht,Qt,Ut,Bt;if(wbits(tt,bt,1+(Lt<Mt)),bt+=2,Lt<Mt){Ht=hMap(At,xt,0),Qt=At,Ut=hMap(Tt,wt,0),Bt=Tt;var Kt=hMap(jt,kt,0);wbits(tt,bt,St-257),wbits(tt,bt+5,Wt-1),wbits(tt,bt+10,zt-4),bt+=14;for(var Vt=0;Vt<zt;++Vt)wbits(tt,bt+3*Vt,jt[clim[Vt]]);bt+=3*zt;for(var Gt=[It,Dt],Pt=0;Pt<2;++Pt)for(var Zt=Gt[Pt],Vt=0;Vt<Zt.length;++Vt){var an=Zt[Vt]&31;wbits(tt,bt,Kt[an]),bt+=jt[an],an>15&&(wbits(tt,bt,Zt[Vt]>>>5&127),bt+=Zt[Vt]>>>12)}}else Ht=flm,Qt=flt,Ut=fdm,Bt=fdt;for(var Vt=0;Vt<ut;++Vt)if(at[Vt]>255){var an=at[Vt]>>>18&31;wbits16(tt,bt,Ht[an+257]),bt+=Qt[an+257],an>7&&(wbits(tt,bt,at[Vt]>>>23&31),bt+=fleb[an]);var Jt=at[Vt]&31;wbits16(tt,bt,Ut[Jt]),bt+=Bt[Jt],Jt>3&&(wbits16(tt,bt,at[Vt]>>>5&8191),bt+=fdeb[Jt])}else wbits16(tt,bt,Ht[at[Vt]]),bt+=Qt[at[Vt]];return wbits16(tt,bt,Ht[256]),bt+Qt[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dflt=function(it,tt,rt,at,st,ot){var lt=it.length,ut=new u8(at+lt+5*(1+Math.ceil(lt/7e3))+st),ht=ut.subarray(at,ut.length-st),mt=0;if(!tt||lt<8)for(var bt=0;bt<=lt;bt+=65535){var vt=bt+65535;vt<lt?mt=wfblk(ht,mt,it.subarray(bt,vt)):(ht[bt]=ot,mt=wfblk(ht,mt,it.subarray(bt,lt)))}else{for(var At=deo[tt-1],xt=At>>>13,Et=At&8191,Tt=(1<<rt)-1,wt=new u16(32768),Ct=new u16(Tt+1),It=Math.ceil(rt/3),St=2*It,Rt=function(wn){return(it[wn]^it[wn+1]<<It^it[wn+2]<<St)&Tt},Dt=new u32(25e3),Wt=new u16(288),qt=new u16(32),Vt=0,Yt=0,bt=0,jt=0,kt=0,zt=0;bt<lt;++bt){var Nt=Rt(bt),Mt=bt&32767,Lt=Ct[Nt];if(wt[Mt]=Lt,Ct[Nt]=Mt,kt<=bt){var Ht=lt-bt;if((Vt>7e3||jt>24576)&&Ht>423){mt=wblk(it,ht,0,Dt,Wt,qt,Yt,jt,zt,bt-zt,mt),jt=Vt=Yt=0,zt=bt;for(var Qt=0;Qt<286;++Qt)Wt[Qt]=0;for(var Qt=0;Qt<30;++Qt)qt[Qt]=0}var Ut=2,Bt=0,Kt=Et,Gt=Mt-Lt&32767;if(Ht>2&&Nt==Rt(bt-Gt))for(var Pt=Math.min(xt,Ht)-1,Zt=Math.min(32767,bt),an=Math.min(258,Ht);Gt<=Zt&&--Kt&&Mt!=Lt;){if(it[bt+Ut]==it[bt+Ut-Gt]){for(var Jt=0;Jt<an&&it[bt+Jt]==it[bt+Jt-Gt];++Jt);if(Jt>Ut){if(Ut=Jt,Bt=Gt,Jt>Pt)break;for(var rn=Math.min(Gt,Jt-2),fn=0,Qt=0;Qt<rn;++Qt){var pn=bt-Gt+Qt+32768&32767,vn=wt[pn],En=pn-vn+32768&32767;En>fn&&(fn=En,Lt=pn)}}}Mt=Lt,Lt=wt[Mt],Gt+=Mt-Lt+32768&32767}if(Bt){Dt[jt++]=268435456|revfl[Ut]<<18|revfd[Bt];var dn=revfl[Ut]&31,cn=revfd[Bt]&31;Yt+=fleb[dn]+fdeb[cn],++Wt[257+dn],++qt[cn],kt=bt+Ut,++Vt}else Dt[jt++]=it[bt],++Wt[it[bt]]}}mt=wblk(it,ht,ot,Dt,Wt,qt,Yt,jt,zt,bt-zt,mt),!ot&&mt&7&&(mt=wfblk(ht,mt+1,et))}return slc(ut,0,at+shft(mt)+st)},crct=function(){for(var it=new u32(256),tt=0;tt<256;++tt){for(var rt=tt,at=9;--at;)rt=(rt&1&&3988292384)^rt>>>1;it[tt]=rt}return it}(),crc=function(){var it=-1;return{p:function(tt){for(var rt=it,at=0;at<tt.length;++at)rt=crct[rt&255^tt[at]]^rt>>>8;it=rt},d:function(){return~it}}},dopt=function(it,tt,rt,at,st){return dflt(it,tt.level==null?6:tt.level,tt.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(it.length)))*1.5):12+tt.mem,rt,at,!st)},mrg=function(it,tt){var rt={};for(var at in it)rt[at]=it[at];for(var at in tt)rt[at]=tt[at];return rt},wbytes=function(it,tt,rt){for(;rt;++tt)it[tt]=rt,rt>>>=8};function deflateSync(it,tt){return dopt(it,tt||{},0,0)}var fltn=function(it,tt,rt,at){for(var st in it){var ot=it[st],lt=tt+st;ot instanceof u8?rt[lt]=[ot,at]:Array.isArray(ot)?rt[lt]=[ot[0],mrg(at,ot[1])]:fltn(ot,lt+"/",rt,at)}},te=typeof TextEncoder<"u"&&new TextEncoder,td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(it){}function strToU8(it,tt){if(tt){for(var rt=new u8(it.length),at=0;at<it.length;++at)rt[at]=it.charCodeAt(at);return rt}if(te)return te.encode(it);for(var st=it.length,ot=new u8(it.length+(it.length>>1)),lt=0,ut=function(bt){ot[lt++]=bt},at=0;at<st;++at){if(lt+5>ot.length){var ht=new u8(lt+8+(st-at<<1));ht.set(ot),ot=ht}var mt=it.charCodeAt(at);mt<128||tt?ut(mt):mt<2048?(ut(192|mt>>6),ut(128|mt&63)):mt>55295&&mt<57344?(mt=65536+(mt&1023<<10)|it.charCodeAt(++at)&1023,ut(240|mt>>18),ut(128|mt>>12&63),ut(128|mt>>6&63),ut(128|mt&63)):(ut(224|mt>>12),ut(128|mt>>6&63),ut(128|mt&63))}return slc(ot,0,lt)}var exfl=function(it){var tt=0;if(it)for(var rt in it){var at=it[rt].length;if(at>65535)throw"extra field too long";tt+=at+4}return tt},wzh=function(it,tt,rt,at,st,ot,lt,ut){var ht=at.length,mt=rt.extra,bt=ut&&ut.length,vt=exfl(mt);wbytes(it,tt,lt!=null?33639248:67324752),tt+=4,lt!=null&&(it[tt++]=20,it[tt++]=rt.os),it[tt]=20,tt+=2,it[tt++]=rt.flag<<1|(ot==null&&8),it[tt++]=st&&8,it[tt++]=rt.compression&255,it[tt++]=rt.compression>>8;var At=new Date(rt.mtime==null?Date.now():rt.mtime),xt=At.getFullYear()-1980;if(xt<0||xt>119)throw"date not in range 1980-2099";if(wbytes(it,tt,xt<<25|At.getMonth()+1<<21|At.getDate()<<16|At.getHours()<<11|At.getMinutes()<<5|At.getSeconds()>>>1),tt+=4,ot!=null&&(wbytes(it,tt,rt.crc),wbytes(it,tt+4,ot),wbytes(it,tt+8,rt.size)),wbytes(it,tt+12,ht),wbytes(it,tt+14,vt),tt+=16,lt!=null&&(wbytes(it,tt,bt),wbytes(it,tt+6,rt.attrs),wbytes(it,tt+10,lt),tt+=14),it.set(at,tt),tt+=ht,vt)for(var Et in mt){var Tt=mt[Et],wt=Tt.length;wbytes(it,tt,+Et),wbytes(it,tt+2,wt),it.set(Tt,tt+4),tt+=4+wt}return bt&&(it.set(ut,tt),tt+=bt),tt},wzf=function(it,tt,rt,at,st){wbytes(it,tt,101010256),wbytes(it,tt+8,rt),wbytes(it,tt+10,rt),wbytes(it,tt+12,at),wbytes(it,tt+16,st)};function zipSync(it,tt){tt||(tt={});var rt={},at=[];fltn(it,"",rt,tt);var st=0,ot=0;for(var lt in rt){var ut=rt[lt],ht=ut[0],mt=ut[1],bt=mt.level==0?0:8,vt=strToU8(lt),At=vt.length,xt=mt.comment,Et=xt&&strToU8(xt),Tt=Et&&Et.length,wt=exfl(mt.extra);if(At>65535)throw"filename too long";var Ct=bt?deflateSync(ht,mt):ht,It=Ct.length,St=crc();St.p(ht),at.push(mrg(mt,{size:ht.length,crc:St.d(),c:Ct,f:vt,m:Et,u:At!=lt.length||Et&&xt.length!=Tt,o:st,compression:bt})),st+=30+At+wt+It,ot+=76+2*(At+wt)+(Tt||0)+It}for(var Rt=new u8(ot+22),Dt=st,Wt=ot-st,qt=0;qt<at.length;++qt){var vt=at[qt];wzh(Rt,vt.o,vt,vt.f,vt.u,vt.c.length);var Vt=30+vt.f.length+exfl(vt.extra);Rt.set(vt.c,vt.o+Vt),wzh(Rt,st,vt,vt.f,vt.u,vt.c.length,vt.o,vt.m),st+=16+Vt+(vt.m?vt.m.length:0)}return wzf(Rt,st,at.length,Wt,Dt),Rt}class USDZExporter{async parse(tt){const rt={},at="model.usda";rt[at]=null;let st=buildHeader();const ot={},lt={};tt.traverseVisible(ht=>{if(ht.isMesh){const mt=ht.geometry,bt=ht.material;if(bt.isMeshStandardMaterial){const vt="geometries/Geometry_"+mt.id+".usd";if(!(vt in rt)){const At=buildMeshObject(mt);rt[vt]=buildUSDFileAsString(At)}bt.uuid in ot||(ot[bt.uuid]=bt),st+=buildXform(ht,mt,bt)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",ht)}else ht.isCamera&&(st+=buildCamera(ht))}),st+=buildMaterials(ot,lt),rt[at]=strToU8(st),st=null;for(const ht in lt){const mt=lt[ht],bt=ht.split("_")[1],vt=mt.format===1023,At=imageToCanvas(mt.image,bt),xt=await new Promise(Et=>At.toBlob(Et,vt?"image/png":"image/jpeg",1));rt[`textures/Texture_${ht}.${vt?"png":"jpg"}`]=new Uint8Array(await xt.arrayBuffer())}let ut=0;for(const ht in rt){const mt=rt[ht],bt=34+ht.length;ut+=bt;const vt=ut&63;if(vt!==4){const At=64-vt,xt=new Uint8Array(At);rt[ht]=[mt,{extra:{12345:xt}}]}ut=mt.length}return zipSync(rt,{level:0})}}function imageToCanvas(it,tt){if(typeof HTMLImageElement<"u"&&it instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&it instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&it instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&it instanceof ImageBitmap){const rt=1024/Math.max(it.width,it.height),at=document.createElement("canvas");at.width=it.width*Math.min(1,rt),at.height=it.height*Math.min(1,rt);const st=at.getContext("2d");if(st.drawImage(it,0,0,at.width,at.height),tt!==void 0){const ot=parseInt(tt,16),lt=(ot>>16&255)/255,ut=(ot>>8&255)/255,ht=(ot&255)/255,mt=st.getImageData(0,0,at.width,at.height),bt=mt.data;for(let vt=0;vt<bt.length;vt+=4)bt[vt+0]=bt[vt+0]*lt,bt[vt+1]=bt[vt+1]*ut,bt[vt+2]=bt[vt+2]*ht;st.putImageData(mt,0,0)}return at}}const PRECISION=7;function buildHeader(){return`#usda 1.0
(
    customLayerData = {
        string creator = "Three.js USDZExporter"
    }
    metersPerUnit = 1
    upAxis = "Y"
)

`}function buildUSDFileAsString(it){let tt=buildHeader();return tt+=it,strToU8(tt)}function buildXform(it,tt,rt){const at="Object_"+it.id,st=buildMatrix(it.matrixWorld);return it.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",it),`def Xform "${at}" (
    prepend references = @./geometries/Geometry_${tt.id}.usd@</Geometry>
)
{
    matrix4d xformOp:transform = ${st}
    uniform token[] xformOpOrder = ["xformOp:transform"]

    rel material:binding = </Materials/Material_${rt.id}>
}

`}function buildMatrix(it){const tt=it.elements;return`( ${buildMatrixRow(tt,0)}, ${buildMatrixRow(tt,4)}, ${buildMatrixRow(tt,8)}, ${buildMatrixRow(tt,12)} )`}function buildMatrixRow(it,tt){return`(${it[tt+0]}, ${it[tt+1]}, ${it[tt+2]}, ${it[tt+3]})`}function buildMeshObject(it){return`
def "Geometry"
{
  ${buildMesh(it)}
}
`}function buildMesh(it){const tt="Geometry",rt=it.attributes,at=rt.position.count;return`
    def Mesh "${tt}"
    {
        int[] faceVertexCounts = [${buildMeshVertexCount(it)}]
        int[] faceVertexIndices = [${buildMeshVertexIndices(it)}]
        normal3f[] normals = [${buildVector3Array(rt.normal,at)}] (
            interpolation = "vertex"
        )
        point3f[] points = [${buildVector3Array(rt.position,at)}]
        float2[] primvars:st = [${buildVector2Array(rt.uv,at)}] (
            interpolation = "vertex"
        )
        uniform token subdivisionScheme = "none"
    }
`}function buildMeshVertexCount(it){const tt=it.index!==null?it.index.count:it.attributes.position.count;return Array(tt/3).fill(3).join(", ")}function buildMeshVertexIndices(it){const tt=it.index,rt=[];if(tt!==null)for(let at=0;at<tt.count;at++)rt.push(tt.getX(at));else{const at=it.attributes.position.count;for(let st=0;st<at;st++)rt.push(st)}return rt.join(", ")}function buildVector3Array(it,tt){if(it===void 0)return console.warn("USDZExporter: Normals missing."),Array(tt).fill("(0, 0, 0)").join(", ");const rt=[];for(let at=0;at<it.count;at++){const st=it.getX(at),ot=it.getY(at),lt=it.getZ(at);rt.push(`(${st.toPrecision(PRECISION)}, ${ot.toPrecision(PRECISION)}, ${lt.toPrecision(PRECISION)})`)}return rt.join(", ")}function buildVector2Array(it,tt){if(it===void 0)return console.warn("USDZExporter: UVs missing."),Array(tt).fill("(0, 0)").join(", ");const rt=[];for(let at=0;at<it.count;at++){const st=it.getX(at),ot=it.getY(at);rt.push(`(${st.toPrecision(PRECISION)}, ${1-ot.toPrecision(PRECISION)})`)}return rt.join(", ")}function buildMaterials(it,tt){const rt=[];for(const at in it){const st=it[at];rt.push(buildMaterial(st,tt))}return`def "Materials"
{
${rt.join("")}
}

`}function buildMaterial(it,tt){const rt="            ",at=[],st=[];function ot(lt,ut,ht){const mt=lt.id+(ht?"_"+ht.getHexString():""),bt=lt.format===1023;return tt[mt]=lt,`
        def Shader "Transform2d_${ut}" (
            sdrMetadata = {
                string role = "math"
            }
        )
        {
            uniform token info:id = "UsdTransform2d"
            float2 inputs:in.connect = </Materials/Material_${it.id}/uvReader_st.outputs:result>
            float2 inputs:scale = ${buildVector2(lt.repeat)}
            float2 inputs:translation = ${buildVector2(lt.offset)}
            float2 outputs:result
        }

        def Shader "Texture_${lt.id}_${ut}"
        {
            uniform token info:id = "UsdUVTexture"
            asset inputs:file = @textures/Texture_${mt}.${bt?"png":"jpg"}@
            float2 inputs:st.connect = </Materials/Material_${it.id}/Transform2d_${ut}.outputs:result>
            token inputs:wrapS = "repeat"
            token inputs:wrapT = "repeat"
            float outputs:r
            float outputs:g
            float outputs:b
            float3 outputs:rgb
            ${it.transparent||it.alphaTest>0?"float outputs:a":""}
        }`}return it.side===DoubleSide&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",it),it.map!==null?(at.push(`${rt}color3f inputs:diffuseColor.connect = </Materials/Material_${it.id}/Texture_${it.map.id}_diffuse.outputs:rgb>`),it.transparent?at.push(`${rt}float inputs:opacity.connect = </Materials/Material_${it.id}/Texture_${it.map.id}_diffuse.outputs:a>`):it.alphaTest>0&&(at.push(`${rt}float inputs:opacity.connect = </Materials/Material_${it.id}/Texture_${it.map.id}_diffuse.outputs:a>`),at.push(`${rt}float inputs:opacityThreshold = ${it.alphaTest}`)),st.push(ot(it.map,"diffuse",it.color))):at.push(`${rt}color3f inputs:diffuseColor = ${buildColor(it.color)}`),it.emissiveMap!==null?(at.push(`${rt}color3f inputs:emissiveColor.connect = </Materials/Material_${it.id}/Texture_${it.emissiveMap.id}_emissive.outputs:rgb>`),st.push(ot(it.emissiveMap,"emissive"))):it.emissive.getHex()>0&&at.push(`${rt}color3f inputs:emissiveColor = ${buildColor(it.emissive)}`),it.normalMap!==null&&(at.push(`${rt}normal3f inputs:normal.connect = </Materials/Material_${it.id}/Texture_${it.normalMap.id}_normal.outputs:rgb>`),st.push(ot(it.normalMap,"normal"))),it.aoMap!==null&&(at.push(`${rt}float inputs:occlusion.connect = </Materials/Material_${it.id}/Texture_${it.aoMap.id}_occlusion.outputs:r>`),st.push(ot(it.aoMap,"occlusion"))),it.roughnessMap!==null&&it.roughness===1?(at.push(`${rt}float inputs:roughness.connect = </Materials/Material_${it.id}/Texture_${it.roughnessMap.id}_roughness.outputs:g>`),st.push(ot(it.roughnessMap,"roughness"))):at.push(`${rt}float inputs:roughness = ${it.roughness}`),it.metalnessMap!==null&&it.metalness===1?(at.push(`${rt}float inputs:metallic.connect = </Materials/Material_${it.id}/Texture_${it.metalnessMap.id}_metallic.outputs:b>`),st.push(ot(it.metalnessMap,"metallic"))):at.push(`${rt}float inputs:metallic = ${it.metalness}`),it.alphaMap!==null?(at.push(`${rt}float inputs:opacity.connect = </Materials/Material_${it.id}/Texture_${it.alphaMap.id}_opacity.outputs:r>`),at.push(`${rt}float inputs:opacityThreshold = 0.0001`),st.push(ot(it.alphaMap,"opacity"))):at.push(`${rt}float inputs:opacity = ${it.opacity}`),it.isMeshPhysicalMaterial&&(at.push(`${rt}float inputs:clearcoat = ${it.clearcoat}`),at.push(`${rt}float inputs:clearcoatRoughness = ${it.clearcoatRoughness}`),at.push(`${rt}float inputs:ior = ${it.ior}`)),`
    def Material "Material_${it.id}"
    {
        def Shader "PreviewSurface"
        {
            uniform token info:id = "UsdPreviewSurface"
${at.join(`
`)}
            int inputs:useSpecularWorkflow = 0
            token outputs:surface
        }

        token outputs:surface.connect = </Materials/Material_${it.id}/PreviewSurface.outputs:surface>
        token inputs:frame:stPrimvarName = "st"

        def Shader "uvReader_st"
        {
            uniform token info:id = "UsdPrimvarReader_float2"
            token inputs:varname.connect = </Materials/Material_${it.id}.inputs:frame:stPrimvarName>
            float2 inputs:fallback = (0.0, 0.0)
            float2 outputs:result
        }

${st.join(`
`)}

    }
`}function buildColor(it){return`(${it.r}, ${it.g}, ${it.b})`}function buildVector2(it){return`(${it.x}, ${it.y})`}function buildCamera(it){const tt=it.name?it.name:"Camera_"+it.id,rt=buildMatrix(it.matrixWorld);return it.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",it),it.isOrthographicCamera?`def Camera "${tt}"
		{
			matrix4d xformOp:transform = ${rt}
			uniform token[] xformOpOrder = ["xformOp:transform"]
	
			float2 clippingRange = (${it.near}, ${it.far})
			float horizontalAperture = ${(Math.abs(it.left)+Math.abs(it.right))*10}
			float verticalAperture = ${(Math.abs(it.top)+Math.abs(it.bottom))*10}
			token projection = "orthographic"
		}
	
	`:`def Camera "${tt}"
		{
			matrix4d xformOp:transform = ${rt}
			uniform token[] xformOpOrder = ["xformOp:transform"]
	
			float2 clippingRange = (${it.near}, ${it.far})
			float focalLength = ${it.getFocalLength()}
			float focusDistance = ${it.focus}
			float horizontalAperture = ${it.getFilmWidth()}
			token projection = "perspective"
			float verticalAperture = ${it.getFilmHeight()}
		}
	
	`}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const enumerationDeserializer=it=>tt=>{try{const rt=parseExpressions(tt),at=(rt.length?rt[0].terms:[]).filter(ot=>ot&&ot.type==="ident").map(ot=>ot.value).filter(ot=>it.indexOf(ot)>-1),st=new Set;for(const ot of at)st.add(ot);return st}catch{}return new Set};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var __decorate$3=globalThis&&globalThis.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot};let isWebXRBlocked=!1,isSceneViewerBlocked=!1;const noArViewerSigil="#model-viewer-no-ar-fallback",deserializeARModes=enumerationDeserializer(["quick-look","scene-viewer","webxr","none"]),DEFAULT_AR_MODES="webxr scene-viewer quick-look",ARMode={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},$arButtonContainer=Symbol("arButtonContainer"),$enterARWithWebXR=Symbol("enterARWithWebXR"),$openSceneViewer=Symbol("openSceneViewer"),$openIOSARQuickLook=Symbol("openIOSARQuickLook"),$canActivateAR=Symbol("canActivateAR"),$arMode=Symbol("arMode"),$arModes=Symbol("arModes"),$arAnchor=Symbol("arAnchor"),$preload=Symbol("preload"),$onARButtonContainerClick=Symbol("onARButtonContainerClick"),$onARStatus=Symbol("onARStatus"),$onARTracking=Symbol("onARTracking"),$onARTap=Symbol("onARTap"),$selectARMode=Symbol("selectARMode"),$triggerLoad=Symbol("triggerLoad"),ARMixin=it=>{var tt,rt,at,st,ot,lt,ut,ht,mt,bt;class vt extends it{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes=DEFAULT_AR_MODES,this.iosSrc=null,this.xrEnvironment=!1,this[tt]=!1,this[rt]=this.shadowRoot.querySelector(".ar-button"),this[at]=document.createElement("a"),this[st]=new Set,this[ot]=ARMode.NONE,this[lt]=!1,this[ut]=xt=>{xt.preventDefault(),this.activateAR()},this[ht]=({status:xt})=>{(xt===ARStatus.NOT_PRESENTING||this[$renderer].arRenderer.presentedScene===this[$scene])&&(this.setAttribute("ar-status",xt),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:xt}})),xt===ARStatus.NOT_PRESENTING?this.removeAttribute("ar-tracking"):xt===ARStatus.SESSION_STARTED&&this.setAttribute("ar-tracking",ARTracking.TRACKING))},this[mt]=({status:xt})=>{this.setAttribute("ar-tracking",xt),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:xt}}))},this[bt]=xt=>{xt.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[$arMode]!==ARMode.NONE}connectedCallback(){super.connectedCallback(),this[$renderer].arRenderer.addEventListener("status",this[$onARStatus]),this.setAttribute("ar-status",ARStatus.NOT_PRESENTING),this[$renderer].arRenderer.addEventListener("tracking",this[$onARTracking]),this[$arAnchor].addEventListener("message",this[$onARTap])}disconnectedCallback(){super.disconnectedCallback(),this[$renderer].arRenderer.removeEventListener("status",this[$onARStatus]),this[$renderer].arRenderer.removeEventListener("tracking",this[$onARTracking]),this[$arAnchor].removeEventListener("message",this[$onARTap])}update(xt){super.update(xt),xt.has("arScale")&&(this[$scene].canScale=this.arScale!=="fixed"),xt.has("arPlacement")&&(this[$scene].updateShadow(),this[$needsRender]()),xt.has("arModes")&&(this[$arModes]=deserializeARModes(this.arModes)),(xt.has("ar")||xt.has("arModes")||xt.has("src")||xt.has("iosSrc"))&&this[$selectARMode]()}async activateAR(){switch(this[$arMode]){case ARMode.QUICK_LOOK:this[$openIOSARQuickLook]();break;case ARMode.WEBXR:await this[$enterARWithWebXR]();break;case ARMode.SCENE_VIEWER:this[$openSceneViewer]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(tt=$canActivateAR,rt=$arButtonContainer,at=$arAnchor,st=$arModes,ot=$arMode,lt=$preload,ut=$onARButtonContainerClick,ht=$onARStatus,mt=$onARTracking,bt=$onARTap,$selectARMode)](){let xt=ARMode.NONE;if(this.ar){if(this.src!=null)for(const Et of this[$arModes]){if(Et==="webxr"&&IS_WEBXR_AR_CANDIDATE&&!isWebXRBlocked&&await this[$renderer].arRenderer.supportsPresentation()){xt=ARMode.WEBXR;break}if(Et==="scene-viewer"&&IS_SCENEVIEWER_CANDIDATE&&!isSceneViewerBlocked){xt=ARMode.SCENE_VIEWER;break}if(Et==="quick-look"&&IS_AR_QUICKLOOK_CANDIDATE){xt=ARMode.QUICK_LOOK;break}}xt===ARMode.NONE&&this.iosSrc!=null&&IS_AR_QUICKLOOK_CANDIDATE&&(xt=ARMode.QUICK_LOOK)}if(xt!==ARMode.NONE)this[$arButtonContainer].classList.add("enabled"),this[$arButtonContainer].addEventListener("click",this[$onARButtonContainerClick]);else if(this[$arButtonContainer].classList.contains("enabled")){this[$arButtonContainer].removeEventListener("click",this[$onARButtonContainerClick]),this[$arButtonContainer].classList.remove("enabled");const Et=ARStatus.FAILED;this.setAttribute("ar-status",Et),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:Et}}))}this[$arMode]=xt}async[$enterARWithWebXR](){console.log("Attempting to present in AR with WebXR..."),await this[$triggerLoad]();try{this[$arButtonContainer].removeEventListener("click",this[$onARButtonContainerClick]);const{arRenderer:xt}=this[$renderer];xt.placeOnWall=this.arPlacement==="wall",await xt.present(this[$scene],this.xrEnvironment)}catch(xt){console.warn("Error while trying to present in AR with WebXR"),console.error(xt),await this[$renderer].arRenderer.stopPresenting(),isWebXRBlocked=!0,console.warn("Falling back to next ar-mode"),await this[$selectARMode](),this.activateAR()}finally{this[$selectARMode]()}}async[$triggerLoad](){this.loaded||(this[$preload]=!0,this[$updateSource](),await waitForEvent(this,"load"),this[$preload]=!1)}[$shouldAttemptPreload](){return super[$shouldAttemptPreload]()||this[$preload]}[$openSceneViewer](){const xt=self.location.toString(),Et=new URL(xt),Tt=new URL(this.src,xt),wt=new URLSearchParams(Tt.search);if(Et.hash=noArViewerSigil,wt.set("mode","ar_preferred"),wt.has("disable_occlusion")||wt.set("disable_occlusion","true"),this.arScale==="fixed"&&wt.set("resizable","false"),this.arPlacement==="wall"&&wt.set("enable_vertical_placement","true"),wt.has("sound")){const St=new URL(wt.get("sound"),xt);wt.set("sound",St.toString())}if(wt.has("link")){const St=new URL(wt.get("link"),xt);wt.set("link",St.toString())}const Ct=`intent://arvr.google.com/scene-viewer/1.0?${wt.toString()+"&file="+encodeURIComponent(Tt.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(Et.toString())};end;`,It=()=>{self.location.hash===noArViewerSigil&&(isSceneViewerBlocked=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[$selectARMode]())};self.addEventListener("hashchange",It,{once:!0}),this[$arAnchor].setAttribute("href",Ct),console.log("Attempting to present in AR with Scene Viewer..."),this[$arAnchor].click()}async[$openIOSARQuickLook](){const xt=!this.iosSrc;this[$arButtonContainer].classList.remove("enabled");const Et=xt?await this.prepareUSDZ():this.iosSrc,Tt=new URL(Et,self.location.toString());if(xt){const It=self.location.toString(),St=new URL(It),Rt=new URL(this.src,St);Rt.hash&&(Tt.hash=Rt.hash)}this.arScale==="fixed"&&(Tt.hash&&(Tt.hash+="&"),Tt.hash+="allowsContentScaling=0");const wt=this[$arAnchor];wt.setAttribute("rel","ar");const Ct=document.createElement("img");wt.appendChild(Ct),wt.setAttribute("href",Tt.toString()),xt&&wt.setAttribute("download","model.usdz"),wt.style.display="none",wt.isConnected||this.shadowRoot.appendChild(wt),console.log("Attempting to present in AR with Quick Look..."),wt.click(),wt.removeChild(Ct),xt&&URL.revokeObjectURL(Et),this[$arButtonContainer].classList.add("enabled")}async prepareUSDZ(){const xt=this[$progressTracker].beginActivity();await this[$triggerLoad]();const{model:Et,shadow:Tt}=this[$scene];if(Et==null)return"";let wt=!1;Tt!=null&&(wt=Tt.visible,Tt.visible=!1),xt(.2);const It=await new USDZExporter().parse(Et),St=new Blob([It],{type:"model/vnd.usdz+zip"}),Rt=URL.createObjectURL(St);return xt(1),Tt!=null&&(Tt.visible=wt),Rt}}return __decorate$3([e$3({type:Boolean,attribute:"ar"})],vt.prototype,"ar",void 0),__decorate$3([e$3({type:String,attribute:"ar-scale"})],vt.prototype,"arScale",void 0),__decorate$3([e$3({type:String,attribute:"ar-placement"})],vt.prototype,"arPlacement",void 0),__decorate$3([e$3({type:String,attribute:"ar-modes"})],vt.prototype,"arModes",void 0),__decorate$3([e$3({type:String,attribute:"ios-src"})],vt.prototype,"iosSrc",void 0),__decorate$3([e$3({type:Boolean,attribute:"xr-environment"})],vt.prototype,"xrEnvironment",void 0),vt};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _a$1,_b$1,_c$1;const $evaluate=Symbol("evaluate"),$lastValue=Symbol("lastValue");class Evaluator{constructor(){this[_a$1]=null}static evaluatableFor(tt,rt=ZERO){if(tt instanceof Evaluator)return tt;if(tt.type==="number")return tt.unit==="%"?new PercentageEvaluator(tt,rt):tt;switch(tt.name.value){case"calc":return new CalcEvaluator(tt,rt);case"env":return new EnvEvaluator(tt)}return ZERO}static evaluate(tt){return tt instanceof Evaluator?tt.evaluate():tt}static isConstant(tt){return tt instanceof Evaluator?tt.isConstant:!0}static applyIntrinsics(tt,rt){const{basis:at,keywords:st}=rt,{auto:ot}=st;return at.map((lt,ut)=>{const ht=ot[ut]==null?lt:ot[ut];let mt=tt[ut]?tt[ut]:ht;if(mt.type==="ident"){const bt=mt.value;bt in st&&(mt=st[bt][ut])}return(mt==null||mt.type==="ident")&&(mt=ht),mt.unit==="%"?numberNode(mt.number/100*lt.number,lt.unit):(mt=normalizeUnit(mt,lt),mt.unit!==lt.unit?lt:mt)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[$lastValue]==null)&&(this[$lastValue]=this[$evaluate]()),this[$lastValue]}}_a$1=$lastValue;const $percentage=Symbol("percentage"),$basis=Symbol("basis");class PercentageEvaluator extends Evaluator{constructor(tt,rt){super(),this[$percentage]=tt,this[$basis]=rt}get isConstant(){return!0}[$evaluate](){return numberNode(this[$percentage].number/100*this[$basis].number,this[$basis].unit)}}const $identNode=Symbol("identNode");class EnvEvaluator extends Evaluator{constructor(tt){super(),this[_b$1]=null;const rt=tt.arguments.length?tt.arguments[0].terms[0]:null;rt!=null&&rt.type==="ident"&&(this[$identNode]=rt)}get isConstant(){return!1}[(_b$1=$identNode,$evaluate)](){if(this[$identNode]!=null)switch(this[$identNode].value){case"window-scroll-y":const tt=window.pageYOffset,rt=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:tt/(rt-window.innerHeight)||0,unit:null}}return ZERO}}const IS_MULTIPLICATION_RE=/[\*\/]/,$evaluator=Symbol("evaluator");class CalcEvaluator extends Evaluator{constructor(tt,rt=ZERO){if(super(),this[_c$1]=null,tt.arguments.length!==1)return;const at=tt.arguments[0].terms.slice(),st=[];for(;at.length;){const ot=at.shift();if(st.length>0){const lt=st[st.length-1];if(lt.type==="operator"&&IS_MULTIPLICATION_RE.test(lt.value)){const ut=st.pop(),ht=st.pop();if(ht==null)return;st.push(new OperatorEvaluator(ut,Evaluator.evaluatableFor(ht,rt),Evaluator.evaluatableFor(ot,rt)));continue}}st.push(ot.type==="operator"?ot:Evaluator.evaluatableFor(ot,rt))}for(;st.length>2;){const[ot,lt,ut]=st.splice(0,3);if(lt.type!=="operator")return;st.unshift(new OperatorEvaluator(lt,Evaluator.evaluatableFor(ot,rt),Evaluator.evaluatableFor(ut,rt)))}st.length===1&&(this[$evaluator]=st[0])}get isConstant(){return this[$evaluator]==null||Evaluator.isConstant(this[$evaluator])}[(_c$1=$evaluator,$evaluate)](){return this[$evaluator]!=null?Evaluator.evaluate(this[$evaluator]):ZERO}}const $operator=Symbol("operator"),$left=Symbol("left"),$right=Symbol("right");class OperatorEvaluator extends Evaluator{constructor(tt,rt,at){super(),this[$operator]=tt,this[$left]=rt,this[$right]=at}get isConstant(){return Evaluator.isConstant(this[$left])&&Evaluator.isConstant(this[$right])}[$evaluate](){const tt=normalizeUnit(Evaluator.evaluate(this[$left])),rt=normalizeUnit(Evaluator.evaluate(this[$right])),{number:at,unit:st}=tt,{number:ot,unit:lt}=rt;if(lt!=null&&st!=null&&lt!=st)return ZERO;const ut=st||lt;let ht;switch(this[$operator].value){case"+":ht=at+ot;break;case"-":ht=at-ot;break;case"/":ht=at/ot;break;case"*":ht=at*ot;break;default:return ZERO}return{type:"number",number:ht,unit:ut}}}const $evaluatables=Symbol("evaluatables"),$intrinsics=Symbol("intrinsics");class StyleEvaluator extends Evaluator{constructor(tt,rt){super(),this[$intrinsics]=rt;const at=tt[0],st=at!=null?at.terms:[];this[$evaluatables]=rt.basis.map((ot,lt)=>{const ut=st[lt];return ut==null?{type:"ident",value:"auto"}:ut.type==="ident"?ut:Evaluator.evaluatableFor(ut,ot)})}get isConstant(){for(const tt of this[$evaluatables])if(!Evaluator.isConstant(tt))return!1;return!0}[$evaluate](){const tt=this[$evaluatables].map(rt=>Evaluator.evaluate(rt));return Evaluator.applyIntrinsics(tt,this[$intrinsics]).map(rt=>rt.number)}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _a,_b,_c,_d;const $instances=Symbol("instances"),$activateListener=Symbol("activateListener"),$deactivateListener=Symbol("deactivateListener"),$notifyInstances=Symbol("notifyInstances"),$notify=Symbol("notify"),$scrollCallback=Symbol("callback");class ScrollObserver{constructor(tt){this[$scrollCallback]=tt}static[$notifyInstances](){for(const tt of ScrollObserver[$instances])tt[$notify]()}static[(_a=$instances,$activateListener)](){window.addEventListener("scroll",this[$notifyInstances],{passive:!0})}static[$deactivateListener](){window.removeEventListener("scroll",this[$notifyInstances])}observe(){ScrollObserver[$instances].size===0&&ScrollObserver[$activateListener](),ScrollObserver[$instances].add(this)}disconnect(){ScrollObserver[$instances].delete(this),ScrollObserver[$instances].size===0&&ScrollObserver[$deactivateListener]()}[$notify](){this[$scrollCallback]()}}ScrollObserver[_a]=new Set;const $computeStyleCallback=Symbol("computeStyleCallback"),$astWalker=Symbol("astWalker"),$dependencies=Symbol("dependencies"),$onScroll=Symbol("onScroll");class StyleEffector{constructor(tt){this[_b]={},this[_c]=new ASTWalker(["function"]),this[_d]=()=>{this[$computeStyleCallback]({relatedState:"window-scroll"})},this[$computeStyleCallback]=tt}observeEffectsFor(tt){const rt={},at=this[$dependencies];this[$astWalker].walk(tt,st=>{const{name:ot}=st,ut=st.arguments[0].terms[0];if(!(ot.value!=="env"||ut==null||ut.type!=="ident"))switch(ut.value){case"window-scroll-y":if(rt["window-scroll"]==null){const ht="window-scroll"in at?at["window-scroll"]:new ScrollObserver(this[$onScroll]);ht.observe(),delete at["window-scroll"],rt["window-scroll"]=ht}break}});for(const st in at)at[st].disconnect();this[$dependencies]=rt}dispose(){for(const tt in this[$dependencies])this[$dependencies][tt].disconnect()}}_b=$dependencies,_c=$astWalker,_d=$onScroll;/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const style=it=>{const tt=it.observeEffects||!1,rt=it.intrinsics instanceof Function?it.intrinsics:()=>it.intrinsics;return(at,st)=>{const ot=at.updated,lt=at.connectedCallback,ut=at.disconnectedCallback,ht=Symbol(`${st}StyleEffector`),mt=Symbol(`${st}StyleEvaluator`),bt=Symbol(`${st}UpdateEvaluator`),vt=Symbol(`${st}EvaluateAndSync`);Object.defineProperties(at,{[ht]:{value:null,writable:!0},[mt]:{value:null,writable:!0},[bt]:{value:function(){const At=parseExpressions(this[st]);this[mt]=new StyleEvaluator(At,rt(this)),this[ht]==null&&tt&&(this[ht]=new StyleEffector(()=>this[vt]())),this[ht]!=null&&this[ht].observeEffectsFor(At)}},[vt]:{value:function(){if(this[mt]==null)return;const At=this[mt].evaluate();this[it.updateHandler](At)}},updated:{value:function(At){At.has(st)&&(this[bt](),this[vt]()),ot.call(this,At)}},connectedCallback:{value:function(){lt.call(this),this.requestUpdate(st,this[st])}},disconnectedCallback:{value:function(){ut.call(this),this[ht]!=null&&(this[ht].dispose(),this[ht]=null)}}})}};/* @license
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PAN_SENSITIVITY=.018,TAP_DISTANCE=2,TAP_MS=300,vector2=new Vector2,vector3=new Vector3,DEFAULT_OPTIONS=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),KEYBOARD_ORBIT_INCREMENT=Math.PI/8,ZOOM_SENSITIVITY=.04,PAN_KEY_INCREMENT=10,ChangeSource={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class SmoothControls extends EventDispatcher{constructor(tt,rt,at){super(),this.camera=tt,this.element=rt,this.scene=at,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=ChangeSource.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new Matrix3,this.panPerPixel=0,this.spherical=new Spherical,this.goalSpherical=new Spherical,this.thetaDamper=new Damper,this.phiDamper=new Damper,this.radiusDamper=new Damper,this.logFov=Math.log(DEFAULT_OPTIONS.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Damper,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=st=>{if(this.enablePan)st.preventDefault();else for(const ot of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:ot.id})))},this.touchModeZoom=(st,ot)=>{if(!this._disableZoom){const lt=this.twoTouchDistance(this.pointers[0],this.pointers[1]),ut=ZOOM_SENSITIVITY*(this.lastSeparation-lt)*50/this.scene.height;this.lastSeparation=lt,this.userAdjustOrbit(0,0,ut)}this.panPerPixel>0&&this.movePan(st,ot)},this.disableScroll=st=>{st.preventDefault()},this.touchModeRotate=(st,ot)=>{const{touchAction:lt}=this._options;if(!this.touchDecided&&lt!=="none"){this.touchDecided=!0;const ut=Math.abs(st),ht=Math.abs(ot);if(this.changeSource===ChangeSource.USER_INTERACTION&&(lt==="pan-y"&&ht>ut||lt==="pan-x"&&ut>ht)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(st,ot)},this.onPointerDown=st=>{if(this.pointers.length>2)return;const{element:ot}=this;this.pointers.length===0&&(ot.addEventListener("pointermove",this.onPointerMove),ot.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=st.clientX,this.startPointerPosition.clientY=st.clientY,this.startTime=performance.now());try{ot.setPointerCapture(st.pointerId)}catch{}this.pointers.push({clientX:st.clientX,clientY:st.clientY,id:st.pointerId}),this.isUserPointing=!1,st.pointerType==="touch"?(this.changeSource=st.altKey?ChangeSource.AUTOMATIC:ChangeSource.USER_INTERACTION,this.onTouchChange(st)):(this.changeSource=ChangeSource.USER_INTERACTION,this.onMouseDown(st))},this.onPointerMove=st=>{const ot=this.pointers.find(mt=>mt.id===st.pointerId);if(ot==null)return;const lt=this.pointers.length,ut=(st.clientX-ot.clientX)/lt,ht=(st.clientY-ot.clientY)/lt;ut===0&&ht===0||(ot.clientX=st.clientX,ot.clientY=st.clientY,st.pointerType==="touch"?(this.changeSource=st.altKey?ChangeSource.AUTOMATIC:ChangeSource.USER_INTERACTION,this.touchMode!==null&&this.touchMode(ut,ht)):(this.changeSource=ChangeSource.USER_INTERACTION,this.panPerPixel>0?this.movePan(ut,ht):this.handleSinglePointerMove(ut,ht)))},this.onPointerUp=st=>{const{element:ot}=this,lt=this.pointers.findIndex(ut=>ut.id===st.pointerId);lt!==-1&&this.pointers.splice(lt,1),this.panPerPixel>0&&!st.altKey&&this.resetRadius(),this.pointers.length===0?(ot.removeEventListener("pointermove",this.onPointerMove),ot.removeEventListener("pointerup",this.onPointerUp),ot.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(st)):this.touchMode!==null&&this.onTouchChange(st),this.scene.element[$panElement].style.opacity=0,ot.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=st=>{this.changeSource=ChangeSource.USER_INTERACTION;const ot=st.deltaY*(st.deltaMode==1?18:1)*ZOOM_SENSITIVITY/30;this.userAdjustOrbit(0,0,ot),st.preventDefault()},this.onKeyDown=st=>{const{changeSource:ot}=this;this.changeSource=ChangeSource.USER_INTERACTION,(st.shiftKey&&this.enablePan?this.panKeyCodeHandler(st):this.orbitZoomKeyCodeHandler(st))?st.preventDefault():this.changeSource=ot},this._options=Object.assign({},DEFAULT_OPTIONS),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:tt}=this;tt.addEventListener("pointerdown",this.onPointerDown),tt.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||tt.addEventListener("wheel",this.onWheel),tt.addEventListener("keydown",this.onKeyDown),tt.addEventListener("touchmove",()=>{},{passive:!1}),tt.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:tt}=this;tt.removeEventListener("pointerdown",this.onPointerDown),tt.removeEventListener("pointermove",this.onPointerMove),tt.removeEventListener("pointerup",this.onPointerUp),tt.removeEventListener("pointercancel",this.onPointerUp),tt.removeEventListener("wheel",this.onWheel),tt.removeEventListener("keydown",this.onKeyDown),tt.removeEventListener("contextmenu",this.onContext),tt.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(tt){this._disableZoom!=tt&&(this._disableZoom=tt,tt===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(tt=new Spherical){return tt.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(tt){Object.assign(this._options,tt),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(tt,rt){this.camera.near=Math.max(tt,rt/1e3),this.camera.far=rt,this.camera.updateProjectionMatrix()}updateAspect(tt){this.camera.aspect=tt,this.camera.updateProjectionMatrix()}setOrbit(tt=this.goalSpherical.theta,rt=this.goalSpherical.phi,at=this.goalSpherical.radius){const{minimumAzimuthalAngle:st,maximumAzimuthalAngle:ot,minimumPolarAngle:lt,maximumPolarAngle:ut,minimumRadius:ht,maximumRadius:mt}=this._options,{theta:bt,phi:vt,radius:At}=this.goalSpherical,xt=clamp(tt,st,ot);!isFinite(st)&&!isFinite(ot)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-xt)+xt);const Et=clamp(rt,lt,ut),Tt=clamp(at,ht,mt);return xt===bt&&Et===vt&&Tt===At?!1:(this.goalSpherical.theta=xt,this.goalSpherical.phi=Et,this.goalSpherical.radius=Tt,this.goalSpherical.makeSafe(),!0)}setRadius(tt){this.goalSpherical.radius=tt,this.setOrbit()}setFieldOfView(tt){const{minimumFieldOfView:rt,maximumFieldOfView:at}=this._options;tt=clamp(tt,rt,at),this.goalLogFov=Math.log(tt)}setDamperDecayTime(tt){this.thetaDamper.setDecayTime(tt),this.phiDamper.setDecayTime(tt),this.radiusDamper.setDecayTime(tt),this.fovDamper.setDecayTime(tt)}adjustOrbit(tt,rt,at){const{theta:st,phi:ot,radius:lt}=this.goalSpherical,{minimumRadius:ut,maximumRadius:ht,minimumFieldOfView:mt,maximumFieldOfView:bt}=this._options,vt=this.spherical.theta-st,At=Math.PI-.001,xt=st-clamp(tt,-At-vt,At-vt),Et=ot-rt,Tt=at===0?0:((at>0?ht:ut)-lt)/(Math.log(at>0?bt:mt)-this.goalLogFov),wt=lt+at*(isFinite(Tt)?Tt:(ht-ut)*2);if(this.setOrbit(xt,Et,wt),at!==0){const Ct=this.goalLogFov+at;this.setFieldOfView(Math.exp(Ct))}}jumpToGoal(){this.update(0,SETTLING_TIME)}update(tt,rt){if(this.isStationary())return;const{maximumPolarAngle:at,maximumRadius:st}=this._options,ot=this.spherical.theta-this.goalSpherical.theta;Math.abs(ot)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(ot)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,rt,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,rt,at),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,rt,st),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,rt,1),this.moveCamera()}updateTouchActionStyle(){const{style:tt}=this.element;if(this._interactionEnabled){const{touchAction:rt}=this._options;this._disableZoom&&rt!=="none"?tt.touchAction="manipulation":tt.touchAction=rt}else tt.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}dispatchChange(){this.dispatchEvent({type:"change",source:this.changeSource})}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Euler(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix()),this.dispatchChange()}userAdjustOrbit(tt,rt,at){this.adjustOrbit(tt*this.orbitSensitivity*this.inputSensitivity,rt*this.orbitSensitivity*this.inputSensitivity,at*this.inputSensitivity),this.dispatchChange()}wrapAngle(tt){const rt=(tt+Math.PI)/(2*Math.PI);return(rt-Math.floor(rt))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(tt){return 2*Math.PI*tt/this.element.clientHeight}twoTouchDistance(tt,rt){const{clientX:at,clientY:st}=tt,{clientX:ot,clientY:lt}=rt,ut=ot-at,ht=lt-st;return Math.sqrt(ut*ut+ht*ht)}handleSinglePointerMove(tt,rt){const at=this.pixelLengthToSphericalAngle(tt),st=this.pixelLengthToSphericalAngle(rt);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(at,st,0)}initializePan(){const{theta:tt,phi:rt}=this.spherical,at=tt-this.scene.yaw;this.panPerPixel=PAN_SENSITIVITY/this.scene.height,this.panProjection.set(-Math.cos(at),-Math.cos(rt)*Math.sin(at),0,0,Math.sin(rt),0,Math.sin(at),-Math.cos(rt)*Math.cos(at),0)}movePan(tt,rt){const{scene:at}=this,st=vector3.set(tt,rt,0).multiplyScalar(this.inputSensitivity),ot=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;st.multiplyScalar(ot);const lt=at.getTarget();lt.add(st.applyMatrix3(this.panProjection)),at.boundingSphere.clampPoint(lt,lt),at.setTarget(lt.x,lt.y,lt.z),this.dispatchChange()}recenter(tt){if(performance.now()>this.startTime+TAP_MS||Math.abs(tt.clientX-this.startPointerPosition.clientX)>TAP_DISTANCE||Math.abs(tt.clientY-this.startPointerPosition.clientY)>TAP_DISTANCE)return;const{scene:rt}=this,at=rt.positionAndNormalFromPoint(rt.getNDC(tt.clientX,tt.clientY));if(at==null){const{cameraTarget:st}=rt.element;rt.element.cameraTarget="",rt.element.cameraTarget=st,this.userAdjustOrbit(0,0,1)}else rt.target.worldToLocal(at.position),rt.setTarget(at.position.x,at.position.y,at.position.z)}resetRadius(){const{scene:tt}=this,rt=tt.positionAndNormalFromPoint(vector2.set(0,0));if(rt==null)return;tt.target.worldToLocal(rt.position);const at=tt.getTarget(),{theta:st,phi:ot}=this.spherical,lt=st-tt.yaw,ut=vector3.set(Math.sin(ot)*Math.sin(lt),Math.cos(ot),Math.sin(ot)*Math.cos(lt)),ht=ut.dot(rt.position.sub(at));at.add(ut.multiplyScalar(ht)),tt.setTarget(at.x,at.y,at.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-ht)}onTouchChange(tt){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),tt.altKey||(this.scene.element[$panElement].style.opacity=1))}}onMouseDown(tt){this.panPerPixel=0,this.enablePan&&(tt.button===2||tt.ctrlKey||tt.metaKey||tt.shiftKey)&&(this.initializePan(),this.scene.element[$panElement].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(tt){let rt=!0;switch(tt.key){case"PageUp":this.userAdjustOrbit(0,0,ZOOM_SENSITIVITY);break;case"PageDown":this.userAdjustOrbit(0,0,-1*ZOOM_SENSITIVITY);break;case"ArrowUp":this.userAdjustOrbit(0,-KEYBOARD_ORBIT_INCREMENT,0);break;case"ArrowDown":this.userAdjustOrbit(0,KEYBOARD_ORBIT_INCREMENT,0);break;case"ArrowLeft":this.userAdjustOrbit(-KEYBOARD_ORBIT_INCREMENT,0,0);break;case"ArrowRight":this.userAdjustOrbit(KEYBOARD_ORBIT_INCREMENT,0,0);break;default:rt=!1;break}return rt}panKeyCodeHandler(tt){this.initializePan();let rt=!0;switch(tt.key){case"ArrowUp":this.movePan(0,-1*PAN_KEY_INCREMENT);break;case"ArrowDown":this.movePan(0,PAN_KEY_INCREMENT);break;case"ArrowLeft":this.movePan(-1*PAN_KEY_INCREMENT,0);break;case"ArrowRight":this.movePan(PAN_KEY_INCREMENT,0);break;default:rt=!1;break}return rt}}/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const easeInOutQuad=it=>it<.5?2*it*it:-1+(4-2*it)*it,interpolate=(it,tt,rt=easeInOutQuad)=>at=>it+(tt-it)*rt(at),sequence=(it,tt)=>{const rt=st=>ot=>st+=ot,at=tt.map(rt(0));return st=>{st=clamp(st,0,1),st*=at[at.length-1];const ot=at.findIndex(ht=>ht>=st),lt=ot<1?0:at[ot-1],ut=at[ot];return it[ot]((st-lt)/(ut-lt))}},timeline=it=>{const tt=[],rt=[];let at=it.initialValue;for(let st=0;st<it.keyframes.length;++st){const ot=it.keyframes[st],{value:lt,frames:ut}=ot,ht=ot.ease||easeInOutQuad,mt=interpolate(at,lt,ht);tt.push(mt),rt.push(ut),at=lt}return sequence(tt,rt)};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var __decorate$2=globalThis&&globalThis.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot};const PROMPT_ANIMATION_TIME=5e3,wiggle=timeline({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),fade=timeline({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),DEFAULT_FOV_DEG=30,DEFAULT_MIN_FOV_DEG=12,DEFAULT_CAMERA_ORBIT="0deg 75deg 105%",DEFAULT_CAMERA_TARGET="auto auto auto",DEFAULT_FIELD_OF_VIEW="auto",MINIMUM_RADIUS_RATIO=2.2,AZIMUTHAL_QUADRANT_LABELS=["front","right","back","left"],POLAR_TRIENT_LABELS=["upper-","","lower-"],DEFAULT_INTERACTION_PROMPT_THRESHOLD=3e3,INTERACTION_PROMPT=". Use mouse, touch or arrow keys to move.",InteractionPromptStrategy={AUTO:"auto",NONE:"none"},InteractionPromptStyle={BASIC:"basic",WIGGLE:"wiggle"},TouchAction={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},fieldOfViewIntrinsics=()=>({basis:[degreesToRadians(numberNode(DEFAULT_FOV_DEG,"deg"))],keywords:{auto:[null]}}),minFieldOfViewIntrinsics=()=>({basis:[degreesToRadians(numberNode(DEFAULT_MIN_FOV_DEG,"deg"))],keywords:{auto:[null]}}),cameraOrbitIntrinsics=(()=>{const it=parseExpressions(DEFAULT_CAMERA_ORBIT)[0].terms,tt=normalizeUnit(it[0]),rt=normalizeUnit(it[1]);return at=>{const st=at[$scene].idealCameraDistance();return{basis:[tt,rt,numberNode(st,"m")],keywords:{auto:[null,null,numberNode(105,"%")]}}}})(),minCameraOrbitIntrinsics=it=>{const tt=MINIMUM_RADIUS_RATIO*it[$scene].boundingSphere.radius;return{basis:[numberNode(-1/0,"rad"),numberNode(Math.PI/8,"rad"),numberNode(tt,"m")],keywords:{auto:[null,null,null]}}},maxCameraOrbitIntrinsics=it=>{const tt=cameraOrbitIntrinsics(it),at=new StyleEvaluator([],tt).evaluate()[2];return{basis:[numberNode(1/0,"rad"),numberNode(Math.PI-Math.PI/8,"rad"),numberNode(at,"m")],keywords:{auto:[null,null,null]}}},cameraTargetIntrinsics=it=>{const tt=it[$scene].boundingBox.getCenter(new Vector3);return{basis:[numberNode(tt.x,"m"),numberNode(tt.y,"m"),numberNode(tt.z,"m")],keywords:{auto:[null,null,null]}}},HALF_PI=Math.PI/2,THIRD_PI=Math.PI/3,QUARTER_PI=HALF_PI/2,TAU=2*Math.PI,$controls=Symbol("controls"),$panElement=Symbol("panElement"),$promptElement=Symbol("promptElement"),$promptAnimatedContainer=Symbol("promptAnimatedContainer"),$fingerAnimatedContainers=Symbol("fingerAnimatedContainers"),$deferInteractionPrompt=Symbol("deferInteractionPrompt"),$updateAria=Symbol("updateAria"),$updateCameraForRadius=Symbol("updateCameraForRadius"),$onChange=Symbol("onChange"),$onPointerChange=Symbol("onPointerChange"),$waitingToPromptUser=Symbol("waitingToPromptUser"),$userHasInteracted=Symbol("userHasInteracted"),$promptElementVisibleTime=Symbol("promptElementVisibleTime"),$lastPromptOffset=Symbol("lastPromptOffset"),$lastSpherical=Symbol("lastSpherical"),$jumpCamera=Symbol("jumpCamera"),$initialized=Symbol("initialized"),$maintainThetaPhi=Symbol("maintainThetaPhi"),$syncCameraOrbit=Symbol("syncCameraOrbit"),$syncFieldOfView=Symbol("syncFieldOfView"),$syncCameraTarget=Symbol("syncCameraTarget"),$syncMinCameraOrbit=Symbol("syncMinCameraOrbit"),$syncMaxCameraOrbit=Symbol("syncMaxCameraOrbit"),$syncMinFieldOfView=Symbol("syncMinFieldOfView"),$syncMaxFieldOfView=Symbol("syncMaxFieldOfView"),ControlsMixin=it=>{var tt,rt,at,st,ot,lt,ut,ht,mt,bt,vt,At,xt,Et,Tt;class wt extends it{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=DEFAULT_CAMERA_ORBIT,this.cameraTarget=DEFAULT_CAMERA_TARGET,this.fieldOfView=DEFAULT_FIELD_OF_VIEW,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=DEFAULT_INTERACTION_PROMPT_THRESHOLD,this.interactionPrompt=InteractionPromptStrategy.AUTO,this.interactionPromptStyle=InteractionPromptStyle.WIGGLE,this.orbitSensitivity=1,this.touchAction=TouchAction.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=DECAY_MILLISECONDS,this[tt]=this.shadowRoot.querySelector(".interaction-prompt"),this[rt]=this.shadowRoot.querySelector("#prompt"),this[at]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[st]=this.shadowRoot.querySelector(".pan-target"),this[ot]=0,this[lt]=1/0,this[ut]=!1,this[ht]=!1,this[mt]=new SmoothControls(this[$scene].camera,this[$userInputElement],this[$scene]),this[bt]=new Spherical,this[vt]=!1,this[At]=!1,this[xt]=!1,this[Et]=({source:It})=>{this[$updateAria](),this[$needsRender](),It===ChangeSource.USER_INTERACTION&&(this[$userHasInteracted]=!0,this[$deferInteractionPrompt]()),this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:It}}))},this[Tt]=It=>{It.type==="pointer-change-start"?this[$container].classList.add("pointer-tumbling"):this[$container].classList.remove("pointer-tumbling")}}get inputSensitivity(){return this[$controls].inputSensitivity}set inputSensitivity(It){this[$controls].inputSensitivity=It}getCameraOrbit(){const{theta:It,phi:St,radius:Rt}=this[$lastSpherical];return{theta:It,phi:St,radius:Rt,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return toVector3D(this[$renderer].isPresenting?this[$renderer].arRenderer.target:this[$scene].getTarget())}getFieldOfView(){return this[$controls].getFieldOfView()}getMinimumFieldOfView(){return this[$controls].options.minimumFieldOfView}getMaximumFieldOfView(){return this[$controls].options.maximumFieldOfView}getIdealAspect(){return this[$scene].idealAspect}jumpCameraToGoal(){this[$jumpCamera]=!0,this.requestUpdate($jumpCamera,!1)}resetInteractionPrompt(){this[$lastPromptOffset]=0,this[$promptElementVisibleTime]=1/0,this[$userHasInteracted]=!1,this[$waitingToPromptUser]=this.interactionPrompt===InteractionPromptStrategy.AUTO&&this.cameraControls}zoom(It){const St=new WheelEvent("wheel",{deltaY:-30*It});this[$userInputElement].dispatchEvent(St)}connectedCallback(){super.connectedCallback(),this[$controls].addEventListener("change",this[$onChange]),this[$controls].addEventListener("pointer-change-start",this[$onPointerChange]),this[$controls].addEventListener("pointer-change-end",this[$onPointerChange])}disconnectedCallback(){super.disconnectedCallback(),this[$controls].removeEventListener("change",this[$onChange]),this[$controls].removeEventListener("pointer-change-start",this[$onPointerChange]),this[$controls].removeEventListener("pointer-change-end",this[$onPointerChange])}updated(It){super.updated(It);const St=this[$controls],Rt=this[$scene];if(It.has("cameraControls")&&(this.cameraControls?(St.enableInteraction(),this.interactionPrompt===InteractionPromptStrategy.AUTO&&(this[$waitingToPromptUser]=!0)):(St.disableInteraction(),this[$deferInteractionPrompt]()),this[$userInputElement].setAttribute("aria-label",this[$ariaLabel])),It.has("disableZoom")&&(St.disableZoom=this.disableZoom),It.has("disablePan")&&(St.enablePan=!this.disablePan),It.has("disableTap")&&(St.enableTap=!this.disableTap),(It.has("interactionPrompt")||It.has("cameraControls")||It.has("src"))&&(this.interactionPrompt===InteractionPromptStrategy.AUTO&&this.cameraControls&&!this[$userHasInteracted]?this[$waitingToPromptUser]=!0:this[$deferInteractionPrompt]()),It.has("interactionPromptStyle")&&(this[$promptAnimatedContainer].style.opacity=this.interactionPromptStyle==InteractionPromptStyle.BASIC?"1":"0"),It.has("touchAction")){const Dt=this.touchAction;St.applyOptions({touchAction:Dt}),St.updateTouchActionStyle()}It.has("orbitSensitivity")&&(St.orbitSensitivity=this.orbitSensitivity),It.has("interpolationDecay")&&(St.setDamperDecayTime(this.interpolationDecay),Rt.setTargetDamperDecayTime(this.interpolationDecay)),this[$jumpCamera]===!0&&Promise.resolve().then(()=>{St.jumpToGoal(),Rt.jumpToGoal(),this[$jumpCamera]=!1})}async updateFraming(){const It=this[$scene],St=It.adjustedFoV(It.framedFoVDeg);await It.updateFraming();const Rt=It.adjustedFoV(It.framedFoVDeg),Dt=this[$controls].getFieldOfView()/St;this[$controls].setFieldOfView(Rt*Dt),this[$maintainThetaPhi]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(It,St,Rt){const Dt=this[$userInputElement],Wt=this[$fingerAnimatedContainers];if(Wt[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const qt=new Array;qt.push({x:timeline(St.x),y:timeline(St.y)});const Vt=[{x:qt[0].x(0),y:qt[0].y(0)}];Rt!=null&&(qt.push({x:timeline(Rt.x),y:timeline(Rt.y)}),Vt.push({x:qt[1].x(0),y:qt[1].y(0)}));let Yt=performance.now();const{width:jt,height:kt}=this[$scene],zt=Lt=>{for(const[Ht,Qt]of Vt.entries()){const{style:Ut}=Wt[Ht];Ut.transform=`translateX(${jt*Qt.x}px) translateY(${kt*Qt.y}px)`,Lt==="pointerdown"?Ut.opacity="1":Lt==="pointerup"&&(Ut.opacity="0");const Bt={pointerId:Ht-5678,pointerType:"touch",target:Dt,clientX:jt*Qt.x,clientY:kt*Qt.y,altKey:!0};Dt.dispatchEvent(new PointerEvent(Lt,Bt))}},Nt=()=>{const{changeSource:Lt}=this[$controls];if(Lt!==ChangeSource.AUTOMATIC||!Dt.isConnected){for(const Qt of this[$fingerAnimatedContainers])Qt.style.opacity="0";zt("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Lt}})),document.removeEventListener("visibilitychange",Mt);return}const Ht=Math.min(1,(performance.now()-Yt)/It);for(const[Qt,Ut]of Vt.entries())Ut.x=qt[Qt].x(Ht),Ut.y=qt[Qt].y(Ht);zt("pointermove"),Ht<1?requestAnimationFrame(Nt):(zt("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Lt}})),document.removeEventListener("visibilitychange",Mt))},Mt=()=>{let Lt=0;document.visibilityState==="hidden"?Lt=performance.now()-Yt:Yt=performance.now()-Lt};document.addEventListener("visibilitychange",Mt),zt("pointerdown"),requestAnimationFrame(Nt)}[(tt=$promptElement,rt=$promptAnimatedContainer,at=$fingerAnimatedContainers,st=$panElement,ot=$lastPromptOffset,lt=$promptElementVisibleTime,ut=$userHasInteracted,ht=$waitingToPromptUser,mt=$controls,bt=$lastSpherical,vt=$jumpCamera,At=$initialized,xt=$maintainThetaPhi,$syncFieldOfView)](It){const St=this[$scene];St.framedFoVDeg=It[0]*180/Math.PI,this[$controls].setFieldOfView(St.adjustedFoV(St.framedFoVDeg))}[$syncCameraOrbit](It){const St=this[$controls];if(this[$maintainThetaPhi]){const{theta:Rt,phi:Dt}=this.getCameraOrbit();It[0]=Rt,It[1]=Dt,this[$maintainThetaPhi]=!1}St.changeSource=ChangeSource.NONE,St.setOrbit(It[0],It[1],It[2])}[$syncMinCameraOrbit](It){this[$controls].applyOptions({minimumAzimuthalAngle:It[0],minimumPolarAngle:It[1],minimumRadius:It[2]}),this.jumpCameraToGoal()}[$syncMaxCameraOrbit](It){this[$controls].applyOptions({maximumAzimuthalAngle:It[0],maximumPolarAngle:It[1],maximumRadius:It[2]}),this[$updateCameraForRadius](It[2]),this.jumpCameraToGoal()}[$syncMinFieldOfView](It){this[$controls].applyOptions({minimumFieldOfView:It[0]*180/Math.PI}),this.jumpCameraToGoal()}[$syncMaxFieldOfView](It){const St=this[$scene].adjustedFoV(It[0]*180/Math.PI);this[$controls].applyOptions({maximumFieldOfView:St}),this.jumpCameraToGoal()}[$syncCameraTarget](It){const[St,Rt,Dt]=It;this[$renderer].arRenderer.isPresenting||this[$scene].setTarget(St,Rt,Dt),this[$controls].changeSource=ChangeSource.NONE,this[$renderer].arRenderer.updateTarget()}[$tick](It,St){if(super[$tick](It,St),this[$renderer].isPresenting||!this[$getModelIsVisible]())return;const Rt=this[$controls],Dt=this[$scene],Wt=performance.now();if(this[$waitingToPromptUser]&&this.loaded&&Wt>this[$loadedTime]+this.interactionPromptThreshold&&(this[$waitingToPromptUser]=!1,this[$promptElementVisibleTime]=Wt,this[$promptElement].classList.add("visible")),isFinite(this[$promptElementVisibleTime])&&this.interactionPromptStyle===InteractionPromptStyle.WIGGLE){const qt=(Wt-this[$promptElementVisibleTime])/PROMPT_ANIMATION_TIME%1,Vt=wiggle(qt),Yt=fade(qt);if(this[$promptAnimatedContainer].style.opacity=`${Yt}`,Vt!==this[$lastPromptOffset]){const jt=Vt*Dt.width*.05,kt=(Vt-this[$lastPromptOffset])*Math.PI/16;this[$promptAnimatedContainer].style.transform=`translateX(${jt}px)`,Rt.changeSource=ChangeSource.AUTOMATIC,Rt.adjustOrbit(kt,0,0),this[$lastPromptOffset]=Vt}}Rt.update(It,St),Dt.updateTarget(St)&&this[$onChange]({type:"change",source:Rt.changeSource})}[$deferInteractionPrompt](){this[$waitingToPromptUser]=!1,this[$promptElement].classList.remove("visible"),this[$promptElementVisibleTime]=1/0}[$updateCameraForRadius](It){const St=Math.max(this[$scene].boundingSphere.radius,It),Rt=0,Dt=2*St;this[$controls].updateNearFar(Rt,Dt)}[$updateAria](){const{theta:It,phi:St}=this[$controls].getCameraSpherical(this[$lastSpherical]),Rt=(4+Math.floor((It%TAU+QUARTER_PI)/HALF_PI))%4,Dt=Math.floor(St/THIRD_PI),Wt=AZIMUTHAL_QUADRANT_LABELS[Rt],qt=POLAR_TRIENT_LABELS[Dt];this[$updateStatus](`View from stage ${qt}${Wt}`)}get[$ariaLabel](){return super[$ariaLabel]+(this.cameraControls?INTERACTION_PROMPT:"")}async[$onResize](It){const St=this[$controls],Rt=this[$scene],Dt=Rt.adjustedFoV(Rt.framedFoVDeg);super[$onResize](It);const Wt=Rt.adjustedFoV(Rt.framedFoVDeg)/Dt,qt=St.getFieldOfView()*(isFinite(Wt)?Wt:1);St.updateAspect(this[$scene].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[$controls].setFieldOfView(qt),this.jumpCameraToGoal()}[$onModelLoad](){super[$onModelLoad](),this[$initialized]?this[$maintainThetaPhi]=!0:this[$initialized]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return Et=$onChange,Tt=$onPointerChange,__decorate$2([e$3({type:Boolean,attribute:"camera-controls"})],wt.prototype,"cameraControls",void 0),__decorate$2([style({intrinsics:cameraOrbitIntrinsics,observeEffects:!0,updateHandler:$syncCameraOrbit}),e$3({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],wt.prototype,"cameraOrbit",void 0),__decorate$2([style({intrinsics:cameraTargetIntrinsics,observeEffects:!0,updateHandler:$syncCameraTarget}),e$3({type:String,attribute:"camera-target",hasChanged:()=>!0})],wt.prototype,"cameraTarget",void 0),__decorate$2([style({intrinsics:fieldOfViewIntrinsics,observeEffects:!0,updateHandler:$syncFieldOfView}),e$3({type:String,attribute:"field-of-view",hasChanged:()=>!0})],wt.prototype,"fieldOfView",void 0),__decorate$2([style({intrinsics:minCameraOrbitIntrinsics,updateHandler:$syncMinCameraOrbit}),e$3({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],wt.prototype,"minCameraOrbit",void 0),__decorate$2([style({intrinsics:maxCameraOrbitIntrinsics,updateHandler:$syncMaxCameraOrbit}),e$3({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],wt.prototype,"maxCameraOrbit",void 0),__decorate$2([style({intrinsics:minFieldOfViewIntrinsics,updateHandler:$syncMinFieldOfView}),e$3({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],wt.prototype,"minFieldOfView",void 0),__decorate$2([style({intrinsics:fieldOfViewIntrinsics,updateHandler:$syncMaxFieldOfView}),e$3({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],wt.prototype,"maxFieldOfView",void 0),__decorate$2([e$3({type:Number,attribute:"interaction-prompt-threshold"})],wt.prototype,"interactionPromptThreshold",void 0),__decorate$2([e$3({type:String,attribute:"interaction-prompt"})],wt.prototype,"interactionPrompt",void 0),__decorate$2([e$3({type:String,attribute:"interaction-prompt-style"})],wt.prototype,"interactionPromptStyle",void 0),__decorate$2([e$3({type:Number,attribute:"orbit-sensitivity"})],wt.prototype,"orbitSensitivity",void 0),__decorate$2([e$3({type:String,attribute:"touch-action"})],wt.prototype,"touchAction",void 0),__decorate$2([e$3({type:Boolean,attribute:"disable-zoom"})],wt.prototype,"disableZoom",void 0),__decorate$2([e$3({type:Boolean,attribute:"disable-pan"})],wt.prototype,"disablePan",void 0),__decorate$2([e$3({type:Boolean,attribute:"disable-tap"})],wt.prototype,"disableTap",void 0),__decorate$2([e$3({type:Number,attribute:"interpolation-decay"})],wt.prototype,"interpolationDecay",void 0),wt};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var __decorate$1=globalThis&&globalThis.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot};const PROGRESS_BAR_UPDATE_THRESHOLD=100,DEFAULT_DRACO_DECODER_LOCATION="https://www.gstatic.com/draco/versioned/decoders/1.4.1/",DEFAULT_KTX2_TRANSCODER_LOCATION="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",RevealStrategy={AUTO:"auto",MANUAL:"manual"},LoadingStrategy={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},$defaultProgressBarElement=Symbol("defaultProgressBarElement"),$posterContainerElement=Symbol("posterContainerElement"),$defaultPosterElement=Symbol("defaultPosterElement"),$shouldDismissPoster=Symbol("shouldDismissPoster"),$hidePoster=Symbol("hidePoster"),$modelIsRevealed=Symbol("modelIsRevealed"),$updateProgressBar=Symbol("updateProgressBar"),$ariaLabelCallToAction=Symbol("ariaLabelCallToAction"),$onProgress=Symbol("onProgress"),LoadingMixin=it=>{var tt,rt,at,st,ot,lt,ut,ht;class mt extends it{constructor(...vt){super(...vt),this.poster=null,this.reveal=RevealStrategy.AUTO,this.loading=LoadingStrategy.AUTO,this[tt]=!1,this[rt]=!1,this[at]=this.shadowRoot.querySelector(".slot.poster"),this[st]=this.shadowRoot.querySelector("#default-poster"),this[ot]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[lt]=this[$defaultPosterElement].getAttribute("aria-label"),this[ut]=throttle(Tt=>{const wt=this[$defaultProgressBarElement].parentNode;requestAnimationFrame(()=>{this[$defaultProgressBarElement].style.transform=`scaleX(${Tt})`,Tt===0&&(wt.removeChild(this[$defaultProgressBarElement]),wt.appendChild(this[$defaultProgressBarElement])),Tt===1?this[$defaultProgressBarElement].classList.add("hide"):this[$defaultProgressBarElement].classList.remove("hide")})},PROGRESS_BAR_UPDATE_THRESHOLD),this[ht]=Tt=>{const wt=Tt.detail.totalProgress;wt===1&&(this[$updateProgressBar].flush(),this.loaded&&(this[$shouldDismissPoster]||this.reveal===RevealStrategy.AUTO)&&this[$hidePoster]()),this[$updateProgressBar](wt),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:wt}}))};const At=self.ModelViewerElement||{},xt=At.dracoDecoderLocation||DEFAULT_DRACO_DECODER_LOCATION;CachingGLTFLoader.setDRACODecoderLocation(xt);const Et=At.ktx2TranscoderLocation||DEFAULT_KTX2_TRANSCODER_LOCATION;CachingGLTFLoader.setKTX2TranscoderLocation(Et),At.meshoptDecoderLocation&&CachingGLTFLoader.setMeshoptDecoderLocation(At.meshoptDecoderLocation)}static set dracoDecoderLocation(vt){CachingGLTFLoader.setDRACODecoderLocation(vt)}static get dracoDecoderLocation(){return CachingGLTFLoader.getDRACODecoderLocation()}static set ktx2TranscoderLocation(vt){CachingGLTFLoader.setKTX2TranscoderLocation(vt)}static get ktx2TranscoderLocation(){return CachingGLTFLoader.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(vt){CachingGLTFLoader.setMeshoptDecoderLocation(vt)}static get meshoptDecoderLocation(){return CachingGLTFLoader.getMeshoptDecoderLocation()}static mapURLs(vt){Renderer.singleton.loader[$loader].manager.setURLModifier(vt)}dismissPoster(){this.loaded?this[$hidePoster]():(this[$shouldDismissPoster]=!0,this[$updateSource]())}showPoster(){const vt=this[$posterContainerElement];if(vt.classList.contains("show"))return;vt.classList.add("show"),this[$userInputElement].classList.remove("show");const At=this[$defaultPosterElement];At.removeAttribute("tabindex"),At.removeAttribute("aria-hidden");const xt=this.modelIsVisible;this[$modelIsRevealed]=!1,this[$announceModelVisibility](xt)}getDimensions(){return toVector3D(this[$scene].size)}getBoundingBoxCenter(){return toVector3D(this[$scene].boundingBox.getCenter(new Vector3))}connectedCallback(){super.connectedCallback(),this.showPoster(),this[$progressTracker].addEventListener("progress",this[$onProgress])}disconnectedCallback(){super.disconnectedCallback(),this[$progressTracker].removeEventListener("progress",this[$onProgress])}async updated(vt){super.updated(vt),vt.has("poster")&&this.poster!=null&&(this[$defaultPosterElement].style.backgroundImage=`url(${this.poster})`),vt.has("alt")&&this[$defaultPosterElement].setAttribute("aria-label",this[$altDefaulted]),(vt.has("reveal")||vt.has("loading"))&&this[$updateSource]()}[(tt=$modelIsRevealed,rt=$shouldDismissPoster,at=$posterContainerElement,st=$defaultPosterElement,ot=$defaultProgressBarElement,lt=$ariaLabelCallToAction,ut=$updateProgressBar,ht=$onProgress,$shouldAttemptPreload)](){return!!this.src&&(this[$shouldDismissPoster]||this.loading===LoadingStrategy.EAGER||this.reveal===RevealStrategy.AUTO&&this[$isElementInViewport])}[$hidePoster](){this[$shouldDismissPoster]=!1;const vt=this[$posterContainerElement];if(!vt.classList.contains("show"))return;vt.classList.remove("show"),this[$userInputElement].classList.add("show");const At=this.modelIsVisible;this[$modelIsRevealed]=!0,this[$announceModelVisibility](At);const xt=this.getRootNode();xt&&xt.activeElement===this&&this[$userInputElement].focus();const Et=this[$defaultPosterElement];Et.setAttribute("aria-hidden","true"),Et.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[$getModelIsVisible](){return super[$getModelIsVisible]()&&this[$modelIsRevealed]}}return __decorate$1([e$3({type:String})],mt.prototype,"poster",void 0),__decorate$1([e$3({type:String})],mt.prototype,"reveal",void 0),__decorate$1([e$3({type:String})],mt.prototype,"loading",void 0),mt};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var __decorate=globalThis&&globalThis.__decorate||function(it,tt,rt,at){var st=arguments.length,ot=st<3?tt:at===null?at=Object.getOwnPropertyDescriptor(tt,rt):at,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ot=Reflect.decorate(it,tt,rt,at);else for(var ut=it.length-1;ut>=0;ut--)(lt=it[ut])&&(ot=(st<3?lt(ot):st>3?lt(tt,rt,ot):lt(tt,rt))||ot);return st>3&&ot&&Object.defineProperty(tt,rt,ot),ot};const DEFAULT_ROTATION_SPEED=Math.PI/32,AUTO_ROTATE_DELAY_DEFAULT=3e3,rotationRateIntrinsics={basis:[degreesToRadians(numberNode(DEFAULT_ROTATION_SPEED,"rad"))],keywords:{auto:[null]}},$autoRotateStartTime=Symbol("autoRotateStartTime"),$radiansPerSecond=Symbol("radiansPerSecond"),$syncRotationRate=Symbol("syncRotationRate"),$onCameraChange=Symbol("onCameraChange"),StagingMixin=it=>{var tt,rt,at;class st extends it{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=AUTO_ROTATE_DELAY_DEFAULT,this.rotationPerSecond="auto",this[tt]=performance.now(),this[rt]=0,this[at]=lt=>{!this.autoRotate||lt.detail.source==="user-interaction"&&(this[$autoRotateStartTime]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[$onCameraChange]),this[$autoRotateStartTime]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[$onCameraChange]),this[$autoRotateStartTime]=performance.now()}updated(lt){super.updated(lt),lt.has("autoRotate")&&(this[$autoRotateStartTime]=performance.now())}[(tt=$autoRotateStartTime,rt=$radiansPerSecond,$syncRotationRate)](lt){this[$radiansPerSecond]=lt[0]}[$tick](lt,ut){if(super[$tick](lt,ut),!this.autoRotate||!this[$getModelIsVisible]()||this[$renderer].isPresenting)return;const ht=Math.min(ut,lt-this[$autoRotateStartTime]-this.autoRotateDelay);ht>0&&(this[$scene].yaw=this.turntableRotation+this[$radiansPerSecond]*ht*.001)}get turntableRotation(){return this[$scene].yaw}resetTurntableRotation(lt=0){this[$scene].yaw=lt}}return at=$onCameraChange,__decorate([e$3({type:Boolean,attribute:"auto-rotate"})],st.prototype,"autoRotate",void 0),__decorate([e$3({type:Number,attribute:"auto-rotate-delay"})],st.prototype,"autoRotateDelay",void 0),__decorate([style({intrinsics:rotationRateIntrinsics,updateHandler:$syncRotationRate}),e$3({type:String,attribute:"rotation-per-second"})],st.prototype,"rotationPerSecond",void 0),st},FocusVisiblePolyfillMixin=it=>{var tt;const rt=ot=>{if(ot.shadowRoot==null||ot.hasAttribute("data-js-focus-visible"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(ot.shadowRoot);else{const lt=()=>{self.applyFocusVisiblePolyfill(ot.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",lt,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",lt)}}return()=>{}},at=Symbol("endPolyfillCoordination");class st extends it{constructor(){super(...arguments),this[tt]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[at]==null&&(this[at]=rt(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this[at]!=null&&(this[at](),this[at]=null)}}return tt=at,st};/* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ModelViewerElement=AnnotationMixin(SceneGraphMixin(StagingMixin(EnvironmentMixin(ControlsMixin(ARMixin(LoadingMixin(AnimationMixin(FocusVisiblePolyfillMixin(ModelViewerElementBase)))))))));customElements.define("model-viewer",ModelViewerElement);const ModelViewer=React$1.forwardRef((it,tt)=>{let{src:rt,alt:at,poster:st,style:ot}=it;return jsx("div",{style:{...ot},ref:tt,children:rt?jsx("model-viewer",{src:rt,alt:at||"3D Model","camera-controls":!0,poster:st||null,style:{width:"100%",height:"100%"}}):null})});ModelViewer.displayName="ModelViewer";const ModelViewer1ba1b804_esm=Object.freeze(Object.defineProperty({__proto__:null,ModelViewer,default:ModelViewer},Symbol.toStringTag,{value:"Module"}))})();
